{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2022-03-14 17:13:37","updatedTime":"2022-03-14 17:13:37","title":"你真的了解 gif 吗？分析 gif 文件和一些奇怪的 gif 特性","link":"http://weixin.sogou.com/weixin?type=2&query=%E5%89%8D%E7%AB%AF%E4%B9%8B%E5%B7%85+%E4%BD%A0%E7%9C%9F%E7%9A%84%E4%BA%86%E8%A7%A3%C2%A0gif%C2%A0%E5%90%97%EF%BC%9F%E5%88%86%E6%9E%90%C2%A0gif%C2%A0%E6%96%87%E4%BB%B6%E5%92%8C%E4%B8%80%E4%BA%9B%E5%A5%87%E6%80%AA%E7%9A%84%C2%A0gif%C2%A0%E7%89%B9%E6%80%A7","description":"<div><div><div id=\"media\" class=\"rich_media_thumb_wrp\">\n\n            <img class=\"rich_media_thumb\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVBsqhpjE2q8k3OycCz5fbkicU4GNCt7OoHydrKmgc7awFiaicicN3kgZslA/0?wx_fmt=jpeg?imageView2/1/w/600\">\n        </div>\n    \n\n    \n\n    <div class=\"rich_media_content\" id=\"js_content\">\n                    \n\n                    \n                    \n                    \n                    <section style=\"text-align: center;margin-bottom: 20px;\"><img class=\"rich_pages wxw-img js_insertlocalimg\" data-ratio=\"0.66640625\" data-s=\"300,640\" data-type=\"jpeg\" data-w=\"1280\" style=\"max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVoOtKibzYhCvficxdxsaNESPDgWLpsHjPbRibczNcuNoChXHc1stK3k9ibQ/640?wx_fmt=jpeg\"></section><section style=\"color: rgb(63, 63, 63);font-size: 16px;font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box;\"><section style=\"box-sizing: border-box;font-size: 14px;color: rgb(145, 145, 145);text-align: left;line-height: 1em;margin-top: 13px;padding-left: 14px;\">作者 | Darrien\t</section><section style=\"box-sizing: border-box;font-size: 14px;color: rgb(145, 145, 145);text-align: left;line-height: 1em;margin-top: 13px;padding-left: 14px;\">\n\t\t翻译 | 王强\t</section><section style=\"box-sizing: border-box;font-size: 14px;color: rgb(145, 145, 145);text-align: left;line-height: 1em;margin-top: 13px;padding-left: 14px;\">\n\t\t策划 | 辛晓亮\t</section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">是的，我指的是主流的，遍布全网的普通 gif，谷歌旗下的 Tenor 或 Facebook 旗下的 giphy 这样的网站到处都是这种 gif。Gif 是所有人都喜欢的，用来分享简短动画片断的文件格式。</p><section style=\"box-sizing: border-box;text-align: center;font-size: 20px;\">\n\t\t<span style=\"height: 65px;line-height: 95px;color: rgb(60, 112, 198);border-bottom: 2px solid rgb(27, 95, 160);background-image: url(\" https: no-repeat initial inline-block>大多数人眼中的 gif</span>\n\t</section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">正如大多数人所知道的那样，gif 是一种动画文件格式。你可能看过 gif 文件的信息，觉得这些文件可真够大的。也许你看了它们后会想：哇，这些图片的清晰度好低啊。但不管怎样，提到 gif 时，你对它的印象应该就是一种短小的动画文件格式。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">然而，这种用例和编写 gif 的开发者所期望的用途大相径庭。在这篇文章中，我们将深入了解 gif 文件的结构，并在这一过程中讨论它的一些有趣特性。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">请注意，这篇文章要探索的是如何理解 gif 格式这一主题，并考察它的一些更深奥的特性。如果你想深入学习如何解析 gif 文件，我推荐以下这些资源。</p><ul style=\"margin-top: 14px;line-height: 1.75em;text-align: left;\" class=\"list-paddingleft-1\"><li style=\"text-align: left;\"><p>W3 规范</p></li><li style=\"text-align: left;\"><p>Matthew Flickinger：gif 里有什么？</p></li><li style=\"text-align: left;\"><p>我发现 ntfs.com 的这份指南也可以帮助入门</p></li></ul><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">写文章的时候我实际上用这些资源做了一个勉强符合要求的 gif 解析器，名为 awful-gif，可以解析一些 gif。我不建议大家使用它。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">下面进入正题。</p><section style=\"box-sizing: border-box;text-align: center;font-size: 20px;\">\n\t\t<span style=\"height: 65px;line-height: 95px;color: rgb(60, 112, 198);border-bottom: 2px solid rgb(27, 95, 160);background-image: url(\" https: no-repeat initial inline-block>gif 的历史</span>\n\t</section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">gif 文件格式是由 Compuserve 在 1987 年创建的。在 1987 年的时候，gif 还是一个相当紧凑的格式！它使用了压缩方法，而且不是一般的压缩方法，而是 LZW 压缩技术。许多旧的文件格式（其中有些是 Compuserve 制作的）使用的则是 RLE（Run Length Encoding），在许多情况下效率没那么高。gif 的一个重要取胜因素就是其良好的压缩率和色域（全 256 色，太棒了！）。（注 1）</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">两年后，gif 文件格式加入了补充内容（gif89a），增加了许多我们今天众所周知和喜爱的特性。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">通过 gif89a 规范，我们可以快速总结出 gif89 与 gif87a 支持的所有特性的区别。</p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li></ul><pre class=\"code-snippet__js\" data-lang=\"nginx\"><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__attribute\">Appendix</span></span></code><code><span class=\"code-snippet_outer\">A. Quick Reference Table.</span></code><code><span class=\"code-snippet_outer\">Block Name                  Required   Label       Ext.   Vers.</span></code><code><span class=\"code-snippet_outer\">Application Extension       Opt. (*)   0xFF (<span class=\"code-snippet__number\">255</span>)  <span class=\"code-snippet__literal\">yes</span>    89a</span></code><code><span class=\"code-snippet_outer\">Comment Extension           Opt. (*)   0xFE (<span class=\"code-snippet__number\">254</span>)  <span class=\"code-snippet__literal\">yes</span>    89a</span></code><code><span class=\"code-snippet_outer\">Global Color Table          Opt. (<span class=\"code-snippet__number\">1</span>)   <span class=\"code-snippet__literal\">none</span>        <span class=\"code-snippet__literal\">no</span>     87a</span></code><code><span class=\"code-snippet_outer\">Graphic Control Extension   Opt. (*)   0xF9 (<span class=\"code-snippet__number\">249</span>)  <span class=\"code-snippet__literal\">yes</span>    89a</span></code><code><span class=\"code-snippet_outer\">Header                      Req. (<span class=\"code-snippet__number\">1</span>)   <span class=\"code-snippet__literal\">none</span>        <span class=\"code-snippet__literal\">no</span>     N/A</span></code><code><span class=\"code-snippet_outer\">Image Descriptor            Opt. (*)   0x2C (<span class=\"code-snippet__number\">044</span>)  <span class=\"code-snippet__literal\">no</span>     87a (89a)</span></code><code><span class=\"code-snippet_outer\">Local Color Table           Opt. (*)   <span class=\"code-snippet__literal\">none</span>        <span class=\"code-snippet__literal\">no</span>     87a</span></code><code><span class=\"code-snippet_outer\">Logical Screen Descriptor   Req. (<span class=\"code-snippet__number\">1</span>)   <span class=\"code-snippet__literal\">none</span>        <span class=\"code-snippet__literal\">no</span>     87a (89a)</span></code><code><span class=\"code-snippet_outer\">Plain Text Extension        Opt. (*)   0x01 (<span class=\"code-snippet__number\">001</span>)  <span class=\"code-snippet__literal\">yes</span>    89a</span></code><code><span class=\"code-snippet_outer\">Trailer                     Req. (<span class=\"code-snippet__number\">1</span>)   0x3B (<span class=\"code-snippet__number\">059</span>)  <span class=\"code-snippet__literal\">no</span>     87a</span></code><code><span class=\"code-snippet_outer\">Unlabeled Blocks</span></code><code><span class=\"code-snippet_outer\">Header                      Req. (<span class=\"code-snippet__number\">1</span>)   <span class=\"code-snippet__literal\">none</span>        <span class=\"code-snippet__literal\">no</span>     N/A</span></code><code><span class=\"code-snippet_outer\">Logical Screen Descriptor   Req. (<span class=\"code-snippet__number\">1</span>)   <span class=\"code-snippet__literal\">none</span>        <span class=\"code-snippet__literal\">no</span>     87a (89a)</span></code><code><span class=\"code-snippet_outer\">Global Color Table          Opt. (<span class=\"code-snippet__number\">1</span>)   <span class=\"code-snippet__literal\">none</span>        <span class=\"code-snippet__literal\">no</span>     87a</span></code><code><span class=\"code-snippet_outer\">Local Color Table           Opt. (*)   <span class=\"code-snippet__literal\">none</span>        <span class=\"code-snippet__literal\">no</span>     87a</span></code><code><span class=\"code-snippet_outer\">Graphic-Rendering Blocks</span></code><code><span class=\"code-snippet_outer\">Plain Text Extension        Opt. (*)   0x01 (<span class=\"code-snippet__number\">001</span>)  <span class=\"code-snippet__literal\">yes</span>    89a</span></code><code><span class=\"code-snippet_outer\">Image Descriptor            Opt. (*)   0x2C (<span class=\"code-snippet__number\">044</span>)  <span class=\"code-snippet__literal\">no</span>     87a (89a)</span></code><code><span class=\"code-snippet_outer\">Control Blocks</span></code><code><span class=\"code-snippet_outer\">Graphic Control Extension   Opt. (*)   0xF9 (<span class=\"code-snippet__number\">249</span>)  <span class=\"code-snippet__literal\">yes</span>    89a</span></code><code><span class=\"code-snippet_outer\">Special Purpose Blocks</span></code><code><span class=\"code-snippet_outer\">Trailer                     Req. (<span class=\"code-snippet__number\">1</span>)   0x3B (<span class=\"code-snippet__number\">059</span>)  <span class=\"code-snippet__literal\">no</span>     87a</span></code><code><span class=\"code-snippet_outer\">Comment Extension           Opt. (*)   0xFE (<span class=\"code-snippet__number\">254</span>)  <span class=\"code-snippet__literal\">yes</span>    89a</span></code><code><span class=\"code-snippet_outer\">Application Extension       Opt. (*)   0xFF (<span class=\"code-snippet__number\">255</span>)  <span class=\"code-snippet__literal\">yes</span>    89a</span></code><code><span class=\"code-snippet_outer\">legend:           (<span class=\"code-snippet__number\">1</span>)   if present, at most one occurrence</span></code><code><span class=\"code-snippet_outer\">                  (*)   zero or more occurrences</span></code><code><span class=\"code-snippet_outer\">                  (+)   one or more occurrences</span></code><code><span class=\"code-snippet_outer\"><br></span></code></pre></section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">对于没有读过整份规范的人们来说，这里面的大部分内容可谓不知所云，所以让我们讨论一下 gif 是如何组合在一起的，顺便再谈谈它的一些奇怪之处。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">在我们开始之前，先从规范中找些乐趣。</p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li><li><li><li><li><li></ul><pre class=\"code-snippet__js\" data-lang=\"python\"><code><span class=\"code-snippet_outer\">Appendix</span></code><code><span class=\"code-snippet_outer\">D. Conventions.</span></code><code><span class=\"code-snippet_outer\"><br></span></code><code><span class=\"code-snippet_outer\">Animation - The Graphics Interchange Format <span class=\"code-snippet__keyword\">is</span> <span class=\"code-snippet__keyword\">not</span> intended <span class=\"code-snippet__keyword\">as</span> a platform <span class=\"code-snippet__keyword\">for</span></span></code><code><span class=\"code-snippet_outer\">animation, even though it can be done <span class=\"code-snippet__keyword\">in</span> a limited way.</span></code><code><span class=\"code-snippet_outer\"><br></span></code></pre></section><blockquote class=\"js_blockquote_wrap\" data-type=\"2\" data-url=\"\" data-author-name=\"\" data-content-utf8-length=\"7\" data-source-title=\"\"><section class=\"js_blockquote_digest\"><section>附录D. </section><section>公约。</section></section></blockquote><blockquote class=\"js_blockquote_wrap\" data-type=\"2\" data-url=\"\" data-author-name=\"\" data-content-utf8-length=\"41\" data-source-title=\"\"><section class=\"js_blockquote_digest\"><section>动画——这个图形交换格式不是要成为一个动画平台，尽管它在某种程度上可以做到这一点。</section></section></blockquote><section style=\"box-sizing: border-box;text-align: center;font-size: 20px;\">\n\t\t<span style=\"height: 65px;line-height: 95px;color: rgb(60, 112, 198);border-bottom: 2px solid rgb(27, 95, 160);background-image: url(\" https: no-repeat initial inline-block>gif 的结构</span>\n\t<br></section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">下面我会用一个例子来具体分析。如果你想跟着做，下载它即可。（注 2）</p><section style=\"text-align: center;margin-top: 10px;\"><img class=\"rich_pages wxw-img js_insertlocalimg\" data-ratio=\"1.1863636363636363\" data-s=\"300,640\" data-type=\"gif\" data-w=\"220\" style=\"max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVdWdrlq5icwqRzbW8ZuNOPOkLSfM8Jsic7RaeTfhxpiaheN6G3hzCvsnQA/640?wx_fmt=gif\"></section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">如果你在家里跟着学，只需要一台安装有 hexdump 工具的机器即可。我要用的是 xxd，它预装在大多数 unix 系统（Linux、macOS）上，或者可以通过 vim-common 包安装。</p><blockquote class=\"js_blockquote_wrap\" data-type=\"2\" data-url=\"\" data-author-name=\"\" data-content-utf8-length=\"4\" data-source-title=\"\"><section class=\"js_blockquote_digest\"><section>gif 头</section></section></blockquote><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">每个 gif 都以一个头开始，其中的 magic 位标志着它是什么类型的 gif，还有一点额外的信息，提供关于图像的基本细节。<br></p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li><li><li></ul><pre class=\"code-snippet__js\" data-lang=\"makefile\"><code><span class=\"code-snippet_outer\">🜛 xxd Sunflower_as_gif_websafe_89a.gif | head -1 <span class=\"code-snippet__comment\"># and some arrows</span></span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__section\">00000000: -&gt; 4749 4638 3961 </span></span></code><code><span class=\"code-snippet_outer\"><br></span></code></pre></section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">用 xxd 可以轻松把 gif 头信息解码为 ascii（如果它有意义的话）。看看上面的内容写着，gif89a！这是一个经过认证的有效 gif!</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">每个字母都是一个字节，所以我们在这里要找的 magic 字节是：0x47、；0x49、0x46、0x38、0x39、0x61。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">另外，最后三个字节可能是：0x38、0x37、0x61，如果只支持 gif87a 文件格式会是这样。我们主要研究 gif89，老版本的格式就一带而过了。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">此外 gif 头里面就没有什么有趣的东西了，因为它只是静态文本，所以我们继续往前走。</p><blockquote class=\"js_blockquote_wrap\" data-type=\"2\" data-url=\"\" data-author-name=\"\" data-content-utf8-length=\"21\" data-source-title=\"\"><section class=\"js_blockquote_digest\"><section>先等一下问个问题：谁会接受 gif87a 呢？</section></section></blockquote><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">在研究 gif 时，我想看看主要的 gif 托管供应商是否会接受和保留 gif87a 规范的格式。它们能正常使用吗，还是说只能报错？<br></p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">这是我们之前看到的向日葵的 gif87a 版本。这个版本只用在这里。</p><section style=\"text-align: center;margin-top: 10px;\"><img class=\"rich_pages wxw-img js_insertlocalimg\" data-ratio=\"1.188\" data-s=\"300,640\" data-type=\"gif\" data-w=\"250\" style=\"max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIV1AAiad5DiaC8B8KveBg7o9bumIIcVVP1ukzibFqJbfXrNE71stJuR0mIQ/640?wx_fmt=gif\"></section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">我们来把图像上传到 4 家头部 gif 托管供应商：</p><ul style=\"margin-top: 14px;line-height: 1.75em;text-align: left;\" class=\"list-paddingleft-1\"><li style=\"text-align: left;\"><p>tenor</p></li><li style=\"text-align: left;\"><p>giphy</p></li><li style=\"text-align: left;\"><p>imgur</p></li><li style=\"text-align: left;\"><p>gfycat</p></li></ul><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">我们开始的时候 gif 头是这样：</p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li><li></ul><pre class=\"code-snippet__js\" data-lang=\"makefile\"><code><span class=\"code-snippet_outer\">🜛 xxd Sunflower_as_gif_websafe_gif87a.gif | head -1</span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__section\">00000000: 4749 4638 3761 fa00 2901 f500 00ff cc33  gif87a..)......3</span></span></code></pre></section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">以下是重新下载我刚上传的图片后的结果。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">Tenor 重编码为 gif89a：</p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li><li></ul><pre class=\"code-snippet__js\" data-lang=\"makefile\"><code><span class=\"code-snippet_outer\">🜛 Downloads xxd tenor.gif | head -1</span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__section\">00000000: 4749 4638 3961 a401 f201 f700 0006 0406  gif89a..........</span></span></code></pre></section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">giphy 重编码为 gif89a：</p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li><li></ul><pre class=\"code-snippet__js\" data-lang=\"makefile\"><code><span class=\"code-snippet_outer\">🜛 Downloads xxd giphy.gif | head -1</span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__section\">00000000: 4749 4638 3961 fa00 2901 f525 0000 0000  gif89a..)..%....</span></span></code></pre></section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">其实这有点忽悠人，giphy 只接受动画形式的 gif，所以我们必须点击编辑按钮（显示帧编辑器），然后点击完成才行。gif87a 规范中允许存储多张图片，但它们不能有延迟（因此没有动画，见注 3）。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">imgur 保留了原始文件！！！</p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li><li></ul><pre class=\"code-snippet__js\" data-lang=\"makefile\"><code><span class=\"code-snippet_outer\">🜛 Downloads xxd aUxm3NN.gif | head -1</span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__section\">00000000: 4749 4638 3761 fa00 2901 f500 00ff cc33  gif87a..)......3</span></span></code></pre></section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">至于 gfycat，它一直卡在最后的“编码“阶段整整 20 分钟。希望我没有在周末让他们的一位可怜的工程师看到什么警报。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">以上简短分析表明，由世界上最大的两家科技公司所有的两家最大的托管供应商并不尊重我的旧 gif 文件，而是完全重写了它。事实上，对于 giphy 这家公司来说，它似乎只尊重一种 gif......</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">总之回到探索文件格式的话题上。</p><blockquote class=\"js_blockquote_wrap\" data-type=\"2\" data-url=\"\" data-author-name=\"\" data-content-utf8-length=\"7\" data-source-title=\"\"><section class=\"js_blockquote_digest\"><section>逻辑屏幕描述符</section></section></blockquote><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">那么你的图像是如何显示成某个分辨率的呢？假设我们在 macOS 的 Preview 中使用“get info“特性，它是怎么知道这张图片是 220x261 的？<br></p><section style=\"text-align: center;margin-top: 10px;\"><img class=\"rich_pages wxw-img js_insertlocalimg\" data-ratio=\"2.570291777188329\" data-s=\"300,640\" data-type=\"png\" data-w=\"377\" style=\"max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVUkiaHwYibdcs3wNAibNLLylRehicb0m6GpdpQKPFeAwt8GuSsITnKe74lQ/640?wx_fmt=png\"></section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">信不信由你，这是在文件格式中内置的！（注 4）</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">字节 0x6-0xA 就是这部分信息，另外还加了点内容。字节 0x6 和 0x8 指的是长度和宽度。</p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li><li></ul><pre class=\"code-snippet__js\" data-lang=\"makefile\"><code><span class=\"code-snippet_outer\">🜛 xxd Sunflower_as_gif_websafe_89a.gif | head -1 <span class=\"code-snippet__comment\"># and some arrows</span></span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__section\">00000000:  4749 4638 3961 -&gt; dc00 0501 </span></span></code></pre></section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">每个维度有两个字节来指定大小。同样一定要记住，gif 文件格式中的所有字节都被指定为小 endian（注 5）。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">首先是宽度，是 0x00dc（从 dc00 重新排序）=&gt; 220（十进制）。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">然后是长度，是 0x0105（从 0501 重新排序）=&gt; 261（十进制）。</p><blockquote class=\"js_blockquote_wrap\" data-type=\"2\" data-url=\"\" data-author-name=\"\" data-content-utf8-length=\"24\" data-source-title=\"\"><section class=\"js_blockquote_digest\"><section>慢着，这是否意味着我们的 gif 有一个分辨率限制？</section></section></blockquote><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">这就对了！因为每个位置只有两个字节，所以宽度或长度都不能大于 65535。我们可以尝试在 gimp 中制作一个 1x65536 的新 gif 来验证这一点。<br></p><section style=\"text-align: center;margin-top: 10px;\"><img class=\"rich_pages wxw-img js_insertlocalimg\" data-ratio=\"0.48507462686567165\" data-s=\"300,640\" data-type=\"png\" data-w=\"402\" style=\"max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVMcVOguH7V2ick07nA3iaBbpl6EHwOGVm2icxOH7rbXSvw1NRadt1Wd2Pg/640?wx_fmt=png\"></section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">其他文件格式在这方面也差不多。如果你想下载理论上最宽的 png，可以点这里。这个文件很小，但打开它的时候你的图像浏览器可能会崩溃。Firefox 浏览器很难打开它，并报告了一个错误，尽管它是符合规范的。</p><section style=\"text-align: center;margin-top: 10px;\"><img class=\"rich_pages wxw-img js_insertlocalimg\" data-ratio=\"0.05693069306930693\" data-s=\"300,640\" data-type=\"png\" data-w=\"808\" style=\"max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIV11BJfribDnbicVTeW6vQbHSfMW3UzL6iaRzrvaFp3Yw4LqYaLZ3jUn7EA/640?wx_fmt=png\"></section><blockquote class=\"js_blockquote_wrap\" data-type=\"2\" data-url=\"\" data-author-name=\"\" data-content-utf8-length=\"10\" data-source-title=\"\"><section class=\"js_blockquote_digest\"><section>回到逻辑屏幕描述符上</section></section></blockquote><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">不过逻辑屏幕描述符还没说完，接下来是一组打包的字段。用规范中的图表解释比较容易。<br></p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li><li><li><li></ul><pre class=\"code-snippet__js\" data-lang=\"properties\"><code><span class=\"code-snippet_outer\">     <span class=\"code-snippet__meta\"><packed> <span class=\"code-snippet__string\">Fields&gt;  =      Global Color Table Flag       1 Bit</span></packed></span></span></code><code><span class=\"code-snippet_outer\">                             <span class=\"code-snippet__attr\">Color</span> <span class=\"code-snippet__string\">Resolution              3 Bits</span></span></code><code><span class=\"code-snippet_outer\">                             <span class=\"code-snippet__attr\">Sort</span> <span class=\"code-snippet__string\">Flag                     1 Bit</span></span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__attr\">                             Size of Global Color Table    3 Bits</span></span></code></pre></section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">这里有关于全局颜色表（Global Color Table）的信息，如果设置了全局颜色表位，它将出现在逻辑屏幕描述符之后。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">颜色分辨率（Color Resolution）决定了全局颜色表中每种颜色有多少个字节。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">排序标志（Sort Flag）会告诉解码器排在前面的颜色更重要，它会以有用的程度从高到低排序颜色。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">而全局颜色表的大小是说，颜色表有多大。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">在我们向日葵图片的 0xA 字节中，我们有 0xF7 的结果</p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li><li></ul><pre class=\"code-snippet__js\" data-lang=\"makefile\"><code><span class=\"code-snippet_outer\">🜛 xxd Sunflower_as_gif_websafe_89a.gif | head -1</span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__section\">00000000: 4749 4638 3961 dc00 0501 -&gt; f7 </span></span></code></pre></section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">或者在二进制中就是：1111 0111</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">这意味着我们的 gif 基本满载，除了 GCT 没有排序。</p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li><li><li><li><li><li><li><li><li></ul><pre class=\"code-snippet__js\" data-lang=\"sql\"><code><span class=\"code-snippet_outer\">                             ┌──────────GCT not sorted</span></code><code><span class=\"code-snippet_outer\">                             ▼          by importance</span></code><code><span class=\"code-snippet_outer\">                        1111 0111</span></code><code><span class=\"code-snippet_outer\">                        ▲───  ───</span></code><code><span class=\"code-snippet_outer\">      GCT <span class=\"code-snippet__keyword\">set</span>───────────┘ ▲    ▲</span></code><code><span class=\"code-snippet_outer\">                          │    │</span></code><code><span class=\"code-snippet_outer\">    <span class=\"code-snippet__number\">3</span> <span class=\"code-snippet__keyword\">bytes</span> per           │    └─────GCT <span class=\"code-snippet__keyword\">is</span> <span class=\"code-snippet__number\">768</span> <span class=\"code-snippet__keyword\">bytes</span></span></code><code><span class=\"code-snippet_outer\">    color    ─────────────┘          (<span class=\"code-snippet__keyword\">max</span> <span class=\"code-snippet__keyword\">size</span>)</span></code><code><span class=\"code-snippet_outer\">(<span class=\"code-snippet__keyword\">max</span> resolution)</span></code></pre></section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">全局颜色表保存了每个字节部分所使用的颜色。它们是 0-255 的标准 RGB 值，你可以在任何现代 RGB 取色器里使用这些数值。</p><blockquote class=\"js_blockquote_wrap\" data-type=\"2\" data-url=\"\" data-author-name=\"\" data-content-utf8-length=\"17\" data-source-title=\"\"><section class=\"js_blockquote_digest\"><section>等一下，那个全局颜色表是可选的吗？</section></section></blockquote><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">你可能已经注意到 0xA 字节的第一位说 GCT 可以是可选的。这的确很有趣。我们如何在没有指定它需要什么颜色的情况下渲染图像呢？<br></p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">根据下面的规范：</p><blockquote class=\"js_blockquote_wrap\" data-type=\"2\" data-url=\"\" data-author-name=\"\" data-content-utf8-length=\"110\" data-source-title=\"\"><section class=\"js_blockquote_digest\"><section>颜色表——全局颜色表和局部颜色表都是可选的；如果存在全局颜色表，它将用于数据流中没有给出局部颜色表的所有图像；如果存在局部颜色表，它将覆盖全局颜色表。然而，如果两个颜色表都不存在，应用程序可以自由地使用一个任意的颜色表。</section></section></blockquote><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">如果我们拿走一张图像的全局颜色表，现代渲染器会对我们的图像做什么呢？我敢肯定会有一些惊人的事情发生。<br></p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">我们的图像指定的颜色表大小为 768 字节。它从 0xA 字节开始...... 假设我们像这样把 0xA 字节的最有意义的比特清零。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">然后删除到第 789 字节（独占）。</p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li><li></ul><pre class=\"code-snippet__js\" data-lang=\"makefile\"><code><span class=\"code-snippet_outer\">🜛 xxd Sunflower_as_gif_89a-no-gct.gif | head -1</span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__section\">00000000: 4749 4638 3961 dc00 0501 007f 8121 f904  gif89a.......!..</span></span></code></pre></section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">现在第一行是上面这样结束的，这仍然是一个完全有效的 gif。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">简直了！在写这篇文章的时候，它就只显示一个完美的黑色方块。在我试过的每一个渲染器中都是这样的情况。Gimp、Chrome、Firefox、Preview、gifiddle，随便哪个都一样。<br></p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">总之回到逻辑屏幕描述符上。</p><blockquote class=\"js_blockquote_wrap\" data-type=\"2\" data-url=\"\" data-author-name=\"\" data-content-utf8-length=\"10\" data-source-title=\"\"><section class=\"js_blockquote_digest\"><section>继续谈逻辑屏幕描述符</section></section></blockquote><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">在描述全局颜色表的字节之后，有两个描述屏幕描述符的末端字节。<br></p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">字节 B 是背景颜色，指的是全局颜色表的索引；字节 C 是像素长宽比，描述了像素的方正度。</p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li><li><li><li><li><li><li><li></ul><pre class=\"code-snippet__js\" data-lang=\"properties\"><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__meta\">🜛</span> <span class=\"code-snippet__string\">xxd Sunflower_as_gif_websafe_89a.gif | head -1</span></span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__attr\">00000000</span>: <span class=\"code-snippet__string\">4749 4638 3961 dc00 0501 f700 0002 0102  gif89a..........</span></span></code><code><span class=\"code-snippet_outer\">                                     <span class=\"code-snippet__meta\">^</span>  <span class=\"code-snippet__string\">^</span></span></code><code><span class=\"code-snippet_outer\">                                     <span class=\"code-snippet__meta\">|</span>  <span class=\"code-snippet__string\">|</span></span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__attr\">Background</span> <span class=\"code-snippet__string\">color is color in index 0 of |</span></span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__attr\">GCT</span>                                     <span class=\"code-snippet__string\">|</span></span></code><code><span class=\"code-snippet_outer\">                                        <span class=\"code-snippet__attr\">Pixel</span> <span class=\"code-snippet__string\">aspect ratio is 0:0 or host</span></span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__attr\">                                        pixel aspect ratio.</span></span></code></pre></section><blockquote class=\"js_blockquote_wrap\" data-type=\"2\" data-url=\"\" data-author-name=\"\" data-content-utf8-length=\"13\" data-source-title=\"\"><section class=\"js_blockquote_digest\"><section>等一下，像素长宽比是什么？</section></section></blockquote><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">像素并不总是正方形的！字节也不总是 8 位，但这一点就不多说了。<br></p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">gif 和其他一些最流行的现代图像格式都支持非正方形像素。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">我想知道最流行的 gif 渲染器在渲染非方形像素时兼容性如何。我们在 Firefox 和 Chrome 中做一个流行的测试，看看它们看起来如何：http://frs.badcoffee.info/PAR_AcidTest/</p><section style=\"text-align: center;margin-top: 10px;\"><img class=\"rich_pages wxw-img js_insertlocalimg\" data-ratio=\"0.5125\" data-s=\"300,640\" data-type=\"png\" data-w=\"1280\" style=\"max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVqCnQvYDjpJMU9oXxTFp6I5LZKp2cRbfFNI4fQd9hziaALib8Oarm8dkA/640?wx_fmt=png\"></section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">上面依次是：jpg、png 和 gif。而 Firefox、Chrome 和 Preview 都忽略了长宽比。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">不幸的是，这一特性普遍不被支持，而且目前在 Firefox 中有一个 16 年的老 bug：https://bugzilla.mozilla.org/show_bug.cgi?id=333377</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">甚至 gifiddle 这个我能找到的兼容性最好的 gif 浏览器也不支持非方形像素：https://github.com/ata4/gifiddle/issues/1</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">如果你真的想显示非方形像素，可以用调整过的 gimp 来做。此外，grafx2 显然可以处理非常特定的奇怪像素分辨率。不过我还没有亲自测试过。</p><blockquote class=\"js_blockquote_wrap\" data-type=\"2\" data-url=\"\" data-author-name=\"\" data-content-utf8-length=\"7\" data-source-title=\"\"><section class=\"js_blockquote_digest\"><section>回到全局颜色表</section></section></blockquote><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">全局颜色表（GCT）显然是 gif 最无聊的部分。这里真的没有什么值得谈论的东西。<br></p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">我的 awful-gif 项目可以输出向日葵的 GCT 中的所有颜色（也许其他图像也行）。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">GCT 的解析就在这里，你可以看到它真的没有什么特别的地方。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">用下面的命令运行：</p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li></ul><pre class=\"code-snippet__js\" data-lang=\"nginx\"><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__attribute\">cargo</span> run --quiet -- --gif-file ./experiments/Sunflower_as_gif_websafe.gif</span></code></pre></section><blockquote class=\"js_blockquote_wrap\" data-type=\"2\" data-url=\"\" data-author-name=\"\" data-content-utf8-length=\"9\" data-source-title=\"\"><section class=\"js_blockquote_digest\"><section>可选的图形控制扩展</section></section></blockquote><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">下面我们讲图形控制扩展（GCE），由扩展引入器 0x21 引入（extension introduced），然后是 0xF9（！）<br></p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">可用的扩展有许多，但图形控制扩展可以说是最重要的扩展之一，至少在现代用例中是这样。GCE 允许各帧之间存在显示延迟，这样 gif 才能成为“动画“。GCE 还允许其他一些事项。</p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li><li><li></ul><pre class=\"code-snippet__js\" data-lang=\"makefile\"><code><span class=\"code-snippet_outer\">🜛 xxd Sunflower_as_gif_websafe_89a.gif | head -50 | tail -2</span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__section\">00000300: 88ae b091 a5b1 a4b9 be94 887f 81 -&gt; 21 f904  .............!..</span></span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__section\">00000310: 0000 0000 </span></span></code></pre></section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">这个 gif 并不是动画，所以这里并没有发生很多事情。正如你所看到的，上面有很多零，但我们还是一个字节一个字节来讲。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">第一个字节是块大小，在这个例子中是 0x04，但实际上根据规范它总是 0x04。</p><blockquote class=\"js_blockquote_wrap\" data-type=\"2\" data-url=\"\" data-author-name=\"\" data-content-utf8-length=\"16\" data-source-title=\"\"><section class=\"js_blockquote_digest\"><section>等一下，我们能不能把块大小去掉？</section></section></blockquote><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">如果块大小总是一个静态的常数，那么它就不太重要了是吗？从技术上讲，它是规范的一部分，但实际上并没有什么作用。我们再在流行的图像浏览器中打开它看看。<br></p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">在这些测试中我将使用一个更简单的 gif，这样更容易看到发生了什么情况：<span style=\"text-align: center;color: rgb(63, 63, 63);\"></span></p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">在下面的测试中我对它做了修改，删除了 GCE。修改后的版本以 xxd 格式保存在下面。</p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li><li><li><li><li><li><li><li><li><li><li></ul><pre class=\"code-snippet__js\" data-lang=\"http\"><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__attribute\">00000000</span>: 4749 4638 3961 2000 3400 f0ff 00ff ffff  gif89a .4.......</span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__attribute\">00000010</span>: 0000 0021 f903 0500 0002 002c 0000 0000  ...!.......,....</span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__attribute\">00000020</span>: 2000 3400 0002 788c 8fa9 cb0b 0fa3 94ed   .4...x.........</span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__attribute\">00000030</span>: cc7b abc1 1cea d075 5fc8 8d64 a69d 68a5  .{.....u_..d..h.</span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__attribute\">00000040</span>: 4e66 eba5 702c 3675 cddc a5bd e34e bfcb  Nf..p,6u.....N..</span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__attribute\">00000050</span>: 0131 ace1 ea47 0405 9128 9f42 9714 2667  .1...G...(.B..&amp;g</span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__attribute\">00000060</span>: a70d 3564 bd1a b52e 25b7 f905 8729 de31  ..5d....%....).1</span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__attribute\">00000070</span>: cd1c c9a2 016a 74db fc1e c7c3 f36f 9d7b  .....jt......o.{</span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__attribute\">00000080</span>: d7e6 af7b 6a7f f607 13d8 32a8 5258 55e6  ...{j.....2.RXU.</span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__attribute\">00000090</span>: 9608 b728 d748 f768 1789 f751 b950 0000  ...(.H.h...Q.P..</span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__attribute\">000000a0: 3b                                       ;</span></span></code></pre></section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">将其保存到一个名为 invalid.hex 的文本文件中，然后执行：xxd -r invalid.hex &gt; invalid.gif</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">(更新的字节在：0x16，从 0x4-&gt;0x03)</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">第一个是 macOS Preview：</p><section style=\"text-align: center;margin-top: 10px;\"><img class=\"rich_pages wxw-img js_insertlocalimg\" data-ratio=\"0.8941605839416058\" data-s=\"300,640\" data-type=\"png\" data-w=\"274\" style=\"max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVEoVRCadrU7F8Rhrqr81y13tkWVF9LaOHnUVH2K6iaSoM0doDCu3licsQ/640?wx_fmt=png\"></section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">Preview 是符合标准的！</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">接下来我们试试 Firefox：</p><section style=\"text-align: center;margin-top: 10px;\"><img class=\"rich_pages wxw-img js_insertlocalimg\" data-ratio=\"0.4264705882352941\" data-s=\"300,640\" data-type=\"png\" data-w=\"816\" style=\"max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVibkqnHsk0XUIibZRLg9zY36eLwxBV1gjh61sefWtnaV66L2pwQjNgcEg/640?wx_fmt=png\"></section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">Firefox 知道这是一个静态值，并忽略了它的结果。这并不完全符合标准，但可能是最聪明的做法。</p><section style=\"text-align: center;margin-top: 10px;\"><img class=\"rich_pages wxw-img js_insertlocalimg\" data-ratio=\"0.592\" data-s=\"300,640\" data-type=\"png\" data-w=\"625\" style=\"max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVZFEqGFokzPicfCrdGKvyzBMcasOEZFuVibPEakW5ibL4B7EPn4TNGTDDw/640?wx_fmt=png\"></section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">当块大小被移除后，Chrome 会有点抓狂。在这里，Chrome 肯定是最不符合标准的。</p><blockquote class=\"js_blockquote_wrap\" data-type=\"2\" data-url=\"\" data-author-name=\"\" data-content-utf8-length=\"8\" data-source-title=\"\"><section class=\"js_blockquote_digest\"><section>回到图形控制扩展</section></section></blockquote><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">在我们读完块大小之后，是一个包装好的字段，描述如下。<br></p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li><li><li><li></ul><pre class=\"code-snippet__js\" data-lang=\"properties\"><code><span class=\"code-snippet_outer\">      <span class=\"code-snippet__meta\"><packed> <span class=\"code-snippet__string\">Fields&gt;  =     Reserved                      3 Bits</span></packed></span></span></code><code><span class=\"code-snippet_outer\">                             <span class=\"code-snippet__attr\">Disposal</span> <span class=\"code-snippet__string\">Method               3 Bits</span></span></code><code><span class=\"code-snippet_outer\">                             <span class=\"code-snippet__attr\">User</span> <span class=\"code-snippet__string\">Input Flag               1 Bit</span></span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__attr\">                             Transparent Color Flag        1 Bit</span></span></code></pre></section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">在我们的图像中所有这些字段都被设置为 0，所以我只解释它们。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">Reserved 是为 gif22a 出现时设置的，我们需要这三个位来做一些好事。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">User Input 是为了接受用户输入，通过点击鼠标或按下键盘将 gif 图片推进到下一幅。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">透明索引是用来设置我们是否应该允许透明。</p><blockquote class=\"js_blockquote_wrap\" data-type=\"2\" data-url=\"\" data-author-name=\"\" data-content-utf8-length=\"18\" data-source-title=\"\"><section class=\"js_blockquote_digest\"><section>等一下，gif 可以接受用户输入？？？</section></section></blockquote><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">是的，你没看错。gif 可以接受用户的输入来推进到下一帧。这个可怜的家伙为了用 png 重现这一特性建立了一个网站。真可惜，他像我一样被困在这里了，就因为他没看过 gif 规范。<br></p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">我们不妨讨论 gif 支持的另一个奇怪特性，即纯文本扩展。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">纯文本扩展允许 gif 制作者在他们喜欢的任何地方嵌入单色文本，并直接在图像上进行一些基本的样式设计。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">纯文本扩展和用户输入扩展一样，除了像 gifiddle 的这样为了好玩而制作的 gif 查看器外，可能从未被任何 gif 查看器实现。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">BOB_89A.gif 可能是有史以来在互联网上发布的第一个 gif，是一个同时使用这两种方式的 gif 例子。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">下面是 BOB_89A.gif 在现代浏览器中的渲染。</p><section style=\"text-align: center;margin-top: 10px;\"><img class=\"rich_pages wxw-img js_insertlocalimg\" data-ratio=\"0.625\" data-s=\"300,640\" data-type=\"gif\" data-w=\"320\" style=\"max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVDEmxg3EGrCIhMRTVicW9sqicxWylzLTpf9N7VW9QTw6ggFmviaGe6ZiapQ/640?wx_fmt=gif\"></section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">然而，如果你把它放到 gifiddle 中，会得到一个非常不同的结果，最后的信息是一个非常重要的事实。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">不过我不会剧透这个惊喜。你可以下载这个 gif 放到 gifiddle 里，看看会发生什么。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">gifiddle 链接：http://ata4.github.io/gifiddle/</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">任何现代浏览器或 gif 浏览器都不支持这两项特性。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">如果你想阅读更多关于纯文本扩展的信息，可以看这里。</p><blockquote class=\"js_blockquote_wrap\" data-type=\"2\" data-url=\"\" data-author-name=\"\" data-content-utf8-length=\"7\" data-source-title=\"\"><section class=\"js_blockquote_digest\"><section>可选的注释扩展</section></section></blockquote><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">接下来是注释扩展，实际上它可以出现在一个块可能开始的任何地方。然而它最常出现在 gif 的这一部分。<br></p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">注释部分只允许包含 7 位的 ascii，并且是供人类阅读的。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">由于注释部分只是 ascii，你可以直接发射字符串并在输出中找到注释。</p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li><li></ul><pre class=\"code-snippet__js\" data-lang=\"javascript\"><code><span class=\"code-snippet_outer\">🜛 strings Sunflower_as_gif_websafe_89a.gif | head <span class=\"code-snippet__number\">-7</span> | tail <span class=\"code-snippet__number\">-1</span></span></code><code><span class=\"code-snippet_outer\">QFile source: https:<span class=\"code-snippet__comment\">//commons.wikimedia.org/wiki/File:Sunflower_as_gif_websafe.gif</span></span></code></pre></section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">在这张图片中，它开始于图片的 0x310 字节。</p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li><li><li><li><li><li><li></ul><pre class=\"code-snippet__js\" data-lang=\"go\"><code><span class=\"code-snippet_outer\">🜛 xxd Sunflower_as_gif_websafe_89a.gif | head <span class=\"code-snippet__number\">-55</span> | tail <span class=\"code-snippet__number\">-6</span></span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__number\">00000310</span>: <span class=\"code-snippet__number\">0000</span> <span class=\"code-snippet__number\">0000</span> <span class=\"code-snippet__number\">0021</span> fe51 <span class=\"code-snippet__number\">4669</span> <span class=\"code-snippet__number\">6</span>c65 <span class=\"code-snippet__number\">2073</span> <span class=\"code-snippet__number\">6f</span>75  .....!.QFile sou</span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__number\">00000320</span>: <span class=\"code-snippet__number\">7263</span> <span class=\"code-snippet__number\">653</span>a <span class=\"code-snippet__number\">2068</span> <span class=\"code-snippet__number\">7474</span> <span class=\"code-snippet__number\">7073</span> <span class=\"code-snippet__number\">3</span>a2f <span class=\"code-snippet__number\">2f</span>63 <span class=\"code-snippet__number\">6f</span>6d  rce: https:<span class=\"code-snippet__comment\">//com</span></span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__number\">00000330</span>: <span class=\"code-snippet__number\">6d</span>6f <span class=\"code-snippet__number\">6e73</span> <span class=\"code-snippet__number\">2e77</span> <span class=\"code-snippet__number\">696</span>b <span class=\"code-snippet__number\">696d</span> <span class=\"code-snippet__number\">6564</span> <span class=\"code-snippet__number\">6961</span> <span class=\"code-snippet__number\">2e6f</span>  mons.wikimedia.o</span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__number\">00000340</span>: <span class=\"code-snippet__number\">7267</span> <span class=\"code-snippet__number\">2f</span>77 <span class=\"code-snippet__number\">696</span>b <span class=\"code-snippet__number\">692f</span> <span class=\"code-snippet__number\">4669</span> <span class=\"code-snippet__number\">6</span>c65 <span class=\"code-snippet__number\">3</span>a53 <span class=\"code-snippet__number\">756</span>e  rg/wiki/File:Sun</span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__number\">00000350</span>: <span class=\"code-snippet__number\">666</span>c <span class=\"code-snippet__number\">6f</span>77 <span class=\"code-snippet__number\">6572</span> <span class=\"code-snippet__number\">5f</span>61 <span class=\"code-snippet__number\">735f</span> <span class=\"code-snippet__number\">6769</span> <span class=\"code-snippet__number\">665f</span> <span class=\"code-snippet__number\">7765</span>  flower_as_gif_we</span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__number\">00000360</span>: <span class=\"code-snippet__number\">6273</span> <span class=\"code-snippet__number\">6166</span> <span class=\"code-snippet__number\">652</span>e <span class=\"code-snippet__number\">6769</span> <span class=\"code-snippet__number\">6600</span> <span class=\"code-snippet__number\">2</span>c00 <span class=\"code-snippet__number\">0000</span> <span class=\"code-snippet__number\">00d</span>c  bsafe.gif.,.....</span></code></pre></section><blockquote class=\"js_blockquote_wrap\" data-type=\"2\" data-url=\"\" data-author-name=\"\" data-content-utf8-length=\"9\" data-source-title=\"\"><section class=\"js_blockquote_digest\"><section>图像数据的剩余部分</section></section></blockquote><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">之后就没有什么可谈的了。这张图像跳过了大多数其他的 gif 特性，如本地颜色表和动画，所以这张 gif 剩下的大部分只是数据和终止符。<br></p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">老实说 lzw 压缩并不难学，但本文并不是要讲这个话题。如果你想学习它，Matthew Flickinger 在他的网站上有一篇好文章。</p><blockquote class=\"js_blockquote_wrap\" data-type=\"2\" data-url=\"\" data-author-name=\"\" data-content-utf8-length=\"10\" data-source-title=\"\"><section class=\"js_blockquote_digest\"><section>附加内容：真彩 gif</section></section></blockquote><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">你知道 gif 可以是真彩色的吗？这和“局部颜色表“有关系。每个数据段都允许有自己的局部颜色表，因此如果你把一个 gif 分成足够多的片断，你就可以得到真彩色了！<br></p><section style=\"text-align: center;margin-top: 10px;\"><img class=\"rich_pages wxw-img js_insertlocalimg\" data-ratio=\"1\" data-s=\"300,640\" data-type=\"gif\" data-w=\"210\" style=\"max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_gif/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVa285kxzfYMpRhicWQQZrZDGCAs3iaYdB3IpuFddI4YIicPX80o505BKicQ/640?wx_fmt=gif\"></section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">大多数 gif 不会这样做，有几个原因。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">首先，这样生成的图像是非常大的。每一个新的 256 色调色板将消耗额外的 768 字节。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">第二，现在的渲染器不会“正确“渲染这样的图像。浏览器在默认情况下，如果没有指定，通常会在帧之间设置 0.1 的延迟。</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">然而，一个真正符合规范要求的 gif 渲染器会正确地显示真彩色 gif。因此，如果你有足够的空间、内存和多余的 CPU，为什么不做一个真彩 gif 呢？</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">如果你想了解更多关于真彩 gif 的信息，维基百科上有一整个章节。</p><section style=\"box-sizing: border-box;text-align: center;font-size: 20px;\">\n\t\t<span style=\"height: 65px;line-height: 95px;color: rgb(60, 112, 198);border-bottom: 2px solid rgb(27, 95, 160);background-image: url(\" https: no-repeat initial inline-block>总结</span>\n\t</section><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">感谢大家有耐心看到这里。gif 规范中还有更多部分我没有讲到，如果你有兴趣了解更多关于 gif 的信息，我建议你查看规范和我在文章顶部添加的那些链接。</p><section style=\"box-sizing: border-box;text-align: center;font-size: 20px;\">\n\t\t<span style=\"height: 65px;line-height: 95px;color: rgb(60, 112, 198);border-bottom: 2px solid rgb(27, 95, 160);background-image: url(\" https: no-repeat initial inline-block>注释</span>\n\t</section><p>1.  https://en.wikipedia.org/wiki/gif#history︎</p><p>2.  向日葵图片转自维基百科关于 gifs 的文章（见脚注 1）︎</p><p>3.  gif87a 在技术上是以比较有限的格式支持动画的。要了解更多信息，你可以试试 gifiddle 仓库上的 gif87a 动画例子：https://github.com/ata4/gifiddle︎</p><p>4.  更多信息请参见 gif 规范的第 18 节（逻辑屏幕描述符）。</p><p>5.更多信息，请参见第 4 节。文档来自 gif 规范：https://www.w3.org/Graphics/gif/spec-gif89a.txt︎</p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\"><span style=\"color: rgb(136, 136, 136);\"><strong><span style=\"color: rgb(136, 136, 136);font-size: 14px;\">原文链接：</span></strong></span></p><p style=\"box-sizing: border-box;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\"><span style=\"word-break: break-all;font-size: 14px;color: rgb(136, 136, 136);\">https://blog.darrien.dev/posts/you-dont-know-gif/</span></p></section>\n                </div>\n\n    \n    <br>\n\n    \n        <a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MzUxMzcxMzE5Ng==&amp;mid=2247513778&amp;idx=1&amp;sn=20ff2bd44fb6617cf67f0d3b87308edf&amp;chksm=f95203f1ce258ae79d48b5b9781c9076e20e10d50c660a293c122a6da6f6180a01cd9805d9d5#rd\" style=\"color: blue\" class=\"media_tool_meta meta_primary\">文章原文</a>\n        <br>\n    \n\n    \n\n    <img alt=\"\" width=\"1px\" height=\"1px\" class=\"\" style=\"width:1px;height:1px;display:none\" src=\"http://www.jintiankansha.me/rss_static/19192/H4vR8yIroL\"></div></div>","descriptionType":"html","publishedDate":"Sat, 12 Mar 2022 02:30:00 +0000","feedId":2775,"bgimg":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVBsqhpjE2q8k3OycCz5fbkicU4GNCt7OoHydrKmgc7awFiaicicN3kgZslA/0?wx_fmt=jpeg?imageView2/1/w/600","linkMd5":"48f7e6899c1e1377d897a5b1c3d6891a","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn84@2020_5/2022/03/14/09-17-01-177_3c381bcdf4970d9a.webp","destWidth":1080,"destHeight":460,"sourceBytes":41289,"destBytes":25584,"author":"","articleImgCdnMap":{"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVBsqhpjE2q8k3OycCz5fbkicU4GNCt7OoHydrKmgc7awFiaicicN3kgZslA/0?wx_fmt=jpeg?imageView2/1/w/600":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn11@2020_2/2022/03/14/09-15-50-534_3c381bcdf4970d9a.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVoOtKibzYhCvficxdxsaNESPDgWLpsHjPbRibczNcuNoChXHc1stK3k9ibQ/640?wx_fmt=jpeg":null,"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVdWdrlq5icwqRzbW8ZuNOPOkLSfM8Jsic7RaeTfhxpiaheN6G3hzCvsnQA/640?wx_fmt=gif":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn3@2020_3/2022/03/14/09-15-48-256_b21223c48b25b88b.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIV1AAiad5DiaC8B8KveBg7o9bumIIcVVP1ukzibFqJbfXrNE71stJuR0mIQ/640?wx_fmt=gif":null,"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVUkiaHwYibdcs3wNAibNLLylRehicb0m6GpdpQKPFeAwt8GuSsITnKe74lQ/640?wx_fmt=png":null,"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVMcVOguH7V2ick07nA3iaBbpl6EHwOGVm2icxOH7rbXSvw1NRadt1Wd2Pg/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn39@2020_4/2022/03/14/09-16-00-812_a31119c8be2b7f8a.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIV11BJfribDnbicVTeW6vQbHSfMW3UzL6iaRzrvaFp3Yw4LqYaLZ3jUn7EA/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn100@2020_6/2022/03/14/09-16-43-842_0ebfb0a3863d5d30.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVqCnQvYDjpJMU9oXxTFp6I5LZKp2cRbfFNI4fQd9hziaALib8Oarm8dkA/640?wx_fmt=png":null,"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVEoVRCadrU7F8Rhrqr81y13tkWVF9LaOHnUVH2K6iaSoM0doDCu3licsQ/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn95@2020_3/2022/03/14/09-16-47-835_5b047b11290e0d59.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVibkqnHsk0XUIibZRLg9zY36eLwxBV1gjh61sefWtnaV66L2pwQjNgcEg/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn8@2020_5/2022/03/14/09-15-55-502_e86d82f4d3460013.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVZFEqGFokzPicfCrdGKvyzBMcasOEZFuVibPEakW5ibL4B7EPn4TNGTDDw/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx32/cdn15@2020_1/2022/03/14/09-16-04-154_c8a50eb10a8389be.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVDEmxg3EGrCIhMRTVicW9sqicxWylzLTpf9N7VW9QTw6ggFmviaGe6ZiapQ/640?wx_fmt=gif":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn88@2020_2/2022/03/14/09-16-45-445_ee132712126c4d99.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_gif/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVa285kxzfYMpRhicWQQZrZDGCAs3iaYdB3IpuFddI4YIicPX80o505BKicQ/640?wx_fmt=gif":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn92@2020_5/2022/03/14/09-15-49-161_c511b406c04e8641.webp","http://www.jintiankansha.me/rss_static/19192/H4vR8yIroL":null},"publishedOrCreatedDate":1647249217052}],"record":{"createdTime":"2022-03-14 17:13:37","updatedTime":"2022-03-14 17:13:37","feedId":2775,"fetchDate":"Mon, 14 Mar 2022 09:13:37 +0000","fetchMs":282,"handleMs":21,"totalMs":244484,"newArticles":0,"totalArticles":5,"status":1,"type":0,"ip":"245d88d7b2d8f26704713c23b090d029","hostName":"us-024*","requestId":"59a13353dde84a1581f59e932152b7c7_2775","contentType":"application/rss+xml","totalBytes":104998,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":14,"articlesImgsGithubTotal":9,"successGithubMap":{"myreaderx8":1,"myreaderx7":1,"myreaderx6":1,"myreaderx4":1,"myreaderx32":1,"myreaderx11":1,"myreaderx1":1,"myreaderx24":1,"myreaderx30":1,"myreaderx19":1},"failGithubMap":{}},"feed":{"createdTime":"2020-08-24 21:31:44","updatedTime":"2020-09-01 10:14:55","id":2775,"name":"前端之巅","url":"http://feedmaker.kindle4rss.com/feeds/frontshow.weixin.xml","subscriber":null,"website":null,"icon":"http://www.sogou.com/images/logo/new/favicon.ico?v=4","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx63/cdn48@2020_6/2020/09/01/02-14-41-796_d24121c9beed1de6.ico","description":"InfoQ大前端技术社群：囊括前端、移动、Node全栈一线技术，紧跟业界发展步伐。","weekly":null,"link":null},"noPictureArticleList":[{"createdTime":"2022-03-14 17:17:40","updatedTime":"2022-03-14 17:17:40","id":null,"feedId":2775,"linkMd5":"48f7e6899c1e1377d897a5b1c3d6891a"}],"tmpCommonImgCdnBytes":0,"tmpBodyImgCdnBytes":104998,"tmpBgImgCdnBytes":0,"extra4":{"start":1647249216462,"total":0,"statList":[{"spend":570,"msg":"获取xml内容"},{"spend":21,"msg":"解释文章"},{"spend":82926,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":122394,"msg":"正文链接上传到cdn"}]},"extra5":14,"extra6":10,"extra7ImgCdnFailResultVector":[null,null,{"code":1,"isDone":false,"source":"http://www.jintiankansha.me/rss_static/19192/H4vR8yIroL","sourceStatusCode":405,"sourceBytes":0,"destBytes":0,"feedId":2775,"totalSpendMs":957,"convertSpendMs":0,"createdTime":"2022-03-14 17:15:38","host":"us-033*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E5%89%8D%E7%AB%AF%E4%B9%8B%E5%B7%85+%E4%BD%A0%E7%9C%9F%E7%9A%84%E4%BA%86%E8%A7%A3%C2%A0gif%C2%A0%E5%90%97%EF%BC%9F%E5%88%86%E6%9E%90%C2%A0gif%C2%A0%E6%96%87%E4%BB%B6%E5%92%8C%E4%B8%80%E4%BA%9B%E5%A5%87%E6%80%AA%E7%9A%84%C2%A0gif%C2%A0%E7%89%B9%E6%80%A7","linkMd5ListStr":"48f7e6899c1e1377d897a5b1c3d6891a","extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[405],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"http://www.jintiankansha.me/rss_static/19192/H4vR8yIroL","sourceStatusCode":405,"sourceBytes":0,"destBytes":0,"feedId":2775,"totalSpendMs":549,"convertSpendMs":0,"createdTime":"2022-03-14 17:15:39","host":"europe-56*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E5%89%8D%E7%AB%AF%E4%B9%8B%E5%B7%85+%E4%BD%A0%E7%9C%9F%E7%9A%84%E4%BA%86%E8%A7%A3%C2%A0gif%C2%A0%E5%90%97%EF%BC%9F%E5%88%86%E6%9E%90%C2%A0gif%C2%A0%E6%96%87%E4%BB%B6%E5%92%8C%E4%B8%80%E4%BA%9B%E5%A5%87%E6%80%AA%E7%9A%84%C2%A0gif%C2%A0%E7%89%B9%E6%80%A7","linkMd5ListStr":"48f7e6899c1e1377d897a5b1c3d6891a","extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[405],"sourceSize":"0","destSize":"0"},null,null,null,null,null,null,null,null,null,null,null,null],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://europe-56.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[405]},"http://us-037.herokuapp.com/":{"failCount":1,"successCount":1,"resultList":[200,null]},"http://us-55.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://europe63.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]},"http://us-015.herokuapp.com/":{"failCount":2,"successCount":1,"resultList":[200,null,null]},"http://us-020.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]},"http://us-025.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://europe-25.herokuapp.com/":{"failCount":1,"successCount":1,"resultList":[200,null]},"http://us-033.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[405]},"http://us-004.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://europe-59.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://us-51.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]},"http://europe67.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://us-016.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://us-012.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVdWdrlq5icwqRzbW8ZuNOPOkLSfM8Jsic7RaeTfhxpiaheN6G3hzCvsnQA/640?wx_fmt=gif","sourceStatusCode":200,"destWidth":220,"destHeight":261,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn3@2020_3/2022/03/14/09-15-48-256_b21223c48b25b88b.webp","sourceBytes":15139,"destBytes":13538,"targetWebpQuality":75,"feedId":2775,"totalSpendMs":10127,"convertSpendMs":5,"createdTime":"2022-03-14 17:15:38","host":"europe-25*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E5%89%8D%E7%AB%AF%E4%B9%8B%E5%B7%85+%E4%BD%A0%E7%9C%9F%E7%9A%84%E4%BA%86%E8%A7%A3%C2%A0gif%C2%A0%E5%90%97%EF%BC%9F%E5%88%86%E6%9E%90%C2%A0gif%C2%A0%E6%96%87%E4%BB%B6%E5%92%8C%E4%B8%80%E4%BA%9B%E5%A5%87%E6%80%AA%E7%9A%84%C2%A0gif%C2%A0%E7%89%B9%E6%80%A7","linkMd5ListStr":"48f7e6899c1e1377d897a5b1c3d6891a","githubUser":"myreaderx19","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"14.8 KB","destSize":"13.2 KB","compressRate":"89.4%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_gif/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVa285kxzfYMpRhicWQQZrZDGCAs3iaYdB3IpuFddI4YIicPX80o505BKicQ/640?wx_fmt=gif","sourceStatusCode":200,"destWidth":210,"destHeight":210,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn92@2020_5/2022/03/14/09-15-49-161_c511b406c04e8641.webp","sourceBytes":54310,"destBytes":13326,"targetWebpQuality":75,"feedId":2775,"totalSpendMs":10906,"convertSpendMs":133,"createdTime":"2022-03-14 17:15:38","host":"us-037*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E5%89%8D%E7%AB%AF%E4%B9%8B%E5%B7%85+%E4%BD%A0%E7%9C%9F%E7%9A%84%E4%BA%86%E8%A7%A3%C2%A0gif%C2%A0%E5%90%97%EF%BC%9F%E5%88%86%E6%9E%90%C2%A0gif%C2%A0%E6%96%87%E4%BB%B6%E5%92%8C%E4%B8%80%E4%BA%9B%E5%A5%87%E6%80%AA%E7%9A%84%C2%A0gif%C2%A0%E7%89%B9%E6%80%A7","linkMd5ListStr":"48f7e6899c1e1377d897a5b1c3d6891a","githubUser":"myreaderx8","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"53 KB","destSize":"13 KB","compressRate":"24.5%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVBsqhpjE2q8k3OycCz5fbkicU4GNCt7OoHydrKmgc7awFiaicicN3kgZslA/0?wx_fmt=jpeg?imageView2/1/w/600","sourceStatusCode":200,"destWidth":1080,"destHeight":460,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn11@2020_2/2022/03/14/09-15-50-534_3c381bcdf4970d9a.webp","sourceBytes":41289,"destBytes":25584,"targetWebpQuality":75,"feedId":2775,"totalSpendMs":12250,"convertSpendMs":50,"createdTime":"2022-03-14 17:15:38","host":"us-51*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E5%89%8D%E7%AB%AF%E4%B9%8B%E5%B7%85+%E4%BD%A0%E7%9C%9F%E7%9A%84%E4%BA%86%E8%A7%A3%C2%A0gif%C2%A0%E5%90%97%EF%BC%9F%E5%88%86%E6%9E%90%C2%A0gif%C2%A0%E6%96%87%E4%BB%B6%E5%92%8C%E4%B8%80%E4%BA%9B%E5%A5%87%E6%80%AA%E7%9A%84%C2%A0gif%C2%A0%E7%89%B9%E6%80%A7","linkMd5ListStr":"48f7e6899c1e1377d897a5b1c3d6891a,48f7e6899c1e1377d897a5b1c3d6891a","githubUser":"myreaderx30","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"40.3 KB","destSize":"25 KB","compressRate":"62%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVibkqnHsk0XUIibZRLg9zY36eLwxBV1gjh61sefWtnaV66L2pwQjNgcEg/640?wx_fmt=png","sourceStatusCode":200,"destWidth":816,"destHeight":348,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn8@2020_5/2022/03/14/09-15-55-502_e86d82f4d3460013.webp","sourceBytes":62163,"destBytes":5596,"targetWebpQuality":75,"feedId":2775,"totalSpendMs":17195,"convertSpendMs":13,"createdTime":"2022-03-14 17:15:38","host":"europe63*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E5%89%8D%E7%AB%AF%E4%B9%8B%E5%B7%85+%E4%BD%A0%E7%9C%9F%E7%9A%84%E4%BA%86%E8%A7%A3%C2%A0gif%C2%A0%E5%90%97%EF%BC%9F%E5%88%86%E6%9E%90%C2%A0gif%C2%A0%E6%96%87%E4%BB%B6%E5%92%8C%E4%B8%80%E4%BA%9B%E5%A5%87%E6%80%AA%E7%9A%84%C2%A0gif%C2%A0%E7%89%B9%E6%80%A7","linkMd5ListStr":"48f7e6899c1e1377d897a5b1c3d6891a","githubUser":"myreaderx11","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"60.7 KB","destSize":"5.5 KB","compressRate":"9%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVMcVOguH7V2ick07nA3iaBbpl6EHwOGVm2icxOH7rbXSvw1NRadt1Wd2Pg/640?wx_fmt=png","sourceStatusCode":200,"destWidth":402,"destHeight":195,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn39@2020_4/2022/03/14/09-16-00-812_a31119c8be2b7f8a.webp","sourceBytes":50124,"destBytes":9382,"targetWebpQuality":75,"feedId":2775,"totalSpendMs":22543,"convertSpendMs":10,"createdTime":"2022-03-14 17:15:38","host":"us-020*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E5%89%8D%E7%AB%AF%E4%B9%8B%E5%B7%85+%E4%BD%A0%E7%9C%9F%E7%9A%84%E4%BA%86%E8%A7%A3%C2%A0gif%C2%A0%E5%90%97%EF%BC%9F%E5%88%86%E6%9E%90%C2%A0gif%C2%A0%E6%96%87%E4%BB%B6%E5%92%8C%E4%B8%80%E4%BA%9B%E5%A5%87%E6%80%AA%E7%9A%84%C2%A0gif%C2%A0%E7%89%B9%E6%80%A7","linkMd5ListStr":"48f7e6899c1e1377d897a5b1c3d6891a","githubUser":"myreaderx1","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"48.9 KB","destSize":"9.2 KB","compressRate":"18.7%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVZFEqGFokzPicfCrdGKvyzBMcasOEZFuVibPEakW5ibL4B7EPn4TNGTDDw/640?wx_fmt=png","sourceStatusCode":200,"destWidth":625,"destHeight":370,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx32/cdn15@2020_1/2022/03/14/09-16-04-154_c8a50eb10a8389be.webp","sourceBytes":31237,"destBytes":4592,"targetWebpQuality":75,"feedId":2775,"totalSpendMs":25845,"convertSpendMs":18,"createdTime":"2022-03-14 17:15:38","host":"us-015*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E5%89%8D%E7%AB%AF%E4%B9%8B%E5%B7%85+%E4%BD%A0%E7%9C%9F%E7%9A%84%E4%BA%86%E8%A7%A3%C2%A0gif%C2%A0%E5%90%97%EF%BC%9F%E5%88%86%E6%9E%90%C2%A0gif%C2%A0%E6%96%87%E4%BB%B6%E5%92%8C%E4%B8%80%E4%BA%9B%E5%A5%87%E6%80%AA%E7%9A%84%C2%A0gif%C2%A0%E7%89%B9%E6%80%A7","linkMd5ListStr":"48f7e6899c1e1377d897a5b1c3d6891a","githubUser":"myreaderx32","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"30.5 KB","destSize":"4.5 KB","compressRate":"14.7%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIV11BJfribDnbicVTeW6vQbHSfMW3UzL6iaRzrvaFp3Yw4LqYaLZ3jUn7EA/640?wx_fmt=png","sourceStatusCode":200,"destWidth":808,"destHeight":46,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn100@2020_6/2022/03/14/09-16-43-842_0ebfb0a3863d5d30.webp","sourceBytes":16848,"destBytes":5556,"targetWebpQuality":75,"feedId":2775,"totalSpendMs":5401,"convertSpendMs":5,"createdTime":"2022-03-14 17:16:38","host":"us-020*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E5%89%8D%E7%AB%AF%E4%B9%8B%E5%B7%85+%E4%BD%A0%E7%9C%9F%E7%9A%84%E4%BA%86%E8%A7%A3%C2%A0gif%C2%A0%E5%90%97%EF%BC%9F%E5%88%86%E6%9E%90%C2%A0gif%C2%A0%E6%96%87%E4%BB%B6%E5%92%8C%E4%B8%80%E4%BA%9B%E5%A5%87%E6%80%AA%E7%9A%84%C2%A0gif%C2%A0%E7%89%B9%E6%80%A7","linkMd5ListStr":"48f7e6899c1e1377d897a5b1c3d6891a","githubUser":"myreaderx24","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"16.5 KB","destSize":"5.4 KB","compressRate":"33%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVDEmxg3EGrCIhMRTVicW9sqicxWylzLTpf9N7VW9QTw6ggFmviaGe6ZiapQ/640?wx_fmt=gif","sourceStatusCode":200,"destWidth":320,"destHeight":200,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn88@2020_2/2022/03/14/09-16-45-445_ee132712126c4d99.webp","sourceBytes":19154,"destBytes":18118,"targetWebpQuality":75,"feedId":2775,"totalSpendMs":5002,"convertSpendMs":5,"createdTime":"2022-03-14 17:16:40","host":"europe63*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E5%89%8D%E7%AB%AF%E4%B9%8B%E5%B7%85+%E4%BD%A0%E7%9C%9F%E7%9A%84%E4%BA%86%E8%A7%A3%C2%A0gif%C2%A0%E5%90%97%EF%BC%9F%E5%88%86%E6%9E%90%C2%A0gif%C2%A0%E6%96%87%E4%BB%B6%E5%92%8C%E4%B8%80%E4%BA%9B%E5%A5%87%E6%80%AA%E7%9A%84%C2%A0gif%C2%A0%E7%89%B9%E6%80%A7","linkMd5ListStr":"48f7e6899c1e1377d897a5b1c3d6891a","githubUser":"myreaderx6","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"18.7 KB","destSize":"17.7 KB","compressRate":"94.6%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVEoVRCadrU7F8Rhrqr81y13tkWVF9LaOHnUVH2K6iaSoM0doDCu3licsQ/640?wx_fmt=png","sourceStatusCode":200,"destWidth":274,"destHeight":245,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn95@2020_3/2022/03/14/09-16-47-835_5b047b11290e0d59.webp","sourceBytes":43517,"destBytes":9306,"targetWebpQuality":75,"feedId":2775,"totalSpendMs":9459,"convertSpendMs":14,"createdTime":"2022-03-14 17:16:38","host":"us-51*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E5%89%8D%E7%AB%AF%E4%B9%8B%E5%B7%85+%E4%BD%A0%E7%9C%9F%E7%9A%84%E4%BA%86%E8%A7%A3%C2%A0gif%C2%A0%E5%90%97%EF%BC%9F%E5%88%86%E6%9E%90%C2%A0gif%C2%A0%E6%96%87%E4%BB%B6%E5%92%8C%E4%B8%80%E4%BA%9B%E5%A5%87%E6%80%AA%E7%9A%84%C2%A0gif%C2%A0%E7%89%B9%E6%80%A7","linkMd5ListStr":"48f7e6899c1e1377d897a5b1c3d6891a","githubUser":"myreaderx4","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"42.5 KB","destSize":"9.1 KB","compressRate":"21.4%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/XIibZ0YbvibkUkztAVN6dY6FAaQ1eY4hIVBsqhpjE2q8k3OycCz5fbkicU4GNCt7OoHydrKmgc7awFiaicicN3kgZslA/0?wx_fmt=jpeg?imageView2/1/w/600","sourceStatusCode":200,"destWidth":1080,"destHeight":460,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn84@2020_5/2022/03/14/09-17-01-177_3c381bcdf4970d9a.webp","sourceBytes":41289,"destBytes":25584,"targetWebpQuality":75,"feedId":2775,"totalSpendMs":20682,"convertSpendMs":85,"createdTime":"2022-03-14 17:16:40","host":"us-019*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E5%89%8D%E7%AB%AF%E4%B9%8B%E5%B7%85+%E4%BD%A0%E7%9C%9F%E7%9A%84%E4%BA%86%E8%A7%A3%C2%A0gif%C2%A0%E5%90%97%EF%BC%9F%E5%88%86%E6%9E%90%C2%A0gif%C2%A0%E6%96%87%E4%BB%B6%E5%92%8C%E4%B8%80%E4%BA%9B%E5%A5%87%E6%80%AA%E7%9A%84%C2%A0gif%C2%A0%E7%89%B9%E6%80%A7","linkMd5ListStr":"48f7e6899c1e1377d897a5b1c3d6891a,48f7e6899c1e1377d897a5b1c3d6891a","githubUser":"myreaderx7","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"40.3 KB","destSize":"25 KB","compressRate":"62%"}],"successGithubMap":{"myreaderx8":1,"myreaderx7":1,"myreaderx6":1,"myreaderx4":1,"myreaderx32":1,"myreaderx11":1,"myreaderx1":1,"myreaderx24":1,"myreaderx30":1,"myreaderx19":1},"failGithubMap":{}}
{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2022-03-14 19:14:20","updatedTime":"2022-03-14 19:14:20","title":"阿里面试 HashMap 的 21 连问！你顶得了嘛","link":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E9%98%BF%E9%87%8C%E9%9D%A2%E8%AF%95%20HashMap%20%E7%9A%84%2021%20%E8%BF%9E%E9%97%AE%EF%BC%81%E4%BD%A0%E9%A1%B6%E5%BE%97%E4%BA%86%E5%98%9B","description":"<div><div><div id=\"media\" class=\"rich_media_thumb_wrp\">\n\n            <img class=\"rich_media_thumb\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQy05Yyba8KyhoshOiaGjcCSiaQCSj5goTrCRxGZ33p8ic4hazH8sKjIXv0o48IlVxQVaJDV2dPLAMRjg/0?wx_fmt=jpeg?imageView2/1/w/600\">\n        </div>\n    \n\n    \n\n    <div class=\"rich_media_content\" id=\"js_content\">\n                    \n\n                    \n                    \n                    \n                    <p style=\"white-space: normal;text-align: center;\"><span style=\"font-size: 15px;\"><span style=\"text-align: center;font-size: 14px;letter-spacing: 0.544px;max-width: 100%;color: rgb(255, 41, 65);line-height: 22.4px;\">（给</span><span style=\"text-align: center;font-size: 14px;letter-spacing: 0.544px;max-width: 100%;line-height: 22.4px;color: rgb(0, 128, 255);\">ImportNew</span><span style=\"text-align: center;font-size: 14px;letter-spacing: 0.544px;max-width: 100%;color: rgb(255, 41, 65);line-height: 22.4px;\">加星标，提高Java技能）</span></span></p><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 1.2em;margin-bottom: 1em;outline: 0px;font-weight: bold;font-size: 20px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><span style=\"color: rgb(123, 12, 0);\">1：HashMap 的数据结构？</span><br style=\"outline: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"></h3><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>A：哈希表结构（链表散列：数组+链表）实现，结合数组和链表的优点。当链表长度超过 8 时，链表转换为红黑树。</p><pre data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;outline: 0px;max-width: 100%;color: rgb(89, 89, 89);font-size: 15px;letter-spacing: 0.75px;text-align: left;background-color: rgb(255, 255, 255);border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"margin-bottom: -7px;outline: 0px;max-width: 100%;display: block;background: url(\" https: no-repeat rgb border-box break-word></span><code style=\"padding: 15px 16px 16px;outline: 0px;max-width: 100%;overflow-x: auto;color: rgb(56, 58, 66);display: -webkit-box;font-family: \" operator mono consolas monaco menlo monospace rgb border-box break-word>transient Node<k>\\[\\] table;<br style=\"outline: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"></k></code></pre><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 1.2em;margin-bottom: 1em;outline: 0px;font-weight: bold;font-size: 20px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><span style=\"color: rgb(123, 12, 0);\">2：HashMap 的工作原理？</span></h3><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>HashMap 底层是 hash 数组和单向链表实现，数组中的每个元素都是链表，由 Node 内部类（实现 Map.Entry接口）实现，HashMap 通过 put &amp; get 方法存储和获取。</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>存储对象时，将 K/V 键值传给 put() 方法：</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>①、调用 hash(K) 方法计算 K 的 hash 值，然后结合数组长度，计算得数组下标；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>②、调整数组大小（当容器中的元素个数大于 capacity * loadfactor 时，容器会进行扩容resize 为 2n）；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>③、i.如果 K 的 hash 值在 HashMap 中不存在，则执行插入，若存在，则发生碰撞；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>ii.如果 K 的 hash 值在 HashMap 中存在，且它们两者 equals 返回 true，则更新键值对；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>iii. 如果 K 的 hash 值在 HashMap 中存在，且它们两者 equals 返回 false，则插入链表的尾部（尾插法）或者红黑树中（树的添加方式）。</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>（JDK 1.7 之前使用头插法、JDK 1.8 使用尾插法）（注意：当碰撞导致链表大于 TREEIFY_THRESHOLD = 8 时，就把链表转换成红黑树）</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>获取对象时，将 K 传给 get() 方法：①、调用 hash(K) 方法（计算 K 的 hash 值）从而获取该键值所在链表的数组下标；②、顺序遍历链表，equals()方法查找相同 Node 链表中 K 值对应的 V 值。</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>hashCode 是定位的，存储位置；equals是定性的，比较两者是否相等。</p><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 1.2em;margin-bottom: 1em;outline: 0px;font-weight: bold;font-size: 20px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><span style=\"color: rgb(123, 12, 0);\">3.当两个对象的 hashCode 相同会发生什么？</span></h3><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>因为 hashCode 相同，不一定就是相等的（equals方法比较），所以两个对象所在数组的下标相同，\"碰撞\"就此发生。又因为 HashMap 使用链表存储对象，这个 Node 会存储到链表中。</p><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 1.2em;margin-bottom: 1em;outline: 0px;font-weight: bold;font-size: 20px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><span style=\"color: rgb(123, 12, 0);\">4.你知道 hash 的实现吗？为什么要这样实现？</span></h3><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>JDK 1.8 中，是通过 hashCode() 的高 16 位异或低 16 位实现的：(h = k.hashCode()) ^ (h &gt;&gt;&gt; 16)，主要是从速度，功效和质量来考虑的，减少系统的开销，也不会造成因为高位没有参与下标的计算，从而引起的碰撞。</p><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 1.2em;margin-bottom: 1em;outline: 0px;font-weight: bold;font-size: 20px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><span style=\"color: rgb(123, 12, 0);\">5.为什么要用异或运算符？</span></h3><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>保证了对象的 hashCode 的 32 位值只要有一位发生改变，整个 hash() 返回值就会改变。尽可能的减少碰撞。</p><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 1.2em;margin-bottom: 1em;outline: 0px;font-weight: bold;font-size: 20px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><span style=\"color: rgb(123, 12, 0);\">6.HashMap 的 table 的容量如何确定？loadFactor 是什么？该容量如何变化？这种变化会带来什么问题？</span></h3><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>①、table 数组大小是由 capacity 这个参数确定的，默认是16，也可以构造时传入，最大限制是1&lt;&lt;30；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>②、loadFactor 是装载因子，主要目的是用来确认table 数组是否需要动态扩展，默认值是0.75，比如table 数组大小为 16，装载因子为 0.75 时，threshold 就是12，当 table 的实际大小超过 12 时，table就需要动态扩容；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>③、扩容时，调用 resize() 方法，将 table 长度变为原来的两倍（注意是 table 长度，而不是 threshold）</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>④、如果数据很大的情况下，扩展时将会带来性能的损失，在性能要求很高的地方，这种损失很可能很致命。</p><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 1.2em;margin-bottom: 1em;outline: 0px;font-weight: bold;font-size: 20px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><span style=\"color: rgb(123, 12, 0);\">7.HashMap中put方法的过程？</span></h3><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>答：“调用哈希函数获取Key对应的hash值，再计算其数组下标；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>如果没有出现哈希冲突，则直接放入数组；如果出现哈希冲突，则以链表的方式放在链表后面；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word><a target=\"_blank\" href=\"https://mp.weixin.qq.com/s?__biz=MzU1ODg0OTkxNQ==&amp;mid=2247489424&amp;idx=1&amp;sn=e4c490e60b38c54854787deeb6ef9411&amp;scene=21#wechat_redirect\" textvalue=\"如果链表长度超过阀值( TREEIFY THRESHOLD==8)，就把链表转成红黑树，链表长度低于6，就把红黑树转回链表\" tab=\"innerlink\" data-linktype=\"2\" wah-hotarea=\"click\" style=\"outline: 0px;color: rgb(0, 0, 0);-webkit-tap-highlight-color: rgba(0, 0, 0, 0);cursor: pointer;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">如果链表长度超过阀值( TREEIFY THRESHOLD==8)，就把链表转成红黑树，链表长度低于6，就把红黑树转回链表</a><span style=\"outline: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">;</span></p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>如果结点的key已经存在，则替换其value即可；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>如果集合中的键值对大于12，调用resize方法进行数组扩容。”</p><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 1.2em;margin-bottom: 1em;outline: 0px;font-weight: bold;font-size: 20px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><span style=\"color: rgb(123, 12, 0);\">8.数组扩容的过程？</span></h3><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>创建一个新的数组，其容量为旧数组的两倍，并重新计算旧数组中结点的存储位置。结点在新数组中的位置只有两种，原下标位置或原下标+旧数组的大小。</p><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 1.2em;margin-bottom: 1em;outline: 0px;font-weight: bold;font-size: 20px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><span style=\"color: rgb(123, 12, 0);\">9.拉链法导致的链表过深问题为什么不用二叉查找树代替，而选择红黑树？为什么不一直使用红黑树？</span></h3><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>之所以选择红黑树是为了解决二叉查找树的缺陷，二叉查找树在特殊情况下会变成一条线性结构（这就跟原来使用链表结构一样了，造成很深的问题），遍历查找会非常慢。推荐：面试问红黑树，我脸都绿了。</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>而红黑树在插入新数据后可能需要通过左旋，右旋、变色这些操作来保持平衡，引入红黑树就是为了查找数据快，解决链表查询深度的问题，我们知道红黑树属于平衡二叉树，但是为了保持“平衡”是需要付出代价的，但是该代价所损耗的资源要比遍历线性链表要少，所以当长度大于8的时候，会使用红黑树，如果链表长度很短的话，根本不需要引入红黑树，引入反而会慢。</p><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 1.2em;margin-bottom: 1em;outline: 0px;font-weight: bold;font-size: 20px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><span style=\"color: rgb(123, 12, 0);\">10.说说你对红黑树的见解？</span></h3><ul data-tool=\"mdnice编辑器\" class=\"list-paddingleft-2\" style=\"margin-top: 8px;margin-bottom: 8px;padding-left: 25px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black break-word><li style=\"outline: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 10px;margin-bottom: 10px;outline: 0px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">每个节点非红即黑</section></li><li style=\"outline: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 10px;margin-bottom: 10px;outline: 0px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">根节点总是黑色的</section></li><li style=\"outline: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 10px;margin-bottom: 10px;outline: 0px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">如果节点是红色的，则它的子节点必须是黑色的（反之不一定）</section></li><li style=\"outline: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 10px;margin-bottom: 10px;outline: 0px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">每个叶子节点都是黑色的空节点（NIL节点）</section></li><li style=\"outline: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 10px;margin-bottom: 10px;outline: 0px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">从根节点到叶节点或空子节点的每条路径，必须包含相同数目的黑色节点（即相同的黑色高度）</section></li></ul><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 1.2em;margin-bottom: 1em;outline: 0px;font-weight: bold;font-size: 20px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><span style=\"color: rgb(123, 12, 0);\">11.jdk8中对HashMap做了哪些改变？</span></h3><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>在java 1.8中，如果链表的长度超过了8，那么链表将转换为红黑树。（桶的数量必须大于64，小于64的时候只会扩容）</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>发生hash碰撞时，java 1.7 会在链表的头部插入，而java 1.8会在链表的尾部插入</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>在java 1.8中，Entry被Node替代(换了一个马甲。</p><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 1.2em;margin-bottom: 1em;outline: 0px;font-weight: bold;font-size: 20px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><span style=\"color: rgb(123, 12, 0);\">12.HashMap，LinkedHashMap，TreeMap 有什么区别？</span></h3><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>LinkedHashMap 保存了记录的插入顺序，在用 Iterator 遍历时，先取到的记录肯定是先插入的；遍历比 HashMap 慢；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>TreeMap 实现 SortMap 接口，能够把它保存的记录根据键排序（默认按键值升序排序，也可以指定排序的比较器）</p><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 1.2em;margin-bottom: 1em;outline: 0px;font-weight: bold;font-size: 20px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><span style=\"color: rgb(123, 12, 0);\">13.HashMap &amp; TreeMap &amp; LinkedHashMap 使用场景？</span></h3><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>一般情况下，使用最多的是 HashMap。</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>HashMap：在 Map 中插入、删除和定位元素时；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>TreeMap：在需要按自然顺序或自定义顺序遍历键的情况下；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>LinkedHashMap：在需要输出的顺序和输入的顺序相同的情况下。</p><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 1.2em;margin-bottom: 1em;outline: 0px;font-weight: bold;font-size: 20px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><span style=\"color: rgb(123, 12, 0);\">14.HashMap 和 HashTable 有什么区别？</span></h3><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>①、HashMap 是线程不安全的，HashTable 是线程安全的；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>②、由于线程安全，所以 HashTable 的效率比不上 HashMap；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>③、HashMap最多只允许一条记录的键为null，允许多条记录的值为null，而 HashTable不允许；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>④、HashMap 默认初始化数组的大小为16，HashTable 为 11，前者扩容时，扩大两倍，后者扩大两倍+1；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>⑤、HashMap 需要重新计算 hash 值，而 HashTable 直接使用对象的 hashCode</p><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 1.2em;margin-bottom: 1em;outline: 0px;font-weight: bold;font-size: 20px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><span style=\"color: rgb(123, 12, 0);\">15.Java 中的另一个线程安全的与 HashMap 极其类似的类是什么？同样是线程安全，它与 HashTable 在线程同步上有什么不同？</span></h3><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>ConcurrentHashMap 类（是 Java并发包 java.util.concurrent 中提供的一个线程安全且高效的 HashMap 实现）。</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>HashTable 是使用 synchronize 关键字加锁的原理（就是对对象加锁）；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>而针对 ConcurrentHashMap，在 JDK 1.7 中采用 分段锁的方式；JDK 1.8 中直接采用了CAS（无锁算法）+ synchronized。</p><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 1.2em;margin-bottom: 1em;outline: 0px;font-weight: bold;font-size: 20px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><span style=\"color: rgb(123, 12, 0);\">16.HashMap &amp; ConcurrentHashMap 的区别？</span></h3><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>除了加锁，原理上无太大区别。另外，HashMap 的键值对允许有null，但是ConCurrentHashMap 都不允许。</p><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 1.2em;margin-bottom: 1em;outline: 0px;font-weight: bold;font-size: 20px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><span style=\"color: rgb(123, 12, 0);\">17.为什么 ConcurrentHashMap 比 HashTable 效率要高？</span></h3><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>HashTable 使用一把锁（锁住整个链表结构）处理并发问题，多个线程竞争一把锁，容易阻塞；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>ConcurrentHashMap</p><ul data-tool=\"mdnice编辑器\" class=\"list-paddingleft-2\" style=\"margin-top: 8px;margin-bottom: 8px;padding-left: 25px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black break-word><li style=\"outline: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 10px;margin-bottom: 10px;outline: 0px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">JDK 1.7 中使用分段锁（ReentrantLock + Segment + HashEntry），相当于把一个 HashMap 分成多个段，每段分配一把锁，这样支持多线程访问。锁粒度：基于 Segment，包含多个 HashEntry。</section></li><li style=\"outline: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 10px;margin-bottom: 10px;outline: 0px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">JDK 1.8 中使用 CAS + synchronized + Node + 红黑树。锁粒度：Node（首结点）（实现 Map.Entry）。锁粒度降低了。</section></li></ul><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 1.2em;margin-bottom: 1em;outline: 0px;font-weight: bold;font-size: 20px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><span style=\"color: rgb(123, 12, 0);\">18.针对 ConcurrentHashMap 锁机制具体分析（JDK 1.7 VS JDK 1.8）</span></h3><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>JDK 1.7 中，采用分段锁的机制，实现并发的更新操作，底层采用数组+链表的存储结构，包括两个核心静态内部类 Segment 和 HashEntry。</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>①、Segment 继承 ReentrantLock（重入锁） 用来充当锁的角色，每个 Segment 对象守护每个散列映射表的若干个桶；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>②、HashEntry 用来封装映射表的键-值对；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>③、每个桶是由若干个 HashEntry 对象链接起来的链表</p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;outline: 0px;max-width: 100%;color: rgb(89, 89, 89);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb flex column center border-box break-word><img class=\"rich_pages wxw-img\" data-ratio=\"0.47820672478206727\" data-type=\"jpeg\" data-w=\"803\" style=\"margin-right: auto; margin-left: auto; outline: 0px; display: block; box-sizing: border-box !important; overflow-wrap: break-word !important; width: 677px !important; visibility: visible !important; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/iatuNc7NQHickAhMV0TjhX04HK2iadAoFhBFPSF4qKuzzXJWqV04d7yibwgP1hRaGU4zibnvA1pwgLwY3YNSaBa7waQ/640?wx_fmt=jpeg\"></figure><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>JDK 1.8 中，采用Node + CAS + Synchronized来保证并发安全。取消类 Segment，直接用 table 数组存储键值对；当 HashEntry 对象组成的链表长度超过 TREEIFY_THRESHOLD 时，链表转换为红黑树，提升性能。底层变更为数组 + 链表 + 红黑树。</p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;outline: 0px;max-width: 100%;color: rgb(89, 89, 89);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb flex column center border-box break-word><img class=\"rich_pages wxw-img\" data-ratio=\"0.40063593004769477\" data-type=\"jpeg\" data-w=\"629\" style=\"margin-right: auto; margin-left: auto; outline: 0px; display: block; box-sizing: border-box !important; overflow-wrap: break-word !important; width: 629px !important; visibility: visible !important; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/iatuNc7NQHickAhMV0TjhX04HK2iadAoFhBF42GMl1HT1F6xbEwGG8bTdfarYU1ABonvFvG5xEMUPHiaYWrzicgTv2w/640?wx_fmt=jpeg\"></figure><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 1.2em;margin-bottom: 1em;outline: 0px;font-weight: bold;font-size: 20px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><span style=\"color: rgb(123, 12, 0);\">19.ConcurrentHashMap 在 JDK 1.8 中，为什么要使用内置锁 synchronized 来代替重入锁 ReentrantLock？</span></h3><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>①、粒度降低了；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>②、JVM 开发团队没有放弃 synchronized，而且基于 JVM 的 synchronized 优化空间更大，更加自然。</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>③、在大量的数据操作下，对于 JVM 的内存压力，基于 API 的 ReentrantLock 会开销更多的内存。</p><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 1.2em;margin-bottom: 1em;outline: 0px;font-weight: bold;font-size: 20px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><span style=\"color: rgb(123, 12, 0);\">20.ConcurrentHashMap 简单介绍？</span></h3><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word><span style=\"color: rgb(123, 12, 0);\"><strong style=\"outline: 0px;max-width: 100%;color: rgb(53, 179, 120);box-sizing: border-box !important;overflow-wrap: break-word !important;\">①、重要的常量：</strong></span></p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>private transient volatile int sizeCtl;</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>当为负数时，-1 表示正在初始化，-N 表示 N - 1 个线程正在进行扩容；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>当为 0 时，表示 table 还没有初始化；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>当为其他正数时，表示初始化或者下一次进行扩容的大小。</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word><span style=\"color: rgb(123, 12, 0);\"><strong style=\"outline: 0px;max-width: 100%;color: rgb(53, 179, 120);box-sizing: border-box !important;overflow-wrap: break-word !important;\">②、数据结构：</strong></span></p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>Node 是存储结构的基本单元，继承 HashMap 中的 Entry，用于存储数据；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>TreeNode 继承 Node，但是数据结构换成了二叉树结构，是红黑树的存储结构，用于红黑树中存储数据；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>TreeBin 是封装 TreeNode 的容器，提供转换红黑树的一些条件和锁的控制。</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word><strong style=\"outline: 0px;max-width: 100%;color: rgb(53, 179, 120);box-sizing: border-box !important;overflow-wrap: break-word !important;\">③、存储对象时（put() 方法）：</strong></p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>如果没有初始化，就调用 initTable() 方法来进行初始化；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>如果没有 hash 冲突就直接 CAS 无锁插入；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>如果需要扩容，就先进行扩容；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>如果存在 hash 冲突，就加锁来保证线程安全，两种情况：一种是链表形式就直接遍历到尾端插入，一种是红黑树就按照红黑树结构插入；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>如果该链表的数量大于阀值 8，就要先转换成红黑树的结构，break 再一次进入循环</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>如果添加成功就调用 addCount() 方法统计 size，并且检查是否需要扩容。</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word><strong style=\"outline: 0px;max-width: 100%;color: rgb(53, 179, 120);box-sizing: border-box !important;overflow-wrap: break-word !important;\">④、扩容方法 transfer()：默认容量为 16，扩容时，容量变为原来的两倍。</strong></p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>helpTransfer()：调用多个工作线程一起帮助进行扩容，这样的效率就会更高。</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word><strong style=\"outline: 0px;max-width: 100%;color: rgb(53, 179, 120);box-sizing: border-box !important;overflow-wrap: break-word !important;\">⑤、获取对象时（get()方法）：</strong></p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>计算 hash 值，定位到该 table 索引位置，如果是首结点符合就返回；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>如果遇到扩容时，会调用标记正在扩容结点 ForwardingNode.find()方法，查找该结点，匹配就返回；</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>以上都不符合的话，就往下遍历结点，匹配就返回，否则最后就返回 null。</p><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 1.2em;margin-bottom: 1em;outline: 0px;font-weight: bold;font-size: 20px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><span style=\"color: rgb(123, 12, 0);\">21.ConcurrentHashMap 的并发度是什么？</span></h3><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>程序运行时能够同时更新 ConccurentHashMap 且不产生锁竞争的最大线程数。默认为 16，且可以在构造函数中设置。</p><p data-tool=\"mdnice编辑器\" style=\"margin: 1em 4px;padding-top: 8px;padding-bottom: 8px;outline: 0px;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb black border-box break-word>当用户设置并发度时，ConcurrentHashMap 会使用大于等于该值的最小2幂指数作为实际并发度（假如用户设置并发度为17，实际并发度则为32）<span style=\"background-color: rgb(251, 249, 253);letter-spacing: 0.05em;\"></span></p><blockquote style=\"white-space: normal;\"><p><span style=\"font-size: 14px;\">转自：菜鸟小于</span></p><p style=\"text-align: left;\"><span style=\"font-size: 14px;\">链接：www.cnblogs.com/Young111/p/11519952.html?utm_source=gold_browser_extension</span></p></blockquote><p style=\"white-space: normal;caret-color: rgb(0, 0, 0);text-size-adjust: auto;\"><span style=\"font-size: 15px;\"></span></p><p style=\"white-space: normal;caret-color: rgb(0, 0, 0);text-size-adjust: auto;\"><span style=\"font-size: 15px;\"></span></p><p style=\"white-space: normal;\"><br></p><p style=\"white-space: normal;text-align: center;\"><span style=\"font-size: 15px;color: rgb(136, 136, 136);\">- EOF -</span></p><section donone=\"shifuMouseDownCard('shifu_c_030')\" label=\"Copyright Reserved by PLAYHUDONG.\" style=\"margin-top: 1em;margin-bottom: 1em;white-space: normal;text-align: start;max-width: 100%;caret-color: rgb(0, 0, 0);color: rgb(0, 0, 0);border-width: 0px;border-style: initial;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-left: 1em;max-width: 100%;line-height: 1.4;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"padding: 3px 8px;max-width: 100%;border-radius: 4px;color: rgb(255, 255, 255);background-color: rgb(255, 105, 31);font-family: inherit;text-align: inherit;text-decoration: inherit;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">推荐阅读</span>  <span style=\"margin-left: 4px;padding: 3px 8px;max-width: 100%;border-radius: 1.2em;color: rgb(255, 255, 255);line-height: 1.2;background-color: rgb(204, 204, 204);font-family: inherit;text-align: inherit;text-decoration: inherit;border-color: rgb(249, 110, 87);font-size: 12px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">点击标题可跳转</span></section><section style=\"margin-top: -11px;padding: 22px 16px 16px;max-width: 100%;border-width: 1px;border-style: solid;border-color: rgb(255, 105, 31);color: rgb(51, 51, 51);font-size: 1em;font-family: inherit;text-align: inherit;text-decoration: inherit;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"max-width: 100%;min-height: 1em;line-height: 2em;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;mid=2651508510&amp;idx=1&amp;sn=d88c3206cbcdad9c2120dcab15e6280e&amp;chksm=bd25a3618a522a773c8d83fec087fcb56d3a30dcf46fb84691c320546b81f9768b6d747dad43&amp;scene=21#wechat_redirect\" textvalue=\"Java8中谨慎使用实数作为HashMap的key!\" linktype=\"text\" imgurl=\"\" imgdata=\"null\" data-itemshowtype=\"0\" tab=\"innerlink\" style=\"font-size: 12px;text-decoration: underline;\" data-linktype=\"2\"><span style=\"font-size: 12px;\">Java8中谨慎使用实数作为HashMap的key!</span></a><br></p><p style=\"max-width: 100%;min-height: 1em;line-height: 2em;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"font-size: 12px;text-decoration: underline;\"><a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;mid=2651507050&amp;idx=2&amp;sn=c3e4fb7916091fe780abd25c20e0833d&amp;chksm=bd25a5158a522c0336dd036b96de6b60c2ea6c90702f2abb9567ac5dfbfafecca4a141876919&amp;scene=21#wechat_redirect\" textvalue=\"精妙绝伦的并发艺术品 — ConcurrentHashMap是如何保证线程安全的\" linktype=\"text\" imgurl=\"\" imgdata=\"null\" data-itemshowtype=\"0\" tab=\"innerlink\" data-linktype=\"2\">精妙绝伦的并发艺术品 — ConcurrentHashMap是如何保证线程安全的</a></span></p><p style=\"max-width: 100%;min-height: 1em;line-height: 2em;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;mid=2651503297&amp;idx=2&amp;sn=5f19e03d6b86789b3b28af5cee97d1e9&amp;chksm=bd25d6be8a525fa8b8d16745d3454ddc4aa562571964d88eb9fd4e2cb274f8a9ae806bf0b3d5&amp;scene=21#wechat_redirect\" textvalue=\"一个 HashMap 跟面试官扯了半个小时\" linktype=\"text\" imgurl=\"\" imgdata=\"null\" data-itemshowtype=\"11\" tab=\"innerlink\" style=\"font-size: 12px;text-decoration: underline;\" data-linktype=\"2\"><span style=\"font-size: 12px;\">一个 HashMap 跟面试官扯了半个小时</span></a><br></p></section></section><p style=\"white-space: normal;caret-color: rgb(0, 0, 0);color: rgb(0, 0, 0);text-align: start;max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><br></p><p style=\"white-space: normal;max-width: 100%;min-height: 1em;font-family: -apple-system-font, system-ui, \" helvetica neue sc sans gb yahei ui arial sans-serif rgb center border-box break-word><span style=\"font-size: 15px;\"><span style=\"max-width: 100%;color: rgb(255, 169, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;\"></span></span></p><p style=\"white-space: normal;text-align: center;\"><span style=\"max-width: 100%;font-size: 14px;color: rgb(255, 169, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;\">看完本文有收获？请转发分享给更多人</span><br></p><p style=\"white-space: normal;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><strong style=\"max-width: 100%;color: rgb(255, 169, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;\">关注「ImportNew」，提升Java技能</strong></p><p style=\"white-space: normal;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><img class=\"rich_pages wxw-img\" data-ratio=\"0.9166666666666666\" data-s=\"300,640\" data-type=\"jpeg\" data-w=\"600\" style=\"box-sizing: border-box !important; overflow-wrap: break-word !important; visibility: visible !important; width: 600px !important; max-width: 600px\" width=\"auto\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/2A8tXicCG8ylbWIGfdoDED35IRRySQZTXUkJ1eop9MHApzFibKnOo0diboXpl0rmS5mH78YJhsWQv0dhv718A6kUA/640?wx_fmt=jpeg\"></p><p style=\"white-space: normal;text-align: right;\"><span style=\"font-size: 14px;\"></span><span style=\"max-width: 100%;font-family: -apple-system-font, system-ui, \" helvetica neue sc sans gb yahei ui arial sans-serif center break-word border-box>点赞和在看就是最大的支持</span><span style=\"max-width: 100%;font-family: -apple-system-font, system-ui, \" helvetica neue sc sans gb yahei ui arial sans-serif center break-word border-box>❤️</span></p><p><br></p>\n                </div>\n\n    \n    <br>\n\n    \n        <a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;mid=2651510871&amp;idx=2&amp;sn=26c36742f18d57a41d3cd6746ac8c3a9&amp;chksm=bd25b4288a523d3eceed6639f90f296b4593241e977d9c76e9b18b64af12c54a7bf677019cc9#rd\" style=\"color: blue\" class=\"media_tool_meta meta_primary\">文章原文</a>\n        <br>\n    \n\n    \n\n    <img alt=\"\" width=\"1px\" height=\"1px\" class=\"\" style=\"width:1px;height:1px;display:none\" src=\"http://www.jintiankansha.me/rss_static/11757/1zvgFngOYN\"></div></div>","descriptionType":"html","publishedDate":"Thu, 10 Mar 2022 02:30:00 +0000","feedId":2521,"bgimg":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQy05Yyba8KyhoshOiaGjcCSiaQCSj5goTrCRxGZ33p8ic4hazH8sKjIXv0o48IlVxQVaJDV2dPLAMRjg/0?wx_fmt=jpeg?imageView2/1/w/600","linkMd5":"a70b57afdc54e1b53535b77204d3a5e1","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn52@2020_3/2022/03/14/11-15-38-262_0916564146eb7d14.webp","destWidth":1080,"destHeight":459,"sourceBytes":37131,"destBytes":25214,"author":"","articleImgCdnMap":{"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQy05Yyba8KyhoshOiaGjcCSiaQCSj5goTrCRxGZ33p8ic4hazH8sKjIXv0o48IlVxQVaJDV2dPLAMRjg/0?wx_fmt=jpeg?imageView2/1/w/600":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn52@2020_3/2022/03/14/11-15-38-262_0916564146eb7d14.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/iatuNc7NQHickAhMV0TjhX04HK2iadAoFhBFPSF4qKuzzXJWqV04d7yibwgP1hRaGU4zibnvA1pwgLwY3YNSaBa7waQ/640?wx_fmt=jpeg":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn76@2020_3/2022/03/14/11-16-53-466_7256e4d000450b07.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/iatuNc7NQHickAhMV0TjhX04HK2iadAoFhBF42GMl1HT1F6xbEwGG8bTdfarYU1ABonvFvG5xEMUPHiaYWrzicgTv2w/640?wx_fmt=jpeg":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn80@2020_1/2022/03/14/11-15-46-789_49429855c52f5651.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/2A8tXicCG8ylbWIGfdoDED35IRRySQZTXUkJ1eop9MHApzFibKnOo0diboXpl0rmS5mH78YJhsWQv0dhv718A6kUA/640?wx_fmt=jpeg":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn83@2020_3/2022/03/14/11-16-01-690_f93d0239d4369c75.webp","http://www.jintiankansha.me/rss_static/11757/1zvgFngOYN":null},"publishedOrCreatedDate":1647256460074}],"record":{"createdTime":"2022-03-14 19:14:20","updatedTime":"2022-03-14 19:14:20","feedId":2521,"fetchDate":"Mon, 14 Mar 2022 11:14:20 +0000","fetchMs":172,"handleMs":105,"totalMs":154272,"newArticles":0,"totalArticles":5,"status":1,"type":0,"ip":"245d88d7b2d8f26704713c23b090d029","hostName":"us-017*","requestId":"667c1d6d3f3646b59ecdcff77141a87f_2521","contentType":"application/rss+xml","totalBytes":79366,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":5,"articlesImgsGithubTotal":4,"successGithubMap":{"myreaderx24":2,"myreaderx1":1,"myreaderx29":1},"failGithubMap":{}},"feed":{"createdTime":"2020-08-24 21:31:41","updatedTime":"2020-09-01 10:09:47","id":2521,"name":"ImportNew","url":"http://feedmaker.kindle4rss.com/feeds/importnew.weixin.xml","subscriber":null,"website":null,"icon":"http://www.sogou.com/images/logo/new/favicon.ico?v=4","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx63/cdn9@2020_3/2020/09/01/02-08-31-388_d24121c9beed1de6.ico","description":"伯乐在线旗下账号，专注Java技术分享，包括Java基础技术、进阶技能、架构设计和Java技术领域动态等。","weekly":null,"link":null},"noPictureArticleList":[{"createdTime":"2022-03-14 19:16:53","updatedTime":"2022-03-14 19:16:53","id":null,"feedId":2521,"linkMd5":"a70b57afdc54e1b53535b77204d3a5e1"}],"tmpCommonImgCdnBytes":25214,"tmpBodyImgCdnBytes":54152,"tmpBgImgCdnBytes":0,"extra4":{"start":1647256459437,"total":0,"statList":[{"spend":533,"msg":"获取xml内容"},{"spend":105,"msg":"解释文章"},{"spend":0,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":75012,"msg":"正文链接上传到cdn"}]},"extra5":5,"extra6":5,"extra7ImgCdnFailResultVector":[null,{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/iatuNc7NQHickAhMV0TjhX04HK2iadAoFhBFPSF4qKuzzXJWqV04d7yibwgP1hRaGU4zibnvA1pwgLwY3YNSaBa7waQ/640?wx_fmt=jpeg","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":2521,"totalSpendMs":743,"convertSpendMs":0,"createdTime":"2022-03-14 19:15:38","host":"europe61*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E9%98%BF%E9%87%8C%E9%9D%A2%E8%AF%95%20HashMap%20%E7%9A%84%2021%20%E8%BF%9E%E9%97%AE%EF%BC%81%E4%BD%A0%E9%A1%B6%E5%BE%97%E4%BA%86%E5%98%9B","linkMd5ListStr":"a70b57afdc54e1b53535b77204d3a5e1","extra22GetBytesInfo":"2、Referer字段 ： http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E9%98%BF%E9%87%8C%E9%9D%A2%E8%AF%95%20HashMap%20%E7%9A%84%2021%20%E8%BF%9E%E9%97%AE%EF%BC%81%E4%BD%A0%E9%A1%B6%E5%BE%97%E4%BA%86%E5%98%9B","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"http://www.jintiankansha.me/rss_static/11757/1zvgFngOYN","sourceStatusCode":405,"sourceBytes":0,"destBytes":0,"feedId":2521,"totalSpendMs":889,"convertSpendMs":0,"createdTime":"2022-03-14 19:15:38","host":"us-014*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E9%98%BF%E9%87%8C%E9%9D%A2%E8%AF%95%20HashMap%20%E7%9A%84%2021%20%E8%BF%9E%E9%97%AE%EF%BC%81%E4%BD%A0%E9%A1%B6%E5%BE%97%E4%BA%86%E5%98%9B","linkMd5ListStr":"a70b57afdc54e1b53535b77204d3a5e1","extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[405],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"http://www.jintiankansha.me/rss_static/11757/1zvgFngOYN","sourceStatusCode":405,"sourceBytes":0,"destBytes":0,"feedId":2521,"totalSpendMs":728,"convertSpendMs":0,"createdTime":"2022-03-14 19:15:39","host":"us-54*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E9%98%BF%E9%87%8C%E9%9D%A2%E8%AF%95%20HashMap%20%E7%9A%84%2021%20%E8%BF%9E%E9%97%AE%EF%BC%81%E4%BD%A0%E9%A1%B6%E5%BE%97%E4%BA%86%E5%98%9B","linkMd5ListStr":"a70b57afdc54e1b53535b77204d3a5e1","extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[405],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/iatuNc7NQHickAhMV0TjhX04HK2iadAoFhBFPSF4qKuzzXJWqV04d7yibwgP1hRaGU4zibnvA1pwgLwY3YNSaBa7waQ/640?wx_fmt=jpeg","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":2521,"totalSpendMs":743,"convertSpendMs":0,"createdTime":"2022-03-14 19:15:38","host":"europe61*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E9%98%BF%E9%87%8C%E9%9D%A2%E8%AF%95%20HashMap%20%E7%9A%84%2021%20%E8%BF%9E%E9%97%AE%EF%BC%81%E4%BD%A0%E9%A1%B6%E5%BE%97%E4%BA%86%E5%98%9B","linkMd5ListStr":"a70b57afdc54e1b53535b77204d3a5e1","extra22GetBytesInfo":"2、Referer字段 ： http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E9%98%BF%E9%87%8C%E9%9D%A2%E8%AF%95%20HashMap%20%E7%9A%84%2021%20%E8%BF%9E%E9%97%AE%EF%BC%81%E4%BD%A0%E9%A1%B6%E5%BE%97%E4%BA%86%E5%98%9B","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"}],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://us-54.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[405]},"http://us-039.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-005.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe61.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[403]},"http://us-014.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[405]},"http://us-040.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[403]},"http://us-027.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQy05Yyba8KyhoshOiaGjcCSiaQCSj5goTrCRxGZ33p8ic4hazH8sKjIXv0o48IlVxQVaJDV2dPLAMRjg/0?wx_fmt=jpeg?imageView2/1/w/600","sourceStatusCode":200,"destWidth":1080,"destHeight":459,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn52@2020_3/2022/03/14/11-15-38-262_0916564146eb7d14.webp","sourceBytes":37131,"destBytes":25214,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":16983,"convertSpendMs":14,"createdTime":"2022-03-14 19:15:21","host":"europe63*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E9%98%BF%E9%87%8C%E9%9D%A2%E8%AF%95%20HashMap%20%E7%9A%84%2021%20%E8%BF%9E%E9%97%AE%EF%BC%81%E4%BD%A0%E9%A1%B6%E5%BE%97%E4%BA%86%E5%98%9B","linkMd5ListStr":"a70b57afdc54e1b53535b77204d3a5e1,a70b57afdc54e1b53535b77204d3a5e1","githubUser":"myreaderx24","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"36.3 KB","destSize":"24.6 KB","compressRate":"67.9%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/iatuNc7NQHickAhMV0TjhX04HK2iadAoFhBF42GMl1HT1F6xbEwGG8bTdfarYU1ABonvFvG5xEMUPHiaYWrzicgTv2w/640?wx_fmt=jpeg","sourceStatusCode":200,"destWidth":629,"destHeight":252,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn80@2020_1/2022/03/14/11-15-46-789_49429855c52f5651.webp","sourceBytes":12036,"destBytes":8528,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":8341,"convertSpendMs":15,"createdTime":"2022-03-14 19:15:38","host":"us-039*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E9%98%BF%E9%87%8C%E9%9D%A2%E8%AF%95%20HashMap%20%E7%9A%84%2021%20%E8%BF%9E%E9%97%AE%EF%BC%81%E4%BD%A0%E9%A1%B6%E5%BE%97%E4%BA%86%E5%98%9B","linkMd5ListStr":"a70b57afdc54e1b53535b77204d3a5e1","githubUser":"myreaderx24","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"11.8 KB","destSize":"8.3 KB","compressRate":"70.9%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/2A8tXicCG8ylbWIGfdoDED35IRRySQZTXUkJ1eop9MHApzFibKnOo0diboXpl0rmS5mH78YJhsWQv0dhv718A6kUA/640?wx_fmt=jpeg","sourceStatusCode":200,"destWidth":600,"destHeight":550,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn83@2020_3/2022/03/14/11-16-01-690_f93d0239d4369c75.webp","sourceBytes":37143,"destBytes":31608,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":23232,"convertSpendMs":15,"createdTime":"2022-03-14 19:15:38","host":"us-027*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E9%98%BF%E9%87%8C%E9%9D%A2%E8%AF%95%20HashMap%20%E7%9A%84%2021%20%E8%BF%9E%E9%97%AE%EF%BC%81%E4%BD%A0%E9%A1%B6%E5%BE%97%E4%BA%86%E5%98%9B","linkMd5ListStr":"a70b57afdc54e1b53535b77204d3a5e1","githubUser":"myreaderx29","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"36.3 KB","destSize":"30.9 KB","compressRate":"85.1%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/iatuNc7NQHickAhMV0TjhX04HK2iadAoFhBFPSF4qKuzzXJWqV04d7yibwgP1hRaGU4zibnvA1pwgLwY3YNSaBa7waQ/640?wx_fmt=jpeg","sourceStatusCode":200,"destWidth":803,"destHeight":384,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn76@2020_3/2022/03/14/11-16-53-466_7256e4d000450b07.webp","sourceBytes":22493,"destBytes":14016,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":13957,"convertSpendMs":30,"createdTime":"2022-03-14 19:16:39","host":"us-005*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E9%98%BF%E9%87%8C%E9%9D%A2%E8%AF%95%20HashMap%20%E7%9A%84%2021%20%E8%BF%9E%E9%97%AE%EF%BC%81%E4%BD%A0%E9%A1%B6%E5%BE%97%E4%BA%86%E5%98%9B","linkMd5ListStr":"a70b57afdc54e1b53535b77204d3a5e1","githubUser":"myreaderx1","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"22 KB","destSize":"13.7 KB","compressRate":"62.3%"}],"successGithubMap":{"myreaderx24":2,"myreaderx1":1,"myreaderx29":1},"failGithubMap":{}}
{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2022-03-14 16:34:37","updatedTime":"2022-03-14 16:34:37","title":"去Oracle实录：如何在线更换金融核心场景中的数据库？","link":"http://weixin.sogou.com/weixin?type=2&query=%E7%BB%86%E8%AF%B4%E4%BA%91%E8%AE%A1%E7%AE%97+%E5%8E%BBOracle%E5%AE%9E%E5%BD%95%EF%BC%9A%E5%A6%82%E4%BD%95%E5%9C%A8%E7%BA%BF%E6%9B%B4%E6%8D%A2%E9%87%91%E8%9E%8D%E6%A0%B8%E5%BF%83%E5%9C%BA%E6%99%AF%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%9F","description":"<div><div><div id=\"media\" class=\"rich_media_thumb_wrp\">\n\n            <img class=\"rich_media_thumb\" src=\"http://img.100weidu.com/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8JJI1U8Ln50RB79SXZpTjHpAZibyTlkdg7mjXxW5RjLWyDAFGjb2XXvkg?imageView2/1/w/600\">\n        </div>\n    \n\n    \n\n    <div class=\"rich_media_content\" id=\"js_content\">\n                    \n\n                    \n\n                    \n                    \n                    <section style=\"color: rgb(63, 63, 63);font-size: 14px;font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;text-align: center;box-sizing: border-box;\"><section style=\"box-sizing: border-box;text-align: left;\">\n\t\t<img data-ratio=\"0.665625\" data-type=\"jpeg\" data-w=\"1280\" style=\"width: 100%; border-radius: 4px; margin-bottom: 25px; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8JgjLlAGtZHAnbjxAA3I3J0rGblUoMdgb5Mu4Tb851x5fXm6sHZw10qg/640?wx_fmt=jpeg\">\n\t</section><section style=\"box-sizing: border-box;color: rgb(145, 145, 145);text-align: left;line-height: 1em;margin-top: 13px;padding-left: 14px;\">\n\t\t作者 | 王英杰\t</section><section style=\"box-sizing: border-box;color: rgb(145, 145, 145);text-align: left;line-height: 1em;margin-top: 13px;padding-left: 14px;\">\n\t\t编辑 | 田晓旭\t</section><section style=\"box-sizing: border-box;font-size: 15px;text-align: justify;line-height: 27px;color: rgb(89, 89, 89);background-color: rgb(239, 239, 239);padding: 19px;margin-top: 40px;margin-right: 8px;margin-left: 8px;\">\n\t\t本文会分享陆金所在线换库的全过程，详细剖析陆金所设计的在线换数据库方案，整套方案又是如何在一个复杂庞大的金融系统里，通过多团队紧密配合稳妥落地。希望阅读本文之后，能够让大家深入了解金融核心系统去 Oracle 的难点和风险，并给想去 Oracle 但是不敢落地实施的同学提供真正的实战案例解决思路。\t</section><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">陆金所从 2018 年启动全站去 O 项目以来，在不做任何服务降级的情况下，历时 2 年通过上百次变更，把全站 98% 的 Oracle 数据库无缝切换到 MySQL 上。其中，这 98% 的数据库覆盖了陆金所的账务、资金、资产中心、支付、交易、用户、基金、主账户、网贷、资管、银行理财等全金融场景。整个去 O 的全程 0 故障、0 风险、对用户几乎不感知。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\"><img data-ratio=\"0.5625\" data-type=\"jpeg\" data-w=\"1280\" style=\"width: 100%; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8Jq5bNZcvmiaCH4QRVicomadHqia4R7pHHuXI2yeVfZFAP0vicnhicJqtqQJw/640?wx_fmt=jpeg\"></p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">陆金所去 Oracle 实践有四大特点：</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">一是在线更换数据库，不做服务降级。让去 O 这类重大架构改造实施落地的时候对全站用户影响最小，同时也最考验去 O 的架构改造的技术实现能力。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">二是对于高频上线了上百次的去 O 变更，全程 0 故障、0 风险，这一点非常考验陆金所去 O 的变更工具水平。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">三是在短短 24 个月的时间完成全站 98% 的数据库去 O 改造，并且涉及陆金所全部最核心的业务，去 O 的整体落地效率非常快。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">四是在去 O 各个环节实现了从开发、测试到运维各种自研智能工具来把控去 O 各个核心环节的质量，这也是把一个庞大、复杂、高风险的金融核心系统，在非常短的时间内 0 风险、0 故障，稳妥落地去 O 的关键。</p><section style=\"box-sizing: border-box;font-size: 20px;color: rgb(0, 179, 139);text-align: left;line-height: 35px;margin-top: 40px;margin-right: 8px;margin-left: 8px;background-image: url(\" https: left no-repeat initial>\n\t\t<span style=\"display: block;font-size: 32px;margin-bottom: 10px;padding-left: 22px;\">1</span> 陆金所为什么要全站去 Oracle？\t</section><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">陆金所为什么需要启动去全站去 O，并且是 100% 全部去 O。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\"><img data-ratio=\"0.5625\" data-type=\"jpeg\" data-w=\"1280\" style=\"width: 100%; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8JzkJlkj8r3wOpNjl1pBiczcNvUWx38AWicAFW0Bqyx2LFTCojEfT8Jniaw/640?wx_fmt=jpeg\"></p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">在去 O 项目立项之初，我们希望通过去 O 来实现三个方面的提升。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">首先是降低昂贵的金融系统数据库运营成本。2013 年至 2018 年期间，陆金所的业务成长了上百倍。业务量增长带来的数据库运营成本暴增。无论是传统的 IOE 架构还是去 IE 后的 X86+Oracle 分布式架构都是如此。IOE 架构下，高端服务器和高端存储的价格随着提供的计算和 IO 能力呈现指数型增长。X86+Oracle 架构下，分布式改造和数据库细粒度水平拆分后虽然没有 I 和 E 的成本，但数据库节点暴增后导致 Oracle 软件授权费用暴增。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">其次是希望通过去 O 来打造一个不依赖特定数据库特性的金融交易系统，彻底摆脱被商业数据库厂商技术绑架的风险。传统金融交易系统使用数据库特性承担了大量的业务逻辑和架构属性，造成系统对某个数据库特性的强依赖，也大大增加了被技术绑架的风险。陆金所通过全站去 O 实现了把金融交易系统里数据库的角色转化为只支持基本增、删、改、查的存储引擎，全站系统架构弱依赖数据库特性。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">最后一点也是最重要的一点，我们希望通过全站去 O 这样一个涉及到开发、测试、架构、DBA 等全部研发团队都参与的重大架构改造项目，来锻炼研发队伍、提升研发能力，并把历史上一些架构设计不完善的地方，通过全站去 O 进行重构。因为去 O 不仅仅是更换数据库，更重要的是落地架构拆分、微服务化、分布式事务等配套的大量架构改造工作。这些工作需要开发、架构、测试、运维高度协同配合，并稳妥落地。所以去 O 是非常考验研发团队技术水平的架构改造项目。通过，我们也希望通过去 O 打造“研发规范——研发工具——研发人员”的研发管理体系闭环。这一块我们在后面会详细展开，并向大家进行介绍。</p><section style=\"box-sizing: border-box;font-size: 20px;color: rgb(0, 179, 139);text-align: left;line-height: 35px;margin-top: 40px;margin-right: 8px;margin-left: 8px;background-image: url(\" https: left no-repeat initial>\n\t\t<span style=\"display: block;font-size: 32px;margin-bottom: 10px;padding-left: 22px;\">2</span> 技术选型：为什么是 MySQL，又不仅是 MySQL\t</section><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">决定去 Oracle 之后，选择什么数据库或存储引擎来承载 Oracle 的流量？我们从功能、资源、案例和压测四个方面来进行选型和评估。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\"><img data-ratio=\"0.5625\" data-type=\"jpeg\" data-w=\"1280\" style=\"width: 100%; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8JlvlycmtfwyEyz0PbU6yYLWke88znYYCialPGSibRMJzEKu2nRVlrsa9Q/640?wx_fmt=jpeg\"></p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">首先，选择的数据库要从功能和性能上能够承接 Oracle 在各种场景下计算和 IO 能力。其次，它还要具备最广泛的社区资源、技术资料和问题处理案例，通俗的说就是大量坑被踩过，以及最广泛的用户基础，外面招开发和运维工程师都比较好招。然后，还要在业界有可参考的金融场景案例。这一点相信大家都很熟悉，阿里和腾讯在金融场景上已经有不少成功的案例。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">最后，同时也是最重要的一个评估标准就是陆金所自身上线前严格的压测环节。陆金所在切换任何一张表流量的时候，都会使用生产环境完全真实的数据搭建 O 和 M 并行压测环境，来获取访问这张表的所有读写接口的在 Oracle11.2 和 MySQL5.7 下的性能比对报告。经过每一轮非常严格的压测后，发现 MySQL5.7 的性能比我们预估中的更好。通过从边缘系统往核心系统的逐步去 O 演进中，MySQL5.7 就成为陆金所去 O 最主要的替代存储引擎。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">我们都知道 Oracle 是个非常优秀、且覆盖场景非常全面，无论是 OLTP 还是 OLAP 场景表现都很优秀，所以这种功能承接应该远远不止一种数据库或存储引擎，涉及到多种存储引擎发挥他们的优势在各种特定场景下来替换 Oracle。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">所以最终的结论是综合选型下来确定 <strong style=\"text-align: left;\">使用 MySQL 为主，TiDB、Redis、ES、HBase 等多种存储引擎为辅的方式，100% 全部替换掉 Oracle。</strong> </p><section style=\"box-sizing: border-box;font-size: 20px;color: rgb(0, 179, 139);text-align: left;line-height: 35px;margin-top: 40px;margin-right: 8px;margin-left: 8px;background-image: url(\" https: left no-repeat initial>\n\t\t<span style=\"display: block;font-size: 32px;margin-bottom: 10px;padding-left: 22px;\">3</span> 陆金所去 Oracle 方案\t</section><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">接下来，我们就详细介绍陆金所的去 Oracle 方案。</p><section style=\"box-sizing: border-box;height: 34px;margin-top: 40px;margin-right: 8px;margin-left: 8px;font-size: 16px;color: rgb(25, 182, 215);text-align: left;\"><span style=\"height: 19px;display: block;background-image: url(\" https: left top no-repeat initial></span>\n\t去 O 双写和切换方案\t</section><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\"><img data-ratio=\"0.5625\" data-type=\"jpeg\" data-w=\"1280\" style=\"width: 100%; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8JSaxmvIxMCuu5boFwAqbdL70TVib1dKwzGNujx9lM6icAuU91VpchU5hg/640?wx_fmt=jpeg\"></p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">陆金所去 Oracle 改造主要是分为应用和数据库两个部分来落地的。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">首先介绍一下应用层部分的落地。应用层在去 O 的时候会做一个整体规划，把一个大的系统或库拆分成多个可独立落地的批次，然后会把应用的业务逻辑层从数据库的访问接口尽可能剥离出来，让 DAL 层专注只做好数据库交互的操作。同时，在 Oracle DAL 层的基础上，对 MySQL DAL 层的进行重构，并且配置流量开关让上层的业务逻辑层可以自由选择和数据库的交互是走 Oracle DAL 层还是 MySQL DAL 层。每个批次都会有自己单独的流量开关进行控制。批次拆分的时候遵循一个原则就是把具备业务相关性和事务相关性的表放在一个批次里。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">再说数据库层的落地，在 Oracle 还在不断对外提供服务的时候，我们会在后台建立起一个和 Oracle 保持实时数据同步的 MySQL 数据库，即当 Oracle 的事务提交后，秒级同步到后端的 MySQL 里面。同时这个同步是双向的，当未来流量切换到 MySQL 后，也会在 MySQL 事务提交完成后，把数据秒级同步回 Oracle，这就类似 MySQL 的双 master 架构，只不过数据是在 Oracle 和 MySQL 这个异构数据库之间建立双 master 架构。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">在这个架构中为了确保数据库的一致性和完整性，一定是严格要求某个批次的写流量只能在某个时间点只能在 O 和 M 一个地方写入。陆金所研发了一整套自动化构建数据库双写的工具平台，只要在平台上选择需要建立批次的 Oracle 表，就能在后台全自动完成 Oracle to MySQL 从表结构转化、数据全量同步、数据增量同步、数据实时同步、数据校验和数据双向同步建立整个全流程繁琐。依据这套自动化平台，陆金所只投入 2 个 DBA 就完成了全站上万张表的去 O 数据库迁移和运维层的全部准备工作。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">最后是流量切换，我们设计并研发了一套总控开关机制来协调从应用、到数据库、到传输、最后到流向的全盘流量切换。实现当流量在 O 时，实时同步到 M。当流量在 M 时，实时同步到 O。保证切换一瞬间，最后一笔事务在源库提交成功，在目标库传输成功，并完成最后一笔事务的数据在源库和目标库的数据校验后，同一个批次下所有表的写流量在同一个时间点同时完成切换。</p><section style=\"box-sizing: border-box;height: 34px;margin-top: 40px;margin-right: 8px;margin-left: 8px;font-size: 16px;color: rgb(25, 182, 215);text-align: left;\"><span style=\"height: 19px;display: block;background-image: url(\" https: left top no-repeat initial></span>\n\t应用流量在 O 和 M 之间快速切换\t</section><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\"><img data-ratio=\"0.5625\" data-type=\"jpeg\" data-w=\"1280\" style=\"width: 100%; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8J7qc1iaQq7oAtCWicI5SZIlB0lW8vyMMUgEkjAnHQnmDqD7TkX8aO4btg/640?wx_fmt=jpeg\"></p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">虽然去 O 流量切换会在 10 秒内瞬间完成，但整个过程按照细粒度划分会有十多个步骤。为了方便介绍，我们把这十几个步骤精简成了三个状态。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">首先是初始状态，这个状态下生产的只读流量可以在 Oracle 或 MySQL，写流量可以在 Oracle，由 Oracle 对外提供服务。这个状态状态可以理解为 Oracle 为主库，MySQL 为 Oracle 的异构实时备库。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">其次是中间状态，这个状态下 Oracle 和 MySQL 会进入一个非常短暂的写保护静止状态。在完成最后一笔 Oracle 事务提供成功，并同步至 MySQL，且完成最后一笔数据一致性校验后，会把应用开关的流量切换到 MySQL，这个时候这个批次的写流量在某个时间点全部一致性都切换到 MySQL。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">一旦在 MySQL 里写流量进来，就进入了第三个状态即完成状态，一旦写流量的事务在 MySQL 中提交成功，双向实时同步链路会把 MySQL 的数据秒级同步回 Oracle，这个时候可以理解为 MySQL 是主库，Oracle 是 MySQL 的实时备库。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">需要注意的是，这个架构下需要解决大量的细节问题，比如避免同一笔记录双向循环写的问题。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">陆金所实现的这个双写框架流量切换速度极快，在数秒内就能实现有状态的写流量从 O 到 M 的快速切换，整个过程在低峰期落地对业务影响非常小，甚至是不感知。如果在去 O 之前在 Oracle 内部已经完成了对用户的水平拆分，以批次和用户双重细粒度进行去 O 流量切换，那么整个更换数据库过程几乎是无感的。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">在流量从 O 切换到 M 后，以陆金所落地的经验来看，大概有一定概率（比如程序的 bug）需要回切到回 Oracle。这套切换框架可以确保在几秒内流量快速回到 Oracle，且在 MySQL 写入的少量数据也会同步回 Oracle，且在保证 Oracle 和 MySQL 两边的数据严格一致性和完整性的过程中，进行流量的快速前滚和回滚。</p><section style=\"box-sizing: border-box;height: 34px;margin-top: 40px;margin-right: 8px;margin-left: 8px;font-size: 16px;color: rgb(25, 182, 215);text-align: left;\"><span style=\"height: 19px;display: block;background-image: url(\" https: left top no-repeat initial></span>\n\t适用于金融核心系统的稳妥去 O 推进方案\t</section><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\"><img data-ratio=\"0.5625\" data-type=\"jpeg\" data-w=\"1280\" style=\"width: 100%; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8J90SZavWjeu70Ba0jDJsxjuBGib2n5xONrWIY1HAqtVFs3MkQA6Pn0xA/640?wx_fmt=jpeg\"></p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">了解了去 O 流量切换的架构和方案，接下来我们介绍如何在一个关联系统庞大、业务逻辑复杂、改造风险极高的金融核心系统里落地整个去 O 方案。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">首先我们会以表为粒度来把一个复杂、庞大的金融核心系统和数据库拆分成多个批次，拆分的原则上面也提到了一点，即把有业务相关性和事务相关性的表放在同一个批次里，在确保这个基本原则的情况下，把单个大库尽可能的拆分成多个批次，确保每个批次里的表尽可能的少。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">为什么要基于这个原则来落地实施呢，因为批次是去 O 变更的单位，O 和 M 之间的流量切换开关是控制到批次的。把批次拆分的足够细，最终目标是为了实现“改造难度可控、上线进度可控、切换风险可控”的 3 原则。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">首先对于金融核心系统中一个复杂的模块来说，去 O 改造的周期会横跨半年甚至一年以上，在这个过程中，金融核心系统在 7*24 小时不间断对外提供服务，应用层的代码和功能每个月甚至是每周也处在高速迭代中，不断的新功能被加入到系统并被发布到生产。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">而在这个过程中，要落地去 O 这类庞大的架构改造，必须框定一个可快速迭代和实施的改造范围，批次就是一个合理设定的单次去 O 改造和变更的范围。批次拆分的粒度细，可以确保在单个批次的去 O 改造工作量可控、改造难度也可控。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">同时因为批次的粒度细，在做去 O 变更切换流量时，对整个金融核心系统的影响也可控。基于这种思路，就可以实现“小步快跑”的高速迭代方式来改造应用、上线版本以及切换流量。即每次只改动核心系统的一小部分，改动完成后快速测试、快速发版上线、并且风险可控的把这部分流量切换到 MySQL 运行，如果有问题依靠强大的流量切换框架，快速把流量回切回 Oracle。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">从图中大家可以看到一个庞大的金融核心系统去 O 改造中，应用改造、上线版本和流量切换这 3 件事情实在并行落地的。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">最开始是应用改造，改造完了上线发版，发版后就有了这个批次 O 和 M 的流量开关，并具备了切换条件，之后在某个变更日把流量从 O 切换到 M，如果遇到任何问题可以快速切回来。应用版本在不断上线迭代，流量在分批次不断切换，一个庞大的金融核心系统就在多次高速迭代中一点点的从 O 切换到了 M。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">整个过程对核心业务不影响、不感知，且对参与去 O 的开发、测试和运维开展去 O 工作非常友好，让他们可控的去落地各项工作。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">在这个过程中，从第 1 张表从 Oracle 切换到 MySQL，到最后一张表关闭 Oracle 流量，在非常长的一段时间内，整个应用是由 Oracle 和 MySQL 在同时提供服务。其中某些表已经完成去 O，读写的流量在 MySQL 上，由 MySQL 同步到 Oracle，部分表还未完成去 O，读写流量在 Oracle 上，由 Oracle 同步至 MySQL。这就非常考验运维的能力，要确保在这个架构下每天高频的各种发版和数据库变更都非常准确。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">基于此，陆金所是有研发一整套配套去 O 变更工具，来确保整个去 O 过程中大量变更准确实施和落地。以陆金所交易、主账户、资产中心、基金、账务等核心库为例，从第一张表流量切换到 MySQL 到最后一张表切换到 MySQL，历时 12 个月以上。按照上述方案一点一点的替换掉 Oracle 数据库，整个过程完全不做服务降级，对陆金所的 4500 多万用户无感知。</p><section style=\"box-sizing: border-box;font-size: 20px;color: rgb(0, 179, 139);text-align: left;line-height: 35px;margin-top: 40px;margin-right: 8px;margin-left: 8px;background-image: url(\" https: left no-repeat initial>\n\t\t<span style=\"display: block;font-size: 32px;margin-bottom: 10px;padding-left: 22px;\">4</span> 陆金所去 Oracle 方案的落地\t</section><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">在 PPT 中画出去 Oracle 的架构图是很简单的事情，但是架构改造的难点和重点在于落地。要在生产环境落地是非常庞大且复杂的系统工程，尤其是对一个 7*24 小时的金融核心系统来说，进行重大架构改造本身就是一件高风险的工作，既要做到规避风险，确保各种工程实现细节有效落地，同时又要保证系统的业务连续性，甚至是对外部用户不感知。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">去 Oracle 架构改造的本质是什么？我觉得有两方面，一是细节规则，二是上生产前发现和上生产后兜底。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">去 O 的重点不仅仅是方案本身，更重要的是组成方案的数百条细节规则，能在一个参与去 O 的、庞大的研发团队里每个开发所写的每一行代码都有效遵守规则，同时在每个运维设计的生产变更方案里每一条命令都有效遵守规则。方案通过从边缘系统往核心系统逐步推进过程中，会逐步趋于完善，方案中的规则也会被逐步积累和完善起来，那么把这些规则落地到研发团队的每个人上，是关键和重点。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">上生产前发现是指如果规则在某个微小的细节实施时没有被遵守，如何尽可能的在上生产环境之间发现隐患。上生产后兜底如果问题突破了所有检测环节上了生产，如何设计一个兜底方案可以有效控制风险，把影响尽可能降低。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">去 Oracle 落地工作都应该围绕有效解决这两个本质问题展开，并提升这两个问题的解决效率，降低人力成本。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\"><strong style=\"text-align: left;\">陆金所的做法是建立“人员——规则——工具”的闭环。</strong> </p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">陆金所通过“人员制定规则——规则通过工具落地——工具确保所有人员的代码和变更符合规则”的方式来确保各种细节工作落实到位，整套工具最终沉淀为陆金所数据库升级平台。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">以陆金所的去 O 落地经验来看，一个不起眼的细节问题如果未进行有效管控，都有可能引发严重的生产故障。所以我们可以把陆金所数据库升级平台理解成为一套强大的去 O 风控系统。这套风控系统覆盖 SQL 重构、表结构转化、数据迁移、数据校验、分布式事务构建、流量切换等横跨从开发到运维在去 O 架构改造方方面面会遇到的问题。通过这套工具平台，有效确保参与去 O 的研发团队在每个细节上都处理的非常规范，从而实现历时 24 个月的全站去 O，无风险平稳落地。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\"><img data-ratio=\"0.5625\" data-type=\"jpeg\" data-w=\"1280\" style=\"width: 100%; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8J4MYGIshpd91pKXuHib1W1AMrMQ265xwODrzJLGVpAIa13BKGO7A3MhA/640?wx_fmt=jpeg\"></p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">除了确保各种规则精准落地外，金融核心系统去 O 改造需要多个研发团队协同作战、有效配合、共同推进。其中涉及到大量工程实现细节工作需要多团队有条不紊、事无巨细的协同配合好。任何疏漏都有可能会引发严重的生产故障。</p><section style=\"box-sizing: border-box;font-size: 20px;color: rgb(0, 179, 139);text-align: left;line-height: 35px;margin-top: 40px;margin-right: 8px;margin-left: 8px;background-image: url(\" https: left no-repeat initial>\n\t\t<span style=\"display: block;font-size: 32px;margin-bottom: 10px;padding-left: 22px;\">5</span> 经验总结：谈谈企业去 Oracle 的目标\t</section><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">去 Oracle 的口号喊了很久了，但是为什么要去 Oracle，去 Oracle 想要达到什么样的目标...... 有些企业可能没有想得很清楚，所以我也想从自己的角度和经历来谈谈去 Oracle 的目标。</p><section style=\"box-sizing: border-box;height: 34px;margin-top: 40px;margin-right: 8px;margin-left: 8px;font-size: 16px;color: rgb(25, 182, 215);text-align: left;\"><span style=\"height: 19px;display: block;background-image: url(\" https: left top no-repeat initial></span>\n\t目标一：省钱\t</section><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">去 O 完成后，使用“免费的开源数据库 + X86 架构的 PC Server”来搭建金融核心系统，真的很省钱。因为搭建金融核心系统从昂贵的高端服务器、高端存储和 Oracle 一体机，以及昂贵的 Oracle 软件授权变成只需要 6 万一台的 X86 服务器，花在数据库上的运营成本降为之前的 10% 不到。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\"><img data-ratio=\"0.5625\" data-type=\"jpeg\" data-w=\"1280\" style=\"width: 100%; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8JKCBfdDqEUFAliaY5xFETLXgYs8s4w8ALkACV0sWYvbupQdThxhfQDhA/640?wx_fmt=jpeg\"></p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">在整个去 Oracle 的过程中，陆金所架构从一个传统金融的超大型数据库支持各种核心业务的架构变成了以微服务化驱动的分布式架构，这种架构具备以下特点：</p><ul class=\"list-paddingleft-2\" style=\"list-style-type: disc;\"><li><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">每个服务有自己独立的应用和数据库。</p></li><li><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">每个库只提供给服务内的应用直接访问，即服务内的应用可以通过 SQL 访问。</p></li><li><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">服务之外的应用访问数据库需要走应用层的服务接口，避免跨服务访问数据库。</p></li><li><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">服务分为同步调用和异步消息。</p></li><li><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">在服务内实现数据库的水平扩展。</p></li><li><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">对于类似用户、交易、资金等公共类基础服务，逐步迭代为中台服务。</p></li></ul><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">通过微服务化拆分，几套集中式的 IOE 大库就变成了微服务小库，同时对于访问量和数据量较大的中台服务，又会进一步细粒度水平拆分。</p><section style=\"box-sizing: border-box;height: 34px;margin-top: 40px;margin-right: 8px;margin-left: 8px;font-size: 16px;color: rgb(25, 182, 215);text-align: left;\"><span style=\"height: 19px;display: block;background-image: url(\" https: left top no-repeat initial></span>\n\t目标二：架构升级和改造\t</section><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">除了降低成本，我认为更重要的是通过去 O 实现传统金融系统全方位的架构升级和改造。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\"><img data-ratio=\"0.5625\" data-type=\"jpeg\" data-w=\"1280\" style=\"width: 100%; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8JOrKKb3Sz6thCice0Oeq4NVTW6zibVPLAFbRrjXrUHIOygNPawRNGVtSg/640?wx_fmt=jpeg\"></p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">对于一个传统金融系统来说，借助去 O 来实施和落地全系统的架构改造和升级，应该是一个再好不过的机会。以陆金所为例，通过去 O 实现了以下的升级和改造：</p><ul class=\"list-paddingleft-2\" style=\"list-style-type: disc;\"><li><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">数据库底层计算和 IO 能力的水平扩展，并且这种水平扩展完全基于 6 万一台的 X86 服务器，扩容成本极低。</p></li><li><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">同时实现了应用访问数据库的规范化，应用和应用之间的服务化。全站的调用链会非常清晰，应用和数据库之间不合理的依赖将大幅降低。</p></li><li><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">另外实现数据库层去中心化，单个数据库的可用率对全局可用率影响有限，消除中心化的单点隐患</p></li><li><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">最后借助去 O 实现的分布式架构，可以把各个分片的数据库部署在不同的机房，从而实现真正意义上的机房多活。</p></li></ul><section style=\"box-sizing: border-box;height: 34px;margin-top: 40px;margin-right: 8px;margin-left: 8px;font-size: 16px;color: rgb(25, 182, 215);text-align: left;\"><span style=\"height: 19px;display: block;background-image: url(\" https: left top no-repeat initial></span>\n\t目标三：引入更合适的存储引擎\t</section><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">提到去 Oracle，可能很多人在第一时间就想到了 MySQL。其实，MySQL 是承接 Oracle 主要流量的数据库，但 MySQL 无法承接 Oracle 的全部流量，例如以下几类经典场景：</p><ul class=\"list-paddingleft-2\" style=\"list-style-type: disc;\"><li><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">Oracle 在 oltp 场景当中少量 hash join 查询场景。</p></li><li><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">Oracle 中多表关联和多层复杂嵌套查询场景。</p></li><li><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">MySQL 细粒度拆分后，跨库、跨分片的查询场景。</p></li><li><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">在 MySQL 集群和 Hadoop 集群之间构建一个秒级数据同步的 ODS 层。</p></li></ul><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">在这些场景中，可以引入 TiDB、Elasticsearch、Impala+kudu、Redis 等多种存储引擎。这些存储引擎在合适的场景下替换 Oracle，产生的效果是不但比 IOE 架构成本低得多，性能也会比 Oracle 快得多。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">我们以 TiDB 为例来讲讲使用 MySQL 之外的存储引擎是如何支撑 Oracle 流量的。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">陆金所有个实时对账的场景，需要跨用户库、交易库、资金库和资产库进行复杂的关联查询。在完成去 O 后，数据库在 MySQL 上做了细粒度拆分，无法跨多个独立的服务库进行复杂且高频的跨库查询。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">为了支持这个场景，我们研发了数据总线来实施解析 MySQL binlog 并生成消息同步至 TiDB，事务在 MySQL 提交后实现秒级同步至 TiDB。之后通过 TiDB4.0 的 TiFlash 功能（类似 clickhouse 的列式存储），在 MySQL 和 Hadoop 之间搭建一个实时 ODS，实现了秒级处理跨库、多表、复杂关联的查询场景。性能远超去 O 之前在 IOE 架构下的处理结果。</p><section style=\"box-sizing: border-box;font-size: 16px;text-align: left;margin-top: 30px;margin-left: 8px;color: rgb(0, 179, 138);\"><span style=\"display: inline-block;width: 15px;height: 15px;background-image: url(\" https: center no-repeat initial></span>\n\t\t今日推荐文章\t</section><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\"><a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MzIzNjUxMzk2NQ==&amp;mid=2247497458&amp;idx=1&amp;sn=9b3d0456f3c68476d0cd0c7be657c8e1&amp;chksm=e8d40930dfa380264e9fda5039cae693d66422b215d1f67107312d1d6cc056e424273459d8fd&amp;scene=21#wechat_redirect\" data-itemshowtype=\"0\" tab=\"innerlink\" data-linktype=\"2\">快手自研kQUIC：千万级QPS集群是如何实现的？</a><br></p><section style=\"box-sizing: border-box;font-size: 16px;text-align: left;margin-top: 30px;margin-left: 8px;color: rgb(0, 179, 138);\"><span style=\"display: inline-block;width: 15px;height: 15px;background-image: url(\" https: center no-repeat initial></span>\n\t\t活动推荐\t</section><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\">2020 年 7 月 28 日至 8 月 6 日，腾讯云 + 社区将开展以<strong>【数据工匠】</strong>为主题的系列直播活动，一线技术大佬将带来自己的实战经验，内容涵盖：数据中台、Elasticsearch、数据安全、ClickHouse、MySQL 8.0、Pulsar、数据库自治等相关主题。技术干货满满，扫描<strong>图中二维码</strong>或点击<strong>底部原文链接</strong>预约观看。</p><p style=\"box-sizing: border-box;font-size: 16px;text-align: justify;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\"><img class=\"rich_pages\" data-ratio=\"0.5560488346281909\" data-s=\"300,640\" data-type=\"jpeg\" data-w=\"901\" style=\"text-align: center; color: rgb(63, 63, 63); font-size: 14px; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8JiaFk0y8WW9unCtlibOJ2C8gnXGuoSroqTy4v3zC4GRnJSs0LFczwFobw/640?wx_fmt=jpeg\"></p><p style=\"box-sizing: border-box;font-size: 16px;text-align: right;white-space: pre-line;line-height: 27px;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);\"><span style=\"max-width: 100%;font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;font-size: 16px;letter-spacing: 0.544px;text-align: right;white-space: pre-line;background-color: rgb(255, 255, 255);caret-color: rgb(63, 63, 63);text-size-adjust: auto;color: rgb(216, 79, 169);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;\">点个在看少个 bug</span><span style=\"color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;font-size: 16px;letter-spacing: 0.544px;text-align: right;white-space: pre-line;background-color: rgb(255, 255, 255);\"> </span><span style=\"max-width: 100%;font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;font-size: 16px;letter-spacing: 0.544px;text-align: right;white-space: pre-line;background-color: rgb(255, 255, 255);text-size-adjust: auto;color: rgb(0, 179, 139);font-weight: bold;box-sizing: border-box !important;overflow-wrap: break-word !important;\">👇</span></p></section>\n                </div>\n\n    \n        <br>\n        <div id=\"js_toobar3\" class=\"rich_media_tool\">\n            <a target=\"_blank\" href=\"https://cloud.tencent.com/developer/salon/lives?channel=infoq05\" id=\"js_view_source\" class=\"media_tool_meta meta_primary\">阅读原文</a>\n        </div>\n    \n    <br>\n\n    \n        <a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MzIzNjUxMzk2NQ==&amp;mid=2247497632&amp;idx=1&amp;sn=aa41b042dff272f124c6b6f4e6632c3b&amp;chksm=e8d40862dfa381743cc1a54f8e5ac1cc2877636a86cdf2c28b4ab8e7f6ffcf534a5a0d6b612e&amp;scene=0#rd\" style=\"color: blue\" class=\"media_tool_meta meta_primary\">原文</a>\n        <br>\n    \n\n    \n\n    <img alt=\"\" width=\"1px\" height=\"1px\" class=\"\" style=\"width:1px;height:1px;display:none\" src=\"http://www.jintiankansha.me/rss_static/18823/t19KBWJQUn\"></div></div>","descriptionType":"html","publishedDate":"Mon, 27 Jul 2020 04:07:00 +0000","feedId":2802,"bgimg":"http://img.100weidu.com/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8JJI1U8Ln50RB79SXZpTjHpAZibyTlkdg7mjXxW5RjLWyDAFGjb2XXvkg?imageView2/1/w/600","linkMd5":"08a121982e78ee5866519ca008b35aba","sourceBytes":0,"destBytes":0,"author":"","articleImgCdnMap":{"http://img.100weidu.com/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8JJI1U8Ln50RB79SXZpTjHpAZibyTlkdg7mjXxW5RjLWyDAFGjb2XXvkg?imageView2/1/w/600":null,"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8JgjLlAGtZHAnbjxAA3I3J0rGblUoMdgb5Mu4Tb851x5fXm6sHZw10qg/640?wx_fmt=jpeg":null,"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8Jq5bNZcvmiaCH4QRVicomadHqia4R7pHHuXI2yeVfZFAP0vicnhicJqtqQJw/640?wx_fmt=jpeg":null,"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8JzkJlkj8r3wOpNjl1pBiczcNvUWx38AWicAFW0Bqyx2LFTCojEfT8Jniaw/640?wx_fmt=jpeg":null,"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8JlvlycmtfwyEyz0PbU6yYLWke88znYYCialPGSibRMJzEKu2nRVlrsa9Q/640?wx_fmt=jpeg":null,"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8JSaxmvIxMCuu5boFwAqbdL70TVib1dKwzGNujx9lM6icAuU91VpchU5hg/640?wx_fmt=jpeg":null,"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8J7qc1iaQq7oAtCWicI5SZIlB0lW8vyMMUgEkjAnHQnmDqD7TkX8aO4btg/640?wx_fmt=jpeg":null,"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8J90SZavWjeu70Ba0jDJsxjuBGib2n5xONrWIY1HAqtVFs3MkQA6Pn0xA/640?wx_fmt=jpeg":null,"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8J4MYGIshpd91pKXuHib1W1AMrMQ265xwODrzJLGVpAIa13BKGO7A3MhA/640?wx_fmt=jpeg":null,"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8JKCBfdDqEUFAliaY5xFETLXgYs8s4w8ALkACV0sWYvbupQdThxhfQDhA/640?wx_fmt=jpeg":null,"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8JOrKKb3Sz6thCice0Oeq4NVTW6zibVPLAFbRrjXrUHIOygNPawRNGVtSg/640?wx_fmt=jpeg":null,"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8JiaFk0y8WW9unCtlibOJ2C8gnXGuoSroqTy4v3zC4GRnJSs0LFczwFobw/640?wx_fmt=jpeg":null,"http://www.jintiankansha.me/rss_static/18823/t19KBWJQUn":null},"publishedOrCreatedDate":1647246877755}],"record":{"createdTime":"2022-03-14 16:34:37","updatedTime":"2022-03-14 16:34:37","feedId":2802,"fetchDate":"Mon, 14 Mar 2022 08:34:37 +0000","fetchMs":433,"handleMs":13,"totalMs":148924,"newArticles":0,"totalArticles":1,"status":1,"type":0,"ip":"79b59b7ab14b8d981e3d8a220e20848a","hostName":"us-025*","requestId":"a40b70a70712482381b190f3dfe639bf_2802","contentType":"application/rss+xml","totalBytes":0,"bgimgsTotal":1,"bgimgsGithubTotal":0,"articlesImgsTotal":13,"articlesImgsGithubTotal":0,"successGithubMap":{},"failGithubMap":{"myreaderx31":1}},"feed":{"createdTime":"2020-08-24 21:31:45","updatedTime":"2020-09-01 10:15:17","id":2802,"name":"细说云计算","url":"http://feedmaker.kindle4rss.com/feeds/CloudNote.weixin.xml","subscriber":null,"website":null,"icon":"http://www.sogou.com/images/logo/new/favicon.ico?v=4","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx62/cdn63@2020_4/2020/09/01/02-15-17-348_d24121c9beed1de6.ico","description":"InfoQ运维领域垂直号。常规运维、亦或是崛起的DevOps，探讨如何IT交付实现价值。努力为技术人呈现有实践意义的内容~","weekly":null,"link":null},"noPictureArticleList":[{"createdTime":"2022-03-14 16:37:06","updatedTime":"2022-03-14 16:37:06","id":null,"feedId":2802,"linkMd5":"08a121982e78ee5866519ca008b35aba"}],"tmpCommonImgCdnBytes":0,"tmpBodyImgCdnBytes":0,"tmpBgImgCdnBytes":0,"extra4":{"start":1647246877168,"total":0,"statList":[{"spend":574,"msg":"获取xml内容"},{"spend":13,"msg":"解释文章"},{"spend":0,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":139350,"msg":"正文链接上传到cdn"}]},"extra5":13,"extra6":3,"extra7ImgCdnFailResultVector":[{"code":1,"isDone":false,"source":"http://img.100weidu.com/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8JJI1U8Ln50RB79SXZpTjHpAZibyTlkdg7mjXxW5RjLWyDAFGjb2XXvkg?imageView2/1/w/600","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":2802,"totalSpendMs":1737,"convertSpendMs":0,"createdTime":"2022-03-14 16:34:37","host":"us-034*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E7%BB%86%E8%AF%B4%E4%BA%91%E8%AE%A1%E7%AE%97+%E5%8E%BBOracle%E5%AE%9E%E5%BD%95%EF%BC%9A%E5%A6%82%E4%BD%95%E5%9C%A8%E7%BA%BF%E6%9B%B4%E6%8D%A2%E9%87%91%E8%9E%8D%E6%A0%B8%E5%BF%83%E5%9C%BA%E6%99%AF%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%9F","linkMd5ListStr":"08a121982e78ee5866519ca008b35aba,08a121982e78ee5866519ca008b35aba","extra22GetBytesInfo":"2、Referer字段 ： http://weixin.sogou.com/weixin?type=2&query=%E7%BB%86%E8%AF%B4%E4%BA%91%E8%AE%A1%E7%AE%97+%E5%8E%BBOracle%E5%AE%9E%E5%BD%95%EF%BC%9A%E5%A6%82%E4%BD%95%E5%9C%A8%E7%BA%BF%E6%9B%B4%E6%8D%A2%E9%87%91%E8%9E%8D%E6%A0%B8%E5%BF%83%E5%9C%BA%E6%99%AF%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%9F","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"http://img.100weidu.com/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8JJI1U8Ln50RB79SXZpTjHpAZibyTlkdg7mjXxW5RjLWyDAFGjb2XXvkg?imageView2/1/w/600","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":2802,"totalSpendMs":1681,"convertSpendMs":0,"createdTime":"2022-03-14 16:34:39","host":"europe66*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E7%BB%86%E8%AF%B4%E4%BA%91%E8%AE%A1%E7%AE%97+%E5%8E%BBOracle%E5%AE%9E%E5%BD%95%EF%BC%9A%E5%A6%82%E4%BD%95%E5%9C%A8%E7%BA%BF%E6%9B%B4%E6%8D%A2%E9%87%91%E8%9E%8D%E6%A0%B8%E5%BF%83%E5%9C%BA%E6%99%AF%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%9F","linkMd5ListStr":"08a121982e78ee5866519ca008b35aba,08a121982e78ee5866519ca008b35aba","extra22GetBytesInfo":"2、Referer字段 ： http://weixin.sogou.com/weixin?type=2&query=%E7%BB%86%E8%AF%B4%E4%BA%91%E8%AE%A1%E7%AE%97+%E5%8E%BBOracle%E5%AE%9E%E5%BD%95%EF%BC%9A%E5%A6%82%E4%BD%95%E5%9C%A8%E7%BA%BF%E6%9B%B4%E6%8D%A2%E9%87%91%E8%9E%8D%E6%A0%B8%E5%BF%83%E5%9C%BA%E6%99%AF%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%9F","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"http://img.100weidu.com/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8JJI1U8Ln50RB79SXZpTjHpAZibyTlkdg7mjXxW5RjLWyDAFGjb2XXvkg?imageView2/1/w/600","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":2802,"totalSpendMs":1817,"convertSpendMs":0,"createdTime":"2022-03-14 16:34:41","host":"europe-57*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E7%BB%86%E8%AF%B4%E4%BA%91%E8%AE%A1%E7%AE%97+%E5%8E%BBOracle%E5%AE%9E%E5%BD%95%EF%BC%9A%E5%A6%82%E4%BD%95%E5%9C%A8%E7%BA%BF%E6%9B%B4%E6%8D%A2%E9%87%91%E8%9E%8D%E6%A0%B8%E5%BF%83%E5%9C%BA%E6%99%AF%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%9F","linkMd5ListStr":"08a121982e78ee5866519ca008b35aba,08a121982e78ee5866519ca008b35aba","extra22GetBytesInfo":"2、Referer字段 ： http://weixin.sogou.com/weixin?type=2&query=%E7%BB%86%E8%AF%B4%E4%BA%91%E8%AE%A1%E7%AE%97+%E5%8E%BBOracle%E5%AE%9E%E5%BD%95%EF%BC%9A%E5%A6%82%E4%BD%95%E5%9C%A8%E7%BA%BF%E6%9B%B4%E6%8D%A2%E9%87%91%E8%9E%8D%E6%A0%B8%E5%BF%83%E5%9C%BA%E6%99%AF%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%9F","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"http://img.100weidu.com/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8JJI1U8Ln50RB79SXZpTjHpAZibyTlkdg7mjXxW5RjLWyDAFGjb2XXvkg?imageView2/1/w/600","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":2802,"totalSpendMs":1669,"convertSpendMs":0,"createdTime":"2022-03-14 16:34:43","host":"us-009*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E7%BB%86%E8%AF%B4%E4%BA%91%E8%AE%A1%E7%AE%97+%E5%8E%BBOracle%E5%AE%9E%E5%BD%95%EF%BC%9A%E5%A6%82%E4%BD%95%E5%9C%A8%E7%BA%BF%E6%9B%B4%E6%8D%A2%E9%87%91%E8%9E%8D%E6%A0%B8%E5%BF%83%E5%9C%BA%E6%99%AF%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%9F","linkMd5ListStr":"08a121982e78ee5866519ca008b35aba,08a121982e78ee5866519ca008b35aba","extra22GetBytesInfo":"2、Referer字段 ： http://weixin.sogou.com/weixin?type=2&query=%E7%BB%86%E8%AF%B4%E4%BA%91%E8%AE%A1%E7%AE%97+%E5%8E%BBOracle%E5%AE%9E%E5%BD%95%EF%BC%9A%E5%A6%82%E4%BD%95%E5%9C%A8%E7%BA%BF%E6%9B%B4%E6%8D%A2%E9%87%91%E8%9E%8D%E6%A0%B8%E5%BF%83%E5%9C%BA%E6%99%AF%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%9F","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"http://img.100weidu.com/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8JJI1U8Ln50RB79SXZpTjHpAZibyTlkdg7mjXxW5RjLWyDAFGjb2XXvkg?imageView2/1/w/600","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":2802,"totalSpendMs":1713,"convertSpendMs":0,"createdTime":"2022-03-14 16:34:45","host":"us-010*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E7%BB%86%E8%AF%B4%E4%BA%91%E8%AE%A1%E7%AE%97+%E5%8E%BBOracle%E5%AE%9E%E5%BD%95%EF%BC%9A%E5%A6%82%E4%BD%95%E5%9C%A8%E7%BA%BF%E6%9B%B4%E6%8D%A2%E9%87%91%E8%9E%8D%E6%A0%B8%E5%BF%83%E5%9C%BA%E6%99%AF%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%9F","linkMd5ListStr":"08a121982e78ee5866519ca008b35aba,08a121982e78ee5866519ca008b35aba","extra22GetBytesInfo":"2、Referer字段 ： http://weixin.sogou.com/weixin?type=2&query=%E7%BB%86%E8%AF%B4%E4%BA%91%E8%AE%A1%E7%AE%97+%E5%8E%BBOracle%E5%AE%9E%E5%BD%95%EF%BC%9A%E5%A6%82%E4%BD%95%E5%9C%A8%E7%BA%BF%E6%9B%B4%E6%8D%A2%E9%87%91%E8%9E%8D%E6%A0%B8%E5%BF%83%E5%9C%BA%E6%99%AF%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%9F","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"http://www.jintiankansha.me/rss_static/18823/t19KBWJQUn","sourceStatusCode":405,"sourceBytes":0,"destBytes":0,"feedId":2802,"totalSpendMs":411,"convertSpendMs":0,"createdTime":"2022-03-14 16:34:46","host":"us-030*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E7%BB%86%E8%AF%B4%E4%BA%91%E8%AE%A1%E7%AE%97+%E5%8E%BBOracle%E5%AE%9E%E5%BD%95%EF%BC%9A%E5%A6%82%E4%BD%95%E5%9C%A8%E7%BA%BF%E6%9B%B4%E6%8D%A2%E9%87%91%E8%9E%8D%E6%A0%B8%E5%BF%83%E5%9C%BA%E6%99%AF%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%9F","linkMd5ListStr":"08a121982e78ee5866519ca008b35aba","extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[405],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"http://www.jintiankansha.me/rss_static/18823/t19KBWJQUn","sourceStatusCode":405,"sourceBytes":0,"destBytes":0,"feedId":2802,"totalSpendMs":649,"convertSpendMs":0,"createdTime":"2022-03-14 16:34:47","host":"us-011*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E7%BB%86%E8%AF%B4%E4%BA%91%E8%AE%A1%E7%AE%97+%E5%8E%BBOracle%E5%AE%9E%E5%BD%95%EF%BC%9A%E5%A6%82%E4%BD%95%E5%9C%A8%E7%BA%BF%E6%9B%B4%E6%8D%A2%E9%87%91%E8%9E%8D%E6%A0%B8%E5%BF%83%E5%9C%BA%E6%99%AF%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%9F","linkMd5ListStr":"08a121982e78ee5866519ca008b35aba","extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[405],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8J7qc1iaQq7oAtCWicI5SZIlB0lW8vyMMUgEkjAnHQnmDqD7TkX8aO4btg/640?wx_fmt=jpeg","sourceStatusCode":200,"destWidth":1080,"destHeight":608,"sourceBytes":65475,"destBytes":50242,"targetWebpQuality":75,"feedId":2802,"totalSpendMs":23413,"convertSpendMs":28,"createdTime":"2022-03-14 16:34:48","host":"europe-25*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E7%BB%86%E8%AF%B4%E4%BA%91%E8%AE%A1%E7%AE%97+%E5%8E%BBOracle%E5%AE%9E%E5%BD%95%EF%BC%9A%E5%A6%82%E4%BD%95%E5%9C%A8%E7%BA%BF%E6%9B%B4%E6%8D%A2%E9%87%91%E8%9E%8D%E6%A0%B8%E5%BF%83%E5%9C%BA%E6%99%AF%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%9F","linkMd5ListStr":"08a121982e78ee5866519ca008b35aba","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx31/cdn12/contents/2022/03/14/08-35-12-198_554f14ddcd250072.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 69855631.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Resource, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, X-GitHub-SSO, X-GitHub-Request-Id, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Mon, 14 Mar 2022 08:35:12 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["8CB8:271E:748B2DC:772FB5A:622EFE40"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1647249274"],"x-ratelimit-resource":["core"],"x-ratelimit-used":["61"],"x-xss-protection":["0"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx31/cdn12/contents/2022/03/14/08-35-12-198_554f14ddcd250072.webp","historyStatusCode":[],"spendMs":162},"base64UserPassword":null,"token":"da243******************************d9e47"},"githubUser":"myreaderx31","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"63.9 KB","destSize":"49.1 KB","compressRate":"76.7%"},null,null,null,null,null,null,null,null,null,null,{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/FE4VibF0SjfOjsDOqK7DWmtQFCb7UUV8J7qc1iaQq7oAtCWicI5SZIlB0lW8vyMMUgEkjAnHQnmDqD7TkX8aO4btg/640?wx_fmt=jpeg","sourceStatusCode":200,"destWidth":1080,"destHeight":608,"sourceBytes":65475,"destBytes":50242,"targetWebpQuality":75,"feedId":2802,"totalSpendMs":23413,"convertSpendMs":28,"createdTime":"2022-03-14 16:34:48","host":"europe-25*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E7%BB%86%E8%AF%B4%E4%BA%91%E8%AE%A1%E7%AE%97+%E5%8E%BBOracle%E5%AE%9E%E5%BD%95%EF%BC%9A%E5%A6%82%E4%BD%95%E5%9C%A8%E7%BA%BF%E6%9B%B4%E6%8D%A2%E9%87%91%E8%9E%8D%E6%A0%B8%E5%BF%83%E5%9C%BA%E6%99%AF%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%9F","linkMd5ListStr":"08a121982e78ee5866519ca008b35aba","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx31/cdn12/contents/2022/03/14/08-35-12-198_554f14ddcd250072.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 69855631.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Resource, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, X-GitHub-SSO, X-GitHub-Request-Id, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Mon, 14 Mar 2022 08:35:12 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["8CB8:271E:748B2DC:772FB5A:622EFE40"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1647249274"],"x-ratelimit-resource":["core"],"x-ratelimit-used":["61"],"x-xss-protection":["0"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx31/cdn12/contents/2022/03/14/08-35-12-198_554f14ddcd250072.webp","historyStatusCode":[],"spendMs":162},"base64UserPassword":null,"token":"da243******************************d9e47"},"githubUser":"myreaderx31","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"63.9 KB","destSize":"49.1 KB","compressRate":"76.7%"},null,null,null,null,null,null,null,null,null,null],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://us-013.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://europe-56.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://europe68.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://europe65.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://us-005.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://us-030.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[405]},"http://us-52.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://us-026.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://us-011.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[405]},"http://europe-25.herokuapp.com/":{"failCount":10,"successCount":2,"resultList":[200,200,null,null,null,null,null,null,null,null,null,null]},"http://us-001.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://us-017.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://europe64.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]}},"extra12ImgCdnSuccessResultVector":[],"successGithubMap":{},"failGithubMap":{"myreaderx31":1}}
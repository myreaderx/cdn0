{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2020-10-13 22:40:58","updatedTime":"2020-10-13 22:40:58","title":"Android ListView常用用法","link":"https://www.iteye.com/blog/user/rayleung/blog/540423","description":"<p>ListView是比较常用的控件，但一直都觉得创建ListView步骤有点繁琐，故在此总结一下，方便查阅。</p> \n<p>程序效果是实现一个ListView,ListView里面有标题，内容和图片，并加入点击和长按响应。</p> \n<p>&nbsp;</p> \n<p><img alt=\"\" src=\"http://dl.iteye.com/upload/picture/pic/50539/53b86995-cb1d-3058-83fa-6550dcc94d00.png\" /></p> \n<p>&nbsp;</p> \n<p>&nbsp;</p> \n<p><img alt=\"\" src=\"http://dl.iteye.com/upload/picture/pic/50537/dd6b52aa-a9b4-37c0-87e9-d9ee84eedd0d.png\" /></p> \n<p>&nbsp;</p> \n<p>首先在xml里面定义一个ListView</p> \n<p>&nbsp;</p> \n<pre name=\"code\" class=\"xml\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout \n\tandroid:id=\"@+id/LinearLayout01\" \n\tandroid:layout_width=\"fill_parent\" \n\tandroid:layout_height=\"fill_parent\" \n\txmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n&lt;ListView android:layout_width=\"wrap_content\" \n          android:layout_height=\"wrap_content\" \n          android:id=\"@+id/ListView01\"\n          /&gt;\n&lt;/LinearLayout&gt;</pre> \n<p>&nbsp; </p> \n<p>定义ListView每个条目的Layout，用RelativeLayout实现：</p> \n<p>&nbsp;</p> \n<pre name=\"code\" class=\"xml\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout \n\tandroid:id=\"@+id/RelativeLayout01\" \n\tandroid:layout_width=\"fill_parent\" \n\txmlns:android=\"http://schemas.android.com/apk/res/android\" \n\tandroid:layout_height=\"wrap_content\" \n\tandroid:paddingBottom=\"4dip\" \n\tandroid:paddingLeft=\"12dip\"\n\tandroid:paddingRight=\"12dip\"&gt;\n&lt;ImageView \n\tandroid:paddingTop=\"12dip\"\n\tandroid:layout_alignParentRight=\"true\"\n\tandroid:layout_width=\"wrap_content\" \n\tandroid:layout_height=\"wrap_content\" \n\tandroid:id=\"@+id/ItemImage\"\n\t/&gt; \n&lt;TextView \n    android:text=\"TextView01\" \n    android:layout_height=\"wrap_content\" \n    android:textSize=\"20dip\" \n    android:layout_width=\"fill_parent\" \n    android:id=\"@+id/ItemTitle\"\n    /&gt;\n&lt;TextView \n\tandroid:text=\"TextView02\" \n\tandroid:layout_height=\"wrap_content\" \n\tandroid:layout_width=\"fill_parent\" \n\tandroid:layout_below=\"@+id/ItemTitle\" \n\tandroid:id=\"@+id/ItemText\"\n\t/&gt;\n&lt;/RelativeLayout&gt;</pre> \n<p>&nbsp;</p> \n<p>&nbsp;最后在Activity里面调用和加入Listener,具体见注释：</p> \n<p>&nbsp;</p> \n<pre name=\"code\" class=\"java\">package com.ray.test;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\n\nimport android.app.Activity;\nimport android.os.Bundle;\nimport android.view.ContextMenu;\nimport android.view.MenuItem;\nimport android.view.View;\nimport android.view.ContextMenu.ContextMenuInfo;\nimport android.view.View.OnCreateContextMenuListener;\nimport android.widget.AdapterView;\nimport android.widget.ListView;\nimport android.widget.SimpleAdapter;\nimport android.widget.AdapterView.OnItemClickListener;\n\npublic class TestListView extends Activity {\n\t@Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.main);\n        //绑定Layout里面的ListView\n        ListView list = (ListView) findViewById(R.id.ListView01);\n        \n        //生成动态数组，加入数据\n        ArrayList&lt;HashMap&lt;String, Object&gt;&gt; listItem = new ArrayList&lt;HashMap&lt;String, Object&gt;&gt;();\n        for(int i=0;i&lt;10;i++)\n        {\n        \tHashMap&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();\n        \tmap.put(\"ItemImage\", R.drawable.checked);//图像资源的ID\n        \tmap.put(\"ItemTitle\", \"Level \"+i);\n        \tmap.put(\"ItemText\", \"Finished in 1 Min 54 Secs, 70 Moves! \");\n        \tlistItem.add(map);\n        }\n        //生成适配器的Item和动态数组对应的元素\n        SimpleAdapter listItemAdapter = new SimpleAdapter(this,listItem,//数据源 \n            R.layout.list_items,//ListItem的XML实现\n            //动态数组与ImageItem对应的子项        \n            new String[] {\"ItemImage\",\"ItemTitle\", \"ItemText\"}, \n            //ImageItem的XML文件里面的一个ImageView,两个TextView ID\n            new int[] {R.id.ItemImage,R.id.ItemTitle,R.id.ItemText}\n        );\n       \n        //添加并且显示\n        list.setAdapter(listItemAdapter);\n        \n        //添加点击\n        list.setOnItemClickListener(new OnItemClickListener() {\n\n\t\t\t@Override\n\t\t\tpublic void onItemClick(AdapterView&lt;?&gt; arg0, View arg1, int arg2,\n\t\t\t\t\tlong arg3) {\n\t\t\t\tsetTitle(\"点击第\"+arg2+\"个项目\");\n\t\t\t}\n\t\t});\n        \n      //添加长按点击\n        list.setOnCreateContextMenuListener(new OnCreateContextMenuListener() {\n\t\t\t\n\t\t\t@Override\n\t\t\tpublic void onCreateContextMenu(ContextMenu menu, View v,ContextMenuInfo menuInfo) {\n\t\t\t\tmenu.setHeaderTitle(\"长按菜单-ContextMenu\");   \n\t\t\t\tmenu.add(0, 0, 0, \"弹出长按菜单0\");\n\t\t\t\tmenu.add(0, 1, 0, \"弹出长按菜单1\");   \n\t\t\t}\n\t\t}); \n    }\n\t\n\t//长按菜单响应函数\n\t@Override\n\tpublic boolean onContextItemSelected(MenuItem item) {\n\t\tsetTitle(\"点击了长按菜单里面的第\"+item.getItemId()+\"个项目\"); \n\t\treturn super.onContextItemSelected(item);\n\t}\n}</pre> \n<p>&nbsp;&nbsp; </p> \n<p>&nbsp;</p> \n<br />\n<br /> \n<ul>\n  本文附件下载: \n <li><a href=\"http://dl.iteye.com/topics/download/a18b87bf-9ca0-369f-9af1-cfe7ef5badbd\">TestListView02.rar</a> (40.1 KB)</li> \n</ul> \n<br />\n<br /> \n<span style=\"color:red;\"> <a href=\"https://www.iteye.com/blog/rayleung-540423#comments\" style=\"color:red;\">已有 <strong>27</strong> 人发表留言，猛击-&gt;&gt;<strong>这里</strong>&lt;&lt;-参与讨论</a> </span> \n<br />\n<br />\n<br /> \n<span style=\"color:#E28822;\">ITeye推荐</span> \n<br /> \n<ul>\n <li><a href=\"https://www.iteye.com/clicks/433\" target=\"_blank\"><span style=\"color:red;font-weight:bold;\">—软件人才免语言低担保 赴美带薪读研！— </span></a></li>\n</ul> \n<br />\n<br />\n<br />","descriptionType":"text/html","publishedDate":"Thu, 03 Dec 2009 12:56:51 +0000","feedId":39332,"bgimg":"http://dl.iteye.com/upload/picture/pic/50539/53b86995-cb1d-3058-83fa-6550dcc94d00.png","linkMd5":"71872e7e97a51b36395f6f543f989ab3","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx/cdn77@2020_5/2020/10/13/14-41-05-161_8da0a42923be7707.webp","destWidth":480,"destHeight":320,"sourceBytes":28901,"destBytes":14706,"author":"","articleImgCdnMap":{"http://dl.iteye.com/upload/picture/pic/50539/53b86995-cb1d-3058-83fa-6550dcc94d00.png":"https://cdn.jsdelivr.net/gh/myreaderx/cdn77@2020_5/2020/10/13/14-41-05-161_8da0a42923be7707.webp","http://dl.iteye.com/upload/picture/pic/50537/dd6b52aa-a9b4-37c0-87e9-d9ee84eedd0d.png":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn82@2020_6/2020/10/13/14-41-13-868_534b5501104ab5b3.webp"},"publishedOrCreatedDate":1602600058271}],"record":{"createdTime":"2020-10-13 22:40:58","updatedTime":"2020-10-13 22:40:58","feedId":39332,"fetchDate":"Tue, 13 Oct 2020 14:40:58 +0000","fetchMs":2510,"handleMs":9,"totalMs":30227,"newArticles":0,"totalArticles":10,"status":1,"type":0,"ip":"8f41f8a56dca4331062af167bd7997ff","hostName":"europe70*","requestId":"785f813a0e98476d99ec0e7cedf145b2_39332","contentType":"text/xml; charset=utf-8","totalBytes":25832,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":2,"articlesImgsGithubTotal":2,"successGithubMap":{"myreaderx31":1,"myreaderx":1},"failGithubMap":{}},"feed":{"createdTime":"2020-09-07 03:17:03","updatedTime":"2020-09-07 05:32:54","id":39332,"name":"Ray's blog","url":"http://rayleung.iteye.com/rss","subscriber":82,"website":null,"icon":"https://www.iteye.com/images/wap/favicon.ico","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx62/cdn19@2020_4/2020/09/06/21-32-53-449_546831a528c577e3.ico","description":"Coder @ UC.CN。Focus on User Interface, Graphics & Animations.","weekly":null,"link":null},"noPictureArticleList":[],"tmpCommonImgCdnBytes":14706,"tmpBodyImgCdnBytes":11126,"tmpBgImgCdnBytes":0,"extra4":{"start":1602600044459,"total":0,"statList":[{"spend":13803,"msg":"获取xml内容"},{"spend":9,"msg":"解释文章"},{"spend":0,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":8557,"msg":"正文链接上传到cdn"}]},"extra5":2,"extra6":2,"extra7ImgCdnFailResultVector":[],"extra10_invalidATagHrefValue":{"https://www.iteye.com/blog/user/rayleung/blog/540423_/clicks/433":"https://www.iteye.com/clicks/433"},"extra111_proxyServerAndStatMap":{"http://us-015.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"http://dl.iteye.com/upload/picture/pic/50539/53b86995-cb1d-3058-83fa-6550dcc94d00.png","sourceStatusCode":200,"destWidth":480,"destHeight":320,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx/cdn77@2020_5/2020/10/13/14-41-05-161_8da0a42923be7707.webp","sourceBytes":28901,"destBytes":14706,"targetWebpQuality":75,"feedId":39332,"totalSpendMs":7685,"convertSpendMs":13,"createdTime":"2020-10-13 22:40:58","host":"us-027*","referer":"https://www.iteye.com/blog/user/rayleung/blog/540423","linkMd5ListStr":"71872e7e97a51b36395f6f543f989ab3,71872e7e97a51b36395f6f543f989ab3","githubUser":"myreaderx","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"28.2 KB","destSize":"14.4 KB","compressRate":"50.9%"},{"code":1,"isDone":false,"source":"http://dl.iteye.com/upload/picture/pic/50537/dd6b52aa-a9b4-37c0-87e9-d9ee84eedd0d.png","sourceStatusCode":200,"destWidth":480,"destHeight":320,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn82@2020_6/2020/10/13/14-41-13-868_534b5501104ab5b3.webp","sourceBytes":22943,"destBytes":11126,"targetWebpQuality":75,"feedId":39332,"totalSpendMs":8393,"convertSpendMs":12,"createdTime":"2020-10-13 22:41:06","host":"us-015*","referer":"https://www.iteye.com/blog/user/rayleung/blog/540423","linkMd5ListStr":"71872e7e97a51b36395f6f543f989ab3","githubUser":"myreaderx31","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"22.4 KB","destSize":"10.9 KB","compressRate":"48.5%"}],"successGithubMap":{"myreaderx31":1,"myreaderx":1},"failGithubMap":{}}
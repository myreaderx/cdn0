{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2021-05-02 20:51:50","updatedTime":"2021-05-02 20:51:50","title":"通过 shell 执行 python 报错: No such file or directory","link":"http://liaohuqiu.net/cn/posts/python-script-in-bin-directory.cn","description":"<h4>问题</h4>\n\n<p>有一个 python 的小脚本 <a href=\"https://github.com/liaohuqiu/keep-running\">keep-running</a>，是用来实现守护进程的，当进程退出之后，会重新启动进程。</p>\n\n<p>这是一个工具脚本，发布到了Pypi: <a href=\"https://pypi.python.org/pypi/keep-running\">https://pypi.python.org/pypi/keep-running</a> ，安装时只要一个命令：</p>\n<div class=\"highlight\"><pre><code class=\"language-text\" data-lang=\"text\">pip install keep-running\n</code></pre></div>\n<p>安装之后，这个脚本会拷贝到 <code>/usr//bin</code>。我们期待安装之后，可以通过命令行运行：</p>\n<div class=\"highlight\"><pre><code class=\"language-text\" data-lang=\"text\">[huqiu@101 android-gems-middleware]$ keep-running\n</code></pre></div>\n<p>当然，为了可以直接运行，需要在脚本头部加上这样一段，这个是基础知识了：</p>\n<div class=\"highlight\"><pre><code class=\"language-text\" data-lang=\"text\">#!/usr/bin/env python\n</code></pre></div>\n<p>实际上，运行之后：</p>\n<div class=\"highlight\"><pre><code class=\"language-text\" data-lang=\"text\">[huqiu@101 android-gems-middleware]$ keep-running\n: No such file or directory\n</code></pre></div>\n<p>但是可以通过 python 执行：</p>\n<div class=\"highlight\"><pre><code class=\"language-text\" data-lang=\"text\">[huqiu@101 android-gems-middleware]$ python keep-running\n</code></pre></div>\n<h4>原因</h4>\n\n<p>原因是：该脚本文件格式是 dos 格式 而非 unix 格式。</p>\n\n<p>dos格式下，换行符是 CRLF 的问题，使得第一行变成了（CR 的 ascii 码是 015）：</p>\n<div class=\"highlight\"><pre><code class=\"language-text\" data-lang=\"text\">#!/usr/bin/env python\\015\n</code></pre></div>\n<p>修改成 unix 格式就好了。我刚发布了 <a href=\"https://github.com/liaohuqiu/keep-running/releases/tag/1.0.0\">1.0.0</a> 解决了这个问题。</p>\n\n<h4>修改方法</h4>\n\n<p>在 vim 中，查看文件格式，并设置，保存即可</p>\n\n<p>查看</p>\n<div class=\"highlight\"><pre><code class=\"language-text\" data-lang=\"text\">:set ff\n</code></pre></div>\n<p>设置</p>\n<div class=\"highlight\"><pre><code class=\"language-text\" data-lang=\"text\">:set ff=unix\n</code></pre></div>","descriptionType":"text/html","publishedDate":"Tue, 12 May 2015 16:00:00 +0000","feedId":42550,"bgimg":"","linkMd5":"3edad28a30c88daa78bc34ae54a5c2d7","bgimgJsdelivr":"","metaImg":"","author":"srain@php.net (Huqiu Liao / Srain)","publishedOrCreatedDate":1619959910341}],"record":{"createdTime":"2021-05-02 20:51:50","updatedTime":"2021-05-02 20:51:50","feedId":42550,"fetchDate":"Sun, 02 May 2021 12:51:50 +0000","fetchMs":7329,"handleMs":16760,"totalMs":25265,"newArticles":0,"totalArticles":116,"status":1,"type":0,"ip":"af6ca12eefe249e94a3f077d15d7c168","hostName":"europe65*","requestId":"61bd4882a21b4c5dbff2f212c673134f_42550","contentType":"text/xml","totalBytes":0,"bgimgsTotal":0,"bgimgsGithubTotal":0,"articlesImgsTotal":0,"articlesImgsGithubTotal":0,"successGithubMap":{},"failGithubMap":{}},"feed":{"createdTime":"2020-09-07 03:27:55","updatedTime":"2020-10-10 00:38:57","id":42550,"name":"liaohuqiu.net","url":"http://www.liaohuqiu.net/rss.xml","subscriber":75,"website":null,"icon":"http://liaohuqiu.net/favicon.ico","icon_jsdelivr":null,"description":"Yet Another Summer Rain","weekly":null,"link":"http://liaohuqiu.net"},"noPictureArticleList":[],"tmpCommonImgCdnBytes":0,"tmpBodyImgCdnBytes":0,"tmpBgImgCdnBytes":0,"extra4":{"start":1619959885077,"total":0,"statList":[{"spend":8504,"msg":"获取xml内容"},{"spend":16760,"msg":"解释文章"},{"spend":0,"msg":"上传封面图到cdn"},{"spend":0,"msg":"正文链接上传到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"}]},"extra5":0,"extra6":0,"extra7ImgCdnFailResultVector":[],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{},"extra12ImgCdnSuccessResultVector":[],"successGithubMap":{},"failGithubMap":{}}
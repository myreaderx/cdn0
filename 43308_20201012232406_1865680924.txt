{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2020-10-13 07:22:46","updatedTime":"2020-10-13 07:22:46","title":"The CDS and Python III: VizieR & XMatch – 20k catalogues and tables at your fingertips","link":"https://www.astrobetter.com/?p=9949","description":"<p><em><a href=\"http://katha-lutz.de/\" target=\"_blank\" rel=\"noopener noreferrer\">Katharina Lutz</a> is a postdoc at the Centre de Données astronomiques de Strasbourg (CDS). She works on gas and star formation in nearby galaxies, and the dissemination of the Virtual Observatory (VO) and the CDS services. This involves maintaining and developing tutorials, and mentoring at VO Schools. This post was written in collaboration with the CDS Python developers, who are currently working on further MOCpy and astroquery developments, and the CDS dissemination team, who are preparing for the next VO training events. </em></p> \n<p>We are back with our miniseries focusing on accessing the CDS services with Python! In our first two articles we introduced ipyaladin to access (all-sky) imaging surveys and MOCs for simple mapping of complex regions on the sky (e.g., survey footprints). In this third article, we will show you how you can access all data stored in VizieR, and crossmatch local and VizieR tables.</p> \n<p><a href=\"https://vizier.u-strasbg.fr/index.gml\" target=\"_blank\" rel=\"noopener noreferrer\">VizieR</a> is a database of tables and catalogues from published papers and big surveys and missions. In addition to tabular data, more images, spectra, cubes or light curves (which are associated with a table) become available in VizieR. Both the tabular data and the associated data can be searched and found with Python scripts.</p> \n<h3><strong>Tables</strong></h3> \n<p>There are currently three packages that you can use to query VizieR tables:</p> \n<ul> \n <li>the Astropy affiliated package <strong><a href=\"https://astroquery.readthedocs.io/en/latest/vizier/vizier.html\" target=\"_blank\" rel=\"noopener noreferrer\">astroquery</a></strong> (see Figure 1),</li> \n <li>through the TAP (Table Access Protocol, an <a href=\"http://www.ivoa.net/documents/TAP/\" target=\"_blank\" rel=\"noopener noreferrer\">IVOA standard</a>) module of <strong><a href=\"https://pyvo.readthedocs.io/en/latest/#\" target=\"_blank\" rel=\"noopener noreferrer\">pyVO</a></strong> (see Figure 2), or</li> \n <li>within a MOC using <strong><a href=\"https://cds-astro.github.io/mocpy/examples/examples.html#\" target=\"_blank\" rel=\"noopener noreferrer\">MOCpy</a></strong> (see also their example notebooks).</li> \n</ul> \n<p>The <strong>astroquery</strong> VizieR package enables you to search for certain catalogues, as well as query all VizieR catalogues in a specific region or for a certain object. An example of a basic search for all “SDSS DR9”-related VizieR catalogues is shown below.</p> \n<img loading=\"lazy\" class=\"aligncenter size-full wp-image-9956\" src=\"https://www.astrobetter.com/wp-content/uploads/2020/06/image12.gif\" alt=\"\" width=\"1145\" height=\"298\" /> \n<p>Using the astronomy-specific version of SQL (called ADQL), you can query the table of all VizieR catalogues and single VizieR catalogues with <strong>pyVO</strong>. The first example below shows how you could search for all catalogues with the keywords “2MASS” and “Cutri” in their description. The second code cell shows an example of getting five entries of the 2MASS point source catalogue, which we identified with the first query.</p> \n<img loading=\"lazy\" class=\"aligncenter size-full wp-image-9950\" src=\"https://www.astrobetter.com/wp-content/uploads/2020/06/image6.gif\" alt=\"\" width=\"1145\" height=\"820\" /> \n<p>The best thing about all of these queries is that they either directly return an Astropy Table or can be conveniently converted to an Astropy Table. This way you can load any table you need and immediately continue on with your analysis.</p> \n<h3><strong>Associated Data</strong></h3> \n<p>Since 2016, VizieR does not only host tables from papers and large surveys but also the associated data. If, for example, a table contained photometric measurements, the associated data could be the images from which the photometric measurements were taken. To search and find associated data that are in the VizieR database, you could go through the <a href=\"http://cdsarc.u-strasbg.fr/assocdata/\" target=\"_blank\" rel=\"noopener noreferrer\">webpage</a>. This post is, however, a little overview of what you can do with Python: in this case <strong>pyVO</strong> is our best friend (see Figure 3). Instead of asking the database of VizieR catalogues (called <tt>tables</tt>) for catalogues, we can ask the database of VizieR associated data (called <tt>obscore</tt>) for images at a certain location or associated with a certain catalogue.</p> \n<img loading=\"lazy\" class=\"aligncenter size-full wp-image-9957\" src=\"https://www.astrobetter.com/wp-content/uploads/2020/06/image3.gif\" alt=\"\" width=\"1145\" height=\"735\" /> \n<p>In the example above, we asked for five entries in <tt>obscore</tt>, which belong to the image collection of the MASH Catalogues of Planetary Nebulae (known to VizieR as “V/127A”). The result is a table with a lot of metadata describing the images that are stored in the collection (e.g., the observatory and instrument), the wavelength range, and also a URL, where you can find the image (or data product in general).</p> \n<h3><strong>Crossmatching of (big) tables with XMatch</strong></h3> \n<p>When talking about tables, I often end up speaking of combining and crossmatching tables as well. One very efficient way of crossmatching two large tables is with the CDS XMatch service. And guess what? There is a neat astroquery package for the XMatch service as well. While you can go to the webpage, where it’s possible to upload your own tables and crossmatch them with each other or any available VizieR table, the XMatch module in <strong>astroquery</strong> allows you to do the same tasks from within a Python script or a Jupyter notebook (see Figure 4).</p> \n<img loading=\"lazy\" class=\"aligncenter size-full wp-image-9958\" src=\"https://www.astrobetter.com/wp-content/uploads/2020/06/image4.gif\" alt=\"\" width=\"1145\" height=\"505\" /> \n<p>In this example, we show how you can crossmatch a local table (saved as “Data/2MASS_PSC.vot”) with the SDSS DR9 table in VizieR. The result is once again returned as an Astropy Table so that you can go straight ahead to the next analysis step.</p> \n<p>If you want more examples, check out our tutorials on <a href=\"https://github.com/cds-astro/tutorials\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub</a> and if you like what you have seen about PyVO in this article, head over to <a href=\"https://heasarc.gsfc.nasa.gov/vo/summary/python.html\" target=\"_blank\" rel=\"noopener noreferrer\">our friends at NASA</a>, where the team has compiled tutorials to show you the full power of <strong>PyVO</strong>.</p> \n<p>As always, tell us how these tools work for you and contact our <a href=\"mailto:cds-question@unistra.fr\" target=\"_blank\" rel=\"noopener noreferrer\">helpdesk</a> for questions. We also welcome issues on <a href=\"https://github.com/cds-astro\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub</a>, and are on <a href=\"https://twitter.com/CdSportal\" target=\"_blank\" rel=\"noopener noreferrer\">Twitter</a>, <a href=\"https://www.facebook.com/CDSportal/\" target=\"_blank\" rel=\"noopener noreferrer\">Facebook</a>, and <a href=\"https://www.youtube.com/channel/UCUESQl7rNupLlV_VcceE0Ng\" target=\"_blank\" rel=\"noopener noreferrer\">YouTube</a>.</p> \n<p>P.S. We not only love to hear your feedback but would also love to <a href=\"https://cdsarc.u-strasbg.fr//vizier.submit/\" target=\"_blank\" rel=\"noopener noreferrer\">host your data</a>!</p> \n<div class=\"feedflare\"> \n <a href=\"http://feeds.feedburner.com/~ff/AstroBetter?a=TspTHss63NE:q10AL9uJbqI:D7DqB2pKExk\"><img src=\"http://feeds.feedburner.com/~ff/AstroBetter?i=TspTHss63NE:q10AL9uJbqI:D7DqB2pKExk\" border=\"0\" /></a> \n</div>\n<img src=\"http://feeds.feedburner.com/~r/AstroBetter/~4/TspTHss63NE\" height=\"1\" width=\"1\" alt=\"\" />","descriptionType":"html","publishedDate":"Mon, 29 Jun 2020 13:00:58 +0000","feedId":43308,"bgimg":"https://www.astrobetter.com/wp-content/uploads/2020/06/image12.gif","linkMd5":"6ca01c4c3869ce47ace12305331d0ea2","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn99@2020_3/2020/10/12/23-22-48-823_6f52a5dfddb51570.webp","destWidth":1145,"destHeight":298,"sourceBytes":55591,"destBytes":52858,"author":"Guest","articleImgCdnMap":{"https://www.astrobetter.com/wp-content/uploads/2020/06/image12.gif":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn99@2020_3/2020/10/12/23-22-48-823_6f52a5dfddb51570.webp","https://www.astrobetter.com/wp-content/uploads/2020/06/image6.gif":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn4@2020_2/2020/10/12/23-24-04-329_bc67314d4a2743f1.webp","https://www.astrobetter.com/wp-content/uploads/2020/06/image3.gif":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn11@2020_1/2020/10/12/23-23-07-225_d0892ddfaf892d7c.webp","https://www.astrobetter.com/wp-content/uploads/2020/06/image4.gif":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn19@2020_4/2020/10/12/23-22-57-917_d16a7603cc7eead6.webp","http://feeds.feedburner.com/~ff/AstroBetter?i=TspTHss63NE:q10AL9uJbqI:D7DqB2pKExk":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn16@2020_4/2020/10/12/23-22-50-164_33181c064a5d5a0f.webp","http://feeds.feedburner.com/~r/AstroBetter/~4/TspTHss63NE":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn5@2020_4/2020/10/12/23-22-49-868_ff6f84476fc6650c.webp"},"publishedOrCreatedDate":1602544966734}],"record":{"createdTime":"2020-10-13 07:22:46","updatedTime":"2020-10-13 07:22:46","feedId":43308,"fetchDate":"Mon, 12 Oct 2020 23:22:46 +0000","fetchMs":51,"handleMs":8,"totalMs":79638,"newArticles":0,"totalArticles":10,"status":1,"type":0,"ip":"d29e7b16565154882990b6eed02f7029","hostName":"us-008*","requestId":"f523d34b06d844df83ab518f3e57fc92_43308","contentType":"text/xml; charset=UTF-8","totalBytes":7451956,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":6,"articlesImgsGithubTotal":6,"successGithubMap":{"myreaderx16":1,"myreaderx6":1,"myreaderx10":1,"myreaderx3":1,"myreaderx22":1,"myreaderx29":1},"failGithubMap":{}},"feed":{"createdTime":"2020-09-07 03:30:38","updatedTime":"2020-09-07 05:47:58","id":43308,"name":"AstroBetter","url":"http://feeds2.feedburner.com/AstroBetter","subscriber":74,"website":null,"icon":"https://www.astrobetter.com/favicon.ico","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx63/cdn89@2020_3/2020/09/06/21-47-55-928_a45b91f1795adf6b.png","description":"Tips and Tricks for Professional Astronomers","weekly":null,"link":null},"noPictureArticleList":[],"tmpCommonImgCdnBytes":52858,"tmpBodyImgCdnBytes":7399098,"tmpBgImgCdnBytes":0,"extra4":{"start":1602544966670,"total":0,"statList":[{"spend":56,"msg":"获取xml内容"},{"spend":8,"msg":"解释文章"},{"spend":0,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":76473,"msg":"正文链接上传到cdn"}]},"extra5":6,"extra6":6,"extra7ImgCdnFailResultVector":[null],"extra10_invalidATagHrefValue":{"https://www.astrobetter.com/?p=9949_mailto:cds-question@unistra.fr":"mailto:cds-question@unistra.fr"},"extra111_proxyServerAndStatMap":{"http://us-020.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://us-021.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe21.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe-59.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]},"http://us-009.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"https://www.astrobetter.com/wp-content/uploads/2020/06/image12.gif","sourceStatusCode":200,"destWidth":1145,"destHeight":298,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn99@2020_3/2020/10/12/23-22-48-823_6f52a5dfddb51570.webp","sourceBytes":55591,"destBytes":52858,"targetWebpQuality":75,"feedId":43308,"totalSpendMs":3084,"convertSpendMs":1933,"createdTime":"2020-10-13 07:22:46","host":"us-55*","referer":"https://www.astrobetter.com/?p=9949","linkMd5ListStr":"6ca01c4c3869ce47ace12305331d0ea2,6ca01c4c3869ce47ace12305331d0ea2","githubUser":"myreaderx3","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"54.3 KB","destSize":"51.6 KB","compressRate":"95.1%"},{"code":1,"isDone":false,"source":"http://feeds.feedburner.com/~r/AstroBetter/~4/TspTHss63NE","sourceStatusCode":200,"destWidth":1,"destHeight":1,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn5@2020_4/2020/10/12/23-22-49-868_ff6f84476fc6650c.webp","sourceBytes":43,"destBytes":72,"targetWebpQuality":75,"feedId":43308,"totalSpendMs":774,"convertSpendMs":2,"createdTime":"2020-10-13 07:22:49","host":"us-021*","referer":"https://www.astrobetter.com/?p=9949","linkMd5ListStr":"6ca01c4c3869ce47ace12305331d0ea2","githubUser":"myreaderx6","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"43 B","destSize":"72 B","compressRate":"167.4%"},{"code":1,"isDone":false,"source":"http://feeds.feedburner.com/~ff/AstroBetter?i=TspTHss63NE:q10AL9uJbqI:D7DqB2pKExk","sourceStatusCode":200,"destWidth":92,"destHeight":24,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn16@2020_4/2020/10/12/23-22-50-164_33181c064a5d5a0f.webp","sourceBytes":1043,"destBytes":374,"targetWebpQuality":75,"feedId":43308,"totalSpendMs":1070,"convertSpendMs":4,"createdTime":"2020-10-13 07:22:49","host":"europe21*","referer":"https://www.astrobetter.com/?p=9949","linkMd5ListStr":"6ca01c4c3869ce47ace12305331d0ea2","githubUser":"myreaderx29","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"1 KB","destSize":"374 B","compressRate":"35.9%"},{"code":1,"isDone":false,"source":"https://www.astrobetter.com/wp-content/uploads/2020/06/image4.gif","sourceStatusCode":200,"destWidth":1145,"destHeight":505,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn19@2020_4/2020/10/12/23-22-57-917_d16a7603cc7eead6.webp","sourceBytes":6571719,"destBytes":5605558,"targetWebpQuality":60,"feedId":43308,"totalSpendMs":11081,"convertSpendMs":6609,"createdTime":"2020-10-13 07:22:49","host":"europe-59*","referer":"https://www.astrobetter.com/?p=9949","linkMd5ListStr":"6ca01c4c3869ce47ace12305331d0ea2","githubUser":"myreaderx10","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"6.3 MB","destSize":"5.3 MB","compressRate":"85.3%"},{"code":1,"isDone":false,"source":"https://www.astrobetter.com/wp-content/uploads/2020/06/image3.gif","sourceStatusCode":200,"destWidth":1145,"destHeight":735,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn11@2020_1/2020/10/12/23-23-07-225_d0892ddfaf892d7c.webp","sourceBytes":2244899,"destBytes":1438706,"targetWebpQuality":75,"feedId":43308,"totalSpendMs":18843,"convertSpendMs":17188,"createdTime":"2020-10-13 07:22:49","host":"us-009*","referer":"https://www.astrobetter.com/?p=9949","linkMd5ListStr":"6ca01c4c3869ce47ace12305331d0ea2","githubUser":"myreaderx16","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"2.1 MB","destSize":"1.4 MB","compressRate":"64.1%"},{"code":1,"isDone":false,"source":"https://www.astrobetter.com/wp-content/uploads/2020/06/image6.gif","sourceStatusCode":200,"destWidth":1145,"destHeight":820,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn4@2020_2/2020/10/12/23-24-04-329_bc67314d4a2743f1.webp","sourceBytes":411547,"destBytes":354388,"targetWebpQuality":75,"feedId":43308,"totalSpendMs":16020,"convertSpendMs":13194,"createdTime":"2020-10-13 07:23:50","host":"europe-59*","referer":"https://www.astrobetter.com/?p=9949","linkMd5ListStr":"6ca01c4c3869ce47ace12305331d0ea2","githubUser":"myreaderx22","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"401.9 KB","destSize":"346.1 KB","compressRate":"86.1%"}],"successGithubMap":{"myreaderx16":1,"myreaderx6":1,"myreaderx10":1,"myreaderx3":1,"myreaderx22":1,"myreaderx29":1},"failGithubMap":{}}
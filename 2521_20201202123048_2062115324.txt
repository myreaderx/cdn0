{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2020-12-02 20:29:25","updatedTime":"2020-12-02 20:29:25","title":"我把「链路追踪」整明白了","link":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","description":"<div><div><div id=\"media\" class=\"rich_media_thumb_wrp\">\n\n            <img class=\"rich_media_thumb\" src=\"http://content.sov5.cn/mmbiz_jpg/eZzl4LXykQyDS0uEMNjMl4D3Qfl3Sz0DMbn7CPoWFxbQFMicpToTWqKOniazqTehx5UV6QibmOueAwUqGPrauIsrw?imageView2/1/w/600\">\n        </div>\n    \n\n    \n\n    <div class=\"rich_media_content\" id=\"js_content\">\n                    \n\n                    \n\n                    \n                    \n                    <p style=\"text-align: center;\"><span style=\"font-size: 14px;letter-spacing: 0.5440000295639038px;text-align: center;max-width: 100%;color: rgb(255, 41, 65);line-height: 22.4px;\">（给</span><span style=\"font-size: 14px;letter-spacing: 0.5440000295639038px;text-align: center;max-width: 100%;line-height: 22.4px;color: rgb(0, 128, 255);\">ImportNew</span><span style=\"font-size: 14px;letter-spacing: 0.5440000295639038px;text-align: center;max-width: 100%;color: rgb(255, 41, 65);line-height: 22.4px;\">加星标，提高Java技能）</span></p><blockquote><p style=\"letter-spacing: 0.5440000295639038px;white-space: normal;background-color: rgb(255, 255, 255);max-width: 100%;min-height: 1em;text-align: left;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"max-width: 100%;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">转自：悟空聊架构</span><span style=\"font-size: 14px;letter-spacing: 0.544px;\"></span></p></blockquote><p><strong style=\"color: rgb(123, 12, 0);font-size: 16px;\">本篇主要内容</strong></p><p style=\"max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif normal rgb center border-box break-word><img class=\"rich_pages\" data-ratio=\"0.3301075268817204\" data-s=\"300,640\" data-type=\"png\" data-w=\"930\" style=\"box-sizing: border-box !important; overflow-wrap: break-word !important; width: 677px !important; visibility: visible !important; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNtaiaxlEdj3KUTrNLmu9sfldiafSkKCViat0zqzUC4O2X4z6KYXF7QemCg/640?wx_fmt=png\"></p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>这篇主要是理论 + 实践相结合。实践部分涉及到如何把链路追踪组件 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Sleuth</code> + <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Zipkin</code> 加到我的 Spring Cloud 《佳必过》开源项目上。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">本篇知识点：</strong></p><ul data-tool=\"mdnice编辑器\" class=\"list-paddingleft-2\" style=\"margin-top: 8px;margin-bottom: 8px;padding-left: 25px;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb break-word><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">链路追踪基本原理</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">如何在项目中轻松加入链路追踪中间件</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">如何使用链路追踪排查问题</section><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><br></section></li></ul><h2 data-tool=\"mdnice编辑器\"><span style=\"color: rgb(123, 12, 0);\"><strong>一、为什么要用链路追踪？</strong></span></h2><h3 data-tool=\"mdnice编辑器\"><br></h3><h3 data-tool=\"mdnice编辑器\"><strong>1.1 因：拆分服务单元</strong></h3><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>微服务</code>架构其实是一个<code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>分布式</code>的架构，按照业务划分成了多个服务单元。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>由于服务单元的<code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>数量</code>是很多的，有可能几千个，而且业务也会更复杂，如果出现了错误和异常，很难去定位。</p><h3 data-tool=\"mdnice编辑器\"><strong>1.2 因：逻辑复杂</strong></h3><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>比如一个请求需要调用多个服务才能完成整个业务闭环，而内部服务的代码逻辑和业务逻辑比较复杂，假如某个服务出现了问题，是难以快速确定那个服务出问题的。</p><h3 data-tool=\"mdnice编辑器\"><strong>1.3 果：快速定位</strong></h3><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>而如果我们加上了<code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>分布式链路追踪</code>，去跟踪一个请求有哪些服务参与其中，参与的顺序是怎样的，这样我们就知道了每个请求的详细经过，即使出了问题也能快速定位。</p><h2 data-tool=\"mdnice编辑器\"><span style=\"color: rgb(123, 12, 0);\"><strong>二、链路追踪的核心</strong></span></h2><p><span style=\"color: rgb(123, 12, 0);\"><strong><br></strong></span></p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>链路追踪组件有 Twitter 的可视化链路追踪组件 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Zipkin</code>、Google 的 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Dapper</code>、阿里的 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Eagleeye</code> 等，而 Sleuth 是 Spring Cloud 的组件。Spring Cloud Sleuth 借鉴了 Dapper 的术语。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>本文主要讲解 Sleuth + Zipkin 结合使用来更好地实现链路追踪。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>为什么能够进行整条链路的追踪？<strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">其实就是一个 Trace ID 将 一连串的 Span 信息连起来了</strong>。根据 Span 记录的信息再进行整合就可以获取整条链路的信息。下面是链路追踪的核心概念：</p><h3 data-tool=\"mdnice编辑器\"><strong>2.1 Span（跨度）</strong></h3><ul data-tool=\"mdnice编辑器\" class=\"list-paddingleft-2\" style=\"margin-top: 8px;margin-bottom: 8px;padding-left: 25px;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb break-word><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;line-height: 26px;color: black;box-sizing: border-box !important;overflow-wrap: break-word !important;\">大白话：远程调用和 Span  <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>一对一</code>。</p></section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;line-height: 26px;color: black;box-sizing: border-box !important;overflow-wrap: break-word !important;\">基本的工作单元，每次发送一个远程调用服务就会产生一个 Span。</p></section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;line-height: 26px;color: black;box-sizing: border-box !important;overflow-wrap: break-word !important;\">Span 是一个 64 位的唯一 ID。</p></section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;line-height: 26px;color: black;box-sizing: border-box !important;overflow-wrap: break-word !important;\">通过计算 Span 的开始和结束时间，就可以统计每个服务调用所花费的时间。</p></section></li></ul><h3 data-tool=\"mdnice编辑器\"><strong>2.2 Trace（跟踪）</strong></h3><ul data-tool=\"mdnice编辑器\" class=\"list-paddingleft-2\" style=\"margin-top: 8px;margin-bottom: 8px;padding-left: 25px;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb break-word><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;line-height: 26px;color: black;box-sizing: border-box !important;overflow-wrap: break-word !important;\">大白话：一个 Trace 对应多个 Span，<code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>一对多</code>。</p></section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;line-height: 26px;color: black;box-sizing: border-box !important;overflow-wrap: break-word !important;\">它由一系列 Span 组成，树状结构。</p></section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;line-height: 26px;color: black;box-sizing: border-box !important;overflow-wrap: break-word !important;\">64 位唯一 ID。</p></section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;line-height: 26px;color: black;box-sizing: border-box !important;overflow-wrap: break-word !important;\">每次客户端访问微服务系统的 API 接口，可能中间会调用多个微服务，每次调用都会产生一个新的 Span，而多个 Span 组成了 Trace</p></section></li></ul><h3 data-tool=\"mdnice编辑器\"><strong>2.3 Annotation（注解）</strong></h3><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>链路追踪系统定义了一些核心注解，用来定义一个请求的开始和结束，注意是微服务之间的请求，而不是浏览器或手机等设备。注解包括：</p><ul data-tool=\"mdnice编辑器\" class=\"list-paddingleft-2\" style=\"margin-top: 8px;margin-bottom: 8px;padding-left: 25px;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb break-word><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>cs</code> - Client Sent：客户端发送一个请求，描述了这个请求调用的 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Span</code> 的开始时间。注意：这里的客户端指的是微服务的调用者，不是我们理解的浏览器或手机等客户端。</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>sr</code> - Server Received：服务端获得请求并准备开始处理它，如果将其 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>sr</code> 减去 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>cs</code> 时间戳，即可得到网络传输时间。</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>ss</code> - Server Sent：服务端发送响应，会记录请求处理完成的时间，<code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>ss</code> 时间戳减去 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>sr</code> 时间戳，即可得到服务器请求的时间。</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>cr</code> - Client Received：客户端接收响应，Span 的结束时间，如果 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>cr</code> 的时间戳减去 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>cs</code> 时间戳，即可得到一次微服务调用所消耗的时间，也就是一个 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Span</code> 的消耗的总时间。</section></li></ul><h3 data-tool=\"mdnice编辑器\"><strong>2.4 链路追踪原理</strong></h3><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>假定三个微服务调用的链路如下图所示：<code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 1</code> 调用 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 2</code>，<code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 2</code> 调用 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 3</code> 和 Service 4。</p><p><img data-ratio=\"0.36739659367396593\" data-type=\"png\" data-w=\"822\" style=\"margin: 20px auto; box-sizing: border-box; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light,; max-width: 600px\" pingfang sc cambria cochin georgia times new roman serif left normal middle none block contain rgb break-word visible src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNiaSwBzjAxW0ib4Zd7VnlicRdIFFc0b1iaTadHfTMib3RrKloLut9c6ibUbHg/640?wx_fmt=png\"></p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;padding-right: 0.5em;padding-left: 0.5em;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb flex column center border-box break-word><figcaption style=\"margin-top: 5px;max-width: 100%;text-align: center;color: rgb(136, 136, 136);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">微服务调用链路图</figcaption></figure><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>那么链路追踪会在每个服务调用的时候加上 Trace ID 和 Span ID。如下图所示：</p><p><img data-ratio=\"0.43162393162393164\" data-type=\"png\" data-w=\"1170\" style=\"margin: 20px auto; box-sizing: border-box; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light,; max-width: 600px\" pingfang sc cambria cochin georgia times new roman serif left normal middle none block contain rgb break-word visible src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNlESbRy8GvrZjdiawkzZiaJhhYhdw4iarkSqTYHjMxAlSUyNDYicwn99pdw/640?wx_fmt=png\"></p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;padding-right: 0.5em;padding-left: 0.5em;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb flex column center border-box break-word><figcaption style=\"margin-top: 5px;max-width: 100%;text-align: center;color: rgb(136, 136, 136);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">链路追踪原理图</figcaption></figure><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">大白话解释：</strong></p><ul data-tool=\"mdnice编辑器\" class=\"list-paddingleft-2\" style=\"margin-top: 8px;margin-bottom: 8px;padding-left: 25px;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb break-word><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;line-height: 26px;color: black;box-sizing: border-box !important;overflow-wrap: break-word !important;\">大家注意上面的颜色，相同颜色的代表是同一个 Span ID，说明是链路追踪中的一个节点。</p></section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;line-height: 26px;color: black;box-sizing: border-box !important;overflow-wrap: break-word !important;\">第一步：客户端调用 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 1</code>，生成一个 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Request</code>，<code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Trace ID</code> 和 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Span ID</code> 为空，那个时候请求还没有到 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 1</code>。</p></section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;line-height: 26px;color: black;box-sizing: border-box !important;overflow-wrap: break-word !important;\">第二步：请求到达 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 1</code>，记录了 Trace ID = X，Span ID 等于 A。</p></section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;line-height: 26px;color: black;box-sizing: border-box !important;overflow-wrap: break-word !important;\">第三步：<code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 1</code> 发送请求给 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 2</code>，Span ID 等于 B，被称作 Client Sent，即客户端发送一个请求。</p></section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;line-height: 26px;color: black;box-sizing: border-box !important;overflow-wrap: break-word !important;\">第四步：请求到达 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 2</code>，Span ID 等于 B，Trace ID 不会改变，被称作 Server Received，即服务端获得请求并准备开始处理它。</p></section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;line-height: 26px;color: black;box-sizing: border-box !important;overflow-wrap: break-word !important;\">第五步：<code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 2</code> 开始处理这个请求，处理完之后，Trace ID 不变，Span ID = C。</p></section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;line-height: 26px;color: black;box-sizing: border-box !important;overflow-wrap: break-word !important;\">第六步：<code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 2</code> 开始发送这个请求给 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 3</code>，Trace ID 不变，Span ID = D，被称作 Client Sent，即客户端发送一个请求。</p></section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;line-height: 26px;color: black;box-sizing: border-box !important;overflow-wrap: break-word !important;\">第七步：<code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 3</code> 接收到这个请求，Span ID = D，被称作 Server Received。</p></section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;line-height: 26px;color: black;box-sizing: border-box !important;overflow-wrap: break-word !important;\">第八步：<code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 3</code> 开始处理这个请求，处理完之后，Span ID = E。</p></section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;line-height: 26px;color: black;box-sizing: border-box !important;overflow-wrap: break-word !important;\">第九步：<code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 3</code> 开始发送响应给 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 2</code>，Span ID = D，被称作 Server Sent，即服务端发送响应。</p></section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;line-height: 26px;color: black;box-sizing: border-box !important;overflow-wrap: break-word !important;\">第十步：<code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 3</code> 收到 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 2</code> 的响应，Span ID = D，被称作 Client Received，即客户端接收响应。</p></section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;line-height: 26px;color: black;box-sizing: border-box !important;overflow-wrap: break-word !important;\">第十一步：<code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 2</code> 开始返回 响应给 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 1</code>，Span ID = B，和第三步的 Span ID 相同，被称作 Client Received，即客户端接收响应。</p></section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;line-height: 26px;color: black;box-sizing: border-box !important;overflow-wrap: break-word !important;\">第十二步：<code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 1</code> 处理完响应，Span ID = A，和第二步的 Span ID 相同。</p></section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;line-height: 26px;color: black;box-sizing: border-box !important;overflow-wrap: break-word !important;\">第十三步：<code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 1</code> 开始向客户端返回响应，Span ID = A、</p></section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;line-height: 26px;color: black;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 3</code> 向 Service 4 发送请求和 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 3</code> 类似，对应的 Span ID 是 F 和 G。可以参照上面前面的第六步到第十步。</p></section></li></ul><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">把以上的相同颜色的步骤简化为下面的链路追踪图：</strong></p><p><img data-ratio=\"0.3183183183183183\" data-type=\"jpeg\" data-w=\"666\" style=\"margin: 20px auto; box-sizing: border-box; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light,; max-width: 600px\" pingfang sc cambria cochin georgia times new roman serif left normal middle none block contain rgb break-word visible src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNAuNtPWlggvmYBibmAvkqHzFnUlMZsIwWibKItjAZyLKmXCuh61ccMic3g/640?wx_fmt=jpeg\"></p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;padding-right: 0.5em;padding-left: 0.5em;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb flex column center border-box break-word><figcaption style=\"margin-top: 5px;max-width: 100%;text-align: center;color: rgb(136, 136, 136);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">链路追踪父子节点图</figcaption></figure><ul data-tool=\"mdnice编辑器\" class=\"list-paddingleft-2\" style=\"margin-top: 8px;margin-bottom: 8px;padding-left: 25px;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb break-word><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">第一个节点：Span ID = A，Parent ID = null，<code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 1</code> 接收到请求。</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">第二个节点：Span ID = B，Parent ID= A，<code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 1</code> 发送请求到 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 2</code> 返回响应给<code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 1</code> 的过程。</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">第三个节点：Span ID = C，Parent ID= B，<code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 2</code> 的 中间处理过程。</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">第四个节点：Span ID = D，Parent ID= C，<code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 2</code> 发送请求到 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 3</code> 返回响应给<code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 2</code> 的过程。</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">第五个节点：Span ID = E，Parent ID= D，<code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 3</code> 的中间处理过程。</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">第六个节点：Span ID = F，Parent ID= C，<code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 3</code> 发送请求到 Service 4 返回响应给 <code style=\"margin-right: 2px;margin-left: 2px;padding: 2px 4px;max-width: 100%;font-size: 14px;border-radius: 4px;background-color: rgba(27, 31, 35, 0.047);font-family: \" operator mono consolas monaco menlo monospace break-all rgb border-box break-word>Service 3</code> 的过程。</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">第七个节点：Span ID = G，Parent ID= F，Service 4 的中间处理过程。</section></li></ul><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>通过 Parent ID 即可找到父节点，整个链路就可以进行跟踪追溯了。</p><h2 data-tool=\"mdnice编辑器\"><span style=\"color: rgb(123, 12, 0);\"><strong><br></strong></span></h2><h2 data-tool=\"mdnice编辑器\"><span style=\"color: rgb(123, 12, 0);\"><strong>三、Spring Cloud 整合 Sleuth</strong></span></h2><p><span style=\"color: rgb(123, 12, 0);\"><strong><br></strong></span></p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>大家可以参照我的 GitHub 开源项目 PassJava（佳必过）。</p><h3 data-tool=\"mdnice编辑器\"><strong>3.1 引入 Spring Cloud 依赖</strong></h3><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>在 passjava-common 中引入 Spring Cloud 依赖</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>因为我们使用的链路追踪组件 Sleuth 是 Spring Cloud 的组件，所以我们需要引入 Spring Cloud 依赖。</p><pre data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;max-width: 100%;color: rgb(0, 0, 0);font-size: 16px;text-align: left;background-color: rgb(255, 255, 255);border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"margin-bottom: -7px;max-width: 100%;display: block;background: url(\" https: no-repeat rgb border-box break-word></span><code style=\"padding: 15px 16px 16px;max-width: 100%;overflow-x: auto;color: rgb(171, 178, 191);display: -webkit-box;font-family: \" operator mono consolas monaco menlo monospace rgb border-box break-word><dependencymanagement><br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">    <dependencies><br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">        <!--  Spring Cloud 依赖  --><br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">        <dependency><br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">            <groupid>org.springframework.cloud</groupid><br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">            <artifactid>spring-cloud-dependencies</artifactid><br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">            <version>Hoxton.SR3</version><br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">            &lt;<span style=\"max-width: 100%;color: rgb(230, 192, 123);line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">type</span>&gt;pom<span style=\"max-width: 100%;color: rgb(230, 192, 123);line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">type</span>&gt;<br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">            <scope>import</scope><br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">        </dependency><br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">    </dependencies><br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"></dependencymanagement><br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"></code></pre><h3 data-tool=\"mdnice编辑器\"><strong>3.2 引入Sleuth依赖</strong></h3><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>引入链路追踪组件 Sleuth 非常简单，在 pom.xml 文件中引入 Sleuth 依赖即可。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>在 passjava-common 中引入 Sleuth 依赖：</p><pre data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;max-width: 100%;color: rgb(0, 0, 0);font-size: 16px;text-align: left;background-color: rgb(255, 255, 255);border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"margin-bottom: -7px;max-width: 100%;display: block;background: url(\" https: no-repeat rgb border-box break-word></span><code style=\"padding: 15px 16px 16px;max-width: 100%;overflow-x: auto;color: rgb(171, 178, 191);display: -webkit-box;font-family: \" operator mono consolas monaco menlo monospace rgb border-box break-word><span style=\"max-width: 100%;color: rgb(92, 99, 112);font-style: italic;line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><!-- 链路追踪组件 --></span><br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"max-width: 100%;line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">&lt;<span style=\"max-width: 100%;color: rgb(224, 108, 117);line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">dependency</span>&gt;</span><br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"> <span style=\"max-width: 100%;line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">&lt;<span style=\"max-width: 100%;color: rgb(224, 108, 117);line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">groupId</span>&gt;</span>org.springframework.cloud<span style=\"max-width: 100%;line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"max-width: 100%;color: rgb(224, 108, 117);line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">groupId</span>&gt;</span><br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">    <span style=\"max-width: 100%;line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">&lt;<span style=\"max-width: 100%;color: rgb(224, 108, 117);line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">artifactId</span>&gt;</span>spring-cloud-starter-sleuth<span style=\"max-width: 100%;line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"max-width: 100%;color: rgb(224, 108, 117);line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">artifactId</span>&gt;</span><br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"max-width: 100%;line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"max-width: 100%;color: rgb(224, 108, 117);line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">dependency</span>&gt;</span><br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"></code></pre><h3 data-tool=\"mdnice编辑器\"><strong>3.3 通过日志观察链路追踪</strong></h3><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>我们先不整合 zipkin 链路追踪可视化组件，而是通过日志的方式来查看链路追踪信息。</p><pre data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;max-width: 100%;color: rgb(0, 0, 0);font-size: 16px;text-align: left;background-color: rgb(255, 255, 255);border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"margin-bottom: -7px;max-width: 100%;display: block;background: url(\" https: no-repeat rgb border-box break-word></span><code style=\"padding: 15px 16px 16px;max-width: 100%;overflow-x: auto;color: rgb(171, 178, 191);display: -webkit-box;font-family: \" operator mono consolas monaco menlo monospace rgb border-box break-word>文件路径：\\PassJava-Platform\\passjava-question\\src\\main\\resources\\application.properties<br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">添加配置：<br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">logging.level.org.springframework.cloud.openfeign=debug<br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">logging.level.org.springframework.cloud.sleuth=debug<br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"></code></pre><h3 data-tool=\"mdnice编辑器\"><strong>3.4 启动微服务</strong></h3><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>启动以下微服务：</p><ul data-tool=\"mdnice编辑器\" class=\"list-paddingleft-2\" style=\"margin-top: 8px;margin-bottom: 8px;padding-left: 25px;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb break-word><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;line-height: 26px;color: black;box-sizing: border-box !important;overflow-wrap: break-word !important;\">passjava-gateway 服务（网关）</p></section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;line-height: 26px;color: black;box-sizing: border-box !important;overflow-wrap: break-word !important;\">passjava-question 服务（题目中心微服务）</p></section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;line-height: 26px;color: black;box-sizing: border-box !important;overflow-wrap: break-word !important;\">renren 服务（Admin 后台管理服务）</p><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;line-height: 26px;color: black;box-sizing: border-box !important;overflow-wrap: break-word !important;\">启动成功后如下图所示：</p></section></li></ul><p><img data-ratio=\"0.34151785714285715\" data-type=\"png\" data-w=\"448\" style=\"margin: 20px auto; box-sizing: border-box; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light,; max-width: 600px\" pingfang sc cambria cochin georgia times new roman serif left normal middle none block contain rgb break-word visible src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNjLibarSKqicm9f7YJ4iclcM5iaeTzMIpecD4TtBtJUiadIXPj7giaAzmj6xw/640?wx_fmt=png\"></p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;padding-right: 0.5em;padding-left: 0.5em;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb flex column center border-box break-word><figcaption style=\"margin-top: 5px;max-width: 100%;text-align: center;color: rgb(136, 136, 136);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">启动微服务</figcaption></figure><h3 data-tool=\"mdnice编辑器\"><strong>3.5 测试跟踪请求</strong></h3><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>打开 Admin 后台，访问题目中心-&gt;题目配置页面，可以看到发送了下面的请求：</p><pre data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;max-width: 100%;color: rgb(0, 0, 0);font-size: 16px;text-align: left;background-color: rgb(255, 255, 255);border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"margin-bottom: -7px;max-width: 100%;display: block;background: url(\" https: no-repeat rgb border-box break-word></span><code style=\"padding: 15px 16px 16px;max-width: 100%;overflow-x: auto;color: rgb(171, 178, 191);display: -webkit-box;font-family: \" operator mono consolas monaco menlo monospace rgb border-box break-word>http://localhost:8060/api/question/v1/admin/question/list?t=1605170539929&amp;page=1&amp;limit=10&amp;key=<br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"></code></pre><p><img data-ratio=\"0.5089928057553957\" data-type=\"png\" data-w=\"1112\" style=\"color: rgb(0, 0, 0); font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light,; max-width: 600px\" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word visible src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNmbk1gIiaCnbbJBdauBqeqTFFOyRkh5brcU2oVvPY9RXvqMw2KAtAIdw/640?wx_fmt=png\"></p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;padding-right: 0.5em;padding-left: 0.5em;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb flex column center border-box break-word><figcaption style=\"margin-top: 5px;max-width: 100%;text-align: center;color: rgb(136, 136, 136);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">佳必过项目的后台界面</figcaption></figure><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>打开控制台，可以看到打印出了追踪日志。</p><p><img data-ratio=\"0.2156084656084656\" data-type=\"png\" data-w=\"756\" style=\"color: rgb(0, 0, 0); font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light,; max-width: 600px\" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word visible src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNMfbDp2MWgLnwp7VicXvibvKynAgzTZZcdC2nqagSLW8mThZke7W5YVqQ/640?wx_fmt=png\"></p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;padding-right: 0.5em;padding-left: 0.5em;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb flex column center border-box break-word><figcaption style=\"margin-top: 5px;max-width: 100%;text-align: center;color: rgb(136, 136, 136);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">链路追踪日志</figcaption></figure><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>说明：</p><ul data-tool=\"mdnice编辑器\" class=\"list-paddingleft-2\" style=\"margin-top: 8px;margin-bottom: 8px;padding-left: 25px;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb break-word><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">当没有配置 Sleuth 链路追踪的时候，INFO 信息里面是 [passjava-question,,,]，后面跟着三个空字符串。</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">当配置了 Sleuth 链路追踪的时候，追踪到的信息是 [passjava-question,504a5360ca906016,e55ff064b3941956,false] ，第一个是 Trace ID，第二个是 Span ID。</section></li></ul><h2 data-tool=\"mdnice编辑器\"><span style=\"color: rgb(123, 12, 0);\"><strong><br></strong></span></h2><h2 data-tool=\"mdnice编辑器\"><span style=\"color: rgb(123, 12, 0);\"><strong>四、Zipkin 链路追踪原理</strong></span></h2><p><span style=\"color: rgb(123, 12, 0);\"><strong><br></strong></span></p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>上面我们通过简单的引入 Sleuth 组件，就可以获取到调用链路，但只能通过控制台的输出信息来看，不太方便。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>Zipkin 油然而生，<strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">一个图形化的工具</strong>。Zipkin 是 Twitter 开源的分布式跟踪系统，主要用来用来收集系统的时序数据，进而可以跟踪系统的调用问题。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>而且引入了 Zipkin 组件后，就不需要引入 Sleuth 组件了，因为 Zipkin 组件已经帮我们引入了。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>Zipkin 的官网：https://zipkin.io</p><h3 data-tool=\"mdnice编辑器\"><strong>4.1 Zipkin 基础架构</strong></h3><p><strong><br></strong></p><p><img data-ratio=\"0.762481089258699\" data-type=\"png\" data-w=\"661\" style=\"color: rgb(0, 0, 0); font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light,; max-width: 600px\" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word visible src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNrWL6IpIvY8o49p5e03EM2vmic1Z4LQK9tcOQr24mX6ib8brHEhlk8icsw/640?wx_fmt=png\"></p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;padding-right: 0.5em;padding-left: 0.5em;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb flex column center border-box break-word><figcaption style=\"margin-top: 5px;max-width: 100%;text-align: center;color: rgb(136, 136, 136);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">Zipkin 基础架构</figcaption></figure><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">Zipkin 包含四大组件：</strong></p><ul data-tool=\"mdnice编辑器\" class=\"list-paddingleft-2\" style=\"margin-top: 8px;margin-bottom: 8px;padding-left: 25px;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb break-word><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">Collection</strong>（收集器组件），主要负责收集外部系统跟踪信息。</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">Storage</strong>（存储组件），主要负责将收集到的跟踪信息进行存储，默认存放在内存中，支持存储到 MySQL 和 ElasticSearch。</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">API</strong>（查询组件），提供接口查询跟踪信息，给 UI 组件用的。</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">UI </strong>（可视化 Web UI 组件），可以基于服务、时间、注解来可视化查看跟踪信息。注意：Web UI 不需要身份验证。</section></li></ul><h3 data-tool=\"mdnice编辑器\"><strong>4.2 Zipkin 跟踪流程</strong></h3><p><strong><br></strong></p><p><img data-ratio=\"0.9937791601866252\" data-type=\"png\" data-w=\"643\" style=\"color: rgb(0, 0, 0); font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light,; max-width: 600px\" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word visible src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raN3HNicqmiaMr7u3pLhMQguqya4qVwN05KPtctMuicj5BJtqTph9y6t58Hg/640?wx_fmt=png\"></p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;padding-right: 0.5em;padding-left: 0.5em;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb flex column center border-box break-word><figcaption style=\"margin-top: 5px;max-width: 100%;text-align: center;color: rgb(136, 136, 136);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">Zipkin 跟踪流程</figcaption></figure><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">流程解释：</strong></p><ul data-tool=\"mdnice编辑器\" class=\"list-paddingleft-2\" style=\"margin-top: 8px;margin-bottom: 8px;padding-left: 25px;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb break-word><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">第一步：</strong>用户代码发起 HTTP Get 请求，请求路径：/foo。</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">第二步：</strong>请求到到跟踪工具后，请求被拦截，会被记录两项信息：标签和时间戳。以及HTTP Headers 里面会增加跟踪头信息。</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">第三步：</strong>将封装好的请求传给 HTTP 客户端，请求中包含 X-B3-TraceID 和 X-B3-SpanId 请求头信息。</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">第四步：</strong>由HTTP 客户端发送请求。</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">第五步：</strong>Http 客户端返回响应 200 OK 后，跟踪工具记录耗时时间。</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">第六步：</strong>跟踪工具发送 200 OK 给用户端。</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">第七步：</strong>异步报告 Span 信息给 Zipkin 收集器。</section></li></ul><h2 data-tool=\"mdnice编辑器\"><br></h2><h2 data-tool=\"mdnice编辑器\"><span style=\"color: rgb(123, 12, 0);\"><strong>五、整合 Zipkin 可视化组件</strong></span></h2><h3 data-tool=\"mdnice编辑器\"><br></h3><h3 data-tool=\"mdnice编辑器\"><strong>5.1 启动虚拟机并连接</strong></h3><pre data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;max-width: 100%;color: rgb(0, 0, 0);font-size: 16px;text-align: left;background-color: rgb(255, 255, 255);border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"margin-bottom: -7px;max-width: 100%;display: block;background: url(\" https: no-repeat rgb border-box break-word></span><code style=\"padding: 15px 16px 16px;max-width: 100%;overflow-x: auto;color: rgb(171, 178, 191);display: -webkit-box;font-family: \" operator mono consolas monaco menlo monospace rgb border-box break-word>vagrant up<br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"></code></pre><p><img data-ratio=\"0.6515151515151515\" data-type=\"png\" data-w=\"660\" style=\"color: rgb(0, 0, 0); font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light,; max-width: 600px\" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word visible src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNQp60d1U34A677XCF1seAqEtte2VulQ0VctGicz0UqUPkWEvXeJw23Qw/640?wx_fmt=png\"></p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;padding-right: 0.5em;padding-left: 0.5em;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb flex column center border-box break-word><figcaption style=\"margin-top: 5px;max-width: 100%;text-align: center;color: rgb(136, 136, 136);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">启动虚拟机</figcaption></figure><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>接着就可以用 Xshell 工具连接虚拟机了。下面是在命令行里面执行相关操作。</p><h3 data-tool=\"mdnice编辑器\"><strong>5.2 docker 安装 zipkin 服务</strong></h3><ul data-tool=\"mdnice编辑器\" class=\"list-paddingleft-2\" style=\"margin-top: 8px;margin-bottom: 8px;padding-left: 25px;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb break-word><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">使用以下命令开始拉取 zipkin 镜像并启动 zipkin 容器。</section></li></ul><pre data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;max-width: 100%;color: rgb(0, 0, 0);font-size: 16px;text-align: left;background-color: rgb(255, 255, 255);border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"margin-bottom: -7px;max-width: 100%;display: block;background: url(\" https: no-repeat rgb border-box break-word></span><code style=\"padding: 15px 16px 16px;max-width: 100%;overflow-x: auto;color: rgb(171, 178, 191);display: -webkit-box;font-family: \" operator mono consolas monaco menlo monospace rgb border-box break-word>docker run -d -p 9411:9411 openzipkin/zipkin<br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"></code></pre><ul data-tool=\"mdnice编辑器\" class=\"list-paddingleft-2\" style=\"margin-top: 8px;margin-bottom: 8px;padding-left: 25px;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb break-word><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">命令执行完后，会执行下载操作和启动操作。</section></li></ul><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;padding-right: 0.5em;padding-left: 0.5em;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb flex column center border-box break-word><figcaption style=\"margin-top: 5px;padding-right: 0.5em;padding-left: 0.5em;max-width: 100%;text-align: center;color: rgb(136, 136, 136);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><img data-ratio=\"0.46928327645051193\" data-type=\"png\" data-w=\"586\" style=\"border-radius: 12px; font-size: 17px; box-shadow: rgb(90, 90, 90) 0em 0em 0.5em 0px; box-sizing: border-box !important; overflow-wrap: break-word !important; width: 586px !important; visibility: visible !important; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNNVtbRqbmxD2I0aWbyJSrxxS4IArlI6c3CGRxMNcyJefTjNptjFGEXQ/640?wx_fmt=png\">docker 安装 zipkin 服务</figcaption></figure><ul data-tool=\"mdnice编辑器\" class=\"list-paddingleft-2\" style=\"margin-top: 8px;margin-bottom: 8px;padding-left: 25px;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb break-word><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">使用 docker ps 命令可以看到 zipkin 容器已经启动成功了。如下图所示：</section></li></ul><p><img data-ratio=\"0.2057057057057057\" data-type=\"png\" data-w=\"666\" style=\"color: rgb(0, 0, 0); font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light,; max-width: 600px\" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word visible src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNdibhDd47UvsaDrzCeXSPEnn2pDPY3zB29NS7BWRkkfAM3aXSD0MMnUQ/640?wx_fmt=png\"></p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;padding-right: 0.5em;padding-left: 0.5em;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb flex column center border-box break-word><figcaption style=\"margin-top: 5px;max-width: 100%;text-align: center;color: rgb(136, 136, 136);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">zipkin 容器启动成功</figcaption></figure><ul data-tool=\"mdnice编辑器\" class=\"list-paddingleft-2\" style=\"margin-top: 8px;margin-bottom: 8px;padding-left: 25px;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb break-word><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">在浏览器窗口打开 zipkin UI</section></li></ul><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>访问服务地址：http://192.168.56.10:9411/zipkin。</p><p style=\"padding-right: 0.5em;padding-left: 0.5em;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif normal rgb center border-box break-word><img class=\"rich_pages\" data-ratio=\"0.574468085106383\" data-s=\"300,640\" data-type=\"png\" data-w=\"940\" style=\"border-radius: 12px; box-shadow: rgb(90, 90, 90) 0em 0em 0.5em 0px; font-size: 17px; box-sizing: border-box !important; overflow-wrap: break-word !important; width: 677px !important; visibility: visible !important; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNWK9mDLzUkibYynNIicT16YibIGoibDciaDuYqUWGJcrHgcnSjBk86mkKOvA/640?wx_fmt=png\"></p><h3 data-tool=\"mdnice编辑器\"><strong>5.3 引入 Zipkin 依赖</strong></h3><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>在公共模块引入 zipkin 依赖</p><pre data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;max-width: 100%;color: rgb(0, 0, 0);font-size: 16px;text-align: left;background-color: rgb(255, 255, 255);border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"margin-bottom: -7px;max-width: 100%;display: block;background: url(\" https: no-repeat rgb border-box break-word></span><code style=\"padding: 15px 16px 16px;max-width: 100%;overflow-x: auto;color: rgb(171, 178, 191);display: -webkit-box;font-family: \" operator mono consolas monaco menlo monospace rgb border-box break-word><span style=\"max-width: 100%;color: rgb(92, 99, 112);font-style: italic;line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><!-- 链路追踪组件 Zipkin --></span><br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"max-width: 100%;line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">&lt;<span style=\"max-width: 100%;color: rgb(224, 108, 117);line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">dependency</span>&gt;</span><br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">    <span style=\"max-width: 100%;line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">&lt;<span style=\"max-width: 100%;color: rgb(224, 108, 117);line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">groupId</span>&gt;</span>org.springframework.cloud<span style=\"max-width: 100%;line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"max-width: 100%;color: rgb(224, 108, 117);line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">groupId</span>&gt;</span><br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">    <span style=\"max-width: 100%;line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">&lt;<span style=\"max-width: 100%;color: rgb(224, 108, 117);line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">artifactId</span>&gt;</span>spring-cloud-starter-zipkin<span style=\"max-width: 100%;line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"max-width: 100%;color: rgb(224, 108, 117);line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">artifactId</span>&gt;</span><br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"max-width: 100%;line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"max-width: 100%;color: rgb(224, 108, 117);line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">dependency</span>&gt;</span><br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"></code></pre><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>因为 zipkin 包里面已经引入了 sleuth 组件，所以可以把之前引入的 sleuth 组件删掉。</p><h3 data-tool=\"mdnice编辑器\"><strong>5.4 添加 Zipkin 配置</strong></h3><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>在需要追踪的微服务模块下添加 zipkin 配置。</p><pre data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;max-width: 100%;color: rgb(0, 0, 0);font-size: 16px;text-align: left;background-color: rgb(255, 255, 255);border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"margin-bottom: -7px;max-width: 100%;display: block;background: url(\" https: no-repeat rgb border-box break-word></span><code style=\"padding: 15px 16px 16px;max-width: 100%;overflow-x: auto;color: rgb(171, 178, 191);display: -webkit-box;font-family: \" operator mono consolas monaco menlo monospace rgb border-box break-word># zipkin 的服务器地址<br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">spring.zipkin.base-url=http://192.168.56.10:9411/<br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"># 关闭服务发现，否则 Spring Cloud 会把 zipkin 的 URL 当作服务名称。<br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">spring.zipkin.discovery-client-enabled=false<br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"># 设置使用 http 的方式传输数据，也可以用 RabbitMQ 或 Kafka。<br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">spring.zipkin.sender.type=web<br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"># 设置采样率为 100 %，默认为 0.1（10%）<br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">spring.sleuth.sampler.probability=1<br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"></code></pre><h3 data-tool=\"mdnice编辑器\"><strong>5.5 测试 Zipkin 是否工作</strong></h3><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>这里我在 passjava-member 微服务中写了一个 API：</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><span style=\"max-width: 100%;color: rgb(255, 185, 149);box-sizing: border-box !important;overflow-wrap: break-word !important;\">passjava-member</span> 服务的 API：getMemberStudyTimeListTest，</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">访问路径</strong>为/studytime/list/test/{id}。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><span style=\"max-width: 100%;color: rgb(255, 185, 149);box-sizing: border-box !important;overflow-wrap: break-word !important;\">passjava-member</span> 服务远程调用 <span style=\"max-width: 100%;color: rgb(255, 185, 149);box-sizing: border-box !important;overflow-wrap: break-word !important;\">passjava-study</span> 服务。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>对应的 API：getMemberStudyTimeListTest。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>我用 postman 工具测试 <span style=\"max-width: 100%;color: rgb(255, 185, 149);box-sizing: border-box !important;overflow-wrap: break-word !important;\">passjava-member</span> 服务的 API：</p><p><img data-ratio=\"1.1434977578475336\" data-type=\"png\" data-w=\"669\" style=\"color: rgb(0, 0, 0); font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light,; max-width: 600px\" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word visible src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raN9n2aiaabVzBQ2vH3NcphKUHP1GZlaFIqvsGjUne3lKqk7EHEwD9GypQ/640?wx_fmt=png\"></p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;padding-right: 0.5em;padding-left: 0.5em;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb flex column center border-box break-word><figcaption style=\"margin-top: 5px;max-width: 100%;text-align: center;color: rgb(136, 136, 136);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">测试 Passjava-member 服务的 API</figcaption></figure><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>打开 Zipkin 工具，搜索 passjava-member 的链路追踪日志，可以看到有一条记录，相关说明如下图所示：</p><p><img data-ratio=\"0.49584158415841584\" data-type=\"png\" data-w=\"2525\" style=\"color: rgb(0, 0, 0); font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light,; max-width: 600px\" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word visible src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNorVW6tbpib6bflFQBMGXKvsGnzGLOC6E0YcRT1cO4NK5hGwPIic6icibQQ/640?wx_fmt=png\"><span style=\"max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif rgb center border-box break-word>zipkin 示例</span></p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>从图中可以看到 passjava-member 微服务调用了 passjava-study 微服务，如图中左半部分所示。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>而且 passjava-study 微服务详细的调用时间都记录得非常清楚，如图中右半部分所示。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word><strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">时间计算：</strong></p><ul data-tool=\"mdnice编辑器\" class=\"list-paddingleft-2\" style=\"margin-top: 8px;margin-bottom: 8px;padding-left: 25px;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb break-word><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">请求传输时间</strong>：Server Start - Client Start = 2.577s-2.339s = 0.238s</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">服务端处理时间</strong>：Server Finish - Server Start = 2.863s - 2.577s = 0.286s</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">请求总耗时</strong>：Client Finish - Client Start = 2.861s - 2.339s = 0.522s</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">Passjava-member 服务总耗时</strong>：3.156 s</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\"><strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">Passjava-study 服务总耗时</strong>：0.521s</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">由此可以看出 passjava-member 服务<span style=\"max-width: 100%;color: rgb(255, 185, 149);box-sizing: border-box !important;overflow-wrap: break-word !important;\">花费了很长时间，性能很差</span>。</section></li></ul><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>另外还可以用图表的方式查看跟踪信息，这里不做展开了。</p><p><img data-ratio=\"0.6329935125115848\" data-type=\"png\" data-w=\"1079\" style=\"color: rgb(0, 0, 0); font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light,; max-width: 600px\" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word visible src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNQKhG1uwzBE2911AAtzhzHCUqKV7ELR7m9hJaicj5snpX44X9laQ47kQ/640?wx_fmt=png\"></p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;padding-right: 0.5em;padding-left: 0.5em;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb flex column center border-box break-word><figcaption style=\"margin-top: 5px;max-width: 100%;text-align: center;color: rgb(136, 136, 136);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">图表的方式查看</figcaption></figure><h2 data-tool=\"mdnice编辑器\"><span style=\"color: rgb(123, 12, 0);\"><strong>六、Zipkin 数据持久化</strong></span></h2><h3 data-tool=\"mdnice编辑器\"></h3><h3 data-tool=\"mdnice编辑器\"><strong>6.1 Zipkin 支持的数据库</strong></h3><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>Zipkin 存储数据默认是放在<strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">内存</strong>中的，如果 Zipkin 重启，那么监控数据也会<strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">丢失</strong>。如果是生成环境，数据丢失会带来很大问题，所以需要将 Zipkin 的监控数据持久化。而 Zipkin 支持将数据存储到以下数据库：</p><ul data-tool=\"mdnice编辑器\" class=\"list-paddingleft-2\" style=\"margin-top: 8px;margin-bottom: 8px;padding-left: 25px;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb break-word><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">内存（默认，不建议使用）</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">MySQL（数据量大的话， 查询较为缓慢，不建议使用）</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">Elasticsearch（建议使用）</section></li><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">Cassandra（国内使用 Cassandra 的公司较少，相关文档也不多）</section></li></ul><h3 data-tool=\"mdnice编辑器\"><strong>6.2 使用 Elasticsearch 作为储存介质</strong></h3><ul data-tool=\"mdnice编辑器\" class=\"list-paddingleft-2\" style=\"margin-top: 8px;margin-bottom: 8px;padding-left: 25px;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb break-word><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">通过 docker 的方式配置 elasticsearch 作为 zipkin 数据的存储介质。</section></li></ul><pre data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;max-width: 100%;color: rgb(0, 0, 0);font-size: 16px;text-align: left;background-color: rgb(255, 255, 255);border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"margin-bottom: -7px;max-width: 100%;display: block;background: url(\" https: no-repeat rgb border-box break-word></span><code style=\"padding: 15px 16px 16px;max-width: 100%;overflow-x: auto;color: rgb(171, 178, 191);display: -webkit-box;font-family: \" operator mono consolas monaco menlo monospace rgb border-box break-word>docker run --env STORAGE_TYPE=elasticsearch --env ES_HOSTS=192.168.56.10:9200 openzipkin/zipkin-dependencies<br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"></code></pre><ul data-tool=\"mdnice编辑器\" class=\"list-paddingleft-2\" style=\"margin-top: 8px;margin-bottom: 8px;padding-left: 25px;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb break-word><li style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-top: 5px;margin-bottom: 5px;max-width: 100%;line-height: 26px;color: rgb(1, 1, 1);box-sizing: border-box !important;overflow-wrap: break-word !important;\">ES 作为存储介质的配置参数：</section></li></ul><p><img data-ratio=\"0.3907380607814761\" data-type=\"png\" data-w=\"691\" style=\"color: rgb(0, 0, 0); font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light,; max-width: 600px\" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word visible src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNPJV1My0T6NgpbggUHrEvYMXj8kicx7avUaGLfkoBro1kf2I58cicYSrg/640?wx_fmt=png\"></p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;padding-right: 0.5em;padding-left: 0.5em;max-width: 100%;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb flex column center border-box break-word><figcaption style=\"margin-top: 5px;max-width: 100%;text-align: center;color: rgb(136, 136, 136);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">ES 作为存储介质的配置参数</figcaption></figure><h2 data-tool=\"mdnice编辑器\"><span style=\"color: rgb(123, 12, 0);\"><strong>七、总结</strong></span></h2><p><span style=\"color: rgb(123, 12, 0);\"><strong><br></strong></span></p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal rgb border-box break-word>本篇讲解了链路追踪的核心原理，以及 Sleuth + Zipkin 的组件的原理，以及将这两款组件加到了我的开源项目《佳必过》里面了。</p><blockquote data-tool=\"mdnice编辑器\" style=\"margin-top: 20px;margin-bottom: 20px;padding: 10px 10px 10px 20px;border-left-color: rgb(239, 112, 96);color: rgb(106, 115, 125);font-size: 0.9em;max-width: 100%;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left normal none auto rgb border-box break-word><p style=\"padding-top: 8px;padding-bottom: 8px;max-width: 100%;min-height: 1em;font-size: 16px;color: black;line-height: 26px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">开源项目地址：https://github.com/Jackson0714/PassJava-Platform</p></blockquote><p><span style=\"font-size: 15px;text-align: left;\"><br></span></p><section donone=\"shifuMouseDownCard('shifu_c_030')\" label=\"Copyright Reserved by PLAYHUDONG.\" style=\"text-align: start;white-space: normal;margin-top: 1em;margin-bottom: 1em;caret-color: rgb(0, 0, 0);color: rgb(0, 0, 0);border-width: 0px;border-style: initial;border-color: initial;\"><section style=\"margin-left: 1em;line-height: 1.4;\"><span style=\"padding: 3px 8px;border-top-left-radius: 4px;border-top-right-radius: 4px;border-bottom-right-radius: 4px;border-bottom-left-radius: 4px;color: rgb(255, 255, 255);background-color: rgb(255, 105, 31);font-family: inherit;text-align: inherit;text-decoration: inherit;font-size: 16px;\">推荐阅读</span>  <span style=\"margin-left: 4px;padding: 3px 8px;border-top-left-radius: 1.2em;border-top-right-radius: 1.2em;border-bottom-right-radius: 1.2em;border-bottom-left-radius: 1.2em;color: rgb(255, 255, 255);line-height: 1.2;background-color: rgb(204, 204, 204);font-family: inherit;text-align: inherit;text-decoration: inherit;border-color: rgb(249, 110, 87);font-size: 12px;\">点击标题可跳转</span></section><section style=\"margin-top: -11px;padding: 22px 16px 16px;border-width: 1px;border-style: solid;border-color: rgb(255, 105, 31);color: rgb(51, 51, 51);font-size: 1em;font-family: inherit;text-align: inherit;text-decoration: inherit;\"><p><a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;mid=2651489281&amp;idx=2&amp;sn=613fd2403345382f4d20ab8673ad18ae&amp;chksm=bd25e87e8a526168acfb33ddc0013d4c099c53072f3c7f3875f6c14a9fc3117a9d832802ae78&amp;scene=21#wechat_redirect\" data-itemshowtype=\"0\" tab=\"innerlink\" style=\"font-size: 12px;\" data-linktype=\"2\"><span style=\"font-size: 12px;\">谈谈几个 Spring Cloud 常见面试题及答案</span></a><br></p><p><a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;mid=2651491027&amp;idx=2&amp;sn=f5eb01fbb179efa727aed2e8f147f496&amp;chksm=bd25e6ac8a526fba3d6a88f5129c9f3592cbc92e57759a32b005248baa54775fde5c999c4c62&amp;scene=21#wechat_redirect\" data-itemshowtype=\"11\" tab=\"innerlink\" style=\"font-size: 12px;\" data-linktype=\"2\"><span style=\"font-size: 12px;\">面试官: 讲讲 Spring 事务有哪些坑?</span></a><br></p><p><span style=\"font-family: -apple-system-font, BlinkMacSystemFont, \" helvetica neue sc sans gb yahei ui arial sans-serif rgb></span></p></section></section><p style=\"caret-color: rgb(0, 0, 0);color: rgb(0, 0, 0);text-align: start;white-space: normal;\"><br></p><p style=\"white-space: normal;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"max-width: 100%;font-size: 14px;color: rgb(255, 169, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;\">看完本文有收获？请转发分享给更多人</span></p><p style=\"white-space: normal;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><strong style=\"max-width: 100%;color: rgb(255, 169, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;\">关注「ImportNew」，提升Java技能</strong></p><p style=\"white-space: normal;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><img data-ratio=\"0.9166666666666666\" data-s=\"300,640\" data-type=\"jpeg\" data-w=\"600\" width=\"auto\" style=\"box-sizing: border-box !important; overflow-wrap: break-word !important; visibility: visible !important; width: 600px !important; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/2A8tXicCG8ylbWIGfdoDED35IRRySQZTXUkJ1eop9MHApzFibKnOo0diboXpl0rmS5mH78YJhsWQv0dhv718A6kUA/640?wx_fmt=jpeg\"></p><p style=\"text-align: right;\"><span style=\"font-size: 14px;text-align: right;\">好文章，我</span><span style=\"font-size: 14px;text-align: right;color: rgb(255, 41, 65);\">在看</span><span style=\"font-size: 14px;text-align: right;\">❤️</span></p><p><br></p>\n                </div>\n\n    \n    <br>\n\n    \n        <a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;mid=2651491376&amp;idx=2&amp;sn=cbc5029a46247301c3089de2179ed5e2&amp;chksm=bd25e04f8a5269591c69dabec578dbefe2d3eab6673eedfc9438f334bc931335310acc2e4935&amp;scene=0#rd\" style=\"color: blue\" class=\"media_tool_meta meta_primary\">原文</a>\n        <br>\n    \n\n    \n\n    <img alt=\"\" width=\"1px\" height=\"1px\" class=\"\" style=\"width:1px;height:1px;display:none\" src=\"http://www.jintiankansha.me/rss_static/11757/9uEaiY9FPw\"></div></div>","descriptionType":"html","publishedDate":"Sat, 28 Nov 2020 03:39:00 +0000","feedId":2521,"bgimg":"http://content.sov5.cn/mmbiz_jpg/eZzl4LXykQyDS0uEMNjMl4D3Qfl3Sz0DMbn7CPoWFxbQFMicpToTWqKOniazqTehx5UV6QibmOueAwUqGPrauIsrw?imageView2/1/w/600","linkMd5":"677c33be146bd854ecf917a3b93df569","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn89@2020_4/2020/12/02/12-29-29-172_4e70d72a6f13ff1d.webp","destWidth":500,"destHeight":212,"sourceBytes":15438,"destBytes":13328,"author":"","articleImgCdnMap":{"http://content.sov5.cn/mmbiz_jpg/eZzl4LXykQyDS0uEMNjMl4D3Qfl3Sz0DMbn7CPoWFxbQFMicpToTWqKOniazqTehx5UV6QibmOueAwUqGPrauIsrw?imageView2/1/w/600":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn89@2020_4/2020/12/02/12-29-29-172_4e70d72a6f13ff1d.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNtaiaxlEdj3KUTrNLmu9sfldiafSkKCViat0zqzUC4O2X4z6KYXF7QemCg/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn35@2020_6/2020/12/02/12-29-33-787_e236e4b13306a291.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNiaSwBzjAxW0ib4Zd7VnlicRdIFFc0b1iaTadHfTMib3RrKloLut9c6ibUbHg/640?wx_fmt=png":null,"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNlESbRy8GvrZjdiawkzZiaJhhYhdw4iarkSqTYHjMxAlSUyNDYicwn99pdw/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn93@2020_3/2020/12/02/12-29-53-532_1d4d2c1b20d37545.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNAuNtPWlggvmYBibmAvkqHzFnUlMZsIwWibKItjAZyLKmXCuh61ccMic3g/640?wx_fmt=jpeg":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn61@2020_6/2020/12/02/12-29-31-346_d0753ba8cdf3429d.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNjLibarSKqicm9f7YJ4iclcM5iaeTzMIpecD4TtBtJUiadIXPj7giaAzmj6xw/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn54@2020_2/2020/12/02/12-29-33-824_522ad1db176f93e1.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNmbk1gIiaCnbbJBdauBqeqTFFOyRkh5brcU2oVvPY9RXvqMw2KAtAIdw/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn28@2020_2/2020/12/02/12-29-38-309_e4f00d0190b1cc3c.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNMfbDp2MWgLnwp7VicXvibvKynAgzTZZcdC2nqagSLW8mThZke7W5YVqQ/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn45@2020_5/2020/12/02/12-30-35-294_cb100a7184d38efa.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNrWL6IpIvY8o49p5e03EM2vmic1Z4LQK9tcOQr24mX6ib8brHEhlk8icsw/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn3@2020_4/2020/12/02/12-29-44-068_0177de241ff89319.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raN3HNicqmiaMr7u3pLhMQguqya4qVwN05KPtctMuicj5BJtqTph9y6t58Hg/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn97@2020_3/2020/12/02/12-29-45-766_8a11f0ca81afaaaf.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNQp60d1U34A677XCF1seAqEtte2VulQ0VctGicz0UqUPkWEvXeJw23Qw/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn2@2020_6/2020/12/02/12-29-35-721_f86a076ddb28b0f3.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNNVtbRqbmxD2I0aWbyJSrxxS4IArlI6c3CGRxMNcyJefTjNptjFGEXQ/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn65@2020_4/2020/12/02/12-30-46-778_56abf3f88f4f779d.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNdibhDd47UvsaDrzCeXSPEnn2pDPY3zB29NS7BWRkkfAM3aXSD0MMnUQ/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn17@2020_6/2020/12/02/12-29-35-392_dc195fe375e45211.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNWK9mDLzUkibYynNIicT16YibIGoibDciaDuYqUWGJcrHgcnSjBk86mkKOvA/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn48@2020_6/2020/12/02/12-29-32-588_84badacd41f84736.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raN9n2aiaabVzBQ2vH3NcphKUHP1GZlaFIqvsGjUne3lKqk7EHEwD9GypQ/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn11@2020_4/2020/12/02/12-29-43-246_8dac7dfec29fcfef.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNorVW6tbpib6bflFQBMGXKvsGnzGLOC6E0YcRT1cO4NK5hGwPIic6icibQQ/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn57@2020_4/2020/12/02/12-29-49-552_007efffdb077a74c.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNQKhG1uwzBE2911AAtzhzHCUqKV7ELR7m9hJaicj5snpX44X9laQ47kQ/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn21@2020_1/2020/12/02/12-29-34-329_fceb5575d1c17bda.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNPJV1My0T6NgpbggUHrEvYMXj8kicx7avUaGLfkoBro1kf2I58cicYSrg/640?wx_fmt=png":null,"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/2A8tXicCG8ylbWIGfdoDED35IRRySQZTXUkJ1eop9MHApzFibKnOo0diboXpl0rmS5mH78YJhsWQv0dhv718A6kUA/640?wx_fmt=jpeg":"https://cdn.jsdelivr.net/gh/myreaderx13/cdn23@2020_1/2020/12/02/12-29-43-588_f93d0239d4369c75.webp","http://www.jintiankansha.me/rss_static/11757/9uEaiY9FPw":null},"publishedOrCreatedDate":1606912165945}],"record":{"createdTime":"2020-12-02 20:29:25","updatedTime":"2020-12-02 20:29:25","feedId":2521,"fetchDate":"Wed, 02 Dec 2020 12:29:25 +0000","fetchMs":194,"handleMs":24,"totalMs":82097,"newArticles":0,"totalArticles":5,"status":1,"type":0,"ip":"d35028d50cd902508c503a65512e6039","hostName":"us-038*","requestId":"8039e959877a438fa4c3b2513bf45ce2_2521","contentType":"application/rss+xml","totalBytes":422084,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":20,"articlesImgsGithubTotal":17,"successGithubMap":{"myreaderx8":1,"myreaderx15":1,"myreaderx7":1,"myreaderx6":1,"myreaderx27":1,"myreaderx21":1,"myreaderx4":1,"myreaderx33":1,"myreaderx3":1,"myreaderx22":1,"myreaderx12":1,"myreaderx24":1,"myreaderx13":1,"myreaderx31":1,"myreaderx5oss":1,"myreaderx29":1,"myreaderx19":1},"failGithubMap":{"myreaderx14":1,"myreaderx23":1}},"feed":{"createdTime":"2020-08-24 21:31:41","updatedTime":"2020-09-01 10:09:47","id":2521,"name":"ImportNew","url":"http://feedmaker.kindle4rss.com/feeds/importnew.weixin.xml","subscriber":null,"website":null,"icon":"http://www.sogou.com/images/logo/new/favicon.ico?v=4","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx63/cdn9@2020_3/2020/09/01/02-08-31-388_d24121c9beed1de6.ico","description":"伯乐在线旗下账号，专注Java技术分享，包括Java基础技术、进阶技能、架构设计和Java技术领域动态等。","weekly":null,"link":null},"noPictureArticleList":[{"createdTime":"2020-12-02 20:30:47","updatedTime":"2020-12-02 20:30:47","id":null,"feedId":2521,"linkMd5":"677c33be146bd854ecf917a3b93df569"}],"tmpCommonImgCdnBytes":13328,"tmpBodyImgCdnBytes":408756,"tmpBgImgCdnBytes":0,"extra4":{"start":1606912165575,"total":0,"statList":[{"spend":346,"msg":"获取xml内容"},{"spend":24,"msg":"解释文章"},{"spend":1,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":77668,"msg":"正文链接上传到cdn"}]},"extra5":20,"extra6":20,"extra7ImgCdnFailResultVector":[{"code":1,"isDone":false,"source":"http://www.jintiankansha.me/rss_static/11757/9uEaiY9FPw","sourceStatusCode":405,"sourceBytes":0,"destBytes":0,"feedId":2521,"totalSpendMs":666,"convertSpendMs":0,"createdTime":"2020-12-02 20:29:30","host":"us-006*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","linkMd5ListStr":"677c33be146bd854ecf917a3b93df569","extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[405],"destSize":"0","sourceSize":"0"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/2A8tXicCG8ylbWIGfdoDED35IRRySQZTXUkJ1eop9MHApzFibKnOo0diboXpl0rmS5mH78YJhsWQv0dhv718A6kUA/640?wx_fmt=jpeg","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":2521,"totalSpendMs":842,"convertSpendMs":0,"createdTime":"2020-12-02 20:29:30","host":"us-030*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","linkMd5ListStr":"677c33be146bd854ecf917a3b93df569","extra22GetBytesInfo":"2、Referer字段 ： http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","extra23historyStatusCode":[403,403],"destSize":"0","sourceSize":"0"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNmbk1gIiaCnbbJBdauBqeqTFFOyRkh5brcU2oVvPY9RXvqMw2KAtAIdw/640?wx_fmt=png","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":2521,"totalSpendMs":900,"convertSpendMs":0,"createdTime":"2020-12-02 20:29:30","host":"us-031*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","linkMd5ListStr":"677c33be146bd854ecf917a3b93df569","extra22GetBytesInfo":"2、Referer字段 ： http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","extra23historyStatusCode":[403,403],"destSize":"0","sourceSize":"0"},{"code":1,"isDone":false,"source":"http://www.jintiankansha.me/rss_static/11757/9uEaiY9FPw","sourceStatusCode":405,"sourceBytes":0,"destBytes":0,"feedId":2521,"totalSpendMs":458,"convertSpendMs":0,"createdTime":"2020-12-02 20:29:30","host":"europe65*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","linkMd5ListStr":"677c33be146bd854ecf917a3b93df569","extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[405],"destSize":"0","sourceSize":"0"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNPJV1My0T6NgpbggUHrEvYMXj8kicx7avUaGLfkoBro1kf2I58cicYSrg/640?wx_fmt=png","sourceStatusCode":200,"destWidth":691,"destHeight":270,"sourceBytes":15615,"destBytes":40492,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":5211,"convertSpendMs":11,"createdTime":"2020-12-02 20:29:30","host":"us-014*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","linkMd5ListStr":"677c33be146bd854ecf917a3b93df569","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx14/cdn7/contents/2020/12/02/12-29-35-177_c83be7bff9fb217f.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 68584859.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Wed, 02 Dec 2020 12:29:35 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"status":["403 Forbidden"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["E81A:6CC7:2B0678:7C2C9E:5FC788AC"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1606914567"],"x-ratelimit-used":["61"],"x-xss-protection":["1; mode=block"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx14/cdn7/contents/2020/12/02/12-29-35-177_c83be7bff9fb217f.webp","historyStatusCode":[],"spendMs":86},"base64UserPassword":null,"token":"6b67d******************************91b08"},"githubUser":"myreaderx14","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"destSize":"39.5 KB","compressRate":"259.3%","sourceSize":"15.2 KB"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNPJV1My0T6NgpbggUHrEvYMXj8kicx7avUaGLfkoBro1kf2I58cicYSrg/640?wx_fmt=png","sourceStatusCode":200,"destWidth":691,"destHeight":270,"sourceBytes":15615,"destBytes":40492,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":4381,"convertSpendMs":15,"createdTime":"2020-12-02 20:29:35","host":"us-035*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","linkMd5ListStr":"677c33be146bd854ecf917a3b93df569","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx14/cdn7/contents/2020/12/02/12-29-39-575_c83be7bff9fb217f.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 68584859.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Wed, 02 Dec 2020 12:29:39 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"status":["403 Forbidden"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["D3E8:3D3A:12BA4E5:1FCC9F3:5FC788AD"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1606914567"],"x-ratelimit-used":["61"],"x-xss-protection":["1; mode=block"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx14/cdn7/contents/2020/12/02/12-29-39-575_c83be7bff9fb217f.webp","historyStatusCode":[],"spendMs":80},"base64UserPassword":null,"token":"6b67d******************************91b08"},"githubUser":"myreaderx14","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"destSize":"39.5 KB","compressRate":"259.3%","sourceSize":"15.2 KB"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNiaSwBzjAxW0ib4Zd7VnlicRdIFFc0b1iaTadHfTMib3RrKloLut9c6ibUbHg/640?wx_fmt=png","sourceStatusCode":200,"destWidth":822,"destHeight":302,"sourceBytes":17728,"destBytes":8120,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":11218,"convertSpendMs":13,"createdTime":"2020-12-02 20:29:30","host":"europe70*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","linkMd5ListStr":"677c33be146bd854ecf917a3b93df569","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx23/cdn39/contents/2020/12/02/12-29-41-170_205707773884ea7f.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 69189253.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Wed, 02 Dec 2020 12:29:41 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"status":["403 Forbidden"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["A594:80C4:3BD8359:4512EEE:5FC788B5"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1606914565"],"x-ratelimit-used":["61"],"x-xss-protection":["1; mode=block"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx23/cdn39/contents/2020/12/02/12-29-41-170_205707773884ea7f.webp","historyStatusCode":[],"spendMs":176},"base64UserPassword":null,"token":"df0b9******************************93a6e"},"githubUser":"myreaderx23","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"destSize":"7.9 KB","compressRate":"45.8%","sourceSize":"17.3 KB"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNiaSwBzjAxW0ib4Zd7VnlicRdIFFc0b1iaTadHfTMib3RrKloLut9c6ibUbHg/640?wx_fmt=png","sourceStatusCode":200,"destWidth":822,"destHeight":302,"sourceBytes":17728,"destBytes":8120,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":16036,"convertSpendMs":12,"createdTime":"2020-12-02 20:29:41","host":"us-014*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","linkMd5ListStr":"677c33be146bd854ecf917a3b93df569","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx23/cdn39/contents/2020/12/02/12-29-57-378_205707773884ea7f.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 69189253.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Wed, 02 Dec 2020 12:29:57 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"status":["403 Forbidden"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["E81A:6CC7:2B0801:7C307C:5FC788BB"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1606914565"],"x-ratelimit-used":["61"],"x-xss-protection":["1; mode=block"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx23/cdn39/contents/2020/12/02/12-29-57-378_205707773884ea7f.webp","historyStatusCode":[],"spendMs":51},"base64UserPassword":null,"token":"df0b9******************************93a6e"},"githubUser":"myreaderx23","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"destSize":"7.9 KB","compressRate":"45.8%","sourceSize":"17.3 KB"},null,null],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://europe-24.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]},"http://us-53.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-039.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe65.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[405]},"http://us-034.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://us-035.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]},"http://us-015.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-030.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[403]},"http://us-009.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe70.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-026.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-011.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]},"http://us-006.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[405]},"http://europe69.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]},"http://us-031.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[403]},"http://europe62.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://us-003.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]},"http://europe-22.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-023.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-014.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"http://content.sov5.cn/mmbiz_jpg/eZzl4LXykQyDS0uEMNjMl4D3Qfl3Sz0DMbn7CPoWFxbQFMicpToTWqKOniazqTehx5UV6QibmOueAwUqGPrauIsrw?imageView2/1/w/600","sourceStatusCode":200,"destWidth":500,"destHeight":212,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn89@2020_4/2020/12/02/12-29-29-172_4e70d72a6f13ff1d.webp","sourceBytes":15438,"destBytes":13328,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":4035,"convertSpendMs":10,"createdTime":"2020-12-02 20:29:25","host":"us-023*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","linkMd5ListStr":"677c33be146bd854ecf917a3b93df569,677c33be146bd854ecf917a3b93df569","githubUser":"myreaderx6","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"destSize":"13 KB","compressRate":"86.3%","sourceSize":"15.1 KB"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNAuNtPWlggvmYBibmAvkqHzFnUlMZsIwWibKItjAZyLKmXCuh61ccMic3g/640?wx_fmt=jpeg","sourceStatusCode":200,"destWidth":666,"destHeight":212,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn61@2020_6/2020/12/02/12-29-31-346_d0753ba8cdf3429d.webp","sourceBytes":12300,"destBytes":8890,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":2133,"convertSpendMs":7,"createdTime":"2020-12-02 20:29:30","host":"europe-24*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","linkMd5ListStr":"677c33be146bd854ecf917a3b93df569","githubUser":"myreaderx4","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"destSize":"8.7 KB","compressRate":"72.3%","sourceSize":"12 KB"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNWK9mDLzUkibYynNIicT16YibIGoibDciaDuYqUWGJcrHgcnSjBk86mkKOvA/640?wx_fmt=png","sourceStatusCode":200,"destWidth":940,"destHeight":540,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn48@2020_6/2020/12/02/12-29-32-588_84badacd41f84736.webp","sourceBytes":33669,"destBytes":15832,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":3449,"convertSpendMs":24,"createdTime":"2020-12-02 20:29:30","host":"us-035*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","linkMd5ListStr":"677c33be146bd854ecf917a3b93df569","githubUser":"myreaderx5oss","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"destSize":"15.5 KB","compressRate":"47%","sourceSize":"32.9 KB"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNjLibarSKqicm9f7YJ4iclcM5iaeTzMIpecD4TtBtJUiadIXPj7giaAzmj6xw/640?wx_fmt=png","sourceStatusCode":200,"destWidth":448,"destHeight":153,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn54@2020_2/2020/12/02/12-29-33-824_522ad1db176f93e1.webp","sourceBytes":11402,"destBytes":7680,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":4628,"convertSpendMs":7,"createdTime":"2020-12-02 20:29:30","host":"us-023*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","linkMd5ListStr":"677c33be146bd854ecf917a3b93df569","githubUser":"myreaderx21","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"destSize":"7.5 KB","compressRate":"67.4%","sourceSize":"11.1 KB"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNtaiaxlEdj3KUTrNLmu9sfldiafSkKCViat0zqzUC4O2X4z6KYXF7QemCg/640?wx_fmt=png","sourceStatusCode":200,"destWidth":930,"destHeight":307,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn35@2020_6/2020/12/02/12-29-33-787_e236e4b13306a291.webp","sourceBytes":36776,"destBytes":18434,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":4642,"convertSpendMs":19,"createdTime":"2020-12-02 20:29:30","host":"europe69*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","linkMd5ListStr":"677c33be146bd854ecf917a3b93df569","githubUser":"myreaderx19","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"destSize":"18 KB","compressRate":"50.1%","sourceSize":"35.9 KB"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNQKhG1uwzBE2911AAtzhzHCUqKV7ELR7m9hJaicj5snpX44X9laQ47kQ/640?wx_fmt=png","sourceStatusCode":200,"destWidth":1079,"destHeight":683,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn21@2020_1/2020/12/02/12-29-34-329_fceb5575d1c17bda.webp","sourceBytes":50046,"destBytes":24246,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":5193,"convertSpendMs":38,"createdTime":"2020-12-02 20:29:30","host":"us-53*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","linkMd5ListStr":"677c33be146bd854ecf917a3b93df569","githubUser":"myreaderx15","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"destSize":"23.7 KB","compressRate":"48.4%","sourceSize":"48.9 KB"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNdibhDd47UvsaDrzCeXSPEnn2pDPY3zB29NS7BWRkkfAM3aXSD0MMnUQ/640?wx_fmt=png","sourceStatusCode":200,"destWidth":666,"destHeight":137,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn17@2020_6/2020/12/02/12-29-35-392_dc195fe375e45211.webp","sourceBytes":64230,"destBytes":18298,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":6253,"convertSpendMs":18,"createdTime":"2020-12-02 20:29:30","host":"us-003*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","linkMd5ListStr":"677c33be146bd854ecf917a3b93df569","githubUser":"myreaderx22","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"destSize":"17.9 KB","compressRate":"28.5%","sourceSize":"62.7 KB"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNQp60d1U34A677XCF1seAqEtte2VulQ0VctGicz0UqUPkWEvXeJw23Qw/640?wx_fmt=png","sourceStatusCode":200,"destWidth":660,"destHeight":430,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn2@2020_6/2020/12/02/12-29-35-721_f86a076ddb28b0f3.webp","sourceBytes":18157,"destBytes":45240,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":6607,"convertSpendMs":19,"createdTime":"2020-12-02 20:29:30","host":"us-039*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","linkMd5ListStr":"677c33be146bd854ecf917a3b93df569","githubUser":"myreaderx33","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"destSize":"44.2 KB","compressRate":"249.2%","sourceSize":"17.7 KB"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNmbk1gIiaCnbbJBdauBqeqTFFOyRkh5brcU2oVvPY9RXvqMw2KAtAIdw/640?wx_fmt=png","sourceStatusCode":200,"destWidth":1080,"destHeight":550,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn28@2020_2/2020/12/02/12-29-38-309_e4f00d0190b1cc3c.webp","sourceBytes":77947,"destBytes":22230,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":8252,"convertSpendMs":70,"createdTime":"2020-12-02 20:29:30","host":"us-009*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","linkMd5ListStr":"677c33be146bd854ecf917a3b93df569","githubUser":"myreaderx8","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"destSize":"21.7 KB","compressRate":"28.5%","sourceSize":"76.1 KB"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raN9n2aiaabVzBQ2vH3NcphKUHP1GZlaFIqvsGjUne3lKqk7EHEwD9GypQ/640?wx_fmt=png","sourceStatusCode":200,"destWidth":669,"destHeight":765,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn11@2020_4/2020/12/02/12-29-43-246_8dac7dfec29fcfef.webp","sourceBytes":74010,"destBytes":36910,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":14022,"convertSpendMs":26,"createdTime":"2020-12-02 20:29:30","host":"us-015*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","linkMd5ListStr":"677c33be146bd854ecf917a3b93df569","githubUser":"myreaderx3","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"destSize":"36 KB","compressRate":"49.9%","sourceSize":"72.3 KB"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/2A8tXicCG8ylbWIGfdoDED35IRRySQZTXUkJ1eop9MHApzFibKnOo0diboXpl0rmS5mH78YJhsWQv0dhv718A6kUA/640?wx_fmt=jpeg","sourceStatusCode":200,"destWidth":600,"destHeight":550,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx13/cdn23@2020_1/2020/12/02/12-29-43-588_f93d0239d4369c75.webp","sourceBytes":37143,"destBytes":31608,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":13878,"convertSpendMs":13,"createdTime":"2020-12-02 20:29:30","host":"europe-22*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","linkMd5ListStr":"677c33be146bd854ecf917a3b93df569","githubUser":"myreaderx13","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"destSize":"30.9 KB","compressRate":"85.1%","sourceSize":"36.3 KB"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNrWL6IpIvY8o49p5e03EM2vmic1Z4LQK9tcOQr24mX6ib8brHEhlk8icsw/640?wx_fmt=png","sourceStatusCode":200,"destWidth":661,"destHeight":504,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn3@2020_4/2020/12/02/12-29-44-068_0177de241ff89319.webp","sourceBytes":33963,"destBytes":16202,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":14888,"convertSpendMs":23,"createdTime":"2020-12-02 20:29:30","host":"us-026*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","linkMd5ListStr":"677c33be146bd854ecf917a3b93df569","githubUser":"myreaderx27","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"destSize":"15.8 KB","compressRate":"47.7%","sourceSize":"33.2 KB"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raN3HNicqmiaMr7u3pLhMQguqya4qVwN05KPtctMuicj5BJtqTph9y6t58Hg/640?wx_fmt=png","sourceStatusCode":200,"destWidth":643,"destHeight":639,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn97@2020_3/2020/12/02/12-29-45-766_8a11f0ca81afaaaf.webp","sourceBytes":67210,"destBytes":21838,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":16673,"convertSpendMs":20,"createdTime":"2020-12-02 20:29:30","host":"europe-24*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","linkMd5ListStr":"677c33be146bd854ecf917a3b93df569","githubUser":"myreaderx31","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"destSize":"21.3 KB","compressRate":"32.5%","sourceSize":"65.6 KB"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNorVW6tbpib6bflFQBMGXKvsGnzGLOC6E0YcRT1cO4NK5hGwPIic6icibQQ/640?wx_fmt=png","sourceStatusCode":200,"destWidth":1080,"destHeight":536,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn57@2020_4/2020/12/02/12-29-49-552_007efffdb077a74c.webp","sourceBytes":157057,"destBytes":39714,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":20462,"convertSpendMs":31,"createdTime":"2020-12-02 20:29:30","host":"us-011*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","linkMd5ListStr":"677c33be146bd854ecf917a3b93df569","githubUser":"myreaderx7","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"destSize":"38.8 KB","compressRate":"25.3%","sourceSize":"153.4 KB"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNlESbRy8GvrZjdiawkzZiaJhhYhdw4iarkSqTYHjMxAlSUyNDYicwn99pdw/640?wx_fmt=png","sourceStatusCode":200,"destWidth":1080,"destHeight":466,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn93@2020_3/2020/12/02/12-29-53-532_1d4d2c1b20d37545.webp","sourceBytes":223906,"destBytes":28698,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":24331,"convertSpendMs":28,"createdTime":"2020-12-02 20:29:30","host":"us-011*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","linkMd5ListStr":"677c33be146bd854ecf917a3b93df569","githubUser":"myreaderx29","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"destSize":"28 KB","compressRate":"12.8%","sourceSize":"218.7 KB"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNMfbDp2MWgLnwp7VicXvibvKynAgzTZZcdC2nqagSLW8mThZke7W5YVqQ/640?wx_fmt=png","sourceStatusCode":200,"destWidth":756,"destHeight":163,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn45@2020_5/2020/12/02/12-30-35-294_cb100a7184d38efa.webp","sourceBytes":65097,"destBytes":39566,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":6051,"convertSpendMs":12,"createdTime":"2020-12-02 20:30:30","host":"europe69*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","linkMd5ListStr":"677c33be146bd854ecf917a3b93df569","githubUser":"myreaderx12","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"destSize":"38.6 KB","compressRate":"60.8%","sourceSize":"63.6 KB"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2YCmHwyuLEFHRribqDo3raNNVtbRqbmxD2I0aWbyJSrxxS4IArlI6c3CGRxMNcyJefTjNptjFGEXQ/640?wx_fmt=png","sourceStatusCode":200,"destWidth":586,"destHeight":275,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn65@2020_4/2020/12/02/12-30-46-778_56abf3f88f4f779d.webp","sourceBytes":126033,"destBytes":33370,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":16276,"convertSpendMs":21,"createdTime":"2020-12-02 20:30:31","host":"us-003*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%88%91%E6%8A%8A%E3%80%8C%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E3%80%8D%E6%95%B4%E6%98%8E%E7%99%BD%E4%BA%86","linkMd5ListStr":"677c33be146bd854ecf917a3b93df569","githubUser":"myreaderx24","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"destSize":"32.6 KB","compressRate":"26.5%","sourceSize":"123.1 KB"}],"successGithubMap":{"myreaderx8":1,"myreaderx15":1,"myreaderx7":1,"myreaderx6":1,"myreaderx27":1,"myreaderx21":1,"myreaderx4":1,"myreaderx33":1,"myreaderx3":1,"myreaderx22":1,"myreaderx12":1,"myreaderx24":1,"myreaderx13":1,"myreaderx31":1,"myreaderx5oss":1,"myreaderx29":1,"myreaderx19":1},"failGithubMap":{"myreaderx14":1,"myreaderx23":1}}
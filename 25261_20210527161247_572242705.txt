{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2021-05-28 00:10:45","updatedTime":"2021-05-28 00:10:45","title":"Build an Android App with RxJava and Kotlin","link":"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin","description":"<div class=\"paragraph\"> \n <p>Modern-day mobile apps do so much. They communicate with different back-ends via network APIs. They store and retrieve data from the local database, do heavy media processing, and communicate with web sockets. It’s hard to keep track of all the information from different asynchronous data sources, especially knowing that the users are accustomed to constantly having a fluid experience with the apps they use.</p> \n</div> \n<div class=\"paragraph\"> \n <p>In the early days of Android, developers used the class <code>AsyncTask</code> from the Android framework for doing all the work outside of the main UI thread. Even though async tasks did what they’re supposed to, using them wasn’t the most pleasant experience because of all the boilerplate code you would ultimately end up writing and due to scalability issues. If you had a more advanced use case (i.e., presenting data from a local database on the UI while making an API request to fetch the latest data from the backend, updating the local database, and presenting the latest data on the UI), things would quickly get out of hand. You would end up with code that is hard to understand and maintain.</p> \n</div> \n<div class=\"paragraph\"> \n <p>Many of those problems were solved by releasing the Java version of the ReactiveX API, called RxJava. It is a library that introduced the concept of data streams and functional programming to the Android platform. It became quite popular with the developer community because of the advanced features and boilerplate reduction it introduced. Chaining tasks from different threads into one logical sequence became easier to write and understand.</p> \n</div> \n<div class=\"paragraph\"> \n <p>In this post, you’ll learn the basics of RxJava on Android by building a real-world example of server-client communication. Then, you’ll create a production-ready back-end app that will provide an API to authorized users from the Android app. The OIDC authorization will be implemented with the help of Okta OIDC SDKs on both apps.</p> \n</div> \n<div class=\"paragraph\"> \n <p>Fasten your seatbelt; your reactive journey starts here!</p> \n</div> \n<div id=\"toc\" class=\"toc\"> \n <div id=\"toctitle\" class=\"title\">\n   Table of Contents \n </div> \n <ul class=\"sectlevel1\"> \n  <li><a href=\"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin#create-android-rxjava-and-reactive-java-apps\">Create Android RxJava and Reactive Java Apps</a> \n   <ul class=\"sectlevel2\"> \n    <li><a href=\"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin#clone-the-backend-reactive-spring-boot-app\">Clone the Backend Reactive Spring Boot App</a></li> \n    <li><a href=\"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin#clone-the-android-app\">Clone the Android App</a></li> \n   </ul> </li> \n  <li><a href=\"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin#build-a-reactive-android-app\">Build a Reactive Android App</a> \n   <ul class=\"sectlevel2\"> \n    <li><a href=\"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin#add-rxjava-and-retrofit-dependencies\">Add RxJava and Retrofit Dependencies</a></li> \n    <li><a href=\"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin#set-up-networking\">Set Up Networking</a></li> \n   </ul> </li> \n  <li><a href=\"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin#use-rxjava-to-access-the-profile-api\">Use RxJava to Access the Profile API</a> \n   <ul class=\"sectlevel2\"> \n    <li><a href=\"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin#fetch-profiles\">Fetch Profiles</a></li> \n    <li><a href=\"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin#create-profiles\">Create Profiles</a></li> \n    <li><a href=\"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin#delete-a-profile\">Delete a Profile</a></li> \n    <li><a href=\"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin#update-a-profile\">Update a Profile</a></li> \n   </ul> </li> \n  <li><a href=\"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin#set-up-the-android-ui\">Set Up the Android UI</a></li> \n  <li><a href=\"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin#learn-more-about-rxjava-and-android\">Learn More About RxJava and Android</a></li> \n </ul> \n</div> \n<div class=\"sect1\"> \n <h2 id=\"create-android-rxjava-and-reactive-java-apps\">Create Android RxJava and Reactive Java Apps</h2> \n <div class=\"sectionbody\"> \n  <div class=\"paragraph\"> \n   <p>As mentioned, you will create both back-end and Android apps. The good news is that you won’t need to do it from scratch; cloning them from GitHub will suffice.</p> \n  </div> \n  <div class=\"sect2\"> \n   <h3 id=\"clone-the-backend-reactive-spring-boot-app\">Clone the Backend Reactive Spring Boot App</h3> \n   <div class=\"paragraph\"> \n    <p>The back-end app is based on the <a href=\"https://developer.okta.com/blog/2018/09/24/reactive-apis-with-spring-webflux\">Build Reactive APIs with Spring WebFlux</a> blog post. The app is a Java API that uses the Spring Boot framework and the WebFlux library for reactive streams, and it relies on a MongoDB database for storage.</p> \n   </div> \n   <div class=\"paragraph\"> \n    <p>You can find the finished app on <a href=\"https://github.com/oktadeveloper/okta-spring-webflux-react-example\">GitHub</a>. Run the following command to clone the project:</p> \n   </div> \n   <div class=\"listingblock\"> \n    <div class=\"content\"> \n     <pre class=\"rouge highlight\"><code data-lang=\"sh\">git clone https://github.com/oktadev/okta-spring-webflux-react-example.git reactive-spring-boot\n<span class=\"nb\">cd </span>reactive-spring-boot/reactive-web</code></pre> \n    </div> \n   </div> \n   <div class=\"paragraph\"> \n    <p>Before you begin, you’ll need a free Okta developer account. Install the <a href=\"https://cli.okta.com\">Okta CLI</a> and run <code>okta register</code> to sign up for a new account. If you already have an account, run <code>okta login</code>. Then, run <code>okta apps create</code>. Select the default app name, or change it as you see fit. Choose <strong>Web</strong> and press <strong>Enter</strong>.</p> \n   </div> \n   <div class=\"paragraph\"> \n    <p>Select <strong>Other</strong>. Then, change the Redirect URI to <code>http://localhost:8080/login/oauth2/code/okta</code> and use <code>http://localhost:8080</code> for the Logout Redirect URI.</p> \n   </div> \n   <details> \n    <summary>What does the Okta CLI do?</summary> \n    <p>The Okta CLI will create an OIDC Web App in your Okta Org. It will add the redirect URIs you specified and grant access to the Everyone group. You will see output like the following when it’s finished:</p> \n    <div class=\"language-shell highlighter-rouge\"> \n     <div class=\"highlight\"> \n      <pre class=\"highlight\"><code>Okta application configuration has been written to: /path/to/app/.okta.env\n</code></pre> \n     </div> \n    </div> \n    <p>Run <code class=\"language-plaintext highlighter-rouge\">cat .okta.env</code> (or <code class=\"language-plaintext highlighter-rouge\">type .okta.env</code> on Windows) to see the issuer and credentials for your app.</p> \n    <div class=\"language-shell highlighter-rouge\"> \n     <div class=\"highlight\"> \n      <pre class=\"highlight\"><code><span class=\"nb\">export </span><span class=\"nv\">OKTA_OAUTH2_ISSUER</span><span class=\"o\">=</span><span class=\"s2\">\"https://dev-133337.okta.com/oauth2/default\"</span>\n<span class=\"nb\">export </span><span class=\"nv\">OKTA_OAUTH2_CLIENT_ID</span><span class=\"o\">=</span><span class=\"s2\">\"0oab8eb55Kb9jdMIr5d6\"</span>\n<span class=\"nb\">export </span><span class=\"nv\">OKTA_OAUTH2_CLIENT_SECRET</span><span class=\"o\">=</span><span class=\"s2\">\"NEVER-SHOW-SECRETS\"</span>\n</code></pre> \n     </div> \n    </div> \n    <p>Your Okta domain is the first part of your issuer, before <code class=\"language-plaintext highlighter-rouge\">/oauth2/default</code>.</p> \n    <p><strong>NOTE</strong>: You can also use the Okta Admin Console to create your app. See <a href=\"https://developer.okta.com/docs/guides/sign-into-web-app/-/create-okta-application/\">Create a Web App</a> for more information.</p> \n   </details> \n   <div class=\"paragraph\"> \n    <p>Copy your Okta values from <code>.okta.env</code> into the <code>reactive-spring-boot/reactive-web/src/main/resources/application.yml</code> file.</p> \n   </div> \n   <div class=\"paragraph\"> \n    <p>You can also use the instructions in the repo’s <a href=\"https://github.com/oktadeveloper/okta-spring-webflux-react-example#getting-started\">getting started section</a>.</p> \n   </div> \n   <div class=\"admonitionblock note\"> \n    <table> \n     <tr> \n      <td class=\"icon\"> <i class=\"fa icon-note\" title=\"Note\"></i> </td> \n      <td class=\"content\"> Please ignore the set-up of the React native app since it’s not needed for this example. But if you’re interested in it, feel free to set it up and see how it works! </td> \n     </tr> \n    </table> \n   </div> \n   <div class=\"paragraph\"> \n    <p>The next step is to remove the scope on the MongoDB dependency so it runs along with our web app. Do that by removing the string <code>&lt;scope&gt;test&lt;/scope&gt;</code> from line 49 of the file <code>reactive-spring-boot/reactive-web/pom.xml</code>. This will make it so an embedded MongoDB server starts when you start your app.</p> \n   </div> \n   <div class=\"paragraph\"> \n    <p>Now you can run the server by running the command:</p> \n   </div> \n   <div class=\"listingblock\"> \n    <div class=\"content\"> \n     <pre class=\"rouge highlight\"><code data-lang=\"sh\">./mvnw</code></pre> \n    </div> \n   </div> \n   <div class=\"paragraph\"> \n    <p>You should see something like this in your terminal:</p> \n   </div> \n   <div class=\"imageblock text-center\"> \n    <div class=\"content\"> \n     <img src=\"https://developer.okta.com/assets-jekyll/blog/rxjava-android/start-web-server-06a882a46e09b7a60aa82b4e68dfbf417b0eb352f5ef032ee65238eb34cf831b.png\" alt=\"Start Spring Boot server\" width=\"700\"> </img> \n    </div> \n   </div> \n   <div class=\"paragraph\"> \n    <p>To test this, open a new terminal window and run the following command:</p> \n   </div> \n   <div class=\"listingblock\"> \n    <div class=\"content\"> \n     <pre class=\"rouge highlight\"><code data-lang=\"sh\">curl http://localhost:8080/profiles <span class=\"nt\">-v</span></code></pre> \n    </div> \n   </div> \n   <div class=\"paragraph\"> \n    <p>This API call should fail because you need to be authenticated to access that resource, and it should look like this:</p> \n   </div> \n   <div class=\"imageblock text-center\"> \n    <div class=\"content\"> \n     <img src=\"https://developer.okta.com/assets-jekyll/blog/rxjava-android/connect-to-server-401-61300798a6a16542982c2d4b445e396f384341d8de9cdc63e3499166e701a224.png\" alt=\"Connection to server failed with 401\" width=\"700\"> </img> \n    </div> \n   </div> \n   <div class=\"paragraph\"> \n    <p>That’s all from the web app. The rest of this tutorial will focus on building a reactive Android app that will communicate with the web app. Leave the server running in the terminal and proceed to the next step.</p> \n   </div> \n  </div> \n  <div class=\"sect2\"> \n   <h3 id=\"clone-the-android-app\">Clone the Android App</h3> \n   <div class=\"paragraph\"> \n    <p>The Android app you’ll use for this guide is based on the <a href=\"https://developer.okta.com/blog/2021/01/06/android-login\">Android Login Made Easy with OIDC</a> blog post. Please go ahead and clone the result of the blog post by running this command:</p> \n   </div> \n   <div class=\"listingblock\"> \n    <div class=\"content\"> \n     <pre class=\"rouge highlight\"><code data-lang=\"shell\">git clone https://github.com/oktadeveloper/okta-android-login-example.git</code></pre> \n    </div> \n   </div> \n   <div class=\"paragraph\"> \n    <p>Before you begin, you’ll need a free Okta developer account. Install the <a href=\"https://cli.okta.com\">Okta CLI</a> and run <code>okta register</code> to sign up for a new account. If you already have an account, run <code>okta login</code>. Then, run <code>okta apps create</code>. Select the default app name, or change it as you see fit. Choose <strong>Native</strong> and press <strong>Enter</strong>.</p> \n   </div> \n   <div class=\"paragraph\"> \n    <p>Use <code>com.okta.dev-133337:/callback</code> for the Redirect URI and set the Logout Redirect URI to <code>com.okta.dev-133337:/</code> (where <code>dev-133337.okta.com</code> is your Okta domain name). Your domain name is reversed to provide a unique scheme to open your app on a device.</p> \n   </div> \n   <details> \n    <summary>What does the Okta CLI do?</summary> \n    <p>The Okta CLI will create an OIDC Native App in your Okta Org. It will add the redirect URIs you specified and grant access to the Everyone group. You will see output like the following when it’s finished:</p> \n    <div class=\"language-shell highlighter-rouge\"> \n     <div class=\"highlight\"> \n      <pre class=\"highlight\"><code>Okta application configuration:\nIssuer:    https://dev-133337.okta.com/oauth2/default\nClient ID: 0oab8eb55Kb9jdMIr5d6\n</code></pre> \n     </div> \n    </div> \n    <p><strong>NOTE</strong>: You can also use the Okta Admin Console to create your app. See <a href=\"https://developer.okta.com/docs/guides/sign-into-mobile-app/-/create-okta-application/\">Create a Native App</a> for more information.</p> \n   </details> \n   <div class=\"paragraph\"> \n    <p>Once you have the credentials for your new app, don’t forget to update both your <a href=\"https://developer.okta.com/blog/2021/01/06/android-login#add-the-okta-android-oidc-sdk\">build.gradle file</a> and the <a href=\"https://developer.okta.com/blog/2021/01/06/android-login#manage-authentication-with-a-manager-class\">OktaManager’s</a> class with the credentials from your newly created Okta mobile app.</p> \n   </div> \n   <div class=\"paragraph\"> \n    <p>Once you have the credentials for your new app, update <code>app/build.gradle</code> to use your reversed Okta domain name.</p> \n   </div> \n   <div class=\"listingblock\"> \n    <div class=\"content\"> \n     <pre class=\"rouge highlight\"><code data-lang=\"groovy\"><span class=\"n\">manifestPlaceholders</span> <span class=\"o\">=</span> <span class=\"o\">[</span>\n    <span class=\"s2\">\"appAuthRedirectScheme\"</span><span class=\"o\">:</span> <span class=\"s2\">\"com.okta.dev-133337\"</span>\n<span class=\"o\">]</span></code></pre> \n    </div> \n   </div> \n   <div class=\"paragraph\"> \n    <p>Then, update <code>src/main/java/dev/dbikic/oktaloginexample/OktaManager.kt</code> to have your client ID, issuer, and other Okta settings.</p> \n   </div> \n   <div class=\"listingblock\"> \n    <div class=\"content\"> \n     <pre class=\"rouge highlight\"><code data-lang=\"kotlin\"><span class=\"kd\">val</span> <span class=\"py\">config</span> <span class=\"p\">=</span> <span class=\"nc\">OIDCConfig</span><span class=\"p\">.</span><span class=\"nc\">Builder</span><span class=\"p\">()</span>\n    <span class=\"p\">.</span><span class=\"nf\">clientId</span><span class=\"p\">(</span><span class=\"s\">\"{yourClientID}\"</span><span class=\"p\">)</span>\n    <span class=\"p\">.</span><span class=\"nf\">discoveryUri</span><span class=\"p\">(</span><span class=\"s\">\"<span class=\"okta-preview-domain\">https://{yourOktaDomain}</span>/oauth2/default\"</span><span class=\"p\">)</span>\n    <span class=\"p\">.</span><span class=\"nf\">redirectUri</span><span class=\"p\">(</span><span class=\"s\">\"{yourReversedOktaDomain}:/callback\"</span><span class=\"p\">)</span>\n    <span class=\"p\">.</span><span class=\"nf\">endSessionRedirectUri</span><span class=\"p\">(</span><span class=\"s\">\"{yourReversedOktaDomain}:/\"</span><span class=\"p\">)</span></code></pre> \n    </div> \n   </div> \n   <div class=\"paragraph\"> \n    <p>And voilà, the setup is done! Now you just have to start the server by running the following command in the root folder of the Spring Boot app:</p> \n   </div> \n   <div class=\"listingblock\"> \n    <div class=\"content\"> \n     <pre class=\"rouge highlight\"><code data-lang=\"sh\">./mvnw</code></pre> \n    </div> \n   </div> \n  </div> \n </div> \n</div> \n<div class=\"sect1\"> \n <h2 id=\"build-a-reactive-android-app\">Build a Reactive Android App</h2> \n <div class=\"sectionbody\"> \n  <div class=\"paragraph\"> \n   <p>Now it’s time to modify the existing Android app, set up the networking, and add the RxJava library. You’re going to use the <a href=\"https://square.github.io/retrofit/\">Retrofit</a> library for networking, which is the de-facto standard for Android. The plan is that you connect to your Spring Boot web app API and reactively do a few API calls. Let’s get started!</p> \n  </div> \n  <div class=\"sect2\"> \n   <h3 id=\"add-rxjava-and-retrofit-dependencies\">Add RxJava and Retrofit Dependencies</h3> \n   <div class=\"paragraph\"> \n    <p>To add the needed library dependencies, paste the following lines into the <code>dependencies</code> block of the <code>app/build.gradle</code> file:</p> \n   </div> \n   <div class=\"exampleblock\"> \n    <div class=\"content\"> \n     <div class=\"listingblock\"> \n      <div class=\"content\"> \n       <pre class=\"rouge highlight\"><code data-lang=\"groovy\"><span class=\"n\">dependencies</span> <span class=\"o\">{</span>\n    <span class=\"o\">...</span>\n    <span class=\"c1\">// RxJava</span>\n    <span class=\"n\">implementation</span> <span class=\"s1\">'io.reactivex.rxjava3:rxjava:3.0.0'</span> <i class=\"conum\" data-value=\"1\"></i><b>(1)</b>\n    <span class=\"n\">implementation</span> <span class=\"s1\">'io.reactivex.rxjava3:rxandroid:3.0.0'</span> <i class=\"conum\" data-value=\"2\"></i><b>(2)</b>\n\n    <span class=\"c1\">// Retrofit</span>\n    <span class=\"n\">implementation</span> <span class=\"s1\">'com.squareup.retrofit2:retrofit:2.9.0'</span> <i class=\"conum\" data-value=\"3\"></i><b>(3)</b>\n    <span class=\"n\">implementation</span> <span class=\"s1\">'com.squareup.retrofit2:converter-gson:2.9.0'</span> <i class=\"conum\" data-value=\"4\"></i><b>(4)</b>\n    <span class=\"n\">implementation</span> <span class=\"s1\">'com.squareup.retrofit2:adapter-rxjava3:2.9.0'</span> <i class=\"conum\" data-value=\"5\"></i><b>(5)</b>\n<span class=\"o\">}</span></code></pre> \n      </div> \n     </div> \n     <div class=\"colist arabic\"> \n      <table> \n       <tr> \n        <td><i class=\"conum\" data-value=\"1\"></i><b>1</b></td> \n        <td>The main <a href=\"https://github.com/ReactiveX/RxJava\">RxJava</a> library</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"2\"></i><b>2</b></td> \n        <td>The <a href=\"https://github.com/ReactiveX/RxAndroid\">RxJava bindings for Android</a>, needed for thread management</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"3\"></i><b>3</b></td> \n        <td>The main <a href=\"https://github.com/square/retrofit\">Retrofit</a> dependency that includes the HTTP client you’ll use</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"4\"></i><b>4</b></td> \n        <td>The converter for <a href=\"https://github.com/google/gson\">Gson</a>, used to deserialize data from the API automatically</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"5\"></i><b>5</b></td> \n        <td>The <a href=\"https://github.com/square/retrofit/tree/master/retrofit-adapters/rxjava2\">RxJava version of CallAdapter.Factory</a> from Retrofit, used to make the API calls reactive functions</td> \n       </tr> \n      </table> \n     </div> \n    </div> \n   </div> \n   <div class=\"admonitionblock note\"> \n    <table> \n     <tr> \n      <td class=\"icon\"> <i class=\"fa icon-note\" title=\"Note\"></i> </td> \n      <td class=\"content\"> Please don’t paste the <code>…​</code> into Android Studio; it’s just an indicator that some other code exists either above or below the code to paste. </td> \n     </tr> \n    </table> \n   </div> \n  </div> \n  <div class=\"sect2\"> \n   <h3 id=\"set-up-networking\">Set Up Networking</h3> \n   <div class=\"paragraph\"> \n    <p>This part consists of a few parts, the most important being the Retrofit client. Once you instantiate it, you’ll use it for making all the API calls. Create a new package called <code>network</code> (just for the sake of code organization), and create the <code>RetrofitClientInstance</code> Kotlin file:</p> \n   </div> \n   <div class=\"exampleblock\"> \n    <div class=\"content\"> \n     <div class=\"listingblock\"> \n      <div class=\"content\"> \n       <pre class=\"rouge highlight\"><code data-lang=\"kotlin\"><span class=\"k\">package</span> <span class=\"nn\">dev.dbikic.oktaloginexample.network</span>\n\n<span class=\"k\">import</span> <span class=\"nn\">okhttp3.Interceptor</span>\n<span class=\"k\">import</span> <span class=\"nn\">okhttp3.OkHttpClient</span>\n<span class=\"k\">import</span> <span class=\"nn\">retrofit2.Retrofit</span>\n<span class=\"k\">import</span> <span class=\"nn\">retrofit2.adapter.rxjava3.RxJava3CallAdapterFactory</span>\n<span class=\"k\">import</span> <span class=\"nn\">retrofit2.converter.gson.GsonConverterFactory</span>\n\n<span class=\"kd\">object</span> <span class=\"nc\">RetrofitClientInstance</span> <span class=\"p\">{</span>\n\n    <span class=\"k\">lateinit</span> <span class=\"kd\">var</span> <span class=\"py\">retrofit</span><span class=\"p\">:</span> <span class=\"nc\">Retrofit</span>\n\n    <span class=\"k\">private</span> <span class=\"k\">const</span> <span class=\"kd\">val</span> <span class=\"py\">BASE_URL</span> <span class=\"p\">=</span> <span class=\"s\">\"http://10.0.2.2:8080/\"</span> <i class=\"conum\" data-value=\"1\"></i><b>(1)</b>\n\n    <span class=\"k\">private</span> <span class=\"kd\">var</span> <span class=\"py\">token</span> <span class=\"p\">=</span> <span class=\"s\">\"\"</span>\n\n    <span class=\"kd\">val</span> <span class=\"py\">retrofitInstance</span><span class=\"p\">:</span> <span class=\"nc\">Retrofit</span>\n        <span class=\"k\">get</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n            <span class=\"k\">if</span> <span class=\"p\">(!</span><span class=\"k\">this</span><span class=\"o\">::</span><span class=\"n\">retrofit</span><span class=\"p\">.</span><span class=\"n\">isInitialized</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n                <span class=\"kd\">val</span> <span class=\"py\">headersInterceptor</span> <span class=\"p\">=</span> <span class=\"nc\">Interceptor</span> <span class=\"p\">{</span> <span class=\"n\">chain</span> <span class=\"p\">-&gt;</span>\n                    <span class=\"kd\">val</span> <span class=\"py\">requestBuilder</span> <span class=\"p\">=</span> <span class=\"n\">chain</span><span class=\"p\">.</span><span class=\"nf\">request</span><span class=\"p\">().</span><span class=\"nf\">newBuilder</span><span class=\"p\">()</span>\n                    <span class=\"n\">requestBuilder</span><span class=\"p\">.</span><span class=\"nf\">header</span><span class=\"p\">(</span><span class=\"s\">\"Authorization\"</span><span class=\"p\">,</span> <span class=\"s\">\"Bearer $token\"</span><span class=\"p\">)</span> <i class=\"conum\" data-value=\"2\"></i><b>(2)</b>\n                    <span class=\"n\">chain</span><span class=\"p\">.</span><span class=\"nf\">proceed</span><span class=\"p\">(</span><span class=\"n\">requestBuilder</span><span class=\"p\">.</span><span class=\"nf\">build</span><span class=\"p\">())</span>\n                <span class=\"p\">}</span>\n                <span class=\"kd\">val</span> <span class=\"py\">okHttpClient</span> <span class=\"p\">=</span> <span class=\"nc\">OkHttpClient</span><span class=\"p\">()</span> <i class=\"conum\" data-value=\"3\"></i><b>(3)</b>\n                    <span class=\"p\">.</span><span class=\"nf\">newBuilder</span><span class=\"p\">()</span>\n                    <span class=\"p\">.</span><span class=\"nf\">followRedirects</span><span class=\"p\">(</span><span class=\"k\">true</span><span class=\"p\">)</span>\n                    <span class=\"p\">.</span><span class=\"nf\">addInterceptor</span><span class=\"p\">(</span><span class=\"n\">headersInterceptor</span><span class=\"p\">)</span> <i class=\"conum\" data-value=\"4\"></i><b>(4)</b>\n                    <span class=\"p\">.</span><span class=\"nf\">build</span><span class=\"p\">()</span>\n                <span class=\"n\">retrofit</span> <span class=\"p\">=</span> <span class=\"nc\">Retrofit</span><span class=\"p\">.</span><span class=\"nc\">Builder</span><span class=\"p\">()</span> <i class=\"conum\" data-value=\"5\"></i><b>(5)</b>\n                    <span class=\"p\">.</span><span class=\"nf\">baseUrl</span><span class=\"p\">(</span><span class=\"nc\">BASE_URL</span><span class=\"p\">)</span> <i class=\"conum\" data-value=\"6\"></i><b>(6)</b>\n                    <span class=\"p\">.</span><span class=\"nf\">addConverterFactory</span><span class=\"p\">(</span><span class=\"nc\">GsonConverterFactory</span><span class=\"p\">.</span><span class=\"nf\">create</span><span class=\"p\">())</span> <i class=\"conum\" data-value=\"7\"></i><b>(7)</b>\n                    <span class=\"p\">.</span><span class=\"nf\">addCallAdapterFactory</span><span class=\"p\">(</span><span class=\"nc\">RxJava3CallAdapterFactory</span><span class=\"p\">.</span><span class=\"nf\">create</span><span class=\"p\">())</span> <i class=\"conum\" data-value=\"8\"></i><b>(8)</b>\n                    <span class=\"p\">.</span><span class=\"nf\">client</span><span class=\"p\">(</span><span class=\"n\">okHttpClient</span><span class=\"p\">)</span> <i class=\"conum\" data-value=\"9\"></i><b>(9)</b>\n                    <span class=\"p\">.</span><span class=\"nf\">build</span><span class=\"p\">()</span>\n            <span class=\"p\">}</span>\n            <span class=\"k\">return</span> <span class=\"n\">retrofit</span>\n        <span class=\"p\">}</span>\n\n    <span class=\"k\">fun</span> <span class=\"nf\">setToken</span><span class=\"p\">(</span><span class=\"n\">token</span><span class=\"p\">:</span> <span class=\"nc\">String</span><span class=\"p\">)</span> <span class=\"p\">{</span> <i class=\"conum\" data-value=\"10\"></i><b>(10)</b>\n        <span class=\"nc\">RetrofitClientInstance</span><span class=\"p\">.</span><span class=\"n\">token</span> <span class=\"p\">=</span> <span class=\"n\">token</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span></code></pre> \n      </div> \n     </div> \n     <div class=\"colist arabic\"> \n      <table> \n       <tr> \n        <td><i class=\"conum\" data-value=\"1\"></i><b>1</b></td> \n        <td><code><a href=\"http://10.0.2.2:8080/\" class=\"bare\">http://10.0.2.2:8080/</a></code> is the URL representing your computer’s <code>localhost</code> address. More info about it can be found <a href=\"https://developer.android.com/studio/run/emulator-networking\">here</a>.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"2\"></i><b>2</b></td> \n        <td>Adds the JWT token as a header of all the API calls you make. Without it, our server would fail all the requests to it with <code>401 Unauthorized</code>.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"3\"></i><b>3</b></td> \n        <td><a href=\"https://square.github.io/okhttp/\">OkHttp</a> is an HTTP client that comes bundled with Retrofit.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"4\"></i><b>4</b></td> \n        <td>Add the <code>headersInterceptor</code> to <code>okHttpClient</code>. The interceptor code block will execute on every API call you make, allowing us to always send our JWT token.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"5\"></i><b>5</b></td> \n        <td>Creates an instance of Retrofit.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"6\"></i><b>6</b></td> \n        <td>Defines the base URL for convenience purposes. Now when you define the endpoints, you can omit the base URL part.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"7\"></i><b>7</b></td> \n        <td>Creates the converter factory for Gson, which allows automatic deserialization of values received from the API.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"8\"></i><b>8</b></td> \n        <td>This line adds RxJava support to Retrofit, allowing you to define the API calls as reactive functions.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"9\"></i><b>9</b></td> \n        <td>Sets the <code>okHttpClient</code> as the HTTP client.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"10\"></i><b>10</b></td> \n        <td>Setter to the JWT token field. Once you log in to the app, you’ll receive the JWT token from the Okta OIDC SDK and use it for every API call.</td> \n       </tr> \n      </table> \n     </div> \n    </div> \n   </div> \n   <div class=\"paragraph\"> \n    <p>In order for you to connect to the Spring Boot app, which is running at the localhost of your machine, from the Android emulator, you need to add the following line in the <code>application</code> tag of your <code>app/src/main/AndroidManifest.xml</code> file:</p> \n   </div> \n   <div class=\"listingblock\"> \n    <div class=\"content\"> \n     <pre class=\"rouge highlight\"><code data-lang=\"xml\"><span class=\"cp\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;</span>\n<span class=\"nt\">&lt;manifest</span> <span class=\"na\">xmlns:android=</span><span class=\"s\">\"http://schemas.android.com/apk/res/android\"</span>\n  <span class=\"na\">package=</span><span class=\"s\">\"dev.dbikic.oktaloginexample\"</span><span class=\"nt\">&gt;</span>\n  ...\n  <span class=\"nt\">&lt;application</span>\n    <span class=\"err\">...</span>\n    <span class=\"na\">android:usesCleartextTraffic=</span><span class=\"s\">\"true\"</span><span class=\"nt\">&gt;</span>\n    ...\n  <span class=\"nt\">&lt;/application&gt;</span>\n<span class=\"nt\">&lt;/manifest&gt;</span></code></pre> \n    </div> \n   </div> \n   <div class=\"paragraph\"> \n    <p>Let’s talk a bit about the API you’ll connect to. The idea of connecting the API from the Spring Boot app is to provide you with endpoints to create, read, update and delete user profiles. A user profile is a relatively simple model, consisting only of a unique id and an email. Create a new package <code>model</code> (just for organizational purposes, the same as the <code>network</code> package), and create two Kotlin files, <code>Profile</code>:</p> \n   </div> \n   <div class=\"exampleblock\"> \n    <div class=\"content\"> \n     <div class=\"listingblock\"> \n      <div class=\"content\"> \n       <pre class=\"rouge highlight\"><code data-lang=\"kotlin\"><span class=\"k\">package</span> <span class=\"nn\">dev.dbikic.oktaloginexample.model</span>\n\n<span class=\"k\">import</span> <span class=\"nn\">com.google.gson.annotations.SerializedName</span>\n\n<span class=\"kd\">data class</span> <span class=\"nc\">Profile</span><span class=\"p\">(</span>\n    <span class=\"nd\">@SerializedName</span><span class=\"p\">(</span><span class=\"s\">\"id\"</span><span class=\"p\">)</span> <i class=\"conum\" data-value=\"1\"></i><b>(1)</b>\n    <span class=\"kd\">val</span> <span class=\"py\">id</span><span class=\"p\">:</span> <span class=\"nc\">String</span><span class=\"p\">,</span>\n    <span class=\"nd\">@SerializedName</span><span class=\"p\">(</span><span class=\"s\">\"email\"</span><span class=\"p\">)</span>\n    <span class=\"kd\">val</span> <span class=\"py\">email</span><span class=\"p\">:</span> <span class=\"nc\">String</span>\n<span class=\"p\">)</span></code></pre> \n      </div> \n     </div> \n     <div class=\"colist arabic\"> \n      <table> \n       <tr> \n        <td><i class=\"conum\" data-value=\"1\"></i><b>1</b></td> \n        <td>The <code>SerializedName</code> annotation from Gson allows you to define the name of a field when it’s serialized/deserialized into/from JSON.</td> \n       </tr> \n      </table> \n     </div> \n    </div> \n   </div> \n   <div class=\"paragraph\"> \n    <p>And <code>ProfileRequest</code>:</p> \n   </div> \n   <div class=\"listingblock\"> \n    <div class=\"content\"> \n     <pre class=\"rouge highlight\"><code data-lang=\"kotlin\"><span class=\"k\">package</span> <span class=\"nn\">dev.dbikic.oktaloginexample.model</span>\n\n<span class=\"k\">import</span> <span class=\"nn\">com.google.gson.annotations.SerializedName</span>\n\n<span class=\"kd\">data class</span> <span class=\"nc\">ProfileRequest</span><span class=\"p\">(</span>\n    <span class=\"nd\">@SerializedName</span><span class=\"p\">(</span><span class=\"s\">\"email\"</span><span class=\"p\">)</span>\n    <span class=\"kd\">val</span> <span class=\"py\">email</span><span class=\"p\">:</span> <span class=\"nc\">String</span>\n<span class=\"p\">)</span></code></pre> \n    </div> \n   </div> \n   <div class=\"paragraph\"> \n    <p>The next step is defining the API of the Spring Boot app. It’s pretty simple to do it with the help of Retrofit; you define endpoints as a function of an interface and configure them using annotations. Create the <code>ProfileService</code> interface in your <code>network</code> package:</p> \n   </div> \n   <div class=\"exampleblock\"> \n    <div class=\"content\"> \n     <div class=\"listingblock\"> \n      <div class=\"content\"> \n       <pre class=\"rouge highlight\"><code data-lang=\"kotlin\"><span class=\"k\">package</span> <span class=\"nn\">dev.dbikic.oktaloginexample.network</span>\n\n<span class=\"k\">import</span> <span class=\"nn\">dev.dbikic.oktaloginexample.model.Profile</span>\n<span class=\"k\">import</span> <span class=\"nn\">dev.dbikic.oktaloginexample.model.ProfileRequest</span>\n<span class=\"k\">import</span> <span class=\"nn\">io.reactivex.rxjava3.core.Completable</span>\n<span class=\"k\">import</span> <span class=\"nn\">io.reactivex.rxjava3.core.Observable</span>\n<span class=\"k\">import</span> <span class=\"nn\">retrofit2.http.*</span>\n\n<span class=\"kd\">interface</span> <span class=\"nc\">ProfileService</span> <span class=\"p\">{</span>\n\n    <span class=\"nd\">@GET</span><span class=\"p\">(</span><span class=\"s\">\"/profiles\"</span><span class=\"p\">)</span> <i class=\"conum\" data-value=\"1\"></i><b>(1)</b>\n    <span class=\"k\">fun</span> <span class=\"nf\">getProfiles</span><span class=\"p\">():</span> <span class=\"nc\">Observable</span><span class=\"p\">&lt;</span><span class=\"nc\">List</span><span class=\"p\">&lt;</span><span class=\"nc\">Profile</span><span class=\"p\">&gt;&gt;</span> <i class=\"conum\" data-value=\"2\"></i><b>(2)</b>\n\n    <span class=\"nd\">@POST</span><span class=\"p\">(</span><span class=\"s\">\"/profiles\"</span><span class=\"p\">)</span> <i class=\"conum\" data-value=\"3\"></i><b>(3)</b>\n    <span class=\"k\">fun</span> <span class=\"nf\">createProfile</span><span class=\"p\">(</span>\n        <span class=\"nd\">@Body</span> <span class=\"n\">profile</span><span class=\"p\">:</span> <span class=\"nc\">ProfileRequest</span> <i class=\"conum\" data-value=\"4\"></i><b>(4)</b>\n    <span class=\"p\">):</span> <span class=\"nc\">Completable</span> <i class=\"conum\" data-value=\"5\"></i><b>(5)</b>\n\n    <span class=\"nd\">@DELETE</span><span class=\"p\">(</span><span class=\"s\">\"/profiles/{profile_id}\"</span><span class=\"p\">)</span> <i class=\"conum\" data-value=\"6\"></i><b>(6)</b>\n    <span class=\"k\">fun</span> <span class=\"nf\">deleteProfile</span><span class=\"p\">(</span>\n        <span class=\"nd\">@Path</span><span class=\"p\">(</span><span class=\"s\">\"profile_id\"</span><span class=\"p\">)</span> <span class=\"n\">profileId</span><span class=\"p\">:</span> <span class=\"nc\">String</span> <i class=\"conum\" data-value=\"7\"></i><b>(7)</b>\n    <span class=\"p\">):</span> <span class=\"nc\">Completable</span>\n\n    <span class=\"nd\">@PUT</span><span class=\"p\">(</span><span class=\"s\">\"/profiles/{profile_id}\"</span><span class=\"p\">)</span> <i class=\"conum\" data-value=\"8\"></i><b>(8)</b>\n    <span class=\"k\">fun</span> <span class=\"nf\">updateProfile</span><span class=\"p\">(</span>\n        <span class=\"nd\">@Path</span><span class=\"p\">(</span><span class=\"s\">\"profile_id\"</span><span class=\"p\">)</span> <span class=\"n\">profileId</span><span class=\"p\">:</span> <span class=\"nc\">String</span><span class=\"p\">,</span>\n        <span class=\"nd\">@Body</span> <span class=\"n\">profile</span><span class=\"p\">:</span> <span class=\"nc\">ProfileRequest</span>\n    <span class=\"p\">):</span> <span class=\"nc\">Observable</span><span class=\"p\">&lt;</span><span class=\"nc\">List</span><span class=\"p\">&lt;</span><span class=\"nc\">Profile</span><span class=\"p\">&gt;&gt;</span>\n<span class=\"p\">}</span></code></pre> \n      </div> \n     </div> \n     <div class=\"colist arabic\"> \n      <table> \n       <tr> \n        <td><i class=\"conum\" data-value=\"1\"></i><b>1</b></td> \n        <td><code>GET</code> annotation defines that this is a GET HTTP request.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"2\"></i><b>2</b></td> \n        <td>The return type is an <code>Observable</code> of a list of profiles. Please ignore what <code>Observable</code> is for now; the next section will explain it.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"3\"></i><b>3</b></td> \n        <td><code>POST</code> annotation defines that this is a POST HTTP request.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"4\"></i><b>4</b></td> \n        <td><code>Body</code> annotation defines the body of the <code>POST</code> request.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"5\"></i><b>5</b></td> \n        <td>The return type is a <code>Completable</code>. Please ignore what <code>Completable</code> is for now; it will be explained in the next section.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"6\"></i><b>6</b></td> \n        <td><code>DELETE</code> annotation defines that this is a DELETE HTTP request.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"7\"></i><b>7</b></td> \n        <td><code>Path</code> annotation defines the path to a specific profile via its <code>profileId</code>.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"8\"></i><b>8</b></td> \n        <td><code>PUT</code> annotation defines that this is a PUT HTTP request.</td> \n       </tr> \n      </table> \n     </div> \n    </div> \n   </div> \n   <div class=\"paragraph\"> \n    <p>That’s it! You’re now ready to start using reactive networking in your app!</p> \n   </div> \n  </div> \n </div> \n</div> \n<div class=\"sect1\"> \n <h2 id=\"use-rxjava-to-access-the-profile-api\">Use RxJava to Access the Profile API</h2> \n <div class=\"sectionbody\"> \n  <div class=\"paragraph\"> \n   <p>Now that the API is defined, you are ready to consume its endpoints.</p> \n  </div> \n  <div class=\"paragraph\"> \n   <p>The reason why RxJava is so useful and popular on Android is that it brings the concepts of the Observer pattern, the Iterator pattern, and functional programming to the platform. But, it has a steep learning curve, and it’s a bit harder for people used to writing procedural code to understand at first.</p> \n  </div> \n  <div class=\"paragraph\"> \n   <p>RxJava introduces the concept of data streams, where different sources of data (like a network API or the local database) are evaluated as data streams that can be observed, combined, or modified, all depending on the use case. This manipulation of data streams is performed by different operators that you get out of the box, which hides the complexity of the logic they do in the background. Once you learn how to use the operators (and how to explore the library to find more of them), complex manipulation of different data sources, which would be super hard and complex to implement on Android using the platform provided async tasks, can be as simple as a few lines of code.</p> \n  </div> \n  <div class=\"paragraph\"> \n   <p>Operators won’t be used or explained in-depth in this post, but if you want to learn more about them, please check the <a href=\"http://reactivex.io/documentation/operators.html\">official docs</a>.</p> \n  </div> \n  <div class=\"paragraph\"> \n   <p>As part of this tutorial, you’ll learn about data streams and how to observe them. There are two basic parts of every data stream: (1) the data source and (2) the data consumer. In RxJava, the basic data source is called <code>Observable</code>. All that an <code>Observable</code> does is emit data in some time interval. If you want to listen to the emitted items, you need to create an <code>Observer</code> and subscribe to the <code>Observable</code> updates.</p> \n  </div> \n  <div class=\"paragraph\"> \n   <p>That’s exactly what you’ll do in this example. You’ve already defined that the Spring Boot API is returning an <code>Observable&lt;List&lt;Profile&gt;&gt;</code> when you fetch the profiles from the API. When you call the <code>getProfiles()</code> function, an <code>Observable&lt;List&lt;Profile&gt;&gt;</code> object type is created and returned.</p> \n  </div> \n  <div class=\"paragraph\"> \n   <p>You will subscribe for the updates, but there won’t be any updates the moment you do the API call. Sometime in the future (or maybe never, as Retrofit has a mechanism to fail an API call if a specified timeout has passed), the API will respond. That response can either be a success or a failure - it doesn’t matter. What matters is that a callback will notify the subscriber, and you can handle either response gracefully.</p> \n  </div> \n  <div class=\"paragraph\"> \n   <p>Let’s see how you’ll add this functionality to the codebase!</p> \n  </div> \n  <div class=\"sect2\"> \n   <h3 id=\"fetch-profiles\">Fetch Profiles</h3> \n   <div class=\"paragraph\"> \n    <p>As described above, the purpose of our API is to provide access to profiles, but only for authenticated users. In the Android app, the user login is handled by the Okta OIDC SDK. Once the user is authorized, he/she is navigated to the <code>HomeActivity</code>. The sign-in process will generate a new JWT token for the user, and he/she can use it to access the API.</p> \n   </div> \n   <div class=\"paragraph\"> \n    <p>First, add a method to expose the JWT token to the <code>OktaManager</code> class:</p> \n   </div> \n   <div class=\"listingblock\"> \n    <div class=\"content\"> \n     <pre class=\"rouge highlight\"><code data-lang=\"kotlin\"><span class=\"o\">..</span><span class=\"p\">.</span>\n<span class=\"k\">fun</span> <span class=\"nf\">getJwtToken</span><span class=\"p\">():</span> <span class=\"nc\">String</span> <span class=\"p\">{</span>\n    <span class=\"k\">return</span> <span class=\"n\">sessionClient</span><span class=\"p\">.</span><span class=\"n\">tokens</span><span class=\"p\">.</span><span class=\"n\">accessToken</span><span class=\"p\">.</span><span class=\"nf\">orEmpty</span><span class=\"p\">()</span>\n<span class=\"p\">}</span></code></pre> \n    </div> \n   </div> \n   <div class=\"paragraph\"> \n    <p>Modify the <code>HomeActivity</code> class (in <code>app/src/main/java/dev/dbikic/oktaloginexample/ui</code>):</p> \n   </div> \n   <div class=\"exampleblock\"> \n    <div class=\"content\"> \n     <div class=\"listingblock\"> \n      <div class=\"content\"> \n       <pre class=\"rouge highlight\"><code data-lang=\"kotlin\"><span class=\"k\">import</span> <span class=\"nn\">dev.dbikic.oktaloginexample.network.ProfileService</span>\n<span class=\"k\">import</span> <span class=\"nn\">dev.dbikic.oktaloginexample.network.RetrofitClientInstance</span>\n<span class=\"k\">import</span> <span class=\"nn\">dev.dbikic.oktaloginexample.network.RetrofitClientInstance.retrofitInstance</span>\n<span class=\"k\">import</span> <span class=\"nn\">io.reactivex.rxjava3.disposables.CompositeDisposable</span>\n<span class=\"o\">..</span><span class=\"p\">.</span>\n<span class=\"kd\">class</span> <span class=\"nc\">HomeActivity</span> <span class=\"p\">:</span> <span class=\"nc\">AppCompatActivity</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n\n    <span class=\"o\">..</span><span class=\"p\">.</span>\n    <span class=\"k\">private</span> <span class=\"kd\">val</span> <span class=\"py\">profileService</span><span class=\"p\">:</span> <span class=\"nc\">ProfileService</span> <span class=\"p\">=</span> <span class=\"n\">retrofitInstance</span><span class=\"p\">.</span><span class=\"nf\">create</span><span class=\"p\">(</span> <i class=\"conum\" data-value=\"1\"></i><b>(1)</b>\n        <span class=\"nc\">ProfileService</span><span class=\"o\">::</span><span class=\"k\">class</span><span class=\"p\">.</span><span class=\"n\">java</span>\n    <span class=\"p\">)</span>\n    <span class=\"k\">private</span> <span class=\"kd\">var</span> <span class=\"py\">compositeDisposable</span> <span class=\"p\">=</span> <span class=\"nc\">CompositeDisposable</span><span class=\"p\">()</span> <i class=\"conum\" data-value=\"2\"></i><b>(2)</b>\n\n    <span class=\"o\">..</span><span class=\"p\">.</span>\n\n    <span class=\"k\">override</span> <span class=\"k\">fun</span> <span class=\"nf\">onStop</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n        <span class=\"n\">compositeDisposable</span><span class=\"p\">.</span><span class=\"nf\">clear</span><span class=\"p\">()</span> <i class=\"conum\" data-value=\"3\"></i><b>(3)</b>\n        <span class=\"k\">super</span><span class=\"p\">.</span><span class=\"nf\">onStop</span><span class=\"p\">()</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"o\">..</span><span class=\"p\">.</span>\n\n    <span class=\"k\">private</span> <span class=\"k\">fun</span> <span class=\"nf\">getUserProfileCallback</span><span class=\"p\">():</span> <span class=\"nc\">RequestCallback</span><span class=\"p\">&lt;</span><span class=\"nc\">UserInfo</span><span class=\"p\">,</span> <span class=\"nc\">AuthorizationException</span><span class=\"p\">&gt;</span> <span class=\"p\">{</span>\n        <span class=\"k\">return</span> <span class=\"kd\">object</span> <span class=\"err\">: </span><span class=\"nc\">RequestCallback</span><span class=\"p\">&lt;</span><span class=\"nc\">UserInfo</span><span class=\"p\">,</span> <span class=\"nc\">AuthorizationException</span><span class=\"p\">&gt;</span> <span class=\"p\">{</span>\n            <span class=\"k\">override</span> <span class=\"k\">fun</span> <span class=\"nf\">onSuccess</span><span class=\"p\">(</span><span class=\"n\">result</span><span class=\"p\">:</span> <span class=\"nc\">UserInfo</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n                <span class=\"n\">binding</span><span class=\"p\">.</span><span class=\"n\">userLabel</span><span class=\"p\">.</span><span class=\"n\">text</span> <span class=\"p\">=</span> <span class=\"s\">\"Hello, ${result[\"</span><span class=\"n\">preferred_username</span><span class=\"s\">\"]}!\"</span>\n                <span class=\"nc\">RetrofitClientInstance</span><span class=\"p\">.</span><span class=\"nf\">setToken</span><span class=\"p\">(</span><span class=\"n\">oktaManager</span><span class=\"p\">.</span><span class=\"nf\">getJwtToken</span><span class=\"p\">())</span> <i class=\"conum\" data-value=\"4\"></i><b>(4)</b>\n                <span class=\"nf\">fetchProfiles</span><span class=\"p\">()</span>\n            <span class=\"p\">}</span>\n\n            <span class=\"k\">override</span> <span class=\"k\">fun</span> <span class=\"nf\">onError</span><span class=\"p\">(</span><span class=\"n\">msg</span><span class=\"p\">:</span> <span class=\"nc\">String</span><span class=\"p\">?,</span> <span class=\"n\">exception</span><span class=\"p\">:</span> <span class=\"nc\">AuthorizationException</span><span class=\"p\">?)</span> <span class=\"p\">{</span>\n                <span class=\"nc\">Log</span><span class=\"p\">.</span><span class=\"nf\">d</span><span class=\"p\">(</span><span class=\"s\">\"HomeActivity\"</span><span class=\"p\">,</span> <span class=\"s\">\"Error: $msg\"</span><span class=\"p\">)</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"k\">fun</span> <span class=\"nf\">fetchProfiles</span><span class=\"p\">()</span> <span class=\"p\">{</span> <i class=\"conum\" data-value=\"5\"></i><b>(5)</b>\n\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span></code></pre> \n      </div> \n     </div> \n     <div class=\"colist arabic\"> \n      <table> \n       <tr> \n        <td><i class=\"conum\" data-value=\"1\"></i><b>1</b></td> \n        <td>Create an instance of the <code>ProfileService</code>. Interacting with it will allow you to access the API.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"2\"></i><b>2</b></td> \n        <td><code>CompositeDisposable</code> is a class that provides you a simple way of canceling your reactive data streams.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"3\"></i><b>3</b></td> \n        <td>You want to stop listening for the data stream updates once this activity is destroyed.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"4\"></i><b>4</b></td> \n        <td>Here, you’re setting the JWT token from the logged-in user in your <code>RetrofitClientInstance</code>, with the help of the Okta OIDC SDK and the <code>OktaManager</code> class.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"5\"></i><b>5</b></td> \n        <td>Once the user is logged in, you want to fetch all the profiles from the API. You’ll implement this method in the next step.</td> \n       </tr> \n      </table> \n     </div> \n    </div> \n   </div> \n   <div class=\"paragraph\"> \n    <p>Fetching profiles is done by creating a new <code>Observer</code>, which will observe all the changes from the <code>getProfiles()</code> data stream. Add the <code>fetchProfiles()</code> method to the end of <code>HomeActivity</code>:</p> \n   </div> \n   <div class=\"exampleblock\"> \n    <div class=\"content\"> \n     <div class=\"listingblock\"> \n      <div class=\"content\"> \n       <pre class=\"rouge highlight\"><code data-lang=\"kotlin\"><span class=\"o\">..</span><span class=\"p\">.</span>\n<span class=\"k\">private</span> <span class=\"k\">fun</span> <span class=\"nf\">fetchProfiles</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n    <span class=\"n\">compositeDisposable</span><span class=\"p\">.</span><span class=\"nf\">add</span><span class=\"p\">(</span> <i class=\"conum\" data-value=\"1\"></i><b>(1)</b>\n        <span class=\"n\">profileService</span><span class=\"p\">.</span><span class=\"nf\">getProfiles</span><span class=\"p\">()</span> <i class=\"conum\" data-value=\"2\"></i><b>(2)</b>\n            <span class=\"p\">.</span><span class=\"nf\">subscribeOn</span><span class=\"p\">(</span><span class=\"nc\">Schedulers</span><span class=\"p\">.</span><span class=\"nf\">io</span><span class=\"p\">())</span> <i class=\"conum\" data-value=\"3\"></i><b>(3)</b>\n            <span class=\"p\">.</span><span class=\"nf\">observeOn</span><span class=\"p\">(</span><span class=\"nc\">AndroidSchedulers</span><span class=\"p\">.</span><span class=\"nf\">mainThread</span><span class=\"p\">())</span> <i class=\"conum\" data-value=\"4\"></i><b>(4)</b>\n            <span class=\"p\">.</span><span class=\"nf\">subscribe</span><span class=\"p\">(</span> <i class=\"conum\" data-value=\"5\"></i><b>(5)</b>\n                <span class=\"p\">{</span> <span class=\"n\">profiles</span> <span class=\"p\">-&gt;</span> <i class=\"conum\" data-value=\"6\"></i><b>(6)</b>\n                    <span class=\"nf\">displayProfiles</span><span class=\"p\">(</span><span class=\"n\">profiles</span><span class=\"p\">)</span> <i class=\"conum\" data-value=\"7\"></i><b>(7)</b>\n                <span class=\"p\">},</span>\n                <span class=\"p\">{</span> <span class=\"n\">throwable</span> <span class=\"p\">-&gt;</span> <i class=\"conum\" data-value=\"8\"></i><b>(8)</b>\n                    <span class=\"nc\">Log</span><span class=\"p\">.</span><span class=\"nf\">e</span><span class=\"p\">(</span><span class=\"s\">\"HomeActivity\"</span><span class=\"p\">,</span> <span class=\"n\">throwable</span><span class=\"p\">.</span><span class=\"n\">message</span> <span class=\"o\">?:</span> <span class=\"s\">\"onError\"</span><span class=\"p\">)</span>\n                <span class=\"p\">}</span>\n            <span class=\"p\">)</span>\n    <span class=\"p\">)</span>\n<span class=\"p\">}</span></code></pre> \n      </div> \n     </div> \n     <div class=\"colist arabic\"> \n      <table> \n       <tr> \n        <td><i class=\"conum\" data-value=\"1\"></i><b>1</b></td> \n        <td>You are adding the result of the subscription, which is a class that implements the interface <code>Disposable</code> to our list of subscriptions, so you can cancel it once the current activity gets destroyed.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"2\"></i><b>2</b></td> \n        <td>Fetch the profiles from the API; this returns <code>Observable&lt;List&lt;Profile&gt;&gt;</code>.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"3\"></i><b>3</b></td> \n        <td>This defines that the actual subscription is done on the <code>I/O</code> thread, which is the one used for networking.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"4\"></i><b>4</b></td> \n        <td>Observe the result of the subscription on the main thread. This is also called the UI thread because that’s the only thread that can modify the UI. More info about this can be found <a href=\"https://developer.android.com/guide/components/processes-and-threads#Threads\">here</a>.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"5\"></i><b>5</b></td> \n        <td>The <code>Observer</code> object is created here. It consists of two consumers, which are just callbacks, for the <code>onNext</code> and <code>onError</code> events.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"6\"></i><b>6</b></td> \n        <td>The <code>onNext</code> consumers. Here you’ll receive the list of profiles in the UI thread, ready to be displayed to the user.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"7\"></i><b>7</b></td> \n        <td>Update the UI with the received profiles. This will be implemented in the next section.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"8\"></i><b>8</b></td> \n        <td>The <code>onError</code> consumer. This will be invoked when you receive an error from the API, or you mess things up with the deserialization.</td> \n       </tr> \n      </table> \n     </div> \n    </div> \n   </div> \n   <div class=\"admonitionblock tip\"> \n    <table> \n     <tr> \n      <td class=\"icon\"> <i class=\"fa icon-tip\" title=\"Tip\"></i> </td> \n      <td class=\"content\"> You will have to add imports manually by clicking the red text and pressing the key combination <code>Option + Enter</code> on MacOS or <code>Alt + Enter</code> on Windows. This step may be required when pasting the code. You can also enable the \"Add unambiguous imports on the fly\" option (<code>Preferences | Editor | Auto Import</code>) to add imports automatically in Android Studio. </td> \n     </tr> \n    </table> \n   </div> \n  </div> \n  <div class=\"sect2\"> \n   <h3 id=\"create-profiles\">Create Profiles</h3> \n   <div class=\"paragraph\"> \n    <p>Let’s move on to creating a profile. The idea here is to create a new profile with a button click. For simplicity, you won’t implement email validation; you’ll just send the current timestamp as the profile’s email. Add the <code>createProfile()</code> method to the bottom of <code>HomeActivity</code>:</p> \n   </div> \n   <div class=\"exampleblock\"> \n    <div class=\"content\"> \n     <div class=\"listingblock\"> \n      <div class=\"content\"> \n       <pre class=\"rouge highlight\"><code data-lang=\"kotlin\"><span class=\"o\">..</span><span class=\"p\">.</span>\n<span class=\"k\">private</span> <span class=\"k\">fun</span> <span class=\"nf\">createProfile</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n    <span class=\"kd\">val</span> <span class=\"py\">profile</span> <span class=\"p\">=</span> <span class=\"nc\">ProfileRequest</span><span class=\"p\">(</span><span class=\"n\">email</span> <span class=\"p\">=</span> <span class=\"nc\">System</span><span class=\"p\">.</span><span class=\"nf\">currentTimeMillis</span><span class=\"p\">().</span><span class=\"nf\">toString</span><span class=\"p\">())</span> <i class=\"conum\" data-value=\"1\"></i><b>(1)</b>\n    <span class=\"n\">compositeDisposable</span><span class=\"p\">.</span><span class=\"nf\">add</span><span class=\"p\">(</span>\n        <span class=\"n\">profileService</span><span class=\"p\">.</span><span class=\"nf\">createProfile</span><span class=\"p\">(</span><span class=\"n\">profile</span><span class=\"p\">)</span> <i class=\"conum\" data-value=\"2\"></i><b>(2)</b>\n            <span class=\"p\">.</span><span class=\"nf\">andThen</span><span class=\"p\">(</span><span class=\"n\">profileService</span><span class=\"p\">.</span><span class=\"nf\">getProfiles</span><span class=\"p\">())</span> <i class=\"conum\" data-value=\"3\"></i><b>(3)</b>\n            <span class=\"p\">.</span><span class=\"nf\">subscribeOn</span><span class=\"p\">(</span><span class=\"nc\">Schedulers</span><span class=\"p\">.</span><span class=\"nf\">io</span><span class=\"p\">())</span>\n            <span class=\"p\">.</span><span class=\"nf\">observeOn</span><span class=\"p\">(</span><span class=\"nc\">AndroidSchedulers</span><span class=\"p\">.</span><span class=\"nf\">mainThread</span><span class=\"p\">())</span>\n            <span class=\"p\">.</span><span class=\"nf\">subscribe</span><span class=\"p\">(</span>\n                <span class=\"p\">{</span> <span class=\"n\">profiles</span> <span class=\"p\">-&gt;</span>\n                    <span class=\"nf\">displayProfiles</span><span class=\"p\">(</span><span class=\"n\">profiles</span><span class=\"p\">)</span> <i class=\"conum\" data-value=\"4\"></i><b>(4)</b>\n                <span class=\"p\">},</span>\n                <span class=\"p\">{</span> <span class=\"n\">throwable</span> <span class=\"p\">-&gt;</span>\n                    <span class=\"nc\">Log</span><span class=\"p\">.</span><span class=\"nf\">e</span><span class=\"p\">(</span><span class=\"s\">\"HomeActivity\"</span><span class=\"p\">,</span> <span class=\"n\">throwable</span><span class=\"p\">.</span><span class=\"n\">message</span> <span class=\"o\">?:</span> <span class=\"s\">\"onError\"</span><span class=\"p\">)</span>\n                <span class=\"p\">}</span>\n            <span class=\"p\">)</span>\n    <span class=\"p\">)</span>\n<span class=\"p\">}</span></code></pre> \n      </div> \n     </div> \n     <div class=\"colist arabic\"> \n      <table> \n       <tr> \n        <td><i class=\"conum\" data-value=\"1\"></i><b>1</b></td> \n        <td>Create a new profile.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"2\"></i><b>2</b></td> \n        <td>Send the new profile to the API. This method doesn’t return an <code>Observable</code>, but it returns a <code>Completable</code>. The difference between the two is explained below this code snippet.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"3\"></i><b>3</b></td> \n        <td>Once the profile is created on the API, request all the profiles from the API.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"4\"></i><b>4</b></td> \n        <td>Display the new list of profiles, including the one you just created. You will implement this method in the next section of this blog post.</td> \n       </tr> \n      </table> \n     </div> \n    </div> \n   </div> \n   <div class=\"paragraph\"> \n    <p>In the example above, you used <code>Completable</code>. It’s a type of observable that has only two consumers, <code>onComplete</code> and <code>onError</code>, as opposed to <code>Observable</code> which has three consumers (<code>onNext</code>, <code>onError</code> and <code>onComplete</code>).</p> \n   </div> \n   <div class=\"paragraph\"> \n    <p>You can look at <code>Completable</code> as a data stream for which you don’t care about the possible events that can be emitted. You don’t even care if multiple events are being emitted in a time interval. You only care if at least one item has been emitted or if the data stream has failed. This is different from <code>Observable</code>; in <code>Observable</code>, you do care about all the events that have been emitted in a time interval, hence the naming of the method in which you receive the result, <code>onNext</code>. This indicates that the transmission of the data isn’t over, but rather that a new item has been emitted.</p> \n   </div> \n   <div class=\"paragraph\"> \n    <p>With <code>Completable</code>, you simply want to know when an operation is done. Here is a simple example. You created a profile and you submitted it to the API. You already know what that profile is, and you just want to know when it’s created on the API, so you can fetch the most recent profiles list and display it on the UI.</p> \n   </div> \n  </div> \n  <div class=\"sect2\"> \n   <h3 id=\"delete-a-profile\">Delete a Profile</h3> \n   <div class=\"paragraph\"> \n    <p>Code for deleting is practically the same as the one for creating the profile. The only difference is the API call that is being made. The rest of the logic is the same, once the <code>deleteProfile()</code> completes, fetch the profiles and display them on the UI. Add the <code>deleteProfiles()</code> method:</p> \n   </div> \n   <div class=\"exampleblock\"> \n    <div class=\"content\"> \n     <div class=\"listingblock\"> \n      <div class=\"content\"> \n       <pre class=\"rouge highlight\"><code data-lang=\"kotlin\"><span class=\"o\">..</span><span class=\"p\">.</span>\n<span class=\"k\">private</span> <span class=\"k\">fun</span> <span class=\"nf\">deleteProfile</span><span class=\"p\">(</span><span class=\"n\">profile</span><span class=\"p\">:</span> <span class=\"nc\">Profile</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"n\">compositeDisposable</span><span class=\"p\">.</span><span class=\"nf\">add</span><span class=\"p\">(</span>\n        <span class=\"n\">profileService</span><span class=\"p\">.</span><span class=\"nf\">deleteProfile</span><span class=\"p\">(</span><span class=\"n\">profile</span><span class=\"p\">.</span><span class=\"n\">id</span><span class=\"p\">)</span> <i class=\"conum\" data-value=\"1\"></i><b>(1)</b>\n            <span class=\"p\">.</span><span class=\"nf\">andThen</span><span class=\"p\">(</span><span class=\"n\">profileService</span><span class=\"p\">.</span><span class=\"nf\">getProfiles</span><span class=\"p\">())</span>\n            <span class=\"p\">.</span><span class=\"nf\">subscribeOn</span><span class=\"p\">(</span><span class=\"nc\">Schedulers</span><span class=\"p\">.</span><span class=\"nf\">io</span><span class=\"p\">())</span>\n            <span class=\"p\">.</span><span class=\"nf\">observeOn</span><span class=\"p\">(</span><span class=\"nc\">AndroidSchedulers</span><span class=\"p\">.</span><span class=\"nf\">mainThread</span><span class=\"p\">())</span>\n            <span class=\"p\">.</span><span class=\"nf\">subscribe</span><span class=\"p\">(</span>\n                <span class=\"p\">{</span> <span class=\"n\">profiles</span> <span class=\"p\">-&gt;</span>\n                    <span class=\"nf\">displayProfiles</span><span class=\"p\">(</span><span class=\"n\">profiles</span><span class=\"p\">)</span>\n                <span class=\"p\">},</span>\n                <span class=\"p\">{</span> <span class=\"n\">throwable</span> <span class=\"p\">-&gt;</span>\n                    <span class=\"nc\">Log</span><span class=\"p\">.</span><span class=\"nf\">e</span><span class=\"p\">(</span><span class=\"s\">\"HomeActivity\"</span><span class=\"p\">,</span> <span class=\"n\">throwable</span><span class=\"p\">.</span><span class=\"n\">message</span> <span class=\"o\">?:</span> <span class=\"s\">\"onError\"</span><span class=\"p\">)</span>\n                <span class=\"p\">}</span>\n            <span class=\"p\">)</span>\n    <span class=\"p\">)</span>\n<span class=\"p\">}</span></code></pre> \n      </div> \n     </div> \n     <div class=\"colist arabic\"> \n      <table> \n       <tr> \n        <td><i class=\"conum\" data-value=\"1\"></i><b>1</b></td> \n        <td>Send the id of the profile you want to delete to the method that does the delete API call.</td> \n       </tr> \n      </table> \n     </div> \n    </div> \n   </div> \n  </div> \n  <div class=\"sect2\"> \n   <h3 id=\"update-a-profile\">Update a Profile</h3> \n   <div class=\"paragraph\"> \n    <p>Updating profiles is similar to creating a profile; you’ll create a new profile and do the update API call with the id of the profile you want to update. Add the <code>updateProfile()</code> method like this:</p> \n   </div> \n   <div class=\"exampleblock\"> \n    <div class=\"content\"> \n     <div class=\"listingblock\"> \n      <div class=\"content\"> \n       <pre class=\"rouge highlight\"><code data-lang=\"kotlin\"><span class=\"o\">..</span><span class=\"p\">.</span>\n<span class=\"k\">private</span> <span class=\"k\">fun</span> <span class=\"nf\">updateProfile</span><span class=\"p\">(</span><span class=\"n\">oldProfile</span><span class=\"p\">:</span> <span class=\"nc\">Profile</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"kd\">val</span> <span class=\"py\">profile</span> <span class=\"p\">=</span> <span class=\"nc\">ProfileRequest</span><span class=\"p\">(</span><span class=\"n\">email</span> <span class=\"p\">=</span> <span class=\"nc\">System</span><span class=\"p\">.</span><span class=\"nf\">currentTimeMillis</span><span class=\"p\">().</span><span class=\"nf\">toString</span><span class=\"p\">())</span>\n    <span class=\"n\">compositeDisposable</span><span class=\"p\">.</span><span class=\"nf\">add</span><span class=\"p\">(</span>\n        <span class=\"n\">profileService</span><span class=\"p\">.</span><span class=\"nf\">updateProfile</span><span class=\"p\">(</span><span class=\"n\">oldProfile</span><span class=\"p\">.</span><span class=\"n\">id</span><span class=\"p\">,</span> <span class=\"n\">profile</span><span class=\"p\">)</span> <i class=\"conum\" data-value=\"1\"></i><b>(1)</b>\n            <span class=\"p\">.</span><span class=\"nf\">subscribeOn</span><span class=\"p\">(</span><span class=\"nc\">Schedulers</span><span class=\"p\">.</span><span class=\"nf\">io</span><span class=\"p\">())</span>\n            <span class=\"p\">.</span><span class=\"nf\">observeOn</span><span class=\"p\">(</span><span class=\"nc\">AndroidSchedulers</span><span class=\"p\">.</span><span class=\"nf\">mainThread</span><span class=\"p\">())</span>\n            <span class=\"p\">.</span><span class=\"nf\">subscribe</span><span class=\"p\">(</span>\n                <span class=\"p\">{</span> <span class=\"n\">newProfiles</span> <span class=\"p\">-&gt;</span>\n                    <span class=\"nf\">displayUpdatedProfile</span><span class=\"p\">(</span><span class=\"n\">oldProfile</span><span class=\"p\">,</span> <span class=\"n\">newProfiles</span><span class=\"p\">.</span><span class=\"nf\">first</span><span class=\"p\">())</span> <i class=\"conum\" data-value=\"2\"></i><b>(2)</b>\n                <span class=\"p\">},</span>\n                <span class=\"p\">{</span> <span class=\"n\">throwable</span> <span class=\"p\">-&gt;</span>\n                    <span class=\"nc\">Log</span><span class=\"p\">.</span><span class=\"nf\">e</span><span class=\"p\">(</span><span class=\"s\">\"HomeActivity\"</span><span class=\"p\">,</span> <span class=\"n\">throwable</span><span class=\"p\">.</span><span class=\"n\">message</span> <span class=\"o\">?:</span> <span class=\"s\">\"onError\"</span><span class=\"p\">)</span>\n                <span class=\"p\">}</span>\n            <span class=\"p\">)</span>\n    <span class=\"p\">)</span>\n<span class=\"p\">}</span></code></pre> \n      </div> \n     </div> \n     <div class=\"colist arabic\"> \n      <table> \n       <tr> \n        <td><i class=\"conum\" data-value=\"1\"></i><b>1</b></td> \n        <td>Sends the newly created profile to the method that updates the profile on the API, along with the old profile’s id.</td> \n       </tr> \n       <tr> \n        <td><i class=\"conum\" data-value=\"2\"></i><b>2</b></td> \n        <td>Don’t worry about this method, you’ll implement it in the next section.</td> \n       </tr> \n      </table> \n     </div> \n    </div> \n   </div> \n   <div class=\"paragraph\"> \n    <p>And that’s it! You’ve implemented all the logic and now it’s time to add a simple UI.</p> \n   </div> \n  </div> \n </div> \n</div> \n<div class=\"sect1\"> \n <h2 id=\"set-up-the-android-ui\">Set Up the Android UI</h2> \n <div class=\"sectionbody\"> \n  <div class=\"paragraph\"> \n   <p>In order for you to display the list of profiles, the UI of the <code>HomeActivity</code> will be changed a bit. Please replace the contents of the <code>activity_home</code> file (found in <code>app/src/main/res/layout</code>) with the following code:</p> \n  </div> \n  <div class=\"exampleblock\"> \n   <div class=\"content\"> \n    <div class=\"listingblock\"> \n     <div class=\"content\"> \n      <pre class=\"rouge highlight\"><code data-lang=\"xml\"><span class=\"cp\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;</span>\n<span class=\"nt\">&lt;LinearLayout</span> <span class=\"na\">xmlns:android=</span><span class=\"s\">\"http://schemas.android.com/apk/res/android\"</span>\n  <span class=\"na\">xmlns:app=</span><span class=\"s\">\"http://schemas.android.com/apk/res-auto\"</span>\n  <span class=\"na\">xmlns:tools=</span><span class=\"s\">\"http://schemas.android.com/tools\"</span>\n  <span class=\"na\">android:layout_width=</span><span class=\"s\">\"match_parent\"</span>\n  <span class=\"na\">android:layout_height=</span><span class=\"s\">\"match_parent\"</span>\n  <span class=\"na\">android:orientation=</span><span class=\"s\">\"vertical\"</span>\n  <span class=\"na\">tools:context=</span><span class=\"s\">\".HomeActivity\"</span><span class=\"nt\">&gt;</span>\n\n  <span class=\"nt\">&lt;TextView</span>\n    <span class=\"na\">android:id=</span><span class=\"s\">\"@+id/userLabel\"</span>\n    <span class=\"na\">android:layout_width=</span><span class=\"s\">\"match_parent\"</span>\n    <span class=\"na\">android:layout_height=</span><span class=\"s\">\"54dp\"</span>\n    <span class=\"na\">android:layout_weight=</span><span class=\"s\">\"0\"</span>\n    <span class=\"na\">android:layout_marginTop=</span><span class=\"s\">\"16dp\"</span>\n    <span class=\"na\">android:gravity=</span><span class=\"s\">\"center\"</span>\n    <span class=\"na\">android:textSize=</span><span class=\"s\">\"22sp\"</span>\n    <span class=\"na\">tools:ignore=</span><span class=\"s\">\"HardcodedText\"</span>\n    <span class=\"na\">tools:text=</span><span class=\"s\">\"Hello, user!\"</span> <span class=\"nt\">/&gt;</span>\n\n  <span class=\"nt\">&lt;androidx.recyclerview.widget.RecyclerView</span>\n    <span class=\"na\">android:id=</span><span class=\"s\">\"@+id/profilesRecyclerView\"</span> <i class=\"conum\" data-value=\"1\"></i><b>(1)</b>\n    <span class=\"na\">android:layout_width=</span><span class=\"s\">\"match_parent\"</span>\n    <span class=\"na\">android:layout_height=</span><span class=\"s\">\"0dp\"</span>\n    <span class=\"na\">android:layout_weight=</span><span class=\"s\">\"1\"</span>\n    <span class=\"na\">app:layoutManager=</span><span class=\"s\">\"androidx.recyclerview.widget.LinearLayoutManager\"</span>\n    <span class=\"na\">tools:itemCount=</span><span class=\"s\">\"4\"</span>\n    <span class=\"na\">tools:listitem=</span><span class=\"s\">\"@layout/item_profile\"</span> <span class=\"nt\">/&gt;</span>\n\n  <span class=\"nt\">&lt;LinearLayout</span>\n    <span class=\"na\">android:layout_width=</span><span class=\"s\">\"match_parent\"</span>\n    <span class=\"na\">android:layout_height=</span><span class=\"s\">\"wrap_content\"</span>\n    <span class=\"na\">android:paddingBottom=</span><span class=\"s\">\"16dp\"</span>\n    <span class=\"na\">android:paddingTop=</span><span class=\"s\">\"16dp\"</span>\n    <span class=\"na\">android:orientation=</span><span class=\"s\">\"horizontal\"</span><span class=\"nt\">&gt;</span>\n\n    <span class=\"nt\">&lt;com.google.android.material.button.MaterialButton</span>\n      <span class=\"na\">android:id=</span><span class=\"s\">\"@+id/createProfileButton\"</span> <i class=\"conum\" data-value=\"2\"></i><b>(2)</b>\n      <span class=\"na\">android:layout_width=</span><span class=\"s\">\"0dp\"</span>\n      <span class=\"na\">android:layout_height=</span><span class=\"s\">\"wrap_content\"</span>\n      <span class=\"na\">android:layout_weight=</span><span class=\"s\">\"1\"</span>\n      <span class=\"na\">android:layout_marginStart=</span><span class=\"s\">\"32dp\"</span>\n      <span class=\"na\">android:layout_marginEnd=</span><span class=\"s\">\"16dp\"</span>\n      <span class=\"na\">android:text=</span><span class=\"s\">\"Create profile\"</span>\n      <span class=\"na\">tools:ignore=</span><span class=\"s\">\"HardcodedText\"</span> <span class=\"nt\">/&gt;</span>\n\n    <span class=\"nt\">&lt;com.google.android.material.button.MaterialButton</span>\n      <span class=\"na\">android:id=</span><span class=\"s\">\"@+id/signOutButton\"</span> <i class=\"conum\" data-value=\"3\"></i><b>(3)</b>\n      <span class=\"na\">android:layout_width=</span><span class=\"s\">\"0dp\"</span>\n      <span class=\"na\">android:layout_height=</span><span class=\"s\">\"wrap_content\"</span>\n      <span class=\"na\">android:layout_weight=</span><span class=\"s\">\"1\"</span>\n      <span class=\"na\">android:layout_marginStart=</span><span class=\"s\">\"16dp\"</span>\n      <span class=\"na\">android:layout_marginEnd=</span><span class=\"s\">\"32dp\"</span>\n      <span class=\"na\">android:text=</span><span class=\"s\">\"Log out\"</span>\n      <span class=\"na\">tools:ignore=</span><span class=\"s\">\"HardcodedText\"</span> <span class=\"nt\">/&gt;</span>\n\n  <span class=\"nt\">&lt;/LinearLayout&gt;</span>\n<span class=\"nt\">&lt;/LinearLayout&gt;</span></code></pre> \n     </div> \n    </div> \n    <div class=\"colist arabic\"> \n     <table> \n      <tr> \n       <td><i class=\"conum\" data-value=\"1\"></i><b>1</b></td> \n       <td>This is the recycler view, which will display the profiles.</td> \n      </tr> \n      <tr> \n       <td><i class=\"conum\" data-value=\"2\"></i><b>2</b></td> \n       <td>This is the create profile button.</td> \n      </tr> \n      <tr> \n       <td><i class=\"conum\" data-value=\"3\"></i><b>3</b></td> \n       <td>This is the sign-out button that ends the user’s session.</td> \n      </tr> \n     </table> \n    </div> \n   </div> \n  </div> \n  <div class=\"paragraph\"> \n   <p>Next, create a new layout file that represents a single profile in the list. Call it <code>item_profile.xml</code>:</p> \n  </div> \n  <div class=\"exampleblock\"> \n   <div class=\"content\"> \n    <div class=\"listingblock\"> \n     <div class=\"content\"> \n      <pre class=\"rouge highlight\"><code data-lang=\"xml\"><span class=\"cp\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;</span>\n<span class=\"nt\">&lt;LinearLayout</span> <span class=\"na\">xmlns:android=</span><span class=\"s\">\"http://schemas.android.com/apk/res/android\"</span>\n  <span class=\"na\">xmlns:tools=</span><span class=\"s\">\"http://schemas.android.com/tools\"</span>\n  <span class=\"na\">android:layout_width=</span><span class=\"s\">\"match_parent\"</span>\n  <span class=\"na\">android:layout_height=</span><span class=\"s\">\"72dp\"</span>\n  <span class=\"na\">android:orientation=</span><span class=\"s\">\"horizontal\"</span>\n  <span class=\"na\">tools:context=</span><span class=\"s\">\".HomeActivity\"</span><span class=\"nt\">&gt;</span>\n\n  <span class=\"nt\">&lt;TextView</span>\n    <span class=\"na\">android:id=</span><span class=\"s\">\"@+id/profileNameLabel\"</span>\n    <span class=\"na\">android:layout_width=</span><span class=\"s\">\"0dp\"</span>\n    <span class=\"na\">android:layout_height=</span><span class=\"s\">\"wrap_content\"</span>\n    <span class=\"na\">android:layout_weight=</span><span class=\"s\">\"1\"</span>\n    <span class=\"na\">android:layout_marginStart=</span><span class=\"s\">\"16dp\"</span>\n    <span class=\"na\">android:layout_gravity=</span><span class=\"s\">\"center\"</span>\n    <span class=\"na\">android:textSize=</span><span class=\"s\">\"18sp\"</span>\n    <span class=\"na\">tools:ignore=</span><span class=\"s\">\"HardcodedText\"</span>\n    <span class=\"na\">tools:text=</span><span class=\"s\">\"Test username\"</span> <span class=\"nt\">/&gt;</span>\n\n  <span class=\"nt\">&lt;com.google.android.material.button.MaterialButton</span>\n    <span class=\"na\">android:id=</span><span class=\"s\">\"@+id/updateProfileButton\"</span> <i class=\"conum\" data-value=\"1\"></i><b>(1)</b>\n    <span class=\"na\">android:layout_width=</span><span class=\"s\">\"wrap_content\"</span>\n    <span class=\"na\">android:layout_height=</span><span class=\"s\">\"wrap_content\"</span>\n    <span class=\"na\">android:layout_marginEnd=</span><span class=\"s\">\"8dp\"</span>\n    <span class=\"na\">android:layout_gravity=</span><span class=\"s\">\"center\"</span>\n    <span class=\"na\">android:text=</span><span class=\"s\">\"Update\"</span>\n    <span class=\"na\">tools:ignore=</span><span class=\"s\">\"HardcodedText\"</span> <span class=\"nt\">/&gt;</span>\n\n  <span class=\"nt\">&lt;com.google.android.material.button.MaterialButton</span>\n    <span class=\"na\">android:id=</span><span class=\"s\">\"@+id/deleteProfileButton\"</span> <i class=\"conum\" data-value=\"2\"></i><b>(2)</b>\n    <span class=\"na\">android:layout_width=</span><span class=\"s\">\"wrap_content\"</span>\n    <span class=\"na\">android:layout_height=</span><span class=\"s\">\"wrap_content\"</span>\n    <span class=\"na\">android:layout_marginEnd=</span><span class=\"s\">\"8dp\"</span>\n    <span class=\"na\">android:layout_gravity=</span><span class=\"s\">\"center\"</span>\n    <span class=\"na\">android:text=</span><span class=\"s\">\"Delete\"</span>\n    <span class=\"na\">tools:ignore=</span><span class=\"s\">\"HardcodedText\"</span> <span class=\"nt\">/&gt;</span>\n<span class=\"nt\">&lt;/LinearLayout&gt;</span></code></pre> \n     </div> \n    </div> \n    <div class=\"colist arabic\"> \n     <table> \n      <tr> \n       <td><i class=\"conum\" data-value=\"1\"></i><b>1</b></td> \n       <td>Button that updates the email of the profile.</td> \n      </tr> \n      <tr> \n       <td><i class=\"conum\" data-value=\"2\"></i><b>2</b></td> \n       <td>Button that deletes the profile.</td> \n      </tr> \n     </table> \n    </div> \n   </div> \n  </div> \n  <div class=\"paragraph\"> \n   <p>Now you need to create an adapter that will display the list of profiles on the UI. Call it <code>ProfilesAdapter</code>:</p> \n  </div> \n  <div class=\"listingblock\"> \n   <div class=\"content\"> \n    <pre class=\"rouge highlight\"><code data-lang=\"kotlin\"><span class=\"k\">package</span> <span class=\"nn\">dev.dbikic.oktaloginexample</span>\n\n<span class=\"k\">import</span> <span class=\"nn\">android.view.LayoutInflater</span>\n<span class=\"k\">import</span> <span class=\"nn\">android.view.View</span>\n<span class=\"k\">import</span> <span class=\"nn\">android.view.ViewGroup</span>\n<span class=\"k\">import</span> <span class=\"nn\">android.widget.TextView</span>\n<span class=\"k\">import</span> <span class=\"nn\">androidx.recyclerview.widget.RecyclerView</span>\n<span class=\"k\">import</span> <span class=\"nn\">dev.dbikic.oktaloginexample.model.Profile</span>\n\n<span class=\"kd\">class</span> <span class=\"nc\">ProfilesAdapter</span><span class=\"p\">(</span>\n    <span class=\"k\">private</span> <span class=\"kd\">val</span> <span class=\"py\">onDeleteClickListener</span><span class=\"p\">:</span> <span class=\"p\">(</span><span class=\"nc\">Profile</span><span class=\"p\">)</span> <span class=\"p\">-&gt;</span> <span class=\"nc\">Unit</span><span class=\"p\">,</span>\n    <span class=\"k\">private</span> <span class=\"kd\">val</span> <span class=\"py\">onUpdateClickListener</span><span class=\"p\">:</span> <span class=\"p\">(</span><span class=\"nc\">Profile</span><span class=\"p\">)</span> <span class=\"p\">-&gt;</span> <span class=\"nc\">Unit</span>\n<span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"nc\">RecyclerView</span><span class=\"p\">.</span><span class=\"nc\">Adapter</span><span class=\"p\">&lt;</span><span class=\"nc\">ProfilesAdapter</span><span class=\"err\">.</span><span class=\"nc\">ViewHolder</span><span class=\"p\">&gt;()</span> <span class=\"p\">{</span>\n\n    <span class=\"kd\">val</span> <span class=\"py\">items</span> <span class=\"p\">=</span> <span class=\"n\">mutableListOf</span><span class=\"p\">&lt;</span><span class=\"nc\">Profile</span><span class=\"p\">&gt;()</span>\n\n    <span class=\"kd\">class</span> <span class=\"nc\">ViewHolder</span><span class=\"p\">(</span><span class=\"n\">view</span><span class=\"p\">:</span> <span class=\"nc\">View</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"nc\">RecyclerView</span><span class=\"p\">.</span><span class=\"nc\">ViewHolder</span><span class=\"p\">(</span><span class=\"n\">view</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n        <span class=\"kd\">val</span> <span class=\"py\">name</span><span class=\"p\">:</span> <span class=\"nc\">TextView</span> <span class=\"p\">=</span> <span class=\"n\">view</span><span class=\"p\">.</span><span class=\"nf\">findViewById</span><span class=\"p\">(</span><span class=\"nc\">R</span><span class=\"p\">.</span><span class=\"n\">id</span><span class=\"p\">.</span><span class=\"n\">profileNameLabel</span><span class=\"p\">)</span>\n        <span class=\"kd\">val</span> <span class=\"py\">updateButton</span><span class=\"p\">:</span> <span class=\"nc\">TextView</span> <span class=\"p\">=</span> <span class=\"n\">view</span><span class=\"p\">.</span><span class=\"nf\">findViewById</span><span class=\"p\">(</span><span class=\"nc\">R</span><span class=\"p\">.</span><span class=\"n\">id</span><span class=\"p\">.</span><span class=\"n\">updateProfileButton</span><span class=\"p\">)</span>\n        <span class=\"kd\">val</span> <span class=\"py\">deleteButton</span><span class=\"p\">:</span> <span class=\"nc\">TextView</span> <span class=\"p\">=</span> <span class=\"n\">view</span><span class=\"p\">.</span><span class=\"nf\">findViewById</span><span class=\"p\">(</span><span class=\"nc\">R</span><span class=\"p\">.</span><span class=\"n\">id</span><span class=\"p\">.</span><span class=\"n\">deleteProfileButton</span><span class=\"p\">)</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"k\">override</span> <span class=\"k\">fun</span> <span class=\"nf\">onCreateViewHolder</span><span class=\"p\">(</span><span class=\"n\">viewGroup</span><span class=\"p\">:</span> <span class=\"nc\">ViewGroup</span><span class=\"p\">,</span> <span class=\"n\">viewType</span><span class=\"p\">:</span> <span class=\"nc\">Int</span><span class=\"p\">):</span> <span class=\"nc\">ViewHolder</span> <span class=\"p\">{</span>\n        <span class=\"kd\">val</span> <span class=\"py\">view</span> <span class=\"p\">=</span> <span class=\"nc\">LayoutInflater</span><span class=\"p\">.</span><span class=\"nf\">from</span><span class=\"p\">(</span><span class=\"n\">viewGroup</span><span class=\"p\">.</span><span class=\"n\">context</span><span class=\"p\">).</span><span class=\"nf\">inflate</span><span class=\"p\">(</span><span class=\"nc\">R</span><span class=\"p\">.</span><span class=\"n\">layout</span><span class=\"p\">.</span><span class=\"n\">item_profile</span><span class=\"p\">,</span> <span class=\"n\">viewGroup</span><span class=\"p\">,</span> <span class=\"k\">false</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"nc\">ViewHolder</span><span class=\"p\">(</span><span class=\"n\">view</span><span class=\"p\">)</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"k\">override</span> <span class=\"k\">fun</span> <span class=\"nf\">onBindViewHolder</span><span class=\"p\">(</span><span class=\"n\">viewHolder</span><span class=\"p\">:</span> <span class=\"nc\">ViewHolder</span><span class=\"p\">,</span> <span class=\"n\">position</span><span class=\"p\">:</span> <span class=\"nc\">Int</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n        <span class=\"nf\">with</span><span class=\"p\">(</span><span class=\"n\">viewHolder</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n            <span class=\"n\">name</span><span class=\"p\">.</span><span class=\"n\">text</span> <span class=\"p\">=</span> <span class=\"n\">items</span><span class=\"p\">[</span><span class=\"n\">position</span><span class=\"p\">].</span><span class=\"n\">email</span>\n            <span class=\"n\">deleteButton</span><span class=\"p\">.</span><span class=\"nf\">setOnClickListener</span> <span class=\"p\">{</span>\n                <span class=\"n\">onDeleteClickListener</span><span class=\"p\">.</span><span class=\"nf\">invoke</span><span class=\"p\">(</span><span class=\"n\">items</span><span class=\"p\">[</span><span class=\"n\">position</span><span class=\"p\">])</span>\n            <span class=\"p\">}</span>\n            <span class=\"n\">updateButton</span><span class=\"p\">.</span><span class=\"nf\">setOnClickListener</span> <span class=\"p\">{</span>\n                <span class=\"n\">onUpdateClickListener</span><span class=\"p\">.</span><span class=\"nf\">invoke</span><span class=\"p\">(</span><span class=\"n\">items</span><span class=\"p\">[</span><span class=\"n\">position</span><span class=\"p\">])</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"k\">override</span> <span class=\"k\">fun</span> <span class=\"nf\">getItemCount</span><span class=\"p\">()</span> <span class=\"p\">=</span> <span class=\"n\">items</span><span class=\"p\">.</span><span class=\"n\">size</span>\n<span class=\"p\">}</span></code></pre> \n   </div> \n  </div> \n  <div class=\"paragraph\"> \n   <p>Now it’s time to connect everything together in the <code>HomeActivity</code>. Add the following code snippets:</p> \n  </div> \n  <div class=\"listingblock\"> \n   <div class=\"content\"> \n    <pre class=\"rouge highlight\"><code data-lang=\"kotlin\"><span class=\"o\">..</span><span class=\"p\">.</span>\n<span class=\"kd\">class</span> <span class=\"nc\">HomeActivity</span> <span class=\"p\">:</span> <span class=\"nc\">AppCompatActivity</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n\n    <span class=\"k\">private</span> <span class=\"kd\">var</span> <span class=\"py\">adapter</span> <span class=\"p\">=</span> <span class=\"nc\">ProfilesAdapter</span><span class=\"p\">(</span>\n        <span class=\"n\">onDeleteClickListener</span> <span class=\"p\">=</span> <span class=\"p\">{</span> <span class=\"n\">profile</span> <span class=\"p\">-&gt;</span> <span class=\"nf\">deleteProfile</span><span class=\"p\">(</span><span class=\"n\">profile</span><span class=\"p\">)</span> <span class=\"p\">},</span>\n        <span class=\"n\">onUpdateClickListener</span> <span class=\"p\">=</span> <span class=\"p\">{</span> <span class=\"n\">profile</span> <span class=\"p\">-&gt;</span> <span class=\"nf\">updateProfile</span><span class=\"p\">(</span><span class=\"n\">profile</span><span class=\"p\">)</span> <span class=\"p\">}</span>\n    <span class=\"p\">)</span>\n\n    <span class=\"o\">..</span><span class=\"p\">.</span>\n\n    <span class=\"k\">override</span> <span class=\"k\">fun</span> <span class=\"nf\">onCreate</span><span class=\"p\">(</span><span class=\"n\">savedInstanceState</span><span class=\"p\">:</span> <span class=\"nc\">Bundle</span><span class=\"p\">?)</span> <span class=\"p\">{</span>\n        <span class=\"o\">..</span><span class=\"p\">.</span>\n        <span class=\"n\">binding</span><span class=\"p\">.</span><span class=\"n\">createProfileButton</span><span class=\"p\">.</span><span class=\"nf\">setOnClickListener</span> <span class=\"p\">{</span> <span class=\"nf\">createProfile</span><span class=\"p\">()</span> <span class=\"p\">}</span>\n        <span class=\"n\">binding</span><span class=\"p\">.</span><span class=\"n\">profilesRecyclerView</span><span class=\"p\">.</span><span class=\"n\">adapter</span> <span class=\"p\">=</span> <span class=\"n\">adapter</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"o\">..</span><span class=\"p\">.</span>\n\n    <span class=\"k\">private</span> <span class=\"k\">fun</span> <span class=\"nf\">displayProfiles</span><span class=\"p\">(</span><span class=\"n\">profiles</span><span class=\"p\">:</span> <span class=\"nc\">List</span><span class=\"p\">&lt;</span><span class=\"nc\">Profile</span><span class=\"p\">&gt;)</span> <span class=\"p\">{</span>\n        <span class=\"n\">adapter</span><span class=\"p\">.</span><span class=\"n\">items</span><span class=\"p\">.</span><span class=\"nf\">clear</span><span class=\"p\">()</span>\n        <span class=\"n\">adapter</span><span class=\"p\">.</span><span class=\"n\">items</span><span class=\"p\">.</span><span class=\"nf\">addAll</span><span class=\"p\">(</span><span class=\"n\">profiles</span><span class=\"p\">)</span>\n        <span class=\"n\">adapter</span><span class=\"p\">.</span><span class=\"nf\">notifyDataSetChanged</span><span class=\"p\">()</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"k\">private</span> <span class=\"k\">fun</span> <span class=\"nf\">displayUpdatedProfile</span><span class=\"p\">(</span><span class=\"n\">oldProfile</span><span class=\"p\">:</span> <span class=\"nc\">Profile</span><span class=\"p\">,</span> <span class=\"n\">newProfile</span><span class=\"p\">:</span> <span class=\"nc\">Profile</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n        <span class=\"kd\">val</span> <span class=\"py\">index</span> <span class=\"p\">=</span> <span class=\"n\">adapter</span><span class=\"p\">.</span><span class=\"n\">items</span><span class=\"p\">.</span><span class=\"nf\">indexOfFirst</span> <span class=\"p\">{</span> <span class=\"n\">profileToReplace</span> <span class=\"p\">-&gt;</span>\n            <span class=\"n\">profileToReplace</span><span class=\"p\">.</span><span class=\"n\">email</span> <span class=\"p\">==</span> <span class=\"n\">oldProfile</span><span class=\"p\">.</span><span class=\"n\">email</span>\n        <span class=\"p\">}</span>\n        <span class=\"n\">adapter</span><span class=\"p\">.</span><span class=\"n\">items</span><span class=\"p\">[</span><span class=\"n\">index</span><span class=\"p\">]</span> <span class=\"p\">=</span> <span class=\"n\">newProfile</span>\n        <span class=\"n\">adapter</span><span class=\"p\">.</span><span class=\"nf\">notifyItemChanged</span><span class=\"p\">(</span><span class=\"n\">index</span><span class=\"p\">)</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span></code></pre> \n   </div> \n  </div> \n  <div class=\"paragraph\"> \n   <p>And that’s it! The result is a reactive Android app that connects to your local API. Now, run the app, click on the sign-in button, enter the credential of your user, and log in.</p> \n  </div> \n  <div class=\"admonitionblock caution\"> \n   <table> \n    <tr> \n     <td class=\"icon\"> <i class=\"fa icon-caution\" title=\"Caution\"></i> </td> \n     <td class=\"content\"> If you have issues launching your app on macOS Big Sur, see <a href=\"https://stackoverflow.com/questions/67288329/android-device-manager-fails-to-launch-after-updating-to-macos-big-sur-11-3/67380028#67380028\">this solution on Stack Overflow</a>. </td> \n    </tr> \n   </table> \n  </div> \n  <div class=\"paragraph\"> \n   <p>Once you’re logged in, you’ll be able to add, update and delete profiles, as can be seen in the animated GIF below:</p> \n  </div> \n  <div class=\"imageblock text-center\"> \n   <div class=\"content\"> \n    <img src=\"https://developer.okta.com/assets-jekyll/blog/rxjava-android/whole-flow-137f699c8e75b4b506173a4e4ece17f52f3581f9fbade5e39fc0cfe0dc7a3392.gif\" alt=\"The reactive Android app\" width=\"400\"> </img> \n   </div> \n  </div> \n </div> \n</div> \n<div class=\"sect1\"> \n <h2 id=\"learn-more-about-rxjava-and-android\">Learn More About RxJava and Android</h2> \n <div class=\"sectionbody\"> \n  <div class=\"paragraph\"> \n   <p>RxJava is one of the most popular libraries on Android, and there is good reason for it. The concepts it introduces go way beyond Android development, but its application fits perfectly for it, and mobile development in general. If you look at it that way, all the work that a phone does is a data stream. From communication with network APIs and caching data in the local database, to handling user inputs and processing huge amounts of data, almost everything can be looked at as a data stream.</p> \n  </div> \n  <div class=\"paragraph\"> \n   <p>The tricky part is how to combine and manipulate those data streams, in a way that is clean, easy to maintain, and understand. RxJava gives us all that and more. It’s proven as a robust, scalable, and production-ready framework. It has its disadvantages, the most obvious being its steep learning curve and its size and complexity, which isn’t always needed for many apps. But once you grasp its concepts and set it up properly in your codebase, it will become a quite powerful tool for writing complex logic.</p> \n  </div> \n  <div class=\"paragraph\"> \n   <p>The complete source code of this tutorial can be <a href=\"https://github.com/oktadev/okta-android-rxjava-example\">found on GitHub</a>.</p> \n  </div> \n  <div class=\"paragraph\"> \n   <p>If you want to learn more about RxJava, here are few great resources:</p> \n  </div> \n  <div class=\"ulist\"> \n   <ul> \n    <li> <p><a href=\"https://github.com/ReactiveX/RxJava\">RxJava GitHub</a></p> </li> \n    <li> <p><a href=\"https://www.raywenderlich.com/books/reactive-programming-with-kotlin/v2.0/chapters/1-hello-rxjava\">Hello, RxJava!</a></p> </li> \n    <li> <p><a href=\"https://www.toptal.com/android/functional-reactive-android-rxjava\">Meet RxJava: The Missing Reactive Programming Library for Android</a></p> </li> \n    <li> <p><a href=\"https://proandroiddev.com/exploring-rxjava-in-android-e52ed7ef32e2\">Exploring RxJava in Android — Introduction</a></p> </li> \n    <li> <p><a href=\"https://www.vogella.com/tutorials/RxJava/article.html\">Using RxJava 2 - Tutorial</a></p> </li> \n   </ul> \n  </div> \n  <div class=\"paragraph\"> \n   <p>We also have some Android-related posts on this blog:</p> \n  </div> \n  <div class=\"ulist\"> \n   <ul> \n    <li> <p><a href=\"https://developer.okta.com/blog/2020/04/20/android-authentication\">Build an Android Application with Authentication</a></p> </li> \n    <li> <p><a href=\"https://developer.okta.com/blog/2021/01/06/android-login\">Android Login Made Easy with OIDC</a></p> </li> \n    <li> <p><a href=\"https://developer.okta.com/blog/2019/10/25/intro-android-gradle\">Get Familiar with Android and Gradle</a></p> </li> \n   </ul> \n  </div> \n  <div class=\"paragraph\"> \n   <p>If you enjoyed this blog post and want to see more like it, follow <a href=\"https://twitter.com/oktadev\">@oktadev on Twitter</a>, subscribe to <a href=\"https://youtube.com/c/oktadev\">our YouTube channel</a>, or follow us on <a href=\"https://www.linkedin.com/company/oktadev/\">LinkedIn</a>.</p> \n  </div> \n </div> \n</div>","descriptionType":"text/html","publishedDate":"Wed, 26 May 2021 05:00:00 +0000","feedId":25261,"bgimg":"","linkMd5":"1acfadf0b0ae82ab8a14852a32bf63f3","bgimgJsdelivr":"","metaImg":"","author":"","articleImgCdnMap":{"https://developer.okta.com/assets-jekyll/blog/rxjava-android/start-web-server-06a882a46e09b7a60aa82b4e68dfbf417b0eb352f5ef032ee65238eb34cf831b.png":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn37@2020_2/2021/05/27/16-10-46-757_155595f84dc897c3.webp","https://developer.okta.com/assets-jekyll/blog/rxjava-android/connect-to-server-401-61300798a6a16542982c2d4b445e396f384341d8de9cdc63e3499166e701a224.png":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn36@2020_4/2021/05/27/16-10-48-715_256c9a827093e45e.webp","https://developer.okta.com/assets-jekyll/blog/rxjava-android/whole-flow-137f699c8e75b4b506173a4e4ece17f52f3581f9fbade5e39fc0cfe0dc7a3392.gif":null},"publishedOrCreatedDate":1622131845612}],"record":{"createdTime":"2021-05-28 00:10:45","updatedTime":"2021-05-28 00:10:45","feedId":25261,"fetchDate":"Thu, 27 May 2021 16:10:45 +0000","fetchMs":41,"handleMs":45,"totalMs":122000,"newArticles":0,"totalArticles":8,"status":1,"type":0,"ip":"245d88d7b2d8f26704713c23b090d029","hostName":"us-026*","requestId":"3a96439d8a134ac3bbcae155deb2bab1_25261","contentType":"application/xml","totalBytes":344190,"bgimgsTotal":0,"bgimgsGithubTotal":0,"articlesImgsTotal":3,"articlesImgsGithubTotal":2,"successGithubMap":{"myreaderx8":1,"myreaderx15":1},"failGithubMap":{}},"feed":{"createdTime":"2020-09-07 02:35:22","updatedTime":"2020-09-07 04:32:39","id":25261,"name":"Okta Developer","url":"https://developer.okta.com/feed.xml","subscriber":130,"website":null,"icon":"https://developer.okta.com/favicon.ico","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx64/cdn86@2020_2/2020/09/06/20-32-34-005_04176a7dc89bf687.ico","description":"Secure, scalable, and highly available authentication and user management for any app.\n","weekly":null,"link":null},"noPictureArticleList":[{"createdTime":"2021-05-28 00:12:47","updatedTime":"2021-05-28 00:12:47","id":null,"feedId":25261,"linkMd5":"1acfadf0b0ae82ab8a14852a32bf63f3"}],"tmpCommonImgCdnBytes":0,"tmpBodyImgCdnBytes":344190,"tmpBgImgCdnBytes":0,"extra4":{"start":1622131845521,"total":0,"statList":[{"spend":46,"msg":"获取xml内容"},{"spend":45,"msg":"解释文章"},{"spend":0,"msg":"上传封面图到cdn"},{"spend":1,"msg":"修正封面图上传失败重新上传"},{"spend":121421,"msg":"正文链接上传到cdn"}]},"extra5":3,"extra6":2,"extra7ImgCdnFailResultVector":[null,null],"extra10_invalidATagHrefValue":{"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin_#learn-more-about-rxjava-and-android":"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin#learn-more-about-rxjava-and-android","https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin_/blog/2018/09/24/reactive-apis-with-spring-webflux":"https://developer.okta.com/blog/2018/09/24/reactive-apis-with-spring-webflux","https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin_#add-rxjava-and-retrofit-dependencies":"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin#add-rxjava-and-retrofit-dependencies","https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin_#use-rxjava-to-access-the-profile-api":"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin#use-rxjava-to-access-the-profile-api","https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin_#clone-the-android-app":"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin#clone-the-android-app","https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin_/blog/2021/01/06/android-login":"https://developer.okta.com/blog/2021/01/06/android-login","https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin_/blog/2020/04/20/android-authentication":"https://developer.okta.com/blog/2020/04/20/android-authentication","https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin_#fetch-profiles":"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin#fetch-profiles","https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin_#set-up-the-android-ui":"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin#set-up-the-android-ui","https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin_#delete-a-profile":"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin#delete-a-profile","https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin_#update-a-profile":"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin#update-a-profile","https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin_#set-up-networking":"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin#set-up-networking","https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin_/blog/2019/10/25/intro-android-gradle":"https://developer.okta.com/blog/2019/10/25/intro-android-gradle","https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin_#clone-the-backend-reactive-spring-boot-app":"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin#clone-the-backend-reactive-spring-boot-app","https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin_#create-android-rxjava-and-reactive-java-apps":"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin#create-android-rxjava-and-reactive-java-apps","https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin_#build-a-reactive-android-app":"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin#build-a-reactive-android-app","https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin_/blog/2021/01/06/android-login#add-the-okta-android-oidc-sdk":"https://developer.okta.com/blog/2021/01/06/android-login#add-the-okta-android-oidc-sdk","https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin_/blog/2021/01/06/android-login#manage-authentication-with-a-manager-class":"https://developer.okta.com/blog/2021/01/06/android-login#manage-authentication-with-a-manager-class","https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin_#create-profiles":"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin#create-profiles"},"extra111_proxyServerAndStatMap":{"http://us-55.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://europe67.herokuapp.com/":{"failCount":1,"successCount":1,"resultList":[200,null]},"http://europe66.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"https://developer.okta.com/assets-jekyll/blog/rxjava-android/start-web-server-06a882a46e09b7a60aa82b4e68dfbf417b0eb352f5ef032ee65238eb34cf831b.png","sourceStatusCode":200,"destWidth":1616,"destHeight":1106,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn37@2020_2/2021/05/27/16-10-46-757_155595f84dc897c3.webp","sourceBytes":309016,"destBytes":211858,"targetWebpQuality":75,"feedId":25261,"totalSpendMs":1575,"convertSpendMs":170,"createdTime":"2021-05-28 00:10:46","host":"europe67*","referer":"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin","linkMd5ListStr":"1acfadf0b0ae82ab8a14852a32bf63f3","githubUser":"myreaderx15","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"301.8 KB","destSize":"206.9 KB","compressRate":"68.6%"},{"code":1,"isDone":false,"source":"https://developer.okta.com/assets-jekyll/blog/rxjava-android/connect-to-server-401-61300798a6a16542982c2d4b445e396f384341d8de9cdc63e3499166e701a224.png","sourceStatusCode":200,"destWidth":1616,"destHeight":1106,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn36@2020_4/2021/05/27/16-10-48-715_256c9a827093e45e.webp","sourceBytes":205875,"destBytes":132332,"targetWebpQuality":75,"feedId":25261,"totalSpendMs":1068,"convertSpendMs":201,"createdTime":"2021-05-28 00:10:48","host":"europe66*","referer":"https://developer.okta.com/blog/2021/05/26/rxjava-android-with-kotlin","linkMd5ListStr":"1acfadf0b0ae82ab8a14852a32bf63f3","githubUser":"myreaderx8","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"201 KB","destSize":"129.2 KB","compressRate":"64.3%"}],"successGithubMap":{"myreaderx8":1,"myreaderx15":1},"failGithubMap":{}}
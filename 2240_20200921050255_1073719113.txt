{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2020-09-21 13:01:37","updatedTime":"2020-09-21 13:01:37","title":"InnoDB，5项最佳实践","link":"http://weixin.sogou.com/weixin?type=2&query=%E6%9E%B6%E6%9E%84%E5%B8%88%E4%B9%8B%E8%B7%AF+InnoDB%EF%BC%8C5%E9%A1%B9%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5","description":"<div><div><div id=\"media\" class=\"rich_media_thumb_wrp\">\n\n            <img class=\"rich_media_thumb\" src=\"http://img.100weidu.com/mmbiz_jpg/YrezxckhYOy7SqoPjlukTW1jX6rFchmCQutUSm0xlibBSgZ1PQ5lORpPXTgT2JBBOdDiaMe0OEgDWAbRkkKKEFHw?imageView2/1/w/600\">\n        </div>\n    \n\n    \n\n    <div class=\"rich_media_content\" id=\"js_content\">\n                    \n\n                    \n\n                    \n                    \n                    <section style=\"line-height: 1.75em;\" data-mpa-powered-by=\"yiban.io\"><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif>MySQL是目前互联网公司使用最广的数据库，InnoDB是MySQL使用最广的存储引擎，MyISAM和InnoDB的五项最佳实践，和大家聊聊，尽量多讲“为什么”。<br></span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif><br><strong>一、关于count(*)</strong><br><strong>知识点</strong>：<span style=\"font-family: \" helvetica neue sans gb yahei arial sans-serif rgb>MyISAM会直接存储总行数，InnoDB则不会，需要按行扫描</span>。</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif><br></span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif>潜台词是，对于select count(*) from t; 如果数据量大，MyISAM会瞬间返回，而InnoDB则会一行行扫描。<br></span></section><section style=\"line-height: 1.75em;\"><br></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif><strong>实践</strong>：数据量大的表，InnoDB不要轻易select count(*)，性能消耗极大。<br><br><strong>常见坑</strong>：只有查询全表的总行数，MyISAM才会直接返回结果，<span style=\"font-family: \" helvetica neue sans gb yahei arial sans-serif rgb>当加了where条件后，两种存储引擎的处理方式类似</span>。<br><br><strong>例如</strong>：<br>t_user(uid, uname, age, sex);<br></span></section><ul style=\"list-style-type: disc;\" class=\"list-paddingleft-2\"><li style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif>uid PK<br></span></section></li><li style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif>age index<br></span></section></li></ul><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif><br></span></section><section style=\"line-height: 1.75em;\"><span style=\"font-family: \" helvetica neue sans gb yahei arial sans-serif>select count(*) where age&lt;18 and sex='F';</span><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif><br>查询未成年少女个数，两种存储引擎的处理方式类似，都需要进行索引扫描。<br><br><strong>启示</strong>：不管哪种存储引擎，都要建立好索引。<br></span></section><section style=\"line-height: 1.75em;\"><span style=\"letter-spacing: 1px;font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif><br><strong>二、关于全文索引</strong><br><strong>知识点</strong>：<span style=\"color: rgb(255, 76, 0);\">MyISAM支持全文索引，InnoDB5.6之前不支持全文索引</span>。<br><br><strong>实践</strong>：不管哪种存储引擎，在数据量大并发量大的情况下，都不应该使用数据库自带的全文索引，会导致小量请求占用大量数据库资源，而要使用《<a href=\"http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651959917&amp;idx=1&amp;sn=8faeae7419a756b0c355af2b30c255df&amp;chksm=bd2d07b18a5a8ea75f16f7e98ea897c7e7f47a0441c64bdaef8445a2100e0bdd2a7de99786c0&amp;scene=21#wechat_redirect\" target=\"_blank\" data-linktype=\"2\">索引外置</a>》的架构设计方法。<br><br><strong>启示</strong>：大数据量+高并发量的业务场景，全文索引，MyISAM也不是最优之选。<br><br><strong>三、关于事务</strong><br><strong>知识点</strong>：<span style=\"color: rgb(255, 76, 0);\">MyISAM不支持事务，InnoDB支持事务</span>。<br><br><strong>实践</strong>：事务是选择InnoDB非常诱人的原因之一，它提供了commit，rollback，崩溃修复等能力。在系统异常崩溃时，MyISAM有一定几率造成文件损坏，这是非常烦的。但是，事务也非常耗性能，会影响吞吐量，建议只对一致性要求较高的业务使用复杂事务。<br><span style=\"color: rgb(0, 82, 255);\"><em>画外音：Can't open file 'XXX.MYI'. 碰到过么？</em></span><br><br><strong>小技巧</strong>：MyISAM可以通过lock table表锁，来实现类似于事务的东西，但对数据库性能影响较大，强烈不推荐使用。<br><br><strong>四、关于外键</strong><br><strong>知识点</strong>：<span style=\"color: rgb(255, 76, 0);\">MyISAM不支持外键，InnoDB支持外键</span>。<br><br><strong>实践</strong>：不管哪种存储引擎，在数据量大并发量大的情况下，都<span style=\"color: rgb(255, 76, 0);\">不应该使用外键</span>，而建议<span style=\"color: rgb(255, 76, 0);\">由应用程序保证完整性</span>。<br><br><strong>五、关于行锁与表锁</strong><br><strong>知识点</strong>：MyISAM只支持<span style=\"color: rgb(255, 76, 0);\">表锁</span>，InnoDB<span style=\"color: rgb(255, 76, 0);\">可以支持行锁</span>。<br><br><strong>分析</strong>：<br>MyISAM：执行读写SQL语句时，会对表加锁，所以数据量大，并发量高时，性能会急剧下降。<br>InnoDB：细粒度行锁，在数据量大，并发量高时，性能比较优异。<br><br><strong>实践</strong>：网上常常说，select+insert的业务用MyISAM，因为MyISAM在文件尾部顺序增加记录速度极快。楼主的建议是，绝大部分业务是混合读写，只要数据量和并发量较大，一律使用InnoDB。<br><br><strong>常见坑</strong>：<br>InnoDB的行锁是实现在索引上的，而不是锁在物理行记录上。潜台词是，<span style=\"color: rgb(255, 76, 0);\">如果访问没有命中索引，也无法使用行锁，将要退化为表锁</span>。<br><span style=\"color: rgb(0, 82, 255);\"><em>画外音：Oracle的行锁实现机制不同。</em></span><br><br><strong>例如</strong>：<br></span><span style=\"letter-spacing: 1px;font-family: \" helvetica neue sans gb yahei arial sans-serif>t_user(uid, uname, age, sex) innodb;</span></section><ul style=\"list-style-type: disc;\" class=\"list-paddingleft-2\"><li style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif>uid PK<br></span></section></li><li style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif>无其他索引<br></span></section></li></ul><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif><br></span></section><section style=\"line-height: 1.75em;\"><span style=\"font-family: \" helvetica neue sans gb yahei arial sans-serif>update t_user set age=10 where uid=1;</span><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif><br>命中索引，<span style=\"font-family: \" helvetica neue sans gb yahei arial sans-serif rgb>行锁</span>。<br><br></span></section><section style=\"line-height: 1.75em;\"><span style=\"font-family: \" helvetica neue sans gb yahei arial sans-serif>update t_user set age=10 where uid != 1;</span><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif><br>未命中索引，<span style=\"font-family: \" helvetica neue sans gb yahei arial sans-serif rgb>表锁</span>。<br><br></span></section><section style=\"line-height: 1.75em;\"><span style=\"font-family: \" helvetica neue sans gb yahei arial sans-serif>update t_user set age=10 where name='shenjian';</span><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif><br>无索引，<span style=\"font-family: \" helvetica neue sans gb yahei arial sans-serif rgb>表锁</span>。<br><br><strong>启示</strong>：InnoDB务必建好索引，否则锁粒度较大，会影响并发。</span></section><section style=\"line-height: 1.75em;\"><br></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif><strong>总结</strong><br>在<span style=\"font-family: \" helvetica neue sans gb yahei arial sans-serif rgb>大数据量，高并发量</span>的互联网业务场景下，对于MyISAM和InnoDB<br></span></section><ul style=\"list-style-type: disc;\" class=\"list-paddingleft-2\"><li style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif>有where条件，count(*)两个存储引擎性能差不多<br></span></section></li><li><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif>不要使用全文索引，应当使用“外置索引”的设计方案<br></span></section></li><li style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif>事务影响性能，强一致性要求才使用事务<br></span></section></li><li style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif>不用外键，由应用程序来保证完整性<br></span></section></li><li style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif>不命中索引，InnoDB也不能用行锁<br></span></section></li></ul><section style=\"line-height: 1.75em;\"><br></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif><strong>结论</strong><br>在<span style=\"font-family: \" helvetica neue sans gb yahei arial sans-serif rgb>大数据量，高并发量</span>的互联网业务场景下，<span style=\"font-family: \" helvetica neue sans gb yahei arial sans-serif rgb>请使用InnoDB</span>:<br></span></section><ul style=\"list-style-type: disc;\" class=\"list-paddingleft-2\"><li style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif>行锁，对提高并发帮助很大<br></span></section></li><li style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif>事务，对数据一致性帮助很大<br></span></section></li></ul><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif>这两个点，是InnoDB最吸引人的地方。<br><br><strong>福利</strong>：InnoDB内核架构与细节，<span style=\"font-family: \" helvetica neue sans gb yahei arial sans-serif>免费</span>，训练营</span></section><section style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif>分享者</span></strong><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif>：陈东</span></section><section style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif>时间</span></strong><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif>：9.15-9.17（</span><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif rgb>今天开始</span><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif>），20:00</span></section><p style=\"line-height: 1.75em;\"><strong><span style=\"font-family: \" helvetica neue sans gb yahei arial sans-serif>简介</span></strong><span style=\"font-family: \" helvetica neue sans gb yahei arial sans-serif>：前58集团架构师，奈学首席架构师</span></p><p style=\"line-height: 1.75em;\"><br></p><p style=\"line-height: 1.75em;\"><strong><span style=\"font-family: \" helvetica neue sans gb yahei arial sans-serif>大纲</span></strong><span style=\"font-family: \" helvetica neue sans gb yahei arial sans-serif>：</span></p><section style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">【Day1 存储引擎实现原理篇】</span></strong></section><p style=\"line-height: normal;\"><span style=\"letter-spacing: 1px;font-size: 12px;\">   1、InnoDB 记录存储</span></p><p style=\"line-height: normal;\"><span style=\"letter-spacing: 1px;font-size: 12px;\">（1）页面数据结构组织</span></p><p style=\"line-height: normal;\"><span style=\"letter-spacing: 1px;font-size: 12px;\">（2）页内记录存储方式</span></p><p style=\"line-height: normal;\"><span style=\"letter-spacing: 1px;font-size: 12px;\">   2、InnoDB 索引实现原理剖析</span></p><p style=\"line-height: normal;\"><span style=\"letter-spacing: 1px;font-size: 12px;\">（1）索引实现原理及特性分析</span></p><p style=\"line-height: normal;\"><span style=\"letter-spacing: 1px;font-size: 12px;\">（2）索引性能及使用优化分析</span></p><p style=\"line-height: normal;\"><span style=\"letter-spacing: 1px;font-size: 12px;\">   3、InnoDB 内存管理</span></p><p style=\"line-height: normal;\"><span style=\"letter-spacing: 1px;font-size: 12px;\">（1）InnoDB 内存池管理及页面划分</span></p><p style=\"line-height: normal;\"><span style=\"letter-spacing: 1px;font-size: 12px;\">（2）InnoDB LRU页面淘汰机制分析</span></p><p style=\"line-height: normal;\"><span style=\"letter-spacing: 1px;font-size: 12px;\">（3）InnoDB 脏页刷新机制分析</span></p><section style=\"line-height: 1.75em;\"><br></section><section style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\"> 【Day2 特性深入分析篇】   </span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\"></span></section><p style=\"line-height: normal;\"><span style=\"letter-spacing: 1px;font-size: 12px;\">  1、InnoDB 事务机制分析</span></p><p style=\"line-height: normal;\"><span style=\"letter-spacing: 1px;font-size: 12px;\">（1）InnoDB事务特性分析</span></p><p style=\"line-height: normal;\"><span style=\"letter-spacing: 1px;font-size: 12px;\">（2）InnoDB 事务实现原理分析</span></p><p style=\"line-height: normal;\"><span style=\"letter-spacing: 1px;font-size: 12px;\">（3）InnoDB undolog redolog作用分析</span></p><p style=\"line-height: normal;\"><span style=\"letter-spacing: 1px;font-size: 12px;\">  2、InnoDB 锁机制详解</span></p><p style=\"line-height: normal;\"><span style=\"letter-spacing: 1px;font-size: 12px;\">（1）InnoDB 锁种类及特性深入分析</span></p><p style=\"line-height: normal;\"><span style=\"letter-spacing: 1px;font-size: 12px;\">（2）InnoDB 行锁、间隙锁加锁过程分析</span></p><p style=\"line-height: normal;\"><span style=\"letter-spacing: 1px;font-size: 12px;\">（3）InnoDB 死锁案例分析</span></p><section style=\"line-height: 1.75em;\"><br></section><section style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\"> 【Day3 应用实践篇】</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\"></span></section><p style=\"line-height: normal;\"><span style=\"letter-spacing: 1px;font-size: 12px;\">（1）MySQL 数据库使用规范</span></p><p style=\"line-height: normal;\"><span style=\"letter-spacing: 1px;font-size: 12px;\">（2）MySQL 分库分表案例</span></p><p style=\"line-height: normal;\"><span style=\"letter-spacing: 1px;font-size: 12px;\">（3）MySQL 部署方式及高可用方案</span></p><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"><br></span></section><section style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">如何获取福利？</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\"><br></span></section><section style=\"text-align: center;line-height: normal;\"><img class=\"rich_pages js_insertlocalimg\" data-ratio=\"1\" data-s=\"300,640\" data-type=\"jpeg\" data-w=\"260\" style=\"width: 124px; height: 124px; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/sz_mmbiz_jpg/YrezxckhYOwgibDKtBaZZRX49o1bAF1ajJBZ35qlEakbMfianc8sr056qo1QTm7GTVvAfOcsOVYjY1tna6YVYyQQ/640?wx_fmt=jpeg\"></section><section style=\"text-align: center;line-height: normal;\"><span style=\"letter-spacing: 1px;font-size: 12px;\">扫码免费参加InnoDB训练营</span><br></section><section style=\"line-height: 1.75em;\"><br></section><section style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">阅读原文</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\">，免费领取相关资料，获取免费直播地址。</span><span style=\"font-size: 15px;font-family: \" helvetica neue sans gb yahei arial sans-serif></span></section>\n                </div>\n\n    \n        <br>\n        <div id=\"js_toobar3\" class=\"rich_media_tool\">\n            <a target=\"_blank\" href=\"http://api.naixuejiaoyu.com/scan?channelcode=wx%5Cx26amp;key=java%5Cx26amp;putcode=1-jgszl\" id=\"js_view_source\" class=\"media_tool_meta meta_primary\">阅读原文</a>\n        </div>\n    \n    <br>\n\n    \n        <a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651965249&amp;idx=1&amp;sn=8457058c815388464765f9d251d0c4b5&amp;chksm=bd2d729d8a5afb8bc18abf81be59829795672f39c4f0f033e882d47f14d6491eb3298e1b563e&amp;scene=0#rd\" style=\"color: blue\" class=\"media_tool_meta meta_primary\">原文</a>\n        <br>\n    \n\n    \n\n    <img alt=\"\" width=\"1px\" height=\"1px\" class=\"\" style=\"width:1px;height:1px;display:none\" src=\"http://www.jintiankansha.me/rss_static/3592/FbrbDYz9uf\"></div></div>","descriptionType":"html","publishedDate":"Tue, 15 Sep 2020 04:13:00 +0000","feedId":2240,"bgimg":"http://img.100weidu.com/mmbiz_jpg/YrezxckhYOy7SqoPjlukTW1jX6rFchmCQutUSm0xlibBSgZ1PQ5lORpPXTgT2JBBOdDiaMe0OEgDWAbRkkKKEFHw?imageView2/1/w/600","linkMd5":"e204807e03edd25741f78750a3b81935","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn71@2020_6/2020/09/21/05-01-37-221_2f6507ecd5911759.webp","destWidth":366,"destHeight":206,"sourceBytes":5672,"destBytes":4222,"author":"","articleImgCdnMap":{"http://img.100weidu.com/mmbiz_jpg/YrezxckhYOy7SqoPjlukTW1jX6rFchmCQutUSm0xlibBSgZ1PQ5lORpPXTgT2JBBOdDiaMe0OEgDWAbRkkKKEFHw?imageView2/1/w/600":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn71@2020_6/2020/09/21/05-01-37-221_2f6507ecd5911759.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/sz_mmbiz_jpg/YrezxckhYOwgibDKtBaZZRX49o1bAF1ajJBZ35qlEakbMfianc8sr056qo1QTm7GTVvAfOcsOVYjY1tna6YVYyQQ/640?wx_fmt=jpeg":null,"http://www.jintiankansha.me/rss_static/3592/FbrbDYz9uf":null},"publishedOrCreatedDate":1600664497059}],"record":{"createdTime":"2020-09-21 13:01:37","updatedTime":"2020-09-21 13:01:37","feedId":2240,"fetchDate":"Mon, 21 Sep 2020 05:01:37 +0000","fetchMs":351,"handleMs":12,"totalMs":78618,"newArticles":0,"totalArticles":5,"status":1,"type":0,"ip":"e157b37912535cfa8094d5657cd163af","hostName":"europe21*","requestId":"3fa962a047334b5ca4efb79cf94abd3a_2240","contentType":"application/rss+xml","totalBytes":4222,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":3,"articlesImgsGithubTotal":1,"successGithubMap":{"myreaderx19":1},"failGithubMap":{"myreaderx23":1}},"feed":{"createdTime":"2020-08-24 21:31:38","updatedTime":"2020-09-01 10:02:14","id":2240,"name":"架构师之路","url":"http://feedmaker.kindle4rss.com/feeds/gh_10a6b96351a9.weixin.xml","subscriber":null,"website":null,"icon":"http://www.sogou.com/images/logo/new/favicon.ico?v=4","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx63/cdn89@2020_4/2020/09/01/02-02-15-297_d24121c9beed1de6.ico","description":"架构师之路，坚持撰写接地气的架构文章","weekly":null,"link":null},"noPictureArticleList":[{"createdTime":"2020-09-21 13:02:55","updatedTime":"2020-09-21 13:02:55","id":null,"feedId":2240,"linkMd5":"e204807e03edd25741f78750a3b81935"}],"tmpCommonImgCdnBytes":4222,"tmpBodyImgCdnBytes":0,"tmpBgImgCdnBytes":0,"extra4":{"start":1600664496534,"total":0,"statList":[{"spend":513,"msg":"获取xml内容"},{"spend":12,"msg":"解释文章"},{"spend":1,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":77016,"msg":"正文链接上传到cdn"}]},"extra5":3,"extra6":3,"extra7ImgCdnFailResultVector":[{"code":1,"isDone":false,"source":"http://www.jintiankansha.me/rss_static/3592/FbrbDYz9uf","sourceStatusCode":405,"sourceBytes":0,"destBytes":0,"feedId":2240,"totalSpendMs":449,"convertSpendMs":0,"createdTime":"2020-09-21 13:01:38","host":"us-53*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E6%9E%B6%E6%9E%84%E5%B8%88%E4%B9%8B%E8%B7%AF+InnoDB%EF%BC%8C5%E9%A1%B9%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5","linkMd5ListStr":"e204807e03edd25741f78750a3b81935","extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[405],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"http://www.jintiankansha.me/rss_static/3592/FbrbDYz9uf","sourceStatusCode":405,"sourceBytes":0,"destBytes":0,"feedId":2240,"totalSpendMs":542,"convertSpendMs":0,"createdTime":"2020-09-21 13:01:38","host":"europe63*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E6%9E%B6%E6%9E%84%E5%B8%88%E4%B9%8B%E8%B7%AF+InnoDB%EF%BC%8C5%E9%A1%B9%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5","linkMd5ListStr":"e204807e03edd25741f78750a3b81935","extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[405],"sourceSize":"0","destSize":"0"},null,{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/sz_mmbiz_jpg/YrezxckhYOwgibDKtBaZZRX49o1bAF1ajJBZ35qlEakbMfianc8sr056qo1QTm7GTVvAfOcsOVYjY1tna6YVYyQQ/640?wx_fmt=jpeg","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":2240,"totalSpendMs":949,"convertSpendMs":0,"createdTime":"2020-09-21 13:02:39","host":"us-039*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E6%9E%B6%E6%9E%84%E5%B8%88%E4%B9%8B%E8%B7%AF+InnoDB%EF%BC%8C5%E9%A1%B9%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5","linkMd5ListStr":"e204807e03edd25741f78750a3b81935","extra22GetBytesInfo":"2、Referer字段 ： http://weixin.sogou.com/weixin?type=2&query=%E6%9E%B6%E6%9E%84%E5%B8%88%E4%B9%8B%E8%B7%AF+InnoDB%EF%BC%8C5%E9%A1%B9%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/sz_mmbiz_jpg/YrezxckhYOwgibDKtBaZZRX49o1bAF1ajJBZ35qlEakbMfianc8sr056qo1QTm7GTVvAfOcsOVYjY1tna6YVYyQQ/640?wx_fmt=jpeg","sourceStatusCode":200,"destWidth":260,"destHeight":260,"sourceBytes":22840,"destBytes":13108,"targetWebpQuality":75,"feedId":2240,"totalSpendMs":14442,"convertSpendMs":7,"createdTime":"2020-09-21 13:02:40","host":"europe-23*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E6%9E%B6%E6%9E%84%E5%B8%88%E4%B9%8B%E8%B7%AF+InnoDB%EF%BC%8C5%E9%A1%B9%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5","linkMd5ListStr":"e204807e03edd25741f78750a3b81935","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx23/cdn76/contents/2020/09/21/05-02-54-722_01882d83a2eedb5b.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 69189253.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Mon, 21 Sep 2020 05:02:55 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"status":["403 Forbidden"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["B4E4:47C2:1C1390B:2177479:5F6833FE"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, read:packages, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1600667469"],"x-ratelimit-used":["60"],"x-xss-protection":["1; mode=block"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx23/cdn76/contents/2020/09/21/05-02-54-722_01882d83a2eedb5b.webp","historyStatusCode":[],"spendMs":411},"base64UserPassword":null,"token":"df0b9******************************93a6e"},"githubUser":"myreaderx23","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"22.3 KB","destSize":"12.8 KB","compressRate":"57.4%"}],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://us-53.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[405]},"http://us-039.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[403]},"http://europe-23.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe63.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[405]},"http://us-52.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"http://img.100weidu.com/mmbiz_jpg/YrezxckhYOy7SqoPjlukTW1jX6rFchmCQutUSm0xlibBSgZ1PQ5lORpPXTgT2JBBOdDiaMe0OEgDWAbRkkKKEFHw?imageView2/1/w/600","sourceStatusCode":200,"destWidth":366,"destHeight":206,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn71@2020_6/2020/09/21/05-01-37-221_2f6507ecd5911759.webp","sourceBytes":5672,"destBytes":4222,"targetWebpQuality":75,"feedId":2240,"totalSpendMs":907,"convertSpendMs":10,"createdTime":"2020-09-21 13:01:37","host":"us-003*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E6%9E%B6%E6%9E%84%E5%B8%88%E4%B9%8B%E8%B7%AF+InnoDB%EF%BC%8C5%E9%A1%B9%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5","linkMd5ListStr":"e204807e03edd25741f78750a3b81935,e204807e03edd25741f78750a3b81935","githubUser":"myreaderx19","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"5.5 KB","destSize":"4.1 KB","compressRate":"74.4%"}],"successGithubMap":{"myreaderx19":1},"failGithubMap":{"myreaderx23":1}}
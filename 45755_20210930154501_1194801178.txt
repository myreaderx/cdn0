{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2021-09-30 23:41:59","updatedTime":"2021-09-30 23:41:59","title":"The Azure Sentinel Anomalies Simulator","link":"https://techcommunity.microsoft.com/t5/azure-sentinel/the-azure-sentinel-anomalies-simulator/ba-p/2738393","description":"<H2>Introduction</H2>\n<P>&nbsp;</P>\n<P>We are pleased to announce the “Unusual Mass Downgrade AIP Label” anomaly simulator, the first in a series of simulators for Azure Sentinel Anomalies. This simulator will populate the table in Azure Sentinel monitored by the relevant anomaly rule with simulated data. This simulated data will trigger an anomaly. You can review the anomaly by querying the Anomalies table for the anomaly rule’s name. These simulators will enable users to validate that an anomaly rule works in their Sentinel workspace.</P>\n<P>&nbsp;</P>\n<H2>What is the Unusual Mass Downgrade AIP rule?</H2>\n<P>&nbsp;</P>\n<P><SPAN class=\"TextRun SCXW174255315 BCX0\" data-contrast=\"none\"><SPAN class=\"NormalTextRun SCXW174255315 BCX0\">The anomaly rule<SPAN>&nbsp;</SPAN></SPAN></SPAN><SPAN class=\"TextRun SCXW174255315 BCX0\" data-contrast=\"none\"><SPAN class=\"NormalTextRun SCXW174255315 BCX0\">\"Unusual Mass Downgrade AIP Label\"</SPAN></SPAN><SPAN class=\"TextRun SCXW174255315 BCX0\" data-contrast=\"none\"><SPAN class=\"NormalTextRun SCXW174255315 BCX0\"><SPAN>&nbsp;</SPAN>detects unusual high volume of downgrade label activity in Azure Information Protection (AIP) logs. It considers \"AIP\" workload records for a given number of days and determines the sequence of activity performed on documents along with the label applied to classify unusual volume of downgrade activity.<SPAN>&nbsp;</SPAN></SPAN><SPAN class=\"NormalTextRun SCXW174255315 BCX0\">Anomalies are saved to the<SPAN>&nbsp;</SPAN></SPAN></SPAN><SPAN class=\"TextRun SCXW174255315 BCX0\" data-contrast=\"none\"><SPAN class=\"NormalTextRun SCXW174255315 BCX0\">Anomalies</SPAN></SPAN><SPAN class=\"TextRun SCXW174255315 BCX0\" data-contrast=\"none\"><SPAN class=\"NormalTextRun SCXW174255315 BCX0\"><SPAN>&nbsp;</SPAN>table in your Azure Sentinel workspace. No alerts or incidents are generated by these anomalies. You can use anomalies to correlate with other signals to build threat detections, investigate an incident, or hunt for malicious actors.</SPAN></SPAN><SPAN class=\"EOP SCXW174255315 BCX0\" data-ccp-props=\"{&quot;201341983&quot;:0,&quot;335559685&quot;:228,&quot;335559739&quot;:54,&quot;335559740&quot;:259,&quot;335559991&quot;:10}\">&nbsp;</SPAN></P>\n<H2>&nbsp;</H2>\n<H2>Value for your Organization&nbsp;</H2>\n<P>&nbsp;</P>\n<P><STRONG><SPAN data-contrast=\"none\">End to End visibility -&nbsp;</SPAN></STRONG><SPAN data-contrast=\"none\">Enables analysts to gain a deeper understanding of the anomaly rules&nbsp;by injecting&nbsp;</SPAN><SPAN data-contrast=\"none\">simulated&nbsp;data while&nbsp;limiting impacts to production security operations. Familiarization with signals such as those identified in an anomaly rule can assist in production detection and deepen skills necessary to effectively identify malicious behaviors</SPAN><SPAN>&nbsp;</SPAN><SPAN>.</SPAN><SPAN data-ccp-props=\"{&quot;201341983&quot;:0,&quot;335559685&quot;:223,&quot;335559739&quot;:397,&quot;335559740&quot;:265,&quot;335559991&quot;:10}\">&nbsp;</SPAN></P>\n<P><SPAN data-ccp-props=\"{&quot;201341983&quot;:0,&quot;335559685&quot;:583,&quot;335559739&quot;:54,&quot;335559740&quot;:265,&quot;335559991&quot;:10}\">&nbsp;</SPAN></P>\n<P><STRONG><SPAN data-contrast=\"none\">Training,&nbsp;Building&nbsp;SOPs, Workflows, Playbooks</SPAN></STRONG><SPAN data-contrast=\"none\">&nbsp;– SOC operations rely on standardized responses, new rules require&nbsp;periods of observation by&nbsp;analysts&nbsp;to become familiar with the signals and indicators.&nbsp;The anomaly simulator provides a mechanism whereby&nbsp;analysts&nbsp;can preview the associated anomaly&nbsp;information&nbsp;broadly without compromising normal production analysis.&nbsp;</SPAN><SPAN>&nbsp;</SPAN><SPAN data-contrast=\"none\">Subsequent development of SOPs, Workflows and playbooks can&nbsp;complement&nbsp;training programs and overall knowledge enhancement.</SPAN><SPAN data-ccp-props=\"{&quot;201341983&quot;:0,&quot;335559685&quot;:583,&quot;335559739&quot;:57,&quot;335559740&quot;:259,&quot;335559991&quot;:10}\">&nbsp;</SPAN></P>\n<H2>&nbsp;</H2>\n<H2>Configuration Steps:</H2>\n<P>&nbsp;</P>\n<P><EM><STRONG>Source code</STRONG></EM> for the anomalies simulator is available on the Azure Sentinel&nbsp;<A href=\"https://cda.ms/2Mk\" target=\"_blank\" rel=\"noopener\"><STRONG><EM>Tools Simulators</EM></STRONG> GitHub&nbsp;</A>space.&nbsp;</P>\n<P>&nbsp;</P>\n<H3><FONT size=\"3\"><STRONG>Configure the Script</STRONG></FONT></H3>\n<UL>\n<LI>Edit the <EM>writetoLA-AIPMassDowngrade.txt</EM> file found on GitHub, save as PowerShell script (PS)</LI>\n</UL>\n<P>&nbsp;**Ensure your Log Analytics ID, Workspace ID and Tenant ID are correctly entered into the script</P>\n<DIV id=\"tinyMceEditorChuckW_3\" class=\"mceNonEditable lia-copypaste-placeholder\">&nbsp;</DIV>\n<P><span class=\"lia-inline-image-display-wrapper lia-image-align-center\" image-alt=\"Edit-PS.gif\" style=\"width: 999px;\"><img src=\"https://techcommunity.microsoft.com/t5/image/serverpage/image-id/309464iFEE567E0B10E417E/image-size/large?v=v2&amp;px=999\" role=\"button\" title=\"Edit-PS.gif\" alt=\"Edit-PS.gif\" /></span></P>\n<P>&nbsp;</P>\n<P>&nbsp;</P>\n<P><STRONG>Execute the Script&nbsp;</STRONG></P>\n<UL>\n<LI>Open your Azure Sentinel workspace and the Command Line Interface (CLI),\n<UL>\n<LI>Upload PS and .csv files</LI>\n<LI>Execute the script in the Azure CLI with the following command line; <STRONG>&amp; './WriteToLA - AIPMassDowngrade.ps1'</STRONG></LI>\n</UL>\n</LI>\n</UL>\n<P>&nbsp;</P>\n<P>&nbsp;</P>\n<LI-CODE lang=\"powershell\">&amp; './WriteToLA - AIPMassDowngrade.ps1'</LI-CODE>\n<P>&nbsp;</P>\n<P>&nbsp;</P>\n<P>&nbsp;</P>\n<P>&nbsp;</P>\n<P><STRONG><span class=\"lia-inline-image-display-wrapper lia-image-align-center\" image-alt=\"Importcsv.gif\" style=\"width: 999px;\"><img src=\"https://techcommunity.microsoft.com/t5/image/serverpage/image-id/309465iC4047DB08D423C11/image-size/large?v=v2&amp;px=999\" role=\"button\" title=\"Importcsv.gif\" alt=\"Importcsv.gif\" /></span><BR /></STRONG></P>\n<P>&nbsp;</P>\n<P><STRONG>Review the InformationProtection_CL table entries</STRONG></P>\n<P>KQL query:</P>\n<P>&nbsp;</P>\n<P>&nbsp;</P>\n<LI-CODE lang=\"powershell\">InformationProtectionLogs_CL | where ProtectionType_s == \"Simulated\"\nand Operation_s == \"AcquireLicense\" and Activity_s == \"DowngradeLabel\"</LI-CODE>\n<P>&nbsp;</P>\n<P>&nbsp;</P>\n<P>&nbsp;</P>\n<P>&nbsp;</P>\n<P class=\"lia-indent-padding-left-30px\"><span class=\"lia-inline-image-display-wrapper lia-image-align-center\" image-alt=\"InfoPro_CL.png\" style=\"width: 999px;\"><img src=\"https://techcommunity.microsoft.com/t5/image/serverpage/image-id/312455iC7A2FE2152580E69/image-size/large?v=v2&amp;px=999\" role=\"button\" title=\"InfoPro_CL.png\" alt=\"InfoPro_CL.png\" /></span></P>\n<P class=\"lia-indent-padding-left-30px\"><STRONG>Note</STRONG>:&nbsp; 62 simulated entries related to the <EM><STRONG>\"</STRONG><STRONG>Unusual MassDownload AIP Labe</STRONG><STRONG>l\"</STRONG></EM>&nbsp;have been added.&nbsp;&nbsp;</P>\n<P>&nbsp;</P>\n<P><STRONG>Review the Anomalies table entries</STRONG></P>\n<P>KQL query:</P>\n<P>&nbsp;</P>\n<P>&nbsp;</P>\n<LI-CODE lang=\"powershell\">Anomalies | where RuleName contains \"(Preview) Unusual mass downgrade AIP label\"</LI-CODE>\n<P>&nbsp;</P>\n<P>&nbsp;</P>\n<P>&nbsp;</P>\n<P>&nbsp;</P>\n<P><span class=\"lia-inline-image-display-wrapper lia-image-align-center\" image-alt=\"Query Results.png\" style=\"width: 999px;\"><img src=\"https://techcommunity.microsoft.com/t5/image/serverpage/image-id/312459iAD462EDBD7E40A63/image-size/large?v=v2&amp;px=999\" role=\"button\" title=\"Query Results.png\" alt=\"Query Results.png\" /></span></P>\n<P>&nbsp;</P>\n<P>The \"contains\" operator in the KQL query allows for viewing results in both Flighting and Production status.&nbsp; Results from the script will be immediately visible in the InformationProtection_CL table, but it may take up to 12 hours to show results in the Anomalies table depending on when the data is imported with the PS script.&nbsp;&nbsp;</P>\n<P>&nbsp;</P>\n<P>Reply in the comments section with questions related to this release as well as others anomaly simulators you make like to see.</P>","descriptionType":"text/html","publishedDate":"Thu, 30 Sep 2021 15:41:26 +0000","feedId":45755,"bgimg":"https://techcommunity.microsoft.com/t5/image/serverpage/image-id/309464iFEE567E0B10E417E/image-size/large?v=v2&px=999","linkMd5":"157b57ed1a9a3af4c640cbbc6c77fb15","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn43@2020_6/2021/09/30/15-42-26-215_af10faca85d43b2f.webp","destWidth":771,"destHeight":525,"sourceBytes":3436904,"destBytes":6508220,"author":"ChuckW","articleImgCdnMap":{"https://techcommunity.microsoft.com/t5/image/serverpage/image-id/309464iFEE567E0B10E417E/image-size/large?v=v2&px=999":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn43@2020_6/2021/09/30/15-42-26-215_af10faca85d43b2f.webp","https://techcommunity.microsoft.com/t5/image/serverpage/image-id/309465iC4047DB08D423C11/image-size/large?v=v2&px=999":null,"https://techcommunity.microsoft.com/t5/image/serverpage/image-id/312455iC7A2FE2152580E69/image-size/large?v=v2&px=999":"https://cdn.jsdelivr.net/gh/myreaderx/cdn55@2020_1/2021/09/30/15-42-29-084_8859fd12b65f3ffb.webp","https://techcommunity.microsoft.com/t5/image/serverpage/image-id/312459iAD462EDBD7E40A63/image-size/large?v=v2&px=999":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn59@2020_4/2021/09/30/15-42-29-614_7cf9bc1cc859f4b2.webp"},"publishedOrCreatedDate":1633016519340}],"record":{"createdTime":"2021-09-30 23:41:59","updatedTime":"2021-09-30 23:41:59","feedId":45755,"fetchDate":"Thu, 30 Sep 2021 15:41:59 +0000","fetchMs":588,"handleMs":89,"totalMs":182490,"newArticles":0,"totalArticles":100,"status":1,"type":0,"ip":"f306b40366a93aa712f78b685bea0f01","hostName":"us-016*","requestId":"944a4b9adcbe4ae6bb19d3496d2f5e70_45755","contentType":"text/xml;charset=UTF-8","totalBytes":6641282,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":4,"articlesImgsGithubTotal":3,"successGithubMap":{"myreaderx30":1,"myreaderx31":1,"myreaderx":1},"failGithubMap":{}},"feed":{"createdTime":"2020-09-07 03:39:21","updatedTime":"2020-09-07 05:57:38","id":45755,"name":"New blog articles in Microsoft Tech Community","url":"https://techcommunity.microsoft.com/gxcuf89792/rss/Community?interaction.style=blog","subscriber":70,"website":null,"icon":"https://techcommunity.microsoft.com/favicon.ico","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx65/cdn29@2020_5/2020/09/06/21-57-31-494_c526353fdcaee205.jpg","description":"Microsoft Tech Community","weekly":null,"link":null},"noPictureArticleList":[{"createdTime":"2021-09-30 23:45:01","updatedTime":"2021-09-30 23:45:01","id":null,"feedId":45755,"linkMd5":"157b57ed1a9a3af4c640cbbc6c77fb15"}],"tmpCommonImgCdnBytes":6508220,"tmpBodyImgCdnBytes":133062,"tmpBgImgCdnBytes":0,"extra4":{"start":1633016518517,"total":0,"statList":[{"spend":735,"msg":"获取xml内容"},{"spend":89,"msg":"解释文章"},{"spend":0,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":152648,"msg":"正文链接上传到cdn"}]},"extra5":4,"extra6":3,"extra7ImgCdnFailResultVector":[null,null],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://us-017.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe67.herokuapp.com/":{"failCount":1,"successCount":1,"resultList":[200,null]},"http://europe66.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"https://techcommunity.microsoft.com/t5/image/serverpage/image-id/309464iFEE567E0B10E417E/image-size/large?v=v2&px=999","sourceStatusCode":200,"destWidth":771,"destHeight":525,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn43@2020_6/2021/09/30/15-42-26-215_af10faca85d43b2f.webp","sourceBytes":3436904,"destBytes":6508220,"targetWebpQuality":75,"feedId":45755,"totalSpendMs":28875,"convertSpendMs":24830,"createdTime":"2021-09-30 23:41:59","host":"europe63*","referer":"https://techcommunity.microsoft.com/t5/azure-sentinel/the-azure-sentinel-anomalies-simulator/ba-p/2738393","linkMd5ListStr":"157b57ed1a9a3af4c640cbbc6c77fb15,157b57ed1a9a3af4c640cbbc6c77fb15","githubUser":"myreaderx30","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"3.3 MB","destSize":"6.2 MB","compressRate":"189.4%"},{"code":1,"isDone":false,"source":"https://techcommunity.microsoft.com/t5/image/serverpage/image-id/312455iC7A2FE2152580E69/image-size/large?v=v2&px=999","sourceStatusCode":200,"destWidth":999,"destHeight":521,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx/cdn55@2020_1/2021/09/30/15-42-29-084_8859fd12b65f3ffb.webp","sourceBytes":247033,"destBytes":82942,"targetWebpQuality":75,"feedId":45755,"totalSpendMs":981,"convertSpendMs":61,"createdTime":"2021-09-30 23:42:28","host":"us-017*","referer":"https://techcommunity.microsoft.com/t5/azure-sentinel/the-azure-sentinel-anomalies-simulator/ba-p/2738393","linkMd5ListStr":"157b57ed1a9a3af4c640cbbc6c77fb15","githubUser":"myreaderx","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"241.2 KB","destSize":"81 KB","compressRate":"33.6%"},{"code":1,"isDone":false,"source":"https://techcommunity.microsoft.com/t5/image/serverpage/image-id/312459iAD462EDBD7E40A63/image-size/large?v=v2&px=999","sourceStatusCode":200,"destWidth":998,"destHeight":522,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn59@2020_4/2021/09/30/15-42-29-614_7cf9bc1cc859f4b2.webp","sourceBytes":249588,"destBytes":50120,"targetWebpQuality":75,"feedId":45755,"totalSpendMs":1623,"convertSpendMs":29,"createdTime":"2021-09-30 23:42:28","host":"europe67*","referer":"https://techcommunity.microsoft.com/t5/azure-sentinel/the-azure-sentinel-anomalies-simulator/ba-p/2738393","linkMd5ListStr":"157b57ed1a9a3af4c640cbbc6c77fb15","githubUser":"myreaderx31","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"243.7 KB","destSize":"48.9 KB","compressRate":"20.1%"}],"successGithubMap":{"myreaderx30":1,"myreaderx31":1,"myreaderx":1},"failGithubMap":{}}
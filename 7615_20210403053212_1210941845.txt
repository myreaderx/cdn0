{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2021-04-03 13:30:45","updatedTime":"2021-04-03 13:30:45","title":"用 Code Snippet 提高开发效率","link":"https://lutaonan.com/blog/how-to-use-code-snippets/","description":"<p>写代码的时候总会遇到一些相同的但是反复要写的代码，比方说每次写一个 React Component, 都要这样写一遍：</p>\n<pre><code class=\"language-js\">function App () {\n  return (\n    &lt;&gt;\n    &lt;/&gt;\n  )\n}\n\nexport default App\n</code></pre>\n<p>这时候很适合把他写成 Code Snippet, 让编辑器帮我去生成。每个编辑器或 IDE 都有 Snippet 功能，我自己常用 VS Code, 所以我会去写一些 VS Code 的 Snippet 文件。</p>\n<blockquote>\n<p>VS Code code snippet 的配置入口：</p>\n<p><img src=\"https://gbstatic.djyde.com/uPic/cXvY0y.png?x-oss-process=style/80\" alt=\"VS Code code snippet 配置入口\"></p>\n</blockquote>\n<p>VS Code code snippet 配置是一个 JSON 文件，按照<a href=\"https://code.visualstudio.com/docs/editor/userdefinedsnippets#_creating-your-own-snippets\">它的语法</a>, 我可以这样去实现一个上面提到的，用于生成 React Component 代码的 snippet:</p>\n<pre><code class=\"language-json\">{\n  &quot;fc&quot;: {\n    &quot;scope&quot;: &quot;javascript,typescript,typescriptreact&quot;,\n    &quot;description&quot;: &quot;React Function Component&quot;,\n    &quot;body&quot;: [\n      &quot;function ${componentName} () {&quot;,\n      &quot;  return (&quot;,\n      &quot;    &lt;&gt;&quot;,\n      &quot;    &lt;/&gt;&quot;,\n      &quot;  )&quot;,\n      &quot;}&quot;,\n      &quot;&quot;,\n      &quot;export default ${componentName}&quot;\n    ],\n    &quot;prefix&quot;: &quot;fc&quot;\n  }\n}\n</code></pre>\n<p>然后我在编辑器里只要输入 <code>fc</code>, 就可以选择这个 snippet:</p>\n<p><img src=\"https://gbstatic.djyde.com/uPic/8hdVZE.gif\" alt=\"\"></p>\n<p>用 Snippet 很方便，但是编写这个 Snippet 体验非常糟糕，因为需要把代码块一行一行地转换成字符串，空格也要自己加。</p>\n<p>我想这也是我身边这么少人用 Snippet 的原因，我自己也深受其害。为了方便管理我的 Snippets 以及方便地导出为 VS Code code-snippets 文件，我写了个程序，可以让我把每个 snippet 写到单独的文件里，然后输出 VS Code code-snippets 格式的 JSON.</p>\n<h2 id=\"%E7%94%A8-snp-%E7%AE%A1%E7%90%86-snippets\">用 snp 管理 snippets</h2>\n<blockquote>\n<p>目前只适用于 VS Code</p>\n</blockquote>\n<p>这个程序叫 <code>snp</code>, 你可以用 curl 直接安装这个程序：</p>\n<pre><code class=\"language-bash\">$ curl -sf https://gobinaries.com/djyde/snp | sh\n</code></pre>\n<p>于是，我现在管理 snippets 非常轻松。创建一个目录，用来存放这些 snippets,</p>\n<pre><code class=\"language-bash\">$ mkdir snippets\n$ cd snippets\n</code></pre>\n<p>然后我就可以创建我的 snippets, 以触发的词作为文件名，<code>.snp</code> 作为后缀。例如我创建一个输入 <code>fc</code> 就会触发的 snippet:</p>\n<pre><code class=\"language-bash\">$ touch fc.snp\n</code></pre>\n<p>在 <code>.snp</code> 文件里，你可以按照 <a href=\"https://code.visualstudio.com/docs/editor/userdefinedsnippets#_snippet-syntax\">snippet 语法</a> 直接写你需要生成的代码，然后在文件的头部加上必要的信息：</p>\n<pre><code class=\"language-js\">---\nscope: javascript,typescript,typescriptreact\ndescription: React Function Component\n---\n\nfunction ${componentName} () {\n  return (\n    &lt;&gt;\n    &lt;/&gt;\n  )\n}\n\nexport default ${componentName}\n</code></pre>\n<blockquote>\n<p><code>scope</code> 指定了这个 snippet 在哪个语言环境生效，具体可以参照 <a href=\"https://code.visualstudio.com/docs/editor/userdefinedsnippets\">VS Code 的文档</a></p>\n</blockquote>\n<p>然后执行：</p>\n<pre><code class=\"language-bash\">$ snp -p\n</code></pre>\n<p>你会看到命令输出了一段 JSON, 你可以把这段 JSON 写入文件里:</p>\n<pre><code class=\"language-bash\">$ snp -p &gt; my-snippets.code-snippets\n</code></pre>\n<p>然后手动复制到 VS Code 的 snippets 文件里。</p>\n<blockquote>\n<p>当然，如果你嫌每次更新都要手动复制很麻烦，你可以直接运行：</p>\n<pre><code class=\"language-bash\">$ snp -u\n</code></pre>\n<p>这样 snippets 会自动写到 VS Code 的目录里，你不需要手动更新。</p>\n</blockquote>\n<p>这样就可以像我一样，在一个文件夹里统一管理 snippets, 用 snp 同步到 VS Code,还能上传到 GitHub:</p>\n<p><img src=\"https://gbstatic.djyde.com/uPic/s6ER6t.png?x-oss-process=style/80\" alt=\"我的 snippets 目录\"></p>\n<p><img src=\"https://gbstatic.djyde.com/uPic/fveMJq.gif\" alt=\"\"></p>\n<br>\n<hr>\n<br>\n<ul>\n<li>snp 是一个开源项目：<a href=\"https://github.com/djyde/snp\">https://github.com/djyde/snp</a>. 用 Go 编写。</li>\n<li>这是我的 snippets 仓库：<a href=\"https://github.com/djyde/snippets\">https://github.com/djyde/snippets</a></li>\n</ul>\n","descriptionType":"html","feedId":7615,"bgimg":"https://gbstatic.djyde.com/uPic/cXvY0y.png?x-oss-process=style/80","linkMd5":"e24a0dd6082e45b19f0158af472a0d68","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn61@2020_3/2021/04/03/05-30-48-700_6b1b7cd5d92e2d2b.webp","destWidth":1862,"destHeight":498,"sourceBytes":94573,"destBytes":34446,"author":"","articleImgCdnMap":{"https://gbstatic.djyde.com/uPic/cXvY0y.png?x-oss-process=style/80":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn61@2020_3/2021/04/03/05-30-48-700_6b1b7cd5d92e2d2b.webp","https://gbstatic.djyde.com/uPic/8hdVZE.gif":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn70@2020_2/2021/04/03/05-32-10-615_34d0d01575c2a4a0.webp","https://gbstatic.djyde.com/uPic/s6ER6t.png?x-oss-process=style/80":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn74@2020_5/2021/04/03/05-30-51-424_a98395bd86cf4d61.webp","https://gbstatic.djyde.com/uPic/fveMJq.gif":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn66@2020_2/2021/04/03/05-32-11-040_f4113863e2003c63.webp"},"publishedOrCreatedDate":1617427845179}],"record":{"createdTime":"2021-04-03 13:30:45","updatedTime":"2021-04-03 13:30:45","feedId":7615,"fetchDate":"Sat, 03 Apr 2021 05:30:45 +0000","fetchMs":151,"handleMs":111,"totalMs":87187,"newArticles":0,"totalArticles":65,"status":1,"type":0,"ip":"2e8f68b34efb8e540d323838b02f3a54","hostName":"us-006*","requestId":"2eaf27565c114d018d2fadbe2ead6171_7615","contentType":"application/xml","totalBytes":4155112,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":4,"articlesImgsGithubTotal":4,"successGithubMap":{"myreaderx4":1,"myreaderx12":1,"myreaderx30":1,"myreaderx19":1},"failGithubMap":{}},"feed":{"createdTime":"2020-08-25 04:33:47","updatedTime":"2020-09-05 15:40:21","id":7615,"name":"Randy's Blog","url":"https://lutaonan.com/rss.xml","subscriber":null,"website":null,"icon":"https://lutaonan.com/favicon.ico","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx63/cdn97@2020_3/2020/09/05/07-40-21-077_4647f34790f29444.ico","description":"Randy is blogging about life, tech and music.","weekly":null,"link":null},"noPictureArticleList":[],"tmpCommonImgCdnBytes":34446,"tmpBodyImgCdnBytes":4120666,"tmpBgImgCdnBytes":0,"extra4":{"start":1617427844859,"total":0,"statList":[{"spend":212,"msg":"获取xml内容"},{"spend":111,"msg":"解释文章"},{"spend":0,"msg":"上传封面图到cdn"},{"spend":1,"msg":"修正封面图上传失败重新上传"},{"spend":83054,"msg":"正文链接上传到cdn"}]},"extra5":4,"extra6":4,"extra7ImgCdnFailResultVector":[null,null],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://us-018.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://europe68.herokuapp.com/":{"failCount":0,"successCount":3,"resultList":[200,200,200]},"http://us-005.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"https://gbstatic.djyde.com/uPic/cXvY0y.png?x-oss-process=style/80","sourceStatusCode":200,"destWidth":1862,"destHeight":498,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn61@2020_3/2021/04/03/05-30-48-700_6b1b7cd5d92e2d2b.webp","sourceBytes":94573,"destBytes":34446,"targetWebpQuality":75,"feedId":7615,"totalSpendMs":3745,"convertSpendMs":269,"createdTime":"2021-04-03 13:30:45","host":"us-030*","referer":"https://lutaonan.com/blog/how-to-use-code-snippets/","linkMd5ListStr":"e24a0dd6082e45b19f0158af472a0d68,e24a0dd6082e45b19f0158af472a0d68","githubUser":"myreaderx30","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"92.4 KB","destSize":"33.6 KB","compressRate":"36.4%"},{"code":1,"isDone":false,"source":"https://gbstatic.djyde.com/uPic/s6ER6t.png?x-oss-process=style/80","sourceStatusCode":200,"destWidth":2142,"destHeight":1340,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn74@2020_5/2021/04/03/05-30-51-424_a98395bd86cf4d61.webp","sourceBytes":236698,"destBytes":66486,"targetWebpQuality":75,"feedId":7615,"totalSpendMs":2982,"convertSpendMs":175,"createdTime":"2021-04-03 13:30:49","host":"europe68*","referer":"https://lutaonan.com/blog/how-to-use-code-snippets/","linkMd5ListStr":"e24a0dd6082e45b19f0158af472a0d68","githubUser":"myreaderx19","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"231.2 KB","destSize":"64.9 KB","compressRate":"28.1%"},{"code":1,"isDone":false,"source":"https://gbstatic.djyde.com/uPic/8hdVZE.gif","sourceStatusCode":200,"destWidth":2652,"destHeight":1076,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn70@2020_2/2021/04/03/05-32-10-615_34d0d01575c2a4a0.webp","sourceBytes":630981,"destBytes":2180210,"targetWebpQuality":75,"feedId":7615,"totalSpendMs":22058,"convertSpendMs":20267,"createdTime":"2021-04-03 13:31:49","host":"europe68*","referer":"https://lutaonan.com/blog/how-to-use-code-snippets/","linkMd5ListStr":"e24a0dd6082e45b19f0158af472a0d68","githubUser":"myreaderx4","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"616.2 KB","destSize":"2.1 MB","compressRate":"345.5%"},{"code":1,"isDone":false,"source":"https://gbstatic.djyde.com/uPic/fveMJq.gif","sourceStatusCode":200,"destWidth":1554,"destHeight":708,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn66@2020_2/2021/04/03/05-32-11-040_f4113863e2003c63.webp","sourceBytes":653385,"destBytes":1873970,"targetWebpQuality":75,"feedId":7615,"totalSpendMs":22554,"convertSpendMs":20760,"createdTime":"2021-04-03 13:31:49","host":"europe68*","referer":"https://lutaonan.com/blog/how-to-use-code-snippets/","linkMd5ListStr":"e24a0dd6082e45b19f0158af472a0d68","githubUser":"myreaderx12","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"638.1 KB","destSize":"1.8 MB","compressRate":"286.8%"}],"successGithubMap":{"myreaderx4":1,"myreaderx12":1,"myreaderx30":1,"myreaderx19":1},"failGithubMap":{}}
{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2022-03-14 18:41:18","updatedTime":"2022-03-14 18:41:18","title":"Bava Multi-Region Cluster Cause I Can!","link":"https://bavatuesdays.com/?p=26245","description":"<p>This is a test to see if I can post after having migrated this blog to a <a href=\"https://bavatuesdays.com/wordpress-multi-region-on-reclaim-cloud/\">WordPress multi-region setup on Reclaim Cloud</a>, which means the primary blog hosted in the UK is being replicated to Toronto, Canada and the West Coast of the USA. If there should be an issue in the primary data center in the UK the site will fail over to Canada or the US. I have not configured that entirely yet, but I did want to see if posting works before I get too excited (last time I tried this I could not post, hence I retreated to the stand-alone instance).</p>\n<p>Is this overkill for my purposes? Absolutely. Is it a blast to play with? Absolutely.</p>\n<p><img src=\"https://media.giphy.com/media/26gs9nlmNcGdvrhIs/giphy.gif\" /></p>\n<p>I had some issues getting my embeds to work on this new setup given the Content Security Policy through Litespeed was set quite strict. It took me some time to hunt all that down, and I am not sure I have it set ideally yet, but I was able to find the vhconf.xml file in <code>/var/www/conf</code> and modify it to specify what URLs are allowed to be embedded. I imagine this is safer, but also wondering how many embeds are now broken on this blog of just one post shy of 3600!</p>\n<p>Here is the bit for the content-security-policy in virtualhost conf file that I added for frame-ancestors and frame-src:</p>\n<p><code>Content-Security-Policy \"frame-ancestors data:;frame-src https://bava.tv https://youtube.com https://twitter.com https://platform.twitter.com https://www.youtube.com https://bavatuesdays.com;\"</code></p>\n<p>I am going to be playing more with this until Wednesday when I present my findings to the rest of the Reclaim Hosting team, but in the interim let&#8217;s just see if this post works&#8230;.</p>\n","descriptionType":"html","publishedDate":"Mon, 07 Mar 2022 15:02:54 +0000","feedId":46385,"bgimg":"https://media.giphy.com/media/26gs9nlmNcGdvrhIs/giphy.gif","linkMd5":"8630a2357f344f17e2cba271e6138dad","destWidth":480,"destHeight":349,"sourceBytes":5472589,"destBytes":1478162,"author":"Reverend","articleImgCdnMap":{"https://media.giphy.com/media/26gs9nlmNcGdvrhIs/giphy.gif":null},"publishedOrCreatedDate":1647254478461}],"record":{"createdTime":"2022-03-14 18:41:18","updatedTime":"2022-03-14 18:41:18","feedId":46385,"fetchDate":"Mon, 14 Mar 2022 10:41:18 +0000","fetchMs":60687,"handleMs":53,"totalMs":71009,"newArticles":0,"totalArticles":12,"status":1,"type":0,"ip":"f306b40366a93aa712f78b685bea0f01","hostName":"us-017*","requestId":"1cf27b80f85b4002a8f3a261a93e38c0_46385","contentType":"application/rss+xml; charset=UTF-8","totalBytes":0,"bgimgsTotal":1,"bgimgsGithubTotal":0,"articlesImgsTotal":1,"articlesImgsGithubTotal":0,"successGithubMap":{},"failGithubMap":{"myreaderx31":1}},"feed":{"createdTime":"2020-09-07 03:41:36","updatedTime":"2020-09-07 05:59:47","id":46385,"name":"bavatuesdays","url":"http://bavatuesdays.com/feed/","subscriber":69,"website":null,"icon":"https://bavatuesdays.com/wp-content/uploads/2015/07/cropped-cropped-barbara-steele-images-1-32x32.jpg","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx61/cdn20@2020_4/2020/09/06/21-59-45-965_ba441d2976d2bf6a.jpg","description":"a \"b\" blog","weekly":null,"link":null},"noPictureArticleList":[{"createdTime":"2022-03-14 18:41:28","updatedTime":"2022-03-14 18:41:28","id":null,"feedId":46385,"linkMd5":"8630a2357f344f17e2cba271e6138dad"}],"tmpCommonImgCdnBytes":0,"tmpBodyImgCdnBytes":0,"tmpBgImgCdnBytes":0,"extra4":{"start":1647254417641,"total":0,"statList":[{"spend":60767,"msg":"获取xml内容"},{"spend":53,"msg":"解释文章"},{"spend":0,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":0,"msg":"正文链接上传到cdn"}]},"extra5":1,"extra6":1,"extra7ImgCdnFailResultVector":[{"code":1,"isDone":false,"source":"https://media.giphy.com/media/26gs9nlmNcGdvrhIs/giphy.gif","sourceStatusCode":200,"destWidth":480,"destHeight":349,"sourceBytes":5472589,"destBytes":1478162,"targetWebpQuality":67,"feedId":46385,"totalSpendMs":5120,"convertSpendMs":4282,"createdTime":"2022-03-14 18:41:18","host":"us-040*","referer":"https://bavatuesdays.com/?p=26245","linkMd5ListStr":"8630a2357f344f17e2cba271e6138dad,8630a2357f344f17e2cba271e6138dad","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx31/cdn66/contents/2022/03/14/10-41-23-468_f52bae1e8157b963.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 69855631.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Resource, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, X-GitHub-SSO, X-GitHub-Request-Id, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Mon, 14 Mar 2022 10:41:23 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["A4CC:0DA9:2E0FB4C:6705800:622F1BD3"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1647256480"],"x-ratelimit-resource":["core"],"x-ratelimit-used":["61"],"x-xss-protection":["0"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx31/cdn66/contents/2022/03/14/10-41-23-468_f52bae1e8157b963.webp","historyStatusCode":[],"spendMs":88},"base64UserPassword":null,"token":"da243******************************d9e47"},"githubUser":"myreaderx31","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"5.2 MB","destSize":"1.4 MB","compressRate":"27%"},{"code":1,"isDone":false,"source":"https://media.giphy.com/media/26gs9nlmNcGdvrhIs/giphy.gif","sourceStatusCode":200,"destWidth":480,"destHeight":349,"sourceBytes":5472589,"destBytes":1478162,"targetWebpQuality":67,"feedId":46385,"totalSpendMs":5049,"convertSpendMs":4838,"createdTime":"2022-03-14 18:41:23","host":"us-040*","referer":"https://bavatuesdays.com/?p=26245","linkMd5ListStr":"8630a2357f344f17e2cba271e6138dad,8630a2357f344f17e2cba271e6138dad","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx31/cdn66/contents/2022/03/14/10-41-28-535_f52bae1e8157b963.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 69855631.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Resource, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, X-GitHub-SSO, X-GitHub-Request-Id, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Mon, 14 Mar 2022 10:41:28 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["A4CC:0DA9:2E0FC21:6705A57:622F1BD8"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1647256480"],"x-ratelimit-resource":["core"],"x-ratelimit-used":["61"],"x-xss-protection":["0"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx31/cdn66/contents/2022/03/14/10-41-28-535_f52bae1e8157b963.webp","historyStatusCode":[],"spendMs":77},"base64UserPassword":null,"token":"da243******************************d9e47"},"githubUser":"myreaderx31","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"5.2 MB","destSize":"1.4 MB","compressRate":"27%"}],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{},"extra12ImgCdnSuccessResultVector":[],"successGithubMap":{},"failGithubMap":{"myreaderx31":1}}
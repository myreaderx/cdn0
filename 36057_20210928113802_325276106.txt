{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2021-09-28 19:37:12","updatedTime":"2021-09-28 19:37:12","title":"JSON is Robot Barf","link":"https://www.windley.com/archives/2021/09/json_is_robot_barf.shtml","description":"<p><em><b>Summary:</b> JSON has its place. But I think we're overusing it in places where a good notation would serve us better.</em></p> \n<img style=\"margin-top: 10px; margin-bottom: 10px\" src=\"https://www.windley.com/archives/2021/09/android-1693794_1920.png\" border=\"0\" align=\"center\" title=\"Sick Robot\" alt=\"Sick Robot\" /> \n<p> JSON is robot barf. Don't get me wrong. JSON is a fine serialization format for data and I have no problem with it in that context. My beef is with the use of JSON for configuration files, policy specs, and so on. If JSON were all we had, then we'd have to live with it. But we've been building parsers for almost 70 years now. The technology is well understood. There are multiple libraries in every language for parsing. And yet, even very mature, well supported frameworks and platforms persist in using JSON instead of a human-friendly notation. </p> \n<p> When a system requires programmers to use JSON, what they're effectively asking developers to use an \"abstract\" syntax instead of a \"concrete\" syntax. Here's what I mean. This is a function definition in concrete syntax: </p> \n<img style=\"margin-top: 10px; margin-bottom: 10px\" src=\"https://www.windley.com/archives/2021/09/concrete_syntax.png\" border=\"0\" align=\"center\" title=\"Concrete Syntax\" alt=\"Concrete Syntax\" /> \n<p> And here's the same function definition expressed as an abstract syntax tree (AST) serialized as JSON: </p> \n<img style=\"margin-top: 10px; margin-bottom: 10px\" src=\"https://www.windley.com/archives/2021/09/abstract_syntax.png\" border=\"0\" align=\"center\" title=\"Abstract Syntax\" alt=\"Abstract Syntax\" /> \n<p> I don't know any programmer who'd prefer to write the abstract syntax instead of the concrete. Can you imagine an entire program expressed like that? Virtually unreadable and definitely not maintainable. <a href=\"https://blog.sessionstack.com/how-javascript-works-parsing-abstract-syntax-trees-asts-5-tips-on-how-to-minimize-parse-time-abfcf7e8a0c8\"> Parsing can take as much as 20% of the time taken to compile code</a>, so there's a clear performance win in using abstract syntax over concrete, but even so we, correctly, let the machine do the work. </p> \n<p> I get that systems often start out simply with simple configuration. Some inputs are just hierarchies of data. But that often gets more complicated over time. And spending time figuring out the parser when you're excited to just get it working can feel like a burden. But taking the shortcut of making developers and others write the configuration in abstract syntax instead of letting the computer do the work is a mistake. </p> \n<p> I'd like to say that the problem is that not enough programmers have a proper CS education, but I fear that's not true. I suspect that even people who've studied CS aren't comfortable with parsing and developing notations. Maybe it's because we treat the subject too esoterically—seemingly useful for people designing a programming language, but not much else. And students pick up on that and figure this is something, like calculus, they're unlikely to ever use IRL. What if programming langauge classes helped students learn the joy and benefit of building little languages instead? </p> \n<p> I'm a big believer in the power of notation. And I think we too often shy away from designing the right notation for the job. As I wrote about <a href=\"https://www.windley.com/archives/2007/11/domain_specific_language.shtml\">Domain Specific Languages</a> (DSLs) in 2007: </p> \n<blockquote> \n <p> I'm in the middle of reading Walter Isaacson's new biography of Einstein. It's clear that notation played a major role in his ability to come up with the principle of general relativity. He demurred at first, believing that the math was for someone else to come along later and tidy up. But later in his life, after the experience of working on general relativity, Einstein became an ardent convert.</p> \n <p> Similarly, there is power in notation for computing tasks. Not merely the advantage of parameterized execution but in it's ability to allow us to think about problems, express them so that other's can clearly and unambiguously see our thoughts, and collaborate to create joint solutions. What's more, languages can be versioned. GUI configurations are hard to version. Notation has advantages even when it's not executed.</p> \n <p> The DSL becomes the focal point for design activities. The other day, I was having a discussion with three friends about a particular feature. Pulling out pencil and paper and writing what the DSL would need to look like to support the feature helped all of us focus and come up with solutions. Without such a tool, I'm not sure how we would have communicated the issues or whether we'd have all had the same conception of them and the ultimate solution we reached.</p> \n</blockquote> \n<p> As this points out, clear notations have advantages beyond being easier to write and understand. They also provide the means to easily share and think about the problem. I think system designers would be better off if we spent more time thinking about the notation developers will use when they configure and use our systems, making it clear and easy to read and write. Good notation is a thinking tool, not just a way to control the system. The result will be increased expressiveness, design leverage, and freedom. </p> \n<hr class=\"alt\" /> \n<p>Photo Credit: <a href=\"https://pixabay.com/illustrations/android-robot-smartphone-signet-1693794/\">Sick Android</a> from gfk DSGN (Pixabay)</p> \n<p>Tags: <a href=\"https://www.windley.com/tags/programming\" rel=\"nofollow\"><span class=\"label label-info\">programming</span></a> <a href=\"https://www.windley.com/tags/systems\" rel=\"nofollow\"><span class=\"label label-info\">systems</span></a> <a href=\"https://www.windley.com/tags/json\" rel=\"nofollow\"><span class=\"label label-info\">json</span></a> <a href=\"https://www.windley.com/tags/parsing\" rel=\"nofollow\"><span class=\"label label-info\">parsing</span></a> </p>","descriptionType":"text/html","publishedDate":"Mon, 20 Sep 2021 21:57:25 +0000","feedId":36057,"bgimg":"https://www.windley.com/archives/2021/09/android-1693794_1920.png","linkMd5":"0a99741a0dd82882f67a40258f4a4490","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn12@2020_3/2021/09/28/11-37-34-460_126951244ef2c91e.webp","destWidth":1887,"destHeight":1013,"sourceBytes":972715,"destBytes":81060,"author":"","articleImgCdnMap":{"https://www.windley.com/archives/2021/09/android-1693794_1920.png":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn12@2020_3/2021/09/28/11-37-34-460_126951244ef2c91e.webp","https://www.windley.com/archives/2021/09/concrete_syntax.png":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn15@2020_4/2021/09/28/11-37-37-527_b917907524aee6d2.webp","https://www.windley.com/archives/2021/09/abstract_syntax.png":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn20@2020_5/2021/09/28/11-37-35-942_8c1ae02189d20adf.webp"},"publishedOrCreatedDate":1632829032232}],"record":{"createdTime":"2021-09-28 19:37:12","updatedTime":"2021-09-28 19:37:12","feedId":36057,"fetchDate":"Tue, 28 Sep 2021 11:37:12 +0000","fetchMs":89,"handleMs":405,"totalMs":26716,"newArticles":0,"totalArticles":10,"status":1,"type":0,"ip":"79b59b7ab14b8d981e3d8a220e20848a","hostName":"us-025*","requestId":"0b4f63287655417fb86d3de9f3b5a221_36057","contentType":"text/xml","totalBytes":116384,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":3,"articlesImgsGithubTotal":3,"successGithubMap":{"myreaderx8":1,"myreaderx16":1,"myreaderx12":1},"failGithubMap":{}},"feed":{"createdTime":"2020-09-07 03:06:33","updatedTime":"2020-09-07 05:19:43","id":36057,"name":"Phil Windley's Technometria","url":"http://www.windley.com/rss.xml","subscriber":89,"website":null,"icon":"https://www.windley.com/img/favicon.png","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx65/cdn14@2020_3/2020/09/06/21-19-40-567_271faf2799c7fbdc.png","description":"Building the Internet of My Things","weekly":null,"link":null},"noPictureArticleList":[],"tmpCommonImgCdnBytes":81060,"tmpBodyImgCdnBytes":35324,"tmpBgImgCdnBytes":0,"extra4":{"start":1632829031725,"total":0,"statList":[{"spend":103,"msg":"获取xml内容"},{"spend":405,"msg":"解释文章"},{"spend":0,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":3511,"msg":"正文链接上传到cdn"}]},"extra5":3,"extra6":3,"extra7ImgCdnFailResultVector":[],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://europe-25.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-012.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"https://www.windley.com/archives/2021/09/android-1693794_1920.png","sourceStatusCode":200,"destWidth":1887,"destHeight":1013,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn12@2020_3/2021/09/28/11-37-34-460_126951244ef2c91e.webp","sourceBytes":972715,"destBytes":81060,"targetWebpQuality":75,"feedId":36057,"totalSpendMs":1381,"convertSpendMs":443,"createdTime":"2021-09-28 19:37:33","host":"us-024*","referer":"https://www.windley.com/archives/2021/09/json_is_robot_barf.shtml","linkMd5ListStr":"0a99741a0dd82882f67a40258f4a4490,0a99741a0dd82882f67a40258f4a4490","githubUser":"myreaderx16","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"949.9 KB","destSize":"79.2 KB","compressRate":"8.3%"},{"code":1,"isDone":false,"source":"https://www.windley.com/archives/2021/09/abstract_syntax.png","sourceStatusCode":200,"destWidth":1682,"destHeight":678,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn20@2020_5/2021/09/28/11-37-35-942_8c1ae02189d20adf.webp","sourceBytes":238748,"destBytes":27158,"targetWebpQuality":75,"feedId":36057,"totalSpendMs":1483,"convertSpendMs":157,"createdTime":"2021-09-28 19:37:35","host":"europe-25*","referer":"https://www.windley.com/archives/2021/09/json_is_robot_barf.shtml","linkMd5ListStr":"0a99741a0dd82882f67a40258f4a4490","githubUser":"myreaderx12","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"233.2 KB","destSize":"26.5 KB","compressRate":"11.4%"},{"code":1,"isDone":false,"source":"https://www.windley.com/archives/2021/09/concrete_syntax.png","sourceStatusCode":200,"destWidth":1640,"destHeight":286,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn15@2020_4/2021/09/28/11-37-37-527_b917907524aee6d2.webp","sourceBytes":72287,"destBytes":8166,"targetWebpQuality":75,"feedId":36057,"totalSpendMs":999,"convertSpendMs":22,"createdTime":"2021-09-28 19:37:37","host":"us-012*","referer":"https://www.windley.com/archives/2021/09/json_is_robot_barf.shtml","linkMd5ListStr":"0a99741a0dd82882f67a40258f4a4490","githubUser":"myreaderx8","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"70.6 KB","destSize":"8 KB","compressRate":"11.3%"}],"successGithubMap":{"myreaderx8":1,"myreaderx16":1,"myreaderx12":1},"failGithubMap":{}}
{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2021-10-01 10:07:50","updatedTime":"2021-10-01 10:07:50","title":"Mindful architecture: Headspace’s refactor to scale","link":"http://feedproxy.google.com/~r/blogspot/hsDu/~3/HnEwXuDiRjw/investing-in-app-excellence-headspaces.html","description":"<meta name=\"twitter:image\" content=\"https://1.bp.blogspot.com/-snQYBXTn-iM/YVS_F7qnWLI/AAAAAAAAQ-g/Xf3FmdO6a6Acmjq6lzKpFos029wL5351QCLcBGAsYHQ/s0/200588933__34990475__148018.png\"> \n <img style=\"display:none\" src=\"https://1.bp.blogspot.com/-snQYBXTn-iM/YVS_F7qnWLI/AAAAAAAAQ-g/Xf3FmdO6a6Acmjq6lzKpFos029wL5351QCLcBGAsYHQ/s0/200588933__34990475__148018.png\"> <p><em>Posted by Manuel Vicente Vivo, Android Developer Relations Engineer</em><p> <p><em>Contributors: Mauricio Vergara, Product Marketing Manager, Developer Marketing, Marialaura Garcia, Associate Product Marketing Manager, Developer Marketing</em><p> \n      <center> \n       <a href=\"https://1.bp.blogspot.com/-snQYBXTn-iM/YVS_F7qnWLI/AAAAAAAAQ-g/Xf3FmdO6a6Acmjq6lzKpFos029wL5351QCLcBGAsYHQ/s0/200588933__34990475__148018.png\" imageanchor=\"1\"><img style=\"width:100%\" alt=\"Headspace Technical case study graphic\" id=\"imgFull\" border=\"0\" src=\"http://feeds.feedburner.com/~ff/blogspot/ https://1.bp.blogspot.com/-YGhph7EgqT8/YKMbWIAO4UI/AAAAAAAAQjM/nOffYqFRx-8n6Sc7uUk1fpmqpFEHUf9egCLcBGAsYHQ/s0/ https://1.bp.blogspot.com/-snQYBXTn-iM/YVS_F7qnWLI/AAAAAAAAQ-g/Xf3FmdO6a6Acmjq6lzKpFos029wL5351QCLcBGAsYHQ/s0/200588933__34990475__148018.png\" data-original-width=\"1058\" data-original-height=\"714\" /></a> \n      </center> <br> <br> <h2>Executive Summary</h2> <p> Headspace was ready to launch new wellness and fitness features, but their app architecture wasn’t. They spent eight months refactoring to a Model-View-ViewModel architecture, rewriting in Kotlin and improving test coverage from 15 to 80%. The improved app experience increased MAU by 15% and increased review scores from 3.5 to 4.7 between Q2 and Q4 of 2020. To learn more about how Headspace’s focus on <a href=\"https://developer.android.com/quality\">Android Excellence</a> impacted their business, read the accompanying case study <a href=\"https://developer.android.com/stories/apps/headspace-excellence?hl=en\">here</a>. </p> <br> <h2>Introduction</h2> <p> <a href=\"https://play.google.com/store/apps/details?id=com.getsomeheadspace.android&amp;hl=en&amp;gl=US\">Headspace</a> has grown into a leader in mindfulness by creating an app which helps millions of people to meditate daily. Mindfulness goes far beyond meditation, it connects to all aspects of a person’s life. That idea prompted the most recent stage in Headspace’s evolution. In 2019, they decided to expand beyond meditation and add new fitness and wellness features to their Android app. Headspace realized that they would need a cross-functional team of engineers and designers to be able to deliver on the new product vision and create <a href=\"https://android-developers.googleblog.com/2021/08/working-towards-android-app-excellence.html\">an excellent app experience for users.</a> An exciting new phase for the company: their design team started the process by creating prototypes for the new experience, with fresh new designs. </p> <p> With designs in hand, the only thing stopping Headspace from expanding their app and broadening users’ horizons was their existing Android software architecture. It wasn’t well structured to support all these new features. Headspace’s development team made the case to their leadership that building on the existing code would take longer than a complete rewrite. After sharing the vision and getting everyone on board, the team set out on a collective journey to write a new Android app in pursuit of app excellence. </p> <br> <h2>The Android Rewrite</h2> <p> Headspace’s Android development team first needed a convenient way to standardize how they built and implemented features. \"Before we wrote a single line of code, our team spent a week evaluating some important implementation choices for the foundation of our app,” Aram Sheroyan, an Android developer at Headspace explains; </p> <p> <p style=\"text-align: right\"> <em>“This was crucial pre-work so that we were all on the same page when we actually started to build.\"</em></p> <p> Immersing themselves in Google’s literature on the latest, best practices for Android development and<a href=\"https://developer.android.com/jetpack/guide?gclid=Cj0KCQjw6s2IBhCnARIsAP8RfAj6I4mhRRdSqjYfPlvGET9S6mmRGJrc8Inkc-cCe1IVdTDEvlE3hFEaApHkEALw_wcB&amp;gclsrc=aw.ds\"> app architecture</a>, the team found a solution they could all confidently agree on. Google recommended refactoring their app using a new base architecture:<a href=\"https://developer.android.com/jetpack/guide?gclid=Cj0KCQjw6s2IBhCnARIsAP8RfAj6I4mhRRdSqjYfPlvGET9S6mmRGJrc8Inkc-cCe1IVdTDEvlE3hFEaApHkEALw_wcB&amp;gclsrc=aw.ds\"> model-view-view-model</a>. MVVM is a widely-supported software pattern that is progressively becoming industry standard because it allows developers to create a clear separation of concerns, helping streamline an app’s architecture. “It allowed us to nicely separate our view logic,\" Sheroyan explained. </p> <p> With MVVM as the base architecture, they identified <a href=\"https://developer.android.com/jetpack\">Android’s Jetpack</a> libraries, including<a href=\"https://developer.android.com/training/dependency-injection/dagger-android\"> Dagger</a> and<a href=\"https://developer.android.com/training/dependency-injection/hilt-android\"> Hilt</a><span style=\"text-decoration:underline;\"> </span>for dependency injection. The new tools made boilerplate code smaller and easier to structure, not to mention more predictable and efficient. Combined with MVVM, the libraries provided them with a more detailed understanding of how new features should be implemented. The team was also able to improve quality in passing arguments between functions. The app had previously suffered from crashes due to NullPointerException errors and incorrect arguments. Adopting the safeArgs library helped to eliminate errors when passing arguments. </p> <p> In rewriting the app, the team further made sure to follow the Repository pattern to support a clearer separation of concerns. For example, instead of having one huge class that saves data in shared preferences, they decided that each repository’s local data source should handle the respective logic. This separation of data sources enables the team to test and reproduce business code outside of the live app for unit testing without having to change production code. Separating concerns in this way made the app more stable and the code more modular. </p> <p> The team also took the opportunity to fully translate their app into the <a href=\"https://developer.android.com/kotlin\">Kotlin </a>programming language, which offered useful helper functions, sealed classes, and extension functions. Removing legacy code and replacing the mix of Java and Kotlin with pure Kotlin code decreased build time for the app. The new architecture also made it easier to write tests and allowed them to increase test coverage from around 15% to more than 80%. This resulted in faster deployments, higher quality code, and fewer crashes. </p> <p> To capture the new user experience in the app’s reviews, Headspace implemented the<a href=\"https://developer.android.com/guide/playcore/in-app-review\"> Google Play In-App Review API</a>. The new API allowed them to encourage all users to share reviews from within the app. The implementation increased review scores by 24%, and — as store listing reviews are<a href=\"https://developer.android.com/topic/performance/vitals\"> tied to visibility on Google Play</a> — helped draw attention to the app’s recent improvements. </p> <br> <h2>Achieving App Excellence</h2> <p> The rewrite took eight months and with it came a new confidence in the code. Now that the codebase had 80%+ unit test coverage, they could develop and test new features with confidence rather than worries. The new architecture made this possible thanks to its improved logic separation, and a more reusable code, making it easier to plan and implement new features. </p> <p> The build time for the app decreased dramatically and development velocity picked up. The team’s new clarity around best practices and architecture also reduced friction for onboarding new developers, since it was now based on Android industry standards. They could communicate more clearly with potential candidates during the interview process, as they now had a shared architectural language for discussing problem sets and potential solutions. </p> <p>With velocity came faster implementation of features and an improved retention flow. They could now optimize their upsell process, which led to a 20% increase in the number of paid Android subscribers relative to other platforms where the app is published.<sup> </sup>The combination of a new app experience and the implementation of the new In-App Review API led to their review scores improving from 3.5 to 4.7 stars between Q2 and Q4 of 2020! Overall, the new focus on<a href=\"https://developer.android.com/quality\"> Android App Excellence</a> and the improved ratings earned Headspace a 15% increase in MAU globally<sup>.</sup>.</p> <p>These were just a few of the payoffs from the significant investment Headspace made in app excellence. Their laser focus on quality paid off across the board, enabling them to continue to grow their community of users and lay a solid foundation for the future evolution of their app experience.</p> <br> <h2>Get your own team on board</h2> <p> If you’re interested in getting your team on board for your own App Excellence journey, check out our condensed case study for product owners and executives linked <a href=\"https://developer.android.com/stories/apps/headspace-excellence?hl=en\">here</a>. To learn more about how consistent, intuitive app user experiences can grow your business, visit the <a href=\"https://developer.android.com/quality\">App Excellence</a> landing page. </p>\n             <div class=\"feedflare\"> \n              <a href=\"http://feeds.feedburner.com/~ff/blogspot/hsDu?a=HnEwXuDiRjw:FSyMrPx42OU:yIl2AUoC8zA\"><img src=\"http://feeds.feedburner.com/~ff/blogspot/hsDu?d=yIl2AUoC8zA\" border=\"0\" /></a> \n              <a href=\"http://feeds.feedburner.com/~ff/blogspot/hsDu?a=HnEwXuDiRjw:FSyMrPx42OU:-BTjWOF_DHI\"><img src=\"http://feeds.feedburner.com/~ff/blogspot/hsDu?i=HnEwXuDiRjw:FSyMrPx42OU:-BTjWOF_DHI\" border=\"0\" /></a> \n             </div><img src=\"http://feeds.feedburner.com/~r/blogspot/hsDu/~4/HnEwXuDiRjw\" height=\"1\" width=\"1\" alt=\"\" /></br></br></p></br></br></br></br></p></p></p></p></img>\n</meta>","descriptionType":"html","publishedDate":"Thu, 30 Sep 2021 17:18:00 +0000","feedId":7,"bgimg":"https://1.bp.blogspot.com/-snQYBXTn-iM/YVS_F7qnWLI/AAAAAAAAQ-g/Xf3FmdO6a6Acmjq6lzKpFos029wL5351QCLcBGAsYHQ/s0/200588933__34990475__148018.png","linkMd5":"3099ff1aa315a69b89648ae001afd21d","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn4@2020_6/2021/10/01/02-08-11-837_4cf7685ed4bf27dc.webp","destWidth":1024,"destHeight":512,"sourceBytes":104998,"destBytes":23842,"author":"Android Developers","articleImgCdnMap":{"https://1.bp.blogspot.com/-snQYBXTn-iM/YVS_F7qnWLI/AAAAAAAAQ-g/Xf3FmdO6a6Acmjq6lzKpFos029wL5351QCLcBGAsYHQ/s0/200588933__34990475__148018.png":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn4@2020_6/2021/10/01/02-08-11-837_4cf7685ed4bf27dc.webp","http://feeds.feedburner.com/~ff/blogspot/ https://1.bp.blogspot.com/-YGhph7EgqT8/YKMbWIAO4UI/AAAAAAAAQjM/nOffYqFRx-8n6Sc7uUk1fpmqpFEHUf9egCLcBGAsYHQ/s0/ https://1.bp.blogspot.com/-snQYBXTn-iM/YVS_F7qnWLI/AAAAAAAAQ-g/Xf3FmdO6a6Acmjq6lzKpFos029wL5351QCLcBGAsYHQ/s0/200588933__34990475__148018.png":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn12@2020_3/2021/10/01/02-08-12-480_80cd5af3997cbef3.webp","http://feeds.feedburner.com/~ff/blogspot/hsDu?d=yIl2AUoC8zA":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn13@2020_1/2021/10/01/02-08-15-426_e6aa4d73b74f71ed.webp","http://feeds.feedburner.com/~ff/blogspot/hsDu?i=HnEwXuDiRjw:FSyMrPx42OU:-BTjWOF_DHI":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn10@2020_1/2021/10/01/02-08-24-621_c21c67b69cafc225.webp","http://feeds.feedburner.com/~r/blogspot/hsDu/~4/HnEwXuDiRjw":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn8@2020_3/2021/10/01/02-08-23-454_976490daedf75a16.webp"},"publishedOrCreatedDate":1633054070936}],"record":{"createdTime":"2021-10-01 10:07:50","updatedTime":"2021-10-01 10:07:50","feedId":7,"fetchDate":"Fri, 01 Oct 2021 02:07:50 +0000","fetchMs":65,"handleMs":768,"totalMs":36259,"newArticles":0,"totalArticles":25,"status":1,"type":0,"ip":"af6ca12eefe249e94a3f077d15d7c168","hostName":"europe-60*","requestId":"57ffa88fb87a4d9f977ff1ee371ea319_7","contentType":"text/xml; charset=UTF-8","totalBytes":24368,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":5,"articlesImgsGithubTotal":5,"successGithubMap":{"myreaderx15":1,"myreaderx7":1,"myreaderx6":1,"myreaderx2":1,"myreaderx18":1},"failGithubMap":{}},"feed":{"createdTime":"2020-05-30 17:21:38","updatedTime":"2020-09-01 09:22:57","id":7,"name":"Android Developers Blog","url":"http://feeds.feedburner.com/blogspot/hsDu","subscriber":null,"website":null,"icon":"http://android-developers.googleblog.com/favicon.ico","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx65/cdn78@2020_5/2020/09/01/01-22-48-812_570d1925e8f28660.ico","description":"An Open Handset Alliance Project.","weekly":null,"link":null},"noPictureArticleList":[],"tmpCommonImgCdnBytes":23842,"tmpBodyImgCdnBytes":526,"tmpBgImgCdnBytes":0,"extra4":{"start":1633054070051,"total":0,"statList":[{"spend":120,"msg":"获取xml内容"},{"spend":768,"msg":"解释文章"},{"spend":1,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":14025,"msg":"正文链接上传到cdn"}]},"extra5":5,"extra6":5,"extra7ImgCdnFailResultVector":[],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://europe-25.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe-24.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe-23.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe-22.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"https://1.bp.blogspot.com/-snQYBXTn-iM/YVS_F7qnWLI/AAAAAAAAQ-g/Xf3FmdO6a6Acmjq6lzKpFos029wL5351QCLcBGAsYHQ/s0/200588933__34990475__148018.png","sourceStatusCode":200,"destWidth":1024,"destHeight":512,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn4@2020_6/2021/10/01/02-08-11-837_4cf7685ed4bf27dc.webp","sourceBytes":104998,"destBytes":23842,"targetWebpQuality":75,"feedId":7,"totalSpendMs":512,"convertSpendMs":25,"createdTime":"2021-10-01 10:08:11","host":"europe-58*","referer":"http://feedproxy.google.com/~r/blogspot/hsDu/~3/HnEwXuDiRjw/investing-in-app-excellence-headspaces.html","linkMd5ListStr":"3099ff1aa315a69b89648ae001afd21d,3099ff1aa315a69b89648ae001afd21d","githubUser":"myreaderx2","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"102.5 KB","destSize":"23.3 KB","compressRate":"22.7%"},{"code":1,"isDone":false,"source":"http://feeds.feedburner.com/~ff/blogspot/ https://1.bp.blogspot.com/-YGhph7EgqT8/YKMbWIAO4UI/AAAAAAAAQjM/nOffYqFRx-8n6Sc7uUk1fpmqpFEHUf9egCLcBGAsYHQ/s0/ https://1.bp.blogspot.com/-snQYBXTn-iM/YVS_F7qnWLI/AAAAAAAAQ-g/Xf3FmdO6a6Acmjq6lzKpFos029wL5351QCLcBGAsYHQ/s0/200588933__34990475__148018.png","sourceStatusCode":200,"destWidth":1,"destHeight":1,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn12@2020_3/2021/10/01/02-08-12-480_80cd5af3997cbef3.webp","sourceBytes":43,"destBytes":72,"targetWebpQuality":75,"feedId":7,"totalSpendMs":750,"convertSpendMs":4,"createdTime":"2021-10-01 10:08:12","host":"europe-24*","referer":"http://feedproxy.google.com/~r/blogspot/hsDu/~3/HnEwXuDiRjw/investing-in-app-excellence-headspaces.html","linkMd5ListStr":"3099ff1aa315a69b89648ae001afd21d","githubUser":"myreaderx18","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"43 B","destSize":"72 B","compressRate":"167.4%"},{"code":1,"isDone":false,"source":"http://feeds.feedburner.com/~ff/blogspot/hsDu?d=yIl2AUoC8zA","sourceStatusCode":200,"destWidth":62,"destHeight":24,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn13@2020_1/2021/10/01/02-08-15-426_e6aa4d73b74f71ed.webp","sourceBytes":997,"destBytes":310,"targetWebpQuality":75,"feedId":7,"totalSpendMs":546,"convertSpendMs":3,"createdTime":"2021-10-01 10:08:15","host":"europe-25*","referer":"http://feedproxy.google.com/~r/blogspot/hsDu/~3/HnEwXuDiRjw/investing-in-app-excellence-headspaces.html","linkMd5ListStr":"3099ff1aa315a69b89648ae001afd21d","githubUser":"myreaderx7","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"997 B","destSize":"310 B","compressRate":"31.1%"},{"code":1,"isDone":false,"source":"http://feeds.feedburner.com/~r/blogspot/hsDu/~4/HnEwXuDiRjw","sourceStatusCode":200,"destWidth":1,"destHeight":1,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn8@2020_3/2021/10/01/02-08-23-454_976490daedf75a16.webp","sourceBytes":43,"destBytes":72,"targetWebpQuality":75,"feedId":7,"totalSpendMs":1871,"convertSpendMs":29,"createdTime":"2021-10-01 10:08:22","host":"europe-23*","referer":"http://feedproxy.google.com/~r/blogspot/hsDu/~3/HnEwXuDiRjw/investing-in-app-excellence-headspaces.html","linkMd5ListStr":"3099ff1aa315a69b89648ae001afd21d","githubUser":"myreaderx6","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"43 B","destSize":"72 B","compressRate":"167.4%"},{"code":1,"isDone":false,"source":"http://feeds.feedburner.com/~ff/blogspot/hsDu?i=HnEwXuDiRjw:FSyMrPx42OU:-BTjWOF_DHI","sourceStatusCode":200,"destWidth":1,"destHeight":1,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn10@2020_1/2021/10/01/02-08-24-621_c21c67b69cafc225.webp","sourceBytes":43,"destBytes":72,"targetWebpQuality":75,"feedId":7,"totalSpendMs":1952,"convertSpendMs":5,"createdTime":"2021-10-01 10:08:24","host":"europe-22*","referer":"http://feedproxy.google.com/~r/blogspot/hsDu/~3/HnEwXuDiRjw/investing-in-app-excellence-headspaces.html","linkMd5ListStr":"3099ff1aa315a69b89648ae001afd21d","githubUser":"myreaderx15","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"43 B","destSize":"72 B","compressRate":"167.4%"}],"successGithubMap":{"myreaderx15":1,"myreaderx7":1,"myreaderx6":1,"myreaderx2":1,"myreaderx18":1},"failGithubMap":{}}
{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2020-10-20 12:34:36","updatedTime":"2020-10-20 12:34:36","title":"PagerLayoutManager(分页布局)","link":"http://www.gcssloop.com/tools/pager-grid-layoutmanager","description":"<p>具有分页功能的 Recyclerview 布局管理器，主打分页，可以替代部分场景下的网格布局，线性布局，以及一些简单的ViewPager，但也有一定的局限性，请选择性使用。</p>\n\n<ul>\n  <li><a href=\"https://xiaozhuanlan.com/topic/5841730926\">网格分页布局源码解析(上)</a></li>\n  <li><a href=\"https://xiaozhuanlan.com/topic/1456397082\">网格分页布局源码解析(下)</a></li>\n</ul>\n\n<h2 id=\"1-效果预览\">1. 效果预览</h2>\n\n<p><img src=\"http://gcsblog.oss-cn-shanghai.aliyuncs.com/blog/2019-04-29-072459.gif?gcssloop\" alt=\"\" /> <img src=\"http://gcsblog.oss-cn-shanghai.aliyuncs.com/blog/2019-04-29-072500.gif?gcssloop\" alt=\"\" /></p>\n\n<p><img src=\"http://gcsblog.oss-cn-shanghai.aliyuncs.com/blog/2019-04-29-072506.gif?gcssloop\" alt=\"\" /> <img src=\"http://gcsblog.oss-cn-shanghai.aliyuncs.com/blog/2019-04-29-072513.gif?gcssloop\" alt=\"\" /></p>\n\n<h2 id=\"2-支持的特性\">2. 支持的特性</h2>\n\n<ul class=\"task-list\">\n  <li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled=\"disabled\" checked=\"checked\" />网格布局，设置合适的行列数可以模拟线性布局或者ViewPager。</li>\n  <li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled=\"disabled\" checked=\"checked\" />分页效果，支持自动回调页码的变化(总页数和当前页数)。</li>\n  <li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled=\"disabled\" checked=\"checked\" />布局方向，支持横向滚动和垂直滚动。</li>\n  <li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled=\"disabled\" checked=\"checked\" />方向切换，支持切换滚动方向。</li>\n  <li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled=\"disabled\" checked=\"checked\" />支持电视，支持TV上按键翻页。</li>\n  <li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled=\"disabled\" checked=\"checked\" />内存稳定，不会因为一次性添加大量的数据导致内存飙升或者严重卡顿。</li>\n  <li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled=\"disabled\" checked=\"checked\" />使用简单，无侵入性，可以快速的将其他布局替换为该布局，也可以快速的移除该布局。</li>\n  <li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled=\"disabled\" checked=\"checked\" />自动修正，当滚动到第3页，删除数据后内容不足2页，会自动修正当前页面为第2页。</li>\n</ul>\n\n<h2 id=\"3-主要文件\">3. 主要文件</h2>\n\n<table>\n  <thead>\n    <tr>\n      <th>名称</th>\n      <th>作用</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>/java/PagerGridLayoutManager.java</td>\n      <td>水平分页网格布局管理器。</td>\n    </tr>\n    <tr>\n      <td>/java/PagerGridSnapHelper.java</td>\n      <td>滚动辅助工具。</td>\n    </tr>\n    <tr>\n      <td>/java/PagerConfig.java</td>\n      <td>Pager配置，用于开关调试日志。</td>\n    </tr>\n  </tbody>\n</table>\n\n<h2 id=\"4-使用方法\">4. 使用方法</h2>\n\n<h3 id=\"41-基本用法\">4.1 基本用法</h3>\n\n<h4 id=\"411-基本设置\">4.1.1 基本设置</h4>\n\n<div class=\"language-java highlighter-rouge\"><pre class=\"highlight\"><code><span class=\"c1\">// 1.水平分页布局管理器</span>\n<span class=\"n\">PagerGridLayoutManager</span> <span class=\"n\">layoutManager</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"n\">PagerGridLayoutManager</span><span class=\"o\">(</span>\n        <span class=\"mi\">2</span><span class=\"o\">,</span> <span class=\"mi\">3</span><span class=\"o\">,</span> <span class=\"n\">PagerGridLayoutManager</span><span class=\"o\">.</span><span class=\"na\">VERTICAL</span><span class=\"o\">);</span>\n<span class=\"n\">recyclerView</span><span class=\"o\">.</span><span class=\"na\">setLayoutManager</span><span class=\"o\">(</span><span class=\"n\">layoutManager</span><span class=\"o\">);</span>\n\n<span class=\"c1\">// 2.设置滚动辅助工具</span>\n<span class=\"n\">PagerGridSnapHelper</span> <span class=\"n\">pageSnapHelper</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"n\">PagerGridSnapHelper</span><span class=\"o\">();</span>\n<span class=\"n\">pageSnapHelper</span><span class=\"o\">.</span><span class=\"na\">attachToRecyclerView</span><span class=\"o\">(</span><span class=\"n\">recyclerView</span><span class=\"o\">);</span>\n</code></pre>\n</div>\n\n<p><strong>注意：</strong><br />\n<strong>1. 一定要在先设置 PagerGridLayoutManager， 之后再设置 PagerGridSnapHelper。</strong><br />\n<strong>2. 注意名称是 PagerGridSnapHelper 不是 PagerSnapHelper。</strong></p>\n\n<h4 id=\"412-设置页面变化监听器\">4.1.2 设置页面变化监听器</h4>\n\n<div class=\"language-java highlighter-rouge\"><pre class=\"highlight\"><code><span class=\"n\">layoutManager</span><span class=\"o\">.</span><span class=\"na\">setPageListener</span><span class=\"o\">(</span><span class=\"k\">this</span><span class=\"o\">);</span>    <span class=\"c1\">// 设置页面变化监听器</span>\n\n<span class=\"c1\">// 当总页数确定时的回调</span>\n<span class=\"nd\">@Override</span> <span class=\"kd\">public</span> <span class=\"kt\">void</span> <span class=\"nf\">onPageSizeChanged</span><span class=\"o\">(</span><span class=\"kt\">int</span> <span class=\"n\">pageSize</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n    <span class=\"n\">Log</span><span class=\"o\">.</span><span class=\"na\">e</span><span class=\"o\">(</span><span class=\"s\">\"TAG\"</span><span class=\"o\">,</span> <span class=\"s\">\"总页数 = \"</span> <span class=\"o\">+</span> <span class=\"n\">pageSize</span><span class=\"o\">);</span>\n<span class=\"o\">}</span>\n\n<span class=\"c1\">// 当页面被选中时的回调（从 0 开始）</span>\n<span class=\"nd\">@Override</span> <span class=\"kd\">public</span> <span class=\"kt\">void</span> <span class=\"nf\">onPageSelect</span><span class=\"o\">(</span><span class=\"kt\">int</span> <span class=\"n\">pageIndex</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n    <span class=\"n\">Log</span><span class=\"o\">.</span><span class=\"na\">e</span><span class=\"o\">(</span><span class=\"s\">\"TAG\"</span><span class=\"o\">,</span> <span class=\"s\">\"选中页码 = \"</span> <span class=\"o\">+</span> <span class=\"o\">(</span><span class=\"n\">pageIndex</span><span class=\"o\">+</span><span class=\"mi\">1</span><span class=\"o\">));</span>\n<span class=\"o\">}</span>\n</code></pre>\n</div>\n\n<h4 id=\"413-直接滚动\">4.1.3 直接滚动</h4>\n\n<div class=\"language-java highlighter-rouge\"><pre class=\"highlight\"><code><span class=\"c1\">// 滚动到指定条目</span>\n<span class=\"kd\">public</span> <span class=\"kt\">void</span> <span class=\"nf\">scrollToPosition</span><span class=\"o\">(</span><span class=\"kt\">int</span> <span class=\"n\">position</span><span class=\"o\">);</span>\n<span class=\"c1\">// 切换页面</span>\n<span class=\"kd\">public</span> <span class=\"kt\">void</span> <span class=\"nf\">scrollToPage</span><span class=\"o\">(</span><span class=\"kt\">int</span> <span class=\"n\">pageIndex</span><span class=\"o\">);</span>\t<span class=\"c1\">// 滚动到指定页面</span>\n<span class=\"kd\">public</span> <span class=\"kt\">void</span> <span class=\"nf\">prePage</span><span class=\"o\">();</span>\t\t\t\t\t\t<span class=\"c1\">// 上一页</span>\n<span class=\"kd\">public</span> <span class=\"kt\">void</span> <span class=\"nf\">nextPage</span><span class=\"o\">();</span>\t\t\t\t\t\t<span class=\"c1\">// 下一页</span>\n\n<span class=\"c1\">// 使用示例</span>\n<span class=\"n\">recyclerView</span><span class=\"o\">.</span><span class=\"na\">scrollToPosition</span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">);</span>\n<span class=\"n\">layoutManager</span><span class=\"o\">.</span><span class=\"na\">scrollToPage</span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">);</span>\n<span class=\"n\">layoutManager</span><span class=\"o\">.</span><span class=\"na\">prePage</span><span class=\"o\">();</span>\n<span class=\"n\">layoutManager</span><span class=\"o\">.</span><span class=\"na\">nextPage</span><span class=\"o\">();</span>\n</code></pre>\n</div>\n\n<h4 id=\"414-平滑滚动\">4.1.4 平滑滚动</h4>\n\n<div class=\"language-java highlighter-rouge\"><pre class=\"highlight\"><code><span class=\"c1\">// 平滑滚动到指定条目</span>\n<span class=\"n\">mRecyclerView</span><span class=\"o\">.</span><span class=\"na\">smoothScrollToPosition</span><span class=\"o\">(</span><span class=\"n\">pos</span><span class=\"o\">);</span>\n<span class=\"c1\">// 平滑切换页面</span>\n<span class=\"n\">mPagerLyoutManager</span><span class=\"o\">.</span><span class=\"na\">smoothScrollToPage</span><span class=\"o\">(</span><span class=\"n\">pageIndex</span><span class=\"o\">);</span>\t<span class=\"c1\">// 平滑滚动到指定页</span>\n<span class=\"n\">mPagerLyoutManager</span><span class=\"o\">.</span><span class=\"na\">smoothPrePage</span><span class=\"o\">();</span>\t\t\t\t\t<span class=\"c1\">// 平滑滚动到上一页</span>\n<span class=\"n\">mPagerLyoutManager</span><span class=\"o\">.</span><span class=\"na\">smoothNextPage</span><span class=\"o\">();</span>\t\t\t\t<span class=\"c1\">// 平滑滚动到下一页</span>\n\n<span class=\"c1\">// 使用示例</span>\n<span class=\"n\">recyclerView</span><span class=\"o\">.</span><span class=\"na\">smoothScrollToPosition</span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">);</span>\n<span class=\"n\">layoutManager</span><span class=\"o\">.</span><span class=\"na\">smoothScrollToPage</span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">);</span>\n<span class=\"n\">layoutManager</span><span class=\"o\">.</span><span class=\"na\">smoothPrePage</span><span class=\"o\">();</span>\n<span class=\"n\">layoutManager</span><span class=\"o\">.</span><span class=\"na\">smoothNextPage</span><span class=\"o\">();</span>\n</code></pre>\n</div>\n\n<h3 id=\"42-其他设置\">4.2 其他设置</h3>\n\n<h4 id=\"421-是否在滚动过程中回调页码变化\">4.2.1 是否在滚动过程中回调页码变化</h4>\n\n<div class=\"language-java highlighter-rouge\"><pre class=\"highlight\"><code><span class=\"c1\">// 设置是否在滚动过程中回调页码变化</span>\n<span class=\"kt\">void</span> <span class=\"nf\">setChangeSelectInScrolling</span><span class=\"o\">(</span><span class=\"kt\">boolean</span> <span class=\"n\">changeSelectInScrolling</span><span class=\"o\">);</span>\n\n<span class=\"c1\">// 使用示例</span>\n<span class=\"n\">layoutManager</span><span class=\"o\">.</span><span class=\"na\">setChangeSelectInScrolling</span><span class=\"o\">(</span><span class=\"kc\">false</span><span class=\"o\">);</span>\n</code></pre>\n</div>\n\n<h4 id=\"422-是否允许连续滚动\">4.2.2 是否允许连续滚动</h4>\n\n<p>默认允许连续滚动。</p>\n\n<div class=\"language-java highlighter-rouge\"><pre class=\"highlight\"><code><span class=\"c1\">// 是否允许连续滚动</span>\n<span class=\"kt\">boolean</span> <span class=\"nf\">isAllowContinuousScroll</span><span class=\"o\">();</span>\n<span class=\"c1\">// 设置是否允许连续滚动</span>\n<span class=\"kt\">void</span> <span class=\"nf\">setAllowContinuousScroll</span><span class=\"o\">(</span><span class=\"kt\">boolean</span> <span class=\"n\">allowContinuousScroll</span><span class=\"o\">);</span>\n\n<span class=\"c1\">// 使用示例</span>\n<span class=\"n\">layoutManager</span><span class=\"o\">.</span><span class=\"na\">isAllowContinuousScroll</span><span class=\"o\">();</span>\n<span class=\"n\">layoutManager</span><span class=\"o\">.</span><span class=\"na\">setAllowContinuousScroll</span><span class=\"o\">(</span><span class=\"kc\">false</span><span class=\"o\">);</span>\n</code></pre>\n</div>\n\n<h4 id=\"423-设置滚动方向\">4.2.3 设置滚动方向</h4>\n\n<p>注意：滚动过程中不可切换方向，设置无效。</p>\n\n<div class=\"language-java highlighter-rouge\"><pre class=\"highlight\"><code><span class=\"c1\">// 设置滚动方向</span>\n<span class=\"kt\">int</span> <span class=\"nf\">setOrientationType</span><span class=\"o\">(</span><span class=\"nd\">@OrientationType</span> <span class=\"kt\">int</span> <span class=\"n\">orientation</span><span class=\"o\">);</span>\n\n<span class=\"c1\">// 使用示例</span>\n<span class=\"n\">layoutManager</span><span class=\"o\">.</span><span class=\"na\">setOrientationType</span><span class=\"o\">(</span><span class=\"n\">PagerGridLayoutManager</span><span class=\"o\">.</span><span class=\"na\">HORIZONTAL</span><span class=\"o\">);</span>\n</code></pre>\n</div>\n\n<h4 id=\"424-设置-fling-阀值\">4.2.4 设置 Fling 阀值</h4>\n\n<div class=\"language-java highlighter-rouge\"><pre class=\"highlight\"><code><span class=\"c1\">// 设置 Fling 阀值</span>\n<span class=\"kt\">void</span> <span class=\"nf\">setFlingThreshold</span><span class=\"o\">(</span><span class=\"kt\">int</span> <span class=\"n\">flingThreshold</span><span class=\"o\">);</span>\n\n<span class=\"c1\">// 使用示例</span>\n<span class=\"n\">PagerConfig</span><span class=\"o\">.</span><span class=\"na\">setFlingThreshold</span><span class=\"o\">(</span><span class=\"mi\">1000</span><span class=\"o\">);</span>\n</code></pre>\n</div>\n\n<h4 id=\"425-设置滚动速度\">4.2.5 设置滚动速度</h4>\n\n<div class=\"language-java highlighter-rouge\"><pre class=\"highlight\"><code><span class=\"c1\">// 设置滚动速度(滚动一英寸所耗费的微秒数，数值越大，速度越慢，默认为 60f)</span>\n<span class=\"kt\">void</span> <span class=\"nf\">setMillisecondsPreInch</span><span class=\"o\">(</span><span class=\"kt\">float</span> <span class=\"n\">millisecondsPreInch</span><span class=\"o\">);</span>\n\n<span class=\"c1\">// 使用示例</span>\n<span class=\"n\">PagerConfig</span><span class=\"o\">.</span><span class=\"na\">setMillisecondsPreInch</span><span class=\"o\">(</span><span class=\"mi\">60</span><span class=\"n\">f</span><span class=\"o\">);</span>\n</code></pre>\n</div>\n\n<h4 id=\"426-打开调试日志\">4.2.6 打开调试日志</h4>\n\n<div class=\"language-java highlighter-rouge\"><pre class=\"highlight\"><code><span class=\"c1\">// 打开调试用日志输出，一般情况忽略即可</span>\n<span class=\"kt\">void</span> <span class=\"nf\">setShowLog</span><span class=\"o\">(</span><span class=\"kt\">boolean</span> <span class=\"n\">showLog</span><span class=\"o\">);</span>\n\n<span class=\"c1\">// 使用示例</span>\n<span class=\"n\">PagerConfig</span><span class=\"o\">.</span><span class=\"na\">setShowLog</span><span class=\"o\">(</span><span class=\"kc\">true</span><span class=\"o\">);</span>\n</code></pre>\n</div>\n\n<h2 id=\"5-注意事项\">5. 注意事项：</h2>\n\n<p>目前存在一个问题，使用的时候请务必给 RecyclerView 设置固定大小或者match_parent，如果不设置默认高度为 0 ，则任何内容都不会显示出来。</p>\n\n<h2 id=\"6-添加方式\">6. 添加方式</h2>\n\n<h4 id=\"61-添加仓库\">6.1 添加仓库</h4>\n\n<p>在项目的 <code class=\"highlighter-rouge\">build.gradle</code> 文件中配置仓库地址。</p>\n\n<div class=\"language-groovy highlighter-rouge\"><pre class=\"highlight\"><code><span class=\"n\">allprojects</span> <span class=\"o\">{</span>\n    <span class=\"n\">repositories</span> <span class=\"o\">{</span>\n        <span class=\"n\">jcenter</span><span class=\"o\">()</span>\n        <span class=\"c1\">// 私有仓库地址</span>\n       <span class=\"n\">maven</span> <span class=\"o\">{</span> <span class=\"n\">url</span> <span class=\"s2\">\"http://lib.gcssloop.com/repository/gcssloop-central/\"</span> <span class=\"o\">}</span>\n    <span class=\"o\">}</span>\n<span class=\"o\">}</span>\n</code></pre>\n</div>\n\n<h4 id=\"62-添加项目依赖\">6.2 添加项目依赖</h4>\n\n<p>在需要添加依赖的 Module 下添加以下信息，使用方式和普通的远程仓库一样。</p>\n\n<div class=\"language-groovy highlighter-rouge\"><pre class=\"highlight\"><code><span class=\"n\">implementation</span> <span class=\"s1\">'com.gcssloop.recyclerview:pagerlayoutmanager:2.3.7'</span>\n</code></pre>\n</div>\n\n<h2 id=\"作者简介\">作者简介</h2>\n\n<h4 id=\"作者微博-gcssloop\">作者微博: <a href=\"http://weibo.com/GcsSloop\">@GcsSloop</a></h4>\n\n<h4 id=\"个人网站-httpwwwgcssloopcom\">个人网站: http://www.gcssloop.com</h4>\n\n<p><a href=\"http://www.gcssloop.com/info/about/\" target=\"_blank\"> <img src=\"http://ww4.sinaimg.cn/large/005Xtdi2gw1f1qn89ihu3j315o0dwwjc.jpg\" width=\"300\" /> </a></p>\n\n<h2 id=\"更新日志\">更新日志</h2>\n\n<h4 id=\"v237\">v2.3.7</h4>\n\n<p>完善代码细节，移除冗余逻辑。</p>\n\n<h4 id=\"v236\">v2.3.6</h4>\n\n<p>降低最低版本兼容。<br />\n完善文档注释，精简项目结构。</p>\n\n<h4 id=\"v235\">v2.3.5</h4>\n\n<p>优化代码结构，抽取 PagerGridSmoothScroller。</p>\n\n<h4 id=\"v234\">v2.3.4</h4>\n\n<p>修复 padding 问题。<br />\n优化计算显示区域的代码逻辑。</p>\n\n<h4 id=\"v233\">v2.3.3</h4>\n\n<p>优化代码结构。<br />\n移除冗余代码。</p>\n\n<h4 id=\"v232\">v2.3.2</h4>\n\n<p>调整平滑滚动对外接口。</p>\n\n<div class=\"language-java highlighter-rouge\"><pre class=\"highlight\"><code><span class=\"c1\">// 平滑滚动到上一页</span>\n<span class=\"n\">mPagerLyoutManager</span><span class=\"o\">.</span><span class=\"na\">smoothPrePage</span><span class=\"o\">();</span>\n<span class=\"c1\">// 平滑滚动到下一页</span>\n<span class=\"n\">mPagerLyoutManager</span><span class=\"o\">.</span><span class=\"na\">smoothNextPage</span><span class=\"o\">();</span>\n<span class=\"c1\">// 平滑滚动到指定页</span>\n<span class=\"n\">mPagerLyoutManager</span><span class=\"o\">.</span><span class=\"na\">smoothScrollToPage</span><span class=\"o\">(</span><span class=\"n\">pageIndex</span><span class=\"o\">);</span>\n</code></pre>\n</div>\n\n<h4 id=\"v231\">v2.3.1</h4>\n\n<p>优化直接滚动。<br />\n修复更新单个条目导致整个界面刷新的情况。</p>\n\n<h4 id=\"v230\">v2.3.0</h4>\n\n<p>添加平滑滚动，优化超长距离平滑滚动。</p>\n\n<div class=\"language-java highlighter-rouge\"><pre class=\"highlight\"><code><span class=\"c1\">// 平滑滚动到指定条目，通过 RecyclerView 调用</span>\n<span class=\"n\">mRecyclerView</span><span class=\"o\">.</span><span class=\"na\">smoothScrollToPosition</span><span class=\"o\">(</span><span class=\"n\">pos</span><span class=\"o\">);</span>\n\n<span class=\"c1\">// 平滑滚动到上一页</span>\n<span class=\"n\">mPagerLyoutManager</span><span class=\"o\">.</span><span class=\"na\">smoothPrePage</span><span class=\"o\">(</span><span class=\"n\">recyclerView</span><span class=\"o\">);</span>\n<span class=\"c1\">// 平滑滚动到下一页</span>\n<span class=\"n\">mPagerLyoutManager</span><span class=\"o\">.</span><span class=\"na\">smoothNextPage</span><span class=\"o\">(</span><span class=\"n\">recyclerView</span><span class=\"o\">);</span>\n<span class=\"c1\">// 平滑滚动到指定页</span>\n<span class=\"n\">mPagerLyoutManager</span><span class=\"o\">.</span><span class=\"na\">smoothScrollToPage</span><span class=\"o\">(</span><span class=\"n\">recyclerView</span><span class=\"o\">,</span> <span class=\"n\">pageIndex</span><span class=\"o\">);</span>\n</code></pre>\n</div>\n\n<h4 id=\"v224\">V2.2.4</h4>\n\n<p>优化滚动体验。<br />\n新增配置选项：</p>\n\n<div class=\"language-java highlighter-rouge\"><pre class=\"highlight\"><code><span class=\"c1\">// 是否允许连续滚动</span>\n<span class=\"kt\">boolean</span> <span class=\"nf\">isAllowContinuousScroll</span><span class=\"o\">();</span>\n<span class=\"c1\">// 设置是否允许连续滚动</span>\n<span class=\"kt\">void</span> <span class=\"nf\">setAllowContinuousScroll</span><span class=\"o\">(</span><span class=\"kt\">boolean</span> <span class=\"n\">allowContinuousScroll</span><span class=\"o\">);</span>\n</code></pre>\n</div>\n\n<h4 id=\"v223\">v2.2.3</h4>\n\n<p>优化滚动过程中页面回调逻辑。</p>\n\n<h4 id=\"v222\">v2.2.2</h4>\n\n<p>修复除零异常。</p>\n\n<h4 id=\"v221\">v2.2.1</h4>\n\n<p>修复直接滚动到指定页面的Bug。<br />\n添加设置快速滚动阀值的方法 <code class=\"highlighter-rouge\">snapHelper.setFlingThreshold(1000);</code><br />\n修复不设置页面监听器会导致显示不正常的问题。\n修复行列为1时滚动出现的问题。</p>\n\n<h4 id=\"v220该版本不稳定\">v2.2.0(该版本不稳定)</h4>\n\n<p>新增方法：</p>\n\n<div class=\"language-java highlighter-rouge\"><pre class=\"highlight\"><code><span class=\"c1\">// 滚动到指定条目</span>\n<span class=\"kd\">public</span> <span class=\"kt\">void</span> <span class=\"nf\">scrollToPosition</span><span class=\"o\">(</span><span class=\"kt\">int</span> <span class=\"n\">position</span><span class=\"o\">);</span>\n<span class=\"c1\">// 滚动到指定页面</span>\n<span class=\"kd\">public</span> <span class=\"kt\">void</span> <span class=\"nf\">scrollToPage</span><span class=\"o\">(</span><span class=\"kt\">int</span> <span class=\"n\">pageIndex</span><span class=\"o\">);</span>\n<span class=\"c1\">// 上一页</span>\n<span class=\"kd\">public</span> <span class=\"kt\">void</span> <span class=\"nf\">prePage</span><span class=\"o\">();</span>\n<span class=\"c1\">// 下一页</span>\n<span class=\"kd\">public</span> <span class=\"kt\">void</span> <span class=\"nf\">nextPage</span><span class=\"o\">();</span>\n</code></pre>\n</div>\n\n<h4 id=\"v211\">v2.1.1</h4>\n\n<p>修复使用Glide或者Fresco可能导致布局重复刷新的问题。</p>\n\n<p>(判断RecyclerView.State，如果结构状态没有变化则不重新布局)</p>\n\n<h4 id=\"v210\">v2.1.0</h4>\n\n<p>修复从后向前滚动时内存占用变大的问题。</p>\n\n<p>(产生原因时先添加了新的View，最后再回收废弃的View，导致被回收的View一直难以被复用，持续占用内存，正确的应该是先将废弃的View放入回收区，这样新View创建时直接从回收区取View，就避免了回收区堆积大量的废弃View。)</p>\n\n<h4 id=\"v200\">v2.0.0</h4>\n\n<p>统一包名(功能没有变化)。</p>\n\n<h4 id=\"v131\">v1.3.1</h4>\n\n<p>修复特殊情况下删除条目导致显示不完整的问题。</p>\n\n<h4 id=\"v130\">v1.3.0</h4>\n\n<p>支持动态切换滚动方向。</p>\n\n<h4 id=\"v122\">v1.2.2</h4>\n\n<p>修复条目Margin问题。</p>\n\n<h4 id=\"v121\">v1.2.1</h4>\n\n<p>修复慢速滚动偶尔会停止在两个页面之间的问题。</p>\n\n<h4 id=\"v120\">v1.2.0</h4>\n\n<p>修复页面相关的Bug。<br />\n慢速滑动超多半个View时自动滚动到下一页。<br />\n调整布局逻辑和滚动辅助器逻辑。<br />\n移除部分无效方法。<br />\n代码结构调整。<br />\n支持按键翻页(TV)。</p>\n\n<p><strong>在TV上快速滚动时存在焦点问题：</strong></p>\n\n<p>前置条件：竖向滚动，当下方有可以获取焦点控件。<br />\n预期结果：当有内容时向下滚动，当滚动到最后一页时，焦点才能移动到下面控件上。<br />\n实际结果：当慢速滚动时符合预期，当快速滚动时有可能在移动到最后一页之前就将焦点移动到下面的控件上。</p>\n\n<h4 id=\"v113\">v1.1.3</h4>\n\n<p>修正页面变化回调位置，将回调修正到布局之后。<br />\n修正页面数据变化回调逻辑，允许多次回调同一个页面数据。</p>\n\n<h4 id=\"v112\">v1.1.2</h4>\n\n<p>修复内容删除完毕时没有页面变化回调问题。</p>\n\n<h4 id=\"v111\">v1.1.1</h4>\n\n<p>修复删除完毕最后一页作品，页面显示空白，滑动卡顿的bug。</p>\n\n<h4 id=\"v110\">v1.1.0</h4>\n\n<p>beta测试通过。<br />\n整理代码结构。</p>\n\n<h4 id=\"v110-beta\">v1.1.0-beta</h4>\n\n<p>添加在滚动过程中回调页码变化。</p>\n\n<h4 id=\"v101\">v1.0.1</h4>\n\n<p>修复数据过少导致的数组越界异常。</p>\n\n<h4 id=\"v100\">v1.0.0</h4>\n\n<p>移除部分日志。<br />\n代码结构整理。</p>\n\n<h4 id=\"v100-beta1\">v1.0.0-beta1</h4>\n\n<p>修复错误回滚问题。<code class=\"highlighter-rouge\">例如：本应滚动到第二页，却在滚动结束后回滚到第一页。</code></p>\n\n<h4 id=\"v100-beta\">v1.0.0-beta</h4>\n\n<p>完成基本的分页功能。<br />\n完成分页滚动辅助工具。<br />\n滑动结束自动锁定到最近页面。<br />\n每次滚动仅允许滚动一页，防止连续滚动多页。<br />\n低内存占用。<br />\n支持水平滚动和垂直分页。<br />\n允许开关调试日志。</p>\n\n<h2 id=\"版权信息\">版权信息</h2>\n\n<div class=\"highlighter-rouge\"><pre class=\"highlight\"><code>Copyright (c) 2017 GcsSloop\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n</code></pre>\n</div>\n","descriptionType":"text/html","publishedDate":"Sat, 14 Oct 2017 16:00:00 +0000","feedId":32069,"bgimg":"http://gcsblog.oss-cn-shanghai.aliyuncs.com/blog/2019-04-29-072459.gif?gcssloop","linkMd5":"4383ca886bf5a580862dbcf67df859df","destWidth":300,"destHeight":510,"sourceBytes":205402,"destBytes":114116,"author":"","articleImgCdnMap":{"http://gcsblog.oss-cn-shanghai.aliyuncs.com/blog/2019-04-29-072459.gif?gcssloop":null,"http://gcsblog.oss-cn-shanghai.aliyuncs.com/blog/2019-04-29-072500.gif?gcssloop":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn89@2020_4/2020/10/20/04-34-42-912_e95ede5c43165918.webp","http://gcsblog.oss-cn-shanghai.aliyuncs.com/blog/2019-04-29-072506.gif?gcssloop":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn98@2020_2/2020/10/20/04-34-51-989_7bc4fd1162eb2cfd.webp","http://gcsblog.oss-cn-shanghai.aliyuncs.com/blog/2019-04-29-072513.gif?gcssloop":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn85@2020_2/2020/10/20/04-34-47-181_60ad2e38019583e9.webp","http://ww4.sinaimg.cn/large/005Xtdi2gw1f1qn89ihu3j315o0dwwjc.jpg":"https://cdn.jsdelivr.net/gh/myreaderx13/cdn94@2020_3/2020/10/20/04-34-42-911_d8c491766bb45cbc.webp"},"publishedOrCreatedDate":1603168476858}],"record":{"createdTime":"2020-10-20 12:34:36","updatedTime":"2020-10-20 12:34:36","feedId":32069,"fetchDate":"Tue, 20 Oct 2020 04:34:36 +0000","fetchMs":2834,"handleMs":7928,"totalMs":28393,"newArticles":0,"totalArticles":51,"status":1,"type":0,"ip":"f42b8cb4d741106f4ab03176c69fdc97","hostName":"us-015*","requestId":"3e50118b59b94dc79bc2ee5b9379e635_32069","contentType":"text/xml; charset=utf-8","totalBytes":1899756,"bgimgsTotal":1,"bgimgsGithubTotal":0,"articlesImgsTotal":5,"articlesImgsGithubTotal":4,"successGithubMap":{"myreaderx8":1,"myreaderx21":1,"myreaderx2":1,"myreaderx13":1},"failGithubMap":{"myreaderx14":1}},"feed":{"createdTime":"2020-09-07 02:54:30","updatedTime":"2020-09-07 05:03:31","id":32069,"name":"GcsSloop","url":"http://www.gcssloop.com/feed.xml","subscriber":100,"website":null,"icon":"http://www.gcssloop.com/favicon.ico","icon_jsdelivr":null,"description":"嗨，我是 GcsSloop，一名来自2.5次元的魔法师，Android自定义View系列文章作者，非著名程序员。","weekly":null,"link":"http://www.gcssloop.com"},"noPictureArticleList":[{"createdTime":"2020-10-20 12:34:53","updatedTime":"2020-10-20 12:34:53","id":null,"feedId":32069,"linkMd5":"4383ca886bf5a580862dbcf67df859df"}],"tmpCommonImgCdnBytes":0,"tmpBodyImgCdnBytes":1899756,"tmpBgImgCdnBytes":0,"extra4":{"start":1603168464871,"total":0,"statList":[{"spend":4059,"msg":"获取xml内容"},{"spend":7928,"msg":"解释文章"},{"spend":0,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":11984,"msg":"正文链接上传到cdn"}]},"extra5":5,"extra6":5,"extra7ImgCdnFailResultVector":[{"code":1,"isDone":false,"source":"http://gcsblog.oss-cn-shanghai.aliyuncs.com/blog/2019-04-29-072459.gif?gcssloop","sourceStatusCode":200,"destWidth":300,"destHeight":510,"sourceBytes":205402,"destBytes":114116,"targetWebpQuality":75,"feedId":32069,"totalSpendMs":2163,"convertSpendMs":410,"createdTime":"2020-10-20 12:34:36","host":"us-025*","referer":"http://www.gcssloop.com/tools/pager-grid-layoutmanager","linkMd5ListStr":"4383ca886bf5a580862dbcf67df859df,4383ca886bf5a580862dbcf67df859df","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx14/cdn79/contents/2020/10/20/04-34-38-996_191e3ea712192059.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 68584859.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Tue, 20 Oct 2020 04:34:39 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"status":["403 Forbidden"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["EACA:2612:1FB46:5E0C3:5F8E68D4"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, read:packages, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1603170270"],"x-ratelimit-used":["60"],"x-xss-protection":["1; mode=block"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx14/cdn79/contents/2020/10/20/04-34-38-996_191e3ea712192059.webp","historyStatusCode":[],"spendMs":40},"base64UserPassword":null,"token":"6b67d******************************91b08"},"githubUser":"myreaderx14","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"200.6 KB","destSize":"111.4 KB","compressRate":"55.6%"},{"code":1,"isDone":false,"source":"http://gcsblog.oss-cn-shanghai.aliyuncs.com/blog/2019-04-29-072459.gif?gcssloop","sourceStatusCode":200,"destWidth":300,"destHeight":510,"sourceBytes":205402,"destBytes":114116,"targetWebpQuality":75,"feedId":32069,"totalSpendMs":2224,"convertSpendMs":764,"createdTime":"2020-10-20 12:34:39","host":"us-025*","referer":"http://www.gcssloop.com/tools/pager-grid-layoutmanager","linkMd5ListStr":"4383ca886bf5a580862dbcf67df859df,4383ca886bf5a580862dbcf67df859df","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx14/cdn79/contents/2020/10/20/04-34-41-217_191e3ea712192059.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 68584859.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Tue, 20 Oct 2020 04:34:41 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"status":["403 Forbidden"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["EACA:2612:1FB6D:5E19B:5F8E68DF"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, read:packages, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1603170270"],"x-ratelimit-used":["60"],"x-xss-protection":["1; mode=block"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx14/cdn79/contents/2020/10/20/04-34-41-217_191e3ea712192059.webp","historyStatusCode":[],"spendMs":58},"base64UserPassword":null,"token":"6b67d******************************91b08"},"githubUser":"myreaderx14","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"200.6 KB","destSize":"111.4 KB","compressRate":"55.6%"}],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://us-013.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-001.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe64.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-52.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"http://gcsblog.oss-cn-shanghai.aliyuncs.com/blog/2019-04-29-072500.gif?gcssloop","sourceStatusCode":200,"destWidth":300,"destHeight":510,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn89@2020_4/2020/10/20/04-34-42-912_e95ede5c43165918.webp","sourceBytes":138828,"destBytes":78608,"targetWebpQuality":75,"feedId":32069,"totalSpendMs":2587,"convertSpendMs":145,"createdTime":"2020-10-20 12:34:41","host":"us-001*","referer":"http://www.gcssloop.com/tools/pager-grid-layoutmanager","linkMd5ListStr":"4383ca886bf5a580862dbcf67df859df","githubUser":"myreaderx8","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"135.6 KB","destSize":"76.8 KB","compressRate":"56.6%"},{"code":1,"isDone":false,"source":"http://ww4.sinaimg.cn/large/005Xtdi2gw1f1qn89ihu3j315o0dwwjc.jpg","sourceStatusCode":200,"destWidth":1500,"destHeight":500,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx13/cdn94@2020_3/2020/10/20/04-34-42-911_d8c491766bb45cbc.webp","sourceBytes":189371,"destBytes":52104,"targetWebpQuality":75,"feedId":32069,"totalSpendMs":2753,"convertSpendMs":26,"createdTime":"2020-10-20 12:34:41","host":"europe64*","referer":"http://www.gcssloop.com/tools/pager-grid-layoutmanager","linkMd5ListStr":"4383ca886bf5a580862dbcf67df859df","githubUser":"myreaderx13","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"184.9 KB","destSize":"50.9 KB","compressRate":"27.5%"},{"code":1,"isDone":false,"source":"http://gcsblog.oss-cn-shanghai.aliyuncs.com/blog/2019-04-29-072513.gif?gcssloop","sourceStatusCode":200,"destWidth":300,"destHeight":529,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn85@2020_2/2020/10/20/04-34-47-181_60ad2e38019583e9.webp","sourceBytes":2423780,"destBytes":887376,"targetWebpQuality":75,"feedId":32069,"totalSpendMs":7260,"convertSpendMs":1096,"createdTime":"2020-10-20 12:34:41","host":"us-013*","referer":"http://www.gcssloop.com/tools/pager-grid-layoutmanager","linkMd5ListStr":"4383ca886bf5a580862dbcf67df859df","githubUser":"myreaderx21","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"2.3 MB","destSize":"866.6 KB","compressRate":"36.6%"},{"code":1,"isDone":false,"source":"http://gcsblog.oss-cn-shanghai.aliyuncs.com/blog/2019-04-29-072506.gif?gcssloop","sourceStatusCode":200,"destWidth":300,"destHeight":529,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn98@2020_2/2020/10/20/04-34-51-989_7bc4fd1162eb2cfd.webp","sourceBytes":3163964,"destBytes":881668,"targetWebpQuality":75,"feedId":32069,"totalSpendMs":11966,"convertSpendMs":1227,"createdTime":"2020-10-20 12:34:41","host":"us-52*","referer":"http://www.gcssloop.com/tools/pager-grid-layoutmanager","linkMd5ListStr":"4383ca886bf5a580862dbcf67df859df","githubUser":"myreaderx2","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"3 MB","destSize":"861 KB","compressRate":"27.9%"}],"successGithubMap":{"myreaderx8":1,"myreaderx21":1,"myreaderx2":1,"myreaderx13":1},"failGithubMap":{"myreaderx14":1}}
{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2021-05-30 13:34:10","updatedTime":"2021-05-30 13:34:10","title":"如何使用CSS禁止元素拖拽？","link":"https://www.zhangxinxu.com/wordpress/?p=9969","description":"<p>by <a href=\"https://www.zhangxinxu.com/\">zhangxinxu</a> from <a href=\"https://www.zhangxinxu.com/wordpress/?p=9969\">https://www.zhangxinxu.com/wordpress/?p=9969</a><br /> 本文欢迎分享与聚合，全文转载就不必了，尊重版权，圈子就这么大，若急用可以联系授权。</p> \n<p><script>window.wxShareImgUrl = 'https://www.zhangxinxu.com/study/image/share/202105-user-drag.png';</script></p> \n<p><img src=\"https://image.zhangxinxu.com/image/blog/202105/css-drag-cover.png\" width=\"480\" height=\"308\" alt=\"金鱼移动升级 占位图 鑫空间\" class=\"alignright clip thumb size-medium\" /></p> \n<h3>一、用户行为三剑客</h3> \n<p>以下3个CSS属性：</p> \n<ul> \n <li><code>user-select</code>属性可以设置是否允许用户选择页面中的图文内容；</li> \n <li><code>user-modify</code>属性可以设置是否允许输入框输入内容，以及是否只允许输入纯文本，详见“<a href=\"https://www.zhangxinxu.com/wordpress/?p=5120\">如何让contenteditable元素只能输入纯文本</a>”一文；</li> \n <li><code>user-drag</code>属性可以设置是否允许页面元素拖拽。</li> \n</ul> \n<p>而本文要介绍的主角就是最后的<code>user-drag</code>属性。</p> \n<h3>二、user-drag禁止拖拽</h3> \n<p>页面中的图文元素设置<code>-webkit-user-drag:none</code>，则该元素就无法拖拽了。</p> \n<p>我们通过下面这个案例了解下对应的效果。</p> \n<p>有两张图片，一张是默认的UI样式，另外一张设置禁止拖拽的CSS代码，相关HTML和CSS代码如下所示：</p> \n<pre>&lt;img src=\"by zhangxinxu.jpg\"&gt;\n&lt;img src=\"by zhangxinxu.jpg\" class=\"user-drag\"&gt;</pre> \n<pre>.user-drag {\n    -webkit-user-drag: none;\n}</pre> \n<p>结果，默认图片拖拽的时候，会看到一个半透明的图片飞出来，就像这样：</p> \n<p><img src=\"https://image.zhangxinxu.com/image/blog/202105/2021-05-30_115937.png\" width=\"448\" height=\"325\" alt=\"拖拽效果示意\" class=\"alignnone size-medium\" /></p> \n<p>而设置了禁止拖拽的图片，点击拖拽的时候，是没有任何效果的：</p> \n<p><img src=\"https://image.zhangxinxu.com/image/blog/202105/2021-05-30_120131.png\" width=\"410\" height=\"277\" alt=\"禁止拖拽效果示意\" class=\"alignnone size-medium\" /></p> \n<p><span class=\"hidden\">//zxx: 如果你看到这段文字，说明你现在访问是体验糟糕的垃圾盗版网站，你可以访问原文获得很好的体验：https://www.zhangxinxu.com/wordpress/?p=9969（作者张鑫旭）</span></p> \n<p>眼见为实，您可以狠狠地点击这里：<a href=\"https://www.zhangxinxu.com/study/202105/css-user-drag-demo.php\" rel=\"noopener\" target=\"_blank\">CSS user-drag设置元素禁止拖拽demo</a></p> \n<h4>兼容性</h4> \n<p>Firefox浏览器尚未支持，Chrome浏览器不支持-<code>webkit-user-drag: element</code>声明，移动端不能使用，具体如下截图所示：</p> \n<p><img src=\"https://image.zhangxinxu.com/image/blog/202105/2021-05-30_120428.png\" width=\"566\" height=\"227\" alt=\"user-drag兼容性\" class=\"alignnone size-medium\" /></p> \n<h3>三、HTML draggable属性</h3> \n<p>使用CSS设置元素能够拖拽的优点在于控制方便，适合用在只需要兼容Chrome、Safari浏览器的桌面端PC网页产品中。</p> \n<p>如果HTML有操作权限，且最终效果需要较好的兼容性，则还是需要使用传统的<code>draggable</code>属性实现，通过设置<code>true</code>还是<code>false</code>设置元素能够拖拽。</p> \n<p>例如：</p> \n<pre><span style=\"color:green;\">&lt;!-- 元素可以被拖动 --&gt;</span>\n&lt;img src=\"zxx.jpg\" draggable=\"true\"&gt;\n\n<span style=\"color:green;\">&lt;!-- 元素不可以被拖动 --&gt;</span>\n&lt;img src=\"zxx.jpg\" draggable=\"false\"&gt;</pre> \n<p>可以拖动的效果类似这样：</p> \n<p><img src=\"https://image.zhangxinxu.com/image/blog/202105/2021-05-30_121314.png\" width=\"353\" height=\"215\" alt=\"拖拽效果\" class=\"alignnone size-medium\" /></p> \n<p><code>draggable</code>属性常常和原生的drag &amp; drop事件配合使用，可以实现任意元素的拖拽效果。</p> \n<p>以前专门贡献过包含拖动、插入、排序、删除等<a href=\"https://www.zhangxinxu.com/study/201611/module-drag-drop-sort-delete.html\" rel=\"noopener\" target=\"_blank\">完整交互的demo</a>，有些人应该还不知道，可以<a href=\"https://www.zhangxinxu.com/wordpress/?p=5766\">访问这里</a>了解下其中的实现细节。</p> \n<p>HTML <code>draggable</code>属性的兼容性是相当的好，移动端全部支持，以及IE10+浏览器也都支持，基本上在如今这个年代是可以放心使用的HTML属性：</p> \n<p><img src=\"https://image.zhangxinxu.com/image/blog/202105/2021-05-30_123809.png\" width=\"638\" height=\"229\" alt=\"draggable兼容性\" class=\"alignnone size-medium\" /></p> \n<h3>四、结语、碎碎念</h3> \n<p>上个月开始开始默默写小说，估计至少100多万字，目前更新了20万字，不无脑，看得人不是很多，这也正常，主要还是做自己认为有意义和有价值的事情，等写到50万字时候尝试安利下。</p> \n<p>下个月新书《CSS新世界》应该要出版了，实在是太慢了，去年国庆就写好了，这都过去8个月了，又出来很多CSS新特性，没办法，出版作品，三校三审，这个我不能左右。</p> \n<p>博客这边的技术文章还是保持平均一周更新一篇的节奏。</p> \n<p>过两天就是六一儿童节了，祝各位大朋友小朋友节日快乐！</p> \n<p><img src=\"https://image.zhangxinxu.com/image/emtion/emoji/1f389.svg\" width=\"20\" height=\"20\" align=\"absmiddle\" /></p> \n<p>本文为原创文章，欢迎分享，勿全文转载，如果实在喜欢，可收藏，永不过期，且会及时更新知识点及修正错误，阅读体验也更好。<br /> 本文地址：<a href=\"https://www.zhangxinxu.com/wordpress/?p=9969\">https://www.zhangxinxu.com/wordpress/?p=9969</a></p> \n<p>（本篇完）</p>","descriptionType":"html","publishedDate":"Sun, 30 May 2021 04:37:39 +0000","feedId":23446,"bgimg":"https://image.zhangxinxu.com/image/blog/202105/css-drag-cover.png","linkMd5":"a833e8f241df0660881627116008dd34","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn83@2020_4/2021/05/30/05-34-14-502_407d69a52909d573.webp","destWidth":480,"destHeight":308,"sourceBytes":14386,"destBytes":6226,"author":"张 鑫旭","articleImgCdnMap":{"https://image.zhangxinxu.com/image/blog/202105/css-drag-cover.png":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn83@2020_4/2021/05/30/05-34-14-502_407d69a52909d573.webp","https://image.zhangxinxu.com/image/blog/202105/2021-05-30_115937.png":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn89@2020_3/2021/05/30/05-35-16-956_3ad7a1e255911733.webp","https://image.zhangxinxu.com/image/blog/202105/2021-05-30_120131.png":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn88@2020_6/2021/05/30/05-34-16-904_07789f65bfbe0a90.webp","https://image.zhangxinxu.com/image/blog/202105/2021-05-30_120428.png":"https://cdn.jsdelivr.net/gh/myreaderx13/cdn96@2020_6/2021/05/30/05-34-17-346_e27d13ec16d02ac6.webp","https://image.zhangxinxu.com/image/blog/202105/2021-05-30_121314.png":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn5@2020_2/2021/05/30/05-34-16-847_70bc11b51dbbe677.webp","https://image.zhangxinxu.com/image/blog/202105/2021-05-30_123809.png":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn100@2020_4/2021/05/30/05-34-17-156_d209a2fd5be32fae.webp","https://image.zhangxinxu.com/image/emtion/emoji/1f389.svg":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn4@2020_6/2021/05/30/05-34-16-816_3482d9e4858770c5.svg"},"publishedOrCreatedDate":1622352850254}],"record":{"createdTime":"2021-05-30 13:34:10","updatedTime":"2021-05-30 13:34:10","feedId":23446,"fetchDate":"Sun, 30 May 2021 05:34:10 +0000","fetchMs":2326,"handleMs":7,"totalMs":69752,"newArticles":0,"totalArticles":10,"status":1,"type":0,"ip":"79b59b7ab14b8d981e3d8a220e20848a","hostName":"us-028*","requestId":"a35e51e3c2ef4e07ab3ac066a41e96ea_23446","contentType":"application/rss+xml; charset=UTF-8","totalBytes":85032,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":7,"articlesImgsGithubTotal":7,"successGithubMap":{"myreaderx8":1,"myreaderx6":1,"myreaderx12":1,"myreaderx13":1,"myreaderx1":1,"myreaderx30":1,"myreaderx5oss":1},"failGithubMap":{}},"feed":{"createdTime":"2020-09-07 02:30:26","updatedTime":"2020-09-07 04:23:12","id":23446,"name":"张鑫旭-鑫空间-鑫生活","url":"https://www.zhangxinxu.com/wordpress/feed/","subscriber":140,"website":null,"icon":"https://www.zhangxinxu.com/favicon.ico","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx65/cdn55@2020_5/2020/09/06/20-23-07-457_9a339309f46b07b8.ico","description":"提高前端技术，先从使用谷歌搜索做起","weekly":null,"link":null},"noPictureArticleList":[],"tmpCommonImgCdnBytes":6226,"tmpBodyImgCdnBytes":78806,"tmpBgImgCdnBytes":0,"extra4":{"start":1622352847435,"total":0,"statList":[{"spend":2813,"msg":"获取xml内容"},{"spend":7,"msg":"解释文章"},{"spend":0,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":62420,"msg":"正文链接上传到cdn"}]},"extra5":7,"extra6":7,"extra7ImgCdnFailResultVector":[null],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://us-025.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe-23.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-010.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe61.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-009.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://us-026.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"https://image.zhangxinxu.com/image/blog/202105/css-drag-cover.png","sourceStatusCode":200,"destWidth":480,"destHeight":308,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn83@2020_4/2021/05/30/05-34-14-502_407d69a52909d573.webp","sourceBytes":14386,"destBytes":6226,"targetWebpQuality":75,"feedId":23446,"totalSpendMs":2266,"convertSpendMs":5,"createdTime":"2021-05-30 13:34:12","host":"us-035*","referer":"https://www.zhangxinxu.com/wordpress/?p=9969","linkMd5ListStr":"a833e8f241df0660881627116008dd34,a833e8f241df0660881627116008dd34","githubUser":"myreaderx6","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"14 KB","destSize":"6.1 KB","compressRate":"43.3%"},{"code":1,"isDone":false,"source":"https://image.zhangxinxu.com/image/emtion/emoji/1f389.svg","sourceStatusCode":200,"destWidth":0,"destHeight":0,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn4@2020_6/2021/05/30/05-34-16-816_3482d9e4858770c5.svg","sourceBytes":3176,"destBytes":3176,"feedId":23446,"totalSpendMs":2271,"convertSpendMs":0,"createdTime":"2021-05-30 13:34:14","host":"us-025*","referer":"https://www.zhangxinxu.com/wordpress/?p=9969","linkMd5ListStr":"a833e8f241df0660881627116008dd34","githubUser":"myreaderx1","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"3.1 KB","destSize":"3.1 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://image.zhangxinxu.com/image/blog/202105/2021-05-30_121314.png","sourceStatusCode":200,"destWidth":353,"destHeight":215,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn5@2020_2/2021/05/30/05-34-16-847_70bc11b51dbbe677.webp","sourceBytes":36540,"destBytes":9586,"targetWebpQuality":75,"feedId":23446,"totalSpendMs":2315,"convertSpendMs":12,"createdTime":"2021-05-30 13:34:14","host":"us-026*","referer":"https://www.zhangxinxu.com/wordpress/?p=9969","linkMd5ListStr":"a833e8f241df0660881627116008dd34","githubUser":"myreaderx30","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"35.7 KB","destSize":"9.4 KB","compressRate":"26.2%"},{"code":1,"isDone":false,"source":"https://image.zhangxinxu.com/image/blog/202105/2021-05-30_120131.png","sourceStatusCode":200,"destWidth":410,"destHeight":277,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn88@2020_6/2021/05/30/05-34-16-904_07789f65bfbe0a90.webp","sourceBytes":24470,"destBytes":10610,"targetWebpQuality":75,"feedId":23446,"totalSpendMs":2369,"convertSpendMs":5,"createdTime":"2021-05-30 13:34:14","host":"us-010*","referer":"https://www.zhangxinxu.com/wordpress/?p=9969","linkMd5ListStr":"a833e8f241df0660881627116008dd34","githubUser":"myreaderx8","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"23.9 KB","destSize":"10.4 KB","compressRate":"43.4%"},{"code":1,"isDone":false,"source":"https://image.zhangxinxu.com/image/blog/202105/2021-05-30_123809.png","sourceStatusCode":200,"destWidth":638,"destHeight":229,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn100@2020_4/2021/05/30/05-34-17-156_d209a2fd5be32fae.webp","sourceBytes":9596,"destBytes":19298,"targetWebpQuality":75,"feedId":23446,"totalSpendMs":2659,"convertSpendMs":7,"createdTime":"2021-05-30 13:34:14","host":"europe61*","referer":"https://www.zhangxinxu.com/wordpress/?p=9969","linkMd5ListStr":"a833e8f241df0660881627116008dd34","githubUser":"myreaderx5oss","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"9.4 KB","destSize":"18.8 KB","compressRate":"201.1%"},{"code":1,"isDone":false,"source":"https://image.zhangxinxu.com/image/blog/202105/2021-05-30_120428.png","sourceStatusCode":200,"destWidth":566,"destHeight":227,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx13/cdn96@2020_6/2021/05/30/05-34-17-346_e27d13ec16d02ac6.webp","sourceBytes":11175,"destBytes":20748,"targetWebpQuality":75,"feedId":23446,"totalSpendMs":3058,"convertSpendMs":7,"createdTime":"2021-05-30 13:34:14","host":"europe-23*","referer":"https://www.zhangxinxu.com/wordpress/?p=9969","linkMd5ListStr":"a833e8f241df0660881627116008dd34","githubUser":"myreaderx13","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"10.9 KB","destSize":"20.3 KB","compressRate":"185.7%"},{"code":1,"isDone":false,"source":"https://image.zhangxinxu.com/image/blog/202105/2021-05-30_115937.png","sourceStatusCode":200,"destWidth":448,"destHeight":325,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn89@2020_3/2021/05/30/05-35-16-956_3ad7a1e255911733.webp","sourceBytes":41932,"destBytes":15388,"targetWebpQuality":75,"feedId":23446,"totalSpendMs":2343,"convertSpendMs":7,"createdTime":"2021-05-30 13:35:14","host":"us-026*","referer":"https://www.zhangxinxu.com/wordpress/?p=9969","linkMd5ListStr":"a833e8f241df0660881627116008dd34","githubUser":"myreaderx12","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"40.9 KB","destSize":"15 KB","compressRate":"36.7%"}],"successGithubMap":{"myreaderx8":1,"myreaderx6":1,"myreaderx12":1,"myreaderx13":1,"myreaderx1":1,"myreaderx30":1,"myreaderx5oss":1},"failGithubMap":{}}
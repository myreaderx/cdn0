{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2020-11-03 14:02:21","updatedTime":"2020-11-03 14:02:21","title":"kickstart+PXE+dhcp+nfs 批量无人值守自动化安装操作系统","link":"https://segmentfault.com/a/1190000037704180","description":"<p><strong>实际生产环境中肯定会有一次性安装多台服务器操作系统的工作，因此，光靠传统的一台台安装，很费时费力，数量不多的情况，还是比较好应付，如果一次是几十、几百台，就比较麻烦了，因此，实际生产环境中都用采用批量无人值守的安装方式来安装操作系统，所以今天来详细介绍下，通过利用kickstart+PXE+dhcp+nfs组合的方式批量安装操作系统。</strong></p>\n<h2><strong>1、原理与过程介绍</strong></h2>\n<p><strong>原理：</strong></p>\n<p>利用PXE协议使用服务器通过网络方式启动，后向DHCP服务器请求IP，连接后将服务端的文件下载到本地，执行一系统列的操作</p>\n<p><strong>过程：</strong></p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000037704185\" alt=\"\" title=\"\" /></p>\n<p><strong>第一步：PXE-client发送请求</strong></p>\n<p>将支持PXE启动方式的服务器设置成PXE启动，PEX客户端通过PXE boot ROM以udp的形式发送一个广播包，请求DHCP服务器分配IP地址</p>\n<p><strong>第二步：DHCP应答请求并回应</strong></p>\n<p>DHCP服务器收到请求后，验证是否来自合法的PXE客户端请求，验证通过后，回应PXE客户端，回应信息中包括分配的IP地址，pxelinux启动程序（TFTP）的位置，以及配置文件的位置</p>\n<p><strong>第三步：PXE-client请求下载启动文件</strong></p>\n<p>PXE客户端收到回应后，向TFTP服务器请求下载所需的启动系统安装文件（文件包括：pxelinux.0、pxelinux.cfg/default、vmlinuz、initrd.img等文件）</p>\n<p><strong>第四步：TFTP服务器响应请求并传送文件</strong></p>\n<p>当TFTP服务器收到请求后，服务器会响应请求并应答请求，之后传送所需的文件给客户端</p>\n<p><strong>第五步：PXE-client请求下载自动应答文件</strong></p>\n<p>PXE客户端通过pxelinux.cfg/default文件成引导linux安装后，安装程序必须先确定通过什么方式安装系统，如果是通过网络，则会在此时进行初始化网络，并定位安装系统所需要的二进制包以及配置文件的位置，接着读取文件中指定的自动应答文件ks.cfg，然后根据文件位置请求下载文件</p>\n<p><strong>第六步：客户端安装系统</strong></p>\n<p>将ks.cfg下载到本地，通过文件找到安装系统的ISO文件位置，并请求下载所需的软件包，正常连接后，开始传输软件包，最终开始安装操作系统，安装完成后重新启动</p>\n<p><strong>2、配置NFS及共享目录</strong></p>\n<hr>\n <p><strong>创建NFS共享目录</strong></p>\n <pre><code class=\"text\">[root@kickserver ~]# mkdir /data/sys -p</code></pre>\n <p><strong>创建系统ISO文件挂载目录</strong></p>\n <pre><code class=\"text\">[root@kickserver ~]# mkdir /isodir</code></pre>\n <p><strong>将光盘挂载到挂载目录</strong></p>\n <pre><code class=\"text\">[root@kickserver ~]# mount /dev/cdrom /isodir\nmount: block device /dev/sr0 is write-protected, mounting read-only\n[root@kickserver ~]# ls /isodir/\nCentOS_BuildTag  GPL Packages RPM-GPG-KEY-CentOS-6\nRPM-GPG-KEY-CentOS-Testing-6  EFI   images    RELEASE-NOTES-en-US.html\nRPM-GPG-KEY-CentOS-Debug-6   TRANS.TBL EULA  isolinux\n repodata   RPM-GPG-KEY-CentOS-Security-6</code></pre>\n <p><strong>检查NFS是否安装</strong></p>\n <pre><code class=\"text\">[root@kickserver ~]# rpm -qa |grep nfs\nnfs-utils-lib-1.1.5-11.el6.x86_64\nnfs-utils-1.2.3-70.el6_8.2.x86_64\nnfs4-acl-tools-0.3.3-8.el6.x86_64\nnfs-utils-lib-devel-1.1.5-11.el6.x86_64\n[root@kickserver ~]# rpm -qa |grep rpcbind\nrpcbind-0.2.0-12.el6.x86_64</code></pre>\n <p><strong>配置nfs</strong></p>\n <pre><code class=\"text\">[root@kickserver ~]# echo \"/data/sys 172.16.1.235/24(ro,sync)\" &gt;&gt;/etc/exports\n[root@kickserver ~]# echo \"/isodir 172.16.1.235/24(ro,sync)\" &gt;&gt;/etc/exports\n[root@kickserver ~]# tail -2 /etc/exports \n/data/sys 172.16.1.235/24(ro,sync)\n/isodir 172.16.1.235/24(ro,sync)</code></pre>\n <p><strong>启动服务（注意先后顺序）</strong></p>\n <pre><code class=\"text\">[root@kickserver ~]# /etc/init.d/rpcbind start\nStarting rpcbind:                      [  OK  ]\n[root@kickserver ~]# /etc/init.d/nfs start\nStarting NFS services:             [  OK  ]\nStarting NFS quotas:               [  OK  ]\nStarting NFS mountd:              [  OK  ]\nStarting NFS daemon:              [  OK  ]\nStarting RPC idmapd:                [  OK  ]\n[root@kickserver ~]# chkconfig rpcbind on\n[root@kickserver ~]# chkconfig nfs on\n[root@kickserver ~]# chkconfig --list |egrep \"nfs|rcpbind\"\nnfs  0:off 1:off 2:on 3:on 4:on 5:on 6:off\nnfslock 0:off 1:off 2:off 3:on 4:on 5:on6:off</code></pre>\n <p><strong>检查配置</strong></p>\n <pre><code class=\"text\">[root@kickserver ~]# showmount -e\nclnt_create: RPC: Port mapper failure - Timed out</code></pre>\n <p><strong>出现这个错误提示，首先检查防火墙是否关闭</strong></p>\n <pre><code class=\"text\">[root@kickserver ~]# /etc/init.d/iptables status\niptables: Firewall is not running.</code></pre>\n <p><strong>也可能是本地hosts解析的问题，修改下hosts文件</strong></p>\n <p><strong>127.0.0.1 kickserver------&gt;增加这个配置</strong></p>\n <pre><code class=\"text\">[root@kickserver ~]# showmount -e\nExport list for kickserver:\n/isodir   172.16.1.235/24\n/data/sys 172.16.1.235/24</code></pre>\n <p><strong>3、安装配置TFTP-server</strong></p>\n <hr>\n  <pre><code class=\"text\">[root@kickserver ~]# yum install tftp-server* -y</code></pre>\n  <p>------------------------具体过程省略</p>\n  <p><strong>配置TFTP服务器</strong></p>\n  <pre><code class=\"text\">[root@kickserver ~]# vi /etc/xinetd.d/tftp\n# default: off\n# description: The tftp server serves files using the trivial file transfer \n#       protocol.  The tftp protocol is often used to boot diskless \n#       workstations, download configuration files to network-aware printers, \n#       and to start the installation process for some operating systems.\nservice tftp\n{\n        socket_type   = dgram\n        protocol         = udp\n        wait                = yes\n        user               = root\n        server           = /usr/sbin/in.tftpd\n        server_args  = -s /var/lib/tftpboot\n  disable       = yes------&gt;修改成no\n        per_source     = 11\n        cps                 = 100 2\n        flags                = IPv4\n}</code></pre>\n  <p><strong>启动服务</strong></p>\n  <pre><code class=\"text\">[root@kickserver ~]# /etc/init.d/xinetd start\nStarting xinetd:                     [  OK  ]\n[root@kickserver ~]# chkconfig xinetd on\n[root@kickserver ~]# chkconfig --list|grep xinetd\nxinetd 0:off1:off 2:on  3:on 4:on  5:on  6:off</code></pre>\n  <h2><strong>4、配置PXE引导（bootstarp）</strong></h2>\n  <pre><code class=\"text\">[root@kickserver ~]# cp /usr/share/syslinux/pxelinux.0 /var/lib/tftpboot/  \n[root@kickserver ~]# ll /var/lib/tftpboot/\n-rw-r--r--. 1 root root 26759 Dec 13 16:07 /var/lib/tftpboot/pxelinux.0</code></pre>\n  <p><strong>拷贝网络内核启动文件</strong></p>\n  <pre><code class=\"text\">[root@kickserver ~]# cp /isodir/images/pxeboot/initrd.img /var/lib/tftpboot/\n[root@kickserver ~]# cp /isodir/images/pxeboot/vmlinuz /var/lib/tftpboot/\n[root@kickserver ~]# ll /var/lib/tftpboot/\n-r-xr-xr-x. 1 root root 4128368 Dec 13 16:12 vmlinuz\n-r--r--r--. 1 root root 33383679 Dec 13 16:11 initrd.img\n-rw-r--r--. 1 root root 26759 Dec 13 16:07 pxelinux.0</code></pre>\n  <p><strong>配置引导文件</strong></p>\n  <pre><code class=\"text\">[root@kickserver ~]# cd /var/lib/tftpboot/\n[root@kickserver tftpboot]# mkdir pxelinux.cfg\n[root@kickserver tftpboot]# cp /isodir/isolinux/isolinux.cfg ./pxelinux.cfg/default\n[root@kickserver tftpboot]# vi ./pxelinux.cfg/default\nmenu label ^Install or upgrade an existing system\ndefault test\n#prompt 1\ntimeout 600\ndisplay boot.msg\nmenu background splash.jpg\nmenu title Welcome to CentOS 6.5!\nmenu color border 0 #ffffffff #00000000\nmenu color sel 7 #ffffffff #ff000000\nmenu color title 0 #ffffffff #00000000\nmenu color tabmsg 0 #ffffffff #00000000\nmenu color unsel 0 #ffffffff #00000000\nmenu color hotsel 0 #ff000000 #ffffffff\nmenu color hotkey 7 #ffffffff #ff000000\nmenu color scrollbar 0 #ffffffff #00000000\nlabel test\n  kernel vmlinuz\n  append ks=nfs:172.16.1.235:/data/sys/kickstart/ks.cfg initrd=initrd.img test\n#增加此行配置文件</code></pre>\n  <h2><strong>5、安装配置DHCP</strong></h2>\n  <pre><code class=\"text\">[root@kickserver tftpboot]# yum install dhcp* -y</code></pre>\n  <p><strong>配置DHCP服务器</strong></p>\n  <pre><code class=\"text\">[root@kickserver tftpboot]# cd /etc/dhcp/\n[root@kickserver dhcp]# vi dhcpd.conf\n#\n# DHCP Server Configuration file.\n#   see /usr/share/doc/dhcp*/dhcpd.conf.sample\n#   see 'man 5 dhcpd.conf'\n#\nddns-update-style none;\nignore client-updates;\nallow booting;\nallow bootp;\ndefault-lease-time 21600;\nmax-lease-time 43200;\noption routers 172.16.1.1; \nsubnet 172.16.1.0 netmask 255.255.255.0 { \nrange dynamic-bootp 172.16.1.100 172.16.1.120;\nnext-server 172.16.1.235; \nfilename \"/data/sys/kickstart/ks.cfg\";\nnext-server 172.16.1.235;\nfilename \"/var/lib/tftpboot/pxelinux.0\";\n}\n增加上述标记部分的配置内容</code></pre>\n  <p><strong>启动服务</strong></p>\n  <pre><code class=\"text\">[root@centos6 dhcp]# /etc/init.d/dhcpd start\nStarting dhcpd:                            [  OK  ]\n[root@centos6 dhcp]# chkconfig dhcpd on\n[root@centos6 dhcp]# chkconfig --list|grep dhcpd\ndhcpd0:off 1:off 2:on 3:on 4:on5:on 6:off</code></pre>\n  <h2><strong>6、安装配置kickstart</strong></h2>\n  <pre><code class=\"text\">[root@centos6 dhcp]# mkdir /data/sys/kickstart -p\n#创建文件目录\n[root@centos6 dhcp]# cp /root/anaconda-ks.cfg /data/sys/kickstart/ks.cfg\n#拷贝配置文件\n[root@centos6 dhcp]# ll /data/sys/kickstart/ks.cfg\n-rw------- 1 root root 1229 Dec 13 18:16 /data/sys/kickstart/ks.cfg\n#修改默认权限，例其它用户可读\n[root@centos6 dhcp]# chmod 644 /data/sys/kickstart/ks.cfg\n[root@centos6 dhcp]# ll /data/sys/kickstart/ks.cfg       \n-rw-r--r-- 1 root root 1229 Dec 13 18:16 /data/sys/kickstart/ks.cfg</code></pre>\n  <p><strong>配置ks.cfg文件（重要步骤）</strong></p>\n  <pre><code class=\"text\">[root@centos6 dhcp]# cd /data/sys/kickstart/\n[root@centos6 kickstart]# vi ks.cfg \n# Kickstart file automatically generated by anaconda.\n#version=DEVEL\ninstall\n#cdrom  \n#注释默认的安装方式，新增下面的配置\nnfs --server=172.16.1.235 --dir=/isodir\nlang en_US.UTF-8\nkeyboard us\nnetwork --onboot no --device eth0 --bootproto dhcp --noipv6\n#rootpw  --iscrypted $6$zKfIpmK0g7MKWBVy$I8sk1Q8CAmkEA/zUwhNYC.A1DJOw6un2qbww2empzQx04DGjSvmLbZ2ESVMyOzU0DyT9qsz/IfNsD0Teim//N1\nrootpw 123456\nfirewall --service=ssh\nauthconfig --enableshadow --passalgo=sha512\nselinux --disabled\ntimezone --utc Asia/Shanghai\nbootloader --location=mbr --driveorder=sda --append=\"crashkernel=auto rhgb quiet\"\n# The following is the partition information you requested\n# Note that any partitions you deleted are not expressed\n# here so unless you clear all partitions first, this is\n# not guaranteed to work\n#clearpart --all --drives=sda\n\n#part /boot --fstype=ext4 --size=500\n#part pv.008002 --grow --size=1\n\n#volgroup vg_centos6 --pesize=4096 pv.008002\n#logvol / --fstype=ext4 --name=lv_root --vgname=vg_centos6 --grow --size=1024 --maxsize=51200\n#logvol swap --name=lv_swap --vgname=vg_centos6 --grow --size=1984 --maxsize=1984\nzerombr\n#清除mbr引导\nrepo --name=\"CentOS\"  --baseurl=cdrom:sr0 --cost=100\n%packages  \n#这个软件包可自行定义增加\n@base\n@compat-libraries\n@core\n@debugging\n@development\n@server-policy\n@workstation-policy\nsgpio\ndevice-mapper-persistent-data\nsystemtap-client\n%end</code></pre>\n  <h2><strong>7、配置PXE客户端引导并启动服务器</strong></h2>\n  <p><img src=\"https://segmentfault.com/img/remote/1460000037704183\" alt=\"\" title=\"\" /></p>\n  <p>重新启动服务器</p>\n  <p><img src=\"https://segmentfault.com/img/remote/1460000037704184\" alt=\"\" title=\"\" /></p>\n  <p><strong>可以清楚的看到加载之前配置的文件</strong></p>\n  <p><img src=\"https://segmentfault.com/img/remote/1460000037704188\" alt=\"\" title=\"\" /></p>\n  <p><img src=\"https://segmentfault.com/img/remote/1460000037704186\" alt=\"\" title=\"\" /></p>\n  <p><img src=\"https://segmentfault.com/img/remote/1460000037704187\" alt=\"\" title=\"\" /></p>\n  <p><img src=\"https://segmentfault.com/img/remote/1460000037704189\" alt=\"\" title=\"\" /></p>\n  <p><strong>整个过程无需人工干预，全部自动化完成</strong></p>\n  <p><img src=\"https://segmentfault.com/img/bVbLLcp\" alt=\"image\" title=\"image\" /></p>\n </hr>\n</hr>","descriptionType":"html","publishedDate":"Tue, 03 Nov 2020 03:21:15 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/remote/1460000037704185","linkMd5":"79d81b1b540f2f756e55c6e1210ac6ca","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn69@2020_5/2020/11/03/06-02-31-317_92a4c0a914a677de.webp","destWidth":452,"destHeight":424,"sourceBytes":30436,"destBytes":30436,"author":"民工哥","articleImgCdnMap":{"https://segmentfault.com/img/remote/1460000037704185":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn69@2020_5/2020/11/03/06-02-31-317_92a4c0a914a677de.webp","https://segmentfault.com/img/remote/1460000037704183":"https://cdn.jsdelivr.net/gh/myreaderx/cdn95@2020_4/2020/11/03/06-02-35-025_a71f42dc273be619.webp","https://segmentfault.com/img/remote/1460000037704184":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn93@2020_4/2020/11/03/06-02-35-636_9f7371d7cf5caf84.webp","https://segmentfault.com/img/remote/1460000037704188":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn75@2020_3/2020/11/03/06-02-35-630_bc42702f8e3b5706.webp","https://segmentfault.com/img/remote/1460000037704186":null,"https://segmentfault.com/img/remote/1460000037704187":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn90@2020_3/2020/11/03/06-02-36-023_f546cde29b02326c.webp","https://segmentfault.com/img/remote/1460000037704189":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn82@2020_1/2020/11/03/06-02-35-086_22131f51aeca8e33.webp","https://segmentfault.com/img/bVbLLcp":"https://cdn.jsdelivr.net/gh/myreaderx32/cdn73@2020_2/2020/11/03/06-02-34-660_373a1725dadddf97.webp"},"publishedOrCreatedDate":1604383341012}],"record":{"createdTime":"2020-11-03 14:02:21","updatedTime":"2020-11-03 14:02:21","feedId":6615,"fetchDate":"Tue, 03 Nov 2020 06:02:21 +0000","fetchMs":4119,"handleMs":9593,"totalMs":33787,"newArticles":0,"totalArticles":50,"status":1,"type":0,"ip":"818b2f91db1355e1383e1c549cf591f8","hostName":"europe21*","requestId":"39a3627e79464aea83873b2215194194_6615","contentType":"application/atom+xml; charset=UTF-8","totalBytes":240234,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":8,"articlesImgsGithubTotal":7,"successGithubMap":{"myreaderx7":1,"myreaderx16":1,"myreaderx32":1,"myreaderx33":1,"myreaderx22":1,"myreaderx19":1,"myreaderx":1},"failGithubMap":{"myreaderx23":1}},"feed":{"createdTime":"2020-08-25 04:33:08","updatedTime":"2020-10-20 19:10:36","id":6615,"name":"SegmentFault 最新的文章","url":"http://segmentfault.com/feeds/blogs","subscriber":null,"website":null,"icon":"https://segmentfault.com/favicon.ico","icon_jsdelivr":null,"description":"","weekly":null,"link":"https://segmentfault.com"},"noPictureArticleList":[{"createdTime":"2020-11-03 14:02:40","updatedTime":"2020-11-03 14:02:40","id":null,"feedId":6615,"linkMd5":"79d81b1b540f2f756e55c6e1210ac6ca"}],"tmpCommonImgCdnBytes":30436,"tmpBodyImgCdnBytes":209798,"tmpBgImgCdnBytes":0,"extra4":{"start":1604383326322,"total":0,"statList":[{"spend":5097,"msg":"获取xml内容"},{"spend":9593,"msg":"解释文章"},{"spend":0,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":7896,"msg":"正文链接上传到cdn"}]},"extra5":8,"extra6":8,"extra7ImgCdnFailResultVector":[{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000037704186","sourceStatusCode":200,"destWidth":640,"destHeight":374,"sourceBytes":12346,"destBytes":12346,"feedId":6615,"totalSpendMs":2991,"convertSpendMs":0,"createdTime":"2020-11-03 14:02:34","host":"us-034*","referer":"https://segmentfault.com/a/1190000037704180","linkMd5ListStr":"79d81b1b540f2f756e55c6e1210ac6ca","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx23/cdn86/contents/2020/11/03/06-02-37-302_32f38d6abe3fd59b.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 69189253.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Tue, 03 Nov 2020 06:02:37 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"status":["403 Forbidden"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["E7C4:2D2F:E51B7A:243E582:5FA0F27C"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, read:packages, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1604385059"],"x-ratelimit-used":["60"],"x-xss-protection":["1; mode=block"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx23/cdn86/contents/2020/11/03/06-02-37-302_32f38d6abe3fd59b.webp","historyStatusCode":[],"spendMs":38},"base64UserPassword":null,"token":"df0b9******************************93a6e"},"githubUser":"myreaderx23","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"12.1 KB","destSize":"12.1 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000037704186","sourceStatusCode":200,"destWidth":640,"destHeight":374,"sourceBytes":12346,"destBytes":12346,"feedId":6615,"totalSpendMs":2646,"convertSpendMs":0,"createdTime":"2020-11-03 14:02:37","host":"us-034*","referer":"https://segmentfault.com/a/1190000037704180","linkMd5ListStr":"79d81b1b540f2f756e55c6e1210ac6ca","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx23/cdn86/contents/2020/11/03/06-02-40-032_32f38d6abe3fd59b.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 69189253.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Tue, 03 Nov 2020 06:02:40 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"status":["403 Forbidden"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["E7C4:2D2F:E51BC8:243E60E:5FA0F27D"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, read:packages, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1604385059"],"x-ratelimit-used":["60"],"x-xss-protection":["1; mode=block"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx23/cdn86/contents/2020/11/03/06-02-40-032_32f38d6abe3fd59b.webp","historyStatusCode":[],"spendMs":37},"base64UserPassword":null,"token":"df0b9******************************93a6e"},"githubUser":"myreaderx23","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"12.1 KB","destSize":"12.1 KB","compressRate":"100%"}],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://europe-56.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe-23.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe68.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-034.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]},"http://europe67.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe-22.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-022.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000037704185","sourceStatusCode":200,"destWidth":452,"destHeight":424,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn69@2020_5/2020/11/03/06-02-31-317_92a4c0a914a677de.webp","sourceBytes":30436,"destBytes":30436,"feedId":6615,"totalSpendMs":4866,"convertSpendMs":0,"createdTime":"2020-11-03 14:02:27","host":"us-018*","referer":"https://segmentfault.com/a/1190000037704180","linkMd5ListStr":"79d81b1b540f2f756e55c6e1210ac6ca,79d81b1b540f2f756e55c6e1210ac6ca","githubUser":"myreaderx16","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"29.7 KB","destSize":"29.7 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLLcp","sourceStatusCode":200,"destWidth":800,"destHeight":189,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx32/cdn73@2020_2/2020/11/03/06-02-34-660_373a1725dadddf97.webp","sourceBytes":42974,"destBytes":42974,"feedId":6615,"totalSpendMs":3575,"convertSpendMs":0,"createdTime":"2020-11-03 14:02:32","host":"europe67*","referer":"https://segmentfault.com/a/1190000037704180","linkMd5ListStr":"79d81b1b540f2f756e55c6e1210ac6ca","githubUser":"myreaderx32","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"42 KB","destSize":"42 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000037704189","sourceStatusCode":200,"destWidth":640,"destHeight":340,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn82@2020_1/2020/11/03/06-02-35-086_22131f51aeca8e33.webp","sourceBytes":3508,"destBytes":3508,"feedId":6615,"totalSpendMs":3739,"convertSpendMs":0,"createdTime":"2020-11-03 14:02:32","host":"europe-56*","referer":"https://segmentfault.com/a/1190000037704180","linkMd5ListStr":"79d81b1b540f2f756e55c6e1210ac6ca","githubUser":"myreaderx33","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"3.4 KB","destSize":"3.4 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000037704183","sourceStatusCode":200,"destWidth":640,"destHeight":462,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx/cdn95@2020_4/2020/11/03/06-02-35-025_a71f42dc273be619.webp","sourceBytes":41016,"destBytes":41016,"feedId":6615,"totalSpendMs":3973,"convertSpendMs":0,"createdTime":"2020-11-03 14:02:32","host":"europe-23*","referer":"https://segmentfault.com/a/1190000037704180","linkMd5ListStr":"79d81b1b540f2f756e55c6e1210ac6ca","githubUser":"myreaderx","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"40.1 KB","destSize":"40.1 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000037704184","sourceStatusCode":200,"destWidth":640,"destHeight":356,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn93@2020_4/2020/11/03/06-02-35-636_9f7371d7cf5caf84.webp","sourceBytes":48794,"destBytes":48794,"feedId":6615,"totalSpendMs":4535,"convertSpendMs":0,"createdTime":"2020-11-03 14:02:32","host":"europe-22*","referer":"https://segmentfault.com/a/1190000037704180","linkMd5ListStr":"79d81b1b540f2f756e55c6e1210ac6ca","githubUser":"myreaderx7","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"47.7 KB","destSize":"47.7 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000037704188","sourceStatusCode":200,"destWidth":640,"destHeight":354,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn75@2020_3/2020/11/03/06-02-35-630_bc42702f8e3b5706.webp","sourceBytes":56410,"destBytes":56410,"feedId":6615,"totalSpendMs":4661,"convertSpendMs":0,"createdTime":"2020-11-03 14:02:32","host":"europe68*","referer":"https://segmentfault.com/a/1190000037704180","linkMd5ListStr":"79d81b1b540f2f756e55c6e1210ac6ca","githubUser":"myreaderx19","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"55.1 KB","destSize":"55.1 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000037704187","sourceStatusCode":200,"destWidth":640,"destHeight":381,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn90@2020_3/2020/11/03/06-02-36-023_f546cde29b02326c.webp","sourceBytes":17096,"destBytes":17096,"feedId":6615,"totalSpendMs":4538,"convertSpendMs":0,"createdTime":"2020-11-03 14:02:32","host":"us-022*","referer":"https://segmentfault.com/a/1190000037704180","linkMd5ListStr":"79d81b1b540f2f756e55c6e1210ac6ca","githubUser":"myreaderx22","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"16.7 KB","destSize":"16.7 KB","compressRate":"100%"}],"successGithubMap":{"myreaderx7":1,"myreaderx16":1,"myreaderx32":1,"myreaderx33":1,"myreaderx22":1,"myreaderx19":1,"myreaderx":1},"failGithubMap":{"myreaderx23":1}}
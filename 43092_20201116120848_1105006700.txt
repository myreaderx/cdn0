{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2020-11-16 20:00:29","updatedTime":"2020-11-16 20:00:29","title":"内存数据库解析与主流产品对比（三）","link":"https://juejin.im/post/6895662913597571079","description":"<div class=\"markdown-body\">\n <style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:\"\"}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style>\n <div>\n  _作者：实验室小陈 / 大数据开放实验室_\n </div> \n <p>在上一篇文章<a href=\"http://mp.weixin.qq.com/s?__biz=MzIzNzU0ODEwOA==&amp;mid=2247489169&amp;idx=1&amp;sn=3be9ce6999b1bde68dc38fa8f5dd3459&amp;chksm=e8c7b1b2dfb038a4708d6200402350563b3e9df0df4dbf8000dda51c67ff9b4ba6354b6877b3&amp;scene=21#wechat_redirect\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">《内存数据库解析与主流产品对比（二）》</a>中，我们从数据组织和索引的角度介绍了内存数据库的特点和几款产品的技术实现。本文将继续解析内存数据库，从并发控制、持久化和查询处理的角度介绍几款技术，带来更多维度、更细致的内存数据库技术讨论。</p> \n <p><strong>— 数据库管理系统中的并发控制</strong>**—**</p> \n <p><strong>1. 内存数据库并发控制的两种策略</strong></p> \n <p><strong>a. 多版本的并发控制</strong></p> \n <p>内存数据库中的并发控制主要采用两类策略：1. 多版本的并发控制；2. 分Partition处理。并发控制机制可以分为乐观和悲观两种类型。悲观并发控制则认为进程竞争资源总是存在的，因此访问时先加锁，访问完再释放；乐观并发控制认为大多数情况不需要竞争资源，只在最后提交前检查是否存在冲突，有冲突就回滚，没有就提交。</p> \n <p>乐观并发控制大多数不采用基于锁的技术实现，并且通常是多版本的。多版本意味着每次更新都会产生新的版本，读操作根据可见范围选取合适的老版本，读操作不阻塞写操作，所以并发程度比较高。其缺点是会产生额外开销，例如更新要创建新版本，而且随着版本越来越多，还需要额外开销收回老版本。内存数据库多采用乐观的多版本并发控制机制，相比于基于锁的悲观并发控制其优势是开销较小，而且支持并发程度较高的场景；缺点是在有大量写竞争的场景下，事务间冲突概率比较高时，大量事务会失败和回滚。</p> \n <p><strong>b. 分Partition处理</strong></p> \n <p>内存数据库并发控制的另外一类策略是把数据库分成多个Partition，每个Partition采用串行方式处理事务。优势是单Partition业务的执行没有用于并发控制的额外开销，缺点是存在跨Partition事务时系统的吞吐率会直线下降。因此，如果不能保证所有业务都是单Partition进行，将导致性能不可预测。</p> \n <p><strong>2. 多版本并发控制之 Hekaton</strong></p> \n <p>Hekaton采用乐观的多版本并发控制。Transaction开始时，系统为事务分配读时间戳，并将Transaction标记为active，然后开始执行事务，在操作过程中系统记录被读取/扫描/写入的数据。随后，在Pre-commit阶段，先获取一个结束的时间戳，然后验证读和扫描数据的版本是否仍然有效。如果验证通过，就写一个新版本到日志，执行Commit，然后把所有的新版本设置为可见。Commit之后，Post-Processing记录版本时间戳，之后Transaction才真正结束。</p> \n <p><img alt=\"\" class=\"lazyload\" src=\"https://img-blog.csdnimg.cn/img_convert/5e0b4dcb70a979edd9f28e3d05df032f.png\" data-width=\"800\" data-height=\"600\" referrerpolicy=\"no-referrer\"><img alt=\"\" title=\"点击并拖拽以移动\" class=\"lazyload\" src=\"https://juejin.im/post/data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==\" data-width=\"800\" data-height=\"600\" referrerpolicy=\"no-referrer\">​</img></img></p> \n <p><strong>a. Hekaton 的事务验证</strong></p> \n <p>**i) Read Stability：**Hekaton系统能够保证数据的读稳定性（Read Stability），比如交易开始时读到的每条记录版本，在Commit时仍然可见，从而实现Read Stability。</p> \n <p>**ii) Phantom Avoidances：**Phantom指一个事务在开始和结束时执行相同的条件查询，两次结果不一样。出现幻影的原因是该事务执行过程中，其他事务对相同数据集进行了增加/删除/更新操作。应该如何避免幻影现象呢？可通过重复扫描，检查所读取的数据是否有新版本，保证记录在事务开始时的版本和在结束时一致。</p> \n <p>Hekaton并发控制的好处在于，不需要对Read-Only事务做验证，因为多版本能够保证事务开始时的记录版本在结束时依然存在。对于执行更新的事务，是否做验证由事务的隔离级别决定。例如如果快照隔离级别，就不需要做任何验证；如果要做可重复读，就要做Read Stability；如果是串行化隔离级别，既要保证Read Stability，又要保证Phantom Avoidance。</p> \n <p><strong>b. Hekaton的****回收策略</strong></p> \n <p>Hekaton中的回收任务并不由独立的线程处理，而是每个事务自己回收。如下图所示，Transaction ID为250的事务结束时间戳为150且状态为terminated，此时会有一个Write Set获取所有老版本，并判断当前所有active的Transaction的开始时间戳是否大于ID为250的事务结束时间，即150。如果都大于150，说明不可能再基于时间戳早于150的旧版本进行修改，因而由事务回收旧版本，这部分工作是每个线程在处理Transaction时的额外工作。</p> \n <p><img alt=\"\" class=\"lazyload\" src=\"https://img-blog.csdnimg.cn/img_convert/7f05d5215354f937b5083daed246045e.png\" data-width=\"800\" data-height=\"600\" referrerpolicy=\"no-referrer\"><img alt=\"\" title=\"点击并拖拽以移动\" class=\"lazyload\" src=\"https://juejin.im/post/data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==\" data-width=\"800\" data-height=\"600\" referrerpolicy=\"no-referrer\">​</img></img></p> \n <p><strong>3. 多版本并发控制之Hyper</strong></p> \n <p>Hyper的并发控制和Hekaton的区别主要有以下三点：1. 直接在记录位置进行更新，通过undo buffer来保存对数据的修改，数据和所有修改被链接在一起；2. 验证是根据最近的更新与读的记录进行比较来实现（后续会涉及到）；3. 串行化处理commit，对提交的事务进行排序，并依次处理。</p> \n <p><img alt=\"\" class=\"lazyload\" src=\"https://img-blog.csdnimg.cn/img_convert/60648c013ffbc95716a6b6508b5199d8.png\" data-width=\"800\" data-height=\"600\" referrerpolicy=\"no-referrer\"><img alt=\"\" title=\"点击并拖拽以移动\" class=\"lazyload\" src=\"https://juejin.im/post/data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==\" data-width=\"800\" data-height=\"600\" referrerpolicy=\"no-referrer\">​</img></img></p> \n <p>在事务验证方面，Hyper的验证需要在日志中记录Read Predictates，包括查询或Range Scan，而且要记录插入、删除和更新的记录。在Hyper模式中，插入/删除/更新通过对应的Undo Buffer获悉被修改过的记录，所以记录改动对于Hyper而言是容易的。</p> \n <p>对于每个Transaction，只需要比较该事务从开始到Commit之间，是否存在其他Transaction对满足搜索条件的数据集进行过增/删/改，从而判断是否存在幻影现象，如果存在，就直接终止事务。</p> \n <p><strong>4. 多版本并发控制<strong><strong>之HANA和</strong></strong>HStore/VoltDB</strong></p> \n <p>HANA并行控制方式比较简单，采用悲观的多版本控制，由行级锁保护数据结构，每行由时间戳决定每个版本的可见范围。每个Transaction在更新或删除时都需要申请写锁，而且要做死锁检测。</p> \n <p>HStore/VoltDB是一个Partition系统，锁的粒度很粗，每个Partition对应一把锁，因此Transaction在某节点上执行时，需要拿到该节点所有资源。一旦一个事务可能涉及到两个Partition，就需要把两个Partition的锁都拿到。所以Partition系统的优点是单Partition处理速度非常快，缺点是多Partition效率很低。同时，系统对于负载的偏斜非常敏感，如果有热点数据，那么热点数据就构成系统瓶颈。</p> \n <p><strong>5. 多版本并发控制之负载预知</strong></p> \n <p>假设一个工作负载中，事务需要读和写的数据集可以提前获得，就可以在执行前确定所有事务的执行顺序。Calvin就是基于这样的假设设计的VLL (Very Lightweight Locking）超轻量级锁数据库原型系统。通用场景的工作负载是无法提前知道读写集合的，但在存储过程业务的应用中，可以提前确定读写集合，对于这些场景就可以考虑类似Calvin的系统。</p> \n <p><strong>— 数据库管理系统中的持久化技术—</strong></p> \n <p>对于内存数据库而言，和基于磁盘的数据库相同也需要日志和Checkpoint。Checkpoint的目的是恢复可以从最近的检查点开始，而不需要回放所有数据。因为Checkpoint涉及写入磁盘的操作，所以影响性能，因此要尽量加快相关的处理。</p> \n <p>一个不同是内存数据库的日志和Checkpoint可以不包含索引，在恢复时通过基础数据重新构造索引。内存数据库中的索引在恢复时重新构造，构造完成后也放在内存中而不用落盘，内存索引数据丢失了再重构即可。另外一个不同是内存数据库Checkpoint的数据量更大。面向磁盘的数据库在Checkpoint时，只需要把内存中所有Dirty Page写到磁盘上即可，但是内存数据库Checkpoint要把所有数据全部写到磁盘，数据量无论多大都要全量写一遍，所以内存数据库Checkpoint时写入磁盘的数据远大于基于磁盘的数据库。</p> \n <p><strong>Hekaton Checkpoint</strong></p> \n <p>对于持久化的性能优化，第一要保证写日志时的高吞吐量和低延迟，第二要考虑恢复时如何快速重构整个数据库。Hekaton的记录和索引存放在内存，所有操作写日志到磁盘。日志只记录数据的更新，而不记录索引的更新。进行Checkpoint时，Hekaton会从日志中恢复，并根据主键范围并行处理。如下图，分三个主键范围：100<del>199、200</del>299、300~399，绿色代表数据，红色代表删除的记录（单独保存被删除的文件）。在恢复时，Hekaton用并行算法在内存中重构索引和数据，过程中根据删除记录过滤数据文件，去除被删除的数据，然后从Checkpoint点开始，根据日志回放数据。</p> \n <p><img alt=\"\" class=\"lazyload\" src=\"https://img-blog.csdnimg.cn/img_convert/a76c541cb94b068ee221668d06046681.png\" data-width=\"800\" data-height=\"600\" referrerpolicy=\"no-referrer\"><img alt=\"\" title=\"点击并拖拽以移动\" class=\"lazyload\" src=\"https://juejin.im/post/data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==\" data-width=\"800\" data-height=\"600\" referrerpolicy=\"no-referrer\">​</img></img></p> \n <p><strong>其他系统的Checkpoints</strong></p> \n <p>1. 采用Logic Logging的系统如H-Store/VoltDB，即不记录具体的数据改动，而是记录执行过的操作、指令。它的优势是记录的日志信息比较少。写日志时，HStore/VoltDB采用COW(Copy-on-Write)模式，即正常状态是单版本，但在写日志时会另外“复制”一个版本，待写完再合并版本。</p> \n <p>2. 另一种是定期把Snapshot写入磁盘（不包括索引），比如Hyper就是基于操作系统Folk功能来提供Snapshot。</p> \n <p><strong>— 数据库管理系统中的查询处理—</strong></p> \n <p>传统的查询处理采用火山模型，查询树上的每个节点是一个通用的Operator，优势在于Operator可以任意组合。但Operator拿到的记录只是一个字节数组，还需要调用另一个方法来解析属性以及属性类型。如果这种设计放到内存数据库中，属性以及类型的解析都是在Runtime而非编译时进行的，会对性能产生影响。</p> \n <p>另外对于get-next，如果有百万个数据就要调用百万次，同时get-next通常实现是一个虚函数，通过指针调用，相比直接通过内存地址调用，这些都会影响性能。此外，这样的函数代码在内存中的分布是非连续的，要不断跳转。综上，传统DBMS的查询处理方式在内存数据库当中并不适用，尤其体现在在底层执行时。</p> \n <p><img alt=\"\" class=\"lazyload\" src=\"https://img-blog.csdnimg.cn/img_convert/0cdecc84b30f6efd05be3dda1c729e6b.png\" data-width=\"800\" data-height=\"600\" referrerpolicy=\"no-referrer\"><img alt=\"\" title=\"点击并拖拽以移动\" class=\"lazyload\" src=\"https://juejin.im/post/data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==\" data-width=\"800\" data-height=\"600\" referrerpolicy=\"no-referrer\">​</img></img></p> \n <p>内存数据库通常采用编译执行的方式，首先对查询进行解析，然后优化解析后的语句，并生成执行计划，然后根据模板对执行计划进行编译产生可执行的机器代码，随后把机器代码加载到数据库引擎，执行时直接调用。</p> \n <p><img alt=\"\" class=\"lazyload\" src=\"https://img-blog.csdnimg.cn/img_convert/ebc209829213705223e3dbfcdda01b63.png\" data-width=\"800\" data-height=\"600\" referrerpolicy=\"no-referrer\"><img alt=\"\" title=\"点击并拖拽以移动\" class=\"lazyload\" src=\"https://juejin.im/post/data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==\" data-width=\"800\" data-height=\"600\" referrerpolicy=\"no-referrer\">​</img></img></p> \n <p>下图是对不同查询方式的耗时分析，可以看出编译执行方式中Resource Stall的占比很少。</p> \n <p><img alt=\"\" class=\"lazyload\" src=\"https://img-blog.csdnimg.cn/img_convert/1abcba18dd3728a9a52dcf951db9f144.png\" data-width=\"800\" data-height=\"600\" referrerpolicy=\"no-referrer\"><img alt=\"\" title=\"点击并拖拽以移动\" class=\"lazyload\" src=\"https://juejin.im/post/data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==\" data-width=\"800\" data-height=\"600\" referrerpolicy=\"no-referrer\">​</img></img></p> \n <p>另外一张图解释了目前的CPU架构实现，L2 Cache和主存之间存在Hardware Pre-fetcher。L2 Cache分为指令Cache和Data Cache，指令Cache会由Branch Prediction实现分支预测，Data Cache会由基于Sequential Pattern的Pre-fetcher实现预测。因此，数据库系统的设计需要考虑该架构下如何充分发挥Pre-fetcher功能，让Cache可以不断为 CPU计算单元提供指令和数据，避免出现Cache Stall。</p> \n <p><img alt=\"\" class=\"lazyload\" src=\"https://img-blog.csdnimg.cn/img_convert/381c59f1839663e6f69b1ccbfb41a927.png\" data-width=\"800\" data-height=\"600\" referrerpolicy=\"no-referrer\"><img alt=\"\" title=\"点击并拖拽以移动\" class=\"lazyload\" src=\"https://juejin.im/post/data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==\" data-width=\"800\" data-height=\"600\" referrerpolicy=\"no-referrer\">​</img></img></p> \n <h3 data-id=\"heading-0\">Hekaton编译查询处理</h3> \n <p>Hekaton的编译采用T-SQL存储过程，编译的中间形式叫做MAT Generator，生成最终的C代码在编译器中执行。它产生的库和通用Operator的区别在于：通用Operator需要在运行时解释数据类型；而Hekaton编译方式是把表的定义和查询编译在一起，每个库只能处理对应的表而不能通用，自然就能拿到数据类型，这样的实现能获得3~4倍的性能提升。</p> \n <p><img alt=\"\" class=\"lazyload\" src=\"https://img-blog.csdnimg.cn/img_convert/a743846a21e9343865f295d4406df583.png\" data-width=\"800\" data-height=\"600\" referrerpolicy=\"no-referrer\"><img alt=\"\" title=\"点击并拖拽以移动\" class=\"lazyload\" src=\"https://juejin.im/post/data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==\" data-width=\"800\" data-height=\"600\" referrerpolicy=\"no-referrer\">​</img></img></p> \n <h3 data-id=\"heading-1\">HyPer和MemSQL编译查询处理</h3> \n <p>HyPer的编译方式是把查询树按照Pipeline的分割点每段编译。而MemSQL采用LLVM做编译，把MPI语言编译成代码。</p> \n <p><img alt=\"\" class=\"lazyload\" src=\"https://img-blog.csdnimg.cn/img_convert/4fbc158106391ec20c7bd30652f50ce3.png\" data-width=\"800\" data-height=\"600\" referrerpolicy=\"no-referrer\"><img alt=\"\" title=\"点击并拖拽以移动\" class=\"lazyload\" src=\"https://juejin.im/post/data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==\" data-width=\"800\" data-height=\"600\" referrerpolicy=\"no-referrer\">​</img></img></p> \n <p>下图是一个对MemSQL性能的测试。没有采用编译执行时，MemSQL两次执行相同查询的时间都是0.05秒；如果采用编译执行，第一次耗时0.08秒，但是再执行时耗时仅0.02秒。</p> \n <p><img alt=\"\" class=\"lazyload\" src=\"https://img-blog.csdnimg.cn/img_convert/7cdcb65d5ac8b2ac78718a23e621d1ec.png\" data-width=\"800\" data-height=\"600\" referrerpolicy=\"no-referrer\"><img alt=\"\" title=\"点击并拖拽以移动\" class=\"lazyload\" src=\"https://juejin.im/post/data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==\" data-width=\"800\" data-height=\"600\" referrerpolicy=\"no-referrer\">​</img></img></p> \n <p><img alt=\"\" class=\"lazyload\" src=\"https://img-blog.csdnimg.cn/img_convert/62418163d511b30fc1ef35a31ec4fd72.png\" data-width=\"800\" data-height=\"600\" referrerpolicy=\"no-referrer\"><img alt=\"\" title=\"点击并拖拽以移动\" class=\"lazyload\" src=\"https://juejin.im/post/data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==\" data-width=\"800\" data-height=\"600\" referrerpolicy=\"no-referrer\">​</img></img></p> \n <h2 data-id=\"heading-2\">— 其他内存数据库系统—</h2> \n <p>除了之前提到的几种内存数据库外，还有其他一些著名的内存DBMS出现。</p> \n <p>**i) SolidDB：**诞生于1992年的混合型数据库系统，同时具备基于磁盘和内存的优化引擎，使用VTRIE（Variable-length Trie）树索引和悲观锁机制进行并发控制，通过Snapshot Checkpoints恢复。</p> \n <p><strong>ii) Oracle Times Ten</strong>**：**早期是惠普实验室名为Smallbase的研究项目，在2005年被Oracle收购，现在多作为大型数据库系统的前端内存加速引擎。Oracle Times Ten支持灵活部署，具有独立的DBMS引擎和基于RDBMS的事务缓存；在BI工作时支持Memory Repository，通过Locking进行并发控制；使用行级Latching处理写冲突，采用Write-Ahead Logging和Checkpoint机制提高持久性。</p> \n <p><strong>iii) Altibase</strong>**：**于1999年在韩国成立，在电信、金融和制造业应用广泛。Altibase在Page上存储记录，以Page为粒度进行Checkpoint且兼容传统DBMS引擎；支持多版本并发控制，使用预写日志记录和检查点实现持久性和恢复能力，通过Latching-Free对Page的数据进行Checkpoint。</p> \n <p><strong>iv) P*Time:</strong> 21世纪起源于韩国，2005年出售给SAP，现在是SAP HANA的一部分。P*Time具备极佳的性能处理，对日志记录使用差分编码（XOR），采用混合存储布局，支持大于内存（Larger-than-Memory）的数据库管理系统。</p> \n <p><strong>— 本文小结—</strong></p> \n <p>每一个数据库系统都是针对特定的硬件环境设计，基于磁盘的数据库系统面临CPU单核、内存小、磁盘慢的场景设计。而内存数据库以内存为主存，不需要再重复读写磁盘，磁盘I/O不再是性能瓶颈，而要解决其他瓶颈，比如：1. Locking/Latching的开销；2. Cache-Line Miss，即如果数据结构定义的不够好或在内存中组织的不好，无法匹配CPU的层级缓存，会导致计算性能变差；3. Pointer Chasing，即需要另一个指针解释，或者查另外的表才能查到记录地址，也是主要的性能开销。此外，还有Predicate Evaluation计算、数据迁移/存储时的大量拷贝、分布式系统应用与数据库系统的网络通信等开销。</p> \n <p>在本专栏中，我们介绍了传统基于磁盘的DBMS和内存数据库的特点，并从数据组织、索引、并发控制、语句处理编译、持久化几个方面对内存数据库与基于磁盘数据库的相同和差异性进行了介绍：</p> \n <p>**1. 数据组织：**内存数据库中，把记录分成定长和变长管理，不需要数据连续存储，用指针替代了Page ID + Offset的间接访问；</p> \n <p>**2. 索引优化：**考虑面向内存中的Cach Line优化、快速的内存访问等Latch-Free技术，以及索引的更新不记录日志等；</p> \n <p>**3. 并发控制：**可以采用悲观和乐观的并发控制方式，但是与传统基于磁盘数据库的区别是，内存数据库锁信息和数据绑定，而不用单独的Lock Table管理；</p> \n <p>**4. 查询处理：**内存数据库场景下的顺序访问和随机访问性能差别不大。可以通过编译执行提高查询性能；</p> \n <p>**5. 持久化：**仍然通过WAL（Write-Ahead Logging）做Logging，并采用轻量级的日志，日志记录的内容尽量少，目的是降低日志写入磁盘延迟。</p> \n <p>内存数据库从1970s开始出现经历了理论成熟、投入生产、市场验证等发展环节。随着当前互联网秒杀、移动支付、短视频平台等高并发、大流量、低时延的平台出现，对于数据库性能提出了巨大需求和挑战。同时，内存本身在容量、单位价格友好度上不断提升，以及近期非容失性存储（NVM）的发展，促进了内存数据库的发展，这些因素使得内存数据库在未来有着广阔的市场和落地机会。</p> \n <p><strong>注：本文相关内容参照以下资料：</strong></p> \n <p>1. Pavlo, Andrew &amp; Curino, Carlo &amp; Zdonik, Stan. (2012). Skew-aware automatic database partitioning in shared-nothing, parallel OLTP systems. Proceedings of the ACM SIGMOD International Conference on Management of Data. DOI: 10.1145/2213836.2213844.</p> \n <p>2. Kemper, Alfons &amp; Neumann, Thomas. (2011). HyPer: A hybrid OLTP&amp;OLAP main memory database system based on virtual memory snapshots. Proceedings - International Conference on Data Engineering. 195-206. DOI: 10.1109/ICDE.2011.5767867.</p> \n <p>3. Faerber, Frans &amp; Kemper, Alfons &amp; Larson, Per-Åke &amp; Levandoski, Justin &amp; Neumann, Tjomas &amp; Pavlo, Andrew. (2017). Main Memory Database Systems. Foundations and Trends in Databases. 8. 1-130. DOI: 10.1561/1900000058.</p> \n <p>4. Sikka, Vishal &amp; Färber, Franz &amp; Lehner, Wolfgang &amp; Cha, Sang &amp; Peh, Thomas &amp; Bornhövd, Christof. (2012). Efficient Transaction Processing in SAP HANA Database –The End of a Column Store Myth. DOI: 10.1145/2213836.2213946.</p> \n <p>5. Diaconu, Cristian &amp; Freedman, Craig &amp; Ismert, Erik &amp; Larson, Per-Åke &amp; Mittal, Pravin &amp; Stonecipher, Ryan &amp; Verma, Nitin &amp; Zwilling, Mike. (2013). Hekaton: SQL server's memory-optimized OLTP engine. 1243-1254. DOI: 10.1145/2463676.2463710.</p>\n</div> \n<div class=\"image-viewer-box\" data-v-78c9b824=\"\">\n <!---->\n</div>","descriptionType":"text/html","publishedDate":"Mon, 16 Nov 2020 02:15:37 +0000","feedId":43092,"bgimg":"https://img-blog.csdnimg.cn/img_convert/5e0b4dcb70a979edd9f28e3d05df032f.png","linkMd5":"b54d07a48b24b11fce5aef892b960a8c","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn64@2020_4/2020/11/16/12-08-29-472_42273e676491ecf7.webp","destWidth":1080,"destHeight":502,"sourceBytes":171117,"destBytes":57442,"author":"星环科技官方","articleImgCdnMap":{"https://img-blog.csdnimg.cn/img_convert/5e0b4dcb70a979edd9f28e3d05df032f.png":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn64@2020_4/2020/11/16/12-08-29-472_42273e676491ecf7.webp","https://juejin.im/post/data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn11@2020_3/2020/11/16/12-08-33-551_68b57dfdba0939ae.jpg","https://img-blog.csdnimg.cn/img_convert/7f05d5215354f937b5083daed246045e.png":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn91@2020_6/2020/11/16/12-08-34-424_52ec4540f8022256.webp","https://img-blog.csdnimg.cn/img_convert/60648c013ffbc95716a6b6508b5199d8.png":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn68@2020_3/2020/11/16/12-08-34-282_3216af31175c519e.webp","https://img-blog.csdnimg.cn/img_convert/a76c541cb94b068ee221668d06046681.png":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn3@2020_1/2020/11/16/12-08-33-898_8ab93cfc681fa35d.webp","https://img-blog.csdnimg.cn/img_convert/0cdecc84b30f6efd05be3dda1c729e6b.png":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn7@2020_6/2020/11/16/12-08-33-075_739393556693c512.webp","https://img-blog.csdnimg.cn/img_convert/ebc209829213705223e3dbfcdda01b63.png":null,"https://img-blog.csdnimg.cn/img_convert/1abcba18dd3728a9a52dcf951db9f144.png":"https://cdn.jsdelivr.net/gh/myreaderx/cdn87@2020_6/2020/11/16/12-08-47-339_5f9170c278092502.webp","https://img-blog.csdnimg.cn/img_convert/381c59f1839663e6f69b1ccbfb41a927.png":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn98@2020_6/2020/11/16/12-08-36-516_09a2fd69e934a275.webp","https://img-blog.csdnimg.cn/img_convert/a743846a21e9343865f295d4406df583.png":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn72@2020_5/2020/11/16/12-08-33-778_8d3efa6bf853a558.webp","https://img-blog.csdnimg.cn/img_convert/4fbc158106391ec20c7bd30652f50ce3.png":null,"https://img-blog.csdnimg.cn/img_convert/7cdcb65d5ac8b2ac78718a23e621d1ec.png":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn84@2020_1/2020/11/16/12-08-34-358_5bad3b59cd88a72b.webp","https://img-blog.csdnimg.cn/img_convert/62418163d511b30fc1ef35a31ec4fd72.png":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn75@2020_3/2020/11/16/12-08-34-747_c9ba23ff3f669b5d.webp"},"publishedOrCreatedDate":1605528029337}],"record":{"createdTime":"2020-11-16 20:00:29","updatedTime":"2020-11-16 20:00:29","feedId":43092,"fetchDate":"Mon, 16 Nov 2020 12:00:29 +0000","fetchMs":1317,"handleMs":9,"totalMs":500230,"newArticles":0,"totalArticles":5,"status":1,"type":0,"ip":"07219db1b3e400b7fa1500b956025226","hostName":"europe21*","requestId":"8d9d1c025e2d4a5ba02adf6b7ed2ef56_43092","contentType":"application/xml; charset=utf-8","totalBytes":391928,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":13,"articlesImgsGithubTotal":11,"successGithubMap":{"myreaderx8":1,"myreaderx27":1,"myreaderx2":1,"myreaderx12":1,"myreaderx24":1,"myreaderx1":1,"myreaderx5oss":1,"myreaderx18":1,"myreaderx29":1,"myreaderx19":1,"myreaderx":1},"failGithubMap":{"myreaderx14":1,"myreaderx23":1}},"feed":{"createdTime":"2020-09-07 03:29:51","updatedTime":"2020-09-07 05:47:08","id":43092,"name":"掘金阅读","url":"https://rsshub.app/juejin/category/article","subscriber":74,"website":null,"icon":"https://juejin.im/favicon.ico","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx62/cdn49@2020_4/2020/09/06/21-47-07-436_24cb365749d306f2.ico","description":"掘金阅读 - Made with love by RSSHub(https://github.com/DIYgod/RSSHub)","weekly":null,"link":null},"noPictureArticleList":[{"createdTime":"2020-11-16 20:08:48","updatedTime":"2020-11-16 20:08:48","id":null,"feedId":43092,"linkMd5":"b54d07a48b24b11fce5aef892b960a8c"}],"tmpCommonImgCdnBytes":57442,"tmpBodyImgCdnBytes":334486,"tmpBgImgCdnBytes":0,"extra4":{"start":1605528028009,"total":0,"statList":[{"spend":1319,"msg":"获取xml内容"},{"spend":9,"msg":"解释文章"},{"spend":0,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":17799,"msg":"正文链接上传到cdn"}]},"extra5":13,"extra6":13,"extra7ImgCdnFailResultVector":[{"code":1,"isDone":false,"source":"https://img-blog.csdnimg.cn/img_convert/ebc209829213705223e3dbfcdda01b63.png","sourceStatusCode":200,"destWidth":1051,"destHeight":370,"sourceBytes":84402,"destBytes":26146,"targetWebpQuality":75,"feedId":43092,"totalSpendMs":4302,"convertSpendMs":21,"createdTime":"2020-11-16 20:08:30","host":"us-55*","referer":"https://juejin.im/post/6895662913597571079","linkMd5ListStr":"b54d07a48b24b11fce5aef892b960a8c","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx14/cdn80/contents/2020/11/16/12-08-34-840_6fff9f731e02fc7a.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 68584859.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Mon, 16 Nov 2020 12:08:34 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"status":["403 Forbidden"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["BCEE:1143:156EC4A:2FD7C4A:5FB26BA0"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1605528617"],"x-ratelimit-used":["61"],"x-xss-protection":["1; mode=block"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx14/cdn80/contents/2020/11/16/12-08-34-840_6fff9f731e02fc7a.webp","historyStatusCode":[],"spendMs":46},"base64UserPassword":null,"token":"6b67d******************************91b08"},"githubUser":"myreaderx14","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"82.4 KB","destSize":"25.5 KB","compressRate":"31%"},{"code":1,"isDone":false,"source":"https://img-blog.csdnimg.cn/img_convert/ebc209829213705223e3dbfcdda01b63.png","sourceStatusCode":200,"destWidth":1051,"destHeight":370,"sourceBytes":84402,"destBytes":26146,"targetWebpQuality":75,"feedId":43092,"totalSpendMs":1149,"convertSpendMs":21,"createdTime":"2020-11-16 20:08:34","host":"us-025*","referer":"https://juejin.im/post/6895662913597571079","linkMd5ListStr":"b54d07a48b24b11fce5aef892b960a8c","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx14/cdn80/contents/2020/11/16/12-08-36-074_6fff9f731e02fc7a.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 68584859.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Mon, 16 Nov 2020 12:08:36 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"status":["403 Forbidden"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["B1D4:7FA9:257698F:3F5806A:5FB26BC1"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1605528617"],"x-ratelimit-used":["61"],"x-xss-protection":["1; mode=block"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx14/cdn80/contents/2020/11/16/12-08-36-074_6fff9f731e02fc7a.webp","historyStatusCode":[],"spendMs":37},"base64UserPassword":null,"token":"6b67d******************************91b08"},"githubUser":"myreaderx14","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"82.4 KB","destSize":"25.5 KB","compressRate":"31%"},{"code":1,"isDone":false,"source":"https://img-blog.csdnimg.cn/img_convert/4fbc158106391ec20c7bd30652f50ce3.png","sourceStatusCode":200,"destWidth":1071,"destHeight":608,"sourceBytes":212718,"destBytes":64352,"targetWebpQuality":75,"feedId":43092,"totalSpendMs":7902,"convertSpendMs":94,"createdTime":"2020-11-16 20:08:30","host":"europe-58*","referer":"https://juejin.im/post/6895662913597571079","linkMd5ListStr":"b54d07a48b24b11fce5aef892b960a8c","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx23/cdn96/contents/2020/11/16/12-08-38-028_e9cb29a6957aa06b.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 69189253.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Mon, 16 Nov 2020 12:08:38 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"status":["403 Forbidden"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["E73E:BA8B:6D6FD1D:7E4C617:5FB26BC5"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1605528578"],"x-ratelimit-used":["61"],"x-xss-protection":["1; mode=block"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx23/cdn96/contents/2020/11/16/12-08-38-028_e9cb29a6957aa06b.webp","historyStatusCode":[],"spendMs":349},"base64UserPassword":null,"token":"df0b9******************************93a6e"},"githubUser":"myreaderx23","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"207.7 KB","destSize":"62.8 KB","compressRate":"30.3%"},{"code":1,"isDone":false,"source":"https://img-blog.csdnimg.cn/img_convert/4fbc158106391ec20c7bd30652f50ce3.png","sourceStatusCode":200,"destWidth":1071,"destHeight":608,"sourceBytes":212718,"destBytes":64352,"targetWebpQuality":75,"feedId":43092,"totalSpendMs":1557,"convertSpendMs":43,"createdTime":"2020-11-16 20:08:38","host":"us-005*","referer":"https://juejin.im/post/6895662913597571079","linkMd5ListStr":"b54d07a48b24b11fce5aef892b960a8c","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx23/cdn96/contents/2020/11/16/12-08-40-019_e9cb29a6957aa06b.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 69189253.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Mon, 16 Nov 2020 12:08:40 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"status":["403 Forbidden"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["B878:1795:13A9B22:2CDCF84:5FB26BC2"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1605528578"],"x-ratelimit-used":["61"],"x-xss-protection":["1; mode=block"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx23/cdn96/contents/2020/11/16/12-08-40-019_e9cb29a6957aa06b.webp","historyStatusCode":[],"spendMs":43},"base64UserPassword":null,"token":"df0b9******************************93a6e"},"githubUser":"myreaderx23","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"207.7 KB","destSize":"62.8 KB","compressRate":"30.3%"}],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://us-013.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-037.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-55.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-021.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-005.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]},"http://europe-58.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-009.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-025.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]},"http://us-017.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-033.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe-59.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe67.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"https://img-blog.csdnimg.cn/img_convert/5e0b4dcb70a979edd9f28e3d05df032f.png","sourceStatusCode":200,"destWidth":1080,"destHeight":502,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn64@2020_4/2020/11/16/12-08-29-472_42273e676491ecf7.webp","sourceBytes":171117,"destBytes":57442,"targetWebpQuality":75,"feedId":43092,"totalSpendMs":3245,"convertSpendMs":84,"createdTime":"2020-11-16 20:08:27","host":"us-029*","referer":"https://juejin.im/post/6895662913597571079","linkMd5ListStr":"b54d07a48b24b11fce5aef892b960a8c,b54d07a48b24b11fce5aef892b960a8c","githubUser":"myreaderx18","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"167.1 KB","destSize":"56.1 KB","compressRate":"33.6%"},{"code":1,"isDone":false,"source":"https://img-blog.csdnimg.cn/img_convert/0cdecc84b30f6efd05be3dda1c729e6b.png","sourceStatusCode":200,"destWidth":547,"destHeight":504,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn7@2020_6/2020/11/16/12-08-33-075_739393556693c512.webp","sourceBytes":52569,"destBytes":14464,"targetWebpQuality":75,"feedId":43092,"totalSpendMs":3392,"convertSpendMs":19,"createdTime":"2020-11-16 20:08:30","host":"us-025*","referer":"https://juejin.im/post/6895662913597571079","linkMd5ListStr":"b54d07a48b24b11fce5aef892b960a8c","githubUser":"myreaderx8","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"51.3 KB","destSize":"14.1 KB","compressRate":"27.5%"},{"code":1,"isDone":false,"source":"https://juejin.im/post/data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==","sourceStatusCode":200,"destWidth":0,"destHeight":0,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn11@2020_3/2020/11/16/12-08-33-551_68b57dfdba0939ae.jpg","sourceBytes":91716,"destBytes":91716,"feedId":43092,"totalSpendMs":4068,"convertSpendMs":3,"createdTime":"2020-11-16 20:08:30","host":"us-013*","referer":"https://juejin.im/post/6895662913597571079","linkMd5ListStr":"b54d07a48b24b11fce5aef892b960a8c,b54d07a48b24b11fce5aef892b960a8c,b54d07a48b24b11fce5aef892b960a8c,b54d07a48b24b11fce5aef892b960a8c,b54d07a48b24b11fce5aef892b960a8c,b54d07a48b24b11fce5aef892b960a8c,b54d07a48b24b11fce5aef892b960a8c,b54d07a48b24b11fce5aef892b960a8c,b54d07a48b24b11fce5aef892b960a8c,b54d07a48b24b11fce5aef892b960a8c,b54d07a48b24b11fce5aef892b960a8c,b54d07a48b24b11fce5aef892b960a8c","githubUser":"myreaderx27","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"89.6 KB","destSize":"89.6 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://img-blog.csdnimg.cn/img_convert/a743846a21e9343865f295d4406df583.png","sourceStatusCode":200,"destWidth":518,"destHeight":724,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn72@2020_5/2020/11/16/12-08-33-778_8d3efa6bf853a558.webp","sourceBytes":99537,"destBytes":28778,"targetWebpQuality":75,"feedId":43092,"totalSpendMs":4045,"convertSpendMs":19,"createdTime":"2020-11-16 20:08:30","host":"us-005*","referer":"https://juejin.im/post/6895662913597571079","linkMd5ListStr":"b54d07a48b24b11fce5aef892b960a8c","githubUser":"myreaderx24","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"97.2 KB","destSize":"28.1 KB","compressRate":"28.9%"},{"code":1,"isDone":false,"source":"https://img-blog.csdnimg.cn/img_convert/a76c541cb94b068ee221668d06046681.png","sourceStatusCode":200,"destWidth":1080,"destHeight":468,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn3@2020_1/2020/11/16/12-08-33-898_8ab93cfc681fa35d.webp","sourceBytes":149035,"destBytes":42484,"targetWebpQuality":75,"feedId":43092,"totalSpendMs":4432,"convertSpendMs":29,"createdTime":"2020-11-16 20:08:30","host":"us-037*","referer":"https://juejin.im/post/6895662913597571079","linkMd5ListStr":"b54d07a48b24b11fce5aef892b960a8c","githubUser":"myreaderx2","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"145.5 KB","destSize":"41.5 KB","compressRate":"28.5%"},{"code":1,"isDone":false,"source":"https://img-blog.csdnimg.cn/img_convert/7cdcb65d5ac8b2ac78718a23e621d1ec.png","sourceStatusCode":200,"destWidth":506,"destHeight":178,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn84@2020_1/2020/11/16/12-08-34-358_5bad3b59cd88a72b.webp","sourceBytes":12670,"destBytes":8524,"targetWebpQuality":75,"feedId":43092,"totalSpendMs":4537,"convertSpendMs":6,"createdTime":"2020-11-16 20:08:30","host":"us-033*","referer":"https://juejin.im/post/6895662913597571079","linkMd5ListStr":"b54d07a48b24b11fce5aef892b960a8c","githubUser":"myreaderx29","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"12.4 KB","destSize":"8.3 KB","compressRate":"67.3%"},{"code":1,"isDone":false,"source":"https://img-blog.csdnimg.cn/img_convert/60648c013ffbc95716a6b6508b5199d8.png","sourceStatusCode":200,"destWidth":1080,"destHeight":446,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn68@2020_3/2020/11/16/12-08-34-282_3216af31175c519e.webp","sourceBytes":111343,"destBytes":38118,"targetWebpQuality":75,"feedId":43092,"totalSpendMs":4549,"convertSpendMs":69,"createdTime":"2020-11-16 20:08:30","host":"us-017*","referer":"https://juejin.im/post/6895662913597571079","linkMd5ListStr":"b54d07a48b24b11fce5aef892b960a8c","githubUser":"myreaderx19","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"108.7 KB","destSize":"37.2 KB","compressRate":"34.2%"},{"code":1,"isDone":false,"source":"https://img-blog.csdnimg.cn/img_convert/7f05d5215354f937b5083daed246045e.png","sourceStatusCode":200,"destWidth":1080,"destHeight":388,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn91@2020_6/2020/11/16/12-08-34-424_52ec4540f8022256.webp","sourceBytes":111133,"destBytes":38876,"targetWebpQuality":75,"feedId":43092,"totalSpendMs":4752,"convertSpendMs":39,"createdTime":"2020-11-16 20:08:30","host":"us-009*","referer":"https://juejin.im/post/6895662913597571079","linkMd5ListStr":"b54d07a48b24b11fce5aef892b960a8c","githubUser":"myreaderx12","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"108.5 KB","destSize":"38 KB","compressRate":"35%"},{"code":1,"isDone":false,"source":"https://img-blog.csdnimg.cn/img_convert/62418163d511b30fc1ef35a31ec4fd72.png","sourceStatusCode":200,"destWidth":524,"destHeight":178,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn75@2020_3/2020/11/16/12-08-34-747_c9ba23ff3f669b5d.webp","sourceBytes":13979,"destBytes":10306,"targetWebpQuality":75,"feedId":43092,"totalSpendMs":5159,"convertSpendMs":8,"createdTime":"2020-11-16 20:08:30","host":"europe67*","referer":"https://juejin.im/post/6895662913597571079","linkMd5ListStr":"b54d07a48b24b11fce5aef892b960a8c","githubUser":"myreaderx1","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"13.7 KB","destSize":"10.1 KB","compressRate":"73.7%"},{"code":1,"isDone":false,"source":"https://img-blog.csdnimg.cn/img_convert/381c59f1839663e6f69b1ccbfb41a927.png","sourceStatusCode":200,"destWidth":702,"destHeight":563,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn98@2020_6/2020/11/16/12-08-36-516_09a2fd69e934a275.webp","sourceBytes":185439,"destBytes":35388,"targetWebpQuality":75,"feedId":43092,"totalSpendMs":7360,"convertSpendMs":27,"createdTime":"2020-11-16 20:08:30","host":"europe-59*","referer":"https://juejin.im/post/6895662913597571079","linkMd5ListStr":"b54d07a48b24b11fce5aef892b960a8c","githubUser":"myreaderx5oss","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"181.1 KB","destSize":"34.6 KB","compressRate":"19.1%"},{"code":1,"isDone":false,"source":"https://img-blog.csdnimg.cn/img_convert/1abcba18dd3728a9a52dcf951db9f144.png","sourceStatusCode":200,"destWidth":690,"destHeight":525,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx/cdn87@2020_6/2020/11/16/12-08-47-339_5f9170c278092502.webp","sourceBytes":79885,"destBytes":25832,"targetWebpQuality":75,"feedId":43092,"totalSpendMs":17629,"convertSpendMs":28,"createdTime":"2020-11-16 20:08:30","host":"us-021*","referer":"https://juejin.im/post/6895662913597571079","linkMd5ListStr":"b54d07a48b24b11fce5aef892b960a8c","githubUser":"myreaderx","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"78 KB","destSize":"25.2 KB","compressRate":"32.3%"}],"successGithubMap":{"myreaderx8":1,"myreaderx27":1,"myreaderx2":1,"myreaderx12":1,"myreaderx24":1,"myreaderx1":1,"myreaderx5oss":1,"myreaderx18":1,"myreaderx29":1,"myreaderx19":1,"myreaderx":1},"failGithubMap":{"myreaderx14":1,"myreaderx23":1}}
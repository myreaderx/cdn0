{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2020-10-20 10:59:11","updatedTime":"2020-10-20 10:59:11","title":"排序算法入门之「插入排序」","link":"https://segmentfault.com/a/1190000037534311","description":"<p><img src=\"https://segmentfault.com/img/bVcHEx2\" alt=\"\" title=\"\" /></p>\n<p><img src=\"https://segmentfault.com/img/bVcHEx3\" alt=\"\" title=\"\" /></p>\n<p><img src=\"https://segmentfault.com/img/bVcHEx6\" alt=\"\" title=\"\" /></p>\n<p><img src=\"https://segmentfault.com/img/bVcHEx7\" alt=\"\" title=\"\" /></p>\n<h2>插入排序</h2>\n<p>借用《算法导论》里的例子，就是我们打牌的时候，每新拿一张牌都会把它按顺序插入，这，其实就是插入排序。</p>\n<p><img src=\"https://segmentfault.com/img/bVcHEx8\" alt=\"\" title=\"\" /></p>\n<p>齐姐声明：虽然我们用打牌的例子，但是可不能学胡适先生啊。</p>\n<p><img src=\"https://segmentfault.com/img/bVcHEya\" alt=\"\" title=\"\" /></p>\n<p>对于数组来说怎么做呢？</p>\n<p>有一个重要的思想，叫做<strong>挡板法</strong>，就是用挡板把数组分成两个区间：</p>\n<ul>\n <li>挡板左边：已排序</li>\n <li>挡板右边：未排序</li>\n</ul>\n<p>那么排序分三步走：</p>\n<ol>\n <li>最初挡板是在数组的最左边，index = 0 的位置，也就是保证了已排序区间里一个数都没有，或者也可以包含一个数啦；</li>\n <li>核心思想就是： <br>依次遍历<strong>未排序区间</strong>里的元素，在已排序区间里找到正确的位置插入；</br></li>\n <li>重复这个过程，直到未排序区间为空。</li>\n</ol>\n<h3>举个例子：{5, 2, 1, 0}</h3>\n<p>第一步，挡板最初在这里：</p>\n<p><img src=\"https://segmentfault.com/img/bVcHEyb\" alt=\"\" title=\"\" /></p>\n<p>第二步，<br>把 2 插入已排序区间的正确位置，变成：</br></p>\n<p><img src=\"https://segmentfault.com/img/bVcHEyc\" alt=\"\" title=\"\" /></p>\n<p>重复这个步骤，把 1 排好：</p>\n<p><img src=\"https://segmentfault.com/img/bVcHEye\" alt=\"\" title=\"\" /></p>\n<p>最后把 0 排好：</p>\n<p><img src=\"https://segmentfault.com/img/bVcHEyf\" alt=\"\" title=\"\" /></p>\n<p>那代码也很简单：</p>\n<pre><code class=\"java\">public void insertionSort(int[] input) {\n    if (input.length &lt;= 1) {\n        return;\n    }\n    for(int i = 1; i &lt; input.length; i++) {\n        int tmp = input[i];\n        int j = i - 1;\n        while(j &gt;= 0 &amp;&amp; input[j] &gt; tmp) {\n            input[j+1] = input[j];\n            j --;\n        }\n        input[j+1] = tmp;\n    }\n}</code></pre>\n<p>我们来分析一下这个算法的时空复杂度。</p>\n<h3>时间复杂度</h3>\n<p>关于时间复杂度有两个<strong>要点</strong>：</p>\n<ul>\n <li>是描述随着自变量的增长，所需时间的增长率；</li>\n <li><p>是渐近线复杂度，就是说</p>\n  <ul>\n   <li>不看系数</li>\n   <li>只看最高阶项</li>\n  </ul></li>\n</ul>\n<p>那么我们关心的 worst case 的情况就是： <br>如果数组是近乎倒序的，每次插入都要在数组的第一个位置插入，那么已排序区间内的所有的元素都要往后移动一位，这一步平均是 O(n)，那么重复 n 次就是 O(n^2).</br></p>\n<h3>空间复杂度</h3>\n<p>重点是一个峰值的概念，并不是累计使用的空间。<br>这里是 O(1) 没什么好说的。</br></p>\n<p>引入一个概念：<strong>sorted in place</strong>，也就是<strong>原地排序</strong>。</p>\n<p>原地排序就是指空间复杂度为 O(1) 的算法，因为没有占用额外的空间，就是原地打转嘛。</p>\n<p>其实 in-place 的思想并不是只在排序算法里有，只不过排序算法是一个最广为人知的例子罢了。本质上就是一个<strong>节省使用空间</strong>的思想。</p>\n<p>但是对于排序算法，只分析它的时空复杂度是不够的，还有另外一个重要指标：</p>\n<h3>稳定性</h3>\n<p>这个是排序算法的一个重要指标，意思是元素之间的相对顺序是否保持了不变。</p>\n<p>比如说：{5, 2, 2, 1, 0} </p>\n<p>这个数组排序完成后这里面的两个 2 的相对顺序没有变，那么这个排序就是一个稳定排序。</p>\n<p>那有同学可能就想，顺序变了又有什么关系呢？</p>\n<p>其实，在实际工作中我们排序的对象不会只是一个数字，而是一个个的对象 (object)，那么先按照对象的一个性质来排序，再按照另一个性质来排序，那就不希望原来的那个顺序被改变了。好像有点抽象，我们举个例子。</p>\n<p>比如在股票交易系统里，有买卖双方的报价，那是如何匹配的呢？</p>\n<ul>\n <li>先按照价格排序；</li>\n <li>在相等的价格中，按照出价的<strong>时间顺序</strong>来排序。</li>\n</ul>\n<p>那么一搬来说系统会维持一个按时间排序的价格序列，那么此时只需要用一个<strong>具有稳定性的排序算法</strong>，再按照价格大小来排序就好了。因为稳定性的排序算法可以保持大小相同的两个对象仍维持着原来的时间顺序。</p>\n<p>那么插入排序是否是稳定性的排序呢？答案是肯定的。因为在我们插入新元素的时候是从后往前检查，并不是像打牌的时候随便插一个位置不能保证相对顺序。</p>\n<p>大家可以看下下面的<a href=\"https://visualgo.net/en/sorting\" rel=\"nofollow noreferrer\">动画</a> 就非常清楚了～</p>\n<p><img src=\"https://segmentfault.com/img/bVcHEyg\" alt=\"\" title=\"\" /></p>\n<h3>优化</h3>\n<p>插入排序其实是有很大的优化空间的，你可以搜一下“希尔排序”。</p>\n<p>在刚开始学习的时候，深度固然重要，但因为广度不够，如果学的太深可能会很痛苦，一个知识点就无穷无尽的延展，这并不是一个高效的学习方式。</p>\n<p>所以如果时间有限，就要做好深度和广度的平衡：</p>\n<ul>\n <li>在常用常考的知识点上多花时间精力，追求深度；</li>\n <li>在一些拓展性的知识点上点到为止，先知道有这么回事就行。</li>\n</ul>\n<p>保持 open minded 的心态，后期就会有质的提高。</p>\n<p>如果你喜欢这篇文章，记得给我点赞留言哦～你们的支持和认可，就是我创作的最大动力，我们下篇文章见！</p>\n<p><strong>我是小齐，纽约程序媛，终生学习者，每天晚上 9 点，云自习室里不见不散！</strong></p>\n<p><strong>更多干货文章见我的 Github: <a href=\"https://github.com/xiaoqi6666/NYCSDE\" rel=\"nofollow noreferrer\">https://github.com/xiaoqi6666...</a></strong></p>","descriptionType":"html","publishedDate":"Tue, 20 Oct 2020 01:45:33 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/bVcHEx2","linkMd5":"80acd717b37f223309727b337f9958b4","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn21@2020_2/2020/10/20/02-59-20-479_4c8317a7994c37cb.webp","destWidth":800,"destHeight":560,"sourceBytes":77092,"destBytes":77092,"author":"小齐本齐","articleImgCdnMap":{"https://segmentfault.com/img/bVcHEx2":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn21@2020_2/2020/10/20/02-59-20-479_4c8317a7994c37cb.webp","https://segmentfault.com/img/bVcHEx3":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn61@2020_5/2020/10/20/02-59-24-781_966b069961ca56ed.webp","https://segmentfault.com/img/bVcHEx6":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn29@2020_4/2020/10/20/02-59-24-842_623d99731c4de563.webp","https://segmentfault.com/img/bVcHEx7":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn26@2020_1/2020/10/20/02-59-25-475_d29145e70010ffe8.webp","https://segmentfault.com/img/bVcHEx8":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn34@2020_2/2020/10/20/02-59-24-812_ab0c1d2bddc844ea.webp","https://segmentfault.com/img/bVcHEya":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn46@2020_2/2020/10/20/02-59-24-643_b4f3c68300f72551.webp","https://segmentfault.com/img/bVcHEyb":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn42@2020_6/2020/10/20/02-59-24-880_ec3763dfe1388986.webp","https://segmentfault.com/img/bVcHEyc":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn50@2020_2/2020/10/20/02-59-24-631_4298cd67805e80dc.webp","https://segmentfault.com/img/bVcHEye":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn58@2020_3/2020/10/20/02-59-24-768_2fa589da29c2f150.webp","https://segmentfault.com/img/bVcHEyf":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn53@2020_1/2020/10/20/02-59-25-675_df273dc6b4574560.webp","https://segmentfault.com/img/bVcHEyg":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn37@2020_2/2020/10/20/02-59-25-072_92cc505e2208656e.webp"},"publishedOrCreatedDate":1603162751087}],"record":{"createdTime":"2020-10-20 10:59:11","updatedTime":"2020-10-20 10:59:11","feedId":6615,"fetchDate":"Tue, 20 Oct 2020 02:59:11 +0000","fetchMs":4227,"handleMs":8144,"totalMs":29290,"newArticles":0,"totalArticles":50,"status":1,"type":0,"ip":"8f41f8a56dca4331062af167bd7997ff","hostName":"europe68*","requestId":"b910e71540b3462f861654dc554fa249_6615","contentType":"application/atom+xml; charset=UTF-8","totalBytes":511412,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":11,"articlesImgsGithubTotal":11,"successGithubMap":{"myreaderx8":1,"myreaderx7":1,"myreaderx27":1,"myreaderx6":1,"myreaderx21":1,"myreaderx22":1,"myreaderx3":1,"myreaderx12":1,"myreaderx30":1,"myreaderx5oss":1,"myreaderx18":1},"failGithubMap":{}},"feed":{"createdTime":"2020-08-25 04:33:08","updatedTime":"2020-08-25 07:11:24","id":6615,"name":"SegmentFault 最新的文章","url":"http://segmentfault.com/feeds/blogs","subscriber":null,"website":null,"icon":"https://segmentfault.com/favicon.ico","icon_jsdelivr":null,"description":"","weekly":null,"link":"https://segmentfault.com"},"noPictureArticleList":[],"tmpCommonImgCdnBytes":77092,"tmpBodyImgCdnBytes":434320,"tmpBgImgCdnBytes":0,"extra4":{"start":1603162737571,"total":0,"statList":[{"spend":5372,"msg":"获取xml内容"},{"spend":8144,"msg":"解释文章"},{"spend":0,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":5009,"msg":"正文链接上传到cdn"}]},"extra5":11,"extra6":11,"extra7ImgCdnFailResultVector":[],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://us-53.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-039.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe65.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-031.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-007.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-019.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe61.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-003.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-015.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-027.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVcHEx2","sourceStatusCode":200,"destWidth":800,"destHeight":560,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn21@2020_2/2020/10/20/02-59-20-479_4c8317a7994c37cb.webp","sourceBytes":77092,"destBytes":77092,"feedId":6615,"totalSpendMs":3709,"convertSpendMs":0,"createdTime":"2020-10-20 10:59:18","host":"europe-24*","referer":"https://segmentfault.com/a/1190000037534311","linkMd5ListStr":"80acd717b37f223309727b337f9958b4,80acd717b37f223309727b337f9958b4","githubUser":"myreaderx27","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"75.3 KB","destSize":"75.3 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVcHEyc","sourceStatusCode":200,"destWidth":553,"destHeight":209,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn50@2020_2/2020/10/20/02-59-24-631_4298cd67805e80dc.webp","sourceBytes":16968,"destBytes":16968,"feedId":6615,"totalSpendMs":3534,"convertSpendMs":0,"createdTime":"2020-10-20 10:59:21","host":"us-53*","referer":"https://segmentfault.com/a/1190000037534311","linkMd5ListStr":"80acd717b37f223309727b337f9958b4","githubUser":"myreaderx18","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"16.6 KB","destSize":"16.6 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVcHEx3","sourceStatusCode":200,"destWidth":800,"destHeight":363,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn61@2020_5/2020/10/20/02-59-24-781_966b069961ca56ed.webp","sourceBytes":24034,"destBytes":24034,"feedId":6615,"totalSpendMs":3609,"convertSpendMs":0,"createdTime":"2020-10-20 10:59:21","host":"us-007*","referer":"https://segmentfault.com/a/1190000037534311","linkMd5ListStr":"80acd717b37f223309727b337f9958b4","githubUser":"myreaderx30","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"23.5 KB","destSize":"23.5 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVcHEye","sourceStatusCode":200,"destWidth":577,"destHeight":209,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn58@2020_3/2020/10/20/02-59-24-768_2fa589da29c2f150.webp","sourceBytes":16846,"destBytes":16846,"feedId":6615,"totalSpendMs":3651,"convertSpendMs":0,"createdTime":"2020-10-20 10:59:21","host":"us-019*","referer":"https://segmentfault.com/a/1190000037534311","linkMd5ListStr":"80acd717b37f223309727b337f9958b4","githubUser":"myreaderx6","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"16.5 KB","destSize":"16.5 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVcHEx8","sourceStatusCode":200,"destWidth":800,"destHeight":416,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn34@2020_2/2020/10/20/02-59-24-812_ab0c1d2bddc844ea.webp","sourceBytes":19284,"destBytes":19284,"feedId":6615,"totalSpendMs":3696,"convertSpendMs":0,"createdTime":"2020-10-20 10:59:21","host":"us-027*","referer":"https://segmentfault.com/a/1190000037534311","linkMd5ListStr":"80acd717b37f223309727b337f9958b4","githubUser":"myreaderx22","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"18.8 KB","destSize":"18.8 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVcHEyb","sourceStatusCode":200,"destWidth":580,"destHeight":209,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn42@2020_6/2020/10/20/02-59-24-880_ec3763dfe1388986.webp","sourceBytes":16570,"destBytes":16570,"feedId":6615,"totalSpendMs":3721,"convertSpendMs":0,"createdTime":"2020-10-20 10:59:21","host":"us-003*","referer":"https://segmentfault.com/a/1190000037534311","linkMd5ListStr":"80acd717b37f223309727b337f9958b4","githubUser":"myreaderx7","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"16.2 KB","destSize":"16.2 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVcHEx6","sourceStatusCode":200,"destWidth":800,"destHeight":583,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn29@2020_4/2020/10/20/02-59-24-842_623d99731c4de563.webp","sourceBytes":104674,"destBytes":104674,"feedId":6615,"totalSpendMs":3828,"convertSpendMs":0,"createdTime":"2020-10-20 10:59:21","host":"us-039*","referer":"https://segmentfault.com/a/1190000037534311","linkMd5ListStr":"80acd717b37f223309727b337f9958b4","githubUser":"myreaderx12","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"102.2 KB","destSize":"102.2 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVcHEya","sourceStatusCode":200,"destWidth":618,"destHeight":800,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn46@2020_2/2020/10/20/02-59-24-643_b4f3c68300f72551.webp","sourceBytes":48852,"destBytes":48852,"feedId":6615,"totalSpendMs":3955,"convertSpendMs":0,"createdTime":"2020-10-20 10:59:21","host":"europe65*","referer":"https://segmentfault.com/a/1190000037534311","linkMd5ListStr":"80acd717b37f223309727b337f9958b4","githubUser":"myreaderx21","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"47.7 KB","destSize":"47.7 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVcHEyg","sourceStatusCode":200,"destWidth":800,"destHeight":468,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn37@2020_2/2020/10/20/02-59-25-072_92cc505e2208656e.webp","sourceBytes":81580,"destBytes":81580,"feedId":6615,"totalSpendMs":4040,"convertSpendMs":0,"createdTime":"2020-10-20 10:59:21","host":"us-015*","referer":"https://segmentfault.com/a/1190000037534311","linkMd5ListStr":"80acd717b37f223309727b337f9958b4","githubUser":"myreaderx5oss","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"79.7 KB","destSize":"79.7 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVcHEyf","sourceStatusCode":200,"destWidth":709,"destHeight":209,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn53@2020_1/2020/10/20/02-59-25-675_df273dc6b4574560.webp","sourceBytes":16680,"destBytes":16680,"feedId":6615,"totalSpendMs":4604,"convertSpendMs":0,"createdTime":"2020-10-20 10:59:21","host":"us-031*","referer":"https://segmentfault.com/a/1190000037534311","linkMd5ListStr":"80acd717b37f223309727b337f9958b4","githubUser":"myreaderx3","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"16.3 KB","destSize":"16.3 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVcHEx7","sourceStatusCode":200,"destWidth":800,"destHeight":620,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn26@2020_1/2020/10/20/02-59-25-475_d29145e70010ffe8.webp","sourceBytes":88832,"destBytes":88832,"feedId":6615,"totalSpendMs":4969,"convertSpendMs":0,"createdTime":"2020-10-20 10:59:21","host":"europe61*","referer":"https://segmentfault.com/a/1190000037534311","linkMd5ListStr":"80acd717b37f223309727b337f9958b4","githubUser":"myreaderx8","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"86.8 KB","destSize":"86.8 KB","compressRate":"100%"}],"successGithubMap":{"myreaderx8":1,"myreaderx7":1,"myreaderx27":1,"myreaderx6":1,"myreaderx21":1,"myreaderx22":1,"myreaderx3":1,"myreaderx12":1,"myreaderx30":1,"myreaderx5oss":1,"myreaderx18":1},"failGithubMap":{}}
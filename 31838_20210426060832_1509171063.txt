{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2021-04-26 14:07:24","updatedTime":"2021-04-26 14:07:24","title":"SwitchHosts v4.0 发布","link":"https://oldj.net/article/2021/04/18/switchhosts-v4/","description":"<p>经过了三周的 beta 测试，今天正式发布了 <a href=\"https://swh.app\">SwitchHosts v4.0</a>，这是这个 hosts 管理软件近 5 年来最大的一次更新。</p>\n<img src=\"https://s.oldj.net/upload/2021/04/17/sh_light.png\" alt=\"SwitchHosts v4\" />\n<p>SwitchHosts 的第一个版本发布于 2011 年，今年已是它诞生的第 10 年，它也是我从事编程以来维护得最久的一个项目。其实前几年，我有数次想放弃它，因为我的日常工作较忙，这个业余时间维护的开源项目几乎不能给我带来什么收益，完全是用爱发电。但随着它在 GitHub 上的 Star 越来越多，我想它大概的确帮到了一些用户，我应该再给它一些时间。</p>\n<p>截止目前，SwitchHosts 在 <a href=\"https://github.com/oldj/SwitchHosts\">GitHub</a> 上已经有接近 13k 的 Star，这不是一个小数字了，或许在机缘巧合之下，它已经是当前 hosts 管理这个非常小众的领域最知名的工具之一。</p>\n<p>SwitchHosts 最早的版本是用 Python 写的，2015、2016 年左右改成了基于 Electron 的技术栈。不过那时我也才刚开始学习 Electron、React 等技术，经验方面尚有很多欠缺，因此架构设计上留下了很多问题，这些问题慢慢积累，日趋严重，逐渐让为其修改或添加功能成为一件痛苦的差事，再加上近几年 Web 技术的流行趋势和最佳实践又有了不少变化，让它的老代码日见陈腐，凡此种种让我最终决定，给它做一次大的升级，这就是 v4.0 了。</p>\n<p>v4.0 是一次彻底的重写，除了修复若干遗留了很久的问题之外，内部的代码也由 JavaScript 换成了更严格的 TypeScript。当然，这个版本仍然存在很多问题，远称不上完美，但它应该是目前为止最好的 SwitchHosts 版本，建议老用户们都进行升级。</p>\n<p>除了代码和功能之外，从 v4.0 开始，它的名字也有了一个变化。之前，它一直叫 <code>SwitchHosts!</code> ，名字的最后有一个感叹号 <code>!</code> ，这个感叹号其实没有什么特别的含义，只是最早为它取名的时候觉得这样比较酷，但这些年来，我发现大部分人在提到它时都忽略了那个感叹号，且感叹号在有些时候也的确带来了不便，所以 v4.0 里我决定去掉这个让人困惑的感叹号，现在它就叫 <code>SwitchHosts</code> 了。</p>\n<p>同时，我也给它注册了新的域名：<a href=\"https://swh.app\">swh.app</a> 。一个维护了 10 年，在 GitHub 上有超过 10000 个 Star 的软件，应该值得拥有自己的独立域名了，欢迎访问 <a href=\"https://swh.app\">swh.app</a>！🙂</p>\n<p>最后，小小地展望一下。域名是现代互联网的基石之一，只要这个基石还在，管理 hosts 的需求应该就一直会在，如果得到恰当的维护，SwitchHosts 也许还会有很长的生命周期，作为它的创造者，我想我的责任就是陪伴它、维护它，虽然它可能永远只是一个小众工具软件，但我会努力让它能走得更久、更远，同时希望它能给更多有相关需求的用户带来便利。</p>\n<center><a href=\"https://swh.app\" target=\"_blank\" style=\"box-shadow:none;\"><img src=\"https://s.oldj.net/upload/2021/04/17/uZMWSh5Co1.png\" width=\"128\" alt=\"SwitchHosts\" style=\"border-radius:50%;box-shadow:0 2px 2px 0 rgba(0, 0, 0, 0.2);\" /></a></center>","descriptionType":"text/html","publishedDate":"Sun, 18 Apr 2021 05:49:00 +0000","feedId":31838,"bgimg":"https://s.oldj.net/upload/2021/04/17/sh_light.png","linkMd5":"a1cd6cbab3b6e68647b11602285dc7b2","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn27@2020_5/2021/04/26/06-07-27-781_4425f5640bf0ae73.webp","destWidth":1824,"destHeight":1184,"sourceBytes":177248,"destBytes":168064,"author":"","articleImgCdnMap":{"https://s.oldj.net/upload/2021/04/17/sh_light.png":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn27@2020_5/2021/04/26/06-07-27-781_4425f5640bf0ae73.webp","https://s.oldj.net/upload/2021/04/17/uZMWSh5Co1.png":null},"publishedOrCreatedDate":1619417244454}],"record":{"createdTime":"2021-04-26 14:07:24","updatedTime":"2021-04-26 14:07:24","feedId":31838,"fetchDate":"Mon, 26 Apr 2021 06:07:24 +0000","fetchMs":4557,"handleMs":6,"totalMs":72450,"newArticles":0,"totalArticles":10,"status":1,"type":0,"ip":"af0629e1ae74a27744b4cbd27b40a78e","hostName":"us-011*","requestId":"d92e29090de6437baa9c267de87a9476_31838","contentType":"text/xml","totalBytes":168064,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":2,"articlesImgsGithubTotal":1,"successGithubMap":{"myreaderx27":1},"failGithubMap":{"myreaderx5oss":1}},"feed":{"createdTime":"2020-09-07 02:53:49","updatedTime":"2020-09-07 05:01:57","id":31838,"name":"oldj's blog","url":"http://oldj.net/feed/","subscriber":101,"website":null,"icon":"https://oldj.net/favicon.ico","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx62/cdn62@2020_2/2020/09/06/21-01-47-135_517ed9b55b03cf31.ico","description":"老杰的博客","weekly":null,"link":null},"noPictureArticleList":[{"createdTime":"2021-04-26 14:08:32","updatedTime":"2021-04-26 14:08:32","id":null,"feedId":31838,"linkMd5":"a1cd6cbab3b6e68647b11602285dc7b2"}],"tmpCommonImgCdnBytes":168064,"tmpBodyImgCdnBytes":0,"tmpBgImgCdnBytes":0,"extra4":{"start":1619417239595,"total":0,"statList":[{"spend":4853,"msg":"获取xml内容"},{"spend":6,"msg":"解释文章"},{"spend":0,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":63078,"msg":"正文链接上传到cdn"}]},"extra5":2,"extra6":2,"extra7ImgCdnFailResultVector":[null,{"code":1,"isDone":false,"source":"https://s.oldj.net/upload/2021/04/17/uZMWSh5Co1.png","sourceStatusCode":200,"destWidth":512,"destHeight":512,"sourceBytes":17143,"destBytes":23046,"targetWebpQuality":75,"feedId":31838,"totalSpendMs":2834,"convertSpendMs":21,"createdTime":"2021-04-26 14:08:29","host":"europe62*","referer":"https://oldj.net/article/2021/04/18/switchhosts-v4/","linkMd5ListStr":"a1cd6cbab3b6e68647b11602285dc7b2","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx5oss/cdn32/contents/2021/04/26/06-08-31-672_886af36a963315ff.webp","resp":{"code":409,"msg":"Conflict","body":"{\n  \"message\": \"is at 71417c6e3434bf41fdd6edc746f4b1ca27753442 but expected c7f26d7b875ceff2cdb27b5dcba178ec0eb1f44b\",\n  \"documentation_url\": \"https://docs.github.com/rest/reference/repos#create-or-update-file-contents\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"content-length":["222"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Mon, 26 Apr 2021 06:08:31 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":[""],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["D7C0:755C:106FB21:11C0D60:608658DF"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["5000"],"x-ratelimit-remaining":["4847"],"x-ratelimit-reset":["1619420465"],"x-ratelimit-used":["153"],"x-xss-protection":["0"]},"exceptionMsg":"Unexpected code 409,url is : https://api.github.com/repos/myreaderx5oss/cdn32/contents/2021/04/26/06-08-31-672_886af36a963315ff.webp","historyStatusCode":[],"spendMs":329},"base64UserPassword":null,"token":"ece23******************************0601c"},"githubUser":"myreaderx5oss","githubHttpCode":409,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"16.7 KB","destSize":"22.5 KB","compressRate":"134.4%"}],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://us-039.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://europe62.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"https://s.oldj.net/upload/2021/04/17/sh_light.png","sourceStatusCode":200,"destWidth":1824,"destHeight":1184,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn27@2020_5/2021/04/26/06-07-27-781_4425f5640bf0ae73.webp","sourceBytes":177248,"destBytes":168064,"targetWebpQuality":75,"feedId":31838,"totalSpendMs":4439,"convertSpendMs":164,"createdTime":"2021-04-26 14:07:24","host":"europe61*","referer":"https://oldj.net/article/2021/04/18/switchhosts-v4/","linkMd5ListStr":"a1cd6cbab3b6e68647b11602285dc7b2,a1cd6cbab3b6e68647b11602285dc7b2","githubUser":"myreaderx27","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"173.1 KB","destSize":"164.1 KB","compressRate":"94.8%"}],"successGithubMap":{"myreaderx27":1},"failGithubMap":{"myreaderx5oss":1}}
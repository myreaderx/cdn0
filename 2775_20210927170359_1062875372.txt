{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2021-09-28 01:01:53","updatedTime":"2021-09-28 01:01:53","title":"Android官方正在着手解决碎片化问题","link":"http://weixin.sogou.com/weixin?type=2&query=%E5%89%8D%E7%AB%AF%E4%B9%8B%E5%B7%85+Android%E5%AE%98%E6%96%B9%E6%AD%A3%E5%9C%A8%E7%9D%80%E6%89%8B%E8%A7%A3%E5%86%B3%E7%A2%8E%E7%89%87%E5%8C%96%E9%97%AE%E9%A2%98","description":"<div><div><div id=\"media\" class=\"rich_media_thumb_wrp\">\n\n            <img class=\"rich_media_thumb\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/XIibZ0YbvibkVmbdTiamd9icXUSJNic1Ry1RfKqfaE8QtyWohZlrbGEG9iabicxicXguJrFIrThEgyGjnKYY0KpTGDWeQg/0?wx_fmt=jpeg?imageView2/1/w/600\">\n        </div>\n    \n\n    \n\n    <div class=\"rich_media_content\" id=\"js_content\">\n                    \n\n                    \n                    \n                    \n                    <section style=\"font-size: 16px;text-align: start;white-space: normal;text-size-adjust: auto;color: rgb(63, 63, 63);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;box-sizing: border-box;\"><p style=\"box-sizing: border-box;text-align: justify;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">一年一度的 Linux Plumbers 大会是从事 Linux 系统底层开发的工程师的聚会。考虑到 Android 作为全球规模最大的 Linux 内核发行版之一，谷歌软件工程师 Todd Kjos 今年也参与了大会并做了分享。</p><p style=\"box-sizing: border-box;text-align: justify;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">他表示，即将正式亮相的 Android 12 承诺向最终用户提供谷歌打造的“通用内核镜像（Generic Kernel Image，简称 GKI）”，以确保新一代 Android 能无限拉近与主流 Linux 的距离。</p><p style=\"box-sizing: border-box;text-align: justify;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">在传统上，Linux 内核在入驻 Android 手机之前会经历多次分叉，而且 Android 设备供应流程中的每个利益相关方都会进行自己的分叉。简单来说，就是谷歌先将 Linux LTS 内核分叉为 Android Comon Kernel，之后再由 SoC 供应商针对每款芯片进行分叉，最后由设备制造商进行再次分叉。</p><p style=\"box-sizing: border-box;text-align: justify;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\"><img data-ratio=\"0.6895306859205776\" data-type=\"png\" data-w=\"554\" style=\"width: 768px; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkVmbdTiamd9icXUSJNic1Ry1RfEXlNCAUu866Wno7DsiaLD4ouWfTCSROq1icO9qMGgQO1KUOnqT0zgwTQ/640?wx_fmt=png\"></p><p style=\"box-sizing: border-box;text-align: justify;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">首先，谷歌会将 Linux 内核分叉为“Android Common”——即 Linux 内核加上一系列手机与 Android 特定调整。之后以高通、三星或联发科为代表的 SoC 供应商又会对 Android Common 进行分叉，为各个主要芯片版本开发一套 SoC 专用内核。最后，每台设备都要对应 SoC 内核的一个特定分叉，用于实现对特定设备的硬件支持。</p><p style=\"box-sizing: border-box;text-align: justify;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">可以看到，Android 内核的这种严重碎片化必然引发巨大混乱，我们不难想象从分支树顶端到最终用户推动 bug 修复会是一项多么漫长而艰难的旅程。Android.com 官方文档提到，“内核修改范围极为广泛，因此在最终设备上运行的代码中有多达 50% 的代码属于树外代码（并非来自上游 Linux 或 AOSP 通用内核）。”此外，这样的方式还带来严重的时间浪费，即使是谷歌自家的官方品牌手机也得提前两年就开始供应内核。</p><p style=\"box-sizing: border-box;text-align: justify;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">谷歌一直希望通过 GKI 拉近 Android 与 Linux 之间的距离。谷歌的目标是只为 Android 对 Linux 内核进行一次分叉（而不是三次），再通过插件模块为 SoC 及设备制造商提供定制化空间。</p><p style=\"box-sizing: border-box;text-align: justify;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\"><img data-ratio=\"0.5902527075812274\" data-type=\"png\" data-w=\"554\" style=\"width: 768px; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkVmbdTiamd9icXUSJNic1Ry1RfUln8LfB22ianvYFMnO26aXlPGwrdrZShiatOenbf1y45J632k4UztDCw/640?wx_fmt=png\"></p><p style=\"box-sizing: border-box;text-align: center;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\"><span style=\"font-size: 14px;\">演示文稿中的幻灯片，其中详细介绍了新的内核策略时间表</span></p><p style=\"box-sizing: border-box;text-align: justify;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">Kjos 解释道，“最大的驱动力是将所有特定于硬件的代码从通用内核中迁移至供应商模块处。要达成这个目标，我们必须在各供应商模块与通用内核之间建立起稳定的接口。只有这样，才能让异步发布成为现实。”该接口被称为“KMI”，即“内核模块接口”。Kjos 指出，目前 Android GKI 与主线 Liux 之间的“主要区别”就是各供应商模块间使用的 hook 有所不同。</p><p style=\"box-sizing: border-box;text-align: justify;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">Kjos 提到，谷歌更倾向于在供应商模块中使用短小的 hook（而非主干代码），只有这样“才能尽可能靠近上游”。虽然一直在努力将供应商代码推向上游，但谷歌也承认“这是一项需要耗时多年的庞大计划，我们觉得恐怕很难真正实现。”</p><p style=\"box-sizing: border-box;text-align: justify;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">Kjos 还为未来几年的内核工作制定了时间表，其中 2020 年至 2022 年期间的主要任务是将现有功能推向上游、并隔离供应商的变更模块；从 2023 年开始，正式采用“上游优先”新功能开发模型。“考虑到树外模式对我们的用例非常重要，我们希望能在上游之外也始终保持一定程度的外部开发空间。但必须承认，这项将耗时多年的整体计划是要尽可能消除树外补丁，让下游产出尽可能与上游保持一致。”</p><p style=\"box-sizing: border-box;text-align: justify;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">谷歌的通用内核镜像工作与 Treble 项目非常相似，后者的目标在于建立起 GSI（即「通用系统镜像」），允许以硬件中立的方式更新 Android 版本。如今，我们可以将通用版本的 Android 下载到手机并获得不错的运行体验。但 GKI 的意义有所不同，谷歌希望通过它直接将通用内核交付至最终用户手中。</p><p style=\"box-sizing: border-box;text-align: justify;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">虽然演讲中并没有明确提及，但谷歌确实在努力将 GKI 作为“项目主线”模块进行发布。在它的帮助下，内核更新将能够通过 Play 应用商店发布，整个更新过程与移动应用基本一致。我们已经多次就 GKI 采访了 Android 团队的成员，他们的最终计划不仅是通过 Play 应用商店更新 LTS 内核版本，更是要实现对主要新版本的升级能力。如今，TLS 内核更新偶尔会通过 OTA 的形式送达，但新的主要内核版本更新对大多数移动设备仍是个老大难问题。</p><p style=\"box-sizing: border-box;text-align: justify;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">GKI 计划在“Android 12”版本中与广大消费者正式见面。因为这次内核升级调整只适用于新设备，所以全世界的目光都集中在了 Pixel 6 身上。我们也期待着雄心勃勃的谷歌能借此机会一展自己的强大实力。</p><p style=\"box-sizing: border-box;text-align: justify;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">Pixel 6 将是第一款配备内部“Google Tensor”SoC 的移动设备；如果关于谷歌延长技术支持时间线的理论准确无误，那么这种内核大版本升级能力将使该设备的生命周期超过五年。而且如果 Pixel 6 中使用的是发布于 2020 年 12 月的 Linux 5.10 内核，则代表着谷歌已经在以往平均滞后两年的内核版本基础之上迈出了重要的一步。</p><p style=\"box-sizing: border-box;text-align: left;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\">原文链接：<span style=\"font-size: 14px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;white-space: pre-line;\">https://arstechnica.com/gadgets/2021/09/android-to-take-an-upstream-first-development-model-for-the-linux-kernel/</span></p><p style=\"box-sizing: border-box;text-align: left;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\"><span style=\"font-size: 14px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;white-space: pre-line;\"><br></span></p><hr style=\"border-style: solid;border-width: 1px 0 0;border-color: rgba(0,0,0,0.1);-webkit-transform-origin: 0 0;-webkit-transform: scale(1, 0.5);transform-origin: 0 0;transform: scale(1, 0.5);\"><p style=\"box-sizing: border-box;text-align: left;white-space: pre-line;padding-top: 23px;padding-right: 8px;padding-left: 8px;color: rgb(74, 74, 74);line-height: 1.75em;\"><span style=\"font-size: 14px;color: rgb(74, 74, 74);font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;white-space: pre-line;\"></span>最后，继续向你推荐小盖视频号，每周直播连麦一位高手，和他聊认知，聊成长，聊趋势，聊行业。</p><section class=\"channels_iframe_wrp\"><mpvideosnap class=\"js_uneditable custom_select_card channels_live_iframe\" data-pluginname=\"videosnap\" data-headimgurl=\"https://wx.qlogo.cn/finderhead/lepH6gIibuaGm7mNMqDz4IBfRHjNpYctC3heIYCMX78I/0\" data-username=\"v2_060000231003b20faec8c4eb801fc5dcca0ce535b0773cce23b7c149e1e80afd119554bcbca4@finder\" data-nickname=\"极客时间小盖\" data-desc=\"将在09月29日 20:00 直播\" data-intro=\"连麦拍乐云创始人、资深音视频专家赵加雨，和你聊聊音视频技术的昨天、今天和明天。\" data-noticeid=\"finderlivenotice-v2_060000231003b20faec8c4eb801fc5dcca0ce535b0773cce23b7c149e1e80afd119554bcbca4@finder-1632373741885732-831598182\" data-type=\"live\"></mpvideosnap></section></section>\n                </div>\n\n    \n    <br>\n\n    \n        <a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MzUxMzcxMzE5Ng==&amp;mid=2247511626&amp;idx=1&amp;sn=8b70d10688149a44d9e7d2f101e05a72&amp;chksm=f9521b09ce25921fb76c1a069ec5a4bcd192b58f21691cae8bd6ea9833a2a591e6aaeeeba805#rd\" style=\"color: blue\" class=\"media_tool_meta meta_primary\">原文</a>\n        <br>\n    \n\n    \n\n    <img alt=\"\" width=\"1px\" height=\"1px\" class=\"\" style=\"width:1px;height:1px;display:none\" src=\"http://www.jintiankansha.me/rss_static/19192/yuQE0Jv6du\"></div></div>","descriptionType":"html","publishedDate":"Mon, 27 Sep 2021 01:06:00 +0000","feedId":2775,"bgimg":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/XIibZ0YbvibkVmbdTiamd9icXUSJNic1Ry1RfKqfaE8QtyWohZlrbGEG9iabicxicXguJrFIrThEgyGjnKYY0KpTGDWeQg/0?wx_fmt=jpeg?imageView2/1/w/600","linkMd5":"3615a35ec3657d4c4e5535d8d0ba8216","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn38@2020_6/2021/09/27/17-01-56-149_66fd07842b96d179.webp","destWidth":1080,"destHeight":459,"sourceBytes":18970,"destBytes":10418,"author":"","articleImgCdnMap":{"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/XIibZ0YbvibkVmbdTiamd9icXUSJNic1Ry1RfKqfaE8QtyWohZlrbGEG9iabicxicXguJrFIrThEgyGjnKYY0KpTGDWeQg/0?wx_fmt=jpeg?imageView2/1/w/600":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn38@2020_6/2021/09/27/17-01-56-149_66fd07842b96d179.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkVmbdTiamd9icXUSJNic1Ry1RfEXlNCAUu866Wno7DsiaLD4ouWfTCSROq1icO9qMGgQO1KUOnqT0zgwTQ/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx13/cdn45@2020_5/2021/09/27/17-03-03-181_0b6f95abef612500.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkVmbdTiamd9icXUSJNic1Ry1RfUln8LfB22ianvYFMnO26aXlPGwrdrZShiatOenbf1y45J632k4UztDCw/640?wx_fmt=png":null,"http://www.jintiankansha.me/rss_static/19192/yuQE0Jv6du":null},"publishedOrCreatedDate":1632762113863}],"record":{"createdTime":"2021-09-28 01:01:53","updatedTime":"2021-09-28 01:01:53","feedId":2775,"fetchDate":"Mon, 27 Sep 2021 17:01:53 +0000","fetchMs":535,"handleMs":15,"totalMs":126117,"newArticles":0,"totalArticles":5,"status":1,"type":0,"ip":"bc1eecef1292254c09de6c1e66b750f3","hostName":"europe61*","requestId":"7b5d976a200d4f979a7e6d0938209512_2775","contentType":"application/rss+xml","totalBytes":27060,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":4,"articlesImgsGithubTotal":2,"successGithubMap":{"myreaderx7":1,"myreaderx13":1},"failGithubMap":{}},"feed":{"createdTime":"2020-08-24 21:31:44","updatedTime":"2020-09-01 10:14:55","id":2775,"name":"前端之巅","url":"http://feedmaker.kindle4rss.com/feeds/frontshow.weixin.xml","subscriber":null,"website":null,"icon":"http://www.sogou.com/images/logo/new/favicon.ico?v=4","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx63/cdn48@2020_6/2020/09/01/02-14-41-796_d24121c9beed1de6.ico","description":"InfoQ大前端技术社群：囊括前端、移动、Node全栈一线技术，紧跟业界发展步伐。","weekly":null,"link":null},"noPictureArticleList":[{"createdTime":"2021-09-28 01:03:59","updatedTime":"2021-09-28 01:03:59","id":null,"feedId":2775,"linkMd5":"3615a35ec3657d4c4e5535d8d0ba8216"}],"tmpCommonImgCdnBytes":10418,"tmpBodyImgCdnBytes":16642,"tmpBgImgCdnBytes":0,"extra4":{"start":1632762113085,"total":0,"statList":[{"spend":763,"msg":"获取xml内容"},{"spend":15,"msg":"解释文章"},{"spend":0,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":122654,"msg":"正文链接上传到cdn"}]},"extra5":4,"extra6":3,"extra7ImgCdnFailResultVector":[{"code":1,"isDone":false,"source":"http://www.jintiankansha.me/rss_static/19192/yuQE0Jv6du","sourceStatusCode":405,"sourceBytes":0,"destBytes":0,"feedId":2775,"totalSpendMs":442,"convertSpendMs":0,"createdTime":"2021-09-28 01:01:56","host":"us-011*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E5%89%8D%E7%AB%AF%E4%B9%8B%E5%B7%85+Android%E5%AE%98%E6%96%B9%E6%AD%A3%E5%9C%A8%E7%9D%80%E6%89%8B%E8%A7%A3%E5%86%B3%E7%A2%8E%E7%89%87%E5%8C%96%E9%97%AE%E9%A2%98","linkMd5ListStr":"3615a35ec3657d4c4e5535d8d0ba8216","extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[405],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"http://www.jintiankansha.me/rss_static/19192/yuQE0Jv6du","sourceStatusCode":405,"sourceBytes":0,"destBytes":0,"feedId":2775,"totalSpendMs":656,"convertSpendMs":0,"createdTime":"2021-09-28 01:01:57","host":"us-015*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E5%89%8D%E7%AB%AF%E4%B9%8B%E5%B7%85+Android%E5%AE%98%E6%96%B9%E6%AD%A3%E5%9C%A8%E7%9D%80%E6%89%8B%E8%A7%A3%E5%86%B3%E7%A2%8E%E7%89%87%E5%8C%96%E9%97%AE%E9%A2%98","linkMd5ListStr":"3615a35ec3657d4c4e5535d8d0ba8216","extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[405],"sourceSize":"0","destSize":"0"},null,null,null],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://us-038.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://us-035.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://us-028.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-015.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[405]},"http://us-023.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://us-011.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[405]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/XIibZ0YbvibkVmbdTiamd9icXUSJNic1Ry1RfKqfaE8QtyWohZlrbGEG9iabicxicXguJrFIrThEgyGjnKYY0KpTGDWeQg/0?wx_fmt=jpeg?imageView2/1/w/600","sourceStatusCode":200,"destWidth":1080,"destHeight":459,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn38@2020_6/2021/09/27/17-01-56-149_66fd07842b96d179.webp","sourceBytes":18970,"destBytes":10418,"targetWebpQuality":75,"feedId":2775,"totalSpendMs":2663,"convertSpendMs":11,"createdTime":"2021-09-28 01:01:53","host":"europe-57*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E5%89%8D%E7%AB%AF%E4%B9%8B%E5%B7%85+Android%E5%AE%98%E6%96%B9%E6%AD%A3%E5%9C%A8%E7%9D%80%E6%89%8B%E8%A7%A3%E5%86%B3%E7%A2%8E%E7%89%87%E5%8C%96%E9%97%AE%E9%A2%98","linkMd5ListStr":"3615a35ec3657d4c4e5535d8d0ba8216,3615a35ec3657d4c4e5535d8d0ba8216","githubUser":"myreaderx7","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"18.5 KB","destSize":"10.2 KB","compressRate":"54.9%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkVmbdTiamd9icXUSJNic1Ry1RfEXlNCAUu866Wno7DsiaLD4ouWfTCSROq1icO9qMGgQO1KUOnqT0zgwTQ/640?wx_fmt=png","sourceStatusCode":200,"destWidth":554,"destHeight":382,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx13/cdn45@2020_5/2021/09/27/17-03-03-181_0b6f95abef612500.webp","sourceBytes":64317,"destBytes":16642,"targetWebpQuality":75,"feedId":2775,"totalSpendMs":5480,"convertSpendMs":12,"createdTime":"2021-09-28 01:02:57","host":"us-028*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E5%89%8D%E7%AB%AF%E4%B9%8B%E5%B7%85+Android%E5%AE%98%E6%96%B9%E6%AD%A3%E5%9C%A8%E7%9D%80%E6%89%8B%E8%A7%A3%E5%86%B3%E7%A2%8E%E7%89%87%E5%8C%96%E9%97%AE%E9%A2%98","linkMd5ListStr":"3615a35ec3657d4c4e5535d8d0ba8216","githubUser":"myreaderx13","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"62.8 KB","destSize":"16.3 KB","compressRate":"25.9%"}],"successGithubMap":{"myreaderx7":1,"myreaderx13":1},"failGithubMap":{}}
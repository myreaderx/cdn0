{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2021-08-15 12:35:37","updatedTime":"2021-08-15 12:35:37","title":"SVG任意基本图形转path路径","link":"https://www.zhangxinxu.com/wordpress/?p=10047","description":"<p>by <a href=\"https://www.zhangxinxu.com/\">zhangxinxu</a> from <a href=\"https://www.zhangxinxu.com/wordpress/?p=10047\">https://www.zhangxinxu.com/wordpress/?p=10047</a> 鑫空间-鑫生活<br /> 本文欢迎分享与聚合，全文转载就不必了，尊重版权，圈子就这么大，若急用可以联系授权。</p> \n<p><script>window.wxShareImgUrl = 'https://www.zhangxinxu.com/study/image/share/202108-svg-path.png';</script></p> \n<p><img src=\"https://image.zhangxinxu.com/image/blog/202108/svg-shape-path-cover.png\" width=\"480\" height=\"306\" alt=\"图形路径封面图\" class=\"alignright clip thumb size-medium\" /></p> \n<h3>一、背景</h3> \n<p>之前介绍“<a href=\"https://www.zhangxinxu.com/wordpress/2021/07/svg-filter-shadow-css-blur/\">使用SVG实现CSS无法实现的模糊和阴影效果</a>”这篇文章的底部，有人评论，希望我写篇介绍“svg的基本形状转path”的文章，如下截图：</p> \n<p><img src=\"https://image.zhangxinxu.com/image/blog/202108/2021-08-07_201858.png\" width=\"459\" height=\"396\" alt=\"评论截图\" class=\"alignnone size-medium\" /></p> \n<p>实际上，这个没什么好介绍的。</p> \n<p>如果是对path路径指令感兴趣，可以参考我多年前的这篇文章：“<a href=\"https://www.zhangxinxu.com/wordpress/?p=4197\">深度掌握SVG路径path的贝塞尔曲线指令</a>”。</p> \n<p>如果是想知道SVG基本图形元素全部转为<code>&lt;path&gt;</code>的代码，则之前也有文章展示过，不过比较隐蔽，是“<a href=\"https://www.zhangxinxu.com/wordpress/2020/10/css-var-custom-any-function-polyfill/\">巧借CSS var变量实现任意的CSS自定义语法</a>”这篇文章的“Polyfill案例之offset-path”这部分。</p> \n<p><code>offset-path</code>属性目前只支持<code>path()</code>函数，其他CSS图形基本函数并不支持，所以需要将其他基本函数转为<code>path()</code>函数，里面用到了SVG 基本元素转path路径的能力。</p> \n<p>不过这段能力藏的太深了，我自己找都要找一会儿，既然有人询问，想一想，还是专门拎出来吧。</p> \n<h3>二、其实就一段JS代码</h3> \n<p>SVG基本元素除了<code>&lt;path&gt;</code>，还有<code>&lt;rect&gt;</code>矩形元素（支持圆角）、<code>&lt;circle&gt;</code>圆形元素、<code>&lt;ellipse&gt;</code>椭圆元素、<code>&lt;line&gt;</code>直线元素、<code>&lt;polygon&gt;</code>多边形元素、<code>&lt;polyline&gt;</code>折线元素。</p> \n<p>想要进行转换，只需要找到对应元素的坐标，套用path指令就可以了。</p> \n<p>拿最简单的直线举例，假设<code>&lt;line&gt;</code>元素对象是 node，则，转路线代码就是下面这样的：</p> \n<pre>var x1 = node.getAttribute('x1')\nvar y1 = node.getAttribute('y1')\nvar x2 = node.getAttribute('x2')\nvar y2 = node.getAttribute('y2')\n\nvar path = 'M' + x1 + ' ' + y1 + 'L' + x2 + ' ' + y2\n</pre> \n<p>其他图形也是类似的。</p> \n<p>为了方便大家使用，我专门建了个git项目：<a href=\"https://gitee.com/zhangxinxu/svg-to-path\" rel=\"noopener\" target=\"_blank\" class=\"a_link\">svg-to-path</a></p> \n<p><img src=\"https://image.zhangxinxu.com/image/blog/202108/2021-08-07_211503.png\" width=\"471\" height=\"308\" alt=\"项目资源截图\" class=\"alignnone size-medium\" /></p> \n<p>其中的svg2path.js就是需要的JS资源，使用如下：</p> \n<ol> \n <li>引入svg2path.js <pre>&lt;script src=\"https://gitee.com/zhangxinxu/svg-to-path/raw/master/svg2path.js\"&gt;&lt;/script&gt;</pre> </li> \n <li>执行转换 <pre>var path = svg2path(node);</pre> </li> \n <li>根据返回的path路径做你想做的其他事情。</li> \n</ol> \n<p><strong>语法</strong></p> \n<pre>path = svg2path(node)</pre> \n<p><strong>参数</strong></p> \n<dl class=\"dl\"> \n <dt>\n  <strong>node</strong>\n </dt> \n <dd>\n  必需。表示需要转换的基本 SVG 图形节点，例如 \n  <code>&lt;circle&gt;</code>、 \n  <code>&lt;rect&gt;</code>、 \n  <code>&lt;ellipse&gt;</code>、 \n  <code>&lt;polygon&gt;</code> 等元素。\n </dd> \n</dl> \n<p><strong>返回值</strong></p> \n<p>返回值 <code>path</code> 是转换后的路径字符串。</p> \n<p><strong>演示</strong></p> \n<p>例如有个SVG图形是个圆：</p> \n<pre>&lt;svg width=\"100\" height=\"100\"&gt;\n  &lt;circle cx=\"50\" cy=\"50\" r=\"40\"&gt;&lt;/circle&gt;\n&lt;/svg&gt;</pre> \n<p>找到对应的 <code>&lt;circle&gt;</code> 元素，执行 <code>svg2path(circle)</code> 生成 path 路径，设置在<code>&lt;path&gt;</code>元素上后（代码如下），可以得到一样的图形效果：</p> \n<pre>&lt;svg width=\"100\" height=\"100\"&gt;\n  &lt;path d=\"M10 50a40 40 0 1 0 80 0a40 40 0 1 0 -80 0z\"&gt;&lt;/path&gt;\n&lt;/svg&gt;</pre> \n<p>下面就是demo.html原型图案使用基本图形和路径图形表现后的效果和代码截图：</p> \n<p><img src=\"https://image.zhangxinxu.com/image/blog/202108/2021-08-07_212714.png\" width=\"728\" height=\"656\" alt=\"转换示意\" class=\"alignnone size-medium\" /></p> \n<h3>三、结束语</h3> \n<p>看吧，真的没什么好讲的，对了，这段代码转换的核心部分是很多年前我从哪里看到记录下来的，具体出处不详了，在实践过程中发现了一些问题，自己改了不少地方，目前这个版本还算稳定。</p> \n<p>如果基本图形元素的属性不合法，path会是undefined，大家使用的时候注意判断。</p> \n<p>另外，播报一则预告，抽奖用的新书到了，下周我会在微博和掘金（关注我的沸点）上进行新书的抽奖，大家可以关注下，应该都是周一发（如果我忘记了那就是周二）：</p> \n<p><img src=\"https://image.zhangxinxu.com/image/blog/202108/mybooks.jpg\" width=\"360\" height=\"480\" alt=\"我的新书\" class=\"alignnone size-medium\" /></p> \n<p>新书厚度是前两本之和，已经是精简过很多内容之后的了，目前均价到手要100元左右，抽到就是赚到。</p> \n<p>有人留言问我可不可以赠书，是这样的，一般送新书都是送行业有影响力的，然后人家会友情帮忙晒一下，互惠互利，如果你是行业小透明，可以寄希望与抽奖。</p> \n<p>好了，祝大家都有好运！</p> \n<p><img src=\"https://image.zhangxinxu.com/image/emtion/emoji/1f389.svg\" width=\"20\" height=\"20\" align=\"absmiddle\" /></p> \n<p>本文为原创文章，欢迎分享，勿全文转载，如果实在喜欢，可收藏，永不过期，且会及时更新知识点及修正错误，阅读体验也更好。<br /> 本文地址：<a href=\"https://www.zhangxinxu.com/wordpress/?p=10047\">https://www.zhangxinxu.com/wordpress/?p=10047</a></p> \n<p>（本篇完）</p>","descriptionType":"html","publishedDate":"Sat, 07 Aug 2021 15:18:51 +0000","feedId":3950,"bgimg":"https://image.zhangxinxu.com/image/blog/202108/svg-shape-path-cover.png","linkMd5":"36e1e8a57bb43b975e1d09a4bb9620f7","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn72@2020_1/2021/08/15/04-36-41-972_7a9c807accd29234.webp","destWidth":480,"destHeight":306,"sourceBytes":72889,"destBytes":33922,"author":"张 鑫旭","articleImgCdnMap":{"https://image.zhangxinxu.com/image/blog/202108/svg-shape-path-cover.png":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn72@2020_1/2021/08/15/04-36-41-972_7a9c807accd29234.webp","https://image.zhangxinxu.com/image/blog/202108/2021-08-07_201858.png":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn6@2020_2/2021/08/15/04-36-44-538_77ac0b20560bca1e.webp","https://image.zhangxinxu.com/image/blog/202108/2021-08-07_211503.png":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn13@2020_1/2021/08/15/04-36-44-319_df0b64159a29cbeb.webp","https://image.zhangxinxu.com/image/blog/202108/2021-08-07_212714.png":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn7@2020_1/2021/08/15/04-36-44-679_49a224682de562ad.webp","https://image.zhangxinxu.com/image/blog/202108/mybooks.jpg":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn3@2020_3/2021/08/15/04-36-46-424_1a7755c04fc9b113.webp","https://image.zhangxinxu.com/image/emtion/emoji/1f389.svg":null},"publishedOrCreatedDate":1629002137397}],"record":{"createdTime":"2021-08-15 12:35:37","updatedTime":"2021-08-15 12:35:37","feedId":3950,"fetchDate":"Sun, 15 Aug 2021 04:35:37 +0000","fetchMs":4549,"handleMs":8,"totalMs":74431,"newArticles":0,"totalArticles":10,"status":1,"type":0,"ip":"bc1eecef1292254c09de6c1e66b750f3","hostName":"europe67*","requestId":"23c0474b5e2d40f89e3aeb25c6e0f1c3_3950","contentType":"application/rss+xml; charset=UTF-8","totalBytes":163736,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":6,"articlesImgsGithubTotal":5,"successGithubMap":{"myreaderx16":1,"myreaderx10":1,"myreaderx12":1,"myreaderx18":1,"myreaderx29":1},"failGithubMap":{"myreaderx14":1}},"feed":{"createdTime":"2020-08-25 04:29:34","updatedTime":"2020-09-01 10:39:31","id":3950,"name":"张鑫旭-鑫空间-鑫生活","url":"http://www.zhangxinxu.com/wordpress/?feed=rss2","subscriber":null,"website":null,"icon":"https://www.zhangxinxu.com/favicon.ico","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx61/cdn11@2020_3/2020/09/01/02-39-31-993_9a339309f46b07b8.ico","description":"提高前端技术，先从使用谷歌搜索做起","weekly":null,"link":null},"noPictureArticleList":[{"createdTime":"2021-08-15 12:36:46","updatedTime":"2021-08-15 12:36:46","id":null,"feedId":3950,"linkMd5":"36e1e8a57bb43b975e1d09a4bb9620f7"}],"tmpCommonImgCdnBytes":33922,"tmpBodyImgCdnBytes":129814,"tmpBgImgCdnBytes":0,"extra4":{"start":1629002132362,"total":0,"statList":[{"spend":5027,"msg":"获取xml内容"},{"spend":8,"msg":"解释文章"},{"spend":1,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":4533,"msg":"正文链接上传到cdn"}]},"extra5":6,"extra6":6,"extra7ImgCdnFailResultVector":[null,{"code":1,"isDone":false,"source":"https://image.zhangxinxu.com/image/emtion/emoji/1f389.svg","sourceStatusCode":200,"destWidth":0,"destHeight":0,"sourceBytes":3176,"destBytes":3176,"feedId":3950,"totalSpendMs":2118,"convertSpendMs":0,"createdTime":"2021-08-15 12:36:42","host":"us-006*","referer":"https://www.zhangxinxu.com/wordpress/?p=10047","linkMd5ListStr":"36e1e8a57bb43b975e1d09a4bb9620f7","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx14/cdn19/contents/2021/08/15/04-36-44-463_3482d9e4858770c5.svg","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 68584859.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Resource, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Sun, 15 Aug 2021 04:36:44 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["CA20:5445:B2D1F8:19C3D38:611899DC"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1629003190"],"x-ratelimit-resource":["core"],"x-ratelimit-used":["61"],"x-xss-protection":["0"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx14/cdn19/contents/2021/08/15/04-36-44-463_3482d9e4858770c5.svg","historyStatusCode":[],"spendMs":34},"base64UserPassword":null,"token":"6b67d******************************91b08"},"githubUser":"myreaderx14","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"3.1 KB","destSize":"3.1 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://image.zhangxinxu.com/image/emtion/emoji/1f389.svg","sourceStatusCode":200,"destWidth":0,"destHeight":0,"sourceBytes":3176,"destBytes":3176,"feedId":3950,"totalSpendMs":973,"convertSpendMs":0,"createdTime":"2021-08-15 12:36:44","host":"us-006*","referer":"https://www.zhangxinxu.com/wordpress/?p=10047","linkMd5ListStr":"36e1e8a57bb43b975e1d09a4bb9620f7","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx14/cdn19/contents/2021/08/15/04-36-45-512_3482d9e4858770c5.svg","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 68584859.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Resource, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Sun, 15 Aug 2021 04:36:45 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["CA20:5445:B2D21D:19C3DA4:611899DD"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1629003190"],"x-ratelimit-resource":["core"],"x-ratelimit-used":["61"],"x-xss-protection":["0"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx14/cdn19/contents/2021/08/15/04-36-45-512_3482d9e4858770c5.svg","historyStatusCode":[],"spendMs":31},"base64UserPassword":null,"token":"6b67d******************************91b08"},"githubUser":"myreaderx14","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"3.1 KB","destSize":"3.1 KB","compressRate":"100%"}],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://us-006.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]},"http://us-018.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-017.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-028.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-029.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"https://image.zhangxinxu.com/image/blog/202108/svg-shape-path-cover.png","sourceStatusCode":200,"destWidth":480,"destHeight":306,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn72@2020_1/2021/08/15/04-36-41-972_7a9c807accd29234.webp","sourceBytes":72889,"destBytes":33922,"targetWebpQuality":75,"feedId":3950,"totalSpendMs":2236,"convertSpendMs":13,"createdTime":"2021-08-15 12:36:39","host":"us-034*","referer":"https://www.zhangxinxu.com/wordpress/?p=10047","linkMd5ListStr":"36e1e8a57bb43b975e1d09a4bb9620f7,36e1e8a57bb43b975e1d09a4bb9620f7","githubUser":"myreaderx10","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"71.2 KB","destSize":"33.1 KB","compressRate":"46.5%"},{"code":1,"isDone":false,"source":"https://image.zhangxinxu.com/image/blog/202108/2021-08-07_211503.png","sourceStatusCode":200,"destWidth":471,"destHeight":308,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn13@2020_1/2021/08/15/04-36-44-319_df0b64159a29cbeb.webp","sourceBytes":8125,"destBytes":11858,"targetWebpQuality":75,"feedId":3950,"totalSpendMs":2164,"convertSpendMs":5,"createdTime":"2021-08-15 12:36:42","host":"us-018*","referer":"https://www.zhangxinxu.com/wordpress/?p=10047","linkMd5ListStr":"36e1e8a57bb43b975e1d09a4bb9620f7","githubUser":"myreaderx18","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"7.9 KB","destSize":"11.6 KB","compressRate":"145.9%"},{"code":1,"isDone":false,"source":"https://image.zhangxinxu.com/image/blog/202108/2021-08-07_201858.png","sourceStatusCode":200,"destWidth":459,"destHeight":396,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn6@2020_2/2021/08/15/04-36-44-538_77ac0b20560bca1e.webp","sourceBytes":11123,"destBytes":13728,"targetWebpQuality":75,"feedId":3950,"totalSpendMs":2392,"convertSpendMs":7,"createdTime":"2021-08-15 12:36:42","host":"us-029*","referer":"https://www.zhangxinxu.com/wordpress/?p=10047","linkMd5ListStr":"36e1e8a57bb43b975e1d09a4bb9620f7","githubUser":"myreaderx16","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"10.9 KB","destSize":"13.4 KB","compressRate":"123.4%"},{"code":1,"isDone":false,"source":"https://image.zhangxinxu.com/image/blog/202108/2021-08-07_212714.png","sourceStatusCode":200,"destWidth":728,"destHeight":656,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn7@2020_1/2021/08/15/04-36-44-679_49a224682de562ad.webp","sourceBytes":22729,"destBytes":43258,"targetWebpQuality":75,"feedId":3950,"totalSpendMs":2581,"convertSpendMs":15,"createdTime":"2021-08-15 12:36:42","host":"us-017*","referer":"https://www.zhangxinxu.com/wordpress/?p=10047","linkMd5ListStr":"36e1e8a57bb43b975e1d09a4bb9620f7","githubUser":"myreaderx29","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"22.2 KB","destSize":"42.2 KB","compressRate":"190.3%"},{"code":1,"isDone":false,"source":"https://image.zhangxinxu.com/image/blog/202108/mybooks.jpg","sourceStatusCode":200,"destWidth":1080,"destHeight":1440,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn3@2020_3/2021/08/15/04-36-46-424_1a7755c04fc9b113.webp","sourceBytes":82745,"destBytes":60970,"targetWebpQuality":75,"feedId":3950,"totalSpendMs":2380,"convertSpendMs":42,"createdTime":"2021-08-15 12:36:44","host":"us-028*","referer":"https://www.zhangxinxu.com/wordpress/?p=10047","linkMd5ListStr":"36e1e8a57bb43b975e1d09a4bb9620f7","githubUser":"myreaderx12","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"80.8 KB","destSize":"59.5 KB","compressRate":"73.7%"}],"successGithubMap":{"myreaderx16":1,"myreaderx10":1,"myreaderx12":1,"myreaderx18":1,"myreaderx29":1},"failGithubMap":{"myreaderx14":1}}
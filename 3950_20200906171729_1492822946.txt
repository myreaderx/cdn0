{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2020-09-07 01:16:22","updatedTime":"2020-09-07 01:16:22","title":"文字沿着不规则路径排版布局的实现","link":"https://www.zhangxinxu.com/wordpress/?p=9561","description":"<p>by <a href=\"https://www.zhangxinxu.com/\">zhangxinxu</a> from <a href=\"https://www.zhangxinxu.com/wordpress/?p=9561\">https://www.zhangxinxu.com/wordpress/?p=9561</a><br />\n本文欢迎分享与聚合，全文转载就不必了，尊重版权，圈子就这么大，若急用可以联系授权。</p>\n<p><img src=\"https://image.zhangxinxu.com/image/blog/202009/footsteps-cover.png\" width=\"480\" height=\"300\" alt=\"封面占位图\" class=\"alignright thumb clip size-medium\" /></p>\n<p><script>window.wxShareImgUrl = 'https://www.zhangxinxu.com/study/image/share/202009-svg-textpath.jpg';</script></p>\n<h3>一、需求描述</h3>\n<p>· 有一个抽奖转盘，奖品的描述文字希望沿着转盘显示。</p>\n<p>· 元素A到元素B中间有条连线，这条线是倾斜的，希望文字可以沿着这条斜线排列。</p>\n<p>· 七夕想要给女朋友准备一份礼物，需要一些图案组成一个爱心形状。</p>\n<p>等。</p>\n<p>以上这些场景都属于文字不规则排版。</p>\n<p>有没有什么办法实现呢？</p>\n<p>有！</p>\n<p>使用SVG的<code>&#60;textPath&#62;</code>元素可以轻松实现。</p>\n<h3>二、textPath让文字沿着路径排列</h3>\n<p>举个简单的例子，随着绘制一个曲线路径，然后整几个文字，SVG代码如下所示：</p>\n<pre>&#60;svg viewBox=\"0 30 300 130\" height=\"150\"&#62;\n  &#60;path id=\"zxxPath\" fill=\"none\" stroke=\"red\" d=\"M10,80 q100,120 120,20 q140,-50 160,0\" /&#62;\n  &#60;text&#62;\n    &#60;textPath href=\"#zxxPath\"&#62;\n        实际开发，path路径是应该在&#38;lt;defs&#38;gt;中不显示 \n    &#60;/textPath&#62;\n  &#60;/text&#62;\n&#60;/svg&#62;</pre>\n<p>然后实时渲染效果如下所示：</p>\n<p><svg viewBox=\"0 30 300 130\" height=\"150\"><path id=\"zxxPath\" fill=\"none\" stroke=\"red\" d=\"M10,80 q100,120 120,20 q140,-50 160,0\" /><text><textPath href=\"#zxxPath\">实际开发，path路径是应该在&#60;defs&#62;中不显示</textPath></text></svg></p>\n<p>如果是看不到上面的效果，则必然不是原站，您可以狠狠地点击这里浏览效果：<a href=\"https://www.zhangxinxu.com/study/202009/css-text-along-svg-path.php\" rel=\"noopener\" target=\"_blank\">文字沿着path自动排列demo</a></p>\n<p>可以看到文字沿着弯弯扭扭的曲线路径排列了。</p>\n<p>回到一开始的需求那里。</p>\n<ul>\n<li>如果希望文字沿着圆盘排列，只需要给定一个圆的path路径即可；</li>\n<li>想要文字沿着斜线排列，只需要给下这个斜线的路径值；</li>\n<li>想要字符排列出一个❤形，只需要给定心形的路径大小就可以了。</li>\n</ul>\n<p>就这么简单。</p>\n<h3>三、但是圆并不是路径</h3>\n<p><span class=\"hidden\">//zxx: 如果你看到这段文字，说明你现在访问是体验糟糕的垃圾盗版网站，你可以访问原文获得很好的体验：https://www.zhangxinxu.com/wordpress/?p=9561（作者张鑫旭）</span></p>\n<p><code>&#60;textPath&#62;</code>元素的<code>href</code>属性只能指向<code>&#60;path&#62;</code>元素，也就是下面的用法是无效的：</p>\n<pre>&#60;svg viewBox=\"0 30 300 130\" height=\"150\"&#62;\n  &#60;circle id=\"zxxCircle\" cx=\"150\" cy=\"75\" r=\"60\"&#62;&#60;/circle&#62;\n  &#60;text&#62;\n    &#60;textPath href=\"#zxxCircle\"&#62;本文作者张鑫旭，可加我微信zhangxinxu-job进行交流&#60;/textPath&#62;\n  &#60;/text&#62;\n&#60;/svg&#62;</pre>\n<p>这其实是个问题，因为使用<code>&#60;circle&#62;</code>元素手写一个圆，或者使用<code>&#60;rect&#62;</code>元素手写一个矩形对于大多数开发者而言，是没有任何压力的。</p>\n<p>但是你让开发者直接使用<code>&#60;path&#62;</code>元素手写一个圆，那就触及技能的盲区，已然无法驾驭。</p>\n<p>不用急，考虑到大家会有这样的困难。</p>\n<p>我专门写了个工具，可以把任意的SVG图形元素代码转换成<code>&#60;path&#62;</code>元素代码，这样，沿着圆进行排列那就完全无障碍啦。</p>\n<p>工具地址是：<a href=\"https://www.zhangxinxu.com/sp/path.html\" class=\"a_link\" rel=\"noopener\" target=\"_blank\">https://www.zhangxinxu.com/sp/path.html</a></p>\n<p>例如我复制一段<code>&#60;circle&#62;</code>元素代码到输入框，然后点击转换按钮，哗啦啦一声响，转换好了，得到了路径代码，如下所示：</p>\n<pre>&#60;path d=\"M90 75a60 60 0 1 0 120 0a60 60 0 1 0 -120 0z\"&#62;</pre>\n<p>截图效果示意如下：</p>\n<p><img src=\"https://image.zhangxinxu.com/image/blog/202009/2020-09-06_222933.png\" width=\"532\" height=\"362\" alt=\"路径转换工具截图效果示意\" class=\"alignnone size-medium\" /></p>\n<p>实地跑下效果如何，代码如下：</p>\n<pre>&#60;svg viewBox=\"0 0 300 150\" height=\"150\"&#62;\n  &#60;path id=\"zxxCircle\" stroke=\"deepskyblue\" fill=\"none\" d=\"M90 75a60 60 0 1 0 120 0a60 60 0 1 0 -120 0z\"/&#62;\n  &#60;text&#62;\n    &#60;textPath href=\"#zxxCircle\"&#62;https://www.zhangxinxu.com/wordpress/?p=9561&#60;/textPath&#62;\n  &#60;/text&#62;\n&#60;/svg&#62;</pre>\n<p>实时渲染效果如下所示：</p>\n<p><svg viewBox=\"0 0 300 150\" height=\"150\"><path id=\"zxxCircle\" stroke=\"deepskyblue\" fill=\"none\" d=\"M90 75a60 60 0 1 0 120 0a60 60 0 1 0 -120 0z\"/><text><textPath href=\"#zxxCircle\">https://www.zhangxinxu.com/wordpress/?p=9561</textPath></text></svg></p>\n<p>Nice，元龙看到了都点赞！</p>\n<h3>四、再延伸一点点</h3>\n<p><code>&#60;textPath&#62;</code>元素的路径排列效果不仅对常见的文字有效，对于任意的字符都是有效的，包括Emoji字符。</p>\n<p>例如下面这个使用五角星☆Emoji拼出一个爱心的排版效果。</p>\n<pre>&#60;svg viewBox=\"-10 -10 180 168\" width=\"160\" height=\"148\"&#62;\n  &#60;defs&#62;&#60;path id=\"zxxPath2\" d=\"M118,0c-17,0-31.5,13.5-38,28C73.5,13.5,59,0,42,0C19,0,0,19,0,42c0,47,47.5,59.5,80,106\n    c30.5-46.5,80-60.5,80-106C160,19,141,0,118,0z\"/&#62;&#60;/defs&#62;\n  &#60;text&#62;\n    &#60;textPath href=\"#zxxPath2\"&#62;⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐&#60;/textPath&#62;\n  &#60;/text&#62;\n&#60;/svg&#62;</pre>\n<p>实时渲染效果如下所示：</p>\n<p><svg viewBox=\"-10 -10 180 168\" width=\"160\" height=\"148\"><defs><path id=\"zxxPath2\" d=\"M118,0c-17,0-31.5,13.5-38,28C73.5,13.5,59,0,42,0C19,0,0,19,0,42c0,47,47.5,59.5,80,106\n\tc30.5-46.5,80-60.5,80-106C160,19,141,0,118,0z\"/></defs><text><textPath href=\"#zxxPath2\">⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐</textPath></text></svg></p>\n<p>怎么样，效果还不错吧，明年七夕诸位就可以送一段这样的代码，代表程序员的浪漫，然后你会发现你的女朋友……生气了一整天，哈哈，还是送玫瑰花靠谱。</p>\n<h3>五、如果是不规则的环绕布局</h3>\n<p>如果文字是沿着不规则的路径环绕布局，而不是排列布局，又该如何实现呢？</p>\n<p>可以使用CSS Shapes布局实现，具体可参见我之前这篇文章：<a href=\"https://www.zhangxinxu.com/wordpress/2019/02/css-css3-shapes/\">写给自己看的CSS shapes布局教程</a></p>\n<p>另外，CSS现在已经支持设置元素沿着任意路径运动了，无论是规则路径还是不规则路径，就是使用CSS offset属性，具体可以参见我之前的这篇文章：<a href=\"https://www.zhangxinxu.com/wordpress/2017/03/offset-path-css-animation/\">使用CSS offset-path让元素沿着不规则路径运动</a></p>\n<p>以上就是本文的全部内容。</p>\n<p>如果你觉得不错，欢迎点赞，额~没有点赞的地方，欢迎关注，额~没有关注的地方，欢迎分享，这个有的，欢迎分享到朋友圈，上面的爱心送给你。</p>\n<p><img src=\"https://image.zhangxinxu.com/image/blog/202009/2020-09-06_230935.png\" width=\"70\" height=\"66\" alt=\"结尾图片-元龙-宋嫣\" class=\"alignnone size-medium\" /></p>\n<p>本文为原创文章，欢迎分享，勿全文转载，如果实在喜欢，可收藏，永不过期，且会及时更新知识点及修正错误，阅读体验也更好。<br />\n本文地址：<a href=\"https://www.zhangxinxu.com/wordpress/?p=9561\">https://www.zhangxinxu.com/wordpress/?p=9561</a></p>\n<p>（本篇完）</p>\n","descriptionType":"html","publishedDate":"Sun, 06 Sep 2020 15:24:07 +0000","feedId":3950,"bgimg":"https://image.zhangxinxu.com/image/blog/202009/footsteps-cover.png","linkMd5":"f87063d7f3087f1c6e803095524b323e","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn31@2020_6/2020/09/06/17-17-24-862_3c19dcc04ee9e2cc.webp","destWidth":480,"destHeight":300,"sourceBytes":12929,"destBytes":4904,"author":"张 鑫旭","articleImgCdnMap":{"https://image.zhangxinxu.com/image/blog/202009/footsteps-cover.png":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn31@2020_6/2020/09/06/17-17-24-862_3c19dcc04ee9e2cc.webp","https://image.zhangxinxu.com/image/blog/202009/2020-09-06_222933.png":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn73@2020_5/2020/09/06/17-17-28-155_4e953069162846c0.webp","https://image.zhangxinxu.com/image/blog/202009/2020-09-06_230935.png":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn76@2020_2/2020/09/06/17-17-27-140_3332cba7530865fa.webp"},"publishedOrCreatedDate":1599412582166}],"record":{"createdTime":"2020-09-07 01:16:22","updatedTime":"2020-09-07 01:16:22","feedId":3950,"fetchDate":"Sun, 06 Sep 2020 17:16:22 +0000","fetchMs":6484,"handleMs":12,"totalMs":73867,"newArticles":0,"totalArticles":10,"status":1,"type":0,"ip":"0a87772537dbb011ef60166702d51dd6","hostName":"us-006*","requestId":"70afe6ed8c48423d82752574825f8e96_3950","contentType":"application/rss+xml; charset=UTF-8","totalBytes":23232,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":3,"articlesImgsGithubTotal":3,"successGithubMap":{"myreaderx12":1,"myreaderx1":1,"myreaderx31":1},"failGithubMap":{}},"feed":{"createdTime":"2020-08-25 04:29:34","updatedTime":"2020-09-01 10:39:31","id":3950,"name":"张鑫旭-鑫空间-鑫生活","url":"http://www.zhangxinxu.com/wordpress/?feed=rss2","subscriber":null,"website":null,"icon":"https://www.zhangxinxu.com/favicon.ico","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx61/cdn11@2020_3/2020/09/01/02-39-31-993_9a339309f46b07b8.ico","description":"提高前端技术，先从使用谷歌搜索做起","weekly":null,"link":null},"noPictureArticleList":[],"tmpCommonImgCdnBytes":4904,"tmpBodyImgCdnBytes":18328,"tmpBgImgCdnBytes":0,"extra4":{"start":1599412575143,"total":0,"statList":[{"spend":7012,"msg":"获取xml内容"},{"spend":12,"msg":"解释文章"},{"spend":1,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":3265,"msg":"正文链接上传到cdn"}]},"extra5":3,"extra6":3,"extra7ImgCdnFailResultVector":[null],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://europe-56.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-55.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"https://image.zhangxinxu.com/image/blog/202009/footsteps-cover.png","sourceStatusCode":200,"destWidth":480,"destHeight":300,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn31@2020_6/2020/09/06/17-17-24-862_3c19dcc04ee9e2cc.webp","sourceBytes":12929,"destBytes":4904,"targetWebpQuality":75,"feedId":3950,"totalSpendMs":2046,"convertSpendMs":11,"createdTime":"2020-09-07 01:17:23","host":"us-040*","referer":"https://www.zhangxinxu.com/wordpress/?p=9561","linkMd5ListStr":"f87063d7f3087f1c6e803095524b323e,f87063d7f3087f1c6e803095524b323e","githubUser":"myreaderx31","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"12.6 KB","destSize":"4.8 KB","compressRate":"37.9%"},{"code":1,"isDone":false,"source":"https://image.zhangxinxu.com/image/blog/202009/2020-09-06_230935.png","sourceStatusCode":200,"destWidth":70,"destHeight":66,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn76@2020_2/2020/09/06/17-17-27-140_3332cba7530865fa.webp","sourceBytes":4760,"destBytes":1498,"targetWebpQuality":75,"feedId":3950,"totalSpendMs":2144,"convertSpendMs":4,"createdTime":"2020-09-07 01:17:25","host":"europe-56*","referer":"https://www.zhangxinxu.com/wordpress/?p=9561","linkMd5ListStr":"f87063d7f3087f1c6e803095524b323e","githubUser":"myreaderx1","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"4.6 KB","destSize":"1.5 KB","compressRate":"31.5%"},{"code":1,"isDone":false,"source":"https://image.zhangxinxu.com/image/blog/202009/2020-09-06_222933.png","sourceStatusCode":200,"destWidth":532,"destHeight":362,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn73@2020_5/2020/09/06/17-17-28-155_4e953069162846c0.webp","sourceBytes":7498,"destBytes":16830,"targetWebpQuality":75,"feedId":3950,"totalSpendMs":3219,"convertSpendMs":9,"createdTime":"2020-09-07 01:17:25","host":"us-55*","referer":"https://www.zhangxinxu.com/wordpress/?p=9561","linkMd5ListStr":"f87063d7f3087f1c6e803095524b323e","githubUser":"myreaderx12","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"7.3 KB","destSize":"16.4 KB","compressRate":"224.5%"}],"successGithubMap":{"myreaderx12":1,"myreaderx1":1,"myreaderx31":1},"failGithubMap":{}}
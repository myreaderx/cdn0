{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2021-04-03 14:24:19","updatedTime":"2021-04-03 14:24:19","title":"记一次找因 Redis 使用不当导致的应用卡死 Bug 过程","link":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%89%BE%E5%9B%A0%20Redis%20%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%BD%93%E5%AF%BC%E8%87%B4%E7%9A%84%E5%BA%94%E7%94%A8%E5%8D%A1%E6%AD%BB%20Bug%20%E8%BF%87%E7%A8%8B","description":"<div><div><div id=\"media\" class=\"rich_media_thumb_wrp\">\n\n            <img class=\"rich_media_thumb\" src=\"http://content.sov5.cn/mmbiz_jpg/eZzl4LXykQyDXNd3nLuHpwgzyogCwOIS8JGibdiaJ1L5HBX3jJBrcxbJM8dDfNia9HZur1BsVich8GtCWu6rXEcgrA?imageView2/1/w/600\">\n        </div>\n    \n\n    \n\n    <div class=\"rich_media_content\" id=\"js_content\">\n                    \n\n                    \n                    \n                    \n                    <p style=\"text-align: center;\" data-mpa-powered-by=\"yiban.io\"><span style=\"font-size: 14px;letter-spacing: 0.5440000295639038px;text-align: center;max-width: 100%;color: rgb(255, 41, 65);line-height: 22.4px;\">（给</span><span style=\"font-size: 14px;letter-spacing: 0.5440000295639038px;text-align: center;max-width: 100%;line-height: 22.4px;color: rgb(0, 128, 255);\">ImportNew</span><span style=\"font-size: 14px;letter-spacing: 0.5440000295639038px;text-align: center;max-width: 100%;color: rgb(255, 41, 65);line-height: 22.4px;\">加星标，提高Java技能）</span></p><blockquote><p><span style=\"font-size: 14px;\">转自：小木-_-，</span></p><p><span style=\"font-size: 14px;\">my.oschina.net/xiaomu0082/blog/2990388</span></p></blockquote><p style=\"text-align: left;\"><span style=\"font-size: 15px;\"></span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">首先说下问题现象：内网 sandbox 环境 API 持续 1 周出现应用卡死，所有 API 无响应现象。</span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"><br></span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">刚开始当测试抱怨环境响应慢的时候 ，我们重启一下应用应用恢复正常，于是没做处理。但是后来问题出现频率越来越频繁，越来越多的同事开始抱怨，于是感觉代码可能有问题开始排查。</span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"><br></span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">首先发现，开发的本地 IDE 没有发现问题。应用卡死时候数据库，Redis 都正常，并且无特殊错误日志。开始怀疑是sandbox环境机器问题（测试环境本身就很脆弱）。</span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"><br></span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">于是 ssh 登陆服务器 ，执行以下命令：</span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"><br></span></p><p style=\"margin-bottom: 20px;box-sizing: inherit;white-space: normal;line-height: inherit;font-family: -apple-system, BlinkMacSystemFont, \" apple color emoji ui symbol sc sans gb yahei neue helvetica arial sans-serif left rgb><img data-ratio=\"0.7329974811083123\" data-type=\"png\" data-w=\"794\" height=\"582\" width=\"794\" style=\"margin-right: auto; margin-left: auto; box-sizing: border-box; border-width: 0px; border-style: initial; border-color: initial; vertical-align: middle; cursor: zoom-in; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7XQjOsOibWOHNe5nAicWjL6QUJ7BP5SbDzybMe7wyGh6KcPpVSKxg9kRdQ/640?wx_fmt=png\"></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">这时发现 机器还算正常，但是内心还是😖，于是打算看下 JVM 堆栈信息。</span><span style=\"font-size: 15px;\">先看下问题应用比较耗资源的线程：</span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"><br></span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">执行 <strong>top -H -p 12798</strong></span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"><br></span></p><p style=\"text-align: left;\"><img data-ratio=\"0.6383526383526383\" data-type=\"png\" data-w=\"777\" height=\"496\" width=\"777\" style=\"margin-right: auto; margin-left: auto; box-sizing: border-box; border-width: 0px; border-style: initial; border-color: initial; vertical-align: middle; cursor: zoom-in; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7XWs2akd7xtxEhGYP6hbEeILqtL13h8wLnA7L73WCVaLwq3Y08CTur4Q/640?wx_fmt=png\"></p><p style=\"text-align: left;\"><br></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">找到前 3 个相对比较耗资源的线程：</span></p><p style=\"text-align: left;\"><br></p><ul class=\"list-paddingleft-2\" style=\"list-style-type: disc;\"><li><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">jstack 查看堆内存；</span></p></li><li><p style=\"text-align: left;\"><strong><span style=\"font-size: 15px;text-align: left;\">jstack 12798 |grep 12799</span></strong><span style=\"font-size: 15px;text-align: left;\"> 的16进制 <strong>31ff</strong>。</span></p></li></ul><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"><br></span></p><p style=\"text-align: left;\"><img data-ratio=\"0.10747663551401869\" data-type=\"png\" data-w=\"642\" height=\"69\" width=\"642\" style=\"margin-right: auto; margin-left: auto; box-sizing: border-box; border-width: 0px; border-style: initial; border-color: initial; vertical-align: middle; cursor: zoom-in; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7XNo32XYep6a8K8Vo1dCJOVcOwIVLgXmLInBjkxW4E5quPhvA9QQ1Ekw/640?wx_fmt=png\"></p><p style=\"text-align: left;\"><br></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">没看出什么问题，上下 10 行也看看。于是执行：</span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"><br></span></p><p style=\"text-align: left;\"><img data-ratio=\"0.602589641434263\" data-type=\"png\" data-w=\"1004\" height=\"605\" width=\"1004\" style=\"margin-right: auto; margin-left: auto; box-sizing: border-box; border-width: 0px; border-style: initial; border-color: initial; vertical-align: middle; cursor: zoom-in; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7XXYsl3Dx3d6U3RO1rTrmhoIwib5XDBnoVpek2wBOuQ1LImI6o8QNKXicg/640?wx_fmt=png\"></p><p style=\"text-align: left;\"><br></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">看到一些线程都是处于 lock 状态。但没有出现业务相关的代码，忽略了。这时候没有什么头绪。思考一番。决定放弃这次卡死状态的机器。</span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"><br></span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">为了保护事故现场 先 dump了问题进程所有堆内存，然后debug模式重启测试环境应用，打算问题再显时直接远程debug问题机器。</span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"><br></span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">第二天问题再现，于是通知运维nginx转发拿掉这台问题应用，自己远程debug Tomcat。</span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"><br></span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">自己随意找了一个接口，断点在接口入口地方。悲剧开始，什么也没有发生！API 等待服务响应，没进断点。这时候有点懵逼，冷静了一会,在入口之前的 AOP 地方下了个断点，再 debug 一次，这次进了断点。F8 N 次后发现在执行 redis 命令的时候卡住了。</span></p><p style=\"text-align: left;\"><br></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">继续跟踪，最后在到 jedis 的一个地方发现问题：</span></p><p style=\"text-align: left;\"><br></p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li></ul><pre class=\"code-snippet__js\" data-lang=\"php\"><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__comment\">/**</span></span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__comment\"> * Returns a Jedis instance to be used as a Redis connection. The instance can be newly created or retrieved from a</span></span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__comment\"> * pool.</span></span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__comment\"> * </span></span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__comment\"> * <span class=\"code-snippet__doctag\">@return</span> Jedis instance ready for wrapping into a {<span class=\"code-snippet__doctag\">@link</span> RedisConnection}.</span></span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__comment\"> */</span></span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__keyword\">protected</span> Jedis fetchJedisConnector() {</span></code><code><span class=\"code-snippet_outer\">   <span class=\"code-snippet__keyword\">try</span> {</span></code><code><span class=\"code-snippet_outer\">      <span class=\"code-snippet__keyword\">if</span> (usePool &amp;&amp; pool != <span class=\"code-snippet__keyword\">null</span>) {</span></code><code><span class=\"code-snippet_outer\">         <span class=\"code-snippet__keyword\">return</span> pool.getResource();</span></code><code><span class=\"code-snippet_outer\">      }</span></code><code><span class=\"code-snippet_outer\">      Jedis jedis = <span class=\"code-snippet__keyword\">new</span> Jedis(getShardInfo());</span></code><code><span class=\"code-snippet_outer\">      <span class=\"code-snippet__comment\">// force initialization (see Jedis issue #82)</span></span></code><code><span class=\"code-snippet_outer\">      jedis.connect();</span></code><code><span class=\"code-snippet_outer\">      <span class=\"code-snippet__keyword\">return</span> jedis;</span></code><code><span class=\"code-snippet_outer\">   } <span class=\"code-snippet__keyword\">catch</span> (<span class=\"code-snippet__keyword\">Exception</span> ex) {</span></code><code><span class=\"code-snippet_outer\">      <span class=\"code-snippet__keyword\">throw</span> <span class=\"code-snippet__keyword\">new</span> RedisConnectionFailureException(<span class=\"code-snippet__string\">\"Cannot get Jedis connection\"</span>, ex);</span></code><code><span class=\"code-snippet_outer\">   }</span></code><code><span class=\"code-snippet_outer\">}</span></code></pre></section><p style=\"text-align: left;\"><br></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">上面 pool.getResource() 后线程开始 wait。</span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"><br></span></p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li><li><li><li><li><li><li></ul><pre class=\"code-snippet__js\" data-lang=\"cs\"><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__function\"><span class=\"code-snippet__keyword\">public</span> T <span class=\"code-snippet__title\">getResource</span>(<span class=\"code-snippet__params\"></span>)</span> {</span></code><code><span class=\"code-snippet_outer\">  <span class=\"code-snippet__keyword\">try</span> {</span></code><code><span class=\"code-snippet_outer\">    <span class=\"code-snippet__keyword\">return</span> internalPool.borrowObject();</span></code><code><span class=\"code-snippet_outer\">  } <span class=\"code-snippet__keyword\">catch</span> (Exception e) {</span></code><code><span class=\"code-snippet_outer\">    <span class=\"code-snippet__keyword\">throw</span> <span class=\"code-snippet__keyword\">new</span> JedisConnectionException(<span class=\"code-snippet__string\">\"Could not get a resource from the pool\"</span>, e);</span></code><code><span class=\"code-snippet_outer\">  }</span></code><code><span class=\"code-snippet_outer\">}</span></code></pre></section><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"></span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;\">return internalPool.borrowObject(); </span><span style=\"font-size: 15px;\">这个代码应该</span><span style=\"font-size: 15px;\">是一个租赁的代</span><span style=\"font-size: 15px;\">码。</span><span style=\"font-size: 15px;\">接着跟踪：</span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"><br></span></p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li></ul><pre class=\"code-snippet__js\" data-lang=\"kotlin\"><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__keyword\">public</span> T borrowObject(long borrowMaxWaitMillis) throws Exception {</span></code><code><span class=\"code-snippet_outer\">    <span class=\"code-snippet__keyword\">this</span>.assertOpen();</span></code><code><span class=\"code-snippet_outer\">    AbandonedConfig ac = <span class=\"code-snippet__keyword\">this</span>.abandonedConfig;</span></code><code><span class=\"code-snippet_outer\">    <span class=\"code-snippet__keyword\">if</span> (ac != <span class=\"code-snippet__literal\">null</span> &amp;&amp; ac.getRemoveAbandonedOnBorrow() &amp;&amp; <span class=\"code-snippet__keyword\">this</span>.getNumIdle() &lt; <span class=\"code-snippet__number\">2</span> &amp;&amp; <span class=\"code-snippet__keyword\">this</span>.getNumActive() &gt; <span class=\"code-snippet__keyword\">this</span>.getMaxTotal() - <span class=\"code-snippet__number\">3</span>) {</span></code><code><span class=\"code-snippet_outer\">        <span class=\"code-snippet__keyword\">this</span>.removeAbandoned(ac);</span></code><code><span class=\"code-snippet_outer\">    }</span></code><code><span class=\"code-snippet_outer\"><br></span></code><code><span class=\"code-snippet_outer\">    PooledObject<t> p = <span class=\"code-snippet__literal\">null</span>;</t></span></code><code><span class=\"code-snippet_outer\">    boolean blockWhenExhausted = <span class=\"code-snippet__keyword\">this</span>.getBlockWhenExhausted();</span></code><code><span class=\"code-snippet_outer\">    long waitTime = <span class=\"code-snippet__number\">0L</span>;</span></code><code><span class=\"code-snippet_outer\"><br></span></code><code><span class=\"code-snippet_outer\">    <span class=\"code-snippet__keyword\">while</span>(p == <span class=\"code-snippet__literal\">null</span>) {</span></code><code><span class=\"code-snippet_outer\">        boolean create = <span class=\"code-snippet__literal\">false</span>;</span></code><code><span class=\"code-snippet_outer\">        <span class=\"code-snippet__keyword\">if</span> (blockWhenExhausted) {</span></code><code><span class=\"code-snippet_outer\">            p = (PooledObject)<span class=\"code-snippet__keyword\">this</span>.idleObjects.pollFirst();</span></code><code><span class=\"code-snippet_outer\">            <span class=\"code-snippet__keyword\">if</span> (p == <span class=\"code-snippet__literal\">null</span>) {</span></code><code><span class=\"code-snippet_outer\">                create = <span class=\"code-snippet__literal\">true</span>;</span></code><code><span class=\"code-snippet_outer\">                p = <span class=\"code-snippet__keyword\">this</span>.create();</span></code><code><span class=\"code-snippet_outer\">            }</span></code><code><span class=\"code-snippet_outer\"><br></span></code><code><span class=\"code-snippet_outer\">            <span class=\"code-snippet__keyword\">if</span> (p == <span class=\"code-snippet__literal\">null</span>) {</span></code><code><span class=\"code-snippet_outer\">                <span class=\"code-snippet__keyword\">if</span> (borrowMaxWaitMillis &lt; <span class=\"code-snippet__number\">0L</span>) {</span></code><code><span class=\"code-snippet_outer\">                    p = (PooledObject)<span class=\"code-snippet__keyword\">this</span>.idleObjects.takeFirst();</span></code><code><span class=\"code-snippet_outer\">                } <span class=\"code-snippet__keyword\">else</span> {</span></code><code><span class=\"code-snippet_outer\">                    waitTime = System.currentTimeMillis();</span></code><code><span class=\"code-snippet_outer\">                    p = (PooledObject)<span class=\"code-snippet__keyword\">this</span>.idleObjects.pollFirst(borrowMaxWaitMillis, TimeUnit.MILLISECONDS);</span></code><code><span class=\"code-snippet_outer\">                    waitTime = System.currentTimeMillis() - waitTime;</span></code><code><span class=\"code-snippet_outer\">                }</span></code><code><span class=\"code-snippet_outer\">            }</span></code><code><span class=\"code-snippet_outer\"><br></span></code><code><span class=\"code-snippet_outer\">            <span class=\"code-snippet__keyword\">if</span> (p == <span class=\"code-snippet__literal\">null</span>) {</span></code><code><span class=\"code-snippet_outer\">                <span class=\"code-snippet__keyword\">throw</span> new NoSuchElementException(<span class=\"code-snippet__string\">\"Timeout waiting for idle object\"</span>);</span></code><code><span class=\"code-snippet_outer\">            }</span></code></pre></section><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"></span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">其中有段代码：</span></p><p style=\"text-align: left;\"><br></p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li><li><li><li><li><li><li><li><li></ul><pre class=\"code-snippet__js\" data-lang=\"nginx\"><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__attribute\">if</span> (p == null) {</span></code><code><span class=\"code-snippet_outer\">    <span class=\"code-snippet__attribute\">if</span> (borrowMaxWaitMillis &lt; 0L) {</span></code><code><span class=\"code-snippet_outer\">        <span class=\"code-snippet__attribute\">p</span> = (PooledObject)this.idleObjects.takeFirst();</span></code><code><span class=\"code-snippet_outer\">    } <span class=\"code-snippet__section\">else</span> {</span></code><code><span class=\"code-snippet_outer\">        <span class=\"code-snippet__attribute\">waitTime</span> = System.currentTimeMillis();</span></code><code><span class=\"code-snippet_outer\">        <span class=\"code-snippet__attribute\">p</span> = (PooledObject)this.idleObjects.<span class=\"code-snippet__literal\">poll</span>First(borrowMaxWaitMillis, TimeUnit.MILLISECONDS);</span></code><code><span class=\"code-snippet_outer\">        <span class=\"code-snippet__attribute\">waitTime</span> = System.currentTimeMillis() - waitTime;</span></code><code><span class=\"code-snippet_outer\">    }</span></code><code><span class=\"code-snippet_outer\">}</span></code></pre></section><p style=\"text-align: left;\"><br></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">borrowMaxWaitMillis&lt;0 会一直执行，然后一直循环了。开始怀疑这个值没有配置</span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">找到 Redis pool 配置，发现确实没有配置 MaxWaitMillis，配置后 else 代码也是一个 Exception 并不能解决问题。</span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"><br></span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">继续 F8。</span></p><p style=\"text-align: left;\"><br></p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li></ul><pre class=\"code-snippet__js\" data-lang=\"cs\"><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__function\"><span class=\"code-snippet__keyword\">public</span> E <span class=\"code-snippet__title\">takeFirst</span>(<span class=\"code-snippet__params\"></span>) throws InterruptedException</span> {</span></code><code><span class=\"code-snippet_outer\">    <span class=\"code-snippet__keyword\">this</span>.<span class=\"code-snippet__keyword\">lock</span>.<span class=\"code-snippet__keyword\">lock</span>();</span></code><code><span class=\"code-snippet_outer\">    Object var2;</span></code><code><span class=\"code-snippet_outer\">    <span class=\"code-snippet__keyword\">try</span> {</span></code><code><span class=\"code-snippet_outer\">        Object x;</span></code><code><span class=\"code-snippet_outer\">        <span class=\"code-snippet__keyword\">while</span>((x = <span class=\"code-snippet__keyword\">this</span>.unlinkFirst()) == <span class=\"code-snippet__literal\">null</span>) {</span></code><code><span class=\"code-snippet_outer\">            <span class=\"code-snippet__keyword\">this</span>.notEmpty.<span class=\"code-snippet__keyword\">await</span>();</span></code><code><span class=\"code-snippet_outer\">        }</span></code><code><span class=\"code-snippet_outer\">        var2 = x;</span></code><code><span class=\"code-snippet_outer\">    } <span class=\"code-snippet__keyword\">finally</span> {</span></code><code><span class=\"code-snippet_outer\">        <span class=\"code-snippet__keyword\">this</span>.<span class=\"code-snippet__keyword\">lock</span>.unlock();</span></code><code><span class=\"code-snippet_outer\">    }</span></code><code><span class=\"code-snippet_outer\"><br></span></code><code><span class=\"code-snippet_outer\">    <span class=\"code-snippet__keyword\">return</span> var2;</span></code><code><span class=\"code-snippet_outer\">}</span></code></pre></section><p style=\"text-align: left;\"><br></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">到这边发现 lock 字眼，开始怀疑所有请求 API 都被阻塞了。</span><br></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"> </span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">于是再次 ssh 服务器安装 arthas（Arthas 是 Alibaba 开源的 Java 诊断工具）</span><span style=\"font-size: 15px;\">执行 thread 命令：</span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"><br></span></p><p style=\"text-align: left;\"><img data-ratio=\"0.3246753246753247\" data-type=\"png\" data-w=\"1155\" height=\"375\" width=\"1155\" style=\"margin-right: auto; margin-left: auto; box-sizing: border-box; border-width: 0px; border-style: initial; border-color: initial; vertical-align: middle; cursor: zoom-in; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7XCzbs4BurmNpbcfJGmwaKGL99KYrxVDICM9ywupAWQHFhicaRJib7IicUA/640?wx_fmt=png\"></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"> </span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">发现大量 http-nio 的线程 waiting 状态，http-nio-8083-exec- 这个线程其实就是出来 HTTP 请求的 Tomcat 线程。</span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"><br></span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">随意找一个线程查看堆内存 <span style=\"font-size: 15px;text-align: left;\">thread -428：</span></span></p><p style=\"text-align: left;\"><br></p><p style=\"text-align: center;\"><img data-ratio=\"0.6439966414777498\" data-type=\"png\" data-w=\"1191\" height=\"767\" width=\"1191\" style=\"margin-right: auto; margin-left: auto; box-sizing: border-box; border-width: 0px; border-style: initial; border-color: initial; vertical-align: middle; cursor: zoom-in; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7XvFSJ0d2pkoOgias6JYaic4dojVCNmRnQqrQS8RLzGW8AuPzwJ24uwmEg/640?wx_fmt=png\"></p><p style=\"text-align: center;\"><br></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">这是能确认就是 API 一直转圈的问题,就是这个 Redis 获取连接的代码导致的。</span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"><br></span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">解读这段内存代码  所有线程都在等 <strong>@53e5504e</strong> 这个对象释放锁。于是 jstack 全局搜了 53e5504e ，没有找到这个对象所在线程。</span></p><p style=\"text-align: left;\"><br></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">自此，问题原因能确定是 Redis 连接获取的问题。但是什么原因造成获取不到连接的还不能确定。</span></p><p style=\"text-align: left;\"><br></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">再次执行 arthas 的 thread -b（thread -b 找出当前阻塞其他线程的线程）。</span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"><br></span></p><p style=\"margin-bottom: 20px;box-sizing: inherit;white-space: normal;line-height: inherit;font-family: -apple-system, BlinkMacSystemFont, \" apple color emoji ui symbol sc sans gb yahei neue helvetica arial sans-serif left rgb><img data-ratio=\"0.039937353171495694\" data-type=\"png\" data-w=\"1277\" height=\"51\" width=\"1277\" style=\"margin-right: auto; margin-left: auto; box-sizing: border-box; border-width: 0px; border-style: initial; border-color: initial; vertical-align: middle; cursor: zoom-in; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7XiaB7scqYwNQq70XhFh1sWsLnnJv0BN4XnIDH9Y4DMcpc9eVn1uQcR2g/640?wx_fmt=png\"></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">没有结果。这边和想的不一样，应该是能找到一个阻塞线程的，于是看了下这个命令的文档，发现有下面这句话：</span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"><br></span></p><p style=\"margin-bottom: 20px;box-sizing: inherit;white-space: normal;line-height: inherit;font-family: -apple-system, BlinkMacSystemFont, \" apple color emoji ui symbol sc sans gb yahei neue helvetica arial sans-serif left rgb><img data-croporisrc=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7XphPymIiaj7azwR8ajkWEI7niclr4WjU84OzARTUnDchPMo1bXB6EjOcw/640?wx_fmt=png\" data-cropx1=\"0\" data-cropx2=\"1055.7093425605535\" data-cropy1=\"0\" data-cropy2=\"108.37370242214531\" data-ratio=\"0.1023696682464455\" data-type=\"jpeg\" data-w=\"1055\" style=\"margin-right: auto; margin-left: auto; box-sizing: border-box; border-width: 0px; border-style: initial; border-color: initial; vertical-align: middle; cursor: zoom-in; width: 565px; height: 58px; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7Xt5nRBO8cO4ictHzG0UPLKJQ95V1uqcvibeNia4uMe0NlVOonjPia5XY3ibg/640?wx_fmt=jpeg\"></p><p style=\"text-align: left;\"><br></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">好吧，我们刚好是后者... </span><span style=\"font-size: 15px;\">再次整理思路。</span></p><p style=\"text-align: left;\"><br></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">这次修改 Redis pool 配置，将获取连接超时时间设置为 2s，然后等问题再次复现时观察应用最后正常时干过什么。</span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"><br></span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">添加以下配置：</span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"><br></span></p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li><li><li><li><li><li></ul><pre class=\"code-snippet__js\" data-lang=\"javascript\"><code><span class=\"code-snippet_outer\">JedisConnectionFactory jedisConnectionFactory = <span class=\"code-snippet__keyword\">new</span> JedisConnectionFactory();</span></code><code><span class=\"code-snippet_outer\">.......</span></code><code><span class=\"code-snippet_outer\">JedisPoolConfig config = <span class=\"code-snippet__keyword\">new</span> JedisPoolConfig();</span></code><code><span class=\"code-snippet_outer\">config.setMaxWaitMillis(<span class=\"code-snippet__number\">2000</span>);</span></code><code><span class=\"code-snippet_outer\">.......</span></code><code><span class=\"code-snippet_outer\">jedisConnectionFactory.afterPropertiesSet();</span></code></pre></section><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"></span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">重启服务，等待... 又过一天，再次复现。</span></p><p style=\"text-align: left;\"><br></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">ssh 登陆服务器，检查 Tomcat accesslog，发现大量API 请求出现 500。</span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"><br></span></p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li><li><li><li><li><li><li><li><li><li><li><li></ul><pre class=\"code-snippet__js\" data-lang=\"css\"><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__selector-tag\">org</span><span class=\"code-snippet__selector-class\">.springframework</span><span class=\"code-snippet__selector-class\">.data</span><span class=\"code-snippet__selector-class\">.redis</span><span class=\"code-snippet__selector-class\">.RedisConnectionFailureException</span>: <span class=\"code-snippet__selector-tag\">Cannot</span> <span class=\"code-snippet__selector-tag\">get</span> <span class=\"code-snippet__selector-tag\">Jedis</span> <span class=\"code-snippet__selector-tag\">connection</span>; <span class=\"code-snippet__selector-tag\">nested</span> <span class=\"code-snippet__selector-tag\">exception</span> <span class=\"code-snippet__selector-tag\">is</span> <span class=\"code-snippet__selector-tag\">redis</span><span class=\"code-snippet__selector-class\">.clients</span><span class=\"code-snippet__selector-class\">.jedis</span><span class=\"code-snippet__selector-class\">.exceptions</span><span class=\"code-snippet__selector-class\">.JedisConnectionException</span>: <span class=\"code-snippet__selector-tag\">Could</span> <span class=\"code-snippet__selector-tag\">not</span> <span class=\"code-snippet__selector-tag\">get</span> <span class=\"code-snippet__selector-tag\">a</span> <span class=\"code-snippet__selector-tag\">resource</span> <span class=\"code-snippet__selector-tag\">fr</span></span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__selector-tag\">om</span> <span class=\"code-snippet__selector-tag\">the</span> <span class=\"code-snippet__selector-tag\">pool</span></span></code><code><span class=\"code-snippet_outer\">    <span class=\"code-snippet__selector-tag\">at</span> <span class=\"code-snippet__selector-tag\">org</span><span class=\"code-snippet__selector-class\">.springframework</span><span class=\"code-snippet__selector-class\">.data</span><span class=\"code-snippet__selector-class\">.redis</span><span class=\"code-snippet__selector-class\">.connection</span><span class=\"code-snippet__selector-class\">.jedis</span><span class=\"code-snippet__selector-class\">.JedisConnectionFactory</span><span class=\"code-snippet__selector-class\">.fetchJedisConnector</span>(<span class=\"code-snippet__selector-tag\">JedisConnectionFactory</span><span class=\"code-snippet__selector-class\">.java</span><span class=\"code-snippet__selector-pseudo\">:140)</span></span></code><code><span class=\"code-snippet_outer\">    <span class=\"code-snippet__selector-tag\">at</span> <span class=\"code-snippet__selector-tag\">org</span><span class=\"code-snippet__selector-class\">.springframework</span><span class=\"code-snippet__selector-class\">.data</span><span class=\"code-snippet__selector-class\">.redis</span><span class=\"code-snippet__selector-class\">.connection</span><span class=\"code-snippet__selector-class\">.jedis</span><span class=\"code-snippet__selector-class\">.JedisConnectionFactory</span><span class=\"code-snippet__selector-class\">.getConnection</span>(<span class=\"code-snippet__selector-tag\">JedisConnectionFactory</span><span class=\"code-snippet__selector-class\">.java</span><span class=\"code-snippet__selector-pseudo\">:229)</span></span></code><code><span class=\"code-snippet_outer\">    <span class=\"code-snippet__selector-tag\">at</span> <span class=\"code-snippet__selector-tag\">org</span><span class=\"code-snippet__selector-class\">.springframework</span><span class=\"code-snippet__selector-class\">.data</span><span class=\"code-snippet__selector-class\">.redis</span><span class=\"code-snippet__selector-class\">.connection</span><span class=\"code-snippet__selector-class\">.jedis</span><span class=\"code-snippet__selector-class\">.JedisConnectionFactory</span><span class=\"code-snippet__selector-class\">.getConnection</span>(<span class=\"code-snippet__selector-tag\">JedisConnectionFactory</span><span class=\"code-snippet__selector-class\">.java</span><span class=\"code-snippet__selector-pseudo\">:57)</span></span></code><code><span class=\"code-snippet_outer\">    <span class=\"code-snippet__selector-tag\">at</span> <span class=\"code-snippet__selector-tag\">org</span><span class=\"code-snippet__selector-class\">.springframework</span><span class=\"code-snippet__selector-class\">.data</span><span class=\"code-snippet__selector-class\">.redis</span><span class=\"code-snippet__selector-class\">.core</span><span class=\"code-snippet__selector-class\">.RedisConnectionUtils</span><span class=\"code-snippet__selector-class\">.doGetConnection</span>(<span class=\"code-snippet__selector-tag\">RedisConnectionUtils</span><span class=\"code-snippet__selector-class\">.java</span><span class=\"code-snippet__selector-pseudo\">:128)</span></span></code><code><span class=\"code-snippet_outer\">    <span class=\"code-snippet__selector-tag\">at</span> <span class=\"code-snippet__selector-tag\">org</span><span class=\"code-snippet__selector-class\">.springframework</span><span class=\"code-snippet__selector-class\">.data</span><span class=\"code-snippet__selector-class\">.redis</span><span class=\"code-snippet__selector-class\">.core</span><span class=\"code-snippet__selector-class\">.RedisConnectionUtils</span><span class=\"code-snippet__selector-class\">.getConnection</span>(<span class=\"code-snippet__selector-tag\">RedisConnectionUtils</span><span class=\"code-snippet__selector-class\">.java</span><span class=\"code-snippet__selector-pseudo\">:91)</span></span></code><code><span class=\"code-snippet_outer\">    <span class=\"code-snippet__selector-tag\">at</span> <span class=\"code-snippet__selector-tag\">org</span><span class=\"code-snippet__selector-class\">.springframework</span><span class=\"code-snippet__selector-class\">.data</span><span class=\"code-snippet__selector-class\">.redis</span><span class=\"code-snippet__selector-class\">.core</span><span class=\"code-snippet__selector-class\">.RedisConnectionUtils</span><span class=\"code-snippet__selector-class\">.getConnection</span>(<span class=\"code-snippet__selector-tag\">RedisConnectionUtils</span><span class=\"code-snippet__selector-class\">.java</span><span class=\"code-snippet__selector-pseudo\">:78)</span></span></code><code><span class=\"code-snippet_outer\">    <span class=\"code-snippet__selector-tag\">at</span> <span class=\"code-snippet__selector-tag\">org</span><span class=\"code-snippet__selector-class\">.springframework</span><span class=\"code-snippet__selector-class\">.data</span><span class=\"code-snippet__selector-class\">.redis</span><span class=\"code-snippet__selector-class\">.core</span><span class=\"code-snippet__selector-class\">.RedisTemplate</span><span class=\"code-snippet__selector-class\">.execute</span>(<span class=\"code-snippet__selector-tag\">RedisTemplate</span><span class=\"code-snippet__selector-class\">.java</span><span class=\"code-snippet__selector-pseudo\">:177)</span></span></code><code><span class=\"code-snippet_outer\">    <span class=\"code-snippet__selector-tag\">at</span> <span class=\"code-snippet__selector-tag\">org</span><span class=\"code-snippet__selector-class\">.springframework</span><span class=\"code-snippet__selector-class\">.data</span><span class=\"code-snippet__selector-class\">.redis</span><span class=\"code-snippet__selector-class\">.core</span><span class=\"code-snippet__selector-class\">.RedisTemplate</span><span class=\"code-snippet__selector-class\">.execute</span>(<span class=\"code-snippet__selector-tag\">RedisTemplate</span><span class=\"code-snippet__selector-class\">.java</span><span class=\"code-snippet__selector-pseudo\">:152)</span></span></code><code><span class=\"code-snippet_outer\">    <span class=\"code-snippet__selector-tag\">at</span> <span class=\"code-snippet__selector-tag\">org</span><span class=\"code-snippet__selector-class\">.springframework</span><span class=\"code-snippet__selector-class\">.data</span><span class=\"code-snippet__selector-class\">.redis</span><span class=\"code-snippet__selector-class\">.core</span><span class=\"code-snippet__selector-class\">.AbstractOperations</span><span class=\"code-snippet__selector-class\">.execute</span>(<span class=\"code-snippet__selector-tag\">AbstractOperations</span><span class=\"code-snippet__selector-class\">.java</span><span class=\"code-snippet__selector-pseudo\">:85)</span></span></code><code><span class=\"code-snippet_outer\">    <span class=\"code-snippet__selector-tag\">at</span> <span class=\"code-snippet__selector-tag\">org</span><span class=\"code-snippet__selector-class\">.springframework</span><span class=\"code-snippet__selector-class\">.data</span><span class=\"code-snippet__selector-class\">.redis</span><span class=\"code-snippet__selector-class\">.core</span><span class=\"code-snippet__selector-class\">.DefaultHashOperations</span><span class=\"code-snippet__selector-class\">.get</span>(<span class=\"code-snippet__selector-tag\">DefaultHashOperations</span><span class=\"code-snippet__selector-class\">.java</span><span class=\"code-snippet__selector-pseudo\">:48)</span></span></code></pre></section><p style=\"text-align: left;\"><br></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">找到源头第一次出现 500 地方，</span><span style=\"font-size: 15px;\">发现以下代码：</span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li><li><li><li><li></ul><pre class=\"code-snippet__js\" data-lang=\"swift\"><code><span class=\"code-snippet_outer\">.......</span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__type\">Cursor</span> <span class=\"code-snippet__built_in\">c</span> = stringRedisTemplate.getConnectionFactory().getConnection().scan(options);</span></code><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__keyword\">while</span> (<span class=\"code-snippet__built_in\">c</span>.hasNext()) {</span></code><code><span class=\"code-snippet_outer\">    .....</span></code><code><span class=\"code-snippet_outer\">}</span></code></pre></section><p style=\"text-align: left;\"><span style=\"font-size: 15px;\"></span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">分析这段代码：stringRedisTemplate.getConnectionFactory().getConnection() 获取 pool 中的 redisConnection 后，并没有后续操作。也就是说此时 Redis 连接池中的链接被租赁后，并没有释放或者退还到链接池中、虽然业务已处理完毕 redisConnection 已经</span><span style=\"font-size: 15px;text-align: left;\">空闲，但是 pool 中的 redisConnection 的状态还没有回到 idle 状态。</span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"><br></span></p><p style=\"text-align: center;\"><img data-ratio=\"0.2\" data-type=\"png\" data-w=\"620\" height=\"124\" width=\"620\" style=\"margin-right: auto; margin-left: auto; box-sizing: border-box; border-width: 0px; border-style: initial; border-color: initial; vertical-align: middle; cursor: zoom-in; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7X4h7ibmISd3tfwPOKjK3lMCA9wEX8Z2nFfqdVD9bB3pIygIKxKJX4spA/640?wx_fmt=png\"></p><p style=\"text-align: left;\"><br></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">正常应为：</span></p><p style=\"text-align: left;\"><br></p><p style=\"text-align: center;\"><img data-ratio=\"0.1267605633802817\" data-type=\"png\" data-w=\"994\" height=\"126\" width=\"994\" style=\"margin-right: auto; margin-left: auto; box-sizing: border-box; border-width: 0px; border-style: initial; border-color: initial; vertical-align: middle; cursor: zoom-in; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7XTxWzDEZOshMQPCoACkOVkXgiam7eNTDIFEq5X1EbQFURc0TnN1ly8icw/640?wx_fmt=png\"></p><p style=\"text-align: left;\"><br></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">自此问题已经找到。</span></p><p style=\"text-align: left;\"><br></p><p style=\"text-align: left;\"><strong><span style=\"font-size: 15px;text-align: left;\">总结</span></strong><span style=\"font-size: 15px;text-align: left;\">：Spring stringRedisTemplate 对 Redis常规操作做了一些封装，但还不支持像  Scan SetNx 等命令。这时需要拿到 jedis Connection 进行一些特殊的 Commands。</span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">不推荐使用 stringRedisTemplate.getConnectionFactory().getConnection()。</span></p><p style=\"text-align: left;\"><br></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">我们可以使用下面代码来执行：</span></p><p><span style=\"font-size: 15px;text-align: left;\"><br></span></p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li><li><li><li><li><li><li></ul><pre class=\"code-snippet__js\" data-lang=\"java\"><code><span class=\"code-snippet_outer\">stringRedisTemplate.execute(<span class=\"code-snippet__keyword\">new</span> RedisCallback<cursor>() {</cursor></span></code><code><span class=\"code-snippet_outer\">     <span class=\"code-snippet__meta\">@Override</span></span></code><code><span class=\"code-snippet_outer\">     <span class=\"code-snippet__function\"><span class=\"code-snippet__keyword\">public</span> Cursor <span class=\"code-snippet__title\">doInRedis</span><span class=\"code-snippet__params\">(RedisConnection connection)</span> <span class=\"code-snippet__keyword\">throws</span> DataAccessException </span>{</span></code><code><span class=\"code-snippet_outer\">         </span></code><code><span class=\"code-snippet_outer\">       <span class=\"code-snippet__keyword\">return</span> connection.scan(options);</span></code><code><span class=\"code-snippet_outer\">     }</span></code><code><span class=\"code-snippet_outer\">});</span></code></pre></section><p style=\"text-align: left;\"><br></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;\">或者使用完 connection 后执行：</span></p><p><span style=\"font-size: 15px;text-align: left;\"><br></span></p><section class=\"code-snippet__fix code-snippet__js\"><ul class=\"code-snippet__line-index code-snippet__js\"><li></ul><pre class=\"code-snippet__js\" data-lang=\"css\"><code><span class=\"code-snippet_outer\"><span class=\"code-snippet__selector-tag\">RedisConnectionUtils</span><span class=\"code-snippet__selector-class\">.releaseConnection</span>(<span class=\"code-snippet__selector-tag\">conn</span>, <span class=\"code-snippet__selector-tag\">factory</span>);</span></code></pre></section><p><br></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">来释放 Connection。</span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\"><br></span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;text-align: left;\">同时，Redis 中也不建议使用 keys 命令。Redis Pool 的配置应该合理设置，否则出现问题无错误日志无报错，定位相当困难。</span><span style=\"font-size: 15px;\"></span></p><p><span style=\"font-size: 15px;text-align: left;\"><br></span></p><section donone=\"shifuMouseDownCard('shifu_c_030')\" label=\"Copyright Reserved by PLAYHUDONG.\" style=\"text-align: start;white-space: normal;margin-top: 1em;margin-bottom: 1em;caret-color: rgb(0, 0, 0);color: rgb(0, 0, 0);border-width: 0px;border-style: initial;border-color: initial;\"><section style=\"margin-left: 1em;line-height: 1.4;\"><span style=\"padding: 3px 8px;border-top-left-radius: 4px;border-top-right-radius: 4px;border-bottom-right-radius: 4px;border-bottom-left-radius: 4px;color: rgb(255, 255, 255);background-color: rgb(255, 105, 31);font-family: inherit;text-align: inherit;text-decoration: inherit;font-size: 16px;\">推荐阅读</span>  <span style=\"margin-left: 4px;padding: 3px 8px;border-top-left-radius: 1.2em;border-top-right-radius: 1.2em;border-bottom-right-radius: 1.2em;border-bottom-left-radius: 1.2em;color: rgb(255, 255, 255);line-height: 1.2;background-color: rgb(204, 204, 204);font-family: inherit;text-align: inherit;text-decoration: inherit;border-color: rgb(249, 110, 87);font-size: 12px;\">点击标题可跳转</span></section><section style=\"margin-top: -11px;padding: 22px 16px 16px;border-width: 1px;border-style: solid;border-color: rgb(255, 105, 31);color: rgb(51, 51, 51);font-size: 1em;font-family: inherit;text-align: inherit;text-decoration: inherit;\"><p><a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;mid=2651486062&amp;idx=1&amp;sn=90676b8593c720b7e8a9d3f0c4013353&amp;chksm=bd251b118a5292076da49ccf5b5d71320ee0d81f867896d18cb38800d52c06d029b765114838&amp;scene=21#wechat_redirect\" data-itemshowtype=\"0\" tab=\"innerlink\" style=\"font-family: inherit;text-align: inherit;text-decoration: underline;font-size: 13px;\" data-linktype=\"2\"><span style=\"font-size: 13px;\">你可能不知道的 IDEA 高级调试技巧</span></a></p><p><a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;mid=2651493039&amp;idx=1&amp;sn=1bf7a727efeed40ed165f33a9c31abae&amp;chksm=bd25fed08a5277c6bbb1ecffe584f4885e703d9be0724fd97d3acc44693e13cc3b41c1e6bcf7&amp;scene=21#wechat_redirect\" data-itemshowtype=\"0\" tab=\"innerlink\" style=\"text-align: start;white-space: normal;caret-color: rgb(0, 0, 0);text-decoration: underline;font-size: 13px;\" data-linktype=\"2\"><span style=\"font-size: 13px;\">这 5 条 IntelliJ IDEA 调试技巧太强了！</span></a></p><p><span style=\"text-decoration: underline;font-size: 13px;\"><a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;mid=2651489163&amp;idx=1&amp;sn=e1cc38f81b31ef3f8cdb357e05843c96&amp;chksm=bd25eff48a5266e2742271e3ca4702ec7567930d79f27cd721dceb12e2fbd9eb97ac65ac24f3&amp;scene=21#wechat_redirect\" data-itemshowtype=\"0\" tab=\"innerlink\" data-linktype=\"2\">我的程序跑了60多小时，就是为了让你看一眼JDK的BUG导致的内存泄漏</a></span></p></section></section><p style=\"caret-color: rgb(0, 0, 0);color: rgb(0, 0, 0);text-align: start;white-space: normal;\"><br></p><p style=\"white-space: normal;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"max-width: 100%;font-size: 14px;color: rgb(255, 169, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;\">看完本文有收获？请转发分享给更多人</span></p><p style=\"white-space: normal;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><strong style=\"max-width: 100%;color: rgb(255, 169, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;\">关注「ImportNew」，提升Java技能</strong></p><p style=\"white-space: normal;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><img data-ratio=\"0.9166666666666666\" data-s=\"300,640\" data-type=\"jpeg\" data-w=\"600\" width=\"auto\" style=\"box-sizing: border-box !important; overflow-wrap: break-word !important; visibility: visible !important; width: 600px !important; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/2A8tXicCG8ylbWIGfdoDED35IRRySQZTXUkJ1eop9MHApzFibKnOo0diboXpl0rmS5mH78YJhsWQv0dhv718A6kUA/640?wx_fmt=jpeg\"></p><p style=\"text-align: right;\"><span style=\"font-size: 14px;text-align: right;\">好文章，我</span><span style=\"font-size: 14px;text-align: right;color: rgb(255, 41, 65);\">在看</span><span style=\"font-size: 14px;text-align: right;\">❤️</span></p>\n                </div>\n\n    \n    <br>\n\n    \n        <a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;mid=2651494129&amp;idx=2&amp;sn=f73563cb85157e81215965ea39e0f426&amp;chksm=bd25fa8e8a5273986cc96ee2570d1d33d4081a8cfcbbcd7b112243480a35cda86fc48da21b95&amp;scene=0#rd\" style=\"color: blue\" class=\"media_tool_meta meta_primary\">原文</a>\n        <br>\n    \n\n    \n\n    <img alt=\"\" width=\"1px\" height=\"1px\" class=\"\" style=\"width:1px;height:1px;display:none\" src=\"http://www.jintiankansha.me/rss_static/11757/1zBBpD5ZU8\"></div></div>","descriptionType":"html","publishedDate":"Sun, 28 Mar 2021 03:30:00 +0000","feedId":2521,"bgimg":"http://content.sov5.cn/mmbiz_jpg/eZzl4LXykQyDXNd3nLuHpwgzyogCwOIS8JGibdiaJ1L5HBX3jJBrcxbJM8dDfNia9HZur1BsVich8GtCWu6rXEcgrA?imageView2/1/w/600","linkMd5":"6d073eb3fc82025157b9e04241add1a8","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn28@2020_6/2021/04/03/06-24-19-983_675f2b75baab6d1d.webp","destWidth":299,"destHeight":300,"sourceBytes":8229,"destBytes":7694,"author":"","articleImgCdnMap":{"http://content.sov5.cn/mmbiz_jpg/eZzl4LXykQyDXNd3nLuHpwgzyogCwOIS8JGibdiaJ1L5HBX3jJBrcxbJM8dDfNia9HZur1BsVich8GtCWu6rXEcgrA?imageView2/1/w/600":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn28@2020_6/2021/04/03/06-24-19-983_675f2b75baab6d1d.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7XQjOsOibWOHNe5nAicWjL6QUJ7BP5SbDzybMe7wyGh6KcPpVSKxg9kRdQ/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn67@2020_6/2021/04/03/06-25-40-865_e6b31e55b2ab72df.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7XWs2akd7xtxEhGYP6hbEeILqtL13h8wLnA7L73WCVaLwq3Y08CTur4Q/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn31@2020_1/2021/04/03/06-24-47-943_3285ea38e19cfda7.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7XNo32XYep6a8K8Vo1dCJOVcOwIVLgXmLInBjkxW4E5quPhvA9QQ1Ekw/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn39@2020_4/2021/04/03/06-24-26-030_370e6b88cca0b41e.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7XXYsl3Dx3d6U3RO1rTrmhoIwib5XDBnoVpek2wBOuQ1LImI6o8QNKXicg/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn75@2020_4/2021/04/03/06-26-18-399_8e63274ecadb1dc3.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7XCzbs4BurmNpbcfJGmwaKGL99KYrxVDICM9ywupAWQHFhicaRJib7IicUA/640?wx_fmt=png":null,"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7XvFSJ0d2pkoOgias6JYaic4dojVCNmRnQqrQS8RLzGW8AuPzwJ24uwmEg/640?wx_fmt=png":null,"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7XiaB7scqYwNQq70XhFh1sWsLnnJv0BN4XnIDH9Y4DMcpc9eVn1uQcR2g/640?wx_fmt=png":null,"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7Xt5nRBO8cO4ictHzG0UPLKJQ95V1uqcvibeNia4uMe0NlVOonjPia5XY3ibg/640?wx_fmt=jpeg":"https://cdn.jsdelivr.net/gh/myreaderx32/cdn72@2020_1/2021/04/03/06-24-23-039_faa45c3d4ef527ed.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7X4h7ibmISd3tfwPOKjK3lMCA9wEX8Z2nFfqdVD9bB3pIygIKxKJX4spA/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn63@2020_4/2021/04/03/06-25-51-656_67b9746f46dfd881.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7XTxWzDEZOshMQPCoACkOVkXgiam7eNTDIFEq5X1EbQFURc0TnN1ly8icw/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn44@2020_2/2021/04/03/06-25-33-421_3503a3e22ffcd4ce.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/2A8tXicCG8ylbWIGfdoDED35IRRySQZTXUkJ1eop9MHApzFibKnOo0diboXpl0rmS5mH78YJhsWQv0dhv718A6kUA/640?wx_fmt=jpeg":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn55@2020_2/2021/04/03/06-25-27-592_f93d0239d4369c75.webp","http://www.jintiankansha.me/rss_static/11757/1zBBpD5ZU8":null},"publishedOrCreatedDate":1617431059123}],"record":{"createdTime":"2021-04-03 14:24:19","updatedTime":"2021-04-03 14:24:19","feedId":2521,"fetchDate":"Sat, 03 Apr 2021 06:24:19 +0000","fetchMs":589,"handleMs":14,"totalMs":125440,"newArticles":0,"totalArticles":5,"status":1,"type":0,"ip":"d15fc7c60ebd2e435ed4a6cfdecabb2f","hostName":"europe65*","requestId":"d369350f9e3b44578a275f2bc71ecacd_2521","contentType":"application/rss+xml","totalBytes":347706,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":13,"articlesImgsGithubTotal":9,"successGithubMap":{"myreaderx15":1,"myreaderx6":1,"myreaderx4":1,"myreaderx32":1,"myreaderx22":1,"myreaderx11":1,"myreaderx30":1,"myreaderx31":1,"myreaderx19":1},"failGithubMap":{"myreaderx23":1}},"feed":{"createdTime":"2020-08-24 21:31:41","updatedTime":"2020-09-01 10:09:47","id":2521,"name":"ImportNew","url":"http://feedmaker.kindle4rss.com/feeds/importnew.weixin.xml","subscriber":null,"website":null,"icon":"http://www.sogou.com/images/logo/new/favicon.ico?v=4","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx63/cdn9@2020_3/2020/09/01/02-08-31-388_d24121c9beed1de6.ico","description":"伯乐在线旗下账号，专注Java技术分享，包括Java基础技术、进阶技能、架构设计和Java技术领域动态等。","weekly":null,"link":null},"noPictureArticleList":[{"createdTime":"2021-04-03 14:26:23","updatedTime":"2021-04-03 14:26:23","id":null,"feedId":2521,"linkMd5":"6d073eb3fc82025157b9e04241add1a8"}],"tmpCommonImgCdnBytes":7694,"tmpBodyImgCdnBytes":340012,"tmpBgImgCdnBytes":0,"extra4":{"start":1617431058295,"total":0,"statList":[{"spend":815,"msg":"获取xml内容"},{"spend":14,"msg":"解释文章"},{"spend":0,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":123388,"msg":"正文链接上传到cdn"}]},"extra5":13,"extra6":11,"extra7ImgCdnFailResultVector":[{"code":1,"isDone":false,"source":"http://www.jintiankansha.me/rss_static/11757/1zBBpD5ZU8","sourceStatusCode":405,"sourceBytes":0,"destBytes":0,"feedId":2521,"totalSpendMs":896,"convertSpendMs":0,"createdTime":"2021-04-03 14:24:20","host":"europe-25*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%89%BE%E5%9B%A0%20Redis%20%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%BD%93%E5%AF%BC%E8%87%B4%E7%9A%84%E5%BA%94%E7%94%A8%E5%8D%A1%E6%AD%BB%20Bug%20%E8%BF%87%E7%A8%8B","linkMd5ListStr":"6d073eb3fc82025157b9e04241add1a8","extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[405],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7XiaB7scqYwNQq70XhFh1sWsLnnJv0BN4XnIDH9Y4DMcpc9eVn1uQcR2g/640?wx_fmt=png","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":2521,"totalSpendMs":870,"convertSpendMs":0,"createdTime":"2021-04-03 14:24:20","host":"us-028*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%89%BE%E5%9B%A0%20Redis%20%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%BD%93%E5%AF%BC%E8%87%B4%E7%9A%84%E5%BA%94%E7%94%A8%E5%8D%A1%E6%AD%BB%20Bug%20%E8%BF%87%E7%A8%8B","linkMd5ListStr":"6d073eb3fc82025157b9e04241add1a8","extra22GetBytesInfo":"2、Referer字段 ： http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%89%BE%E5%9B%A0%20Redis%20%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%BD%93%E5%AF%BC%E8%87%B4%E7%9A%84%E5%BA%94%E7%94%A8%E5%8D%A1%E6%AD%BB%20Bug%20%E8%BF%87%E7%A8%8B","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"http://www.jintiankansha.me/rss_static/11757/1zBBpD5ZU8","sourceStatusCode":405,"sourceBytes":0,"destBytes":0,"feedId":2521,"totalSpendMs":488,"convertSpendMs":0,"createdTime":"2021-04-03 14:24:21","host":"us-025*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%89%BE%E5%9B%A0%20Redis%20%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%BD%93%E5%AF%BC%E8%87%B4%E7%9A%84%E5%BA%94%E7%94%A8%E5%8D%A1%E6%AD%BB%20Bug%20%E8%BF%87%E7%A8%8B","linkMd5ListStr":"6d073eb3fc82025157b9e04241add1a8","extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[405],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7XiaB7scqYwNQq70XhFh1sWsLnnJv0BN4XnIDH9Y4DMcpc9eVn1uQcR2g/640?wx_fmt=png","sourceStatusCode":200,"destWidth":1080,"destHeight":43,"sourceBytes":10458,"destBytes":2706,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":5438,"convertSpendMs":13,"createdTime":"2021-04-03 14:24:21","host":"us-030*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%89%BE%E5%9B%A0%20Redis%20%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%BD%93%E5%AF%BC%E8%87%B4%E7%9A%84%E5%BA%94%E7%94%A8%E5%8D%A1%E6%AD%BB%20Bug%20%E8%BF%87%E7%A8%8B","linkMd5ListStr":"6d073eb3fc82025157b9e04241add1a8","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx23/cdn59/contents/2021/04/03/06-24-26-887_8a4e3d921594333f.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 69189253.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Sat, 03 Apr 2021 06:24:26 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["8D5E:47EB:1024976:1CE1E6C:60680A1A"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1617432542"],"x-ratelimit-used":["60"],"x-xss-protection":["0"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx23/cdn59/contents/2021/04/03/06-24-26-887_8a4e3d921594333f.webp","historyStatusCode":[],"spendMs":49},"base64UserPassword":null,"token":"df0b9******************************93a6e"},"githubUser":"myreaderx23","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"10.2 KB","destSize":"2.6 KB","compressRate":"25.9%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7XiaB7scqYwNQq70XhFh1sWsLnnJv0BN4XnIDH9Y4DMcpc9eVn1uQcR2g/640?wx_fmt=png","sourceStatusCode":200,"destWidth":1080,"destHeight":43,"sourceBytes":10458,"destBytes":2706,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":4319,"convertSpendMs":11,"createdTime":"2021-04-03 14:24:57","host":"europe67*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%89%BE%E5%9B%A0%20Redis%20%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%BD%93%E5%AF%BC%E8%87%B4%E7%9A%84%E5%BA%94%E7%94%A8%E5%8D%A1%E6%AD%BB%20Bug%20%E8%BF%87%E7%A8%8B","linkMd5ListStr":"6d073eb3fc82025157b9e04241add1a8","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx23/cdn59/contents/2021/04/03/06-25-01-131_8a4e3d921594333f.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 69189253.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Sat, 03 Apr 2021 06:25:01 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["8608:162C:1C27826:1CD0EF6:60680A3D"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1617432542"],"x-ratelimit-used":["60"],"x-xss-protection":["0"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx23/cdn59/contents/2021/04/03/06-25-01-131_8a4e3d921594333f.webp","historyStatusCode":[],"spendMs":188},"base64UserPassword":null,"token":"df0b9******************************93a6e"},"githubUser":"myreaderx23","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"10.2 KB","destSize":"2.6 KB","compressRate":"25.9%"},null,null,null,null,null,null,null,null,null],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://europe-58.herokuapp.com/":{"failCount":1,"successCount":2,"resultList":[200,200,null]},"http://us-028.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[403]},"http://us-030.herokuapp.com/":{"failCount":0,"successCount":3,"resultList":[200,200,200]},"http://us-024.herokuapp.com/":{"failCount":1,"successCount":1,"resultList":[200,null]},"http://us-025.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[405]},"http://europe-25.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[405]},"http://us-54.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://europe62.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://us-036.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://us-004.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://europe67.herokuapp.com/":{"failCount":0,"successCount":4,"resultList":[200,200,200,200]},"http://us-016.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://us-040.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://us-012.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"http://content.sov5.cn/mmbiz_jpg/eZzl4LXykQyDXNd3nLuHpwgzyogCwOIS8JGibdiaJ1L5HBX3jJBrcxbJM8dDfNia9HZur1BsVich8GtCWu6rXEcgrA?imageView2/1/w/600","sourceStatusCode":200,"destWidth":299,"destHeight":300,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn28@2020_6/2021/04/03/06-24-19-983_675f2b75baab6d1d.webp","sourceBytes":8229,"destBytes":7694,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":1199,"convertSpendMs":8,"createdTime":"2021-04-03 14:24:19","host":"europe21*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%89%BE%E5%9B%A0%20Redis%20%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%BD%93%E5%AF%BC%E8%87%B4%E7%9A%84%E5%BA%94%E7%94%A8%E5%8D%A1%E6%AD%BB%20Bug%20%E8%BF%87%E7%A8%8B","linkMd5ListStr":"6d073eb3fc82025157b9e04241add1a8,6d073eb3fc82025157b9e04241add1a8","githubUser":"myreaderx6","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"8 KB","destSize":"7.5 KB","compressRate":"93.5%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7Xt5nRBO8cO4ictHzG0UPLKJQ95V1uqcvibeNia4uMe0NlVOonjPia5XY3ibg/640?wx_fmt=jpeg","sourceStatusCode":200,"destWidth":1055,"destHeight":108,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx32/cdn72@2020_1/2021/04/03/06-24-23-039_faa45c3d4ef527ed.webp","sourceBytes":11961,"destBytes":16264,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":3169,"convertSpendMs":8,"createdTime":"2021-04-03 14:24:20","host":"europe67*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%89%BE%E5%9B%A0%20Redis%20%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%BD%93%E5%AF%BC%E8%87%B4%E7%9A%84%E5%BA%94%E7%94%A8%E5%8D%A1%E6%AD%BB%20Bug%20%E8%BF%87%E7%A8%8B","linkMd5ListStr":"6d073eb3fc82025157b9e04241add1a8","githubUser":"myreaderx32","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"11.7 KB","destSize":"15.9 KB","compressRate":"136%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7XNo32XYep6a8K8Vo1dCJOVcOwIVLgXmLInBjkxW4E5quPhvA9QQ1Ekw/640?wx_fmt=png","sourceStatusCode":200,"destWidth":642,"destHeight":69,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn39@2020_4/2021/04/03/06-24-26-030_370e6b88cca0b41e.webp","sourceBytes":19293,"destBytes":10530,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":5801,"convertSpendMs":32,"createdTime":"2021-04-03 14:24:20","host":"us-024*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%89%BE%E5%9B%A0%20Redis%20%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%BD%93%E5%AF%BC%E8%87%B4%E7%9A%84%E5%BA%94%E7%94%A8%E5%8D%A1%E6%AD%BB%20Bug%20%E8%BF%87%E7%A8%8B","linkMd5ListStr":"6d073eb3fc82025157b9e04241add1a8","githubUser":"myreaderx31","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"18.8 KB","destSize":"10.3 KB","compressRate":"54.6%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7XWs2akd7xtxEhGYP6hbEeILqtL13h8wLnA7L73WCVaLwq3Y08CTur4Q/640?wx_fmt=png","sourceStatusCode":200,"destWidth":777,"destHeight":496,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn31@2020_1/2021/04/03/06-24-47-943_3285ea38e19cfda7.webp","sourceBytes":124761,"destBytes":69650,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":28335,"convertSpendMs":35,"createdTime":"2021-04-03 14:24:20","host":"europe-58*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%89%BE%E5%9B%A0%20Redis%20%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%BD%93%E5%AF%BC%E8%87%B4%E7%9A%84%E5%BA%94%E7%94%A8%E5%8D%A1%E6%AD%BB%20Bug%20%E8%BF%87%E7%A8%8B","linkMd5ListStr":"6d073eb3fc82025157b9e04241add1a8","githubUser":"myreaderx4","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"121.8 KB","destSize":"68 KB","compressRate":"55.8%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/2A8tXicCG8ylbWIGfdoDED35IRRySQZTXUkJ1eop9MHApzFibKnOo0diboXpl0rmS5mH78YJhsWQv0dhv718A6kUA/640?wx_fmt=jpeg","sourceStatusCode":200,"destWidth":600,"destHeight":550,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn55@2020_2/2021/04/03/06-25-27-592_f93d0239d4369c75.webp","sourceBytes":37143,"destBytes":31608,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":5520,"convertSpendMs":85,"createdTime":"2021-04-03 14:25:22","host":"us-030*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%89%BE%E5%9B%A0%20Redis%20%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%BD%93%E5%AF%BC%E8%87%B4%E7%9A%84%E5%BA%94%E7%94%A8%E5%8D%A1%E6%AD%BB%20Bug%20%E8%BF%87%E7%A8%8B","linkMd5ListStr":"6d073eb3fc82025157b9e04241add1a8","githubUser":"myreaderx19","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"36.3 KB","destSize":"30.9 KB","compressRate":"85.1%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7XTxWzDEZOshMQPCoACkOVkXgiam7eNTDIFEq5X1EbQFURc0TnN1ly8icw/640?wx_fmt=png","sourceStatusCode":200,"destWidth":994,"destHeight":126,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn44@2020_2/2021/04/03/06-25-33-421_3503a3e22ffcd4ce.webp","sourceBytes":59240,"destBytes":21336,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":11538,"convertSpendMs":13,"createdTime":"2021-04-03 14:25:22","host":"europe67*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%89%BE%E5%9B%A0%20Redis%20%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%BD%93%E5%AF%BC%E8%87%B4%E7%9A%84%E5%BA%94%E7%94%A8%E5%8D%A1%E6%AD%BB%20Bug%20%E8%BF%87%E7%A8%8B","linkMd5ListStr":"6d073eb3fc82025157b9e04241add1a8","githubUser":"myreaderx15","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"57.9 KB","destSize":"20.8 KB","compressRate":"36%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7XQjOsOibWOHNe5nAicWjL6QUJ7BP5SbDzybMe7wyGh6KcPpVSKxg9kRdQ/640?wx_fmt=png","sourceStatusCode":200,"destWidth":794,"destHeight":582,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn67@2020_6/2021/04/03/06-25-40-865_e6b31e55b2ab72df.webp","sourceBytes":123449,"destBytes":73982,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":19204,"convertSpendMs":54,"createdTime":"2021-04-03 14:25:22","host":"europe67*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%89%BE%E5%9B%A0%20Redis%20%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%BD%93%E5%AF%BC%E8%87%B4%E7%9A%84%E5%BA%94%E7%94%A8%E5%8D%A1%E6%AD%BB%20Bug%20%E8%BF%87%E7%A8%8B","linkMd5ListStr":"6d073eb3fc82025157b9e04241add1a8","githubUser":"myreaderx22","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"120.6 KB","destSize":"72.2 KB","compressRate":"59.9%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7X4h7ibmISd3tfwPOKjK3lMCA9wEX8Z2nFfqdVD9bB3pIygIKxKJX4spA/640?wx_fmt=png","sourceStatusCode":200,"destWidth":620,"destHeight":124,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn63@2020_4/2021/04/03/06-25-51-656_67b9746f46dfd881.webp","sourceBytes":145953,"destBytes":21104,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":29701,"convertSpendMs":22,"createdTime":"2021-04-03 14:25:22","host":"us-030*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%89%BE%E5%9B%A0%20Redis%20%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%BD%93%E5%AF%BC%E8%87%B4%E7%9A%84%E5%BA%94%E7%94%A8%E5%8D%A1%E6%AD%BB%20Bug%20%E8%BF%87%E7%A8%8B","linkMd5ListStr":"6d073eb3fc82025157b9e04241add1a8","githubUser":"myreaderx11","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"142.5 KB","destSize":"20.6 KB","compressRate":"14.5%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eZzl4LXykQxezMu5ndlMl6q8qjvvZh7XXYsl3Dx3d6U3RO1rTrmhoIwib5XDBnoVpek2wBOuQ1LImI6o8QNKXicg/640?wx_fmt=png","sourceStatusCode":200,"destWidth":1004,"destHeight":605,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn75@2020_4/2021/04/03/06-26-18-399_8e63274ecadb1dc3.webp","sourceBytes":153018,"destBytes":95538,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":56634,"convertSpendMs":44,"createdTime":"2021-04-03 14:25:22","host":"europe-58*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%89%BE%E5%9B%A0%20Redis%20%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%BD%93%E5%AF%BC%E8%87%B4%E7%9A%84%E5%BA%94%E7%94%A8%E5%8D%A1%E6%AD%BB%20Bug%20%E8%BF%87%E7%A8%8B","linkMd5ListStr":"6d073eb3fc82025157b9e04241add1a8","githubUser":"myreaderx30","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"149.4 KB","destSize":"93.3 KB","compressRate":"62.4%"}],"successGithubMap":{"myreaderx15":1,"myreaderx6":1,"myreaderx4":1,"myreaderx32":1,"myreaderx22":1,"myreaderx11":1,"myreaderx30":1,"myreaderx31":1,"myreaderx19":1},"failGithubMap":{"myreaderx23":1}}
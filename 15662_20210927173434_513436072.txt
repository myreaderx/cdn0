{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2021-09-28 01:33:30","updatedTime":"2021-09-28 01:33:30","title":"Nodenv のリストに無い Node のバージョンをインストールするため node-build を導入するフロー","link":"https://wp.yat-net.com/?p=7742","description":"\n<p>WordPress の開発で利用する gulp を使った <a rel=\"noreferrer noopener\" href=\"https://github.com/yat8823jp/themrishv2\" target=\"_blank\">themrish</a> というものを公開しているのですが、利用している各種パッケージが古かったり、すでに利用していない物があったりしたので中身をバージョンアップしました。</p>\n\n\n\n<p>この際に Node のバージョンを現在（2021年8月26日）の推奨版である 14.17.5 に切り替えたかったんですが Node の管理をしている <a rel=\"noreferrer noopener\" href=\"https://github.com/nodenv/nodenv\" target=\"_blank\">Nodenv</a> では 13.2.0 までしかインストールできません。</p>\n\n\n\n<p>nodenv でインストールできるバージョンを確認するには下記コマンドを</p>\n\n\n<div class=\"wp-block-syntaxhighlighter-code \"><pre class=\"brush: plain; title: ; notranslate\">\nnodenv install --list\n</pre></div>\n\n\n<figure class=\"wp-block-image size-full\"><img loading=\"lazy\" width=\"402\" height=\"346\" src=\"https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/de8d6e3aa18993044c416c26ff9e521f.png\" alt=\"nodenv でインストールできるバージョンは2021年8月26日現在12.11.1~13.2.0\" class=\"wp-image-7745\" srcset=\"https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/de8d6e3aa18993044c416c26ff9e521f.png 402w, https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/de8d6e3aa18993044c416c26ff9e521f-232x200.png 232w\" sizes=\"(max-width: 402px) 100vw, 402px\" /></figure>\n\n\n\n<p>どうするか調べたところ node-build を利用すればインストールするバージョンを追加できるのでそちらを導入したので以下メモ書きです</p>\n\n\n\n<h2>nodenv の導入</h2>\n\n\n\n<p>nodenv の導入がまだの場合はまずここからやりましょう</p>\n\n\n\n<h3>インストール</h3>\n\n\n<div class=\"wp-block-syntaxhighlighter-code \"><pre class=\"brush: plain; title: ; notranslate\">\ngit clone git://github.com/nodenv/nodenv.git ~/.nodenv\n</pre></div>\n\n\n<h3>nodenv にパスを通す</h3>\n\n\n<div class=\"wp-block-syntaxhighlighter-code \"><pre class=\"brush: plain; title: ; notranslate\">\necho 'export PATH=&#34;$HOME/.nodenv/bin:$PATH&#34;' &#62;&#62; ~/.zshrc\necho 'eval &#34;$(nodenv init -)&#34;' &#62;&#62; ~/.zshrc\n</pre></div>\n\n\n<p>上記の .bash_profile の部分は自分の環境似合わせる必要があります。~/.bash_profile とか</p>\n\n\n\n<h3>ターミナルなどのシェルを再起動</h3>\n\n\n<div class=\"wp-block-syntaxhighlighter-code \"><pre class=\"brush: plain; title: ; notranslate\">\nexec $SHELL -l\n</pre></div>\n\n\n<p>とコマンドを実行するかアプリケーションを再起動するか</p>\n\n\n\n<p>ここまでで nodenv が利用できるようになっているはず。確認してみましょう</p>\n\n\n<div class=\"wp-block-syntaxhighlighter-code \"><pre class=\"brush: plain; title: ; notranslate\">\nnodenv -v\n</pre></div>\n\n\n<p>上記コマンドはアプリケーションのバージョンを確認するコマンドです。-v というのがバージョンを確認するためのオプションで、アプリケーション名とバージョンが表記されれば無事インストールができています。</p>\n\n\n\n<p></p>\n\n\n\n<figure class=\"wp-block-image size-full\"><img loading=\"lazy\" width=\"600\" height=\"94\" src=\"https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/cb7092b83f444cb6fb9643ae771c02c5.png\" alt=\"nodenv 1.3.1+11.5024679 のようなバージョン情報\" class=\"wp-image-7743\" srcset=\"https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/cb7092b83f444cb6fb9643ae771c02c5.png 600w, https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/cb7092b83f444cb6fb9643ae771c02c5-400x63.png 400w\" sizes=\"(max-width: 600px) 100vw, 600px\" /></figure>\n\n\n\n<h2>node-build の導入</h2>\n\n\n\n<p>ここからが本題。node-build のインストールに <a href=\"https://brew.sh/index_ja\" target=\"_blank\" rel=\"noreferrer noopener\">Homebrew</a> を使います</p>\n\n\n<div class=\"wp-block-syntaxhighlighter-code \"><pre class=\"brush: plain; title: ; notranslate\">\nbrew install node-build\nmkdir -p &#34;$(nodenv root)&#34;/plugins\ngit clone https://github.com/nodenv/node-build.git &#34;$(nodenv root)&#34;/plugins/node-build\n</pre></div>\n\n\n<p>インストルできたらインストールできるバージョンを確認しましょう</p>\n\n\n<div class=\"wp-block-syntaxhighlighter-code \"><pre class=\"brush: plain; title: ; notranslate\">\nnode-build --definitions\n</pre></div>\n\n\n<figure class=\"wp-block-image size-large\"><img loading=\"lazy\" width=\"418\" height=\"400\" src=\"https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/446bc4fd168ad33f4a09b8c640b258ee-418x400.png\" alt=\"14.10.0~15.0.0以降まで\" class=\"wp-image-7746\" srcset=\"https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/446bc4fd168ad33f4a09b8c640b258ee-418x400.png 418w, https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/446bc4fd168ad33f4a09b8c640b258ee-209x200.png 209w, https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/446bc4fd168ad33f4a09b8c640b258ee-768x734.png 768w, https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/446bc4fd168ad33f4a09b8c640b258ee-900x860.png 900w, https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/446bc4fd168ad33f4a09b8c640b258ee.png 1042w\" sizes=\"(max-width: 418px) 100vw, 418px\" /></figure>\n\n\n\n<p>今回は推奨版の14.17.5をインストールするので</p>\n\n\n<div class=\"wp-block-syntaxhighlighter-code \"><pre class=\"brush: plain; title: ; notranslate\">\nnode-build 14.17.5 ~/.anyenv/envs/nodenv/versions/14.17.5\n</pre></div>\n\n\n<p>14.17.5 の部分を自分がインストールしたいバージョン番号に変更して使ってください</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img loading=\"lazy\" width=\"900\" height=\"299\" src=\"https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/fc5f3697d80e12111c421acaa481c9e8-900x299.png\" alt=\"バージョンリストに14.17.5が表示\" class=\"wp-image-7748\" srcset=\"https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/fc5f3697d80e12111c421acaa481c9e8-900x299.png 900w, https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/fc5f3697d80e12111c421acaa481c9e8-400x133.png 400w, https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/fc5f3697d80e12111c421acaa481c9e8-768x255.png 768w, https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/fc5f3697d80e12111c421acaa481c9e8.png 1280w\" sizes=\"(max-width: 900px) 100vw, 900px\" /></figure>\n\n\n\n<p>インストール完了。＊（アスタリスク）がついているものが現在指定しているバージョンなのでこれを切り替えます。ローカルプロジェクトの方を切り替えたいので</p>\n\n\n<div class=\"wp-block-syntaxhighlighter-code \"><pre class=\"brush: plain; title: ; notranslate\">\nnodenv local 14.17.5\n</pre></div>\n\n\n<p>切り替わったか確認します</p>\n\n\n<div class=\"wp-block-syntaxhighlighter-code \"><pre class=\"brush: plain; title: ; notranslate\">\nnode -v\n</pre></div>\n\n\n<figure class=\"wp-block-image size-full\"><img loading=\"lazy\" width=\"778\" height=\"98\" src=\"https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/a0183e4eef4548d0a9e138e56f86ccee.png\" alt=\"バージョン 14.17.5\" class=\"wp-image-7749\" srcset=\"https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/a0183e4eef4548d0a9e138e56f86ccee.png 778w, https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/a0183e4eef4548d0a9e138e56f86ccee-400x50.png 400w, https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/a0183e4eef4548d0a9e138e56f86ccee-768x97.png 768w\" sizes=\"(max-width: 778px) 100vw, 778px\" /></figure>\n\n\n\n<p>これでバッチリ切り替わりました！</p>\n","descriptionType":"html","publishedDate":"Thu, 26 Aug 2021 04:18:46 +0000","feedId":15662,"bgimg":"https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/de8d6e3aa18993044c416c26ff9e521f.png","linkMd5":"1490f29ebb24f2feacebdc37fc463398","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn88@2020_1/2021/09/27/17-33-32-562_3f5b06f2eef52a20.webp","destWidth":402,"destHeight":346,"sourceBytes":3079,"destBytes":6254,"author":"YAT","articleImgCdnMap":{"https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/de8d6e3aa18993044c416c26ff9e521f.png":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn88@2020_1/2021/09/27/17-33-32-562_3f5b06f2eef52a20.webp","https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/cb7092b83f444cb6fb9643ae771c02c5.png":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn100@2020_2/2021/09/27/17-33-33-981_1815a2eccb47ae84.webp","https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/446bc4fd168ad33f4a09b8c640b258ee-418x400.png":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn92@2020_6/2021/09/27/17-33-34-528_43e2fee2ac3dc998.webp","https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/fc5f3697d80e12111c421acaa481c9e8-900x299.png":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn95@2020_3/2021/09/27/17-33-34-199_1dbde55d95b1a7dd.webp","https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/a0183e4eef4548d0a9e138e56f86ccee.png":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn1@2020_1/2021/09/27/17-34-34-054_f77b6c3d1bcabd9b.webp"},"publishedOrCreatedDate":1632764010981}],"record":{"createdTime":"2021-09-28 01:33:30","updatedTime":"2021-09-28 01:33:30","feedId":15662,"fetchDate":"Mon, 27 Sep 2021 17:33:30 +0000","fetchMs":1681,"handleMs":3997,"totalMs":69320,"newArticles":0,"totalArticles":10,"status":1,"type":0,"ip":"79b59b7ab14b8d981e3d8a220e20848a","hostName":"us-020*","requestId":"8a448c451a414522b250423af4848024_15662","contentType":"application/rss+xml; charset=UTF-8","totalBytes":33440,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":5,"articlesImgsGithubTotal":5,"successGithubMap":{"myreaderx7":1,"myreaderx15":1,"myreaderx4":1,"myreaderx11":1,"myreaderx19":1},"failGithubMap":{}},"feed":{"createdTime":"2020-09-07 02:11:10","updatedTime":"2021-04-03 14:46:16","id":15662,"name":"YATのblog","url":"http://wp.yat-net.com/?feed=rss2","subscriber":214,"website":null,"icon":"https://wp.yat-net.com/favicon.ico","icon_jsdelivr":null,"description":"webデザインをする上で必要な知識・情報・技術等の記述や、参考になるサイトの紹介等を掲載しています。","weekly":null,"link":"https://wp.yat-net.com"},"noPictureArticleList":[],"tmpCommonImgCdnBytes":6254,"tmpBodyImgCdnBytes":27186,"tmpBgImgCdnBytes":0,"extra4":{"start":1632764004988,"total":0,"statList":[{"spend":1996,"msg":"获取xml内容"},{"spend":3997,"msg":"解释文章"},{"spend":0,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":61349,"msg":"正文链接上传到cdn"}]},"extra5":5,"extra6":5,"extra7ImgCdnFailResultVector":[null],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://us-013.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-039.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]},"http://europe61.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-014.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/de8d6e3aa18993044c416c26ff9e521f.png","sourceStatusCode":200,"destWidth":402,"destHeight":346,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn88@2020_1/2021/09/27/17-33-32-562_3f5b06f2eef52a20.webp","sourceBytes":3079,"destBytes":6254,"targetWebpQuality":75,"feedId":15662,"totalSpendMs":1826,"convertSpendMs":5,"createdTime":"2021-09-28 01:33:31","host":"europe-23*","referer":"https://wp.yat-net.com/?p=7742","linkMd5ListStr":"1490f29ebb24f2feacebdc37fc463398,1490f29ebb24f2feacebdc37fc463398","githubUser":"myreaderx19","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"3 KB","destSize":"6.1 KB","compressRate":"203.1%"},{"code":1,"isDone":false,"source":"https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/cb7092b83f444cb6fb9643ae771c02c5.png","sourceStatusCode":200,"destWidth":600,"destHeight":94,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn100@2020_2/2021/09/27/17-33-33-981_1815a2eccb47ae84.webp","sourceBytes":6016,"destBytes":5970,"targetWebpQuality":75,"feedId":15662,"totalSpendMs":1271,"convertSpendMs":6,"createdTime":"2021-09-28 01:33:32","host":"us-013*","referer":"https://wp.yat-net.com/?p=7742","linkMd5ListStr":"1490f29ebb24f2feacebdc37fc463398","githubUser":"myreaderx15","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"5.9 KB","destSize":"5.8 KB","compressRate":"99.2%"},{"code":1,"isDone":false,"source":"https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/fc5f3697d80e12111c421acaa481c9e8-900x299.png","sourceStatusCode":200,"destWidth":900,"destHeight":299,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn95@2020_3/2021/09/27/17-33-34-199_1dbde55d95b1a7dd.webp","sourceBytes":20088,"destBytes":10520,"targetWebpQuality":75,"feedId":15662,"totalSpendMs":1463,"convertSpendMs":8,"createdTime":"2021-09-28 01:33:32","host":"us-039*","referer":"https://wp.yat-net.com/?p=7742","linkMd5ListStr":"1490f29ebb24f2feacebdc37fc463398","githubUser":"myreaderx11","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"19.6 KB","destSize":"10.3 KB","compressRate":"52.4%"},{"code":1,"isDone":false,"source":"https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/446bc4fd168ad33f4a09b8c640b258ee-418x400.png","sourceStatusCode":200,"destWidth":418,"destHeight":400,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn92@2020_6/2021/09/27/17-33-34-528_43e2fee2ac3dc998.webp","sourceBytes":8981,"destBytes":6550,"targetWebpQuality":75,"feedId":15662,"totalSpendMs":1888,"convertSpendMs":7,"createdTime":"2021-09-28 01:33:33","host":"europe61*","referer":"https://wp.yat-net.com/?p=7742","linkMd5ListStr":"1490f29ebb24f2feacebdc37fc463398","githubUser":"myreaderx7","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"8.8 KB","destSize":"6.4 KB","compressRate":"72.9%"},{"code":1,"isDone":false,"source":"https://wp.yat-net.com/yatblog/wp-content/uploads/2021/08/a0183e4eef4548d0a9e138e56f86ccee.png","sourceStatusCode":200,"destWidth":778,"destHeight":98,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn1@2020_1/2021/09/27/17-34-34-054_f77b6c3d1bcabd9b.webp","sourceBytes":4853,"destBytes":4146,"targetWebpQuality":75,"feedId":15662,"totalSpendMs":1264,"convertSpendMs":147,"createdTime":"2021-09-28 01:34:33","host":"us-039*","referer":"https://wp.yat-net.com/?p=7742","linkMd5ListStr":"1490f29ebb24f2feacebdc37fc463398","githubUser":"myreaderx4","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"4.7 KB","destSize":"4 KB","compressRate":"85.4%"}],"successGithubMap":{"myreaderx7":1,"myreaderx15":1,"myreaderx4":1,"myreaderx11":1,"myreaderx19":1},"failGithubMap":{}}
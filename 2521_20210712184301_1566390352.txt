{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2021-07-13 02:40:50","updatedTime":"2021-07-13 02:40:50","title":"ELK 处理 Spring Boot 日志，妙！","link":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+ELK%20%E5%A4%84%E7%90%86%20Spring%20Boot%20%E6%97%A5%E5%BF%97%EF%BC%8C%E5%A6%99%EF%BC%81","description":"<div><div><div id=\"media\" class=\"rich_media_thumb_wrp\">\n\n            <img class=\"rich_media_thumb\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhnm2SOfeJsndLn82ibVIKSoibhKskalzj5iaX8evmUncMwtQBkLTjVUApg/0?wx_fmt=jpeg?imageView2/1/w/600\">\n        </div>\n    \n\n    \n\n    <div class=\"rich_media_content\" id=\"js_content\">\n                    \n\n                    \n                    \n                    \n                    <section data-mpa-template=\"t\" mpa-paragraph-type=\"ignored\" style=\"letter-spacing: 0.544px;background-color: rgb(255, 255, 255);\" data-mpa-powered-by=\"yiban.io\"><p style=\"color: rgb(0, 0, 0);font-size: 16px;text-align: center;\"><span style=\"text-align: center;font-size: 14px;letter-spacing: 0.544px;max-width: 100%;color: rgb(255, 41, 65);line-height: 22.4px;\">（给</span><span style=\"text-align: center;font-size: 14px;letter-spacing: 0.544px;max-width: 100%;line-height: 22.4px;color: rgb(0, 128, 255);\">ImportNew</span><span style=\"text-align: center;font-size: 14px;letter-spacing: 0.544px;max-width: 100%;color: rgb(255, 41, 65);line-height: 22.4px;\">加星标，提高Java技能）</span></p><p style=\"color: rgb(0, 0, 0);font-size: 16px;text-align: center;\"><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left><br></span></p><section style=\"color: rgb(0, 0, 0);font-size: 16px;text-align: justify;margin-left: 16px;margin-right: 16px;\"><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left>在排查线上异常的过程中，查询日志总是必不可缺的一部分。</span><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left>现今大多采用的微服务架构，日志被分散在不同的机器上，使得日志的查询变得异常困难。</span><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left>工欲善其事，必先利其器。</span><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left>如果此时有一个统一的实时日志分析平台，那可谓是雪中送碳，必定能够提高我们排查线上问题的效率。</span><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left>本文带您了解一下开源的实时日志分析平台 ELK 的搭建及使用。</span></section><p style=\"color: rgb(0, 0, 0);font-size: 16px;text-align: justify;\"><br></p><p style=\"color: rgb(0, 0, 0);font-size: 16px;text-align: justify;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);\"><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left><strong style=\"color: rgb(171, 25, 66);white-space: normal;\"><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left>   ELK 简介</span></strong></span></p></section><section data-tool=\"mdnice编辑器\" data-website=\"https://www.mdnice.com\" style=\"color: black;line-height: 1.6;letter-spacing: 0px;word-break: break-word;text-align: left;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">ELK 是一个开源的实时日志分析平台，它主要由 Elasticsearch、Logstash 和 Kiabana 三部分组成。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\"><strong style=\"letter-spacing: 0px;color: rgb(171, 25, 66);\"><span style=\"letter-spacing: 0px;font-size: 15px;\">Logstash</span></strong></p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">Logstash 主要用于收集服务器日志，它是一个开源数据收集引擎，具有实时管道功能。Logstash 可以动态地将来自不同数据源的数据统一起来，并将数据标准化到您所选择的目的地。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">Logstash 收集数据的过程主要分为以下三个部分：</p><ul data-tool=\"mdnice编辑器\" style=\"margin-top: 8px;margin-bottom: 8px;padding-left: 25px;list-style-type: square;\" class=\"list-paddingleft-2\"><li><section style=\"margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);\">输入：数据（包含但不限于日志）往往都是以不同的形式、格式存储在不同的系统中，而 Logstash 支持从多种数据源中收集数据（File、Syslog、MySQL、消息中间件等等）。</section></li><li><section style=\"margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);\">过滤器：实时解析和转换数据，识别已命名的字段以构建结构，并将它们转换成通用格式。</section></li><li><section style=\"margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);\">输出：Elasticsearch 并非存储的唯一选择，Logstash 提供很多输出选择。</section></li></ul><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;\"><span style=\"display: none;\"></span><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left><strong style=\"color: rgb(171, 25, 66);white-space: normal;\"><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left>Elasticsearch</span></strong></span><span style=\"display: none;\"></span></h3><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">Elasticsearch （ES）是一个分布式的 Restful 风格的搜索和数据分析引擎，它具有以下特点：</p><ul data-tool=\"mdnice编辑器\" style=\"margin-top: 8px;margin-bottom: 8px;padding-left: 25px;list-style-type: square;\" class=\"list-paddingleft-2\"><li><section style=\"margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);\">查询：允许执行和合并多种类型的搜索 — 结构化、非结构化、地理位置、度量指标 — 搜索方式随心而变。</section></li><li><section style=\"margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);\">分析：Elasticsearch 聚合让您能够从大处着眼，探索数据的趋势和模式。</section></li><li><section style=\"margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);\">速度：很快，可以做到亿万级的数据，毫秒级返回。</section></li><li><section style=\"margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);\">可扩展性：可以在笔记本电脑上运行，也可以在承载了 PB 级数据的成百上千台服务器上运行。</section></li><li><section style=\"margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);\">弹性：运行在一个分布式的环境中，从设计之初就考虑到了这一点。</section></li><li><section style=\"margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);\">灵活性：具备多个案例场景。支持数字、文本、地理位置、结构化、非结构化，所有的数据类型都欢迎。</section></li></ul><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;\"><span style=\"display: none;\"></span><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left><strong style=\"color: rgb(171, 25, 66);white-space: normal;\"><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left>Kibana</span></strong></span><span style=\"display: none;\"></span></h3><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">Kibana 可以使海量数据通俗易懂。它很简单，基于浏览器的界面便于您快速创建和分享动态数据仪表板来追踪 Elasticsearch 的实时数据变化。其搭建过程也十分简单，您可以分分钟完成 Kibana 的安装并开始探索 Elasticsearch 的索引数据 — 没有代码、不需要额外的基础设施。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">对于以上三个组件在 《ELK 协议栈介绍及体系结构》 一文中有具体介绍，这里不再赘述。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">在 ELK 中，三大组件的大概工作流程如下图所示，由 Logstash 从各个服务中采集日志并存放至 Elasticsearch 中，然后再由 Kiabana 从 Elasticsearch 中查询日志并展示给终端用户。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\"><strong>图 1. ELK 的大致工作流程</strong></p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;\"><img data-croporisrc=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfe7Utuichic20AIBTr7fhR2JHw8LJh6BY1aibO8L9sCDbR5hGDv3Bw5M5BJNfMxLovFibTw6a5Ficf01Eg/640?wx_fmt=png\" data-cropx1=\"0\" data-cropx2=\"1080\" data-cropy1=\"0\" data-cropy2=\"427.7419354838709\" data-ratio=\"0.3962962962962963\" data-type=\"jpeg\" data-w=\"1080\" style=\"display: block; margin-right: auto; margin-left: auto; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; border-radius: 4px; margin-top: 10px; height: 221px; width: 558px; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWh0Myx6keSINrNJe0474RnAICoSiaFpPTRl36icsJibHSYVjOpDXNY5hqyg/640?wx_fmt=jpeg\"><figcaption style=\"margin-top: 5px;text-align: center;color: #888;font-size: 12px;\">图片</figcaption></figure><h2 data-tool=\"mdnice编辑器\" style=\"font-size: 22px;text-align: center;font-weight: bold;line-height: 1.1em;padding-top: 12px;padding-bottom: 12px;margin: 70px 30px 30px;border-width: 1px;border-style: solid;border-color: rgb(0, 0, 0);\"><span style=\"float: left;display: block;width: 90%;border-top: 1px solid #000;height: 1px;line-height: 1px;margin-left: -5px;margin-top: -17px;\"> </span><span style=\"display: block;width: 3px;margin-left: 5%;height: 3px;line-height: 3px;overflow: hidden;background-color: rgb(0, 0, 0);box-shadow: rgb(0, 0, 0) 3px 0px, rgb(0, 0, 0) 0px 3px, rgb(0, 0, 0) -3px 0px, rgb(0, 0, 0) 0px -3px;\"></span><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left><strong style=\"color: rgb(171, 25, 66);white-space: normal;\"><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left>ELK 实现方案</span></strong></span><span style=\"display: block;width: 3px;margin-left: 95%;height: 3px;line-height: 3px;overflow: hidden;background-color: rgb(0, 0, 0);box-shadow: rgb(0, 0, 0) 3px 0px, rgb(0, 0, 0) 0px 3px, rgb(0, 0, 0) -3px 0px, rgb(0, 0, 0) 0px -3px;\"></span><span style=\"float: right;display: block;width: 90%;border-bottom: 1px solid #000;height: 1px;line-height: 1px;margin-right: -5px;margin-top: 16px;\"> </span></h2><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">通常情况下我们的服务都部署在不同的服务器上，那么如何从多台服务器上收集日志信息就是一个关键点了。本篇文章中提供的解决方案如下图所示：</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">图 2. 本文提供的 ELK 实现方案</p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;\"><img data-croporisrc=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfe7Utuichic20AIBTr7fhR2JHyyoEt4V36xpNWBiccbbSc8MxZsLBkpqFYLcLKrmDOEYzN9gxUsPDSfw/640?wx_fmt=png\" data-cropx1=\"0\" data-cropx2=\"1080\" data-cropy1=\"0\" data-cropy2=\"462.58064516129036\" data-ratio=\"0.42777777777777776\" data-type=\"jpeg\" data-w=\"1080\" style=\"display: block; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; border-radius: 4px; inset: auto; height: 239px; width: 558px; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhFCOEhcYGpu3DmvibJGnsSakm3MF0TNdOjeWtOvYhIUeajAQWyibd58gA/640?wx_fmt=jpeg\"><figcaption style=\"margin-top: 5px;text-align: center;color: #888;font-size: 12px;\">图片</figcaption></figure><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">如上图所示，整个 ELK 的运行流程如下：</p><ol data-tool=\"mdnice编辑器\" style=\"margin-top: 8px;margin-bottom: 8px;padding-left: 25px;\" class=\"list-paddingleft-2\"><li><section style=\"margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);\">在微服务（产生日志的服务）上部署一个 Logstash，作为 Shipper 角色，主要负责对所在机器上的服务产生的日志文件进行数据采集，并将消息推送到 Redis 消息队列。</section></li><li><section style=\"margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);\">另用一台服务器部署一个 Indexer 角色的 Logstash，主要负责从 Redis 消息队列中读取数据，并在 Logstash 管道中经过 Filter 的解析和处理后输出到 Elasticsearch 集群中存储。</section></li><li><section style=\"margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);\">Elasticsearch 主副节点之间数据同步。</section></li><li><section style=\"margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);\">单独一台服务器部署 Kibana 读取 Elasticsearch 中的日志数据并展示在 Web 页面。</section></li></ol><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">通过这张图，相信您已经大致清楚了我们将要搭建的 ELK 平台的工作流程，以及所需组件。下面就让我们一起开始搭建起来吧。</p><p data-tool=\"mdnice编辑器\" style=\"color: rgb(0, 0, 0);font-size: 16px;text-align: justify;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);\"><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left><strong style=\"color: rgb(171, 25, 66);white-space: normal;\"><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left>ELK 平台搭建</span></strong></span></p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\"><span style=\"background-color: rgb(0, 0, 0);font-size: 22px;font-weight: bold;text-align: center;letter-spacing: 0px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\"><span style=\"background-color: rgb(0, 0, 0);font-size: 22px;font-weight: bold;text-align: center;letter-spacing: 0px;\"></span><span style=\"font-weight: bold;letter-spacing: 0px;\">本节主要介绍搭建 ELK 日志平台，包括安装 Indexer 角色的 Logstash，Elasticsearc</span><span style=\"font-weight: bold;letter-spacing: 0px;\">h 以及 Kibana 三个组件。</span><span style=\"font-weight: bold;letter-spacing: 0px;\">完成本小节，您需要做如下准备：</span></p><ol data-tool=\"mdnice编辑器\" style=\"margin-top: 8px;margin-bottom: 8px;padding-left: 25px;\" class=\"list-paddingleft-2\"><li><section style=\"margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);\">一台 Ubuntu 机器或虚拟机，作为入门教程，此处省略了 Elasticsearch 集群的搭建，且将 Logstash(Indexer)、Elasticsearch 以及 Kibana 安装在同一机器上。</section></li><li><section style=\"margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);\">在 Ubuntu 上安装 JDK，注意 Logstash 要求 JDK 在 1.7 版本以上。</section></li><li><section style=\"margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);\">Logstash、Elasticsearch、Kibana 安装包，您可以在 此页面 下载。</section></li></ol><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;\"><span style=\"display: none;\"></span><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left><strong style=\"color: rgb(171, 25, 66);white-space: normal;\"><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left>安装 Logstash</span></strong></span><span style=\"display: none;\"></span></h3><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">解压压缩包：</p><pre data-tool=\"mdnice编辑器\" style=\"box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px;border-radius: 4px;margin-top: 10px;margin-right: auto;margin-left: auto;\"><span style=\"display: block;background: url(\" https: no-repeat rgb></span><code style=\"overflow-x: auto;padding: 16px;color: #DCDCDC;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #1E1E1E;border-radius: 5px;\">tar -xzvf logstash-<span style=\"color: #B8D7A3;line-height: 26px;\">7.3</span><span style=\"color: #B8D7A3;line-height: 26px;\">.0</span>.tar.gz<br></code></pre><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">显示更多简单用例测试，进入到解压目录，并启动一个将控制台输入输出到控制台的管道。</p><pre data-tool=\"mdnice编辑器\" style=\"box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px;border-radius: 4px;margin-top: 10px;margin-right: auto;margin-left: auto;\"><span style=\"display: block;background: url(\" https: no-repeat rgb></span><code style=\"overflow-x: auto;padding: 16px;color: #DCDCDC;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #1E1E1E;border-radius: 5px;\">cd logstash-<span style=\"color: #B8D7A3;line-height: 26px;\">7.3</span><span style=\"color: #B8D7A3;line-height: 26px;\">.0</span><br>elk<span style=\"color: #9B9B9B;line-height: 26px;\">@elk</span>:~/elk/logstash-<span style=\"color: #B8D7A3;line-height: 26px;\">7.3</span><span style=\"color: #B8D7A3;line-height: 26px;\">.0</span>$ bin/logstash -e <span style=\"color: #D69D85;line-height: 26px;\">'input { stdin {} } output { { stdout {} } }'</span><br></code></pre><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">显示更多看到如下日志就意味着 Logstash 启动成功。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">图 3. Logstash 启动成功日志</p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;\"><img data-croporisrc=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfe7Utuichic20AIBTr7fhR2JHbnPJd9ib3uHrLiaaGbkVwRaaJiaY7aT456q3YRU81qo2mwmOiaF9Blc17A/640?wx_fmt=png\" data-cropx1=\"0\" data-cropx2=\"1024\" data-cropy1=\"0\" data-cropy2=\"651.4695340501792\" data-ratio=\"0.6357421875\" data-type=\"jpeg\" data-w=\"1024\" style=\"display: block; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; border-radius: 4px; inset: auto; height: 355px; width: 558px; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhz3YTZ5PAum8CVVJrZIvnibWu8V0XRS2F2Wdg3j2bW8xm7mtW2xNDoXA/640?wx_fmt=jpeg\"><figcaption style=\"margin-top: 5px;text-align: center;color: #888;font-size: 12px;\">图片</figcaption></figure><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">在控制台输入 Hello Logstash ，看到如下效果代表 Logstash 安装成功。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">清单 1. 验证 Logstash 是否启动成功Hello Logstash</p><pre data-tool=\"mdnice编辑器\" style=\"box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px;border-radius: 4px;margin-top: 10px;margin-right: auto;margin-left: auto;\"><span style=\"display: block;background: url(\" https: no-repeat rgb></span><code style=\"overflow-x: auto;padding: 16px;color: #DCDCDC;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #1E1E1E;border-radius: 5px;\">{<br>    <span style=\"color: #9CDCFE;line-height: 26px;\">\"@timestamp\"</span> =&gt; 2019-08-10T16:<span style=\"color: #B8D7A3;line-height: 26px;\">11</span>:<span style=\"color: #B8D7A3;line-height: 26px;\">10.040</span>Z,<br>          <span style=\"color: #9CDCFE;line-height: 26px;\">\"host\"</span> =&gt; <span style=\"color: #9CDCFE;line-height: 26px;\">\"elk\"</span>,<br>      <span style=\"color: #9CDCFE;line-height: 26px;\">\"@version\"</span> =&gt; <span style=\"color: #9CDCFE;line-height: 26px;\">\"1\"</span>,<br>       <span style=\"color: #9CDCFE;line-height: 26px;\">\"message\"</span> =&gt; <span style=\"color: #9CDCFE;line-height: 26px;\">\"Hello Logstash\"</span><br>}<br></code></pre><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;\"><span style=\"display: none;\"></span><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left><strong style=\"color: rgb(171, 25, 66);white-space: normal;\"><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left>安装 Elasticsearch</span></strong></span><span style=\"display: none;\"></span></h3><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">解压安装包：</p><pre data-tool=\"mdnice编辑器\" style=\"box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px;border-radius: 4px;margin-top: 10px;margin-right: auto;margin-left: auto;\"><span style=\"display: block;background: url(\" https: no-repeat rgb></span><code style=\"overflow-x: auto;padding: 16px;color: #DCDCDC;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #1E1E1E;border-radius: 5px;\">tar -xzvf elasticsearch-<span style=\"color: #B8D7A3;line-height: 26px;\">7.3</span><span style=\"color: #B8D7A3;line-height: 26px;\">.0</span>-linux-x86_64.tar.gz<br></code></pre><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">启动 Elasticsearch：</p><pre data-tool=\"mdnice编辑器\" style=\"box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px;border-radius: 4px;margin-top: 10px;margin-right: auto;margin-left: auto;\"><span style=\"display: block;background: url(\" https: no-repeat rgb></span><code style=\"overflow-x: auto;padding: 16px;color: #DCDCDC;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #1E1E1E;border-radius: 5px;\">cd elasticsearch-<span style=\"color: #B8D7A3;line-height: 26px;\">7.3</span><span style=\"color: #B8D7A3;line-height: 26px;\">.0</span>/<br>bin/elasticsearch<br></code></pre><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">在启动 Elasticsearch 的过程中我遇到了两个问题在这里列举一下，方便大家排查。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">问题一 ：内存过小，如果您的机器内存小于 Elasticsearch 设置的值，就会报下图所示的错误。解决方案是，修改 elasticsearch-7.3.0/config/jvm.options 文件中的如下配置为适合自己机器的内存大小，若修改后还是报这个错误，可重新连接服务器再试一次。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">图 4. 内存过小导致 Elasticsearch 启动报错</p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;\"><img data-croporisrc=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfe7Utuichic20AIBTr7fhR2JHT0Zjl7LibX2oxXkwh5ibPrzibeg8u5QbtCKKibCWOhGVzcvMljn30ACFyg/640?wx_fmt=png\" data-cropx1=\"0\" data-cropx2=\"1024\" data-cropy1=\"0\" data-cropy2=\"420.2437275985663\" data-ratio=\"0.4091796875\" data-type=\"jpeg\" data-w=\"1024\" style=\"display: block; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; border-radius: 4px; inset: auto; height: 229px; width: 558px; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhicEFd6szDibPsMibA2b1ic05TGwmdQKDzFL0D5LicAQzQEAp59PibfqVLkEQ/640?wx_fmt=jpeg\"><figcaption style=\"margin-top: 5px;text-align: center;color: #888;font-size: 12px;\">图片</figcaption></figure><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">问题二 ，如果您是以 root 用户启动的话，就会报下图所示的错误。解决方案自然就是添加一个新用户启动 Elasticsearch，至于添加新用户的方法网上有很多，这里就不再赘述。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">图 5. Root 用户启动 Elasticsearch 报错</p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;\"><img data-croporisrc=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfe7Utuichic20AIBTr7fhR2JHLuVxvzKjWicXksuObSyjto6P3fD8Hla9j7icqSibE6SibH5yoo2icC2RofQ/640?wx_fmt=png\" data-cropx1=\"0\" data-cropx2=\"1080\" data-cropy1=\"0\" data-cropy2=\"514.8387096774193\" data-ratio=\"0.4759259259259259\" data-type=\"jpeg\" data-w=\"1080\" style=\"display: block; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; border-radius: 4px; inset: auto; height: 266px; width: 558px; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhftsLxW42UUMKk781IP7GLzNd6N5dvcEMNmT9O8DCO2ibG8mrY3aoJEw/640?wx_fmt=jpeg\"><figcaption style=\"margin-top: 5px;text-align: center;color: #888;font-size: 12px;\">图片</figcaption></figure><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">启动成功后，另起一个会话窗口执行 curl http://localhost:9200 命令，如果出现如下结果，则代表 Elasticsearch 安装成功。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">清单 2. 检查 Elasticsearch 是否启动成功</p><pre data-tool=\"mdnice编辑器\" style=\"box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px;border-radius: 4px;margin-top: 10px;margin-right: auto;margin-left: auto;\"><span style=\"display: block;background: url(\" https: no-repeat rgb></span><code style=\"overflow-x: auto;padding: 16px;color: #DCDCDC;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #1E1E1E;border-radius: 5px;\">elk@elk:~$ curl http:<span style=\"color: #57A64A;font-style: italic;line-height: 26px;\">//localhost:9200</span><br>{<br>  <span style=\"color: #9CDCFE;line-height: 26px;\">\"name\"</span> : <span style=\"color: #D69D85;line-height: 26px;\">\"elk\"</span>,<br>  <span style=\"color: #9CDCFE;line-height: 26px;\">\"cluster_name\"</span> : <span style=\"color: #D69D85;line-height: 26px;\">\"elasticsearch\"</span>,<br>  <span style=\"color: #9CDCFE;line-height: 26px;\">\"cluster_uuid\"</span> : <span style=\"color: #D69D85;line-height: 26px;\">\"hqp4Aad0T2Gcd4QyiHASmA\"</span>,<br>  <span style=\"color: #9CDCFE;line-height: 26px;\">\"version\"</span> : {<br>    <span style=\"color: #9CDCFE;line-height: 26px;\">\"number\"</span> : <span style=\"color: #D69D85;line-height: 26px;\">\"7.3.0\"</span>,<br>    <span style=\"color: #9CDCFE;line-height: 26px;\">\"build_flavor\"</span> : <span style=\"color: #D69D85;line-height: 26px;\">\"default\"</span>,<br>    <span style=\"color: #9CDCFE;line-height: 26px;\">\"build_type\"</span> : <span style=\"color: #D69D85;line-height: 26px;\">\"tar\"</span>,<br>    <span style=\"color: #9CDCFE;line-height: 26px;\">\"build_hash\"</span> : <span style=\"color: #D69D85;line-height: 26px;\">\"de777fa\"</span>,<br>    <span style=\"color: #9CDCFE;line-height: 26px;\">\"build_date\"</span> : <span style=\"color: #D69D85;line-height: 26px;\">\"2019-07-24T18:30:11.767338Z\"</span>,<br>    <span style=\"color: #9CDCFE;line-height: 26px;\">\"build_snapshot\"</span> : <span style=\"color: #569CD6;line-height: 26px;\">false</span>,<br>    <span style=\"color: #9CDCFE;line-height: 26px;\">\"lucene_version\"</span> : <span style=\"color: #D69D85;line-height: 26px;\">\"8.1.0\"</span>,<br>    <span style=\"color: #9CDCFE;line-height: 26px;\">\"minimum_wire_compatibility_version\"</span> : <span style=\"color: #D69D85;line-height: 26px;\">\"6.8.0\"</span>,<br>    <span style=\"color: #9CDCFE;line-height: 26px;\">\"minimum_index_compatibility_version\"</span> : <span style=\"color: #D69D85;line-height: 26px;\">\"6.0.0-beta1\"</span><br>  },<br>  <span style=\"color: #9CDCFE;line-height: 26px;\">\"tagline\"</span> : <span style=\"color: #D69D85;line-height: 26px;\">\"You Know, for Search\"</span><br>}<br></code></pre><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;\"><span style=\"display: none;\"></span><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left><strong style=\"color: rgb(171, 25, 66);white-space: normal;\"><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left>安装 Kibana</span></strong></span><span style=\"display: none;\"></span></h3><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">解压安装包：</p><pre data-tool=\"mdnice编辑器\" style=\"box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px;border-radius: 4px;margin-top: 10px;margin-right: auto;margin-left: auto;\"><span style=\"display: block;background: url(\" https: no-repeat rgb></span><code style=\"overflow-x: auto;padding: 16px;color: #DCDCDC;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #1E1E1E;border-radius: 5px;\">tar -xzvf kibana-<span style=\"color: #B8D7A3;line-height: 26px;\">7.3</span><span style=\"color: #B8D7A3;line-height: 26px;\">.0</span>-linux-x86_64.tar.gz<br></code></pre><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">修改配置文件 config/kibana.yml ，主要指定 Elasticsearch 的信息。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">清单 3. Kibana 配置信息#Elasticsearch主机地址</p><pre data-tool=\"mdnice编辑器\" style=\"box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px;border-radius: 4px;margin-top: 10px;margin-right: auto;margin-left: auto;\"><span style=\"display: block;background: url(\" https: no-repeat rgb></span><code style=\"overflow-x: auto;padding: 16px;color: #DCDCDC;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #1E1E1E;border-radius: 5px;\">elasticsearch.hosts: <span style=\"color: #D69D85;line-height: 26px;\">\"http://ip:9200\"</span><br># 允许远程访问<br>server.host: <span style=\"color: #D69D85;line-height: 26px;\">\"0.0.0.0\"</span><br># Elasticsearch用户名 这里其实就是我在服务器启动Elasticsearch的用户名<br>elasticsearch.username: <span style=\"color: #D69D85;line-height: 26px;\">\"es\"</span><br># Elasticsearch鉴权密码 这里其实就是我在服务器启动Elasticsearch的密码<br>elasticsearch.password: <span style=\"color: #D69D85;line-height: 26px;\">\"es\"</span><br></code></pre><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">启动 Kibana：</p><pre data-tool=\"mdnice编辑器\" style=\"box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px;border-radius: 4px;margin-top: 10px;margin-right: auto;margin-left: auto;\"><span style=\"display: block;background: url(\" https: no-repeat rgb></span><code style=\"overflow-x: auto;padding: 16px;color: #DCDCDC;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #1E1E1E;border-radius: 5px;\">cd kibana-<span style=\"color: #B8D7A3;line-height: 26px;\">7.3</span><span style=\"color: #B8D7A3;line-height: 26px;\">.0</span>-linux-x86_64/bin<br>./kibana<br></code></pre><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">在浏览器中访问 http://ip:5601 ，若出现以下界面，则表示 Kibana 安装成功。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">图 6. Kibana 启动成功界面</p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;\"><img data-croporisrc=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfe7Utuichic20AIBTr7fhR2JHUlLAIjryG6T9icFTdRGjgRCoXrzTWD1Zaia8fSMkyradO0Aibic2tFJiaXg/640?wx_fmt=png\" data-cropx1=\"0\" data-cropx2=\"926\" data-cropy1=\"0\" data-cropy2=\"565.8888888888889\" data-ratio=\"0.6101511879049676\" data-type=\"jpeg\" data-w=\"926\" style=\"display: block; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; border-radius: 4px; inset: auto; height: 341px; width: 558px; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWh7aLsichL4lUUWj7fvveGTwdGxH8GLgNATfK4FW1t3ibAarV3hYxmDNCw/640?wx_fmt=jpeg\"><figcaption style=\"margin-top: 5px;text-align: center;color: #888;font-size: 12px;\">图片</figcaption></figure><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">ELK 日志平台安装完成后，下面我们就将通过具体的例子来看下如何使用 ELK，下文将分别介绍如何将 Spring Boot 日志和 Nginx 日志交由 ELK 分析。</p><h2 data-tool=\"mdnice编辑器\" style=\"font-size: 22px;text-align: center;font-weight: bold;line-height: 1.1em;padding-top: 12px;padding-bottom: 12px;margin: 70px 30px 30px;border-width: 1px;border-style: solid;border-color: rgb(0, 0, 0);\"><span style=\"float: left;display: block;width: 90%;border-top: 1px solid #000;height: 1px;line-height: 1px;margin-left: -5px;margin-top: -17px;\"> </span><span style=\"display: block;width: 3px;margin-left: 5%;height: 3px;line-height: 3px;overflow: hidden;background-color: rgb(0, 0, 0);box-shadow: rgb(0, 0, 0) 3px 0px, rgb(0, 0, 0) 0px 3px, rgb(0, 0, 0) -3px 0px, rgb(0, 0, 0) 0px -3px;\"></span><span style=\"color: rgb(0, 0, 0);font-size: 16px;text-align: justify;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);\"><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left><strong style=\"color: rgb(171, 25, 66);white-space: normal;\"><span style=\"color: rgb(0, 0, 0);font-size: 16px;text-align: justify;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);\">在 Spring Boot 中使用 ELK</span></strong></span></span><span style=\"display: block;width: 3px;margin-left: 95%;height: 3px;line-height: 3px;overflow: hidden;background-color: rgb(0, 0, 0);box-shadow: rgb(0, 0, 0) 3px 0px, rgb(0, 0, 0) 0px 3px, rgb(0, 0, 0) -3px 0px, rgb(0, 0, 0) 0px -3px;\"></span><span style=\"float: right;display: block;width: 90%;border-bottom: 1px solid #000;height: 1px;line-height: 1px;margin-right: -5px;margin-top: 16px;\"> </span></h2><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">首先我们需要创建一个 Spring Boot 的项目，之前我写过一篇文章介绍 如何使用 AOP 来统一处理 Spring Boot 的 Web 日志 ，本文的 Spring Boot 项目就建立在这篇文章的基础之上。</p><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;\"><span style=\"display: none;\"></span><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left><strong style=\"color: rgb(171, 25, 66);white-space: normal;\"><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left>修改并部署 Spring Boot 项目</span></strong></span><span style=\"display: none;\"></span></h3><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">在项目 resources 目录下创建 spring-logback.xml 配置文件。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">清单 4. Spring Boot 项目 Logback 的配置</p><pre data-tool=\"mdnice编辑器\" style=\"box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px;border-radius: 4px;margin-top: 10px;margin-right: auto;margin-left: auto;\"><span style=\"display: block;background: url(\" https: no-repeat rgb></span><code style=\"overflow-x: auto;padding: 16px;color: #DCDCDC;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #1E1E1E;border-radius: 5px;\"><span style=\"color: #9B9B9B;line-height: 26px;\"><?xml  version=\"1.0\" encoding=\"UTF-8\"?></span><br><span style=\"color: #9B9B9B;line-height: 26px;\">&lt;<span style=\"color: #569CD6;line-height: 26px;\">configuration</span> <span style=\"color: #9CDCFE;line-height: 26px;\">debug</span>=<span style=\"color: #D69D85;line-height: 26px;\">\"false\"</span>&gt;</span><br>    <span style=\"color: #9B9B9B;line-height: 26px;\">&lt;<span style=\"color: #569CD6;line-height: 26px;\">contextName</span>&gt;</span>Logback For demo Mobile<span style=\"color: #9B9B9B;line-height: 26px;\"><span style=\"color: #569CD6;line-height: 26px;\">contextName</span>&gt;</span><br>    <span style=\"color: #9B9B9B;line-height: 26px;\">&lt;<span style=\"color: #569CD6;line-height: 26px;\">property</span> <span style=\"color: #9CDCFE;line-height: 26px;\">name</span>=<span style=\"color: #D69D85;line-height: 26px;\">\"LOG_HOME\"</span> <span style=\"color: #9CDCFE;line-height: 26px;\">value</span>=<span style=\"color: #D69D85;line-height: 26px;\">\"/log\"</span> /&gt;</span><br>    <span style=\"color: #9B9B9B;line-height: 26px;\">&lt;<span style=\"color: #569CD6;line-height: 26px;\">springProperty</span> <span style=\"color: #9CDCFE;line-height: 26px;\">scope</span>=<span style=\"color: #D69D85;line-height: 26px;\">\"context\"</span> <span style=\"color: #9CDCFE;line-height: 26px;\">name</span>=<span style=\"color: #D69D85;line-height: 26px;\">\"appName\"</span> <span style=\"color: #9CDCFE;line-height: 26px;\">source</span>=<span style=\"color: #D69D85;line-height: 26px;\">\"spring.application.name\"</span><br>                    <span style=\"color: #9CDCFE;line-height: 26px;\">defaultValue</span>=<span style=\"color: #D69D85;line-height: 26px;\">\"localhost\"</span> /&gt;</span><br>    ...<br><br>    <span style=\"color: #9B9B9B;line-height: 26px;\">&lt;<span style=\"color: #569CD6;line-height: 26px;\">appender</span> <span style=\"color: #9CDCFE;line-height: 26px;\">name</span>=<span style=\"color: #D69D85;line-height: 26px;\">\"ROLLING_FILE\"</span> <span style=\"color: #9CDCFE;line-height: 26px;\">class</span>=<span style=\"color: #D69D85;line-height: 26px;\">\"ch.qos.logback.core.rolling.RollingFileAppender\"</span>&gt;</span><br>        ...<br>        <span style=\"color: #9B9B9B;line-height: 26px;\">&lt;<span style=\"color: #569CD6;line-height: 26px;\">encoder</span> <span style=\"color: #9CDCFE;line-height: 26px;\">class</span>=<span style=\"color: #D69D85;line-height: 26px;\">\"ch.qos.logback.classic.encoder.PatternLayoutEncoder\"</span>&gt;</span><br>            <span style=\"color: #9B9B9B;line-height: 26px;\">&lt;<span style=\"color: #569CD6;line-height: 26px;\">pattern</span>&gt;</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{25} ${appName} -%msg%n<span style=\"color: #9B9B9B;line-height: 26px;\"><span style=\"color: #569CD6;line-height: 26px;\">pattern</span>&gt;</span><br>        <span style=\"color: #9B9B9B;line-height: 26px;\"><span style=\"color: #569CD6;line-height: 26px;\">encoder</span>&gt;</span><br>        ...<br>    <span style=\"color: #9B9B9B;line-height: 26px;\"><span style=\"color: #569CD6;line-height: 26px;\">appender</span>&gt;</span><br>    ...<br><span style=\"color: #9B9B9B;line-height: 26px;\"><span style=\"color: #569CD6;line-height: 26px;\">configuration</span>&gt;</span><br></code></pre><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">以上内容省略了很多内容，您可以在源码中获取。在上面的配置中我们定义了一个名为 ROLLING_FILE 的 Appender 往日志文件中输出指定格式的日志。而上面的 pattern 标签正是具体日志格式的配置，通过上面的配置，我们指定输出了时间、线程、日志级别、logger（通常为日志打印所在类的全路径）以及服务名称等信息。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">将项目打包，并部署到一台 Ubuntu 服务器上。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">清单 5. 打包并部署 Spring Boot 项目</p><pre data-tool=\"mdnice编辑器\" style=\"box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px;border-radius: 4px;margin-top: 10px;margin-right: auto;margin-left: auto;\"><span style=\"display: block;background: url(\" https: no-repeat rgb></span><code style=\"overflow-x: auto;padding: 16px;color: #DCDCDC;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #1E1E1E;border-radius: 5px;\"><span style=\"color: #57A64A;font-style: italic;line-height: 26px;\"># 打包命令</span><br>mvn package -Dmaven.test.skip=<span style=\"color: #569CD6;line-height: 26px;\">true</span><br><span style=\"color: #57A64A;font-style: italic;line-height: 26px;\"># 部署命令</span><br>java -jar sb-elk-start-0.0.1-SNAPSHOT.jar<br></code></pre><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">查看日志文件， logback 配置文件中我将日志存放在 /log/sb-log.log 文件中，执行 more /log/sb-log.log 命令，出现以下结果表示部署成功。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">图 7. Spring Boot 日志文件</p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;\"><img data-croporisrc=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfe7Utuichic20AIBTr7fhR2JHM3Eo1MqTjicDOpO3gpZPlHvaRRamPAaKJ2Es1z304kBcBkWd4TwSIzA/640?wx_fmt=png\" data-cropx1=\"0\" data-cropx2=\"900\" data-cropy1=\"0\" data-cropy2=\"858.0645161290323\" data-ratio=\"0.9533333333333334\" data-type=\"jpeg\" data-w=\"900\" style=\"display: block; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; border-radius: 4px; inset: auto; height: 532px; width: 558px; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhYmbbL1zopt8rWia7Arv9MSwPoL79SLdv01mUn8Cibs4Qw2JlR5IxvNtA/640?wx_fmt=jpeg\"><figcaption style=\"margin-top: 5px;text-align: center;color: #888;font-size: 12px;\">图片</figcaption></figure><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;\"><span style=\"display: none;\"></span><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left><strong style=\"color: rgb(171, 25, 66);white-space: normal;\"><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left>配置 Shipper 角色 Logstash</span></strong></span><span style=\"display: none;\"></span></h3><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">Spring Boot 项目部署成功之后，我们还需要在当前部署的机器上安装并配置 Shipper 角色的 Logstash。Logstash 的安装过程在 ELK 平台搭建小节中已有提到，这里不再赘述。安装完成后，我们需要编写 Logstash 的配置文件，以支持从日志文件中收集日志并输出到 Redis 消息管道中，Shipper 的配置如下所示。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">清单 6. Shipper 角色的 Logstash 的配置</p><pre data-tool=\"mdnice编辑器\" style=\"box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px;border-radius: 4px;margin-top: 10px;margin-right: auto;margin-left: auto;\"><span style=\"display: block;background: url(\" https: no-repeat rgb></span><code style=\"overflow-x: auto;padding: 16px;color: #DCDCDC;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #1E1E1E;border-radius: 5px;\">input {<br>    file {<br>        path =&gt; [<br>            # 这里填写需要监控的文件<br>            <span style=\"color: #9CDCFE;line-height: 26px;\">\"/log/sb-log.log\"</span><br>        ]<br>    }<br>}<br><br>output {<br>    # 输出到redis<br>    redis {<br>        host =&gt; <span style=\"color: #9CDCFE;line-height: 26px;\">\"10.140.45.190\"</span>   # redis主机地址<br>        port =&gt; 6379              # redis端口号<br>        db =&gt; 8                   # redis数据库编号<br>        data_type =&gt; <span style=\"color: #9CDCFE;line-height: 26px;\">\"channel\"</span>    # 使用发布/订阅模式<br>        key =&gt; <span style=\"color: #9CDCFE;line-height: 26px;\">\"logstash_list_0\"</span>  # 发布通道名称<br>    }<br>}<br></code></pre><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">其实 Logstash 的配置是与前面提到的 Logstash 管道中的三个部分（输入、过滤器、输出）一一对应的，只不过这里我们不需要过滤器所以就没有写出来。上面配置中 Input 使用的数据源是文件类型的，只需要配置上需要收集的本机日志文件路径即可。Output 描述数据如何输出，这里配置的是输出到 Redis。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">Redis 的配置 data_type 可选值有 channel 和 list 两个。channel 是 Redis 的发布/订阅通信模式，而 list 是 Redis 的队列数据结构，两者都可以用来实现系统间有序的消息异步通信。channel 相比 list 的好处是，解除了发布者和订阅者之间的耦合。举个例子，一个 Indexer 在持续读取 Redis 中的记录，现在想加入第二个 Indexer，如果使用 list ，就会出现上一条记录被第一个 Indexer 取走，而下一条记录被第二个 Indexer 取走的情况，两个 Indexer 之间产生了竞争，导致任何一方都没有读到完整的日志。channel 就可以避免这种情况。这里 Shipper 角色的配置文件和下面将要提到的 Indexer 角色的配置文件中都使用了 channel 。</p><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;\"><span style=\"display: none;\"></span><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left><strong style=\"color: rgb(171, 25, 66);white-space: normal;\"><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left>配置 Indexer 角色 Logstash</span></strong></span><span style=\"display: none;\"></span></h3><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">配置好 Shipper 角色的 Logstash 后，我们还需要配置 Indexer 角色 Logstash 以支持从 Redis 接收日志数据，并通过过滤器解析后存储到 Elasticsearch 中，其配置内容如下所示。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">清单 7. Indexer 角色的 Logstash 的配置</p><pre data-tool=\"mdnice编辑器\" style=\"box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px;border-radius: 4px;margin-top: 10px;margin-right: auto;margin-left: auto;\"><span style=\"display: block;background: url(\" https: no-repeat rgb></span><code style=\"overflow-x: auto;padding: 16px;color: #DCDCDC;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #1E1E1E;border-radius: 5px;\">input {<br>    redis {<br>        host      =&gt; <span style=\"color: #9CDCFE;line-height: 26px;\">\"192.168.142.131\"</span>    # redis主机地址<br>        port      =&gt; 6379               # redis端口号<br>        db        =&gt; 8                  # redis数据库编号<br>        data_type =&gt; <span style=\"color: #9CDCFE;line-height: 26px;\">\"channel\"</span>          # 使用发布/订阅模式<br>        key       =&gt; <span style=\"color: #9CDCFE;line-height: 26px;\">\"sb-logback\"</span>  # 发布通道名称<br>    }<br>}<br><br>filter {<br>     #定义数据的格式<br>     grok {<br>       match =&gt; { <span style=\"color: #9CDCFE;line-height: 26px;\">\"message\"</span> =&gt; <span style=\"color: #9CDCFE;line-height: 26px;\">\"%{TIMESTAMP_ISO8601:time} \\[%{NOTSPACE:threadName}\\] %{LOGLEVEL:level}  %{DATA:logger} %{NOTSPACE:applicationName} -(?:.*=%{NUMBER:timetaken}ms|)\"</span>}<br>     }<br>}<br><br>output {<br>    stdout {}<br>    elasticsearch {<br>        hosts =&gt; <span style=\"color: #9CDCFE;line-height: 26px;\">\"localhost:9200\"</span><br>        index =&gt; <span style=\"color: #9CDCFE;line-height: 26px;\">\"logback\"</span><br>   }<br>}<br></code></pre><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">与 Shipper 不同的是，Indexer 的管道中我们定义了过滤器，也正是在这里将日志解析成结构化的数据。下面是我截取的一条 logback 的日志内容：</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">清单 8. Spring Boot 项目输出的一条日志</p><pre data-tool=\"mdnice编辑器\" style=\"box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px;border-radius: 4px;margin-top: 10px;margin-right: auto;margin-left: auto;\"><span style=\"display: block;background: url(\" https: no-repeat rgb></span><code style=\"overflow-x: auto;padding: 16px;color: #DCDCDC;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #1E1E1E;border-radius: 5px;\"><span style=\"color: #B8D7A3;line-height: 26px;\">2019</span>-<span style=\"color: #B8D7A3;line-height: 26px;\">08</span>-<span style=\"color: #B8D7A3;line-height: 26px;\">11</span> <span style=\"color: #B8D7A3;line-height: 26px;\">18</span>:<span style=\"color: #B8D7A3;line-height: 26px;\">01</span>:<span style=\"color: #B8D7A3;line-height: 26px;\">31.602</span> [http-nio-<span style=\"color: #B8D7A3;line-height: 26px;\">8080</span>-exec-<span style=\"color: #B8D7A3;line-height: 26px;\">2</span>] INFO  c.i.s.aop.WebLogAspect sb-elk -接口日志<br>POST请求测试接口结束调用:耗时=<span style=\"color: #B8D7A3;line-height: 26px;\">11</span>ms,result=BaseResponse{code=<span style=\"color: #B8D7A3;line-height: 26px;\">10000</span>, message=<span style=\"color: #D69D85;line-height: 26px;\">'操作成功'</span>}<br></code></pre><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">在 Filter 中我们使用 Grok 插件从上面这条日志中解析出了时间、线程名称、Logger、服务名称以及接口耗时几个字段。Grok 又是如何工作的呢？</p><ol data-tool=\"mdnice编辑器\" style=\"margin-top: 8px;margin-bottom: 8px;padding-left: 25px;\" class=\"list-paddingleft-2\"><li><section style=\"margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);\">message 字段是 Logstash 存放收集到的数据的字段， match = {\"message\" =&gt; ...} 代表是对日志内容做处理。</section></li><li><section style=\"margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);\">Grok 实际上也是通过正则表达式来解析数据的，上面出现的 TIMESTAMP_ISO8601 、 NOTSPACE 等都是 Grok 内置的 patterns。</section></li><li><section style=\"margin-top: 5px;margin-bottom: 5px;line-height: 26px;color: rgb(1, 1, 1);\">我们编写的解析字符串可以使用 Grok Debugger 来测试是否正确，这样避免了重复在真实环境中校验解析规则的正确性。</section></li></ol><h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 20px;\"><span style=\"display: none;\"></span><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left><strong style=\"color: rgb(171, 25, 66);white-space: normal;\"><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left>查看效果</span></strong></span><span style=\"display: none;\"></span></h3><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">经过上面的步骤，我们已经完成了整个 ELK 平台的搭建以及 Spring Boot 项目的接入。下面我们按照以下步骤执行一些操作来看下效果。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">启动 Elasticsearch，启动命令在 ELK 平台搭建 小节中有提到，这里不赘述（Kibana 启动同）。启动 Indexer 角色的 Logstash。</p><pre data-tool=\"mdnice编辑器\" style=\"box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px;border-radius: 4px;margin-top: 10px;margin-right: auto;margin-left: auto;\"><span style=\"display: block;background: url(\" https: no-repeat rgb></span><code style=\"overflow-x: auto;padding: 16px;color: #DCDCDC;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #1E1E1E;border-radius: 5px;\"># 进入到 Logstash 的解压目录，然后执行下面的命令<br>bin/logstash -f indexer-logstash.conf<br></code></pre><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">启动 Kibana。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">启动 Shipper 角色的 Logstash。</p><pre data-tool=\"mdnice编辑器\" style=\"box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px;border-radius: 4px;margin-top: 10px;margin-right: auto;margin-left: auto;\"><span style=\"display: block;background: url(\" https: no-repeat rgb></span><code style=\"overflow-x: auto;padding: 16px;color: #DCDCDC;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #1E1E1E;border-radius: 5px;\"># 进入到 Logstash 的解压目录，然后执行下面的命令<br>bin/logstash -f shipper-logstash.conf<br></code></pre><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">调用 Spring Boot 接口，此时应该已经有数据写入到 ES 中了。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">在浏览器中访问 http://ip:5601 ，打开 Kibana 的 Web 界面，并且如下图所示添加 logback 索引。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">图 8. 在 Kibana 中添加 Elasticsearch 索引</p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;\"><img data-croporisrc=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfe7Utuichic20AIBTr7fhR2JHgVnEBTia49tbCSeoalsYxEmAx3rEpUt5hA5RQQic9nPY24O3VJDx2EUQ/640?wx_fmt=png\" data-cropx1=\"0\" data-cropx2=\"1080\" data-cropy1=\"0\" data-cropy2=\"340.64516129032256\" data-ratio=\"0.3148148148148148\" data-type=\"jpeg\" data-w=\"1080\" style=\"display: block; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; border-radius: 4px; inset: auto; height: 176px; width: 558px; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhgbMomzcPqn1KYGKnSJgGibvicEIlcTHFk97D5HzNicHzJQkzSvBfDYzcg/640?wx_fmt=jpeg\"><figcaption style=\"margin-top: 5px;text-align: center;color: #888;font-size: 12px;\">图片</figcaption></figure><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">进入 Discover 界面，选择 logback 索引，就可以看到日志数据了，如下图所示。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">图 9. ELK 日志查看</p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;\"><img data-croporisrc=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfe7Utuichic20AIBTr7fhR2JHYrTHgx2c37ZicsDJYnJ0XHCSpBDcELr49g9ictaVOYO20mCf2971XFDQ/640?wx_fmt=png\" data-cropx1=\"0\" data-cropx2=\"1080\" data-cropy1=\"0\" data-cropy2=\"392.9032258064516\" data-ratio=\"0.3638888888888889\" data-type=\"jpeg\" data-w=\"1080\" style=\"display: block; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; border-radius: 4px; inset: auto; height: 203px; width: 558px; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhIYyH9JBRDPdpwCvNSk53NdibEsFsPsH4kZRmlJcy9sPepoGz1mxAXdw/640?wx_fmt=jpeg\"><figcaption style=\"margin-top: 5px;text-align: center;color: #888;font-size: 12px;\">图片</figcaption></figure><h2 data-tool=\"mdnice编辑器\" style=\"font-size: 22px;text-align: center;font-weight: bold;line-height: 1.1em;padding-top: 12px;padding-bottom: 12px;margin: 70px 30px 30px;border-width: 1px;border-style: solid;border-color: rgb(0, 0, 0);\"><span style=\"float: left;display: block;width: 90%;border-top: 1px solid #000;height: 1px;line-height: 1px;margin-left: -5px;margin-top: -17px;\"> </span><span style=\"display: block;width: 3px;margin-left: 5%;height: 3px;line-height: 3px;overflow: hidden;background-color: rgb(0, 0, 0);box-shadow: rgb(0, 0, 0) 3px 0px, rgb(0, 0, 0) 0px 3px, rgb(0, 0, 0) -3px 0px, rgb(0, 0, 0) 0px -3px;\"></span><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left><strong style=\"color: rgb(171, 25, 66);white-space: normal;\"><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left>在 Nginx 中使用 ELK</span></strong></span><span style=\"display: block;width: 3px;margin-left: 95%;height: 3px;line-height: 3px;overflow: hidden;background-color: rgb(0, 0, 0);box-shadow: rgb(0, 0, 0) 3px 0px, rgb(0, 0, 0) 0px 3px, rgb(0, 0, 0) -3px 0px, rgb(0, 0, 0) 0px -3px;\"></span><span style=\"float: right;display: block;width: 90%;border-bottom: 1px solid #000;height: 1px;line-height: 1px;margin-right: -5px;margin-top: 16px;\"> </span></h2><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">相信通过上面的步骤您已经成功的搭建起了自己的 ELK 实时日志平台，并且接入了 Logback 类型的日志。但是实际场景下，几乎不可能只有一种类型的日志，下面我们就再在上面步骤的基础之上接入 Nginx 的日志。当然这一步的前提是我们需要在服务器上安装 Nginx，具体的安装过程网上有很多介绍，这里不再赘述。查看 Nginx 的日志如下（Nginx 的访问日志默认在 /var/log/nginx/access.log 文件中）。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">清单 9. Nginx 的访问日志</p><pre data-tool=\"mdnice编辑器\" style=\"box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px;border-radius: 4px;margin-top: 10px;margin-right: auto;margin-left: auto;\"><span style=\"display: block;background: url(\" https: no-repeat rgb></span><code style=\"overflow-x: auto;padding: 16px;color: #DCDCDC;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #1E1E1E;border-radius: 5px;\"><span style=\"color: #B8D7A3;line-height: 26px;\">192.168</span><span style=\"color: #B8D7A3;line-height: 26px;\">.142</span><span style=\"color: #B8D7A3;line-height: 26px;\">.1</span> - - [<span style=\"color: #B8D7A3;line-height: 26px;\">17</span>/Aug/<span style=\"color: #B8D7A3;line-height: 26px;\">2019</span>:<span style=\"color: #B8D7A3;line-height: 26px;\">21</span>:<span style=\"color: #B8D7A3;line-height: 26px;\">31</span>:<span style=\"color: #B8D7A3;line-height: 26px;\">43</span> +<span style=\"color: #B8D7A3;line-height: 26px;\">0800</span>] <span style=\"color: #D69D85;line-height: 26px;\">\"GET /weblog/get-test?name=elk HTTP/1.1\"</span><br><span style=\"color: #B8D7A3;line-height: 26px;\">200</span> <span style=\"color: #B8D7A3;line-height: 26px;\">3</span> <span style=\"color: #D69D85;line-height: 26px;\">\"http://192.168.142.131/swagger-ui.html\"</span> <span style=\"color: #D69D85;line-height: 26px;\">\"Mozilla/5.0 (Windows NT 10.0; Win64; x64)<br>AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.100 Safari/537.36\"</span><br></code></pre><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">同样，我们需要为此日志编写一个 Grok 解析规则，如下所示：</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">清单 10. 针对 Nginx 访问日志的 Grok 解析规则</p><pre data-tool=\"mdnice编辑器\" style=\"box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px;border-radius: 4px;margin-top: 10px;margin-right: auto;margin-left: auto;\"><span style=\"display: block;background: url(\" https: no-repeat rgb></span><code style=\"overflow-x: auto;padding: 16px;color: #DCDCDC;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #1E1E1E;border-radius: 5px;\">%{IPV4:ip} \\- \\- \\[%{HTTPDATE:time}\\] <span style=\"color: #D69D85;line-height: 26px;\">\"%{NOTSPACE:method} %{DATA:requestUrl}<br>HTTP/%{NUMBER:httpVersion}\"</span> %{NUMBER:httpStatus} %{NUMBER:bytes}<br><span style=\"color: #D69D85;line-height: 26px;\">\"%{DATA:referer}\"</span> <span style=\"color: #D69D85;line-height: 26px;\">\"%{DATA:agent}\"</span><br></code></pre><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">完成上面这些之后的关键点是 Indexer 类型的 Logstash 需要支持两种类型的输入、过滤器以及输出，如何支持呢？首先需要给输入指定类型，然后再根据不同的输入类型走不同的过滤器和输出，如下所示（篇幅原因，配置文件在此没有全部展示，可以 点击此处获取 ）。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">清单 11. 支持两种日志输入的 Indexer 角色的 Logstash 配置</p><pre data-tool=\"mdnice编辑器\" style=\"box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px;border-radius: 4px;margin-top: 10px;margin-right: auto;margin-left: auto;\"><span style=\"display: block;background: url(\" https: no-repeat rgb></span><code style=\"overflow-x: auto;padding: 16px;color: #DCDCDC;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #1E1E1E;border-radius: 5px;\">input {<br>    redis {<br>        type      =&gt; <span style=\"color: #9CDCFE;line-height: 26px;\">\"logback\"</span><br>        ...<br>    }<br>    redis {<br>       type       =&gt; <span style=\"color: #9CDCFE;line-height: 26px;\">\"nginx\"</span><br>       ...<br>    }<br>}<br><br>filter {<br>     if [type] == <span style=\"color: #9CDCFE;line-height: 26px;\">\"logback\"</span> {<br>         ...<br>     }<br>     if [type] == <span style=\"color: #D69D85;line-height: 26px;\">\"nginx\"</span> {<br>         ...<br>     }<br>}<br><br>output {<br>    if [type] == <span style=\"color: #9CDCFE;line-height: 26px;\">\"logback\"</span> {<br>        ...<br>    }<br>    if [type] == <span style=\"color: #D69D85;line-height: 26px;\">\"nginx\"</span> {<br>       ...<br>    }<br>}<br></code></pre><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">我的 Nginx 与 Spring Boot 项目部署在同一台机器上，所以还需修改 Shipper 类型的 Logstash 的配置以支持两种类型的日志输入和输出，其配置文件的内容可 点击这里获取 。以上配置完成后，我们按照 查看效果 章节中的步骤，启动 ELK 平台、Shipper 角色的 Logstash、Nginx 以及 Spring Boot 项目,然后在 Kibana 上添加 Nignx 索引后就可同时查看 Spring Boot 和 Nginx 的日志了，如下图所示。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">图 10. ELK 查看 Nginx 日志</p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;\"><img data-croporisrc=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/JdLkEI9sZfe7Utuichic20AIBTr7fhR2JHxCNYgy9rSf2Du5jj3KolNBQmm7RMnCPGApNwHXYaKC6sjeJ1c2hSEQ/640?wx_fmt=png\" data-cropx1=\"0\" data-cropx2=\"1080\" data-cropy1=\"0\" data-cropy2=\"402.58064516129025\" data-ratio=\"0.37222222222222223\" data-type=\"jpeg\" data-w=\"1080\" style=\"display: block; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; border-radius: 4px; inset: auto; height: 208px; width: 558px; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhmYyT0lMQEtAZJ7Bo1nBuCqMyRQSaGUfxZzmkp6QVJTH3wb1yeLyGPg/640?wx_fmt=jpeg\"><figcaption style=\"margin-top: 5px;text-align: center;color: #888;font-size: 12px;\">图片</figcaption></figure><h2 data-tool=\"mdnice编辑器\" style=\"font-size: 22px;text-align: center;font-weight: bold;line-height: 1.1em;padding-top: 12px;padding-bottom: 12px;margin: 70px 30px 30px;border-width: 1px;border-style: solid;border-color: rgb(0, 0, 0);\"><span style=\"float: left;display: block;width: 90%;border-top: 1px solid #000;height: 1px;line-height: 1px;margin-left: -5px;margin-top: -17px;\"> </span><span style=\"display: block;width: 3px;margin-left: 5%;height: 3px;line-height: 3px;overflow: hidden;background-color: rgb(0, 0, 0);box-shadow: rgb(0, 0, 0) 3px 0px, rgb(0, 0, 0) 0px 3px, rgb(0, 0, 0) -3px 0px, rgb(0, 0, 0) 0px -3px;\"></span><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left><strong style=\"color: rgb(171, 25, 66);white-space: normal;\"><span style=\"font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left>ELK 启动</span></strong></span><span style=\"display: block;width: 3px;margin-left: 95%;height: 3px;line-height: 3px;overflow: hidden;background-color: rgb(0, 0, 0);box-shadow: rgb(0, 0, 0) 3px 0px, rgb(0, 0, 0) 0px 3px, rgb(0, 0, 0) -3px 0px, rgb(0, 0, 0) 0px -3px;\"></span><span style=\"float: right;display: block;width: 90%;border-bottom: 1px solid #000;height: 1px;line-height: 1px;margin-right: -5px;margin-top: 16px;\"> </span></h2><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">在上面的步骤中，ELK 的启动过程是我们一个一个的去执行三大组件的启动命令的。而且还是在前台启动的，意味着如果我们关闭会话窗口，该组件就会停止导致整个 ELK 平台无法使用，这在实际工作过程中是不现实的，我们剩下的问题就在于如何使 ELK 在后台运行。根据 《Logstash 最佳实践》 一书的推荐，我们将使用 Supervisor 来管理 ELK 的启停。首先我们需要安装 Supervisor，在 Ubuntu 上执行 apt-get install supervisor 即可。安装成功后，我们还需要在 Supervisor 的配置文件中配置 ELK 三大组件（其配置文件默认为 /etc/supervisor/supervisord.conf 文件）。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">清单 12. ELK 后台启动</p><pre data-tool=\"mdnice编辑器\" style=\"box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px;border-radius: 4px;margin-top: 10px;margin-right: auto;margin-left: auto;\"><span style=\"display: block;background: url(\" https: no-repeat rgb></span><code style=\"overflow-x: auto;padding: 16px;color: #DCDCDC;display: -webkit-box;font-family: Operator Mono, Consolas, Monaco, Menlo, monospace;font-size: 12px;-webkit-overflow-scrolling: touch;padding-top: 15px;background: #1E1E1E;border-radius: 5px;\">[program:elasticsearch]<br>environment=JAVA_HOME=<span style=\"color: #D69D85;line-height: 26px;\">\"/usr/java/jdk1.8.0_221/\"</span><br>directory=/home/elk/elk/elasticsearch<br>user=elk<br><span style=\"color: #4EC9B0;line-height: 26px;\">command</span>=/home/elk/elk/elasticsearch/bin/elasticsearch<br><br>[program:logstash]<br>environment=JAVA_HOME=<span style=\"color: #D69D85;line-height: 26px;\">\"/usr/java/jdk1.8.0_221/\"</span><br>directory=/home/elk/elk/logstash<br>user=elk<br><span style=\"color: #4EC9B0;line-height: 26px;\">command</span>=/home/elk/elk/logstash/bin/logstash -f /home/elk/elk/logstash/indexer-logstash.conf<br><br>[program:kibana]<br>environment=LS_HEAP_SIZE=5000m<br>directory=/home/elk/elk/kibana<br>user=elk<br><span style=\"color: #4EC9B0;line-height: 26px;\">command</span>=/home/elk/elk/kibana/bin/kibana<br></code></pre><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">[按照以上内容配置完成后，执行 sudo supervisorctl reload 即可完成整个 ELK 的启动，而且其默认是开机自启。当然，我们也可以使用 sudo supervisorctl start/stop program_name] 来管理单独的应用。</p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\"><strong style=\"letter-spacing: 0px;color: rgb(171, 25, 66);\"><span style=\"letter-spacing: 0px;font-size: 15px;\">结束语</span></strong></p><p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px;padding-bottom: 8px;line-height: 26px;\">在本教程中，我们主要了解了什么是 ELK，然后通过实际操作和大家一起搭建了一个 ELK 日志分析平台，并且接入了 Logback 和 Nginx 两种日志。</p><p style=\"color: rgb(154, 154, 154);font-size: 15px;white-space: normal;\"><br></p><p style=\"color: rgb(154, 154, 154);font-size: 15px;white-space: normal;\"><span style=\"font-size: 14px;\"></span></p><blockquote class=\"js_blockquote_wrap\" data-type=\"2\" data-url=\"\" data-author-name=\"\" data-content-utf8-length=\"34\" data-source-title=\"\"><section class=\"js_blockquote_digest\"><section><p style=\"color: rgb(154, 154, 154);font-size: 15px;white-space: normal;\"><span style=\"font-size: 14px;\">转自：<span style=\"color: rgb(154, 154, 154);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif left>ibm</span></span></p><p style=\"color: rgb(154, 154, 154);font-size: 15px;white-space: normal;\"><span style=\"font-size: 14px;\">链接：https://developer.ibm.com</span></p></section></section></blockquote><p mpa-paragraph-type=\"body\" style=\"letter-spacing: 0.544px;text-align: right;background-color: rgb(255, 255, 255);\"><br></p><p style=\"max-width: 100%;min-height: 1em;font-family: -apple-system, BlinkMacSystemFont, \" helvetica neue sc sans gb yahei ui arial sans-serif normal rgb center border-box break-word><span style=\"max-width: 100%;font-size: 15px;color: rgb(136, 136, 136);box-sizing: border-box !important;overflow-wrap: break-word !important;\">- EOF -</span></p><section donone=\"shifuMouseDownCard('shifu_c_030')\" label=\"Copyright Reserved by PLAYHUDONG.\" style=\"margin-top: 1em;margin-bottom: 1em;max-width: 100%;font-family: -apple-system, BlinkMacSystemFont, \" helvetica neue sc sans gb yahei ui arial sans-serif normal rgb start initial border-box break-word><section style=\"margin-left: 1em;max-width: 100%;line-height: 1.4;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"padding: 3px 8px;max-width: 100%;border-radius: 4px;color: rgb(255, 255, 255);background-color: rgb(255, 105, 31);font-family: inherit;text-align: inherit;text-decoration: inherit;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">推荐阅读</span>  <span style=\"margin-left: 4px;padding: 3px 8px;max-width: 100%;border-radius: 1.2em;color: rgb(255, 255, 255);line-height: 1.2;background-color: rgb(204, 204, 204);font-family: inherit;text-align: inherit;text-decoration: inherit;border-color: rgb(249, 110, 87);font-size: 12px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">点击标题可跳转</span></section><section style=\"margin-top: -11px;padding: 22px 16px 16px;max-width: 100%;border-width: 1px;border-style: solid;border-color: rgb(255, 105, 31);color: rgb(51, 51, 51);font-size: 1em;font-family: inherit;text-align: inherit;text-decoration: inherit;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"max-width: 100%;min-height: 1em;line-height: 2em;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;mid=2651496872&amp;idx=1&amp;sn=3d98eda2a19a141ddddf60453471087c&amp;chksm=bd25cdd78a5244c1c3cdebaf8fe995984250123502ef661bad683ecb777caf14ddfed6951025&amp;scene=21#wechat_redirect\" data-itemshowtype=\"11\" tab=\"innerlink\" style=\"font-size: 12px;\" data-linktype=\"2\"><span style=\"font-size: 12px;\">《面试八股文》之Zookeeper12卷</span></a><br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"></p><p style=\"max-width: 100%;min-height: 1em;line-height: 2em;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;mid=2651496871&amp;idx=2&amp;sn=7ddfac47b51d1b89029717d5cce8103d&amp;chksm=bd25cdd88a5244cebffcb34f09f8c2300d5050c7e1ec49d609b185749de7d47b12937754a30f&amp;scene=21#wechat_redirect\" data-itemshowtype=\"11\" tab=\"innerlink\" style=\"font-size: 12px;\" data-linktype=\"2\"><span style=\"font-size: 12px;\">长文详解：DUBBO源码使用了哪些设计模式</span></a><br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"></p><p style=\"max-width: 100%;min-height: 1em;line-height: 2em;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;mid=2651496865&amp;idx=1&amp;sn=8c84101006f2a8b78d1c498a47800ca2&amp;chksm=bd25cdde8a5244c8309a151e1d687883ba6c58a683d2bda89fdd584b9f7a46e572d431ad4100&amp;scene=21#wechat_redirect\" data-itemshowtype=\"11\" tab=\"innerlink\" style=\"font-size: 12px;\" data-linktype=\"2\"><span style=\"font-size: 12px;\">面试侃集合 | PriorityBlockingQueue篇</span></a><br></p></section></section><p style=\"max-width: 100%;min-height: 1em;font-family: -apple-system, BlinkMacSystemFont, \" helvetica neue sc sans gb yahei ui arial sans-serif normal rgb start border-box break-word><br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"></p><p style=\"max-width: 100%;min-height: 1em;font-family: -apple-system, BlinkMacSystemFont, \" helvetica neue sc sans gb yahei ui arial sans-serif normal rgb center border-box break-word><span style=\"max-width: 100%;font-size: 14px;color: rgb(255, 169, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;\">看完本文有收获？请转发分享给更多人</span><br style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"></p><p style=\"max-width: 100%;min-height: 1em;font-family: -apple-system, BlinkMacSystemFont, \" helvetica neue sc sans gb yahei ui arial sans-serif normal rgb center border-box break-word><strong style=\"max-width: 100%;color: rgb(255, 169, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;\">关注「ImportNew」，提升Java技能</strong></p><p style=\"max-width: 100%;min-height: 1em;font-family: -apple-system, BlinkMacSystemFont, \" helvetica neue sc sans gb yahei ui arial sans-serif normal rgb center border-box break-word><img data-ratio=\"0.9166666666666666\" data-s=\"300,640\" data-type=\"jpeg\" data-w=\"600\" width=\"auto\" style=\"box-sizing: border-box !important; overflow-wrap: break-word !important; visibility: visible !important; width: 600px !important; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/2A8tXicCG8ylbWIGfdoDED35IRRySQZTXUkJ1eop9MHApzFibKnOo0diboXpl0rmS5mH78YJhsWQv0dhv718A6kUA/640?wx_fmt=jpeg\"></p><p style=\"max-width: 100%;min-height: 1em;font-family: -apple-system, BlinkMacSystemFont, \" helvetica neue sc sans gb yahei ui arial sans-serif normal rgb right border-box break-word><span style=\"max-width: 100%;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;\"></span><span style=\"max-width: 100%;font-family: -apple-system-font, system-ui, \" helvetica neue sc sans gb yahei ui arial sans-serif center border-box break-word>点赞和在看就是最大的支持</span><span style=\"max-width: 100%;font-family: -apple-system-font, system-ui, \" helvetica neue sc sans gb yahei ui arial sans-serif center border-box break-word>❤️</span><span style=\"letter-spacing: 0.544px;font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, \" pingfang sc cambria cochin georgia times new roman serif></span></p></section><section data-mpa-template=\"t\" mpa-paragraph-type=\"ignored\" style=\"letter-spacing: 0.544px;background-color: rgb(255, 255, 255);\"><section data-role=\"outer\" label=\"Powered by 135editor.com\" style=\"font-size: 16px;font-family: 微软雅黑;\"><section data-mpa-template=\"t\" mpa-paragraph-type=\"ignored\" style=\"letter-spacing: 0.544px;\"><section data-role=\"outer\" label=\"Powered by 135editor.com\"><section data-mpa-template=\"t\" mpa-paragraph-type=\"ignored\" style=\"letter-spacing: 0.544px;\"><section data-role=\"outer\" label=\"Powered by 135editor.com\"><pre data-darkmode-bgcolor-15923650965579=\"rgb(36, 36, 36)\" data-darkmode-original-bgcolor-15923650965579=\"rgb(255, 255, 255)\" data-darkmode-color-15923650965579=\"rgb(167, 167, 167)\" data-darkmode-original-color-15923650965579=\"rgb(63, 63, 63)\" data-style=\"letter-spacing: 0.544px; font-size: 16px; color: rgb(63, 63, 63); word-spacing: 1px; line-height: inherit;\" class=\"js_darkmode__91\" style=\"letter-spacing: 0.544px;caret-color: rgb(255, 0, 0);text-align: left;widows: 1;text-size-adjust: auto;color: rgb(63, 63, 63);word-spacing: 1px;line-height: inherit;\"><p data-darkmode-bgcolor=\"rgb(36, 36, 36)\" data-darkmode-original-bgcolor=\"rgb(255, 255, 255)\" data-darkmode-color=\"rgb(230, 230, 230)\" data-darkmode-original-color=\"rgb(0, 0, 0)\" data-style=\"margin-right: 0.5em; margin-left: 0.5em; font-family: 微软雅黑; white-space: normal; color: rgb(0, 0, 0); letter-spacing: 0px; word-spacing: 2px; text-align: right;\" class=\"js_darkmode__101\" data-darkmode-bgcolor-15923650965579=\"rgb(36, 36, 36)\" data-darkmode-original-bgcolor-15923650965579=\"rgb(255, 255, 255)\" data-darkmode-color-15923650965579=\"rgb(230, 230, 230)\" data-darkmode-original-color-15923650965579=\"rgb(0, 0, 0)\" style=\"margin-right: 0.5em;margin-left: 0.5em;font-family: 微软雅黑;white-space: normal;color: rgb(0, 0, 0);letter-spacing: 0px;word-spacing: 2px;text-align: right;\"><span data-darkmode-bgcolor=\"rgb(36, 36, 36)\" data-darkmode-original-bgcolor=\"rgb(255, 255, 255)\" data-darkmode-color=\"rgb(255, 41, 65)\" data-darkmode-original-color=\"rgb(255, 41, 65)\" data-darkmode-bgcolor-15923650965579=\"rgb(36, 36, 36)\" data-darkmode-original-bgcolor-15923650965579=\"rgb(255, 255, 255)\" data-darkmode-color-15923650965579=\"rgb(255, 41, 65)\" data-darkmode-original-color-15923650965579=\"rgb(255, 41, 65)\" style=\"color: rgb(255, 41, 65);\"><strong data-darkmode-bgcolor=\"rgb(36, 36, 36)\" data-darkmode-original-bgcolor=\"rgb(255, 255, 255)\" data-darkmode-color=\"rgb(255, 41, 65)\" data-darkmode-original-color=\"rgb(255, 41, 65)\" data-darkmode-bgcolor-15923650965579=\"rgb(36, 36, 36)\" data-darkmode-original-bgcolor-15923650965579=\"rgb(255, 255, 255)\" data-darkmode-color-15923650965579=\"rgb(255, 41, 65)\" data-darkmode-original-color-15923650965579=\"rgb(255, 41, 65)\"></strong></span></p></pre></section></section></section></section></section></section>\n                </div>\n\n    \n    <br>\n\n    \n        <a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;mid=2651496946&amp;idx=1&amp;sn=85f3190dd5cb19a7dd5b8046a90a9f7a&amp;chksm=bd25cd8d8a52449b5b3c4833e96d8e731c86d51fc7a34d001139bd734a34cd4e92785af31c61&amp;scene=0#rd\" style=\"color: blue\" class=\"media_tool_meta meta_primary\">原文</a>\n        <br>\n    \n\n    \n\n    <img alt=\"\" width=\"1px\" height=\"1px\" class=\"\" style=\"width:1px;height:1px;display:none\" src=\"http://www.jintiankansha.me/rss_static/54540/EU9xCPm6Kh\"></div></div>","descriptionType":"html","publishedDate":"Sun, 11 Jul 2021 03:30:00 +0000","feedId":2521,"bgimg":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhnm2SOfeJsndLn82ibVIKSoibhKskalzj5iaX8evmUncMwtQBkLTjVUApg/0?wx_fmt=jpeg?imageView2/1/w/600","linkMd5":"58aac2909ab193efa13f545b3e64fa58","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn3@2020_1/2021/07/12/18-40-58-662_3476e24dfa914097.webp","destWidth":555,"destHeight":236,"sourceBytes":12047,"destBytes":9642,"author":"","articleImgCdnMap":{"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhnm2SOfeJsndLn82ibVIKSoibhKskalzj5iaX8evmUncMwtQBkLTjVUApg/0?wx_fmt=jpeg?imageView2/1/w/600":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn3@2020_1/2021/07/12/18-40-58-662_3476e24dfa914097.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWh0Myx6keSINrNJe0474RnAICoSiaFpPTRl36icsJibHSYVjOpDXNY5hqyg/640?wx_fmt=jpeg":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn36@2020_4/2021/07/12/18-41-01-691_e5d79401c2b7e8bc.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhFCOEhcYGpu3DmvibJGnsSakm3MF0TNdOjeWtOvYhIUeajAQWyibd58gA/640?wx_fmt=jpeg":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn10@2020_2/2021/07/12/18-41-02-171_2533dacf5c7a562a.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhz3YTZ5PAum8CVVJrZIvnibWu8V0XRS2F2Wdg3j2bW8xm7mtW2xNDoXA/640?wx_fmt=jpeg":null,"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhicEFd6szDibPsMibA2b1ic05TGwmdQKDzFL0D5LicAQzQEAp59PibfqVLkEQ/640?wx_fmt=jpeg":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn7@2020_1/2021/07/12/18-41-16-724_b0da0ad23df4f03f.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhftsLxW42UUMKk781IP7GLzNd6N5dvcEMNmT9O8DCO2ibG8mrY3aoJEw/640?wx_fmt=jpeg":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn47@2020_1/2021/07/12/18-41-16-139_2c85e01aa7735e99.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWh7aLsichL4lUUWj7fvveGTwdGxH8GLgNATfK4FW1t3ibAarV3hYxmDNCw/640?wx_fmt=jpeg":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn38@2020_4/2021/07/12/18-41-08-704_8214e3ae7f117fdc.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhYmbbL1zopt8rWia7Arv9MSwPoL79SLdv01mUn8Cibs4Qw2JlR5IxvNtA/640?wx_fmt=jpeg":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn23@2020_2/2021/07/12/18-42-15-887_f44ef388ee310037.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhgbMomzcPqn1KYGKnSJgGibvicEIlcTHFk97D5HzNicHzJQkzSvBfDYzcg/640?wx_fmt=jpeg":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn20@2020_5/2021/07/12/18-41-03-274_502c50f18fa5494f.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhIYyH9JBRDPdpwCvNSk53NdibEsFsPsH4kZRmlJcy9sPepoGz1mxAXdw/640?wx_fmt=jpeg":null,"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhmYyT0lMQEtAZJ7Bo1nBuCqMyRQSaGUfxZzmkp6QVJTH3wb1yeLyGPg/640?wx_fmt=jpeg":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn21@2020_1/2021/07/12/18-41-04-006_c9cbb5890cb5d7e9.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/2A8tXicCG8ylbWIGfdoDED35IRRySQZTXUkJ1eop9MHApzFibKnOo0diboXpl0rmS5mH78YJhsWQv0dhv718A6kUA/640?wx_fmt=jpeg":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn32@2020_3/2021/07/12/18-41-07-250_f93d0239d4369c75.webp","http://www.jintiankansha.me/rss_static/54540/EU9xCPm6Kh":null},"publishedOrCreatedDate":1626115250490}],"record":{"createdTime":"2021-07-13 02:40:50","updatedTime":"2021-07-13 02:40:50","feedId":2521,"fetchDate":"Mon, 12 Jul 2021 18:40:50 +0000","fetchMs":744,"handleMs":26,"totalMs":132303,"newArticles":0,"totalArticles":5,"status":1,"type":0,"ip":"af6ca12eefe249e94a3f077d15d7c168","hostName":"europe-59*","requestId":"ccb0e8ad04ab42feaa0cc940ba910067_2521","contentType":"application/rss+xml","totalBytes":407856,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":13,"articlesImgsGithubTotal":10,"successGithubMap":{"myreaderx8":1,"myreaderx7":1,"myreaderx27":1,"myreaderx21":1,"myreaderx11":1,"myreaderx2":1,"myreaderx24":1,"myreaderx5oss":1,"myreaderx29":1,"myreaderx18":1},"failGithubMap":{"myreaderx14":1}},"feed":{"createdTime":"2020-08-24 21:31:41","updatedTime":"2020-09-01 10:09:47","id":2521,"name":"ImportNew","url":"http://feedmaker.kindle4rss.com/feeds/importnew.weixin.xml","subscriber":null,"website":null,"icon":"http://www.sogou.com/images/logo/new/favicon.ico?v=4","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx63/cdn9@2020_3/2020/09/01/02-08-31-388_d24121c9beed1de6.ico","description":"伯乐在线旗下账号，专注Java技术分享，包括Java基础技术、进阶技能、架构设计和Java技术领域动态等。","weekly":null,"link":null},"noPictureArticleList":[{"createdTime":"2021-07-13 02:43:01","updatedTime":"2021-07-13 02:43:01","id":null,"feedId":2521,"linkMd5":"58aac2909ab193efa13f545b3e64fa58"}],"tmpCommonImgCdnBytes":9642,"tmpBodyImgCdnBytes":398214,"tmpBgImgCdnBytes":0,"extra4":{"start":1626115249308,"total":0,"statList":[{"spend":1156,"msg":"获取xml内容"},{"spend":26,"msg":"解释文章"},{"spend":0,"msg":"上传封面图到cdn"},{"spend":1,"msg":"修正封面图上传失败重新上传"},{"spend":122659,"msg":"正文链接上传到cdn"}]},"extra5":13,"extra6":12,"extra7ImgCdnFailResultVector":[{"code":1,"isDone":false,"source":"http://www.jintiankansha.me/rss_static/54540/EU9xCPm6Kh","sourceStatusCode":405,"sourceBytes":0,"destBytes":0,"feedId":2521,"totalSpendMs":695,"convertSpendMs":0,"createdTime":"2021-07-13 02:40:58","host":"europe63*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+ELK%20%E5%A4%84%E7%90%86%20Spring%20Boot%20%E6%97%A5%E5%BF%97%EF%BC%8C%E5%A6%99%EF%BC%81","linkMd5ListStr":"58aac2909ab193efa13f545b3e64fa58","extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[405],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"http://www.jintiankansha.me/rss_static/54540/EU9xCPm6Kh","sourceStatusCode":405,"sourceBytes":0,"destBytes":0,"feedId":2521,"totalSpendMs":730,"convertSpendMs":0,"createdTime":"2021-07-13 02:40:59","host":"us-012*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+ELK%20%E5%A4%84%E7%90%86%20Spring%20Boot%20%E6%97%A5%E5%BF%97%EF%BC%8C%E5%A6%99%EF%BC%81","linkMd5ListStr":"58aac2909ab193efa13f545b3e64fa58","extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[405],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhIYyH9JBRDPdpwCvNSk53NdibEsFsPsH4kZRmlJcy9sPepoGz1mxAXdw/640?wx_fmt=jpeg","sourceStatusCode":200,"destWidth":1080,"destHeight":393,"sourceBytes":35310,"destBytes":23754,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":15021,"convertSpendMs":13,"createdTime":"2021-07-13 02:40:59","host":"us-008*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+ELK%20%E5%A4%84%E7%90%86%20Spring%20Boot%20%E6%97%A5%E5%BF%97%EF%BC%8C%E5%A6%99%EF%BC%81","linkMd5ListStr":"58aac2909ab193efa13f545b3e64fa58","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx14/cdn12/contents/2021/07/12/18-41-14-006_398f49aab88c8d44.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 68584859.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Resource, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Mon, 12 Jul 2021 18:41:14 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["E112:4D05:1E80678:504584F:60EC8CCA"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1626118513"],"x-ratelimit-resource":["core"],"x-ratelimit-used":["62"],"x-xss-protection":["0"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx14/cdn12/contents/2021/07/12/18-41-14-006_398f49aab88c8d44.webp","historyStatusCode":[],"spendMs":87},"base64UserPassword":null,"token":"6b67d******************************91b08"},"githubUser":"myreaderx14","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"34.5 KB","destSize":"23.2 KB","compressRate":"67.3%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhIYyH9JBRDPdpwCvNSk53NdibEsFsPsH4kZRmlJcy9sPepoGz1mxAXdw/640?wx_fmt=jpeg","sourceStatusCode":200,"destWidth":1080,"destHeight":393,"sourceBytes":35310,"destBytes":23754,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":3673,"convertSpendMs":13,"createdTime":"2021-07-13 02:41:14","host":"us-034*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+ELK%20%E5%A4%84%E7%90%86%20Spring%20Boot%20%E6%97%A5%E5%BF%97%EF%BC%8C%E5%A6%99%EF%BC%81","linkMd5ListStr":"58aac2909ab193efa13f545b3e64fa58","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx14/cdn12/contents/2021/07/12/18-41-17-802_398f49aab88c8d44.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 68584859.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Resource, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Mon, 12 Jul 2021 18:41:17 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["B4E6:5C8F:3AF57C7:BBDB3B8:60EC8CCD"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1626118513"],"x-ratelimit-resource":["core"],"x-ratelimit-used":["62"],"x-xss-protection":["0"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx14/cdn12/contents/2021/07/12/18-41-17-802_398f49aab88c8d44.webp","historyStatusCode":[],"spendMs":104},"base64UserPassword":null,"token":"6b67d******************************91b08"},"githubUser":"myreaderx14","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"34.5 KB","destSize":"23.2 KB","compressRate":"67.3%"},null,null,null],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://europe-24.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-007.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe63.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[405]},"http://us-034.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]},"http://us-035.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-028.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://us-024.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-006.herokuapp.com/":{"failCount":1,"successCount":1,"resultList":[200,null]},"http://europe-25.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]},"http://us-036.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://us-008.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-012.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[405]},"http://us-027.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhnm2SOfeJsndLn82ibVIKSoibhKskalzj5iaX8evmUncMwtQBkLTjVUApg/0?wx_fmt=jpeg?imageView2/1/w/600","sourceStatusCode":200,"destWidth":555,"destHeight":236,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn3@2020_1/2021/07/12/18-40-58-662_3476e24dfa914097.webp","sourceBytes":12047,"destBytes":9642,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":8286,"convertSpendMs":6,"createdTime":"2021-07-13 02:40:50","host":"us-54*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+ELK%20%E5%A4%84%E7%90%86%20Spring%20Boot%20%E6%97%A5%E5%BF%97%EF%BC%8C%E5%A6%99%EF%BC%81","linkMd5ListStr":"58aac2909ab193efa13f545b3e64fa58,58aac2909ab193efa13f545b3e64fa58","githubUser":"myreaderx29","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"11.8 KB","destSize":"9.4 KB","compressRate":"80%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWh0Myx6keSINrNJe0474RnAICoSiaFpPTRl36icsJibHSYVjOpDXNY5hqyg/640?wx_fmt=jpeg","sourceStatusCode":200,"destWidth":1080,"destHeight":428,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn36@2020_4/2021/07/12/18-41-01-691_e5d79401c2b7e8bc.webp","sourceBytes":19133,"destBytes":9820,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":3131,"convertSpendMs":10,"createdTime":"2021-07-13 02:40:58","host":"europe-24*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+ELK%20%E5%A4%84%E7%90%86%20Spring%20Boot%20%E6%97%A5%E5%BF%97%EF%BC%8C%E5%A6%99%EF%BC%81","linkMd5ListStr":"58aac2909ab193efa13f545b3e64fa58","githubUser":"myreaderx24","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"18.7 KB","destSize":"9.6 KB","compressRate":"51.3%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhFCOEhcYGpu3DmvibJGnsSakm3MF0TNdOjeWtOvYhIUeajAQWyibd58gA/640?wx_fmt=jpeg","sourceStatusCode":200,"destWidth":1080,"destHeight":462,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn10@2020_2/2021/07/12/18-41-02-171_2533dacf5c7a562a.webp","sourceBytes":40926,"destBytes":25626,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":3394,"convertSpendMs":14,"createdTime":"2021-07-13 02:40:59","host":"us-007*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+ELK%20%E5%A4%84%E7%90%86%20Spring%20Boot%20%E6%97%A5%E5%BF%97%EF%BC%8C%E5%A6%99%EF%BC%81","linkMd5ListStr":"58aac2909ab193efa13f545b3e64fa58","githubUser":"myreaderx5oss","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"40 KB","destSize":"25 KB","compressRate":"62.6%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhgbMomzcPqn1KYGKnSJgGibvicEIlcTHFk97D5HzNicHzJQkzSvBfDYzcg/640?wx_fmt=jpeg","sourceStatusCode":200,"destWidth":1080,"destHeight":340,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn20@2020_5/2021/07/12/18-41-03-274_502c50f18fa5494f.webp","sourceBytes":22974,"destBytes":13556,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":4726,"convertSpendMs":12,"createdTime":"2021-07-13 02:40:59","host":"us-034*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+ELK%20%E5%A4%84%E7%90%86%20Spring%20Boot%20%E6%97%A5%E5%BF%97%EF%BC%8C%E5%A6%99%EF%BC%81","linkMd5ListStr":"58aac2909ab193efa13f545b3e64fa58","githubUser":"myreaderx18","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"22.4 KB","destSize":"13.2 KB","compressRate":"59%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhmYyT0lMQEtAZJ7Bo1nBuCqMyRQSaGUfxZzmkp6QVJTH3wb1yeLyGPg/640?wx_fmt=jpeg","sourceStatusCode":200,"destWidth":1080,"destHeight":402,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn21@2020_1/2021/07/12/18-41-04-006_c9cbb5890cb5d7e9.webp","sourceBytes":51334,"destBytes":34704,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":5230,"convertSpendMs":14,"createdTime":"2021-07-13 02:40:59","host":"us-035*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+ELK%20%E5%A4%84%E7%90%86%20Spring%20Boot%20%E6%97%A5%E5%BF%97%EF%BC%8C%E5%A6%99%EF%BC%81","linkMd5ListStr":"58aac2909ab193efa13f545b3e64fa58","githubUser":"myreaderx7","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"50.1 KB","destSize":"33.9 KB","compressRate":"67.6%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/2A8tXicCG8ylbWIGfdoDED35IRRySQZTXUkJ1eop9MHApzFibKnOo0diboXpl0rmS5mH78YJhsWQv0dhv718A6kUA/640?wx_fmt=jpeg","sourceStatusCode":200,"destWidth":600,"destHeight":550,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn32@2020_3/2021/07/12/18-41-07-250_f93d0239d4369c75.webp","sourceBytes":37143,"destBytes":31608,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":8472,"convertSpendMs":11,"createdTime":"2021-07-13 02:40:59","host":"us-024*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+ELK%20%E5%A4%84%E7%90%86%20Spring%20Boot%20%E6%97%A5%E5%BF%97%EF%BC%8C%E5%A6%99%EF%BC%81","linkMd5ListStr":"58aac2909ab193efa13f545b3e64fa58","githubUser":"myreaderx27","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"36.3 KB","destSize":"30.9 KB","compressRate":"85.1%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWh7aLsichL4lUUWj7fvveGTwdGxH8GLgNATfK4FW1t3ibAarV3hYxmDNCw/640?wx_fmt=jpeg","sourceStatusCode":200,"destWidth":926,"destHeight":565,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn38@2020_4/2021/07/12/18-41-08-704_8214e3ae7f117fdc.webp","sourceBytes":25299,"destBytes":21160,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":10262,"convertSpendMs":13,"createdTime":"2021-07-13 02:40:58","host":"europe-25*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+ELK%20%E5%A4%84%E7%90%86%20Spring%20Boot%20%E6%97%A5%E5%BF%97%EF%BC%8C%E5%A6%99%EF%BC%81","linkMd5ListStr":"58aac2909ab193efa13f545b3e64fa58","githubUser":"myreaderx21","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"24.7 KB","destSize":"20.7 KB","compressRate":"83.6%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhftsLxW42UUMKk781IP7GLzNd6N5dvcEMNmT9O8DCO2ibG8mrY3aoJEw/640?wx_fmt=jpeg","sourceStatusCode":200,"destWidth":1080,"destHeight":514,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn47@2020_1/2021/07/12/18-41-16-139_2c85e01aa7735e99.webp","sourceBytes":92349,"destBytes":70394,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":17347,"convertSpendMs":21,"createdTime":"2021-07-13 02:40:59","host":"us-027*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+ELK%20%E5%A4%84%E7%90%86%20Spring%20Boot%20%E6%97%A5%E5%BF%97%EF%BC%8C%E5%A6%99%EF%BC%81","linkMd5ListStr":"58aac2909ab193efa13f545b3e64fa58","githubUser":"myreaderx11","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"90.2 KB","destSize":"68.7 KB","compressRate":"76.2%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhicEFd6szDibPsMibA2b1ic05TGwmdQKDzFL0D5LicAQzQEAp59PibfqVLkEQ/640?wx_fmt=jpeg","sourceStatusCode":200,"destWidth":1024,"destHeight":419,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn7@2020_1/2021/07/12/18-41-16-724_b0da0ad23df4f03f.webp","sourceBytes":70678,"destBytes":72852,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":15899,"convertSpendMs":17,"createdTime":"2021-07-13 02:41:01","host":"us-006*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+ELK%20%E5%A4%84%E7%90%86%20Spring%20Boot%20%E6%97%A5%E5%BF%97%EF%BC%8C%E5%A6%99%EF%BC%81","linkMd5ListStr":"58aac2909ab193efa13f545b3e64fa58","githubUser":"myreaderx8","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"69 KB","destSize":"71.1 KB","compressRate":"103.1%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_jpg/eZzl4LXykQxVJ0WmQ3rKgbiaTSOe37EWhYmbbL1zopt8rWia7Arv9MSwPoL79SLdv01mUn8Cibs4Qw2JlR5IxvNtA/640?wx_fmt=jpeg","sourceStatusCode":200,"destWidth":900,"destHeight":858,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn23@2020_2/2021/07/12/18-42-15-887_f44ef388ee310037.webp","sourceBytes":155195,"destBytes":118494,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":16573,"convertSpendMs":30,"createdTime":"2021-07-13 02:42:01","host":"europe-25*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+ELK%20%E5%A4%84%E7%90%86%20Spring%20Boot%20%E6%97%A5%E5%BF%97%EF%BC%8C%E5%A6%99%EF%BC%81","linkMd5ListStr":"58aac2909ab193efa13f545b3e64fa58","githubUser":"myreaderx2","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"151.6 KB","destSize":"115.7 KB","compressRate":"76.4%"}],"successGithubMap":{"myreaderx8":1,"myreaderx7":1,"myreaderx27":1,"myreaderx21":1,"myreaderx11":1,"myreaderx2":1,"myreaderx24":1,"myreaderx5oss":1,"myreaderx29":1,"myreaderx18":1},"failGithubMap":{"myreaderx14":1}}
{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2020-10-10 00:19:48","updatedTime":"2020-10-10 00:19:48","title":"python内置模块urllib介绍","link":"https://foofish.net/python-urllib.html","description":"<p>urllib 是 python 的内置模块， 主要用于处理url相关的一些操作，例如访问url、解析url等操作。</p> \n<p><img alt=\"python3-urllib.png\" src=\"https://foofish.net/images/python3-urllib.png\" /></p> \n<p>urllib 包下面的 <code>request</code> 模块主要用于访问url，但是用得太多，因为它的光芒全都被 requests 这个第三方库覆盖了，最常用的还是 <code>parse</code> 模块。 写爬虫过程中，经常要对url进行参数的拼接、编码、解码，域名、资源路径提取等操作，这时 <code>parse</code> 模块就可以排上用场。</p> \n<h3>一、urlparse</h3> \n<p><code>urlparse</code> 方法是把一个完整的URL拆分成不同的组成部分，你可以根据自己的需求提取其中的某部分内容。 返回结果 ParseResult 是 namedtuple 的子类，由以下10部分组成，每部分既可以通过名字获取也可以通过下表索引得到。</p> \n<p><img alt=\"微信截图_20200908184624.png\" src=\"https://foofish.net/images/微信截图_20200908184624.png\" /></p> \n<div class=\"highlight\">\n <pre><span></span><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"kn\">from</span> <span class=\"nn\">urllib</span> <span class=\"kn\">import</span> <span class=\"n\">parse</span>\n<span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">url</span> <span class=\"o\">=</span> <span class=\"s1\">'https://mp.weixin.qq.com/s ...</span></pre>\n</div>","descriptionType":"text/html","publishedDate":"Sun, 06 Sep 2020 01:12:01 +0000","feedId":37203,"bgimg":"https://foofish.net/images/python3-urllib.png","linkMd5":"cefdcf9c1209f47f322a0ad471002696","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn70@2020_3/2020/10/09/16-19-57-522_7022cf370208a1b7.webp","destWidth":428,"destHeight":361,"sourceBytes":14250,"destBytes":7384,"author":"刘志军","articleImgCdnMap":{"https://foofish.net/images/python3-urllib.png":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn70@2020_3/2020/10/09/16-19-57-522_7022cf370208a1b7.webp","https://foofish.net/images/微信截图_20200908184624.png":null},"publishedOrCreatedDate":1602260388946}],"record":{"createdTime":"2020-10-10 00:19:48","updatedTime":"2020-10-10 00:19:48","feedId":37203,"fetchDate":"Fri, 09 Oct 2020 16:19:48 +0000","fetchMs":2589,"handleMs":134,"totalMs":43506,"newArticles":0,"totalArticles":335,"status":1,"type":0,"ip":"6da9f5c5105826521b693cdf674daebe","hostName":"us-027*","requestId":"e3f59a4fc09742c4aeb5a118db3c4487_37203","contentType":"text/xml","totalBytes":7384,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":2,"articlesImgsGithubTotal":1,"successGithubMap":{"myreaderx11":1},"failGithubMap":{"myreaderx23":1}},"feed":{"createdTime":"2020-09-07 03:10:09","updatedTime":"2020-09-07 05:24:50","id":37203,"name":"FooFish-Python之禅","url":"https://foofish.net/feeds/rss.xml","subscriber":86,"website":null,"icon":"https://foofish.net/favicon.ico","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx62/cdn5@2020_3/2020/09/06/21-24-49-706_377ca5f6c7f73dec.ico","description":"Python之禅","weekly":null,"link":null},"noPictureArticleList":[{"createdTime":"2020-10-10 00:20:09","updatedTime":"2020-10-10 00:20:09","id":null,"feedId":37203,"linkMd5":"cefdcf9c1209f47f322a0ad471002696"}],"tmpCommonImgCdnBytes":7384,"tmpBodyImgCdnBytes":0,"tmpBgImgCdnBytes":0,"extra4":{"start":1602260365793,"total":0,"statList":[{"spend":23019,"msg":"获取xml内容"},{"spend":134,"msg":"解释文章"},{"spend":0,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":10864,"msg":"正文链接上传到cdn"}]},"extra5":2,"extra6":2,"extra7ImgCdnFailResultVector":[{"code":1,"isDone":false,"source":"https://foofish.net/images/微信截图_20200908184624.png","sourceStatusCode":200,"destWidth":580,"destHeight":363,"sourceBytes":17585,"destBytes":23226,"targetWebpQuality":75,"feedId":37203,"totalSpendMs":7075,"convertSpendMs":24,"createdTime":"2020-10-10 00:19:58","host":"us-025*","referer":"https://foofish.net/python-urllib.html","linkMd5ListStr":"cefdcf9c1209f47f322a0ad471002696","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx23/cdn77/contents/2020/10/09/16-20-05-476_8c07739e1727aaae.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 69189253.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Fri, 09 Oct 2020 16:20:05 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"status":["403 Forbidden"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["ED62:79C6:5478E:C1090:5F808DB5"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, read:packages, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1602260520"],"x-ratelimit-used":["60"],"x-xss-protection":["1; mode=block"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx23/cdn77/contents/2020/10/09/16-20-05-476_8c07739e1727aaae.webp","historyStatusCode":[],"spendMs":61},"base64UserPassword":null,"token":"df0b9******************************93a6e"},"githubUser":"myreaderx23","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"17.2 KB","destSize":"22.7 KB","compressRate":"132.1%"},{"code":1,"isDone":false,"source":"https://foofish.net/images/微信截图_20200908184624.png","sourceStatusCode":200,"destWidth":580,"destHeight":363,"sourceBytes":17585,"destBytes":23226,"targetWebpQuality":75,"feedId":37203,"totalSpendMs":3732,"convertSpendMs":32,"createdTime":"2020-10-10 00:20:05","host":"us-025*","referer":"https://foofish.net/python-urllib.html","linkMd5ListStr":"cefdcf9c1209f47f322a0ad471002696","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx23/cdn77/contents/2020/10/09/16-20-09-173_8c07739e1727aaae.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 69189253.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Fri, 09 Oct 2020 16:20:09 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"status":["403 Forbidden"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["89EE:162D:9BF66:10315F:5F808DB9"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, read:packages, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1602260520"],"x-ratelimit-used":["60"],"x-xss-protection":["1; mode=block"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx23/cdn77/contents/2020/10/09/16-20-09-173_8c07739e1727aaae.webp","historyStatusCode":[],"spendMs":113},"base64UserPassword":null,"token":"df0b9******************************93a6e"},"githubUser":"myreaderx23","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"17.2 KB","destSize":"22.7 KB","compressRate":"132.1%"}],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://us-025.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"https://foofish.net/images/python3-urllib.png","sourceStatusCode":200,"destWidth":428,"destHeight":361,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn70@2020_3/2020/10/09/16-19-57-522_7022cf370208a1b7.webp","sourceBytes":14250,"destBytes":7384,"targetWebpQuality":75,"feedId":37203,"totalSpendMs":5414,"convertSpendMs":8,"createdTime":"2020-10-10 00:19:52","host":"europe-60*","referer":"https://foofish.net/python-urllib.html","linkMd5ListStr":"cefdcf9c1209f47f322a0ad471002696,cefdcf9c1209f47f322a0ad471002696","githubUser":"myreaderx11","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"13.9 KB","destSize":"7.2 KB","compressRate":"51.8%"}],"successGithubMap":{"myreaderx11":1},"failGithubMap":{"myreaderx23":1}}
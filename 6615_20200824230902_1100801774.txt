{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"ä¸Šæ‰‹äº†RabbitMQï¼Ÿå†æ¥çœ‹çœ‹å®ƒçš„äº¤æ¢æœº(Exchange)å§","link":"https://segmentfault.com/a/1190000023684246","description":"<blockquote>\n äººç”Ÿç»ˆå°†æ˜¯åœºå•äººæ—…é€”ï¼Œå­¤ç‹¬ä¹‹å‰æ˜¯è¿·èŒ«ï¼Œå­¤ç‹¬è¿‡åæ˜¯æˆé•¿ã€‚\n</blockquote>\n<h2>æ¥”å­</h2>\n<p>æœ¬ç¯‡æ˜¯æ¶ˆæ¯é˜Ÿåˆ—<code>RabbitMQ</code>çš„ç¬¬ä¸‰å¼¹ã€‚</p>\n<p><a href=\"https://segmentfault.com/a/1190000023473302\">RabbitMQçš„å…¥é—¨</a>å’Œ<a href=\"https://segmentfault.com/a/1190000023564860\">RabbitMQ+SpringBootçš„æ•´åˆ</a>å¯ä»¥ç‚¹æ­¤é“¾æ¥è¿›å»å›é¡¾ï¼Œä»Šå¤©è¦è®²çš„æ˜¯<code>RabbitMQ</code>çš„äº¤æ¢æœºã€‚</p>\n<p>æœ¬ç¯‡æ˜¯ç†è§£<code>RabbitMQ</code>å¾ˆé‡è¦çš„ä¸€ç¯‡ï¼Œäº¤æ¢æœºæ˜¯æ¶ˆæ¯çš„ç¬¬ä¸€ç«™ï¼Œåªæœ‰ç†è§£äº†äº¤æ¢æœºçš„åˆ†å‘æ¨¡å¼ï¼Œæˆ‘ä»¬æ‰èƒ½çŸ¥é“ä¸åŒäº¤æ¢æœºæ ¹æ®ä»€ä¹ˆè§„åˆ™åˆ†å‘æ¶ˆæ¯ï¼Œæ‰èƒ½æ˜ç™½åœ¨é¢å¯¹ä¸åŒä¸šåŠ¡éœ€æ±‚çš„æ—¶å€™åº”é‡‡ç”¨å“ªç§äº¤æ¢æœºã€‚</p>\n<hr>\n <p><a href=\"https://juejin.im/user/5cc53c8251882524f72ccef6/posts\" rel=\"nofollow noreferrer\">ç¥æœ‰å¥½æ”¶è·ï¼Œå…ˆèµåçœ‹ï¼Œå¿«ä¹æ— é™ã€‚</a></p>\n <p><strong>æœ¬æ–‡ä»£ç ï¼š</strong> <a href=\"https://gitee.com/he-erduo/spring-boot-learning-demo\" rel=\"nofollow noreferrer\">ç äº‘åœ°å€</a>â€ƒ<a href=\"https://github.com/he-erduo/spring-boot-learning-demo\" rel=\"nofollow noreferrer\">GitHubåœ°å€</a></p>\n <h2>1. ğŸ”Exchange</h2>\n <p><img src=\"https://segmentfault.com/img/remote/1460000023473305\" alt=\"rabbitæ¶æ„å›¾\" title=\"rabbitæ¶æ„å›¾\" /></p>\n <p>å…ˆæ¥æ”¾ä¸Šå‡ ä¹æ¯ç¯‡éƒ½è¦å‡ºç°ä¸€éçš„æˆ‘ç”»äº†å¥½ä¹…çš„<code>RabbitMQ</code>æ¶æ„å›¾ã€‚</p>\n <p>å‰ä¸¤ç¯‡æ–‡ä¸­æˆ‘ä»¬ä¸€ç›´æ²¡æœ‰æ˜¾å¼çš„å»ä½¿ç”¨<code>Exchange</code>ï¼Œéƒ½æ˜¯ä½¿ç”¨çš„é»˜è®¤<code>Exchange</code>ï¼Œå…¶å®<code>Exchange</code>æ˜¯ä¸€ä¸ªéå¸¸å…³é”®çš„ç»„ä»¶ï¼Œæœ‰äº†å®ƒæ‰æœ‰äº†å„ç§æ¶ˆæ¯åˆ†å‘æ¨¡å¼ã€‚</p>\n <p>æˆ‘å…ˆç®€å•è¯´è¯´<code>Exchange</code>æœ‰å“ªå‡ ç§ç±»å‹ï¼š</p>\n <ol>\n  <li><strong>fanout</strong>ï¼š<code>Fanout-Exchange</code>ä¼šå°†å®ƒæ¥æ”¶åˆ°çš„æ¶ˆæ¯å‘å¾€æ‰€æœ‰ä¸ä»–ç»‘å®šçš„Queueä¸­ã€‚</li>\n  <li><strong>direct</strong>ï¼š<code>Direct-Exchange</code>ä¼šæŠŠå®ƒæ¥æ”¶åˆ°çš„æ¶ˆæ¯å‘å¾€ä¸å®ƒæœ‰ç»‘å®šå…³ç³»ä¸”<code>Routingkey</code>å®Œå…¨åŒ¹é…çš„Queueä¸­ï¼ˆé»˜è®¤ï¼‰ã€‚</li>\n  <li><strong>topic</strong>ï¼š<code>Topic-Exchange</code>ä¸Direct-Exchangeç›¸ä¼¼ï¼Œä¸è¿‡Topic-Exchangeä¸éœ€è¦å…¨åŒ¹é…ï¼Œå¯ä»¥éƒ¨åˆ†åŒ¹é…ï¼Œå®ƒçº¦å®šï¼š<code>Routingkey</code>ä¸ºä¸€ä¸ªå¥ç‚¹å·â€œ. â€åˆ†éš”çš„å­—ç¬¦ä¸²ï¼ˆæˆ‘ä»¬å°†è¢«å¥ç‚¹å·â€œ. â€åˆ†éš”å¼€çš„æ¯ä¸€æ®µç‹¬ç«‹çš„å­—ç¬¦ä¸²ç§°ä¸ºä¸€ä¸ªå•è¯ï¼‰ã€‚</li>\n  <li><strong>header</strong>ï¼š<code>Header-Exchange</code>ä¸ä¾èµ–äºRoutingKeyæˆ–ç»‘å®šå…³ç³»æ¥åˆ†å‘æ¶ˆæ¯ï¼Œè€Œæ˜¯æ ¹æ®å‘é€çš„æ¶ˆæ¯å†…å®¹ä¸­çš„headerså±æ€§è¿›è¡ŒåŒ¹é…ã€‚æ­¤æ¨¡å¼å·²ç»ä¸å†ä½¿ç”¨ï¼Œæœ¬æ–‡ä¸­ä¹Ÿä¸ä¼šå»è®²ï¼Œå¤§å®¶çŸ¥é“å³å¯ã€‚</li>\n </ol>\n <p>æœ¬æ–‡ä¸­æˆ‘ä»¬ä¸»è¦è®²å‰ä¸‰ç§<code>Exchange</code>æ–¹å¼ï¼Œç›¸ä¿¡å‡­å€Ÿç€æˆ‘ç®€ç»ƒçš„æ–‡å­—å’Œçµé­‚çš„ç”»æŠ€ç»™å¤§å®¶å¥½å¥½è®²è®²ï¼Œäº‰å–è€å¦ªèƒ½è§£ã€‚</p>\n <p><strong>Tip</strong>ï¼šæœ¬æ–‡çš„ä»£ç æ¼”ç¤ºç›´æ¥ä½¿ç”¨SpringBoot+RabbitMQçš„æ¨¡å¼ã€‚</p>\n <h2>2. ğŸ“•Fanout-Exchange</h2>\n <p>å…ˆæ¥çœ‹çœ‹<code>Fanout-Exchange</code>ï¼Œ<code>Fanout-Exchange</code>åˆç§°æ‰‡å½¢äº¤æ¢æœºï¼Œè¿™ä¸ªäº¤æ¢æœºåº”è¯¥æ˜¯æœ€å®¹æ˜“ç†è§£çš„ã€‚</p>\n <p><img src=\"https://segmentfault.com/img/remote/1460000023684249\" alt=\"æ‰‡å½¢äº¤æ¢æœº\" title=\"æ‰‡å½¢äº¤æ¢æœº\" /></p>\n <p><code>Exchange</code>å’Œ<code>Queue</code>å»ºç«‹ä¸€ä¸ªç»‘å®šå…³ç³»ï¼Œ<code>Exchange</code>ä¼šåˆ†å‘ç»™æ‰€æœ‰å’Œå®ƒæœ‰ç»‘å®šå…³ç³»çš„<code>Queue</code>ä¸­ï¼Œç»‘å®šäº†åä¸ª<code>Queue</code>å°±æŠŠæ¶ˆæ¯å¤åˆ¶åä»½è¿›è¡Œåˆ†å‘ã€‚</p>\n <p>è¿™ç§ç»‘å®šå…³ç³»ä¸ºäº†æ•ˆç‡è‚¯å®šéƒ½ä¼šç»´æŠ¤ä¸€å¼ è¡¨ï¼Œä»ç®—æ³•æ•ˆç‡ä¸Šæ¥è¯´ä¸€èˆ¬æ˜¯O(1)ï¼Œæ‰€ä»¥<code>Fanout-Exchange</code>æ˜¯è¿™å‡ ä¸ªäº¤æ¢æœºä¸­<strong>æŸ¥æ‰¾éœ€è¦è¢«åˆ†å‘é˜Ÿåˆ—</strong>æœ€å¿«çš„äº¤æ¢æœºã€‚</p>\n <hr>\n  <p>ä¸‹é¢æ˜¯ä¸€æ®µä»£ç æ¼”ç¤ºï¼š</p>\n  <pre><code class=\"java\">    @Bean\n    public Queue fanout1() {\n        return new Queue(\"fanout1\");\n    }\n\n    @Bean\n    public Queue fanout2() {\n        return new Queue(\"fanout2\");\n    }\n\n    @Bean\n    public FanoutExchange fanoutExchange() {\n        // ä¸‰ä¸ªæ„é€ å‚æ•°ï¼šname durable autoDelete\n        return new FanoutExchange(\"fanoutExchange\", false, false);\n    }\n\n    @Bean\n    public Binding binding1() {\n        return BindingBuilder.bind(fanout1()).to(fanoutExchange());\n    }\n\n    @Bean\n    public Binding binding2() {\n        return BindingBuilder.bind(fanout2()).to(fanoutExchange());\n    }</code></pre>\n  <p>ä¸ºäº†æ¸…æ™°æ˜äº†ï¼Œæˆ‘æ–°å»ºäº†ä¸¤ä¸ªæ¼”ç¤ºç”¨çš„é˜Ÿåˆ—ï¼Œç„¶åå»ºäº†ä¸€ä¸ª<code>FanoutExchange</code>ï¼Œæœ€åç»™ä»–ä»¬éƒ½è®¾ç½®ä¸Šç»‘å®šå…³ç³»ï¼Œè¿™æ ·ä¸€ç»„é˜Ÿåˆ—å’Œäº¤æ¢æœºçš„ç»‘å®šè®¾ç½®å°±ç®—å®Œæˆäº†ã€‚</p>\n  <p>ç´§æ¥ç€ç¼–å†™ä¸€ä¸‹ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ï¼š</p>\n  <pre><code class=\"java\">    public void sendFanout() {\n        Client client = new Client();\n\n        // åº”è¯»è€…è¦æ±‚ï¼Œä»¥åä»£ç æ‰“å°çš„åœ°æ–¹éƒ½ä¼šæ”¹æˆlogæ–¹å¼ï¼Œè¿™æ˜¯ä¸€ç§è‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œç”¨System.out.printlnä¸€èˆ¬æ˜¯ä¸æ¨èçš„ã€‚\n        log.info(\"Message content : \" + client);\n\n        rabbitTemplate.convertAndSend(\"fanoutExchange\",null,client);\n        System.out.println(\"æ¶ˆæ¯å‘é€å®Œæ¯•ã€‚\");\n    }\n\n    @Test\n    public void sendFanoutMessage() {\n        rabbitProduce.sendFanout();\n    }</code></pre>\n  <pre><code class=\"java\">@Slf4j\n@Component(\"rabbitFanoutConsumer\")\npublic class RabbitFanoutConsumer {\n    @RabbitListener(queues = \"fanout1\")\n    public void onMessage1(Message message, Channel channel) throws Exception {\n        log.info(\"Message content : \" + message);\n        channel.basicAck(message.getMessageProperties().getDeliveryTag(),false);\n        log.info(\"æ¶ˆæ¯å·²ç¡®è®¤\");\n    }\n\n    @RabbitListener(queues = \"fanout2\")\n    public void onMessage2(Message message, Channel channel) throws Exception {\n        log.info(\"Message content : \" + message);\n        channel.basicAck(message.getMessageProperties().getDeliveryTag(),false);\n        log.info(\"æ¶ˆæ¯å·²ç¡®è®¤\");\n    }\n\n}</code></pre>\n  <p>è¿™ä¸¤æ®µä»£ç éƒ½å¾ˆå¥½ç†è§£ï¼Œä¸å†èµ˜è¿°ï¼Œæœ‰é—å¿˜çš„å¯ä»¥å»çœ‹<a href=\"https://juejin.im/post/6856571028496351239\" rel=\"nofollow noreferrer\">RabbitMQç¬¬ä¸€å¼¹</a>çš„å†…å®¹ã€‚</p>\n  <p>å…¶ä¸­å‘é€æ¶ˆæ¯çš„ä»£ç æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<code>Exchange</code>çš„åç§°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯<code>routingKey</code>çš„åç§°ï¼Œè¿™ä¸ªå‚æ•°åœ¨æ‰‡å½¢äº¤æ¢æœºé‡Œé¢ç”¨ä¸åˆ°ï¼Œåœ¨å…¶ä»–ä¸¤ä¸ªäº¤æ¢æœºç±»å‹é‡Œé¢ä¼šç”¨åˆ°ã€‚</p>\n  <p>ä»£ç çš„å‡†å¤‡åˆ°æ­¤ç»“æŸï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œå‘é€æ–¹æ³•ä¹‹årunä¸€ä¸‹äº†~</p>\n  <p>é¡¹ç›®å¯åŠ¨åï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ¥è§‚å¯Ÿä¸€ä¸‹é˜Ÿåˆ—ä¸äº¤æ¢æœºçš„ç»‘å®šå…³ç³»æœ‰æ²¡æœ‰ç”Ÿæ•ˆï¼Œæˆ‘ä»¬åœ¨RabbitMQæ§åˆ¶å°ä½¿ç”¨<code>rabbitmqctl list_bindings</code>å‘½ä»¤æŸ¥çœ‹ç»‘å®šå…³ç³»ã€‚</p>\n  <p><img src=\"https://segmentfault.com/img/remote/1460000023684252\" alt=\"æ‰‡å½¢äº¤æ¢æœºç»‘å®šå…³ç³»\" title=\"æ‰‡å½¢äº¤æ¢æœºç»‘å®šå…³ç³»\" /></p>\n  <p>å…³é”®éƒ¨åˆ†æˆ‘ç”¨çº¢æ¡†æ ‡è®°äº†èµ·æ¥ï¼Œè¿™å°±ä»£è¡¨ç€åå«<code>fanoutExchange</code>çš„äº¤æ¢æœºç»‘å®šç€ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œä¸€ä¸ªå«<code>fanout1</code>ï¼Œå¦ä¸€ä¸ªå«<code>fanout2</code>ã€‚</p>\n  <p>ç´§æ¥ç€ï¼Œæˆ‘ä»¬æ¥çœ‹æ§åˆ¶å°çš„æ‰“å°æƒ…å†µï¼š</p>\n  <p><img src=\"https://segmentfault.com/img/remote/1460000023684251\" alt=\"æ‰‡å½¢äº¤æ¢æœºç¡®è®¤æ¶ˆæ¯\" title=\"æ‰‡å½¢äº¤æ¢æœºç¡®è®¤æ¶ˆæ¯\" /></p>\n  <p>å¯ä»¥çœ‹åˆ°ï¼Œä¸€æ¡ä¿¡æ¯å‘é€å‡ºå»ä¹‹åï¼Œä¸¤ä¸ªé˜Ÿåˆ—éƒ½æ¥æ”¶åˆ°äº†è¿™æ¡æ¶ˆæ¯ï¼Œç´§æ¥ç€ç”±æˆ‘ä»¬çš„ä¸¤ä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ã€‚</p>\n  <p><strong>Tipï¼š</strong> å¦‚æœä½ çš„æ¼”ç¤ºåº”ç”¨å¯åŠ¨ä¹‹åæ²¡æœ‰æ¶ˆè´¹ä¿¡æ¯ï¼Œå¯ä»¥å°è¯•é‡æ–°è¿è¡Œä¸€æ¬¡ç”Ÿäº§è€…çš„æ–¹æ³•å‘é€æ¶ˆæ¯ã€‚</p>\n  <h2>3. ğŸ“—Direct-Exchange</h2>\n  <p><code>Direct-Exchange</code>æ˜¯ä¸€ç§ç²¾å‡†åŒ¹é…çš„äº¤æ¢æœºï¼Œæˆ‘ä»¬ä¹‹å‰ä¸€ç›´ä½¿ç”¨é»˜è®¤çš„äº¤æ¢æœºï¼Œå…¶å®é»˜è®¤çš„äº¤æ¢æœºå°±æ˜¯Directç±»å‹ã€‚</p>\n  <p>å¦‚æœå°†Directäº¤æ¢æœºéƒ½æ¯”ä½œä¸€æ‰€å…¬å¯“çš„ç®¡ç†å‘˜ï¼Œé‚£ä¹ˆé˜Ÿåˆ—å°±æ˜¯é‡Œé¢çš„ä½æˆ·ã€‚(ç»‘å®šå…³ç³»)</p>\n  <p>ç®¡ç†å‘˜æ¯å¤©éƒ½ä¼šæ”¶åˆ°å„ç§å„æ ·çš„ä¿¡ä»¶(æ¶ˆæ¯)ï¼Œè¿™äº›ä¿¡ä»¶çš„åœ°å€ä¸å…‰è¦æ ‡æ˜åœ°å€(ExchangeKey)è¿˜éœ€è¦æ ‡æ˜è¦é€å¾€å“ªä¸€æˆ·(routingKey)ï¼Œä¸ç„¶æ¶ˆæ¯æ— æ³•æŠ•é€’ã€‚</p>\n  <p><img src=\"https://segmentfault.com/img/remote/1460000023684250\" alt=\"æ‰‡å½¢äº¤æ¢æœº\" title=\"æ‰‡å½¢äº¤æ¢æœº\" /></p>\n  <p>ä»¥ä¸Šå›¾ä¸ºä¾‹ï¼Œå‡†å¤‡ä¸€æ¡æ¶ˆæ¯å‘å¾€åä¸º<code>SendService</code>çš„ç›´æ¥äº¤æ¢æœºä¸­å»ï¼Œè¿™ä¸ªäº¤æ¢æœºä¸»è¦æ˜¯ç”¨æ¥åšå‘é€æœåŠ¡ï¼Œæ‰€ä»¥å…¶ç»‘å®šäº†ä¸¤ä¸ªé˜Ÿåˆ—ï¼ŒSMSé˜Ÿåˆ—å’ŒMAILé˜Ÿåˆ—ï¼Œç”¨äºå‘é€çŸ­ä¿¡å’Œé‚®ä»¶ã€‚</p>\n  <p>æˆ‘ä»¬çš„æ¶ˆæ¯é™¤äº†æŒ‡å®š<code>ExchangeKey</code>è¿˜éœ€è¦æŒ‡å®š<code>routingKey</code>ï¼Œ<code>routingKey</code>å¯¹åº”ç€æœ€ç»ˆè¦å‘é€çš„æ˜¯å“ªä¸ªé˜Ÿåˆ—ï¼Œæˆ‘ä»¬çš„ç¤ºä¾‹ä¸­çš„<code>routingKey</code>æ˜¯smsï¼Œè¿™é‡Œè¿™æ¡æ¶ˆæ¯å°±ä¼šäº¤ç»™SMSé˜Ÿåˆ—ã€‚</p>\n  <hr>\n   <p>å¬äº†ä¸Šé¢è¿™æ®µï¼Œå¯èƒ½å¤§å®¶å¯¹<code>routingKey</code>è¿˜ä¸æ˜¯å¾ˆç†è§£ï¼Œæˆ‘ä»¬ä¸Šæ®µä»£ç å®è·µä¸€ä¸‹ï¼Œå¤§å®¶åº”è¯¥å°±æ˜ç™½äº†ã€‚</p>\n   <p><strong>å‡†å¤‡å·¥ä½œï¼š</strong></p>\n   <pre><code class=\"java\">    @Bean\n    public Queue directQueue1() {\n        return new Queue(\"directQueue1\");\n    }\n\n    @Bean\n    public Queue directQueue2() {\n        return new Queue(\"directQueue2\");\n    }\n\n    @Bean\n    public DirectExchange directExchange() {\n        // ä¸‰ä¸ªæ„é€ å‚æ•°ï¼šname durable autoDelete\n        return new DirectExchange(\"directExchange\", false, false);\n    }\n\n    @Bean\n    public Binding directBinding1() {\n        return BindingBuilder.bind(directQueue1()).to(directExchange()).with(\"sms\");\n    }\n\n    @Bean\n    public Binding directBinding2() {\n        return BindingBuilder.bind(directQueue2()).to(directExchange()).with(\"mail\");\n    }</code></pre>\n   <p>æ–°å»ºä¸¤ä¸ªé˜Ÿåˆ—ï¼Œæ–°å»ºäº†ä¸€ä¸ªç›´æ¥äº¤æ¢æœºï¼Œå¹¶è®¾ç½®äº†ç»‘å®šå…³ç³»ã€‚</p>\n   <p>è¿™é‡Œçš„ç¤ºä¾‹ä»£ç å’Œä¸Šé¢æ‰‡å½¢äº¤æ¢æœºçš„ä»£ç å¾ˆåƒï¼Œå”¯ä¸€å¯ä»¥è¯´ä¸åŒçš„å°±æ˜¯ç»‘å®šçš„æ—¶å€™å¤šè°ƒç”¨äº†ä¸€ä¸ª<code>with</code>å°†<code>routingKey</code>è®¾ç½®äº†ä¸Šå»ã€‚</p>\n   <p>æ‰€ä»¥æ˜¯äº¤æ¢æœºå’Œé˜Ÿåˆ—å»ºç«‹ç»‘å®šå…³ç³»çš„æ—¶å€™è®¾ç½®çš„<code>routingKey</code>ï¼Œä¸€ä¸ªæ¶ˆæ¯åˆ°è¾¾äº¤æ¢æœºä¹‹åï¼Œäº¤æ¢æœºé€šè¿‡æ¶ˆæ¯ä¸Šå¸¦æ¥çš„<code>routingKey</code>æ‰¾åˆ°è‡ªå·±ä¸é˜Ÿåˆ—å»ºç«‹ç»‘å®šå…³ç³»æ—¶è®¾ç½®çš„<code>routingKey</code>ï¼Œç„¶åå°†æ¶ˆæ¯åˆ†å‘åˆ°è¿™ä¸ªé˜Ÿåˆ—å»ã€‚</p>\n   <p><strong>ç”Ÿäº§è€…ï¼š</strong></p>\n   <pre><code class=\"java\">    public void sendDirect() {\n        Client client = new Client();\n\n        log.info(\"Message content : \" + client);\n\n        rabbitTemplate.convertAndSend(\"directExchange\",\"sms\",client);\n        System.out.println(\"æ¶ˆæ¯å‘é€å®Œæ¯•ã€‚\");\n    }</code></pre>\n   <p><strong>æ¶ˆè´¹è€…ï¼š</strong></p>\n   <pre><code class=\"java\">@Slf4j\n@Component(\"rabbitDirectConsumer\")\npublic class RabbitDirectConsumer {\n    @RabbitListener(queues = \"directQueue1\")\n    public void onMessage1(Message message, Channel channel) throws Exception {\n        log.info(\"Message content : \" + message);\n        channel.basicAck(message.getMessageProperties().getDeliveryTag(),false);\n        log.info(\"æ¶ˆæ¯å·²ç¡®è®¤\");\n    }\n\n    @RabbitListener(queues = \"directQueue2\")\n    public void onMessage2(Message message, Channel channel) throws Exception {\n        log.info(\"Message content : \" + message);\n        channel.basicAck(message.getMessageProperties().getDeliveryTag(),false);\n        log.info(\"æ¶ˆæ¯å·²ç¡®è®¤\");\n    }\n\n}</code></pre>\n   <p><strong>æ•ˆæœå›¾å¦‚ä¸‹ï¼š</strong></p>\n   <p><img src=\"https://segmentfault.com/img/remote/1460000023684253\" alt=\"æ‰‡å½¢äº¤æ¢æœº\" title=\"æ‰‡å½¢äº¤æ¢æœº\" /></p>\n   <p>åªæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…è¿›è¡Œäº†æ¶ˆæ¯ï¼Œç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸã€‚</p>\n   <h2>4. ğŸ“™Topic-Exchange</h2>\n   <p><code>Topic-Exchange</code>æ˜¯ç›´æ¥äº¤æ¢æœºçš„æ¨¡ç³ŠåŒ¹é…ç‰ˆæœ¬ï¼ŒTopicç±»å‹çš„äº¤æ¢å™¨ï¼Œæ”¯æŒä½¿ç”¨\"*\"å’Œ\"#\"é€šé…ç¬¦å®šä¹‰æ¨¡ç³ŠbindingKeyï¼Œç„¶åæŒ‰ç…§<code>routingKey</code>è¿›è¡Œæ¨¡ç³ŠåŒ¹é…é˜Ÿåˆ—è¿›è¡Œåˆ†å‘ã€‚</p>\n   <ul>\n    <li><code>*</code>ï¼šèƒ½å¤Ÿæ¨¡ç³ŠåŒ¹é…ä¸€ä¸ªå•è¯ã€‚</li>\n    <li><code>#</code>ï¼šèƒ½å¤Ÿæ¨¡ç³ŠåŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå•è¯ã€‚</li>\n   </ul>\n   <p>å› ä¸ºåŠ å…¥äº†ä¸¤ä¸ªé€šé…å®šä¹‰ç¬¦ï¼Œæ‰€ä»¥Topicäº¤æ¢æœºçš„<code>routingKey</code>ä¹Ÿæœ‰äº›å˜åŒ–ï¼Œ<code>routingKey</code>å¯ä»¥ä½¿ç”¨<code>.</code>å°†å•è¯åˆ†å¼€ã€‚</p>\n   <hr>\n    <p>è¿™é‡Œæˆ‘ä»¬ç›´æ¥æ¥ç”¨ä¸€ä¸ªä¾‹å­è¯´æ˜ä¼šæ›´åŠ çš„æ¸…æ™°ï¼š</p>\n    <p><strong>å‡†å¤‡å·¥ä½œï¼š</strong></p>\n    <pre><code class=\"java\">    // ä¸»é¢˜äº¤æ¢æœºç¤ºä¾‹\n    @Bean\n    public Queue topicQueue1() {\n        return new Queue(\"topicQueue1\");\n    }\n\n    @Bean\n    public Queue topicQueue2() {\n        return new Queue(\"topicQueue2\");\n    }\n\n    @Bean\n    public TopicExchange topicExchange() {\n        // ä¸‰ä¸ªæ„é€ å‚æ•°ï¼šname durable autoDelete\n        return new TopicExchange(\"topicExchange\", false, false);\n    }\n\n    @Bean\n    public Binding topicBinding1() {\n        return BindingBuilder.bind(topicQueue1()).to(topicExchange()).with(\"sms.*\");\n    }\n\n    @Bean\n    public Binding topicBinding2() {\n        return BindingBuilder.bind(topicQueue2()).to(topicExchange()).with(\"mail.#\");\n    }</code></pre>\n    <p>æ–°å»ºä¸¤ä¸ªé˜Ÿåˆ—ï¼Œæ–°å»ºäº†ä¸€ä¸ªTopicäº¤æ¢æœºï¼Œå¹¶è®¾ç½®äº†ç»‘å®šå…³ç³»ã€‚</p>\n    <p>è¿™é‡Œçš„ç¤ºä¾‹ä»£ç æˆ‘ä»¬ä¸»è¦çœ‹è®¾ç½®<code>routingKey</code>ï¼Œè¿™é‡Œçš„<code>routingKey</code>ç”¨ä¸Šäº†é€šé…ç¬¦ï¼Œä¸”ä¸­é—´ç”¨<code>.</code>éš”å¼€ï¼Œè¿™å°±ä»£è¡¨<code>topicQueue1</code>æ¶ˆè´¹<code>sms</code>å¼€å¤´çš„æ¶ˆæ¯ï¼Œ<code>topicQueue2</code>æ¶ˆè´¹<code>mail</code>å¼€å¤´çš„æ¶ˆæ¯ï¼Œå…·ä½“ä¸åŒå¾€ä¸‹çœ‹ã€‚</p>\n    <p><strong>ç”Ÿäº§è€…ï¼š</strong></p>\n    <pre><code class=\"java\">    public void sendTopic() {\n        Client client = new Client();\n\n        log.info(\"Message content : \" + client);\n\n        rabbitTemplate.convertAndSend(\"topicExchange\",\"sms.liantong\",client);\n        System.out.println(\"æ¶ˆæ¯å‘é€å®Œæ¯•ã€‚\");\n    }</code></pre>\n    <p><strong>æ¶ˆè´¹è€…ï¼š</strong></p>\n    <pre><code class=\"java\">@Slf4j\n@Component(\"rabbitTopicConsumer\")\npublic class RabbitTopicConsumer {\n    @RabbitListener(queues = \"topicQueue1\")\n    public void onMessage1(Message message, Channel channel) throws Exception {\n        log.info(\"Message content : \" + message);\n        channel.basicAck(message.getMessageProperties().getDeliveryTag(),false);\n        log.info(\"æ¶ˆæ¯å·²ç¡®è®¤\");\n    }\n\n    @RabbitListener(queues = \"topicQueue2\")\n    public void onMessage2(Message message, Channel channel) throws Exception {\n        log.info(\"Message content : \" + message);\n        channel.basicAck(message.getMessageProperties().getDeliveryTag(),false);\n        log.info(\"æ¶ˆæ¯å·²ç¡®è®¤\");\n    }\n\n}</code></pre>\n    <p>è¿™é‡Œæˆ‘ä»¬çš„ç”Ÿäº§è€…å‘é€çš„æ¶ˆæ¯<code>routingKey</code>æ˜¯<code>sms.liantong</code>ï¼Œå®ƒå°±ä¼šè¢«å‘åˆ°<code>topicQueue1</code>é˜Ÿåˆ—ä¸­å»ï¼Œè¿™é‡Œæ¶ˆæ¯çš„<code>routingKey</code>ä¹Ÿéœ€è¦ç”¨<code>.</code>éš”ç¦»å¼€ï¼Œç”¨å…¶ä»–ç¬¦å·æ— æ³•æ­£ç¡®è¯†åˆ«ã€‚</p>\n    <p>å¦‚æœæˆ‘ä»¬çš„<code>routingKey</code>æ˜¯<code>sms.123.liantong</code>ï¼Œé‚£ä¹ˆå®ƒå°†æ— æ³•æ‰¾åˆ°å¯¹åº”çš„é˜Ÿåˆ—ï¼Œå› ä¸º<code>topicQueue1</code>çš„æ¨¡ç³ŠåŒ¹é…ç”¨çš„é€šé…ç¬¦æ˜¯<code>*</code>è€Œä¸æ˜¯<code>#</code>ï¼Œåªæœ‰<code>#</code>æ˜¯å¯ä»¥åŒ¹é…å¤šä¸ªå•è¯çš„ã€‚</p>\n    <p><code>Topic-Exchange</code>å’Œ<code>Direct-Exchange</code>å¾ˆç›¸ä¼¼ï¼Œæˆ‘å°±ä¸å†èµ˜è¿°äº†ï¼Œé€šé…ç¬¦<code>*</code>å’Œ<code>#</code>çš„åŒºåˆ«ä¹Ÿå¾ˆç®€å•ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±è¯•ä¸€ä¸‹ã€‚</p>\n    <h2>åè®°</h2>\n    <p>å‘¨ä¸€æ²¡æ›´æ–‡å®åœ¨æƒ­æ„§ï¼Œå»åŒ»é™¢æŠ½è¡€äº†ï¼ŒæŠ½äº†ä¸‰ç®¡~ï¼Œåƒå¤šå°‘æ‰èƒ½è¡¥å›æ¥~</p>\n    <p>RabbitMQå·²ç»æ›´æ–°äº†ä¸‰ç¯‡äº†ï¼Œè¿™ä¸‰ç¯‡çš„å†…å®¹æœ‰äº›ååŸºç¡€ï¼Œä¸‹ä¸€ç¯‡å°†ä¼šæ›´æ–°é«˜çº§éƒ¨åˆ†å†…å®¹ï¼šåŒ…æ‹¬é˜²æ­¢æ¶ˆæ¯ä¸¢å¤±ï¼Œé˜²æ­¢æ¶ˆæ¯é‡å¤æ¶ˆè´¹ç­‰ç­‰å†…å®¹ï¼Œå¸Œæœ›å¤§å®¶æŒç»­å…³æ³¨ã€‚</p>\n    <hr>\n     <p>æœ€è¿‘è¿™æ®µæ—¶é—´å‹åŠ›æŒºå¤§ï¼Œä¼˜ç‹ä»¤æˆ‘å…«æœˆåº•ä¹‹å‰å‡çº§åˆ°ä¸‰çº§ï¼Œæ‰€ä»¥å„ä½è¯»è€…çš„èµå¯¹æˆ‘å¾ˆé‡è¦ï¼Œå¸Œæœ›å¤§å®¶èƒ½å¤Ÿé«˜æŠ¬è´µæ‰‹ï¼Œå¸®æˆ‘ä¸€å“ˆ~</p>\n     <p>å¥½äº†ï¼Œä»¥ä¸Šå°±æ˜¯æœ¬æœŸçš„å…¨éƒ¨å†…å®¹ï¼Œæ„Ÿè°¢ä½ èƒ½çœ‹åˆ°è¿™é‡Œï¼Œæ¬¢è¿å¯¹æœ¬æ–‡ç‚¹èµæ”¶è—ä¸è¯„è®ºï¼ŒğŸ‘ä½ ä»¬çš„æ¯ä¸ªç‚¹èµéƒ½æ˜¯æˆ‘åˆ›ä½œçš„æœ€å¤§åŠ¨åŠ›ã€‚</p>\n     <p>æˆ‘æ˜¯è€³æœµï¼Œä¸€ä¸ªä¸€ç›´æƒ³åšçŸ¥è¯†è¾“å‡ºçš„ä¼ªæ–‡è‰ºç¨‹åºå‘˜ï¼Œæˆ‘ä»¬ä¸‹æœŸè§ã€‚</p>\n     <p><strong>æœ¬æ–‡ä»£ç ï¼š</strong><a href=\"https://gitee.com/he-erduo/spring-boot-learning-demo\" rel=\"nofollow noreferrer\">ç äº‘åœ°å€</a>â€ƒ<a href=\"https://github.com/he-erduo/spring-boot-learning-demo\" rel=\"nofollow noreferrer\">GitHubåœ°å€</a></p>\n    </hr>\n   </hr>\n  </hr>\n </hr>\n</hr>","descriptionType":"html","publishedDate":"Wed, 19 Aug 2020 05:28:31 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/remote/1460000023473305","linkMd5":"420bda976c9e79232c9adc2d2bfab39b","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx23/cdn14@2020_2/2020/08/24/23-08-22-277_79d59aaca7438433.webp","destWidth":800,"destHeight":317,"sourceBytes":62172,"destBytes":17268,"author":"å’Œè€³æœµ","articleImgCdnMap":{"https://segmentfault.com/img/remote/1460000023473305":"https://cdn.jsdelivr.net/gh/myreaderx23/cdn14@2020_2/2020/08/24/23-08-22-277_79d59aaca7438433.webp","https://segmentfault.com/img/remote/1460000023684249":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn32@2020_2/2020/08/24/23-08-39-108_9e9ebdfe1d798e4b.webp","https://segmentfault.com/img/remote/1460000023684252":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn72@2020_5/2020/08/24/23-08-39-252_6e03b370097de657.webp","https://segmentfault.com/img/remote/1460000023684251":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn64@2020_1/2020/08/24/23-08-39-180_f004b02cd44eaa50.webp","https://segmentfault.com/img/remote/1460000023684250":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn60@2020_2/2020/08/24/23-08-38-560_259f8fe4710a279d.webp","https://segmentfault.com/img/remote/1460000023684253":"https://cdn.jsdelivr.net/gh/myreaderx/cdn76@2020_6/2020/08/24/23-08-40-810_153921800664839e.webp"},"publishedOrCreatedDate":1598310388570},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"reduxã€mobxã€concentç‰¹æ€§å¤§æ¯”æ‹¼, çœ‹åç”Ÿå¦‚ä½•å¯¹å±€å‰è¾ˆ","link":"https://segmentfault.com/a/1190000022332809","description":"<p><img src=\"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/banner-rmc-compare.png\" alt=\"\" title=\"\" /></p>\n<p><strong><a href=\"https://github.com/concentjs/concent\" rel=\"nofollow noreferrer\">â¤ star me if you like concent ^_^</a></strong></p>\n<h2>åºè¨€</h2>\n<p><code>redux</code>ã€<code>mobx</code>æœ¬èº«æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„çŠ¶æ€ç®¡ç†æ¡†æ¶ï¼Œå„è‡ªæœ‰è‡ªå·±çš„æŠ½è±¡apiï¼Œä»¥å…¶ä»–UIæ¡†æ¶æ— å…³ï¼ˆreact, vue...ï¼‰ï¼Œæœ¬æ–‡ä¸»è¦è¯´çš„å’Œ<code>react</code>æ­é…ä½¿ç”¨çš„å¯¹æ¯”æ•ˆæœï¼Œæ‰€ä»¥ä¸‹æ–‡é‡Œæåˆ°çš„<code>redux</code>ã€<code>mobx</code>æš—å«äº†<code>react-redux</code>ã€<code>mobx-react</code>è¿™äº›è®©å®ƒä»¬èƒ½å¤Ÿåœ¨<code>react</code>ä¸­å‘æŒ¥åŠŸèƒ½çš„ç»‘å®šåº“ï¼Œè€Œ<code>concent</code>æœ¬èº«æ˜¯ä¸ºäº†<code>react</code>è´´èº«æ‰“é€ çš„å¼€å‘æ¡†æ¶ï¼Œæ•°æ®æµç®¡ç†åªæ˜¯ä½œä¸ºå…¶ä¸­ä¸€é¡¹åŠŸèƒ½ï¼Œé™„å¸¦çš„å…¶ä»–å¢å¼ºreactå¼€å‘ä½“éªŒçš„ç‰¹æ€§å¯ä»¥æŒ‰éœ€ä½¿ç”¨ï¼ŒåæœŸä¼šåˆ¨å»<code>concent</code>é‡Œæ‰€æœ‰ä¸<code>react</code>ç›¸å…³è”çš„éƒ¨åˆ†å‘å¸ƒ<code>concent-core</code>ï¼Œå®ƒçš„å®šä½æ‰æ˜¯ä¸<code>redux</code>ã€<code>mobx</code> ç›¸ä¼¼çš„ã€‚</p>\n<p>æ‰€ä»¥å…¶å®å°†åœ¨æœ¬æ–‡é‡Œç™»åœºçš„é€‰æ‰‹åˆ†åˆ«æ˜¯</p>\n<h3>redux &amp; react-redux</h3>\n<ul>\n <li>slogan <br> JavaScript çŠ¶æ€å®¹å™¨ï¼Œæä¾›å¯é¢„æµ‹åŒ–çš„çŠ¶æ€ç®¡ç†</br></li>\n <li>è®¾è®¡ç†å¿µ <br> å•ä¸€æ•°æ®æºï¼Œä½¿ç”¨çº¯å‡½æ•°ä¿®æ”¹çŠ¶æ€</br></li>\n</ul>\n<p><img src=\"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/1.png\" alt=\"\" title=\"\" /></p>\n<h3>mobx &amp; mobx-react</h3>\n<ul>\n <li>sloganï¼š <br> ç®€å•ã€å¯æ‰©å±•çš„çŠ¶æ€ç®¡ç†</br></li>\n <li>è®¾è®¡ç†å¿µ <br> ä»»ä½•å¯ä»¥ä»åº”ç”¨ç¨‹åºçŠ¶æ€æ´¾ç”Ÿçš„å†…å®¹éƒ½åº”è¯¥æ´¾ç”Ÿ</br></li>\n</ul>\n<p><img src=\"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/2.png\" alt=\"\" title=\"\" /></p>\n<h3>concent</h3>\n<ul>\n <li>sloganï¼š <br> å¯é¢„æµ‹ã€0å…¥ä¾µã€æ¸è¿›å¼ã€é«˜æ€§èƒ½çš„reactå¼€å‘æ–¹æ¡ˆ</br></li>\n <li>è®¾è®¡ç†å¿µ <br> ç›¸ä¿¡èåˆä¸å¯å˜+ä¾èµ–æ”¶é›†çš„å¼€å‘æ–¹å¼æ˜¯reactçš„æœªæ¥ï¼Œå¢å¼ºreactç»„ä»¶ç‰¹æ€§ï¼Œå†™å¾—æ›´å°‘ï¼Œåšå¾—æ›´å¤šã€‚</br></li>\n</ul>\n<p><img src=\"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/3.png\" alt=\"\" title=\"\" /></p>\n<p>ä»‹ç»å®Œä¸‰è€…çš„èƒŒæ™¯ï¼Œæˆ‘ä»¬çš„èˆå°æ­£å¼äº¤ç»™å®ƒä»¬ï¼Œå¼€å§‹ä¸€è½®è½®è§’é€ï¼Œçœ‹è°åˆ°æœ€åä¼šæ˜¯ä½ æœ€ä¸­æ„çš„èŒƒå„¿ï¼Ÿ</p>\n<h3>ç»“æœé¢„è§ˆ</h3>\n<p>ä»¥ä¸‹5ä¸ªè¾ƒé‡å›åˆå®æˆ˜æ¼”ç¤ºä»£ç è¾ƒå¤šï¼Œæ­¤å¤„å°†å¯¹æ¯”ç»“æœæå‰å‘ŠçŸ¥ï¼Œæ–¹ä¾¿ç²—è¯»çœ‹å®¢å¯ä»¥å¿«é€Ÿäº†è§£ã€‚</p>\n<table>\n <thead>\n  <tr>\n   <th>storeé…ç½®</th>\n   <th>concent</th>\n   <th>mbox</th>\n   <th>redux</th>\n  </tr>\n </thead>\n <tbody>\n  <tr>\n   <td>æ”¯æŒåˆ†ç¦»</td>\n   <td>Yes</td>\n   <td>Yes</td>\n   <td>No</td>\n  </tr>\n  <tr>\n   <td>æ— æ ¹Provider &amp; ä½¿ç”¨å¤„æ— éœ€æ˜¾å¼å¯¼å…¥</td>\n   <td>Yes</td>\n   <td>No</td>\n   <td>No</td>\n  </tr>\n  <tr>\n   <td>reduceræ— <code>this</code></td>\n   <td>Yes</td>\n   <td>No</td>\n   <td>Yes</td>\n  </tr>\n  <tr>\n   <td>storeæ•°æ®æˆ–æ–¹æ³•æ— éœ€äººå·¥æ˜ å°„åˆ°ç»„ä»¶</td>\n   <td>Yes</td>\n   <td>Yes</td>\n   <td>No</td>\n  </tr>\n </tbody>\n</table>\n<p><strong><a href=\"https://codesandbox.io/s/redux-counter-2mk1g\" rel=\"nofollow noreferrer\">redux counterç¤ºä¾‹</a></strong> <br> <strong><a href=\"https://codesandbox.io/s/counter-mobx-9kt50\" rel=\"nofollow noreferrer\">mobx counterç¤ºä¾‹</a></strong> <br> <strong><a href=\"https://codesandbox.io/s/concent-counter-y61if\" rel=\"nofollow noreferrer\">concent counterç¤ºä¾‹</a></strong> <br><em>_</em></br></br></br></p>\n<table>\n <thead>\n  <tr>\n   <th>çŠ¶æ€ä¿®æ”¹</th>\n   <th>concent</th>\n   <th>mbox</th>\n   <th>redux</th>\n  </tr>\n </thead>\n <tbody>\n  <tr>\n   <td>åŸºäºä¸å¯å˜åŸåˆ™</td>\n   <td>Yes</td>\n   <td>No</td>\n   <td>Yes</td>\n  </tr>\n  <tr>\n   <td>æœ€çŸ­é“¾è·¯</td>\n   <td>Yes</td>\n   <td>Yes</td>\n   <td>No</td>\n  </tr>\n  <tr>\n   <td>uiæºå¤´å¯è¿½è¸ª</td>\n   <td>Yes</td>\n   <td>No</td>\n   <td>No</td>\n  </tr>\n  <tr>\n   <td>æ— this</td>\n   <td>Yes</td>\n   <td>No</td>\n   <td>Yes</td>\n  </tr>\n  <tr>\n   <td>åŸå­æ‹†åˆ†&amp;åˆå¹¶æäº¤</td>\n   <td>Yes(åŸºäºlazy)</td>\n   <td>Yes(åŸºäºtransaction)</td>\n   <td>No</td>\n  </tr>\n </tbody>\n</table>\n<p><em>_</em></p>\n<table>\n <thead>\n  <tr>\n   <th>ä¾èµ–æ”¶é›†</th>\n   <th>concent</th>\n   <th>mbox</th>\n   <th>redux</th>\n  </tr>\n </thead>\n <tbody>\n  <tr>\n   <td>æ”¯æŒè¿è¡Œæ—¶æ”¶é›†ä¾èµ–</td>\n   <td>Yes</td>\n   <td>Yes</td>\n   <td>No</td>\n  </tr>\n  <tr>\n   <td>ç²¾å‡†æ¸²æŸ“</td>\n   <td>Yes</td>\n   <td>Yes</td>\n   <td>No</td>\n  </tr>\n  <tr>\n   <td>æ— this</td>\n   <td>Yes</td>\n   <td>No</td>\n   <td>No</td>\n  </tr>\n  <tr>\n   <td>åªéœ€ä¸€ä¸ªapiä»‹å…¥</td>\n   <td>Yes</td>\n   <td>No</td>\n   <td>No</td>\n  </tr>\n </tbody>\n</table>\n<p><strong><a href=\"https://codesandbox.io/s/mobx-login-dx4wl\" rel=\"nofollow noreferrer\">mobx ç¤ºä¾‹</a></strong> <br> <strong><a href=\"https://codesandbox.io/s/concent-login-ylbl4\" rel=\"nofollow noreferrer\">concent ç¤ºä¾‹</a></strong> </br></p>\n<p><em>_</em></p>\n<table>\n <thead>\n  <tr>\n   <th>è¡ç”Ÿæ•°æ®</th>\n   <th>concent</th>\n   <th>mbox</th>\n   <th>redux(reselect)</th>\n  </tr>\n </thead>\n <tbody>\n  <tr>\n   <td>è‡ªåŠ¨ç»´æŠ¤è®¡ç®—ç»“æœä¹‹é—´çš„ä¾èµ–</td>\n   <td>Yes</td>\n   <td>Yes</td>\n   <td>No</td>\n  </tr>\n  <tr>\n   <td>è§¦å‘è¯»å–è®¡ç®—ç»“æœæ—¶æ”¶é›†ä¾èµ–</td>\n   <td>Yes</td>\n   <td>Yes</td>\n   <td>No</td>\n  </tr>\n  <tr>\n   <td>è®¡ç®—å‡½æ•°æ— this</td>\n   <td>Yes</td>\n   <td>No</td>\n   <td>Yes</td>\n  </tr>\n </tbody>\n</table>\n<p><strong><a href=\"https://codesandbox.io/s/redux-login-6uqg8\" rel=\"nofollow noreferrer\">redux computedç¤ºä¾‹</a></strong> <br> <strong><a href=\"https://codesandbox.io/s/mobx-login-dx4wl\" rel=\"nofollow noreferrer\">mobx computedç¤ºä¾‹</a></strong> <br> <strong><a href=\"https://codesandbox.io/s/concent-login-ylbl4\" rel=\"nofollow noreferrer\">concent computedç¤ºä¾‹</a></strong> </br></br></p>\n<p><em>_</em><br>todo-mvcå®æˆ˜ <br><strong><a href=\"https://codesandbox.io/s/todo-mvc-redux-49kg0\" rel=\"nofollow noreferrer\">redux todo-mvc</a></strong> <br><strong><a href=\"https://codesandbox.io/s/todo-mvc-mbox-k42q1\" rel=\"nofollow noreferrer\">mobx todo-mvc</a></strong> <br><strong><a href=\"https://codesandbox.io/s/todoapp-react-concent-fvgvc\" rel=\"nofollow noreferrer\">concent todo-mvc</a></strong></br></br></br></br></p>\n<h2>round 1 - ä»£ç é£æ ¼åˆä½“éªŒ</h2>\n<p>counterä½œä¸ºdemoç•Œçš„é“ä»”è¢«æ— æ•°æ¬¡æ¨ä¸Šèˆå°ï¼Œè¿™ä¸€æ¬¡æˆ‘ä»¬ä¾ç„¶ä¸ä¾‹å¤–ï¼Œæ¥ä¸ªcounterä½“éªŒ3ä¸ªæ¡†æ¶çš„å¼€å‘å¥—è·¯æ˜¯æ€æ ·çš„ï¼Œä»¥ä¸‹3ä¸ªç‰ˆæœ¬éƒ½ä½¿ç”¨<code>create-react-app</code>åˆ›å»ºï¼Œå¹¶ä»¥<strong>å¤šæ¨¡å—çš„æ–¹å¼</strong>æ¥ç»„ç»‡ä»£ç ï¼ŒåŠ›æ±‚æ¥è¿‘çœŸå®ç¯å¢ƒçš„ä»£ç åœºæ™¯ã€‚</p>\n<h3>redux(actionã€reducer)</h3>\n<p>é€šè¿‡<code>models</code>æŠŠæŒ‰æ¨¡å—æŠŠåŠŸèƒ½æ‹†åˆ°ä¸åŒçš„reduceré‡Œï¼Œç›®å½•ç»“æ„å¦‚ä¸‹</p>\n<pre><code>|____models             # business models\n| |____index.js         # æš´éœ²store\n| |____counter          # counteræ¨¡å—ç›¸å…³çš„actionã€reducer\n| | |____action.js     \n| | |____reducer.js     \n| |____ ...             # å…¶ä»–æ¨¡å—\n|____CounterCls         # ç±»ç»„ä»¶\n|____CounterFn          # å‡½æ•°ç»„ä»¶\n|____index.js           # åº”ç”¨å…¥å£æ–‡ä»¶</code></pre>\n<blockquote>\n æ­¤å¤„ä»…ä¸reduxçš„åŸå§‹æ¨¡æ¿ç»„ç»‡ä»£ç ï¼Œå®é™…æƒ…å†µå¯èƒ½ä¸å°‘å¼€å‘è€…é€‰æ‹©äº†\n <code>rematch</code>ï¼Œ\n <code>dva</code>ç­‰åŸºäºreduxåšäºŒæ¬¡å°è£…å¹¶æ”¹è¿›å†™æ³•çš„æ¡†æ¶ï¼Œä½†æ˜¯å¹¶ä¸å¦¨ç¢æˆ‘ä»¬ç†è§£counterå®ä¾‹ã€‚\n</blockquote>\n<p>æ„é€ counterçš„<code>action</code></p>\n<pre><code class=\"js\">// code in models/counter/action\nexport const INCREMENT = \"INCREMENT\";\n\nexport const DECREMENT = \"DECREMENT\";\n\nexport const increase = number =&gt; {\n  return { type: INCREMENT, payload: number };\n};\n\nexport const decrease = number =&gt; {\n  return {  type: DECREMENT, payload: number };\n};</code></pre>\n<p>æ„é€ counterçš„<code>reducer</code></p>\n<pre><code class=\"js\">// code in models/counter/reducer\nimport { INCREMENT, DECREMENT } from \"./action\";\n\nexport default (state = { count: 0 }, action) =&gt; {\n  const { type, payload } = action;\n  switch (type) {\n    case INCREMENT:\n      return { ...state, count: state.count + payload };\n    case DECREMENT:\n      return { ...state, count: state.count - payload };\n    default:\n      return state;\n  }\n};\n</code></pre>\n<p>åˆå¹¶<code>reducer</code>æ„é€ <code>store</code>ï¼Œå¹¶æ³¨å…¥åˆ°æ ¹ç»„ä»¶</p>\n<pre><code class=\"jsx\">mport { createStore, combineReducers } from \"redux\";\nimport  countReducer  from \"./models/counter/reducer\";\n\nconst store = createStore(combineReducers({counter:countReducer}));\n\nReactDOM.render(\n  &lt;Provider store={store}&gt;\n    &lt;App /&gt;\n  &lt;/Provider&gt;,\n  document.getElementById(\"root\")\n);</code></pre>\n<p>ä½¿ç”¨connectè¿æ¥uiä¸<code>store</code></p>\n<pre><code class=\"jsx\">import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { increase, decrease } from \"./redux/action\";\n\n@connect(\n  state =&gt; ({ count: state.counter.count }),// mapStateToProps\n  dispatch =&gt; ({// mapDispatchToProps\n    increase: () =&gt; dispatch(increase(1)),\n    decrease: () =&gt; dispatch(decrease(1))\n  }),\n)\nclass Counter extends React.Component {\n  render() {\n    const { count, increase, decrease } = this.props;\n    return (\n      &lt;div&gt;\n        &lt;h1&gt;Count : {count}&lt;/h1&gt;\n        &lt;button onClick={increase}&gt;Increase&lt;/button&gt;\n        &lt;button onClick={decrease}&gt;decrease&lt;/button&gt;\n      &lt;/div&gt;\n    );\n  }\n}\n\nexport default Counter;</code></pre>\n<p>ä¸Šé¢çš„ç¤ºä¾‹ä¹¦å†™äº†ä¸€ä¸ªç±»ç»„ä»¶ï¼Œè€Œé’ˆå¯¹ç°åœ¨ç«çƒ­çš„<code>hook</code>ï¼Œ<code>redux v7</code>ä¹Ÿå‘å¸ƒäº†ç›¸åº”çš„api<code>useSelector</code>ã€<code>useDispatch</code></p>\n<pre><code class=\"jsx\">import * as React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport * as counterAction from \"models/counter/action\";\n\nconst Counter = () =&gt; {\n  const count = useSelector(state =&gt; state.counter.count);\n  const dispatch = useDispatch();\n  const increase = () =&gt; dispatch(counterAction.increase(1));\n  const decrease = () =&gt; dispatch(counterAction.decrease(1));\n\n  return (\n    &lt;&gt;\n      &lt;h1&gt;Fn Count : {count}&lt;/h1&gt;\n      &lt;button onClick={increase}&gt;Increase&lt;/button&gt;\n      &lt;button onClick={decrease}&gt;decrease&lt;/button&gt;\n    &lt;/&gt;\n  );\n};\n\nexport default Counter;</code></pre>\n<p>æ¸²æŸ“è¿™ä¸¤ä¸ªcounterï¼Œ<strong><a href=\"https://codesandbox.io/s/redux-counter-2mk1g\" rel=\"nofollow noreferrer\">æŸ¥çœ‹reduxç¤ºä¾‹</a></strong></p>\n<pre><code class=\"jsx\">function App() {\n  return (\n      &lt;div className=\"App\"&gt;\n        &lt;CounterCls/&gt;\n        &lt;CounterFn/&gt;\n      &lt;/div&gt;\n  );\n}</code></pre>\n<h3>mobx(store, inject)</h3>\n<p>å½“åº”ç”¨å­˜åœ¨å¤šä¸ªstoreæ—¶(è¿™é‡Œæˆ‘ä»¬å¯ä»¥æŠŠä¸€ä¸ªstoreç†è§£æˆreduxé‡Œçš„ä¸€ä¸ªreducerå—ï¼Œèšåˆäº†æ•°æ®ã€è¡ç”Ÿæ•°æ®ã€ä¿®æ”¹è¡Œä¸º)ï¼Œmobxçš„storeè·å–æ–¹å¼æœ‰å¤šç§ï¼Œä¾‹å¦‚åœ¨éœ€è¦ç”¨çš„åœ°æ–¹ç›´æ¥å¼•å…¥æ”¾åˆ°æˆå‘˜å˜é‡ä¸Š</p>\n<pre><code class=\"js\">import someStore from 'models/foo';// æ˜¯ä¸€ä¸ªå·²ç»å®ä¾‹åŒ–çš„storeå®ä¾‹\n\n@observer\nclass Comp extends React.Component{\n    foo = someStore;\n    render(){\n        this.foo.callFn();//è°ƒæ–¹æ³•\n        const text = this.foo.text;//å–æ•°æ®\n    }\n}</code></pre>\n<p>æˆ‘ä»¬æ­¤å¤„åˆ™æŒ‰ç…§å…¬è®¤çš„æœ€ä½³å®è·µæ¥åšï¼Œå³æŠŠæ‰€æœ‰storeåˆæˆä¸€ä¸ªæ ¹storeæŒ‚åˆ°Providerä¸Šï¼Œå¹¶å°†ProvideråŒ…è£¹æ•´ä¸ªåº”ç”¨æ ¹ç»„ä»¶ï¼Œåœ¨ä½¿ç”¨çš„åœ°æ–¹æ ‡è®°<code>inject</code>è£…é¥°å™¨å³å¯ï¼Œæˆ‘ä»¬çš„ç›®å½•ç»“æ„æœ€ç»ˆå¦‚ä¸‹ï¼Œå’Œ<code>redux</code>ç‰ˆæœ¬å¹¶æ— åŒºåˆ«</p>\n<pre><code>|____models             # business models\n| |____index.js         # æš´éœ²store\n| |____counter          # counteræ¨¡å—ç›¸å…³çš„store\n| | |____store.js     \n| |____ ...             # å…¶ä»–æ¨¡å—\n|____CounterCls         # ç±»ç»„ä»¶\n|____CounterFn          # å‡½æ•°ç»„ä»¶\n|____index.js           # åº”ç”¨å…¥å£æ–‡ä»¶</code></pre>\n<p>æ„é€ counterçš„<code>store</code></p>\n<pre><code class=\"js\">import { observable, action, computed } from \"mobx\";\n\nclass CounterStore {\n  @observable\n  count = 0;\n\n  @action.bound\n  increment() {\n    this.count++;\n  }\n\n  @action.bound\n  decrement() {\n    this.count--;\n  }\n}\n\nexport default new CounterStore();</code></pre>\n<p>åˆå¹¶æ‰€æœ‰<code>store</code>ä¸º<code>æ ¹store</code>ï¼Œå¹¶æ³¨å…¥åˆ°æ ¹ç»„ä»¶</p>\n<pre><code class=\"jsx\">// code in models/index.js\nimport counter from './counter';\nimport login from './login';\n\nexport default {\n  counter,\n  login,\n}\n\n// code in index.js\nimport React, { Component } from \"react\";\nimport { render } from \"react-dom\";\nimport { Provider } from \"mobx-react\";\nimport store from \"./models\";\nimport CounterCls from \"./CounterCls\";\nimport CounterFn from \"./CounterFn\";\n\nrender(    \n    &lt;Provider store={store}&gt;\n      &lt;App /&gt;\n    &lt;/Provider&gt;, \n    document.getElementById(\"root\")\n);</code></pre>\n<p>åˆ›å»ºä¸€ä¸ªç±»ç»„ä»¶</p>\n<pre><code class=\"jsx\">import React, { Component } from \"react\";\nimport { observer, inject } from \"mobx-react\";\n\n@inject(\"store\")\n@observer\nclass CounterCls extends Component {\n  render() {\n    const counter = this.props.store.counter;\n    return (\n      &lt;div&gt;\n        &lt;div&gt; class Counter {counter.count}&lt;/div&gt;\n        &lt;button onClick={counter.increment}&gt;+&lt;/button&gt;\n        &lt;button onClick={counter.decrement}&gt;-&lt;/button&gt;\n      &lt;/div&gt;\n    );\n  }\n}\n\nexport default CounterCls;</code></pre>\n<p>åˆ›å»ºä¸€ä¸ªå‡½æ•°ç»„ä»¶</p>\n<pre><code class=\"jsx\">import React from \"react\";\nimport { useObserver, observer } from \"mobx-react\";\nimport store from \"./models\";\n\nconst CounterFn = () =&gt; {\n  const { counter } = store;\n  return useObserver(() =&gt; (\n      &lt;div&gt;\n        &lt;div&gt; class Counter {counter.count}&lt;/div&gt;\n        &lt;button onClick={counter.increment}&gt;++&lt;/button&gt;\n        &lt;button onClick={counter.decrement}&gt;--&lt;/button&gt;\n      &lt;/div&gt;\n  ));\n};\n\nexport default CounterFn;</code></pre>\n<p>æ¸²æŸ“è¿™ä¸¤ä¸ªcounterï¼Œ<strong><a href=\"https://codesandbox.io/s/counter-mobx-9kt50\" rel=\"nofollow noreferrer\">æŸ¥çœ‹mobxç¤ºä¾‹</a></strong></p>\n<pre><code class=\"jsx\">function App() {\n  return (\n      &lt;div className=\"App\"&gt;\n        &lt;CounterCls/&gt;\n        &lt;CounterFn/&gt;\n      &lt;/div&gt;\n  );\n}</code></pre>\n<h3>concent(reducer, register)</h3>\n<p>concentå’Œreduxä¸€æ ·ï¼Œå­˜åœ¨ä¸€ä¸ªå…¨å±€å•ä¸€çš„æ ¹çŠ¶æ€<code>RootStore</code>ï¼Œè¯¥æ ¹çŠ¶æ€ä¸‹ç¬¬ä¸€å±‚keyç”¨æ¥å½“åšæ¨¡å—å‘½åç©ºé—´ï¼Œconcentçš„ä¸€ä¸ªæ¨¡å—å¿…éœ€é…ç½®<code>state</code>ï¼Œå‰©ä¸‹çš„<code>reducer</code>ã€<code>computed</code>ã€<code>watch</code>ã€<code>init</code>æ˜¯å¯é€‰é¡¹ï¼Œå¯ä»¥æŒ‰éœ€é…ç½®ï¼Œå¦‚æœæŠŠstoreæ‰€æœ‰æ¨¡å—å†™åˆ°ä¸€å¤„ï¼Œæœ€ç®€ç‰ˆæœ¬çš„<code>concent</code>ç¤ºä¾‹å¦‚ä¸‹</p>\n<pre><code class=\"js\">import { run, setState, getState, dispatch } from 'concent';\nrun({\n    counter:{// é…ç½®counteræ¨¡å—\n        state: { count: 0 }, // ã€å¿…éœ€ã€‘å®šä¹‰åˆå§‹çŠ¶æ€, ä¹Ÿå¯å†™ä¸ºå‡½æ•° ()=&gt;({count:0})\n        // reducer: { ...}, // ã€å¯é€‰ã€‘ä¿®æ”¹çŠ¶æ€çš„æ–¹æ³•\n        // computed: { ...}, // ã€å¯é€‰ã€‘è®¡ç®—å‡½æ•°\n        // watch: { ...}, // ã€å¯é€‰ã€‘è§‚å¯Ÿå‡½æ•°\n        // init: { ...}, // ã€å¯é€‰ã€‘å¼‚æ­¥åˆå§‹åŒ–çŠ¶æ€å‡½æ•°\n    }\n})ï¼›\n\nconst count = getState('counter').count;// count is: 0\n// count is: 1ï¼Œå¦‚æœæœ‰ç»„ä»¶å±äºè¯¥æ¨¡å—åˆ™ä¼šè¢«è§¦å‘é‡æ¸²æŸ“\nsetState('counter', {count:count + 1});\n\n// å¦‚æœå®šä¹‰äº†counter.reducerä¸‹å®šä¹‰äº†changeCountæ–¹æ³•\n// dispatch('counter/changeCount')</code></pre>\n<p>å¯åŠ¨<code>concent</code>è½½å…¥storeåï¼Œå¯åœ¨å…¶å®ƒä»»æ„ç±»ç»„ä»¶æˆ–å‡½æ•°ç»„ä»¶é‡Œæ³¨å†Œå…¶å±äºäºæŸä¸ªæŒ‡å®šæ¨¡å—æˆ–è€…è¿æ¥å¤šä¸ªæ¨¡å—</p>\n<pre><code class=\"jsx\">import { useConcent, register } from 'concent';\n\nfunction FnComp(){\n    const { state, setState, dispatch } = useConcent('counter');\n    // return ui ...\n}\n\n@register('counter')\nclass ClassComp extends React.Component(){\n    render(){\n        const { state, setState, dispatch } = this.ctx;\n        // return ui ...\n    }\n}</code></pre>\n<p>ä½†æ˜¯æ¨èå°†æ¨¡å—å®šä¹‰é€‰é¡¹æ”¾ç½®åˆ°å„ä¸ªæ–‡ä»¶ä¸­ï¼Œä»¥è¾¾åˆ°èŒè´£åˆ†æ˜ã€å…³æ³¨ç‚¹åˆ†ç¦»çš„æ•ˆæœï¼Œæ‰€ä»¥é’ˆå¯¹counterï¼Œç›®å½•ç»“æ„å¦‚ä¸‹</p>\n<pre><code>|____models             # business models\n| |____index.js         # é…ç½®storeå„ä¸ªæ¨¡å—\n| |____counter          # counteræ¨¡å—ç›¸å…³\n| | |____state.js       # çŠ¶æ€\n| | |____reducer.js     # ä¿®æ”¹çŠ¶æ€çš„å‡½æ•°\n| | |____index.js       # æš´éœ²counteræ¨¡å—\n| |____ ...             # å…¶ä»–æ¨¡å—\n|____CounterCls         # ç±»ç»„ä»¶\n|____CounterFn          # å‡½æ•°ç»„ä»¶\n|____index.js           # åº”ç”¨å…¥å£æ–‡ä»¶\n|____runConcent.js      # å¯åŠ¨concent </code></pre>\n<p>æ„é€ counterçš„<code>state</code>å’Œ<code>reducer</code></p>\n<pre><code class=\"jsx\">// code in models/counter/state.js\nexport default {\n  count: 0,\n}\n\n// code in models/counter/reducer.js\nexport function increase(count, moduleState) {\n  return { count: moduleState.count + count };\n}\n\nexport function decrease(count, moduleState) {\n  return { count: moduleState.count - count };\n}</code></pre>\n<p>ä¸¤ç§æ–¹å¼é…ç½®store</p>\n<ul>\n <li>é…ç½®åœ¨runå‡½æ•°é‡Œ</li>\n</ul>\n<pre><code class=\"js\">import counter from 'models/counter';\n\nrun({counter});</code></pre>\n<ul>\n <li>é€šè¿‡<code>configure</code>æ¥å£é…ç½®, <code>run</code>æ¥å£åªè´Ÿè´£å¯åŠ¨concent</li>\n</ul>\n<pre><code class=\"js\">// code in runConcent.js\nimport { run } from 'concent';\nrun();\n\n// code in models/counter/index.js\nimport state from './state';\nimport * as reducer from './reducer';\nimport { configure } from 'concent';\n\nconfigure('counter', {state, reducer});// é…ç½®counteræ¨¡å—</code></pre>\n<p>åˆ›å»ºä¸€ä¸ªå‡½æ•°ç»„ä»¶</p>\n<pre><code class=\"jsx\">import * as React from \"react\";\nimport { useConcent } from \"concent\";\n\nconst Counter = () =&gt; {\n  const { state, dispatch } = useConcent(\"counter\");\n  const increase = () =&gt; dispatch(\"increase\", 1);\n  const decrease = () =&gt; dispatch(\"decrease\", 1);\n\n  return (\n    &lt;&gt;\n      &lt;h1&gt;Fn Count : {state.count}&lt;/h1&gt;\n      &lt;button onClick={increase}&gt;Increase&lt;/button&gt;\n      &lt;button onClick={decrease}&gt;decrease&lt;/button&gt;\n    &lt;/&gt;\n  );\n};\n\nexport default Counter;</code></pre>\n<p>è¯¥å‡½æ•°ç»„ä»¶æˆ‘ä»¬æ˜¯æŒ‰ç…§ä¼ ç»Ÿçš„<code>hook</code>é£æ ¼æ¥å†™ï¼Œå³æ¯æ¬¡æ¸²æŸ“æ‰§è¡Œ<code>hook</code>å‡½æ•°ï¼Œåˆ©ç”¨<code>hook</code>å‡½æ•°è¿”å›çš„åŸºç¡€æ¥å£å†æ¬¡å®šä¹‰ç¬¦åˆå½“å‰ä¸šåŠ¡éœ€æ±‚çš„åŠ¨ä½œå‡½æ•°ã€‚</p>\n<p>ä½†æ˜¯ç”±äºconcentæä¾›<code>setup</code>æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å®ƒåªä¼šåœ¨åˆå§‹æ¸²æŸ“å‰æ‰§è¡Œä¸€æ¬¡çš„èƒ½åŠ›ï¼Œå°†è¿™äº›åŠ¨ä½œå‡½æ•°æ”¾ç½®åˆ°<code>setup</code>å†…éƒ¨å®šä¹‰ä¸ºé™æ€å‡½æ•°ï¼Œé¿å…é‡å¤å®šä¹‰ï¼Œæ‰€ä»¥ä¸€ä¸ªæ›´å¥½çš„å‡½æ•°ç»„ä»¶åº”ä¸º</p>\n<pre><code class=\"jsx\">import * as React from \"react\";\nimport { useConcent } from \"concent\";\n\nexport const setup = ctx =&gt; {\n  return {\n    // better than ctx.dispatch('increase', 1);\n    increase: () =&gt; ctx.moduleReducer.increase(1),\n    decrease: () =&gt; ctx.moduleReducer.decrease(1)\n  };\n};\n\nconst CounterBetter = () =&gt; {\n  const { state, settings } = useConcent({ module: \"counter\", setup });\n  const { increase, decrease } = settings;\n  // return ui...\n};\n\nexport default CounterBetter;\n</code></pre>\n<p>åˆ›å»ºä¸€ä¸ªç±»ç»„ä»¶ï¼Œå¤ç”¨<code>setup</code>é‡Œçš„é€»è¾‘</p>\n<pre><code class=\"jsx\">import React from \"react\";\nimport { register } from \"concent\";\nimport { setup } from './CounterFn';\n\n@register({module:'counter', setup})\nclass Counter extends React.Component {\n  render() {\n    // this.state å’Œ this.ctx.state å–å€¼æ•ˆæœæ˜¯ä¸€æ ·çš„\n    const { state, settings } = this.ctx;\n     // return ui...\n  }\n}\n\nexport default Counter;</code></pre>\n<p>æ¸²æŸ“è¿™ä¸¤ä¸ªcounterï¼Œ<strong><a href=\"https://codesandbox.io/s/concent-counter-y61if\" rel=\"nofollow noreferrer\">æŸ¥çœ‹concentç¤ºä¾‹</a></strong></p>\n<pre><code class=\"jsx\">function App() {\n  return (\n    &lt;div className=\"App\"&gt;\n      &lt;CounterCls /&gt;\n      &lt;CounterFn /&gt;\n    &lt;/div&gt;\n  );\n}</code></pre>\n<h3>å›é¡¾ä¸æ€»ç»“</h3>\n<p>æ­¤å›åˆé‡Œå±•ç¤ºäº†3ä¸ªæ¡†æ¶å¯¹å®šä¹‰å¤šæ¨¡å—çŠ¶æ€æ—¶ï¼Œä¸åŒçš„ä»£ç ç»„ç»‡ä¸ç»“æ„</p>\n<ul>\n <li><code>redux</code>é€šè¿‡<code>combineReducers</code>é…åˆ<code>Provider</code>åŒ…è£¹æ ¹ç»„ä»¶ï¼ŒåŒæ—¶è¿˜æ”¶æ‰‹å†™<code>mapStateToProps</code>å’Œ<code>mapActionToProps</code>æ¥è¾…åŠ©ç»„ä»¶è·å–storeçš„æ•°æ®å’Œæ–¹æ³•</li>\n <li><code>mobx</code>é€šè¿‡åˆå¹¶å¤šä¸ª<code>subStore</code>åˆ°ä¸€ä¸ª<code>store</code>å¯¹è±¡å¹¶é…åˆ<code>Provider</code>åŒ…è£¹æ ¹ç»„ä»¶ï¼Œstoreçš„æ•°æ®å’Œæ–¹æ³•å¯ç›´æ¥è·å–</li>\n <li><code>concent</code>é€šè¿‡<code>run</code>æ¥å£é›†ä¸­é…ç½®æˆ–è€…<code>configure</code>æ¥å£åˆ†ç¦»å¼çš„é…ç½®ï¼Œstoreçš„æ•°æ®å’Œæ–¹æ³•å¯ç›´æ¥è·å–</li>\n</ul>\n<table>\n <thead>\n  <tr>\n   <th>storeé…ç½®</th>\n   <th>concent</th>\n   <th>mbox</th>\n   <th>redux</th>\n  </tr>\n </thead>\n <tbody>\n  <tr>\n   <td>æ”¯æŒåˆ†ç¦»</td>\n   <td>Yes</td>\n   <td>Yes</td>\n   <td>No</td>\n  </tr>\n  <tr>\n   <td>æ— æ ¹Provider &amp; ä½¿ç”¨å¤„æ— éœ€æ˜¾å¼å¯¼å…¥</td>\n   <td>Yes</td>\n   <td>No</td>\n   <td>No</td>\n  </tr>\n  <tr>\n   <td>reduceræ— <code>this</code></td>\n   <td>Yes</td>\n   <td>No</td>\n   <td>Yes</td>\n  </tr>\n  <tr>\n   <td>storeæ•°æ®æˆ–æ–¹æ³•æ— éœ€äººå·¥æ˜ å°„åˆ°ç»„ä»¶</td>\n   <td>Yes</td>\n   <td>Yes</td>\n   <td>No</td>\n  </tr>\n </tbody>\n</table>\n<h2>round 2 - çŠ¶æ€ä¿®æ”¹</h2>\n<p>3ä¸ªæ¡†æ¶å¯¹çŠ¶æ€çš„ä¿®æ”¹é£æ ¼å·®å¼‚è¾ƒå¤§ã€‚<br><code>redux</code>é‡Œä¸¥æ ¼é™åˆ¶çŠ¶æ€ä¿®æ”¹é€”å¾„ï¼Œæ‰€ä»¥çš„ä¿®æ”¹çŠ¶æ€è¡Œä¸ºéƒ½å¿…é¡»æ´¾å‘<code>action</code>ï¼Œç„¶åå‘½ä¸­ç›¸åº”<code>reducer</code>åˆæˆæ–°çš„çŠ¶æ€ã€‚</br></p>\n<p><code>mobx</code>å…·æœ‰å“åº”å¼çš„èƒ½åŠ›ï¼Œç›´æ¥ä¿®æ”¹å³å¯ï¼Œä½†å› æ­¤ä¹Ÿå¸¦æ¥äº†æ•°æ®ä¿®æ”¹é€”å¾„ä¸å¯è¿½æº¯çš„çƒ¦æ¼ä»è€Œäº§ç”Ÿäº†<code>mobx-state-tree</code>æ¥é…å¥—çº¦æŸä¿®æ”¹æ•°æ®è¡Œä¸ºã€‚</p>\n<p><code>concent</code>çš„ä¿®æ”¹å®Œå®Œå…¨å…¨éµå¾ª<code>react</code>çš„ä¿®æ”¹å…¥å£<code>setState</code>é£æ ¼ï¼Œåœ¨æ­¤åŸºç¡€ä¹‹ä¸Šè¿›è€Œå°è£…<code>dispatch</code>ã€<code>invoke</code>ã€<code>sync</code>ç³»åˆ—apiï¼Œä¸”æ— è®ºæ˜¯è°ƒç”¨å“ªä¸€ç§apiï¼Œéƒ½èƒ½å¤Ÿä¸åªæ˜¯è¿½æº¯æ•°æ®ä¿®æ”¹å®Œæ•´é“¾è·¯ï¼Œè¿˜åŒ…æ‹¬è§¦å‘æ•°æ®ä¿®æ”¹çš„æºå¤´ã€‚</p>\n<h3>redux(dispatch)</h3>\n<p>åŒæ­¥çš„action</p>\n<pre><code class=\"js\">export const changeFirstName = firstName =&gt; {\n  return {\n    type: CHANGE_FIRST_NAME,\n    payload: firstName\n  };\n};</code></pre>\n<p>å¼‚æ­¥çš„actionï¼Œå€ŸåŠ©<code>redux-thunk</code>æ¥å®Œæˆ</p>\n<pre><code class=\"js\">// code in models/index.js, é…ç½®thunkä¸­é—´ä»¶\nimport  thunk  from \"redux-thunk\";\nimport { createStore, combineReducers, applyMiddleware } from \"redux\";\nconst store = createStore(combineReducers({...}), applyMiddleware(thunk));\n\n// code in models/login/action.js\nexport const CHANGE_FIRST_NAME = \"CHANGE_FIRST_NAME\";\n\nconst delay = (ms = 1000) =&gt; new Promise(r =&gt; setTimeout(r, ms));\n// å·¥å…·å‡½æ•°ï¼Œè¾…åŠ©å†™å¼‚æ­¥action\nconst asyncAction = asyncFn =&gt; {\n  return dispatch =&gt; {\n    asyncFn(dispatch).then(ret =&gt; {\n      if(ret){\n        const [type, payload] = ret;\n        dispatch({ type, payload });\n      }\n    }).catch(err=&gt;alert(err));\n  };\n};\n\nexport const asyncChangeFirstName = firstName =&gt; {\n  return asyncAction(async (dispatch) =&gt; {//å¯ç”¨äºä¸­é—´è¿‡ç¨‹å¤šæ¬¡dispatch\n    await delay();\n    return [CHANGE_FIRST_NAME, firstName];\n  });\n};</code></pre>\n<h3>mobxç‰ˆæœ¬(this.XXX)</h3>\n<p>åŒæ­¥actionä¸å¼‚æ­¥action</p>\n<pre><code class=\"js\">import { observable, action, computed } from \"mobx\";\n\nconst delay = (ms = 1000) =&gt; new Promise(r =&gt; setTimeout(r, ms));\n\nclass LoginStore {\n  @observable firstName = \"\";\n\n  @observable lastName = \"\";\n\n  @action.bound\n  changeFirstName(firstName) {\n    this.firstName = firstName;\n  }\n\n  @action.bound\n  async asyncChangeFirstName(firstName) {\n    await delay();\n    this.firstName = firstName;\n  }\n\n  @action.bound\n  changeLastName(lastName) {\n    this.lastName = lastName;\n  }\n}\n\nexport default new LoginStore();</code></pre>\n<p>ç›´æ¥ä¿®æ”¹</p>\n<pre><code class=\"js\">const LoginFn = () =&gt; {\n  const { login } = store;\n  const changeFirstName = e =&gt; login.firstName = e.target.value;\n  // ...    \n}</code></pre>\n<p>é€šè¿‡actionä¿®æ”¹</p>\n<pre><code class=\"js\">const LoginFn = () =&gt; {\n  const { login } = store;\n  const const changeFirstName = e =&gt; login.changeFirstName(e.target.value);\n  // ...    \n}</code></pre>\n<h3>concent(dispatch,setState,invoke,sync)</h3>\n<p>concenté‡Œä¸å†åŒºåˆ†<code>action</code>å’Œ<code>reducer</code>ï¼Œuiç›´æ¥è°ƒç”¨<code>reducer</code>æ–¹æ³•å³å¯ï¼ŒåŒæ—¶<code>reducer</code>æ–¹æ³•å¯ä»¥æ˜¯åŒæ­¥ä¹Ÿå¯ä»¥æ˜¯å¼‚æ­¥ï¼Œæ”¯æŒç›¸äº’ä»»æ„ç»„åˆå’Œlazyè°ƒç”¨ï¼Œå¤§å¤§å‡è½»å¼€å‘è€…çš„å¿ƒæ™ºè´Ÿæ‹…ã€‚</p>\n<p>åŒæ­¥<code>reducer</code>ä¸å¼‚æ­¥<code>reducer</code></p>\n<pre><code class=\"js\">// code in models/login/reducer.js\nconst delay = (ms = 1000) =&gt; new Promise(r =&gt; setTimeout(r, ms));\n\nexport function changeFirstName(firstName) {\n  return { firstName };\n}\n\nexport async function asyncChangeFirstName(firstName) {\n  await delay();\n  return { firstName };\n}\n\nexport function changeLastName(lastName) {\n  return { lastName };\n}</code></pre>\n<p>å¯ä»»æ„ç»„åˆçš„reducerï¼Œå±äºåŒä¸€ä¸ªæ¨¡å—å†…çš„æ–¹æ³•å¯ä»¥ç›´æ¥åŸºäºæ–¹æ³•å¼•ç”¨è°ƒç”¨ï¼Œä¸”reducerå‡½æ•°å¹¶éå¼ºåˆ¶ä¸€å®šè¦è¿”å›ä¸€ä¸ªæ–°çš„ç‰‡æ–­çŠ¶æ€ï¼Œä»…ç”¨äºç»„åˆå…¶ä»–reducerä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>\n<pre><code class=\"jsx\">// reducerFn(payload:any, moduleState:{}, actionCtx:IActionCtx)\n// å½“lazyè°ƒç”¨æ­¤å‡½æ•°æ—¶ï¼Œä»»ä½•ä¸€ä¸ªå‡½æ•°å‡ºé”™äº†ï¼Œä¸­é—´è¿‡ç¨‹äº§ç”Ÿçš„æ‰€æœ‰çŠ¶æ€éƒ½ä¸ä¼šæäº¤åˆ°store\nexport async changeFirstNameAndLastName([firstName, lastName], m, ac){\n    await ac.dispatch(changeFirstName, firstName);\n    await ac.dispatch(changeFirstName, lastName);\n    // return {someNew:'xxx'};//å¯é€‰æ‹©æ­¤reducerä¹Ÿè¿”å›æ–°çš„ç‰‡æ–­çŠ¶æ€\n}\n\n// è§†å›¾å¤„\nfunction UI(){\n    const ctx useConcent('login');\n    // è§¦å‘ä¸¤æ¬¡æ¸²æŸ“\n    const normalCall = ()=&gt;ctx.mr.changeFirstNameAndLastName(['first', 'last']);\n    // è§¦å‘ä¸€æ¬¡æ¸²æŸ“\n    const lazyCall = ()=&gt;ctx.mr.changeFirstNameAndLastName(['first', 'last'], {lazy:true});\n    \n    return (\n        &lt;&gt;\n            &lt;button onClick={handleClick}&gt; normalCall &lt;/button&gt;\n            &lt;button onClick={handleClick}&gt; lazyCall &lt;/button&gt;\n        &lt;/&gt;\n    )\n}</code></pre>\n<p><strong><a href=\"https://stackblitz.com/edit/concent-lazy-dispatch\" rel=\"nofollow noreferrer\">lazyReducerç¤ºä¾‹</a></strong></p>\n<p>élazyè°ƒç”¨æµç¨‹</p>\n<p><img src=\"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/4.png\" alt=\"\" title=\"\" /></p>\n<p>lazyè°ƒç”¨æµç¨‹</p>\n<p><img src=\"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/5.png\" alt=\"\" title=\"\" /></p>\n<p>å½“ç„¶äº†ï¼Œé™¤äº†<code>reducer</code>ï¼Œå…¶ä»–3ç§æ–¹å¼éƒ½å¯ä»¥ä»»æ„æ­é…ï¼Œä¸”å’Œ<code>reducer</code>ä¸€æ ·æ‹¥æœ‰åŒæ­¥çŠ¶æ€åˆ°å…¶ä»–å±äºåŒä¸€ä¸ªæ¨¡å—ä¸”å¯¹æŸçŠ¶æ€æœ‰ä¾èµ–çš„å®ä¾‹ä¸Š</p>\n<ul>\n <li>setState</li>\n</ul>\n<pre><code class=\"js\">function FnUI(){\n    const {setState} = useConcent('login');\n    const changeName = e=&gt; setState({firstName:e.target.name});\n    // ... return ui\n}\n\n@register('login')\nclass ClsUI extends React.Component{\n    changeName = e=&gt; this.setState({firstName:e.target.name})\n    render(){...}\n}</code></pre>\n<ul>\n <li>invoke</li>\n</ul>\n<pre><code class=\"js\">function _changeName(firstName){\n    return {firstName};\n}\n\nfunction FnUI(){\n    const {invoke} = useConcent('login');\n    const changeName = e=&gt; invoke(_changeName, e.target.name);\n    // ... return ui\n}\n\n@register('login')\nclass ClsUI extends React.Component{\n    changeName = e=&gt; this.ctx.invoke(_changeName, e.target.name)\n    render(){...}\n}</code></pre>\n<ul>\n <li>sync</li>\n</ul>\n<p><strong><a href=\"https://codesandbox.io/s/green-tdd-g2mcr\" rel=\"nofollow noreferrer\">æ›´å¤šå…³äºsync, æŸ¥çœ‹App2-1-sync.jsæ–‡ä»¶</a></strong></p>\n<pre><code class=\"jsx\">function FnUI(){\n    const {sync, state} = useConcent('login');\n    return  &lt;input value={state.firstName} onChange={sync('firstName')} /&gt;\n}\n\n@register('login')\nclass ClsUI extends React.Component{\n    changeName = e=&gt; this.ctx.invoke(_changeName, e.target.name)\n    render(){\n        return  &lt;input value={this.state.firstName} onChange={this.ctx.sync('firstName')} /&gt;\n    }\n}</code></pre>\n<p>è¿˜è®°å¾—æˆ‘ä»¬åœ¨round 2å¼€å§‹æ¯”è¾ƒå‰å¯¹concentæåˆ°äº†è¿™æ ·ä¸€å¥è¯ï¼š<strong>èƒ½å¤Ÿä¸åªæ˜¯è¿½æº¯æ•°æ®ä¿®æ”¹å®Œæ•´é“¾è·¯ï¼Œè¿˜åŒ…æ‹¬è§¦å‘æ•°æ®ä¿®æ”¹çš„æºå¤´</strong>ï¼Œå®ƒæ˜¯ä½•å«ä¹‰å‘¢ï¼Œå› ä¸ºæ¯ä¸€ä¸ªconcentç»„ä»¶çš„<code>ctx</code>éƒ½æ‹¥æœ‰ä¸€ä¸ªå”¯ä¸€id<code>ccUniqueKey</code>æ ‡è¯†å½“å‰ç»„ä»¶å®ä¾‹ï¼Œå®ƒæ˜¯æŒ‰<code>{className}_{randomTag}_{seq}</code>è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œå³ç±»å(ä¸æä¾›æ˜¯å°±æ˜¯ç»„ä»¶ç±»å‹<code>$$CClass`, `$$CCFrag</code>, <code>$$CCHook</code>)åŠ éšæœºæ ‡ç­¾åŠ è‡ªå¢åºå·ï¼Œå¦‚æœæƒ³åˆ»æ„è¿½è¸ªä¿®æ”¹æºå¤´uiï¼Œåˆ™äººå·¥ç»´æŠ¤<code>tag</code>ï¼Œ<code>ccClassKey</code>æ—¢å¯ï¼Œå†é…åˆä¸Š<a href=\"https://github.com/concentjs/concent-plugin-redux-devtool/actions/new\" rel=\"nofollow noreferrer\">concent-plugin-redux-devtool</a>å°±èƒ½å®Œæˆæˆ‘ä»¬çš„ç›®æ ‡äº†ã€‚</p>\n<pre><code class=\"js\">function FnUI(){\n    const {sync, state, ccUniqueKey} = useConcent({module:'login', tag:'xxx'}, 'FnUI');\n    // tag å¯åŠ å¯ä¸åŠ ï¼Œ\n    // ä¸åŠ tagï¼ŒccUniqueKeyå½¢å¦‚: FnUI_xtst4x_1\n    // åŠ äº†tagï¼ŒccUniqueKeyå½¢å¦‚: FnUI_xxx_1\n}\n\n@register({module:'login', tag:'yyy'}, 'ClsUI')\nclass ClsUI extends React.Component{...}</code></pre>\n<p>æ¥å…¥<code>concent-plugin-redux-devtool</code>åï¼Œå¯ä»¥çœ‹åˆ°ä»»ä½•åŠ¨ä½œä¿®æ”¹Actioné‡Œéƒ½ä¼šåŒ…å«ä¸€ä¸ªå­—æ®µ<code>ccUniqueKey</code>ã€‚<br><img src=\"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/6.png\" alt=\"\" title=\"\" /></br></p>\n<h3>å›é¡¾ä¸æ€»ç»“</h3>\n<p>è¿™ä¸€ä¸ªå›åˆæˆ‘ä»¬é’ˆå¯¹æ•°æ®ä¿®æ”¹æ–¹å¼åšäº†å…¨é¢å¯¹æ¯”ï¼Œä»è€Œè®©å¼€å‘è€…äº†è§£åˆ°ä»<code>concent</code>çš„è§’åº¦æ¥è¯´ï¼Œä¸ºäº†å¼€å‘è€…çš„ç¼–ç ä½“éªŒåšå‡ºçš„å„æ–¹é¢å·¨å¤§åŠªåŠ›ã€‚</p>\n<p>é’ˆå¯¹çŠ¶æ€æ›´æ–°æ–¹å¼, å¯¹æ¯”<code>redux</code>ï¼Œå½“æˆ‘ä»¬çš„æ‰€æœ‰åŠ¨ä½œæµç¨‹å‹åˆ°æœ€çŸ­ï¼Œæ— action--&gt;reducerè¿™æ ·ä¸€æ¡é“¾è·¯ï¼Œæ— æ‰€è°“çš„å­˜å‡½æ•°è¿˜æ˜¯å‰¯ä½œç”¨å‡½æ•°çš„åŒºåˆ†(<code>rematch</code>ã€<code>dva</code>ç­‰æå–çš„æ¦‚å¿µ)ï¼ŒæŠŠè¿™äº›æ¦‚å¿µäº¤ç»™<code>js</code>è¯­æ³•æœ¬èº«ï¼Œä¼šæ˜¾å¾—æ›´åŠ æ–¹ä¾¿å’Œæ¸…æ™°ï¼Œä½ éœ€è¦çº¯å‡½æ•°ï¼Œå°±å†™<code>export function</code>ï¼Œéœ€è¦å‰¯ä½œç”¨å‡½æ•°å°±å†™<code>export async function</code>ã€‚</p>\n<p>å¯¹æ¯”<code>mobx</code>ï¼Œä¸€åˆ‡éƒ½æ˜¯å¯ä»¥ä»»ä½•æ‹†å¼€ä»»æ„ç»„åˆçš„åŸºç¡€å‡½æ•°ï¼Œæ²¡æœ‰<code>this</code>ï¼Œå½»åº•å¾—é¢å‘FPï¼Œç»™ä¸€ä¸ª<code>input</code>é¢„æœŸ<code>output</code>ï¼Œè¿™æ ·çš„æ–¹å¼å¯¹æµ‹è¯•å®¹å™¨ä¹Ÿæ›´åŠ å‹å¥½ã€‚</p>\n<table>\n <thead>\n  <tr>\n   <th>çŠ¶æ€ä¿®æ”¹</th>\n   <th>concent</th>\n   <th>mbox</th>\n   <th>redux</th>\n  </tr>\n </thead>\n <tbody>\n  <tr>\n   <td>åŸºäºä¸å¯å˜åŸåˆ™</td>\n   <td>Yes</td>\n   <td>No</td>\n   <td>Yes</td>\n  </tr>\n  <tr>\n   <td>æœ€çŸ­é“¾è·¯</td>\n   <td>Yes</td>\n   <td>Yes</td>\n   <td>No</td>\n  </tr>\n  <tr>\n   <td>uiæºå¤´å¯è¿½è¸ª</td>\n   <td>Yes</td>\n   <td>No</td>\n   <td>No</td>\n  </tr>\n  <tr>\n   <td>æ— this</td>\n   <td>Yes</td>\n   <td>No</td>\n   <td>Yes</td>\n  </tr>\n  <tr>\n   <td>åŸå­æ‹†åˆ†&amp;åˆå¹¶æäº¤</td>\n   <td>Yes(åŸºäºlazy)</td>\n   <td>Yes(åŸºäºtransaction)</td>\n   <td>No</td>\n  </tr>\n </tbody>\n</table>\n<h2>round 3 - ä¾èµ–æ”¶é›†</h2>\n<p>è¿™ä¸ªå›åˆæ˜¯éå¸¸é‡é‡çº§çš„ä¸€ä¸ªç¯èŠ‚ï¼Œä¾èµ–æ”¶é›†è®©uiæ¸²æŸ“å¯ä»¥ä¿æŒæœ€å°èŒƒå›´æ›´æ–°ï¼Œå³ç²¾ç¡®æ›´æ–°ï¼Œæ‰€ä»¥<code>vue</code>æŸäº›æµ‹è¯•æ–¹é¢ä¼šèƒœå‡º<code>react</code>ï¼Œå½“æˆ‘ä»¬ä¸º<code>react</code>æ’ä¸Šä¾èµ–æ”¶é›†çš„ç¿…è†€åï¼Œçœ‹çœ‹ä¼šæœ‰ä»€ä¹ˆæ›´æœ‰è¶£çš„äº‹æƒ…å‘ç”Ÿå§ã€‚</p>\n<p>å†å¼€å§‹èŠ<code>ä¾èµ–æ”¶é›†</code>ä¹‹å‰ï¼Œæˆ‘ä»¬å¤ç›˜ä¸€ä¸‹<code>react</code>åŸæœ¬çš„æ¸²æŸ“æœºåˆ¶å§ï¼Œå½“æŸä¸€ä¸ªç»„ä»¶å‘ç”ŸçŠ¶æ€æ”¹å˜æ—¶ï¼Œå¦‚æœå®ƒçš„è‡ªå®šä¹‰ç»„ä»¶æ²¡æœ‰äººå·¥ç»´æŠ¤<code>shouldComponentUpdate</code>åˆ¤æ–­æ—¶ï¼Œæ€»æ˜¯ä¼šä»ä¸Šå¾€ä¸‹å…¨éƒ¨æ¸²æŸ“ä¸€éï¼Œè€Œ<code>redux</code>çš„<code>cconnect</code>æ¥å£æ¥ç®¡äº†<code>shouldComponentUpdate</code>è¡Œä¸ºï¼Œå½“ä¸€ä¸ªactionè§¦å‘äº†åŠ¨ä½œä¿®æ”¹æ—¶ï¼Œæ‰€æœ‰connectè¿‡çš„ç»„ä»¶éƒ½ä¼šå°†ä¸Šä¸€åˆ»<code>mapStateToProps</code>å¾—åˆ°çš„çŠ¶æ€å’Œå½“å‰æœ€æ–°<code>mapStateToProps</code>å¾—åˆ°çš„çŠ¶æ€åšæµ…æ¯”è¾ƒï¼Œä»è€Œå†³å®šæ˜¯å¦è¦åˆ·æ–°åŒ…è£¹çš„å­ç»„ä»¶ã€‚</p>\n<p>åˆ°äº†hookæ—¶ä»£ï¼Œæä¾›äº†<code>React.memo</code>æ¥ç”¨æˆ·é˜»æ–­è¿™ç§\"æ ªè¿å¼\"çš„æ›´æ–°ï¼Œä½†æ˜¯éœ€è¦ç”¨æˆ·å°½é‡ä¼ é€’<code>primitive</code>ç±»å‹æ•°æ®æˆ–è€…ä¸å˜åŒ–çš„å¼•ç”¨ç»™<code>props</code>ï¼Œå¦åˆ™<code>React.memo</code>çš„æµ…æ¯”è¾ƒä¼šè¿”å›falseã€‚</p>\n<p>ä½†æ˜¯<code>redux</code>å­˜åœ¨çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå¦‚æœè§†å›¾é‡ŒæŸä¸€åˆ»å·²ç»ä¸å†ä½¿ç”¨æŸä¸ªçŠ¶æ€äº†ï¼Œå®ƒä¸è¯¥è¢«æ¸²æŸ“å´è¢«æ¸²æŸ“äº†ï¼Œ<code>mobx</code>æºå¸¦å¾—åŸºäºè¿è¡Œæ—¶è·å–åˆ°uiå¯¹æ•°æ®çš„æœ€å°è®¢é˜…å­é›†ç†å¿µä¼˜é›…çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯<code>concent</code>æ›´è¿‘ä¸€æ­¥å°†ä¾èµ–æ”¶é›†è¡Œä¸ºéšè—çš„æ›´ä¼˜é›…ï¼Œç”¨æˆ·ä¸éœ€è¦ä¸çŸ¥é“<code>observable</code>ç­‰ç›¸å…³æœ¯è¯­å’Œæ¦‚å¿µï¼ŒæŸä¸€æ¬¡æ¸²æŸ“ä½ å–å€¼æœ‰äº†ç‚¹è¿™ä¸ªå€¼çš„ä¾èµ–ï¼Œè€Œä¸‹ä¸€æ¬¡æ¸²æŸ“æ²¡æœ‰äº†å¯¹æŸä¸ª<code>stateKey</code>çš„å–å€¼è¡Œä¸ºå°±åº”è¯¥ç§»å‡ºä¾èµ–ï¼Œè¿™ä¸€ç‚¹<code>vue</code>åšå¾—å¾ˆå¥½ï¼Œä¸ºäº†è®©<code>react</code>æ‹¥æœ‰æ›´ä¼˜é›…ã€æ›´å…¨é¢çš„ä¾èµ–æ”¶é›†æœºåˆ¶ï¼Œ<code>concent</code>åŒæ ·åšå‡ºäº†å¾ˆå¤šåŠªåŠ›ã€‚</p>\n<h3>reduxç‰ˆæœ¬(ä¸æ”¯æŒ)</h3>\n<p>è§£å†³ä¾èµ–æ”¶é›†ä¸æ˜¯<code>redux</code>è¯ç”Ÿçš„åˆè¡·ï¼Œè¿™é‡Œæˆ‘ä»¬åªèƒ½é»˜é»˜çš„å°†å®ƒè¯·åˆ°å€™é€‰åŒºï¼Œå‚ä¸ä¸‹ä¸€è½®çš„è¾ƒé‡äº†ã€‚</p>\n<h3>mobxç‰ˆæœ¬(computed,useObserver)</h3>\n<p>åˆ©ç”¨è£…é¥°å™¨æˆ–è€…<code>decorate</code>å‡½æ•°æ ‡è®°è¦è§‚å¯Ÿçš„å±æ€§æˆ–è€…è®¡ç®—çš„å±æ€§</p>\n<pre><code class=\"js\">import { observable, action, computed } from \"mobx\";\n\nconst delay = (ms = 1000) =&gt; new Promise(r =&gt; setTimeout(r, ms));\n\nclass LoginStore {\n  @observable firstName = \"\";\n\n  @observable lastName = \"\";\n\n  @computed\n  get fullName(){\n    return `${this.firstName}_${this.lastName}`\n  }\n\n  @computed\n  get nickName(){\n    return `${this.firstName}&gt;&gt;nicknick`\n  }\n\n  @computed\n  get anotherNickName(){\n    return `${this.nickName}_another`\n  }\n}\n\nexport default new LoginStore();</code></pre>\n<p>uié‡Œä½¿ç”¨äº†è§‚å¯ŸçŠ¶æ€æˆ–è€…ç»“ç®—ç»“æœæ—¶ï¼Œå°±äº§ç”Ÿäº†ä¾èµ–</p>\n<ul>\n <li>ä»…å¯¹è®¡ç®—ç»“æœæœ‰ä¾èµ–ï¼Œç±»ç»„ä»¶å†™æ³•</li>\n</ul>\n<pre><code class=\"jsx\">@inject(\"store\")\n@observer\nclass LoginCls extends Component {\n  state = {show:true};\n  toggle = ()=&gt; this.setState({show:!this.state.show})\n  render() {\n    const login = this.props.store.login;\n    return (\n      &lt;&gt;\n        &lt;h1&gt;Cls Small Comp&lt;/h1&gt;\n        &lt;button onClick={this.toggle}&gt;toggle&lt;/button&gt;\n        {this.state.show ? &lt;div&gt; fullName:{login.fullName}&lt;/div&gt;: \"\"}\n      &lt;/&gt;\n    )\n  }\n}</code></pre>\n<ul>\n <li>ä»…å¯¹è®¡ç®—ç»“æœæœ‰ä¾èµ–ï¼Œå‡½æ•°ç»„ä»¶å†™æ³•</li>\n</ul>\n<pre><code class=\"jsx\">import { useObserver } from \"mobx-react\";\n\n// showä¸ºtrueæ—¶ï¼Œå½“å‰ç»„ä»¶è¯»å–äº†fullNameï¼Œ\n// fullNameç”±firstNameå’ŒlastNameè®¡ç®—è€Œå‡º\n// æ‰€ä»¥ä»–çš„ä¾èµ–æ˜¯firstNameã€lastName\n// å½“showä¸ºfalseæ—¶ï¼Œå½“å‰ç»„ä»¶æ— ä»»ä½•ä¾èµ–\nexport const LoginFnSmall = React.memo((props) =&gt; {\n  const [show, setShow] = React.useState(true);\n  const toggle = () =&gt; setShow(!show);\n  const { login } = store;\n\n  return useObserver(() =&gt; {\n    return (\n      &lt;&gt;\n        &lt;h1&gt;Fn Small Comp&lt;/h1&gt;\n        &lt;button onClick={toggle}&gt;toggle&lt;/button&gt;\n        {show ? &lt;div&gt; fullName:{login.fullName}&lt;/div&gt;: \"\"}\n      &lt;/&gt;\n    )\n  });\n});</code></pre>\n<p>å¯¹çŠ¶æ€æœ‰ä¾èµ–å’Œå¯¹è®¡ç®—ç»“æœæœ‰ä¾èµ–æ— ä»»ä½•åŒºåˆ«ï¼Œéƒ½æ˜¯åœ¨è¿è¡Œæ—¶ä»<code>this.props.login</code>ä¸Šè·å–ç›¸å…³ç»“æœå°±äº§ç”Ÿäº†uiå¯¹æ•°æ®çš„ä¾èµ–å…³ç³»ã€‚</p>\n<p><strong><a href=\"https://codesandbox.io/s/mobx-login-dx4wl\" rel=\"nofollow noreferrer\">æŸ¥çœ‹mobxç¤ºä¾‹</a></strong></p>\n<h3>concent(state,moduleComputed)</h3>\n<p>æ— éœ€ä»»ä½•è£…é¥°å™¨æ¥æ ‡è®°è§‚å¯Ÿå±æ€§å’Œè®¡ç®—ç»“æœï¼Œä»…ä»…æ˜¯æ™®é€šçš„<code>json</code>å¯¹è±¡å’Œå‡½æ•°ï¼Œè¿è¡Œæ—¶é˜¶æ®µè¢«è‡ªåŠ¨è½¬ä¸º<code>Proxy</code>å¯¹è±¡ã€‚</p>\n<p>è®¡ç®—ç»“æœä¾èµ–</p>\n<pre><code class=\"js\">// code in models/login/computed.js\n// n: newState, o: oldState, f: fnCtx\n\n// fullNameçš„ä¾èµ–æ˜¯firstName lastName\nexport function fullName(n, o, f){\n  return `${n.firstName}_${n.lastName}`;\n}\n\n// nickNameçš„ä¾èµ–æ˜¯firstName\nexport function nickName(n, o, f){\n  return `${n.firstName}&gt;&gt;nicknick`\n}\n\n// anotherNickNameåŸºäºnickNameç¼“å­˜ç»“æœåšäºŒæ¬¡è®¡ç®—ï¼Œè€ŒnickNameçš„ä¾èµ–æ˜¯firstName\n// æ‰€ä»¥anotherNickNameçš„ä¾èµ–æ˜¯firstNameï¼Œæ³¨æ„éœ€å°†æ­¤å‡½æ•°æ”¾ç½®åˆ°nickNameä¸‹é¢\nexport function anotherNickName(n, o, f){\n  return `${f.cuVal.nickName}_another`;\n}</code></pre>\n<ul>\n <li>ä»…å¯¹è®¡ç®—ç»“æœæœ‰ä¾èµ–ï¼Œç±»ç»„ä»¶å†™æ³•</li>\n</ul>\n<pre><code class=\"jsx\">@register({ module: \"login\" })\nclass _LoginClsSmall extends React.Component {\n  state = {show:true};\n  render() {\n    const { state, moduleComputed: mcu, syncBool } = this.ctx;\n\n    // showä¸ºtrueæ—¶å®ä¾‹çš„ä¾èµ–ä¸ºfirstName+lastName\n    // ä¸ºfalseæ—¶ï¼Œåˆ™æ— ä»»ä½•ä¾èµ–\n    return (\n      &lt;&gt;\n        &lt;h1&gt;Fn Small Comp&lt;/h1&gt;\n        &lt;button onClick={syncBool(\"show\")}&gt;toggle&lt;/button&gt;\n        {state.show ? &lt;div&gt; fullName:{mcu.fullName}&lt;/div&gt; : \"\"}\n      &lt;/&gt;\n    );\n  }\n}</code></pre>\n<ul>\n <li>ä»…å¯¹è®¡ç®—ç»“æœæœ‰ä¾èµ–ï¼Œå‡½æ•°ç»„ä»¶å†™æ³•</li>\n</ul>\n<pre><code class=\"jsx\">export const LoginFnSmall = React.memo(props =&gt; {\n  const { state, moduleComputed: mcu, syncBool } = useConcent({\n    module: \"login\",\n    state: { show: true }\n  });\n\n  return (\n    &lt;&gt;\n      &lt;h1&gt;Fn Small Comp&lt;/h1&gt;\n      &lt;button onClick={syncBool(\"show\")}&gt;toggle&lt;/button&gt;\n      {state.show ? &lt;div&gt; fullName:{mcu.fullName}&lt;/div&gt; : \"\"}\n    &lt;/&gt;\n  );\n});</code></pre>\n<p>å’Œ<code>mobx</code>ä¸€æ ·ï¼Œå¯¹çŠ¶æ€æœ‰ä¾èµ–å’Œå¯¹è®¡ç®—ç»“æœæœ‰ä¾èµ–æ— ä»»ä½•åŒºåˆ«ï¼Œåœ¨è¿è¡Œæ—¶ä»<code>ctx.state</code>ä¸Šè·å–ç›¸å…³ç»“æœå°±äº§ç”Ÿäº†uiå¯¹æ•°æ®çš„ä¾èµ–å…³ç³»ï¼Œæ¯ä¸€æ¬¡æ¸²æŸ“<code>concent</code>éƒ½åœ¨åŠ¨æ€çš„æ”¶é›†å½“å‰å®ä¾‹æœ€æ–°çš„ä¾èµ–ï¼Œåœ¨å®ä¾‹<code>didUpdate</code>é˜¶æ®µç§»å‡ºå·²æ¶ˆå¤±çš„ä¾èµ–ã€‚</p>\n<ul>\n <li>ç”Ÿå‘½å‘¨æœŸä¾èµ–</li>\n</ul>\n<p><code>concent</code>çš„æ¶æ„é‡Œæ˜¯ç»Ÿä¸€äº†ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„ï¼Œæ‰€ä»¥å½“æŸä¸ªçŠ¶æ€è¢«æ”¹å˜æ—¶ï¼Œå¯¹æ­¤æœ‰ä¾èµ–çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¼šè¢«è§¦å‘ï¼Œå¹¶æ”¯æŒç±»ä¸å‡½æ•°å…±äº«æ­¤é€»è¾‘</p>\n<p><img src=\"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/7.png\" alt=\"\" title=\"\" /></p>\n<pre><code class=\"js\">export const setupSm = ctx=&gt;{\n  // å½“firstNameæ”¹å˜æ—¶ï¼Œç»„ä»¶æ¸²æŸ“æ¸²æŸ“å®Œæ¯•åä¼šè§¦å‘\n  ctx.effect(()=&gt;{\n    console.log('fisrtName changed', ctx.state.fisrtName);\n  }, ['firstName'])\n}\n\n// ç±»ç»„ä»¶é‡Œä½¿ç”¨\nexport const LoginFnSmall = React.memo(props =&gt; {\n  console.log('Fn Comp ' + props.tag);\n  const { state, moduleComputed: mcu, sync } = useConcent({\n    module: \"login\",setup: setupSm, state: { show: true }\n  });\n  //...\n}\n\n// å‡½æ•°ç»„ä»¶é‡Œä½¿ç”¨\n@register({ module: \"login\", setup:setupSm })\nclass _LoginClsSmall extends React.Component {...}</code></pre>\n<p><strong><a href=\"https://codesandbox.io/s/concent-login-ylbl4\" rel=\"nofollow noreferrer\">æŸ¥çœ‹concentç¤ºä¾‹</a></strong></p>\n<p><strong><a href=\"https://juejin.im/post/5deb43256fb9a0166316c3e9\" rel=\"nofollow noreferrer\">æŸ¥çœ‹æ›´å¤šå…³äºctx.effect</a></strong></p>\n<h3>å›é¡¾ä¸æ€»ç»“</h3>\n<p>åœ¨ä¾èµ–æ”¶é›†è¿™ä¸€ä¸ªå›åˆï¼Œ<code>concent</code>çš„ä¾èµ–æ”¶é›†å½¢å¼ã€å’Œç»„ä»¶è¡¨è¾¾å½¢å¼ï¼Œå’Œ<code>mobx</code>åŒºåˆ«éƒ½éå¸¸å¤§ï¼Œæ•´ä¸ªä¾èµ–æ”¶é›†è¿‡ç¨‹æ²¡æœ‰ä»»ä½•å…¶ä»–å¤šä½™çš„apiä»‹å…¥, è€Œ<code>mbox</code>éœ€ç”¨<code>computed</code>ä¿®é¥°getterå­—æ®µï¼Œåœ¨å‡½æ•°ç»„ä»¶éœ€è¦ä½¿ç”¨<code>useObserver</code>åŒ…çŠ¶æ€è¿”å›UIï¼Œ<code>concent</code>æ›´æ³¨é‡ä¸€åˆ‡çš†å‡½æ•°ï¼Œåœ¨ç»„ç»‡è®¡ç®—ä»£ç çš„è¿‡ç¨‹ä¸­æ¶ˆé™¤çš„<code>this</code>è¿™ä¸ªå…³é”®å­—ï¼Œåˆ©ç”¨<code>fnCtx</code>å‡½æ•°ä¸Šä¸‹æ–‡ä¼ é€’å·²è®¡ç®—ç»“æœï¼ŒåŒæ—¶æ˜¾å¼çš„åŒºåˆ†<code>state</code>å’Œ<code>computed</code>çš„ç››æ”¾å®¹å™¨å¯¹è±¡ã€‚</p>\n<table>\n <thead>\n  <tr>\n   <th>ä¾èµ–æ”¶é›†</th>\n   <th>concent</th>\n   <th>mbox</th>\n   <th>redux</th>\n  </tr>\n </thead>\n <tbody>\n  <tr>\n   <td>æ”¯æŒè¿è¡Œæ—¶æ”¶é›†ä¾èµ–</td>\n   <td>Yes</td>\n   <td>Yes</td>\n   <td>No</td>\n  </tr>\n  <tr>\n   <td>ç²¾å‡†æ¸²æŸ“</td>\n   <td>Yes</td>\n   <td>Yes</td>\n   <td>No</td>\n  </tr>\n  <tr>\n   <td>æ— this</td>\n   <td>Yes</td>\n   <td>No</td>\n   <td>No</td>\n  </tr>\n  <tr>\n   <td>åªéœ€ä¸€ä¸ªapiä»‹å…¥</td>\n   <td>Yes</td>\n   <td>No</td>\n   <td>No</td>\n  </tr>\n </tbody>\n</table>\n<h2>round 4 - è¡ç”Ÿæ•°æ®</h2>\n<p>è¿˜è®°å¾—<code>mobx</code>çš„å£å·å—ï¼Ÿä»»ä½•å¯ä»¥ä»åº”ç”¨ç¨‹åºçŠ¶æ€æ´¾ç”Ÿçš„å†…å®¹éƒ½åº”è¯¥æ´¾ç”Ÿï¼Œæ­ç¤ºäº†ä¸€ä¸ªçš„çš„ç¡®ç¡®å­˜åœ¨ä¸”æˆ‘ä»¬æ— æ³•é€ƒé¿çš„é—®é¢˜ï¼Œå¤§å¤šæ•°åº”ç”¨çŠ¶æ€ä¼ é€’ç»™uiä½¿ç”¨å‰éƒ½ä¼šä¼´éšç€ä¸€ä¸ªè®¡ç®—è¿‡ç¨‹ï¼Œå…¶è®¡ç®—ç»“æœæˆ‘ä»¬ç§°ä¹‹ä¸ºè¡ç”Ÿæ•°æ®ã€‚</p>\n<p>æˆ‘ä»¬éƒ½çŸ¥é“åœ¨<code>vue</code>é‡Œå·²å†…ç½®äº†è¿™ä¸ªæ¦‚å¿µï¼Œæš´éœ²äº†ä¸€ä¸ªå¯é€‰é¡¹<code>computed</code>ç”¨äºå¤„ç†è®¡ç®—è¿‡ç¨‹å¹¶ç¼“å­˜è¡ç”Ÿæ•°æ®ï¼Œ<code>react</code>å¹¶æ— æ­¤æ¦‚å¿µï¼Œ<code>redux</code>ä¹Ÿå¹¶ä¸æä¾›æ­¤èƒ½åŠ›ï¼Œä½†æ˜¯<code>redux</code>å¼€æ”¾çš„ä¸­é—´ä»¶æœºåˆ¶è®©ç¤¾åŒºå¾—ä»¥æ‰¾åˆ°åˆ‡å…¥ç‚¹æ”¯æŒæ­¤èƒ½åŠ›ï¼Œæ‰€ä»¥æ­¤å¤„æˆ‘ä»¬é’ˆå¯¹<code>redux</code>è¯´åˆ°çš„è®¡ç®—æŒ‡çš„å·²æˆä¸ºäº‹å®ä¸Šçš„æµè¡Œæ ‡å‡†åº“<code>reslect</code>.</p>\n<p><code>mobx</code>å’Œ<code>concent</code>éƒ½è‡ªå¸¦è®¡ç®—æ”¯æŒï¼Œæˆ‘ä»¬åœ¨ä¸Šé¢çš„<strong>ä¾èµ–æ”¶é›†</strong>å›åˆé‡Œå·²ç»æ¼”ç¤ºäº†<code>mobx</code>å’Œ<code>concent</code>çš„è¡ç”Ÿæ•°æ®ä»£ç ï¼Œæ‰€ä»¥æ­¤è½®ä»…é’ˆå¯¹<code>redux</code>ä¹¦å†™è¡ç”Ÿæ•°æ®ç¤ºä¾‹</p>\n<h3>redux(reselect)</h3>\n<p>reduxæœ€æ–°å‘å¸ƒ<code>v7</code>ç‰ˆæœ¬ï¼Œæš´éœ²äº†ä¸¤ä¸ªapiï¼Œ<code>useDispatch</code>å’Œ<code>useSelector</code>ï¼Œç”¨æ³•ä»¥ä¹‹å‰çš„<code>mapStateToState</code>å’Œ<code>mapDispatchToProps</code>å®Œå…¨å¯¹ç­‰ï¼Œæˆ‘ä»¬çš„ç¤ºä¾‹é‡Œä¼šç”¨ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶éƒ½æ¼”ç¤ºå‡ºæ¥ã€‚</p>\n<p>å®šä¹‰selector</p>\n<pre><code class=\"js\">import { createSelector } from \"reselect\";\n\n// getterï¼Œä»…ç”¨äºå–å€¼ï¼Œä¸å‚ä¸è®¡ç®—\nconst getFirstName = state =&gt; state.login.firstName;\nconst getLastName = state =&gt; state.login.lastName;\n\n// selectorï¼Œç­‰åŒäºcomputedï¼Œæ‰‹åŠ¨ä¼ å…¥è®¡ç®—ä¾èµ–å…³ç³»\nexport const selectFullName = createSelector(\n  [getFirstName, getLastName],\n  (firstName, lastName) =&gt; `${firstName}_${lastName}`\n);\n\nexport const selectNickName = createSelector(\n  [getFirstName],\n  (firstName) =&gt; `${firstName}&gt;&gt;nicknick`\n);\n\nexport const selectAnotherNickName = createSelector(\n  [selectNickName],\n  (nickname) =&gt; `${nickname}_another`\n);\n</code></pre>\n<p>ç±»ç»„ä»¶è·å–selector</p>\n<pre><code class=\"js\">import React from \"react\";\nimport { connect } from \"react-redux\";\nimport * as loginAction from \"models/login/action\";\nimport {\n  selectFullName,\n  selectNickName,\n  selectAnotherNickName\n} from \"models/login/selector\";\n\n@connect(\n  state =&gt; ({\n    firstName: state.login.firstName,\n    lastName: state.login.lastName,\n    fullName: selectFullName(state),\n    nickName: selectNickName(state),\n    anotherNickName: selectAnotherNickName(state),\n  }), // mapStateToProps\n  dispatch =&gt; ({\n    // mapDispatchToProps\n    changeFirstName: e =&gt;\n      dispatch(loginAction.changeFirstName(e.target.value)),\n    asyncChangeFirstName: e =&gt;\n      dispatch(loginAction.asyncChangeFirstName(e.target.value)),\n    changeLastName: e =&gt; dispatch(loginAction.changeLastName(e.target.value))\n  })\n)\nclass Counter extends React.Component {\n  render() {\n    const {\n      firstName,\n      lastName,\n      fullName,\n      nickName,\n      anotherNickName,\n      changeFirstName,\n      asyncChangeFirstName,\n      changeLastName\n    } = this.props;\n    return 'ui ...'\n  }\n}\n\nexport default Counter;</code></pre>\n<p>å‡½æ•°ç»„ä»¶è·å–selector</p>\n<pre><code class=\"js\">import * as React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport * as loginAction from \"models/login/action\";\nimport {\n  selectFullName,\n  selectNickName,\n  selectAnotherNickName\n} from \"models/login/selector\";\n\nconst Counter = () =&gt; {\n  const { firstName, lastName } = useSelector(state =&gt; state.login);\n  const fullName = useSelector(selectFullName);\n  const nickName = useSelector(selectNickName);\n  const anotherNickName = useSelector(selectAnotherNickName);\n  const dispatch = useDispatch();\n  const changeFirstName = (e) =&gt; dispatch(loginAction.changeFirstName(e.target.value));\n  const asyncChangeFirstName = (e) =&gt; dispatch(loginAction.asyncChangeFirstName(e.target.value));\n  const changeLastName = (e) =&gt; dispatch(loginAction.changeLastName(e.target.value));\n\n  return 'ui...'\n  );\n};\n\nexport default Counter;</code></pre>\n<p><strong><a href=\"https://codesandbox.io/s/redux-login-6uqg8\" rel=\"nofollow noreferrer\">reduxè¡ç”Ÿæ•°æ®åœ¨çº¿ç¤ºä¾‹</a></strong></p>\n<h3>mobx(computedè£…é¥°å™¨)</h3>\n<p>è§ä¸Šé¢ä¾èµ–æ”¶é›†çš„å®ä¾‹ä»£ç ï¼Œæ­¤å¤„ä¸å†é‡å™ã€‚</p>\n<h3>concent(moduleComputedç›´æ¥è·å–)</h3>\n<p>è§ä¸Šé¢ä¾èµ–æ”¶é›†çš„å®ä¾‹ä»£ç ï¼Œæ­¤å¤„ä¸å†é‡å™ã€‚</p>\n<h3>å›é¡¾ä¸æ€»ç»“</h3>\n<p>ç›¸æ¯”<code>mobx</code>å¯ä»¥ç›´æ¥ä»<code>this.pops.someStore</code>è·å–ï¼Œ<code>concent</code>å¯ä»¥ç›´æ¥ä»<code>ctx.moduleComputed</code>ä¸Šè·å–ï¼Œå¤šäº†ä¸€ä¸ªæ‰‹åŠ¨ç»´æŠ¤è®¡ç®—ä¾èµ–çš„è¿‡ç¨‹æˆ–æ˜ å°„æŒ‘é€‰ç»“æœçš„è¿‡ç¨‹ï¼Œç›¸ä¿¡å“ªç§æ–¹å¼æ˜¯å¼€å‘è€…æ›´æ„¿æ„ä½¿ç”¨çš„è¿™ä¸ªç»“æœå·²ç»ä¸€ç›®äº†ç„¶äº†ã€‚</p>\n<table>\n <thead>\n  <tr>\n   <th>è¡ç”Ÿæ•°æ®</th>\n   <th>concent</th>\n   <th>mbox</th>\n   <th>redux(reselect)</th>\n  </tr>\n </thead>\n <tbody>\n  <tr>\n   <td>è‡ªåŠ¨ç»´æŠ¤è®¡ç®—ç»“æœä¹‹é—´çš„ä¾èµ–</td>\n   <td>Yes</td>\n   <td>Yes</td>\n   <td>No</td>\n  </tr>\n  <tr>\n   <td>è§¦å‘è¯»å–è®¡ç®—ç»“æœæ—¶æ”¶é›†ä¾èµ–</td>\n   <td>Yes</td>\n   <td>Yes</td>\n   <td>No</td>\n  </tr>\n  <tr>\n   <td>è®¡ç®—å‡½æ•°æ— this</td>\n   <td>Yes</td>\n   <td>No</td>\n   <td>Yes</td>\n  </tr>\n </tbody>\n</table>\n<h2>round 5 - å®æˆ˜TodoMvc</h2>\n<p>ä¸Šé¢4ä¸ªå›åˆç»“åˆäº†ä¸€ä¸ªä¸ªé²œæ´»çš„ä»£ç ç¤ºä¾‹ï¼Œç»¼è¿°äº†3ä¸ªæ¡†æ¶çš„ç‰¹ç‚¹ä¸ç¼–ç é£æ ¼ï¼Œç›¸ä¿¡è¯»è€…æœŸæœ›èƒ½æœ‰æ›´åŠ æ¥è¿‘ç”Ÿäº§ç¯å¢ƒçš„ä»£ç ç¤ºä¾‹æ¥çœ‹å‡ºå…¶å·®å¼‚æ€§å§ï¼Œé‚£ä¹ˆæœ€åè®©æˆ‘ä»¬ä»¥<code>TodoMvc</code>æ¥æ”¶å°¾è¿™æ¬¡ç‰¹æ€§å¤§æ¯”æ‹¼ï¼ŒæœŸå¾…ä½ èƒ½å¤Ÿæ›´å¤šçš„äº†è§£å¹¶ä½“éªŒ<code>concent</code>ï¼Œå¼€å¯ <strong>ä¸å¯å˜</strong> &amp; <strong>ä¾èµ–æ”¶é›†</strong> çš„reactç¼–ç¨‹ä¹‹æ—…å§ã€‚</p>\n<h3>redux-todo-mvc</h3>\n<p><strong><a href=\"https://codesandbox.io/s/todo-mvc-redux-49kg0\" rel=\"nofollow noreferrer\">æŸ¥çœ‹redux-todo-mvcæ¼”ç¤º</a></strong></p>\n<p>action ç›¸å…³</p>\n<p><img src=\"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/8.png\" alt=\"\" title=\"\" /></p>\n<p>reducer ç›¸å…³</p>\n<p><img src=\"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/9.png\" alt=\"\" title=\"\" /></p>\n<p>computed ç›¸å…³</p>\n<p><img src=\"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/10.png\" alt=\"\" title=\"\" /></p>\n<h3>mobx-todo-mvc</h3>\n<p><strong><a href=\"https://codesandbox.io/s/todo-mvc-mbox-k42q1\" rel=\"nofollow noreferrer\">æŸ¥çœ‹mobx-todo-mvcæ¼”ç¤º</a></strong></p>\n<p>action ç›¸å…³</p>\n<p><img src=\"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/11.png\" alt=\"\" title=\"\" /></p>\n<p>computed ç›¸å…³</p>\n<p><img src=\"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/12.png\" alt=\"\" title=\"\" /></p>\n<h3>concent-todo-mvc</h3>\n<p><strong><a href=\"https://codesandbox.io/s/todoapp-react-concent-fvgvc\" rel=\"nofollow noreferrer\">æŸ¥çœ‹concent-todo-mvcæ¼”ç¤º</a></strong></p>\n<p>reducerç›¸å…³</p>\n<p><img src=\"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/13.png\" alt=\"\" title=\"\" /></p>\n<p>computedç›¸å…³</p>\n<p><img src=\"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/14.png\" alt=\"\" title=\"\" /></p>\n<h2>end</h2>\n<p>æœ€åè®©æˆ‘ä»¬ç”¨ä¸€ä¸ª<a href=\"https://codesandbox.io/s/concent-watch-7j0mw\" rel=\"nofollow noreferrer\">æœ€ç®€ç‰ˆæœ¬çš„concentåº”ç”¨</a>ç»“æŸæ­¤æ–‡ï¼Œæœªæ¥çš„ä½ ä¼šé€‰æ‹©concentä½œä¸ºä½ çš„reactå¼€å‘æ­¦å™¨å—ï¼Ÿ</p>\n<pre><code class=\"jsx\">import React from \"react\";\nimport \"./styles.css\";\nimport { run, useConcent, defWatch } from 'concent';\n\nrun({\n  login:{\n    state:{\n      name:'c2',\n      addr:'bj',\n      info:{\n        sex: '1',\n        grade: '19',\n      }\n    },\n    reducer:{\n      selectSex(sex, moduleState){\n        const info = moduleState.info;\n        info.sex = sex;\n        return {info};\n      }\n    },\n    computed: {\n      funnyName(newState){\n        // æ”¶é›†åˆ°funnyNameå¯¹åº”çš„ä¾èµ–æ˜¯ name\n        return `${newState.name}_${Date.now()}`\n      },\n      otherFunnyName(newState, oldState, fnCtx){\n        // è·å–äº†funnyNameçš„è®¡ç®—ç»“æœå’ŒnewState.addrä½œä¸ºè¾“å…¥å†æ¬¡è®¡ç®—\n        // æ‰€ä»¥è¿™é‡Œæ”¶é›†åˆ°otherFunnyNameå¯¹åº”çš„ä¾èµ–æ˜¯ name addr\n        return `${fnCtx.cuVal.funnyName}_${newState.addr}`\n      }\n    },\n    watch:{\n      // watchKey nameå’ŒstateKeyåŒåï¼Œé»˜è®¤ç›‘å¬nameå˜åŒ–\n      name(newState, oldState){\n        console.log(`name changed from ${newState.name} to ${oldState.name}`);\n      },\n      // ä»newState è¯»å–äº†addrï¼Œ infoä¸¤ä¸ªå±æ€§çš„å€¼ï¼Œå½“å‰watchå‡½æ•°çš„ä¾èµ–æ˜¯ addr, info\n      // å®ƒä»¬ä»»æ„ä¸€ä¸ªå‘ç”Ÿå˜åŒ–æ—¶ï¼Œéƒ½ä¼šè§¦å‘æ­¤watchå‡½æ•°\n      addrOrInfoChanged: defWatch((newState, oldState, fnCtx)=&gt;{\n        const {addr, info} = newState;\n        if(fnCtx.isFirstCall)return;// ä»…ä¸ºäº†æ”¶é›†åˆ°ä¾èµ–ï¼Œä¸æ‰§è¡Œé€»è¾‘\n        console.log(`addr is${addr}, info is${JSON.stringify(info)}`);\n      }, {immediate:true})\n    }\n  }\n})\n\nfunction UI(){\n  console.log('UI with state value');\n  const {state, sync, dispatch} = useConcent('login');\n  return (\n    &lt;div&gt;\n      name:&lt;input value={state.name} onChange={sync('name')} /&gt;\n      addr:&lt;input value={state.addr} onChange={sync('addr')} /&gt;\n      &lt;br /&gt;\n      info.sex:&lt;input value={state.info.sex} onChange={sync('info.sex')} /&gt;\n      info.grade:&lt;input value={state.info.grade} onChange={sync('info.grade')} /&gt;\n      &lt;br /&gt;\n      &lt;select value={state.info.sex} onChange={(e)=&gt;dispatch('selectSex', e.target.value)}&gt;\n        &lt;option value=\"male\"&gt;male&lt;/option&gt;\n        &lt;option value=\"female\"&gt;female&lt;/option&gt;\n      &lt;/select&gt;\n    &lt;/div&gt;\n  );\n}\n\nfunction UI2(){\n  console.log('UI2 with comptued value');\n  const {state, moduleComputed, syncBool} = useConcent({module:'login', state:{show:true}});\n  return (\n    &lt;div&gt;\n      {/* å½“showä¸ºtrueçš„æ—¶å€™ï¼Œå½“å‰ç»„ä»¶çš„ä¾èµ–æ˜¯funnyNameå¯¹åº”çš„ä¾èµ– name */}\n      {state.show? &lt;span&gt;dep is name: {moduleComputed.funnyName}&lt;/span&gt; : 'UI2 no deps now'}\n      &lt;br/&gt;&lt;button onClick={syncBool('show')}&gt;toggle show&lt;/button&gt;\n    &lt;/div&gt;\n  );\n}\n\nfunction UI3(){\n  console.log('UI3 with comptued value');\n  const {state, moduleComputed, syncBool} = useConcent({module:'login', state:{show:true}});\n  return (\n    &lt;div&gt;\n      {/* å½“showä¸ºtrueçš„æ—¶å€™ï¼Œå½“å‰ç»„ä»¶çš„ä¾èµ–æ˜¯funnyNameå¯¹åº”çš„ä¾èµ– name addr */}\n      {state.show? &lt;span&gt;dep is name,addr: {moduleComputed.otherFunnyName}&lt;/span&gt; : 'UI3 no deps now'}\n      &lt;br/&gt;&lt;button onClick={syncBool('show')}&gt;toggle show&lt;/button&gt;\n    &lt;/div&gt;\n  );\n}\n\nexport default function App() {\n  return (\n    &lt;div className=\"App\"&gt;\n      &lt;h3&gt;try click toggle btn and open console to see render log&lt;/h3&gt;\n      &lt;UI /&gt;\n      &lt;UI /&gt;\n      &lt;UI2 /&gt;\n      &lt;UI3 /&gt;\n    &lt;/div&gt;\n  );\n}</code></pre>\n<p><a href=\"https://github.com/concentjs/concent\" rel=\"nofollow noreferrer\">â¤ star me if you like concent ^_^</a></p>\n<p><a href=\"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/15.png\" rel=\"nofollow noreferrer\">Edit on CodeSandbox</a><br><img src=\"https://segmentfault.com/img/remote/1460000022332831\" alt=\"https://codesandbox.io/s/concent-guide-xvcej\" title=\"https://codesandbox.io/s/concent-guide-xvcej\" /></br></p>\n<p><a href=\"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/16.png\" rel=\"nofollow noreferrer\">Edit on StackBlitz</a><br><img src=\"https://segmentfault.com/img/remote/1460000022332833\" alt=\"https://stackblitz.com/edit/cc-multi-ways-to-wirte-code\" title=\"https://stackblitz.com/edit/cc-multi-ways-to-wirte-code\" /></br></p>","descriptionType":"html","publishedDate":"Fri, 10 Apr 2020 11:20:28 +0000","feedId":6615,"bgimg":"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/banner-rmc-compare.png","linkMd5":"cb41ea759b4fff7fa2c9b843d9a3559f","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn26@2020_4/2020/08/24/23-08-20-365_ca3ba6545607b5e9.webp","destWidth":900,"destHeight":383,"sourceBytes":526228,"destBytes":26564,"author":"é’Ÿæ­£æ¥·","articleImgCdnMap":{"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/banner-rmc-compare.png":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn26@2020_4/2020/08/24/23-08-20-365_ca3ba6545607b5e9.webp","https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/1.png":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn100@2020_2/2020/08/24/23-08-39-801_b3b0bbd56733612b.webp","https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/2.png":"https://cdn.jsdelivr.net/gh/myreaderx13/cdn47@2020_4/2020/08/24/23-08-39-007_71ea8796fe8a5213.webp","https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/3.png":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn28@2020_2/2020/08/24/23-08-38-581_dc3226984ea6a4b1.webp","https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/4.png":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn68@2020_3/2020/08/24/23-08-38-545_133d4c84d77e836a.webp","https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/5.png":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn8@2020_3/2020/08/24/23-08-43-737_c66e8101d9194ace.webp","https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/6.png":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn51@2020_2/2020/08/24/23-08-42-743_5e3a1f6dde644120.webp","https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/7.png":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn98@2020_5/2020/08/24/23-08-41-746_deecbd4b726849a4.webp","https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/8.png":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn12@2020_5/2020/08/24/23-08-40-119_7b2769b97c50b3fb.webp","https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/9.png":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn82@2020_6/2020/08/24/23-08-29-965_b89ab3d0fde9ac24.webp","https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/10.png":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn17@2020_3/2020/08/24/23-08-42-141_e9b5f179c2619f81.webp","https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/11.png":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn3@2020_4/2020/08/24/23-08-38-385_6664d5c4cdec1a50.webp","https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/12.png":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn80@2020_6/2020/08/24/23-08-38-200_ba0f32660e8bc151.webp","https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/13.png":"https://cdn.jsdelivr.net/gh/myreaderx/cdn88@2020_2/2020/08/24/23-08-39-593_22e0b3f2ff5b9946.webp","https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/14.png":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn51@2020_4/2020/08/24/23-08-38-994_c44d50e66064c4ab.webp","https://segmentfault.com/img/remote/1460000022332831":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn54@2020_6/2020/08/24/23-08-33-768_ab7bb1a669ed6d43.webp","https://segmentfault.com/img/remote/1460000022332833":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn62@2020_5/2020/08/24/23-08-34-275_d188d26ff603bb94.webp"},"publishedOrCreatedDate":1598310388576},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"JavaScriptä¸­çš„å‡½æ•°å¼ç¼–ç¨‹","link":"https://segmentfault.com/a/1190000023685018","description":"<h3>å‡½æ•°å¼ç¼–ç¨‹</h3>\n<p>å‡½æ•°å¼ç¼–ç¨‹æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œæ˜¯ä¸€ç§æ„å»ºè®¡ç®—æœºç¨‹åºç»“æ„å’Œå…ƒç´ çš„é£æ ¼ï¼Œå®ƒæŠŠè®¡ç®—çœ‹ä½œæ˜¯å¯¹æ•°å­¦å‡½æ•°çš„è¯„ä¼°ï¼Œé¿å…äº†çŠ¶æ€çš„å˜åŒ–å’Œæ•°æ®çš„å¯å˜ï¼Œä¸å‡½æ•°å¼ç¼–ç¨‹ç›¸å¯¹çš„æ˜¯å‘½ä»¤å¼ç¼–ç¨‹ã€‚æˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼Œç»™æ•°ç»„çš„æ¯ä¸ªæ•°å­—åŠ ä¸€ï¼š</p>\n<pre><code class=\"javascript\">// æ•°ç»„æ¯ä¸ªæ•°å­—åŠ ä¸€, å‘½ä»¤å¼ç¼–ç¨‹\nlet arr = [1, 2, 3, 4];\nlet newArr = [];\nfor(let i = 0; i &lt; arr.length; i++){\n  newArr.push(arr[i] + 1);\n}\n\nconsole.log(newArr); // [2, 3, 4, 5]</code></pre>\n<p>è¿™æ®µä»£ç ç»“æœæ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯æ²¡æ³•é‡ç”¨ã€‚æˆ‘ä»¬æ¢ä¸€ä¸ªæ€ç»´ï¼Œè¿™é‡Œé¢åŒ…å«çš„æ“ä½œå…¶å®å°±ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯éå†æ•°ç»„ï¼Œä¸€ä¸ªæ˜¯æˆå‘˜åŠ ä¸€ã€‚æˆ‘ä»¬æŠŠè¿™ä¸¤ä¸ªæ–¹æ³•æ‹†å‡ºæ¥ï¼š</p>\n<pre><code class=\"javascript\">// å…ˆæ‹†åŠ ä¸€å‡ºæ¥\nlet add1 = x =&gt; x +1;\n\n// ç„¶åæ‹†éå†æ–¹æ³•å‡ºæ¥ï¼Œé€šè¿‡éå†è¿”å›ä¸€ä¸ªæ“ä½œåçš„æ–°æ•°ç»„\n// fnæ˜¯æˆ‘ä»¬éœ€è¦å¯¹æ¯ä¸ªæ•°ç»„æƒ³è¿›è¡Œçš„æ“ä½œ\nlet createArr = (arr, fn) =&gt; {\n  const newArr = [];\n  for(let i = 0; i &lt; arr.length; i++){\n    newArr.push(fn(arr[i]));\n  }\n\n  return newArr;\n} \n\n// ç”¨è¿™ä¸¤ä¸ªæ–¹æ³•æ¥å¾—åˆ°æˆ‘ä»¬æœŸæœ›çš„ç»“æœ\nconst arr = [1, 2, 3, 4];\nconst newArr = createArr(arr, add1);\nconsole.log(newArr);  // [2, 3, 4, 5], ç»“æœä»ç„¶æ˜¯å¯¹çš„</code></pre>\n<p>è¿™æ ·æ‹†åˆ†åï¼Œå¦‚æœæˆ‘ä»¬ä¸‹æ¬¡çš„éœ€æ±‚æ˜¯å¯¹æ•°ç»„æ¯ä¸ªå…ƒç´ ä¹˜ä»¥2ï¼Œæˆ‘ä»¬åªéœ€è¦å†™ä¸€ä¸ªä¹˜æ³•çš„æ–¹æ³•ï¼Œç„¶åå¤ç”¨ä¹‹å‰çš„ä»£ç å°±è¡Œï¼š</p>\n<pre><code class=\"javascript\">let multiply2 = x =&gt; x * 2;\n\n// è°ƒç”¨ä¹‹å‰çš„createArr\nconst arr2 = [1, 2, 3, 4];\nconst newArr2 = createArr(arr2, multiply2);\nconsole.log(newArr2);  // [2, 4, 6, 8], ç»“æœæ˜¯å¯¹çš„</code></pre>\n<p>äº‹å®ä¸Šæˆ‘ä»¬çš„åŠ ä¸€å‡½æ•°åªèƒ½åŠ ä¸€ï¼Œä¹Ÿä¸å¥½å¤ç”¨ï¼Œå®ƒè¿˜å¯ä»¥ç»§ç»­æ‹†ï¼š</p>\n<pre><code class=\"javascript\">// å…ˆå†™ä¸€ä¸ªé€šç”¨åŠ æ³•ï¼Œä»–æ¥æ”¶ç¬¬ä¸€ä¸ªåŠ æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–¹æ³•\n// è¿”å›çš„è¿™ä¸ªæ–¹æ³•æ¥æ”¶ç¬¬äºŒä¸ªåŠ æ•°ï¼Œç¬¬ä¸€ä¸ªåŠ æ•°æ˜¯ä¸Šå±‚æ–¹æ³•çš„a\n// è¿™æ ·å½“æˆ‘ä»¬éœ€è¦è®¡ç®—1+2æ˜¯ï¼Œå°±æ˜¯add(1)(2)\nlet add = (a) =&gt; {\n  return (b) =&gt; {\n    return a + b;\n  }\n}\n\n// æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†è¿”å›çš„å‡½æ•°èµ‹ç»™ä¸€ä¸ªå˜é‡ï¼Œè¿™ä¸ªå˜é‡ä¹Ÿå°±å˜æˆä¸€ä¸ªèƒ½ç‰¹å®šåŠ açš„ä¸€ä¸ªæ–¹æ³•\nlet add1 = add(1);\n\nlet res = add1(4); \nconsole.log(res);  // 5</code></pre>\n<p>æ‰€ä»¥å‡½æ•°å¼ç¼–ç¨‹å°±æ˜¯å°†ç¨‹åºåˆ†è§£ä¸ºä¸€äº›æ›´å¯é‡ç”¨ã€æ›´å¯é ä¸”æ›´æ˜“äºç†è§£çš„éƒ¨åˆ†ï¼Œç„¶åå°†ä»–ä»¬ç»„åˆèµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªæ›´æ˜“æ¨ç†çš„ç¨‹åºæ•´ä½“ã€‚</p>\n<h3>çº¯å‡½æ•°</h3>\n<p>çº¯å‡½æ•°æ˜¯æŒ‡ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚æœå®ƒçš„è°ƒç”¨å‚æ•°ç›¸åŒï¼Œåˆ™æ°¸è¿œè¿”å›ç›¸åŒçš„ç»“æœã€‚å®ƒä¸ä¾èµ–äºç¨‹åºæ‰§è¡ŒæœŸé—´å‡½æ•°å¤–éƒ¨ä»»ä½•çŠ¶æ€æˆ–æ•°æ®çš„å˜åŒ–ï¼Œåªä¾èµ–äºå…¶è¾“å…¥å‚æ•°ã€‚åŒæ—¶å‡½æ•°çš„è¿è¡Œä¹Ÿä¸æ”¹å˜ä»»ä½•å¤–éƒ¨æ•°æ®ï¼Œå®ƒåªé€šè¿‡å®ƒçš„è¿”å›å€¼ä¸å¤–éƒ¨é€šè®¯ã€‚</p>\n<p>ä¸‹é¢è¿™ä¸ªå‡½æ•°å°±ä¸æ˜¯çº¯å‡½æ•°ï¼Œå› ä¸ºå‡½æ•°å†…éƒ¨éœ€è¦çš„<code>discount</code>éœ€è¦ä»å¤–éƒ¨è·å–ï¼š</p>\n<pre><code class=\"javascript\">let discount = 0.8;\nconst calPrice = price =&gt; price * discount;\nlet price = calPrice(200);  // 160\n\n// å½“discountå˜äº†ï¼ŒcalPriceä¼ åŒæ ·é¢å‚æ•°ï¼Œç»“æœä¸ä¸€æ ·ï¼Œæ‰€ä»¥ä¸çº¯\ndiscount = 0.9;\nprice = calPrice(200);  // 180</code></pre>\n<p>è¦æ”¹ä¸ºçº¯å‡½æ•°ä¹Ÿå¾ˆç®€å•ï¼Œå°†<code>discount</code>ä½œä¸ºå‚æ•°ä¼ é€’è¿›å»å°±è¡Œäº†</p>\n<pre><code class=\"javascript\">const calPrice = (price, discount) =&gt; price * discount;</code></pre>\n<p>çº¯å‡½æ•°å¯ä»¥ä¿è¯ä»£ç çš„ç¨³å®šæ€§ï¼Œå› ä¸ºç›¸åŒçš„è¾“å…¥æ°¸è¿œä¼šå¾—åˆ°ç›¸åŒç»“æœã€‚ä¸çº¯çš„å‡½æ•°å¯èƒ½ä¼šå¸¦æ¥å‰¯ä½œç”¨ã€‚</p>\n<h3>å‡½æ•°å‰¯ä½œç”¨</h3>\n<p>å‡½æ•°å‰¯ä½œç”¨æ˜¯æŒ‡è°ƒç”¨å‡½æ•°æ—¶é™¤äº†è¿”å›å‡½æ•°å€¼ä¹‹å¤–ï¼Œè¿˜å¯¹ä¸»è°ƒç”¨å‡½æ•°äº§ç”Ÿé™„åŠ çš„å½±å“ï¼Œæ¯”å¦‚ä¿®æ”¹å…¨å±€å˜é‡æˆ–è€…å¤–éƒ¨å˜é‡ï¼Œæˆ–è€…ä¿®æ”¹å‚æ•°ã€‚è¿™å¯èƒ½ä¼šå¸¦æ¥éš¾ä»¥æŸ¥æ‰¾çš„é—®é¢˜å¹¶é™ä½ä»£ç çš„å¯è¯»æ€§ã€‚ä¸‹é¢çš„<code>foo</code>å°±æœ‰å‰¯ä½œç”¨ï¼Œå½“åé¢æœ‰å…¶ä»–åœ°æ–¹éœ€è¦ä½¿ç”¨aï¼Œå¯èƒ½å°±ä¼šæ‹¿åˆ°ä¸€ä¸ªè¢«æ±¡æŸ“çš„å€¼</p>\n<pre><code class=\"javascript\">let a = 5;\nlet foo = () =&gt; a = a * 10;\nfoo();\nconsole.log(a); // 50</code></pre>\n<p>é™¤äº†æˆ‘ä»¬è‡ªå·±å†™çš„å‡½æ•°æœ‰å‰¯ä½œç”¨å¤–ï¼Œä¸€äº›åŸç”ŸAPIä¹Ÿå¯èƒ½æœ‰å‰¯ä½œç”¨ï¼Œæˆ‘ä»¬å†™ä»£ç æ—¶åº”è¯¥æ³¨æ„ï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023685022\" alt=\"image-20200109232215022\" title=\"image-20200109232215022\" /></p>\n<p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯å°½å¯èƒ½çš„å‡å°‘å‰¯ä½œç”¨ï¼Œå°†å‡½æ•°å†™ä¸ºçº¯å‡½æ•°ï¼Œä¸‹é¢è¿™ä¸ªä¸çº¯çš„å‡½æ•°ä½¿ç”¨äº†<code>new Date</code>ï¼Œæ¯æ¬¡è¿è¡Œç»“æœä¸ä¸€æ ·ï¼Œæ˜¯ä¸çº¯çš„ï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023685021\" alt=\"image-20200109232541307\" title=\"image-20200109232541307\" /></p>\n<p>è¦ç»™ä¸ºçº¯å‡½æ•°å¯ä»¥å°†ä¾èµ–æ³¨å…¥è¿›å»ï¼Œæ‰€è°“ä¾èµ–æ³¨å…¥å°±æ˜¯å°†ä¸çº¯çš„éƒ¨åˆ†æå–å‡ºæ¥ä½œä¸ºå‚æ•°ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥è®©å‰¯ä½œç”¨ä»£ç é›†ä¸­åœ¨å¤–éƒ¨ï¼Œè¿œç¦»æ ¸å¿ƒä»£ç ï¼Œä¿è¯æ ¸å¿ƒä»£ç çš„ç¨³å®šæ€§</p>\n<pre><code>// ä¾èµ–æ³¨å…¥\nconst foo = (d, log, something) =&gt; {\n  const dt = d.toISOString();\n  return log(`${dt}: ${something}`);\n}\n\nconst something = 'log content';\nconst d = new Date();\nconst log = console.log.bind(console);\nfoo(d, log, something);</code></pre>\n<p>æ‰€ä»¥å‡å°‘å‰¯ä½œç”¨ä¸€èˆ¬çš„æ–¹æ³•å°±æ˜¯ï¼š</p>\n<pre><code>1. å‡½æ•°ä½¿ç”¨å‚æ•°è¿›è¡Œè¿ç®—ï¼Œä¸è¦ä¿®æ”¹å‚æ•°\n2. å‡½æ•°å†…éƒ¨ä¸ä¿®æ”¹å¤–éƒ¨å˜é‡\n3. è¿ç®—ç»“æœé€šè¿‡è¿”å›å€¼è¿”å›ç»™å¤–éƒ¨</code></pre>\n<h3>å¯å˜æ€§å’Œä¸å¯å˜æ€§</h3>\n<ul>\n <li><strong>å¯å˜æ€§</strong>ï¼šæŒ‡ä¸€ä¸ªå˜é‡åˆ›å»ºä»¥åå¯ä»¥ä»»æ„ä¿®æ”¹</li>\n <li><strong>ä¸å¯å˜æ€§</strong>ï¼š æŒ‡ä¸€ä¸ªå˜é‡è¢«åˆ›å»ºåæ°¸è¿œä¸ä¼šå‘ç”Ÿæ”¹å˜ï¼Œä¸å¯å˜æ€§æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„æ ¸å¿ƒæ¦‚å¿µ</li>\n</ul>\n<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¯å˜çš„ä¾‹å­ï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023685024\" alt=\"image-20200109233313733\" title=\"image-20200109233313733\" /></p>\n<p>å¦‚æœæˆ‘ä»¬ä¸€å®šè¦ä¿®æ”¹è¿™ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬åº”è¯¥å°†è¿™ä¸ªå‚æ•°è¿›è¡Œæ·±æ‹·è´åå†æ“ä½œï¼Œè¿™æ ·å°±ä¸ä¼šä¿®æ”¹å‚æ•°äº†ï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023685023\" alt=\"image-20200109233515929\" title=\"image-20200109233515929\" /></p>\n<p><strong>æ–‡ç« çš„æœ€åï¼Œæ„Ÿè°¢ä½ èŠ±è´¹å®è´µçš„æ—¶é—´é˜…è¯»æœ¬æ–‡ï¼Œå¦‚æœæœ¬æ–‡ç»™äº†ä½ ä¸€ç‚¹ç‚¹å¸®åŠ©æˆ–è€…å¯å‘ï¼Œè¯·ä¸è¦åå•¬ä½ çš„èµå’ŒGitHubå°æ˜Ÿæ˜Ÿï¼Œä½ çš„æ”¯æŒæ˜¯ä½œè€…æŒç»­åˆ›ä½œçš„åŠ¨åŠ›ã€‚</strong></p>\n<p><strong>ä½œè€…åšæ–‡GitHubé¡¹ç›®åœ°å€ï¼š <a href=\"https://github.com/dennis-jiang/Front-End-Knowledges\" rel=\"nofollow noreferrer\">https://github.com/dennis-jiang/Front-End-Knowledges</a></strong></p>","descriptionType":"html","publishedDate":"Wed, 19 Aug 2020 06:10:38 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/remote/1460000023685022","linkMd5":"c6ea63b543bcf14780252f9af45af4e0","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn33@2020_6/2020/08/24/23-08-24-844_33ebdc5c0e4cb893.webp","destWidth":653,"destHeight":128,"sourceBytes":64675,"destBytes":10000,"author":"è’‹é¹é£","articleImgCdnMap":{"https://segmentfault.com/img/remote/1460000023685022":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn33@2020_6/2020/08/24/23-08-24-844_33ebdc5c0e4cb893.webp","https://segmentfault.com/img/remote/1460000023685021":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn86@2020_1/2020/08/24/23-08-28-842_9dd4a1623c27860b.webp","https://segmentfault.com/img/remote/1460000023685024":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn93@2020_6/2020/08/24/23-08-30-679_209c5d3f7df6d78a.webp","https://segmentfault.com/img/remote/1460000023685023":"https://cdn.jsdelivr.net/gh/myreaderx13/cdn89@2020_6/2020/08/24/23-08-30-573_1334f2d2165df788.webp"},"publishedOrCreatedDate":1598310388570},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"Denoä»é›¶åˆ°æ¶æ„çº§ç³»åˆ—ï¼ˆäºŒï¼‰â€”â€”æ³¨è§£è·¯ç”±","link":"https://segmentfault.com/a/1190000023572844","description":"<p><img src=\"https://segmentfault.com/img/bVbK4w3\" alt=\"image\" title=\"image\" /></p>\n<p>ä¸Šå›ä»‹ç»äº†Denoçš„åŸºæœ¬å®‰è£…ã€ä½¿ç”¨ã€‚åŸºäºoakæ¡†æ¶æ­å»ºäº†æ§åˆ¶å±‚ã€è·¯ç”±å±‚ã€å¯¹å…¥å£æ–‡ä»¶è¿›è¡Œäº†æ”¹é€ ã€‚é‚£è¿™å›æˆ‘ä»¬æ¥ç€ç»§ç»­æ”¹é€ è·¯ç”±ï¼Œæ¨¡æ‹Ÿspringmvcå®ç°æ³¨è§£è·¯ç”±ã€‚</p>\n<h2>è£…é¥°å™¨æ¨¡å¼</h2>\n<p>è£…é¥°è€…æ¨¡å¼(decorator)ï¼Œå°±æ˜¯ç»™å¯¹è±¡åŠ¨æ€æ·»åŠ èŒè´£çš„æ–¹å¼ç§°ä¸ºè£…é¥°è€…æ¨¡å¼ã€‚ç›´æ¥å…ˆä¸Šä¾‹å­ï¼š</p>\n<pre><code class=\"javascript\">// æ–°å»ºæ–‡ä»¶fox.ts\n// åˆ›å»ºä¸€ä¸ªfoxç±»\nclass Fox {\n // skillæ–¹æ³•ï¼Œè¿”å›ç‹ç‹¸ä¼šè·‘çš„å­—æ ·ï¼Œå‡è®¾å°±æ˜¯æ„å»ºäº†ç‹ç‹¸ç±»éƒ½ä¼šè·‘çš„æŠ€èƒ½\n skill() {\n   return 'ç‹ç‹¸ä¼šè·‘ã€‚'\n }\n}\n// åˆ›å»ºä¸€ä¸ªflyingfoxç±»\nclass Flyingfox  {\n   private fox: any  \n   // æ„é€ æ–¹æ³•ï¼Œä¼ å…¥è¦è£…é¥°çš„å¯¹è±¡\n   constructor(fox: any) {\n     this.fox = fox;\n     // è¿™é‡Œç›´æ¥æ‰“å°è¯¥ç±»çš„skillæ–¹æ³•è¿”å›å€¼\n     console.log(this.skill())\n   }\n   // è¯¥ç±»çš„skillæ–¹æ³•\n   skill() {\n     // åœ¨è¿™é‡Œè·å–åˆ°äº†è¢«è£…é¥°è€…\n     let val = this.fox.skill();\n     // è¿™é‡Œç®€å•çš„åŠ å­—ç¬¦ä¸²ï¼Œå‡è®¾ç»™è¢«è£…é¥°è€…åŠ ä¸Šäº†æ–°çš„æŠ€èƒ½\n     return val + 'å†åŠ ä¸€å¯¹ç¿…è†€ï¼Œå°±ä¼šé£å•¦ï¼'\n   }\n}\n// newä¸€ä¸ªfoxå¯¹è±¡\nlet fox = new Fox();\n\n// æ‰“å°ç»“æœä¸ºï¼šç‹ç‹¸ä¼šè·‘ã€‚å†åŠ ä¸€å¯¹ç¿…è†€ï¼Œå°±ä¼šé£å•¦ï¼\nnew Flyingfox(fox);</code></pre>\n<p>ç›´æ¥è¿è¡Œdeno run fox.tså°±ä¼šæ‰“å°ç»“æœå•¦ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„è£…é¥°è€…æ¨¡å¼ä¾‹å­ï¼Œæˆ‘ä»¬ç»§ç»­å¾€ä¸‹ï¼Œç”¨TSçš„æ³¨è§£æ¥å®ç°è¿™ä¸ªä¾‹å­ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/bVbK4xe\" alt=\"image\" title=\"image\" /></p>\n<h3>TypeScriptè£…é¥°å™¨é…ç½®</h3>\n<p>å› ä¸ºdenoæœ¬æ¥å°±æ”¯æŒTSï¼Œä½†ç”¨TSå®ç°<strong>è£…é¥°å™¨</strong>ï¼Œéœ€è¦å…ˆé…ç½®ã€‚åœ¨æ ¹ç›®å½•æ–°å»ºé…ç½®æ–‡ä»¶tsconfig.jsonï¼Œé…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"javascript\">{\n \"compilerOptions\": {\n   \"allowJs\": true,\n   \"module\": \"esnext\",\n   \"emitDecoratorMetadata\": true,\n   \"experimentalDecorators\": true\n }\n}</code></pre>\n<h3>TSè£…é¥°å™¨</h3>\n<p>è¿™é‡Œæä¸€ä¸‹ï¼Œæ³¨è§£å’Œè£…é¥°å™¨æ˜¯ä¸¤ä¸ªä¸œè¥¿ï¼Œå¯¹äºä¸åŒçš„è¯­è¨€æ¥è®²ï¼ŒåŠŸèƒ½ä¸åŒã€‚</p>\n<ul>\n <li>æ³¨è§£ï¼ˆAnnotationï¼‰ï¼šä»…æä¾›é™„åŠ å…ƒæ•°æ®æ”¯æŒï¼Œå¹¶ä¸èƒ½å®ç°ä»»ä½•æ“ä½œã€‚éœ€è¦å¦å¤–çš„ Scanner æ ¹æ®å…ƒæ•°æ®æ‰§è¡Œç›¸åº”æ“ä½œã€‚</li>\n <li>è£…é¥°å™¨ï¼ˆDecoratorï¼‰ï¼šä»…æä¾›å®šä¹‰åŠ«æŒï¼Œèƒ½å¤Ÿå¯¹ç±»åŠå…¶æ–¹æ³•çš„å®šä¹‰å¹¶æ²¡æœ‰æä¾›ä»»ä½•é™„åŠ å…ƒæ•°æ®çš„åŠŸèƒ½ã€‚</li>\n</ul>\n<p>æˆ‘ä¸€ç›´ç§°æ³¨è§£ç§°ä¹ æƒ¯äº†ã€‚å¤§å®¶ç†è§£å°±å¥½ã€‚</p>\n<p>TypeScriptè£…é¥°å™¨æ˜¯ä¸€ç§å‡½æ•°ï¼Œå†™æ³•ï¼š<strong>@ + å‡½æ•°å</strong>ã€‚ä½œç”¨äºç±»å’Œç±»æ–¹æ³•å‰å®šä¹‰ã€‚ è¿˜æ˜¯æ‹¿ä¸Šé¢çš„ä¾‹å­æ¥æ”¹å†™ï¼Œå¦‚ä¸‹</p>\n<pre><code class=\"javascript\">@Flyingfox\nclass Fox {}\n\n// ç­‰åŒäº\nclass Fox {}\nFox = Flyingfox(Fox) || Fox;</code></pre>\n<p>å¾ˆå¤šå°ä¼™ä¼´ç»å¸¸çœ‹åˆ°è¿™æ ·çš„å†™æ³•ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code class=\"javascript\">function Flyingfox(...list) {\n  return function (target: any) {\n    Object.assign(target.prototype, ...list)\n  }\n}</code></pre>\n<p>è¿™æ ·åœ¨è£…é¥°å™¨å¤–é¢å†å°è£…ä¸€å±‚å‡½æ•°ï¼Œå¥½å¤„æ˜¯ä¾¿äºä¼ å‚æ•°ã€‚åŸºæœ¬è¯­æ³•æŒæ¡äº†ï¼Œæˆ‘ä»¬å°±æ¥å®æˆ˜ä¸€ä¸‹ï¼Œå®æˆ˜ä¸­æ‰çŸ¥é“æ›´æ·±å±‚æ¬¡çš„ä¸œä¸œã€‚</p>\n<h2>è£…é¥°å™¨ä¿®é¥°ç±»class</h2>\n<p>è£…é¥°å™¨å¯ä»¥ä¿®é¥°ç±»ï¼Œä¹Ÿå¯ä»¥ä¿®é¥°æ–¹æ³•ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¿®é¥°ç±»çš„ä¾‹å­ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code class=\"javascript\">// test.ts\n// å®šä¹‰ä¸€ä¸ªTimeæ–¹æ³•\nfunction Time(ms: string){\n  console.log('1-ç¬¬ä¸€æ­¥')\n  // è¿™é‡Œçš„targetå°±æ˜¯ä½ è¦ä¿®é¥°çš„é‚£ä¸ªç±»\n  return function(target: Function){\n    console.log(`4-ç¬¬å››æ­¥ï¼Œ${value}`)\n  }\n}\n// å®šä¹‰ä¸€ä¸ªControlleræ–¹æ³•ï¼Œä¹Ÿæ˜¯ä¸ªå·¥å‚å‡½æ•°\nfunction Controller(path: string) {\n  console.log('2-ç¬¬äºŒæ­¥')\n  return function(target: Function){\n    console.log(`3-ç¬¬ä¸‰æ­¥ï¼Œ${value}`)\n  }\n}\n\n@Time('è®¡ç®—æ—¶é—´')\n@Controller('è¿™æ˜¯controller')\nclass Controller {\n}\n// è¿è¡Œï¼šdeno run -c tsconfig.json ./test.ts\n// 1-ç¬¬ä¸€æ­¥\n// 2-ç¬¬äºŒæ­¥\n// 3-ç¬¬ä¸‰æ­¥, è¿™æ˜¯controller\n// 4-ç¬¬å››æ­¥, è®¡ç®—æ—¶é—´</code></pre>\n<p>æœ‰ç–‘é—®çš„å°ä¼™ä¼´å¯ä»¥consoleå‡ºæ¥çœ‹çœ‹è¿™ä¸ªtargetã€‚ è¿™é‡Œè¦æ³¨æ„ä¸‰ä¸ªç‚¹ï¼š</p>\n<ul>\n <li>è¿è¡Œå‘½ä»¤ï¼šdeno run -c tsconfig.json ./test.tsï¼Œè¿™é‡Œçš„-cæ˜¯æ‰§è¡Œtsé…ç½®æ–‡ä»¶ï¼Œæ³¨æ„æ˜¯jsonæ–‡ä»¶</li>\n <li>å¤–å±‚å·¥å‚å‡½æ•°çš„æ‰§è¡Œé¡ºåºï¼šä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æ‰§è¡Œã€‚</li>\n <li>è£…é¥°å™¨å‡½æ•°çš„æ‰§è¡Œé¡ºåºï¼šä»ä¸‹åˆ°ä¸Šä¾æ¬¡æ‰§è¡Œã€‚</li>\n</ul>\n<h2>TSæ³¨è§£è·¯ç”±</h2>\n<p>å¥½å•¦ï¼Œä¸‹é¢æˆ‘ä»¬æ¥ç€ä¸Šä¸€å›çš„å†…å®¹ï¼Œæ­£å¼æ”¹é€ æ³¨è§£è·¯ç”±äº†ã€‚oakå’Œä»¥å‰koaã€expressæ”¹é€ æ€è·¯éƒ½ä¸€æ ·ã€‚æ”¹é€ ä¹‹å‰ï¼ŒæŒ‰ç…§è·¯ç”±åˆ†å‘è¯·æ±‚æµç¨‹ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img src=\"https://segmentfault.com/img/bVbK4xf\" alt=\"image\" title=\"image\" /></p>\n<p>æ”¹é€ ä¹‹åï¼Œæˆ‘ä»¬çš„æµç¨‹å¦‚ä¸‹å›¾ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/bVbK4xg\" alt=\"image\" title=\"image\" /></p>\n<p>æ–°å»ºdecoratorsæ–‡ä»¶å¤¹ï¼ŒåŒ…å«ä¸‰ä¸ªæ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code class=\"javascript\">// decorators/router.ts\n// è¿™é‡Œç»Ÿä¸€å¼•å…¥oakæ¡†æ¶\nimport { Application, Router } from 'https://deno.land/x/oak@v6.0.1/mod.ts'\n// ç»Ÿä¸€å¯¼å‡ºoakçš„appå’Œrouterï¼Œè¿™é‡Œçš„å…¶å®å¯ä»¥å•ç‹¬æ”¾ä¸€ä¸ªæ–‡ä»¶ï¼Œå› ä¸ºè¿˜æœ‰å…¥å£æ–‡ä»¶server.tsä¼šç”¨åˆ°\nexport const app: Application = new Application();\nexport const router: Router  = new Router();\n// è·¯ç”±å‰ç¼€ï¼Œè¿™é‡Œå…¶å®åº”è¯¥æ”¾åˆ°é…ç½®æ–‡ä»¶\nconst prefix: string = '/api'\n// æ„å»ºä¸€ä¸ªmapï¼Œç”¨æ¥å­˜æ”¾è·¯ç”±\nconst routeMap: Map&lt;{target: any, method: string, path: string}, Function | Function[]&gt; = new Map()\n\n// è¿™é‡Œå°±æ˜¯æˆ‘ä»¬ä½œç”¨äºç±»çš„ä¿®é¥°å™¨\nexport function Controller (root: string): Function {\n  return (target: any) =&gt; {\n    // éå†æ‰€æœ‰è·¯ç”±\n    for (let [conf, controller] of routeMap) {\n      // è¿™é‡Œæ˜¯åˆ¤æ–­å¦‚æœç±»çš„è·¯å¾„æ˜¯@Controller('/')ï¼Œå¦åˆ™å°±è·Ÿç±»æ–¹æ³•ä¸Šçš„è·¯å¾„åˆå¹¶\n      conf.path = prefix + (root === '/' ? conf.path : `${root}${conf.path}`)\n      // å¼ºåˆ¶controllerä¸ºæ•°ç»„\n      let controllers = Array.isArray(controller) ? controller : [controller]\n      // è¿™é‡Œæ˜¯æœ€å…³é”®çš„ç‚¹ï¼Œä¹Ÿå°±æ˜¯åˆ†å‘è·¯ç”±\n      controllers.forEach((controller) =&gt; (router as any)[conf.method.toLowerCase()](conf.path, controller))\n    }\n  }\n}</code></pre>\n<p>è¿™é‡Œå°±æ˜¯ç±»ä¸Šçš„è·¯ç”±äº†ï¼Œæ¯ä¸€è¡Œæˆ‘éƒ½åŠ äº†æ³¨é‡Šã€‚ç»™å°ä¼™ä¼´ä»¬ä¸€ä¸ªå»ºè®®ï¼Œå“ªé‡Œä¸æ˜ç™½ï¼Œå°±åœ¨å“ªé‡Œconsoleä¸€ä¸‹ã€‚ è¿™é‡Œç”¨çš„Mapæ¥å­˜æ”¾è·¯ç”±ï¼Œå…¶å®ç”¨åå°„æ›´å¥½ï¼Œåªæ˜¯åŸç”Ÿçš„reflectæ”¯æŒæ¯”è¾ƒå°‘ï¼Œéœ€è¦é¢å¤–å¼•å…¥reflectçš„æ–‡ä»¶ã€‚æœ‰å…´è¶£å¯ä»¥å»çœ‹alosauræ¡†æ¶çš„å®ç°æ–¹å¼ã€‚</p>\n<pre><code class=\"javascript\">// decorators/index.ts\nexport * from \"./router.ts\";\nexport * from \"./controller.ts\";</code></pre>\n<p>è¿™ä¸ªå…¶å®æ²¡ä»€ä¹ˆå¥½è®²çš„äº†ï¼Œå°±æ˜¯å…¥å£æ–‡ä»¶ï¼ŒæŠŠè¯¥æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶å¯¼å‡ºã€‚è¿™é‡Œçš„controller.tså…ˆç•™ä¸ªæ‚¬å¿µï¼Œæ”¾åˆ°å½©è›‹è®²ã€‚ æ¥ç€æ”¹é€ æ§åˆ¶å±‚ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"javascript\">// controller/bookController.ts\nimport { Controller } from \"../decorators/index.ts\";\n// è¿™é‡Œæˆ‘ä»¬å‡è£…æ˜¯ä¸šåŠ¡å±‚è¿‡æ¥çš„æ•°æ®\nconst bookService = new Map&lt;string, any&gt;();\nbookService.set(\"1\", {\n  id: \"1\",\n  title: \"å¬é£ç‹èŠdeno\",\n  author: \"é£ç‹\",\n});\n\n// è¿™é‡Œæ˜¯ç±»çš„è£…é¥°å™¨\n@Controller('/book')\nexport default class BookController {\n  getbook (context: any) {\n    context.response.body = Array.from(bookService.values());\n  }\n  getbookById (context: any) {\n    if (context.params &amp;&amp; context.params.id &amp;&amp; bookService.has(context.params.id)) {\n      context.response.body = bookService.get(context.params.id);\n    }\n  }\n}</code></pre>\n<p>æ¥ç€æ”¹é€ é¡¹ç›®å…¥å£æ–‡ä»¶server.ts</p>\n<pre><code class=\"javascript\">// server.ts\n// è¿™é‡Œçš„loadControllerså…ˆä¸ç®¡ï¼Œå½©è›‹ä¼šè®²\nimport { app, router, loadControllers } from './decorators/index.ts'\n\nclass Server {\n  constructor () {\n    this.init()\n  }\n\n  async init () {\n    // è¿™é‡Œå°±æ˜¯å¯¼å…¥æ‰€æœ‰çš„controllerï¼Œè¿™é‡Œçš„controlleræ˜¯æ§åˆ¶å±‚æ–‡ä»¶å¤¹çš„åç§°\n    await loadControllers('controller');\n    app.use(router.routes());\n    app.use(router.allowedMethods());\n    this.listen()\n  }\n\n  async listen () {\n    // await app.listen({ port: 8000 });\n    setTimeout(async () =&gt; {\n      await app.listen({ port: 8000 })\n    }, 1);\n  }\n}\nnew Server()</code></pre>\n<p>å¥½å•¦ï¼Œæ•´ä¸ªç±»çš„è£…é¥°å™¨æ”¹é€ å°±ç»“æŸäº†ã€‚æ•´ä¸ªé¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>\n<p><img src=\"https://segmentfault.com/img/bVbK4xh\" alt=\"image\" title=\"image\" /></p>\n<p>å…ˆä¸ç€æ€¥è¿è¡Œï¼Œè™½ç„¶è¿è¡Œä¹Ÿä¼šæˆåŠŸï¼Œä½†å•¥éƒ½åšä¸äº†ï¼Œä¸ºå•¥å‘¢ï¼Ÿ å› ä¸ºç±»æ–¹æ³•çš„è·¯ç”±è¿˜æ²¡æœ‰åšï¼Œä¸å–å…³å­äº†ï¼Œæ¥ä¸‹æ¥åšç±»æ–¹æ³•çš„è£…é¥°å™¨ã€‚</p>\n<h3>TSç±»æ–¹æ³•çš„è£…é¥°å™¨</h3>\n<p>è¿˜æ˜¯å…ˆä»ä»£ç ä¸Šæ¥ï¼Œå…ˆæ”¹é€ æ§åˆ¶å±‚ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code class=\"javascript\">// controller/bookController.ts\nconst bookService = new Map&lt;string, any&gt;();\nbookService.set(\"1\", {\n  id: \"1\",\n  title: \"å¬é£ç‹èŠdeno\",\n  author: \"é£ç‹\",\n});\n\n@Controller('/book')\nexport default class BookController {\n  // è¿™é‡Œå°±æ˜¯ç±»æ–¹æ³•ä¿®é¥°å™¨\n  @Get('/getbook')\n  getbook (context: any) {\n    context.response.body = Array.from(bookService.values());\n  }\n  // è¿™é‡Œå°±æ˜¯ç±»æ–¹æ³•ä¿®é¥°å™¨\n  @Get('/getbookById')\n  getbookById (context: any) {\n    if (context.params &amp;&amp; context.params.id &amp;&amp; bookService.has(context.params.id)) {\n      context.response.body = bookService.get(context.params.id);\n    }\n  }\n}</code></pre>\n<p>ç±»æ–¹æ³•ä¿®é¥°å™¨å®ç°ï¼Œè¿™é‡Œå°±åªè®²è§£æœ‰æ”¹åŠ¨çš„åœ°æ–¹ï¼Œå¦‚ä¸‹ï¼š</p>\n<pre><code class=\"javascript\">// decorators/router.ts\nimport { Application, Router } from 'https://deno.land/x/oak@v6.0.1/mod.ts'\n// è¿™é‡Œæ˜¯TSçš„æšä¸¾\nenum MethodType {\n  GET='GET',\n  POST='POST',\n  PUT='PUT',\n  DELETE='DELETE'\n}\n\nexport const app: Application = new Application();\nexport const router: Router  = new Router();\nconst prefix: string = '/api'\n\nconst routeMap: Map&lt;{target: any, method: string, path: string}, Function | Function[]&gt; = new Map()\n\nexport function Controller (root: string): Function {\n  return (target: any) =&gt; {\n    for (let [conf, controller] of routeMap) {\n      conf.path = prefix + (root === '/' ? conf.path : `${root}${conf.path}`)\n      let controllers = Array.isArray(controller) ? controller : [controller]\n      controllers.forEach((controller) =&gt; (router as any)[conf.method.toLowerCase()](conf.path, controller))\n    }\n  }\n}\n// è¿™é‡Œå°±æ˜¯httpè¯·æ±‚å·¥å‚å‡½æ•°ï¼Œä¼ å…¥çš„typeå°±æ˜¯httpçš„getã€postç­‰\nfunction httpMethodFactory (type: MethodType) {\n  // pathæ˜¯ç±»æ–¹æ³•çš„è·¯å¾„ï¼Œå¦‚ï¼š@Get('getbook')ï¼Œè¿™ä¸ªpathå°±æ˜¯æŒ‡getbookã€‚\n  // ç±»æ–¹æ³•ä¿®é¥°å™¨ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼Œtargetæ˜¯æ–¹æ³•æœ¬èº«ï¼Œkeyæ˜¯å±æ€§å\n  return (path: string) =&gt; (target: any, key: string, descriptor: any) =&gt; {\n    // ç¬¬ä¸‰ä¸ªå‚æ•°descriptoræˆ‘ä»¬è¿™é‡Œä¸ç”¨ï¼Œä½†æ˜¯è¿˜æ˜¯è®²è§£ä¸€ä¸‹ï¼Œå¯¹è±¡çš„å€¼å¦‚ä¸‹ï¼š\n    // {\n    //   value: specifiedFunction,\n    //   enumerable: false,\n    //   configurable: true,\n    //   writable: true\n    // };\n    (routeMap as any).set({\n      target: target.constructor,\n      method: type,\n      path: path,\n    }, \n    target[key])\n  }\n}\n\nexport const Get = httpMethodFactory(MethodType.GET)\nexport const Post = httpMethodFactory(MethodType.POST)\nexport const Delete = httpMethodFactory(MethodType.DELETE)\nexport const Put = httpMethodFactory(MethodType.PUT)</code></pre>\n<p>åˆ°è¿™é‡Œï¼Œæ³¨è§£è·¯ç”±å°±æ”¹é€ å®Œäº†ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªæ—¶å€™è¯·å¤§å®¶è·³åˆ°å½©è›‹æŠŠå¯¼å…¥æ–‡ä»¶çš„æ–¹æ³•è¡¥ä¸Šã€‚ç„¶åä¸€æ°”å‘µæˆçš„è¿è¡Œå…¥å£æ–‡ä»¶ï¼Œå°±å¤§åŠŸå‘Šæˆäº†ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/bVbK4xi\" alt=\"image\" title=\"image\" /></p>\n<h2>å½©è›‹</h2>\n<p>è¿™é‡Œçš„å½©è›‹éƒ¨åˆ†ï¼Œå…¶å®æ˜¯ä¸€ä¸ªdenoçš„å¯¼å…¥æ–‡ä»¶æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"javascript\">// decorators/controller.ts\nexport async function loadControllers (controllerPath: string) {\n  try {\n    for await (const dirEntry of Deno.readDirSync(controllerPath)) {\n      import(`../${controllerPath}/${dirEntry.name}`);\n    }\n  } catch (error) {\n    console.error(error)\n    console.log(\"no such file or dir :---- \" + controllerPath)\n  }\n}</code></pre>\n<p>è¿™é‡Œçš„readDirSyncå°±æ˜¯è¯»å–ä¼ å…¥çš„æ–‡ä»¶å¤¹è·¯å¾„ï¼Œç„¶åç”¨importå¯¼å…¥è¿­ä»£çš„æ–‡ä»¶ã€‚</p>\n<h2>è§£å†³Denoçš„bug</h2>\n<p>å¦å¤–å¤§å®¶å¦‚æœåœ¨1.2ä»¥å‰çš„ç‰ˆæœ¬é‡åˆ°æŠ¥é”™å¦‚ä¸‹ï¼š</p>\n<pre><code>Error: Another accept task is ongoing</code></pre>\n<p>ä¸è¦ç€æ€¥ï¼Œè¿™ä¸ªæ˜¯denoçš„é”™è¯¯ã€‚è§£å†³æ–¹æ³•å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"javascript\">async listen () {\n  // await app.listen({ port: 8000 });\n  setTimeout(async () =&gt; {\n    await app.listen({ port: 8000 })\n  }, 1);\n}</code></pre>\n<p>æ‰¾åˆ°å…¥å£æ–‡ä»¶ï¼Œåœ¨ç›‘å¬ç«¯å£æ–¹æ³•åŠ ä¸ªsetTimeoutå°±å¯ä»¥æå®šäº†ã€‚ä¹‹å‰denoå®˜æ–¹çš„issueï¼Œå¾ˆå¤šäººåœ¨æè¿™ä¸ªbugã€‚é£ç‹åœ¨æ­¤ç”¨ç‚¹ç‰¹æ®Šçš„æ‰‹æ³•è§£å†³äº†ã€‚å˜¿å˜¿~</p>\n<p><img src=\"https://segmentfault.com/img/bVbK4xj\" alt=\"image\" title=\"image\" /></p>\n<h3>ä¸‹å›é¢„å‘Š</h3>\n<p>å­¦ä¼šäº†TSè£…é¥°å™¨å¯ä»¥åšçš„å¾ˆå¤šï¼Œæ¯”å¦‚ï¼šè¯·æ±‚å‚æ•°æ³¨è§£ã€æ—¥å¿—ã€æƒé™åˆ¤æ–­ç­‰ç­‰ã€‚å›é¡¾ä¸€ä¸‹ï¼Œè¿™ç¯‡çš„å†…å®¹æ¯”è¾ƒå¤šï¼Œä¹Ÿæ¯”è¾ƒæ·±å…¥ã€‚å¤§å®¶å¯ä»¥å¥½å¥½æ¶ˆåŒ–ä¸€ä¸‹ï¼Œæ¦‚æ‹¬ä¸€ä¸‹ï¼š</p>\n<ul>\n <li>è£…é¥°è€…æ¨¡å¼</li>\n <li>TSç±»çš„è£…é¥°å™¨ï¼ŒTSç±»æ–¹æ³•çš„è£…é¥°å™¨</li>\n <li>æ–‡ä»¶å¤¹çš„å¯¼å…¥ï¼Œæ–‡ä»¶çš„å¼•å…¥</li>\n</ul>\n<p>ä¸‹å›æˆ‘ä»¬è®²å…¨å±€é”™è¯¯å¤„ç†ï¼Œå€Ÿé‰´alosauråšå¼‚å¸¸å¤„ç†ã€‚æœ‰ä»»ä½•é—®é¢˜å¤§å®¶å¯ä»¥åœ¨è¯„è®ºåŒºç•™è¨€~</p>\n<p>Ta-ta for now ãƒ¾(ï¿£â–½ï¿£)</p>","descriptionType":"html","publishedDate":"Thu, 13 Aug 2020 01:00:00 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/bVbK4w3","linkMd5":"b422d5e4e3dee35be3d3afd3b84c77cd","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn14@2020_6/2020/08/24/23-08-22-984_c34630b4bcb95121.webp","destWidth":800,"destHeight":450,"sourceBytes":40285,"destBytes":12508,"author":"é£ç‹","articleImgCdnMap":{"https://segmentfault.com/img/bVbK4w3":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn14@2020_6/2020/08/24/23-08-22-984_c34630b4bcb95121.webp","https://segmentfault.com/img/bVbK4xe":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn80@2020_2/2020/08/24/23-08-40-513_d8c8f7bcd0b2f161.webp","https://segmentfault.com/img/bVbK4xf":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn84@2020_3/2020/08/24/23-08-40-464_0f4e5e7d74c38a3f.webp","https://segmentfault.com/img/bVbK4xg":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn63@2020_4/2020/08/24/23-08-40-963_15be9c0256e0e892.webp","https://segmentfault.com/img/bVbK4xh":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn68@2020_3/2020/08/24/23-08-41-099_18c413ba34379e95.webp","https://segmentfault.com/img/bVbK4xi":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn72@2020_6/2020/08/24/23-08-40-953_0fe59535c76a90d2.webp","https://segmentfault.com/img/bVbK4xj":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn76@2020_3/2020/08/24/23-08-40-898_06b93a933331770f.webp"},"publishedOrCreatedDate":1598310388569},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"ä¸‹è½½çš„é™„ä»¶åæ€»ä¹±ç ï¼Ÿä½ è¯¥å»è¯»ä¸€ä¸‹ RFC æ–‡æ¡£äº†ï¼ ","link":"https://segmentfault.com/a/1190000023601065","description":"<blockquote>\n çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œ\n</blockquote>\n<p>Web å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç›¸ä¿¡å¤§å®¶éƒ½é‡åˆ°è¿‡é™„ä»¶ä¸‹è½½çš„åœºæ™¯ï¼Œå…¶ä¸­ï¼Œå„æµè§ˆå™¨ä¸‹è½½åçš„æ–‡ä»¶åä¸­æ–‡ä¹±ç é—®é¢˜æˆ–è®¸ä¸€åº¦è®©ä½ è‹¦æ¼ä¸å·²ã€‚</p>\n<p>ç½‘ä¸Šæœç´¢ä¸€ä¸‹ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯é€šè¿‡<code>Request Headers</code>ä¸­çš„<code>UserAgent</code>å­—æ®µæ¥åˆ¤æ–­æµè§ˆå™¨ç±»å‹ï¼Œæ ¹æ®ä¸åŒçš„æµè§ˆå™¨åšä¸åŒçš„å¤„ç†ï¼Œç±»ä¼¼ä¸‹é¢çš„ä»£ç ï¼š</p>\n<pre><code class=\"java\">// MicroSoft Browser\nif (agent.contains(\"msie\") || agent.contains(\"trident\") || agent.contains(\"edge\")) {\n  // filename ç‰¹æ®Šå¤„ç†\n}\n// firefox\nelse if (agent.contains(\"firefox\")) {\n  // filename ç‰¹æ®Šå¤„ç†\n}\n// safari\nelse if (agent.contains(\"safari\")) {\n  // filename ç‰¹æ®Šå¤„ç†\n}\n// Chrome\nelse if (agent.contains(\"chrome\")) {\n  // filename ç‰¹æ®Šå¤„ç†\n}\n// å…¶ä»–\nelse{\n // filename ç‰¹æ®Šå¤„ç†\n}\n//æœ€åæŠŠç‰¹æ®Šå¤„ç†åçš„æ–‡ä»¶åæ”¾åˆ°headé‡Œ\nresponse.setHeader(\"Content-Disposition\",\n                    \"attachment;fileName=\" + filename);</code></pre>\n<p>ä¸è¿‡ï¼Œè¿™æ ·çš„ä»£ç çœ‹èµ·æ¥å¾ˆé­”å¹»ï¼Œä¸ºä»€ä¹ˆæ¯ä¸ªæµè§ˆå™¨çš„å¤„ç†æ–¹å¼éƒ½ä¸ä¸€æ ·ï¼Ÿéš¾é“æ¯æ¬¡æ–°å‡ºä¸€ä¸ªæµè§ˆå™¨éƒ½è¦åšå…¼å®¹å—ï¼Ÿå°±æ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€æ ‡å‡†æ¥çº¦æŸä¸€ä¸‹è¿™å¸®æµè§ˆå™¨å—ï¼Ÿ</p>\n<p>å¸¦ç€è¿™ä¸ªç–‘æƒ‘ï¼Œæˆ‘ç¿»é˜…äº† RFC æ–‡æ¡£ï¼Œæœ€ç»ˆå¾—å‡ºäº†ä¸€ä¸ªä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼š</p>\n<pre><code class=\"java\">// percentEncodedFileName ä¸ºç™¾åˆ†å·ç¼–ç åçš„æ–‡ä»¶å\nresponse.setHeader(\"Content-disposition\",\n        \"attachment;filename=\" + percentEncodedFileName +\n        \";filename*=utf-8''\" + percentEncodedFileName);</code></pre>\n<p>ç»è¿‡æµ‹è¯•ï¼Œè¿™æ®µå“åº”å¤´å¯ä»¥å…¼å®¹å¸‚é¢ä¸Šæ‰€æœ‰ä¸»æµæµè§ˆå™¨ï¼Œç”±äºæ˜¯ HTTP åè®®èŒƒç•´ï¼Œæ‰€ä»¥è¯­è¨€æ— å…³ã€‚åªè¦æŒ‰è¿™ä¸ªè§„åˆ™è®¾ç½®å“åº”å¤´ï¼Œå°±èƒ½ä¸€åŠ³æ°¸é€¸åœ°è§£å†³æ¼äººçš„é™„ä»¶åä¸­æ–‡ä¹±ç é—®é¢˜ã€‚</p>\n<p>æ¥ä¸‹æ¥è¯¾ä»£è¡¨å¸¦å¤§å®¶æŠ½ä¸å‰¥èŒ§ï¼Œé€šè¿‡é˜…è¯» RFC æ–‡æ¡£ï¼Œè¿˜åŸä¸€ä¸‹è¿™ä¸ªå“åº”å¤´çš„äº§å‡ºè¿‡ç¨‹ã€‚</p>\n<h2>1. Content-Disposition</h2>\n<p>ä¸€åˆ‡è¦ä» <a href=\"https://tools.ietf.org/html/rfc6266\" rel=\"nofollow noreferrer\">RFC 6266</a> å¼€å§‹ï¼Œåœ¨è¿™ä»½æ–‡æ¡£ä¸­ï¼Œä»‹ç»äº†<code>Content-Disposition</code>å“åº”å¤´ï¼Œå…¶å®å®ƒå¹¶ä¸å±äº<code>HTTP</code>æ ‡å‡†ï¼Œä½†æ˜¯å› ä¸ºä½¿ç”¨å¹¿æ³›ï¼Œæ‰€ä»¥åœ¨è¯¥æ–‡æ¡£ä¸­è¿›è¡Œäº†çº¦æŸã€‚å®ƒçš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"java\">content-disposition = \"Content-Disposition\" \":\"\n                            disposition-type *( \";\" disposition-parm )\n\n     disposition-type    = \"inline\" | \"attachment\" | disp-ext-type\n                         ; case-insensitive\n     disp-ext-type       = token\n\n     disposition-parm    = filename-parm | disp-ext-parm\n\n     filename-parm       = \"filename\" \"=\" value\n                         | \"filename*\" \"=\" ext-value</code></pre>\n<p>å…¶ä¸­çš„<code>disposition-type</code>æœ‰ä¸¤ç§ï¼š</p>\n<ul>\n <li>inline ä»£è¡¨é»˜è®¤å¤„ç†ï¼Œä¸€èˆ¬ä¼šåœ¨é¡µé¢å±•ç¤º</li>\n <li>attachment ä»£è¡¨åº”è¯¥è¢«ä¿å­˜åˆ°æœ¬åœ°ï¼Œéœ€è¦é…åˆè®¾ç½®<code>filename</code>æˆ–<code>filename*</code></li>\n</ul>\n<p>æ³¨æ„åˆ°<code>disposition-parm</code>ä¸­çš„<code>filename</code>å’Œ<code>filename*</code>ï¼Œæ–‡æ¡£è§„å®šï¼šè¿™é‡Œçš„ä¿¡æ¯å¯ä»¥ç”¨äºä¿å­˜çš„æ–‡ä»¶åã€‚</p>\n<p>å®ƒä¿©çš„åŒºåˆ«åœ¨äºï¼Œfilename çš„ value ä¸è¿›è¡Œç¼–ç ï¼Œè€Œ<code>filename*</code>éµä» <a href=\"https://tools.ietf.org/html/rfc5987\" rel=\"nofollow noreferrer\">RFC 5987</a>ä¸­å®šä¹‰çš„ç¼–ç è§„åˆ™ï¼š</p>\n<pre><code class=\"java\">Producers MUST use either the \"UTF-8\" ([RFC3629]) or the \"ISO-8859-1\" ([ISO-8859-1]) character set.</code></pre>\n<p>ç”±äº<code>filename*</code>æ˜¯åæ¥æ‰å®šä¹‰çš„ï¼Œè®¸å¤šè€çš„æµè§ˆå™¨å¹¶ä¸æ”¯æŒï¼Œæ‰€ä»¥æ–‡æ¡£è§„å®šï¼Œå½“äºŒè€…åŒæ—¶å‡ºç°åœ¨å¤´å­—æ®µä¸­æ—¶ï¼Œéœ€è¦é‡‡ç”¨<code>filename*</code>ï¼Œå¿½ç•¥<code>filename</code>ã€‚</p>\n<p>è‡³æ­¤ï¼Œå“åº”å¤´çš„éª¨æ¶å·²ç»å‘¼ä¹‹æ¬²å‡ºäº†ï¼Œæ‘˜å½• [RFC 6266] ä¸­çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"java\"> Content-Disposition: attachment;\n                      filename=\"EURO rates\";\n                      filename*=utf-8''%e2%82%ac%20rates</code></pre>\n<p>è¿™é‡Œå¯¹<code>filename*=utf-8''%e2%82%ac%20rates</code>åšä¸€ä¸‹è¯´æ˜ï¼Œè¿™ä¸ªå†™æ³•ä¹ä¸€çœ‹å¯èƒ½ä¼šè§‰å¾—å¾ˆå¥‡æ€ªï¼Œå®ƒå…¶å®æ˜¯ç”¨å•å¼•å·ä½œä¸ºåˆ†éš”ç¬¦ï¼Œå°†ç­‰å·å³è¾¹åˆ†æˆäº†ä¸‰éƒ¨åˆ†ï¼šç¬¬ä¸€éƒ¨åˆ†æ˜¯å­—ç¬¦é›†(<code>utf-8</code>)ï¼Œä¸­é—´éƒ¨åˆ†æ˜¯è¯­è¨€(æœªå¡«å†™)ï¼Œæœ€åçš„<code>%e2%82%ac%20rates</code>ä»£è¡¨äº†å®é™…å€¼ã€‚å¯¹äºè¿™éƒ¨åˆ†çš„ç»„æˆï¼Œåœ¨<a href=\"https://tools.ietf.org/html/rfc2231\" rel=\"nofollow noreferrer\">RFC 2231</a>.section 4 ä¸­æœ‰è¯¦ç»†è¯´æ˜ï¼š</p>\n<pre><code class=\"java\"> A single quote is used to\n   separate the character set, language, and actual value information in\n   the parameter value string, and an percent sign is used to flag\n   octets encoded in hexadecimal.</code></pre>\n<h2>2.PercentEncode</h2>\n<p>PercentEncode åˆå« Percent-encoding æˆ– URL encoding.</p>\n<p>æ­£å¦‚å‰æ–‡æ‰€è¿°ï¼Œ<code>filename*</code>éµå®ˆçš„æ˜¯[RFC 5987] ä¸­å®šä¹‰çš„ç¼–ç è§„åˆ™ï¼Œåœ¨[RFC 5987] 3.2ä¸­å®šä¹‰äº†å¿…é¡»æ”¯æŒçš„å­—ç¬¦é›†ï¼š</p>\n<pre><code class=\"java\">recipients implementing this specification\nMUST support the character sets \"ISO-8859-1\" and \"UTF-8\".</code></pre>\n<p>å¹¶ä¸”åœ¨[RFC 5987] 3.2.1è§„å®šï¼Œç™¾åˆ†å·ç¼–ç éµä» <a href=\"https://tools.ietf.org/html/rfc3986\" rel=\"nofollow noreferrer\">RFC 3986</a>.section 2.1ä¸­çš„å®šä¹‰ï¼Œæ‘˜å½•å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"java\">A percent-encoding mechanism is used to represent a data octet in a\ncomponent when that octet's corresponding character is outside the\nallowed set or is being used as a delimiter of, or within, the\ncomponent.  A percent-encoded octet is encoded as a character\ntriplet, consisting of the percent character \"%\" followed by the two\nhexadecimal digits representing that octet's numeric value.  For\nexample, \"%20\" is the percent-encoding for the binary octet\n\"00100000\" (ABNF: %x20), which in US-ASCII corresponds to the space\ncharacter (SP).  Section 2.4 describes when percent-encoding and\ndecoding is applied.</code></pre>\n<p>æ³¨æ„äº†ï¼Œ<strong>[RFC 3986]</strong> æ˜ç¡®è§„å®šäº†<strong>ç©ºæ ¼ ä¼šè¢«ç™¾åˆ†å·ç¼–ç ä¸º<code>%20</code></strong></p>\n<p>è€Œåœ¨å¦ä¸€ä»½æ–‡æ¡£ <a href=\"https://tools.ietf.org/html/rfc1866\" rel=\"nofollow noreferrer\">RFC 1866</a>.Section 8.2.1 <em>The form-urlencoded Media Type</em> ä¸­å´è§„å®šï¼š</p>\n<pre><code class=\"java\">The default encoding for all forms is `application/x-www-form-\n   urlencoded'. A form data set is represented in this media type as\n   follows:\n\n        1. The form field names and values are escaped: space\n        characters are replaced by `+', and then reserved characters\n        are escaped as per [URL]</code></pre>\n<p>è¿™é‡Œè¦æ±‚<code>application/x-www-form-urlencoded</code>ç±»å‹çš„æ¶ˆæ¯ä¸­ï¼Œç©ºæ ¼è¦è¢«æ›¿æ¢ä¸º<code>+</code>,å…¶ä»–å­—ç¬¦æŒ‰ç…§[URL]ä¸­çš„å®šä¹‰æ¥è½¬ä¹‰ï¼Œå…¶ä¸­çš„[URL]æŒ‡å‘çš„æ˜¯<a href=\"https://tools.ietf.org/html/rfc1738\" rel=\"nofollow noreferrer\">RFC 1738</a> è€Œå®ƒçš„ä¿®è®¢ç‰ˆä¸­å’Œ URL æœ‰å…³çš„æœ€æ–°æ–‡æ¡£æ°æ°å°±æ˜¯ <strong>[RFC 3986]</strong></p>\n<p>è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤šæ–‡æ¡£ä¸­æè¿°ç©ºæ ¼(white space)çš„ç™¾åˆ†å·ç¼–ç ç»“æœéƒ½æ˜¯ <code>+</code>æˆ–<code>%20</code>ï¼Œå¦‚ï¼š</p>\n<p>w3schools:<code>URL encoding normally replaces a space with a plus (+) sign or with %20.</code></p>\n<p>MDN:<code>Depending on the context, the character ' ' is translated to a '+' (like in the percent-encoding version used in an application/x-www-form-urlencoded message), or in '%20' like on URLs.</code></p>\n<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯¹äºç©ºæ ¼ç¬¦çš„ç™¾åˆ†å·ç¼–ç æˆ‘ä»¬åº”è¯¥æ€ä¹ˆå¤„ç†ï¼Ÿ</p>\n<p>è¯¾ä»£è¡¨å»ºè®®å¤§å®¶éµå¾ªæœ€æ–°æ–‡æ¡£ï¼Œå› ä¸º [RFC 1866] ä¸­å®šä¹‰çš„æƒ…å†µä»…é€‚ç”¨äº<code>application/x-www-form-urlencoded</code>ç±»å‹ï¼Œ å°±ç™¾åˆ†å·ç¼–ç çš„å®šä¹‰æ¥è¯´ï¼Œæˆ‘ä»¬åº”è¯¥ä»¥ <strong>[RFC 3986]</strong> ä¸ºå‡†ï¼Œæ‰€ä»¥ï¼Œä»»ä½•éœ€è¦ç™¾åˆ†å·ç¼–ç çš„åœ°æ–¹ï¼Œéƒ½åº”è¯¥å°†ç©ºæ ¼ç¬¦ ç™¾åˆ†å·ç¼–ç ä¸º<code>%20</code>ï¼Œstackoverflow ä¸Šä¹Ÿæœ‰æ”¯æŒæ­¤è§‚ç‚¹çš„ç­”æ¡ˆï¼š<a href=\"https://stackoverflow.com/questions/2678551/when-to-encode-space-to-plus-or-20\" rel=\"nofollow noreferrer\">When to encode space to plus (+) or %20?</a></p>\n<h2>3. ä»£ç å®è·µ</h2>\n<p>æœ‰äº†ç†è®ºåŸºç¡€ï¼Œä»£ç å†™èµ·æ¥å°±æ°´åˆ°æ¸ æˆäº†ï¼Œç›´æ¥ä¸Šä»£ç ï¼š</p>\n<pre><code class=\"java\">@GetMapping(\"/downloadFile\")\npublic String download(String serverFileName, HttpServletRequest request, HttpServletResponse response) throws IOException {\n\n    request.setCharacterEncoding(\"utf-8\");\n    response.setContentType(\"application/octet-stream\");\n\n    String clientFileName = fileService.getClientFileName(serverFileName);\n    // å¯¹çœŸå®æ–‡ä»¶åè¿›è¡Œç™¾åˆ†å·ç¼–ç \n    String percentEncodedFileName = URLEncoder.encode(clientFileName, \"utf-8\")\n            .replaceAll(\"\\\\+\", \"%20\");\n\n    // ç»„è£…contentDispositionçš„å€¼\n    StringBuilder contentDispositionValue = new StringBuilder();\n    contentDispositionValue.append(\"attachment; filename=\")\n            .append(percentEncodedFileName)\n            .append(\";\")\n            .append(\"filename*=\")\n            .append(\"utf-8''\")\n            .append(percentEncodedFileName);\n    response.setHeader(\"Content-disposition\",\n            contentDispositionValue.toString());\n    \n    // å°†æ–‡ä»¶æµå†™åˆ°responseä¸­\n    try (InputStream inputStream = fileService.getInputStream(serverFileName);\n         OutputStream outputStream = response.getOutputStream()\n    ) {\n        IOUtils.copy(inputStream, outputStream);\n    }\n\n    return \"OK!\";\n}</code></pre>\n<p>ä»£ç å¾ˆç®€å•ï¼Œå…¶ä¸­æœ‰ä¸¤ç‚¹éœ€è¦è¯´æ˜ä¸€ä¸‹ï¼š</p>\n<ol>\n <li><p><code>URLEncoder.encode(clientFileName, \"utf-8\")</code>æ–¹æ³•ä¹‹åï¼Œä¸ºä»€ä¹ˆè¿˜è¦<code>.replaceAll(\"\\\\+\", \"%20\")</code>ã€‚</p><p>æ­£å¦‚å‰æ–‡æ‰€è¿°ï¼Œæˆ‘ä»¬å·²ç»æ˜ç¡®ï¼Œä»»ä½•éœ€è¦ç™¾åˆ†å·ç¼–ç çš„åœ°æ–¹ï¼Œéƒ½åº”è¯¥æŠŠ ç©ºæ ¼ç¬¦ç¼–ç ä¸º <code>%20</code>ï¼Œè€Œ<code>URLEncoder</code>è¿™ä¸ªç±»çš„è¯´æ˜ä¸Šæ˜ç¡®æ ‡æ³¨å…¶ä¼šå°†ç©ºæ ¼ç¬¦è½¬æ¢ä¸º<code>+</code>:</p>\n  <blockquote>\n   The space character \" &nbsp; \" is converted into a plus sign \"{@code +}\".\n  </blockquote><p>å…¶å®è¿™å¹¶ä¸æ€ª JDKï¼Œå› ä¸ºå®ƒçš„å¤‡æ³¨é‡Œè¯´æ˜äº†å…¶éµå¾ªçš„æ˜¯<code>application/x-www-form-urlencoded</code>( PHP ä¸­ä¹Ÿæœ‰è¿™ä¹ˆä¸€ä¸ªå‡½æ•°ï¼Œä¹Ÿæ˜¯è¿™ä¹ˆä¸ªå¥—è·¯)</p>\n  <blockquote>\n   Translates a string into {@code application/x-www-form-urlencoded} format using a specific encoding scheme. This method uses the\n  </blockquote><p>æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ç”¨<code>.replaceAll(\"\\\\+\", \"%20\")</code> æŠŠ<code>+</code>å·å¤„ç†ä¸€ä¸‹ï¼Œä½¿å…¶å®Œå…¨ç¬¦åˆ <strong>[RFC 3986]</strong> çš„ç™¾åˆ†å·ç¼–ç è§„èŒƒã€‚è¿™é‡Œä¸ºäº†æ–¹ä¾¿è¯´æ˜é—®é¢˜ï¼ŒæŠŠæ‰€æœ‰æ“ä½œéƒ½å±•ç°å‡ºæ¥äº†ã€‚å½“ç„¶ï¼Œä½ å®Œå…¨å¯ä»¥è‡ªå·±å®ç°ä¸€ä¸ª<code>PercentEncoder</code>ç±»ï¼Œä¸°ä¿­ç”±äººã€‚</p></li>\n <li>[RFC 6266] æ ‡å‡†ä¸­<code>filename=</code>çš„<code>value</code>æ˜¯ä¸éœ€è¦ç¼–ç çš„ï¼Œè¿™é‡Œçš„<code>filename=</code>åé¢çš„ value ä¸ºä»€ä¹ˆè¦ç™¾åˆ†å·ç¼–ç ï¼Ÿ<p>å›é¡¾ [RFC 6266] æ–‡æ¡£ï¼Œ <code>filename</code>å’Œ<code>filename*</code>åŒæ—¶å‡ºç°æ—¶å–åè€…ï¼Œæµè§ˆå™¨å¤ªè€ä¸æ”¯æŒæ–°æ ‡å‡†æ—¶å–å‰è€…ã€‚</p><p>ç›®å‰ä¸»æµçš„æµè§ˆå™¨éƒ½é‡‡ç”¨è‡ªå‡çº§ç­–ç•¥ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†éƒ½æ”¯æŒæ–°æ ‡å‡†------é™¤äº†è€ç‰ˆæœ¬IEã€‚è€ç‰ˆæœ¬çš„IEå¯¹ value çš„å¤„ç†ç­–ç•¥æ˜¯ è¿›è¡Œç™¾åˆ†å·è§£ç  å¹¶ä½¿ç”¨ã€‚æ‰€ä»¥è¿™é‡Œä¸“é—¨æŠŠ<code>filename=</code>çš„<code>value</code>è¿›è¡Œç™¾åˆ†å·ç¼–ç ï¼Œç”¨æ¥å…¼å®¹è€ç‰ˆæœ¬ IEã€‚</p><p>PSï¼šè¯¾ä»£è¡¨å®æµ‹ IE11 åŠ Edge å·²ç»æ”¯æŒæ–°æ ‡å‡†äº†ã€‚</p></li>\n</ol>\n<h2>4. æµè§ˆå™¨æµ‹è¯•</h2>\n<p>æ ¹æ®ä¸‹å›¾ statcounter ç»Ÿè®¡çš„ 2019 å¹´ä¸­å›½å¸‚åœºæµè§ˆå™¨å æœ‰ç‡ï¼Œè¯¾ä»£è¡¨è®¾è®¡äº†ä¸€ä¸ªåŒ…å«ä¸­æ–‡ï¼Œè‹±æ–‡ï¼Œç©ºæ ¼çš„æ–‡ä»¶å <code>ä¸‹è½½-down test .txt</code>ç”¨æ¥æµ‹è¯•</p>\n<p><img src=\"https://segmentfault.com/img/bVbLbdV\" alt=\"image\" title=\"image\" /></p>\n<p>æµ‹è¯•ç»“æœï¼š</p>\n<table>\n <thead>\n  <tr>\n   <th>Browser</th>\n   <th>Version</th>\n   <th>pass</th>\n  </tr>\n </thead>\n <tbody>\n  <tr>\n   <td>Chrome</td>\n   <td>84.0.4147.125</td>\n   <td>true</td>\n  </tr>\n  <tr>\n   <td>UC</td>\n   <td>V6.2.4098.3</td>\n   <td>true</td>\n  </tr>\n  <tr>\n   <td>Safari</td>\n   <td>13.1.2</td>\n   <td>true</td>\n  </tr>\n  <tr>\n   <td>QQ Browser</td>\n   <td>10.6.1(4208)</td>\n   <td>true</td>\n  </tr>\n  <tr>\n   <td>IE</td>\n   <td>7-11</td>\n   <td>true</td>\n  </tr>\n  <tr>\n   <td>Firefox</td>\n   <td>79.0</td>\n   <td>true</td>\n  </tr>\n  <tr>\n   <td>Edge</td>\n   <td>44.18362.449.0</td>\n   <td>true</td>\n  </tr>\n  <tr>\n   <td>360å®‰å…¨æµè§ˆå™¨12</td>\n   <td>12.2.1.362.0</td>\n   <td>true</td>\n  </tr>\n  <tr>\n   <td>Edge(chromium)</td>\n   <td>84.0.522.59</td>\n   <td>true</td>\n  </tr>\n </tbody>\n</table>\n<p>æ ¹æ®æµ‹è¯•ç»“æœå¯çŸ¥ï¼šåŸºæœ¬å·²ç»èƒ½å¤Ÿå…¼å®¹å¸‚é¢ä¸Šæ‰€æœ‰ä¸»æµæµè§ˆå™¨äº†ã€‚</p>\n<h2>5.æ€»ç»“</h2>\n<p>å›é¡¾æœ¬æ–‡å†…å®¹ï¼Œå…¶å®å°±æ˜¯æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜å¼•å‘çš„é™„ä»¶åä¹±ç ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒæŸ¥é˜…äº†ä¸¤ç±»æ ‡å‡†æ–‡æ¡£ï¼š</p>\n<ol>\n <li>HTTP å“åº”å¤´ç›¸å…³æ ‡å‡†<p>[RFC 6266]ã€[RFC 1866]</p></li>\n <li>ç¼–ç æ ‡å‡†<p>[RFC 5987]ã€[RFC 2231]ã€[3986]ã€[1738]</p></li>\n</ol>\n<p>æˆ‘ä»¬ä»¥ [RFC 6266] ä¸ºåˆ‡å…¥ç‚¹ï¼Œå…¨æ–‡æ€»å…±å¼•ç”¨äº† 6 ä¸ª [RFC] ç›¸å…³æ–‡æ¡£ï¼Œå¼•ç”¨éƒ½æ ‡æ˜äº†å‡ºå¤„ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è·Ÿç€æ–‡ç« æ€è·¯é˜…è¯»ä¸€ä¸‹åŸæ–‡æ¡£ï¼Œç›¸ä¿¡ä½ ä¼šå¯¹è¿™ä¸ªé—®é¢˜æœ‰æ›´æ·±å…¥çš„ç†è§£ã€‚æ–‡ä¸­ä»£ç å·²ä¸Šä¼  <a href=\"https://github.com/zhengxl5566/springboot-demo\" rel=\"nofollow noreferrer\">github</a></p>\n<p>æœ€åä¸ç¦è¦æ„Ÿå¹ä¸€ä¸‹ï¼šè§„èŒƒçœŸæ˜¯ä¸ªå¥½ä¸œè¥¿ï¼Œå®ƒå°±åƒ Java è¯­è¨€ä¸­çš„ <code>interface</code>ï¼Œåªåˆ¶å®šæ ‡å‡†ï¼Œå…·ä½“å®ç°ç•™ç»™å¤§å®¶å„è‡ªå‘æŒ¥ã€‚</p>\n<p>å¦‚æœè§‰å¾—æœ¬æ–‡å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿æ”¶è—ã€åˆ†äº«ã€åœ¨çœ‹ä¸‰è¿</p>\n<h2>6.å‚è€ƒèµ„æ–™</h2>\n<p>[1]RFC 6266: <em><a href=\"https://tools.ietf.org/html/rfc6266\" rel=\"nofollow noreferrer\">https://tools.ietf.org/html/r...</a></em></p>\n<p>[2]RFC 5987: <em><a href=\"https://tools.ietf.org/html/rfc5987\" rel=\"nofollow noreferrer\">https://tools.ietf.org/html/r...</a></em></p>\n<p>[3]RFC 2231: <em><a href=\"https://tools.ietf.org/html/rfc2231\" rel=\"nofollow noreferrer\">https://tools.ietf.org/html/r...</a></em></p>\n<p>[4]RFC 3986: <em><a href=\"https://tools.ietf.org/html/rfc3986\" rel=\"nofollow noreferrer\">https://tools.ietf.org/html/r...</a></em></p>\n<p>[5]RFC 1866: <em><a href=\"https://tools.ietf.org/html/rfc1866\" rel=\"nofollow noreferrer\">https://tools.ietf.org/html/r...</a></em></p>\n<p>[6]RFC 1738: <em><a href=\"https://tools.ietf.org/html/rfc1738\" rel=\"nofollow noreferrer\">https://tools.ietf.org/html/r...</a></em></p>\n<p>[7]When to encode space to plus (+) or %20?: <em><a href=\"https://stackoverflow.com/questions/2678551/when-to-encode-space-to-plus-or-20\" rel=\"nofollow noreferrer\">https://stackoverflow.com/que...</a></em></p>\n<hr>\n <p>2020å¹´8æœˆ19æ—¥æ›´æ–°ï¼š<br>æ–‡ä¸­å†…å®¹å·²åˆå¹¶è¿›å…¥å¼€æºæ¡†æ¶ <a href=\"https://gitee.com/y_project/RuoYi\" rel=\"nofollow noreferrer\">è‹¥ä¾</a> ï¼ˆpull requestï¼š<a href=\"https://gitee.com/y_project/RuoYi/pulls/196\" rel=\"nofollow noreferrer\">196</a>ï¼‰</br></p>\n <hr>\n  <p>ğŸ‘‡å…³æ³¨ Javaè¯¾ä»£è¡¨ï¼Œè·å–æœ€æ–° Java å¹²è´§ğŸ‘‡<br><img src=\"https://segmentfault.com/img/bVbLbSq\" alt=\"image\" title=\"image\" /></br></p>\n </hr>\n</hr>","descriptionType":"html","publishedDate":"Thu, 13 Aug 2020 00:12:10 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/bVbLbdV","linkMd5":"76c9c6e6cb88560c51a4d8dfd2fa525b","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn90@2020_2/2020/08/24/23-08-22-917_b612e89919e9c268.webp","destWidth":800,"destHeight":361,"sourceBytes":60839,"destBytes":11212,"author":"Javaè¯¾ä»£è¡¨","articleImgCdnMap":{"https://segmentfault.com/img/bVbLbdV":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn90@2020_2/2020/08/24/23-08-22-917_b612e89919e9c268.webp","https://segmentfault.com/img/bVbLbSq":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn46@2020_2/2020/08/24/23-08-28-505_e4ee0051d3ebdd4a.webp"},"publishedOrCreatedDate":1598310388569},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"èŠèŠæœ€è¿‘å¾ˆç«çš„eBPF","link":"https://segmentfault.com/a/1190000023602033","description":"<p><img src=\"https://segmentfault.com/img/remote/1460000023602036\" alt=\"\" title=\"\" /></p>\n<p>å¦‚æœéè¦è¯´å½“å‰è®¡ç®—æœºé¢†åŸŸæœ€æœ‰å‰é€”çš„ä¸¤ä¸ªåŸºç¡€è½¯ä»¶æŠ€æœ¯ï¼Œé‚£éeBPFå’Œwasmè«å±äº†ã€‚</p>\n<h3>ä»€ä¹ˆæ˜¯eBPFï¼Ÿ</h3>\n<p>Linuxå†…æ ¸ä¸€ç›´æ˜¯å®ç°ç›‘è§†/å¯è§‚å¯Ÿæ€§ï¼Œç½‘ç»œå’Œå®‰å…¨æ€§çš„ç†æƒ³åœºæ‰€ã€‚ä¸å¹¸çš„æ˜¯ï¼Œè¿™é€šå¸¸æ˜¯ä¸åˆ‡å®é™…çš„ï¼Œå› ä¸ºå®ƒéœ€è¦æ›´æ”¹å†…æ ¸æºä»£ç æˆ–åŠ è½½å†…æ ¸æ¨¡å—ï¼Œå¹¶å¯¼è‡´å½¼æ­¤å †å çš„æŠ½è±¡å±‚ã€‚ eBPFæ˜¯ä¸€é¡¹é©å‘½æ€§çš„æŠ€æœ¯ï¼Œå¯ä»¥åœ¨Linuxå†…æ ¸ä¸­è¿è¡Œæ²™ç›’ç¨‹åºï¼Œè€Œæ— éœ€æ›´æ”¹å†…æ ¸æºä»£ç æˆ–åŠ è½½å†…æ ¸æ¨¡å—ã€‚é€šè¿‡ä½¿Linuxå†…æ ¸å¯ç¼–ç¨‹ï¼ŒåŸºç¡€æ¶æ„è½¯ä»¶å¯ä»¥åˆ©ç”¨ç°æœ‰çš„å±‚ï¼Œä»è€Œä½¿å®ƒä»¬æ›´åŠ æ™ºèƒ½å’ŒåŠŸèƒ½ä¸°å¯Œï¼Œè€Œæ— éœ€ç»§ç»­ä¸ºç³»ç»Ÿå¢åŠ é¢å¤–çš„å¤æ‚æ€§å±‚ã€‚</p>\n<p>eBPFå¯¼è‡´äº†ç½‘ç»œï¼Œå®‰å…¨æ€§ï¼Œåº”ç”¨ç¨‹åºé…ç½®/è·Ÿè¸ªå’Œæ€§èƒ½æ•…éšœæ’é™¤ç­‰é¢†åŸŸçš„æ–°ä¸€ä»£å·¥å…·çš„å¼€å‘ï¼Œè¿™äº›å·¥å…·ä¸å†ä¾èµ–ç°æœ‰çš„å†…æ ¸åŠŸèƒ½ï¼Œè€Œæ˜¯åœ¨ä¸å½±å“æ‰§è¡Œæ•ˆç‡æˆ–å®‰å…¨æ€§çš„æƒ…å†µä¸‹ä¸»åŠ¨é‡æ–°ç¼–ç¨‹è¿è¡Œæ—¶è¡Œä¸ºã€‚</p>\n<p>å¦‚æœç›´æ¥è§£é‡ŠeBPFï¼Œæœ‰ç‚¹ä¸æ˜æ‰€ä»¥ã€‚é‚£æˆ‘ä»¬å°±çœ‹çœ‹æœ‰å“ªäº›åŸºäºeBPFçš„å·¥ç¨‹ï¼Œè¿™äº›å·¥ç¨‹æˆ–è®¸ä½ å·²ç»çŸ¥é“ï¼Œæˆ–æ˜¯å·²ç»ç»å¸¸ä½¿ç”¨ï¼Œä¹Ÿè®¸ä½ ä¼šæ˜ç™½eBPFè·ç¦»æˆ‘ä»¬å¹¶ä¸é¥è¿œã€‚</p>\n<h3>åŸºäºeBPFçš„é¡¹ç›®</h3>\n<p>1ï¼š<a href=\"https://link.zhihu.com/?target=https%3A//github.com/iovisor/bcc\" rel=\"nofollow noreferrer\">bcc</a></p>\n<p>BCCæ˜¯ç”¨äºåˆ›å»ºåŸºäºeBPFçš„é«˜æ•ˆå†…æ ¸è·Ÿè¸ªå’Œæ“ä½œç¨‹åºçš„å·¥å…·åŒ…ï¼Œå…¶ä¸­åŒ…æ‹¬ä¸€äº›æœ‰ç”¨çš„å‘½ä»¤è¡Œå·¥å…·å’Œç¤ºä¾‹ã€‚ BCCç®€åŒ–äº†ç”¨Cè¿›è¡Œå†…æ ¸æ£€æµ‹çš„eBPFç¨‹åºçš„ç¼–å†™ï¼ŒåŒ…æ‹¬LLVMçš„åŒ…è£…å™¨ä»¥åŠPythonå’ŒLuaçš„å‰ç«¯ã€‚å®ƒè¿˜æä¾›äº†ç”¨äºç›´æ¥é›†æˆåˆ°åº”ç”¨ç¨‹åºä¸­çš„é«˜çº§åº“ã€‚</p>\n<p>2ï¼š<a href=\"https://link.zhihu.com/?target=https%3A//github.com/iovisor/bpftrace\" rel=\"nofollow noreferrer\">bpftrace</a></p>\n<p>bpftraceæ˜¯Linux eBPFçš„é«˜çº§è·Ÿè¸ªè¯­è¨€ã€‚å®ƒçš„è¯­è¨€å—awkå’ŒCä»¥åŠDTraceå’ŒSystemTapç­‰ä»¥å‰çš„è·Ÿè¸ªç¨‹åºçš„å¯å‘ã€‚ bpftraceä½¿ç”¨LLVMä½œä¸ºåç«¯å°†è„šæœ¬ç¼–è¯‘ä¸ºeBPFå­—èŠ‚ç ï¼Œå¹¶åˆ©ç”¨BCCä½œä¸ºä¸Linux eBPFå­ç³»ç»Ÿä»¥åŠç°æœ‰Linuxè·Ÿè¸ªåŠŸèƒ½å’Œè¿æ¥ç‚¹è¿›è¡Œäº¤äº’çš„åº“ã€‚</p>\n<p>3ï¼š<a href=\"https://link.zhihu.com/?target=https%3A//github.com/cilium/cilium\" rel=\"nofollow noreferrer\">Cilium</a></p>\n<p>Ciliumæ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæä¾›åŸºäºeBPFçš„è”ç½‘ï¼Œå®‰å…¨æ€§å’Œå¯è§‚å¯Ÿæ€§ã€‚å®ƒæ˜¯ä»å¤´å¼€å§‹ä¸“é—¨è®¾è®¡çš„ï¼Œæ—¨åœ¨å°†eBPFçš„ä¼˜åŠ¿å¸¦å…¥Kubernetesçš„ä¸–ç•Œï¼Œå¹¶æ»¡è¶³å®¹å™¨å·¥ä½œè´Ÿè½½çš„æ–°å¯ä¼¸ç¼©æ€§ï¼Œå®‰å…¨æ€§å’Œå¯è§æ€§è¦æ±‚ã€‚</p>\n<p>4ï¼š<a href=\"https://link.zhihu.com/?target=https%3A//github.com/falcosecurity/falco\" rel=\"nofollow noreferrer\">Falco</a></p>\n<p>Falcoæ˜¯ä¸€ç§è¡Œä¸ºæ´»åŠ¨ç›‘è§†å™¨ï¼Œæ—¨åœ¨æ£€æµ‹åº”ç”¨ç¨‹åºä¸­çš„å¼‚å¸¸æ´»åŠ¨ã€‚ Falcoåœ¨eBPFçš„å¸®åŠ©ä¸‹å®¡æ ¸Linuxå†…æ ¸å±‚çš„ç³»ç»Ÿã€‚å®ƒä½¿ç”¨å…¶ä»–è¾“å…¥æµï¼ˆä¾‹å¦‚å®¹å™¨è¿è¡Œæ—¶åº¦é‡æ ‡å‡†å’ŒKubernetesåº¦é‡æ ‡å‡†ï¼‰ä¸°å¯Œäº†æ”¶é›†çš„æ•°æ®ï¼Œå¹¶å…è®¸è¿ç»­ç›‘è§†å’Œæ£€æµ‹å®¹å™¨ï¼Œåº”ç”¨ç¨‹åºï¼Œä¸»æœºå’Œç½‘ç»œæ´»åŠ¨ã€‚</p>\n<p>5ï¼š<a href=\"https://link.zhihu.com/?target=https%3A//github.com/facebookincubator/katran\" rel=\"nofollow noreferrer\">Katran</a></p>\n<p>Katranæ˜¯ä¸€ä¸ªC ++åº“å’ŒeBPFç¨‹åºï¼Œç”¨äºæ„å»ºé«˜æ€§èƒ½çš„ç¬¬4å±‚è´Ÿè½½å¹³è¡¡è½¬å‘å¹³é¢ã€‚ Katranåˆ©ç”¨Linuxå†…æ ¸ä¸­çš„XDPåŸºç¡€ç»“æ„æ¥æä¾›ç”¨äºå¿«é€Ÿæ•°æ®åŒ…å¤„ç†çš„å†…æ ¸åŠŸèƒ½ã€‚å®ƒçš„æ€§èƒ½ä¸NICæ¥æ”¶é˜Ÿåˆ—çš„æ•°é‡æˆçº¿æ€§æ¯”ä¾‹ï¼Œå¹¶ä¸”ä½¿ç”¨RSSå‹å¥½çš„å°è£…è½¬å‘åˆ°L7è´Ÿè½½å¹³è¡¡å™¨ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023602037\" alt=\"\" title=\"\" /></p>\n<p>6ï¼š<a href=\"https://link.zhihu.com/?target=https%3A//github.com/draios/sysdig\" rel=\"nofollow noreferrer\">Sysdig</a></p>\n<p>Sysdigæ˜¯æä¾›æ·±å±‚ç³»ç»Ÿå¯è§æ€§çš„ç®€å•å·¥å…·ï¼Œå¹¶å…·æœ‰å¯¹å®¹å™¨çš„åŸç”Ÿæ”¯æŒã€‚</p>\n<p>å…¶ä»–åŸºäºeBPFæŠ€æœ¯çš„é¡¹ç›®è¿˜æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚<a href=\"https://link.zhihu.com/?target=https%3A//github.com/iovisor/kubectl-trace\" rel=\"nofollow noreferrer\">kubectl-trace</a> ï¼Œ<a href=\"https://link.zhihu.com/?target=https%3A//github.com/iovisor/ply\" rel=\"nofollow noreferrer\">ply</a> ç­‰ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚</p>\n<h3>å¦‚ä½•ç¼–å†™ä¸€ä¸ªeBPFç¨‹åºï¼Ÿ</h3>\n<p>åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œä¸æ˜¯ç›´æ¥ä½¿ç”¨eBPFï¼Œè€Œæ˜¯é€šè¿‡Ciliumï¼Œbccæˆ–bpftraceç­‰é¡¹ç›®é—´æ¥ä½¿ç”¨eBPFï¼Œè¿™äº›é¡¹ç›®åœ¨eBPFä¹‹ä¸Šæä¾›äº†æŠ½è±¡ï¼Œå¹¶ä¸”ä¸éœ€è¦ç›´æ¥ç¼–å†™ç¨‹åºï¼Œè€Œæ˜¯æä¾›äº†æŒ‡å®šåŸºäºæ„å›¾çš„å®šä¹‰çš„åŠŸèƒ½ï¼Œç„¶åä½¿ç”¨eBPFå®æ–½ã€‚</p>\n<p>å¦‚æœä¸å­˜åœ¨æ›´é«˜çº§åˆ«çš„æŠ½è±¡ï¼Œåˆ™éœ€è¦ç›´æ¥ç¼–å†™ç¨‹åºã€‚ Linuxå†…æ ¸å¸Œæœ›eBPFç¨‹åºä»¥å­—èŠ‚ç çš„å½¢å¼åŠ è½½ã€‚è™½ç„¶å½“ç„¶å¯ä»¥ç›´æ¥ç¼–å†™å­—èŠ‚ç ï¼Œä½†æ›´å¸¸è§çš„å¼€å‘å®è·µæ˜¯åˆ©ç”¨LLVMä¹‹ç±»çš„ç¼–è¯‘å™¨å¥—ä»¶å°†ä¼ªCä»£ç ç¼–è¯‘ä¸ºeBPFå­—èŠ‚ç ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023602038\" alt=\"\" title=\"\" /></p>\n<p>åœ¨ç¼–å†™eBPFç¨‹åºä¹‹å‰ï¼Œéœ€è¦ç®€å•äº†è§£å‡ ä¸ªæ¦‚å¿µã€‚</p>\n<p>1ï¼‰map(æ˜ å°„) ï¼šBPFæœ€ä»¤äººç€è¿·çš„æ–¹é¢ä¹‹ä¸€æ˜¯ï¼Œå†…æ ¸ä¸Šè¿è¡Œçš„ä»£ç å’ŒåŠ è½½äº†è¯¥ä»£ç çš„ç¨‹åºå¯ä»¥åœ¨è¿è¡Œæ—¶ä½¿ç”¨æ¶ˆæ¯ä¼ é€’ç›¸äº’é€šä¿¡ã€‚</p>\n<p>BPFæ˜ å°„æ˜¯é©»ç•™åœ¨å†…æ ¸ä¸­çš„é”®/å€¼å­˜å‚¨ã€‚ä»»ä½•BPFç¨‹åºéƒ½å¯ä»¥è®¿é—®å®ƒä»¬ã€‚åœ¨ç”¨æˆ·æ€ä¸­è¿è¡Œçš„ç¨‹åºä¹Ÿå¯ä»¥ä½¿ç”¨æ–‡ä»¶æè¿°ç¬¦è®¿é—®è¿™äº›æ˜ å°„ã€‚åªè¦äº‹å…ˆæ­£ç¡®æŒ‡å®šæ•°æ®å¤§å°ï¼Œå°±å¯ä»¥åœ¨æ˜ å°„ä¸­å­˜å‚¨ä»»ä½•ç±»å‹çš„æ•°æ®ã€‚å†…æ ¸å°†é”®å’Œå€¼è§†ä¸ºäºŒè¿›åˆ¶ blobsï¼Œå®ƒå¹¶ä¸å…³å¿ƒæ‚¨åœ¨æ˜ å°„ä¸­ä¿ç•™çš„å†…å®¹ã€‚</p>\n<p>BPFéªŒè¯ç¨‹åºåŒ…æ‹¬å¤šç§ä¿æŠ¤æªæ–½ï¼Œä»¥ç¡®ä¿æ‚¨åˆ›å»ºå’Œè®¿é—®æ˜ å°„çš„æ–¹å¼æ˜¯å®‰å…¨çš„ã€‚å½“æˆ‘ä»¬è§£é‡Šå¦‚ä½•è®¿é—®è¿™äº›æ˜ å°„ä¸­çš„æ•°æ®æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå°†è§£é‡Šè¿™äº›ä¿æŠ¤æªæ–½ã€‚</p>\n<p>å½“ç„¶BPFæ˜ å°„ç±»å‹æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚å“ˆå¸Œè¡¨æ˜ å°„ï¼Œæ•°ç»„æ˜ å°„ï¼ŒCgroup æ•°ç»„æ˜ å°„ç­‰ï¼Œåˆ†åˆ«æ»¡è¶³ä¸åŒçš„åœºæ™¯ã€‚</p>\n<p>2ï¼‰éªŒè¯å™¨</p>\n<p>BPFéªŒè¯ç¨‹åºä¹Ÿæ˜¯åœ¨æ‚¨çš„ç³»ç»Ÿä¸Šè¿è¡Œçš„ç¨‹åºï¼Œå› æ­¤ï¼Œå¯¹å…¶è¿›è¡Œä¸¥æ ¼å®¡æŸ¥æ˜¯ç¡®ä¿å…¶æ­£ç¡®æ‰§è¡Œå·¥ä½œçš„ç›®æ ‡ã€‚</p>\n<p>éªŒè¯ç¨‹åºæ‰§è¡Œçš„ç¬¬ä¸€é¡¹æ£€æŸ¥æ˜¯å¯¹VMå³å°†åŠ è½½çš„ä»£ç çš„é™æ€åˆ†æã€‚ç¬¬ä¸€æ¬¡æ£€æŸ¥çš„ç›®çš„æ˜¯ç¡®ä¿ç¨‹åºæœ‰é¢„æœŸçš„ç»“æœã€‚ä¸ºæ­¤ï¼ŒéªŒè¯ç¨‹åºå°†ä½¿ç”¨ä»£ç åˆ›å»ºæœ‰å‘å¾ªç¯å›¾ï¼ˆDAGï¼‰ã€‚éªŒè¯ç¨‹åºåˆ†æçš„æ¯ä¸ªæŒ‡ä»¤å°†æˆä¸ºå›¾ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶ä¸”æ¯ä¸ªèŠ‚ç‚¹éƒ½é“¾æ¥åˆ°ä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚éªŒè¯ç¨‹åºç”Ÿæˆæ­¤å›¾åï¼Œå®ƒå°†æ‰§è¡Œæ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰ï¼Œä»¥ç¡®ä¿ç¨‹åºå®Œæˆå¹¶ä¸”ä»£ç ä¸åŒ…å«å±é™©è·¯å¾„ã€‚è¿™æ„å‘³ç€å®ƒå°†éå†å›¾çš„æ¯ä¸ªåˆ†æ”¯ï¼Œä¸€ç›´åˆ°åˆ†æ”¯çš„åº•éƒ¨ï¼Œä»¥ç¡®ä¿æ²¡æœ‰é€’å½’å¾ªç¯ã€‚</p>\n<p>è¿™äº›æ˜¯éªŒè¯å™¨åœ¨ç¬¬ä¸€æ¬¡æ£€æŸ¥æœŸé—´å¯èƒ½æ‹’ç»æ‚¨çš„ä»£ç çš„æƒ…å½¢ï¼Œè¦æ±‚æœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>\n<ul>\n <li>è¯¥ç¨‹åºä¸åŒ…å«æ§åˆ¶å¾ªç¯ã€‚ä¸ºç¡®ä¿ç¨‹åºä¸ä¼šé™·å…¥æ— é™å¾ªç¯ï¼ŒéªŒè¯ç¨‹åºä¼šæ‹’ç»ä»»ä½•ç±»å‹çš„æ§åˆ¶å¾ªç¯ã€‚å·²ç»æå‡ºäº†åœ¨BPFç¨‹åºä¸­å…è®¸å¾ªç¯çš„å»ºè®®ï¼Œä½†æ˜¯æˆªè‡³æ’°å†™æœ¬æ–‡æ—¶ï¼Œæ²¡æœ‰ä¸€ä¸ªè¢«é‡‡ç”¨ã€‚</li>\n <li>è¯¥ç¨‹åºä¸ä¼šå°è¯•æ‰§è¡Œè¶…è¿‡å†…æ ¸å…è®¸çš„æœ€å¤§æŒ‡ä»¤æ•°çš„æŒ‡ä»¤ã€‚æ­¤æ—¶ï¼Œå¯æ‰§è¡Œçš„æœ€å¤§æŒ‡ä»¤æ•°ä¸º4,096ã€‚æ­¤é™åˆ¶æ˜¯ä¸ºäº†é˜²æ­¢BPFæ°¸è¿œè¿è¡Œã€‚åœ¨ç¬¬3ç« ï¼Œæˆ‘ä»¬è®¨è®ºå¦‚ä½•åµŒå¥—ä¸åŒçš„BPFç¨‹åºï¼Œä»¥å®‰å…¨çš„æ–¹å¼è§£å†³æ­¤é™åˆ¶ã€‚</li>\n <li>è¯¥ç¨‹åºä¸åŒ…å«ä»»ä½•æ— æ³•è®¿é—®çš„æŒ‡ä»¤ï¼Œä¾‹å¦‚ä»æœªæ‰§è¡Œè¿‡çš„æ¡ä»¶æˆ–åŠŸèƒ½ã€‚è¿™æ ·å¯ä»¥é˜²æ­¢åœ¨VMä¸­åŠ è½½æ— æ•ˆä»£ç ï¼Œè¿™ä¹Ÿä¼šå»¶è¿ŸBPFç¨‹åºçš„ç»ˆæ­¢ã€‚</li>\n <li>è¯¥ç¨‹åºä¸ä¼šå°è¯•è¶Šç•Œã€‚</li>\n</ul>\n<p>éªŒè¯è€…æ‰§è¡Œçš„ç¬¬äºŒé¡¹æ£€æŸ¥æ˜¯BPFç¨‹åºçš„ç©ºè¿è¡Œã€‚è¿™æ„å‘³ç€éªŒè¯è€…å°†å°è¯•åˆ†æç¨‹åºå°†è¦æ‰§è¡Œçš„æ¯æ¡æŒ‡ä»¤ï¼Œä»¥ç¡®ä¿å®ƒä¸ä¼šæ‰§è¡Œä»»ä½•æ— æ•ˆçš„æŒ‡ä»¤ã€‚æ­¤æ‰§è¡Œè¿˜å°†æ£€æŸ¥æ‰€æœ‰å†…å­˜æŒ‡é’ˆæ˜¯å¦å‡å·²æ­£ç¡®è®¿é—®å’Œå–æ¶ˆå¼•ç”¨ã€‚æœ€åï¼Œç©ºè¿è¡Œå‘éªŒè¯ç¨‹åºé€šçŸ¥ç¨‹åºä¸­çš„æ§åˆ¶æµï¼Œä»¥ç¡®ä¿æ— è®ºç¨‹åºé‡‡ç”¨å“ªä¸ªæ§åˆ¶è·¯å¾„ï¼Œå®ƒéƒ½ä¼šåˆ°è¾¾BPF_EXITæŒ‡ä»¤ã€‚ä¸ºæ­¤ï¼ŒéªŒè¯ç¨‹åºä¼šè·Ÿè¸ªå †æ ˆä¸­æ‰€æœ‰è®¿é—®è¿‡çš„åˆ†æ”¯è·¯å¾„ï¼Œå¹¶åœ¨é‡‡ç”¨æ–°è·¯å¾„ä¹‹å‰å¯¹å…¶è¿›è¡Œè¯„ä¼°ï¼Œä»¥ç¡®ä¿å®ƒä¸ä¼šå¤šæ¬¡è®¿é—®ç‰¹å®šè·¯å¾„ã€‚ç»è¿‡è¿™ä¸¤é¡¹æ£€æŸ¥åï¼ŒéªŒè¯è€…è®¤ä¸ºç¨‹åºå¯ä»¥å®‰å…¨æ‰§è¡Œã€‚</p>\n<p>3) hook ï¼š ç”±äºeBPFæ˜¯äº‹ä»¶é©±åŠ¨çš„ï¼Œæ‰€ä»¥ebpfæ˜¯ä½œç”¨äºå…·ä½“çš„hookçš„ã€‚æ ¹æ®ä¸åŒçš„ä½œç”¨ï¼Œå¸¸ç”¨çš„æœ‰XDPï¼Œtraceï¼Œå¥—æ¥å­—ç­‰ã€‚</p>\n<p>4ï¼‰å¸®åŠ©å‡½æ•°ï¼šeBPFç¨‹åºæ— æ³•è°ƒç”¨ä»»æ„å†…æ ¸åŠŸèƒ½ã€‚å…è®¸è¿™æ ·åšä¼šå°†eBPFç¨‹åºç»‘å®šåˆ°ç‰¹å®šçš„å†…æ ¸ç‰ˆæœ¬ï¼Œå¹¶ä½¿ç¨‹åºçš„å…¼å®¹æ€§å¤æ‚åŒ–ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼ŒeBPFç¨‹åºå¯ä»¥è°ƒç”¨å¸®åŠ©å‡½æ•°ï¼Œè¯¥å‡½æ•°æ˜¯å†…æ ¸æä¾›çš„ä¼—æ‰€å‘¨çŸ¥ä¸”ç¨³å®šçš„APIã€‚</p>\n<h3>æ€»ç»“</h3>\n<p>å®‰å…¨ï¼Œç½‘ç»œï¼Œè´Ÿè½½å‡è¡¡ï¼Œæ•…éšœåˆ†æï¼Œè¿½è¸ªç­‰é¢†åŸŸéƒ½æ˜¯eBPFçš„ä¸»æˆ˜åœºã€‚</p>\n<p>å¯¹äºäº‘åŸç”Ÿé¢†åŸŸï¼ŒCilium å·²ç»ä½¿ç”¨eBPF å®ç°äº†æ— kube-proxyçš„å®¹å™¨ç½‘ç»œã€‚åˆ©ç”¨eBPFè§£å†³iptableså¸¦æ¥çš„æ€§èƒ½é—®é¢˜ã€‚</p>\n<p>æ•´ä¸ªeBPFç”Ÿæ€å‘å±•æ¯”è¾ƒå¥½ï¼Œç¤¾åŒºå·²ç»æä¾›äº†è¯¸å¤šå·¥å…·æ–¹ä¾¿å¤§å®¶ç¼–å†™è‡ªå·±çš„eBPFç¨‹åºã€‚</p>","descriptionType":"html","publishedDate":"Thu, 13 Aug 2020 01:30:17 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/remote/1460000023602036","linkMd5":"a52d5aa652910e157d09aa5f6fb7920b","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn30@2020_2/2020/08/24/23-08-24-482_02dc9380d0589ef6.webp","destWidth":800,"destHeight":445,"sourceBytes":56763,"destBytes":40328,"author":"iyacontrol","articleImgCdnMap":{"https://segmentfault.com/img/remote/1460000023602036":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn30@2020_2/2020/08/24/23-08-24-482_02dc9380d0589ef6.webp","https://segmentfault.com/img/remote/1460000023602037":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn54@2020_3/2020/08/24/23-08-28-794_86f6da9014919043.webp","https://segmentfault.com/img/remote/1460000023602038":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn49@2020_6/2020/08/24/23-08-28-724_8b97a00e92f7b9a5.webp"},"publishedOrCreatedDate":1598310388568},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"æƒ³è¦åœ¨JSä¸­æŠŠæ­£åˆ™ç©å¾—é£˜é€¸ï¼Œå­¦ä¼šè¿™å‡ ä¸ªå‡½æ•°çš„ä½¿ç”¨å¿…ä¸å¯å°‘","link":"https://segmentfault.com/a/1190000023733064","description":"<p><img src=\"https://segmentfault.com/img/bVbLKdl\" alt=\"image\" title=\"image\" /></p>\n<p>åœ¨ä¹‹å‰çš„ä¸€ç³»åˆ—æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬è®²è§£äº†å¾ˆå¤šå…³äºæ­£åˆ™è¡¨è¾¾å¼çš„çŸ¥è¯†ã€‚é‚£ä¹ˆä½œä¸ºä¸€ä¸ªå‰ç«¯å·¥ç¨‹å¸ˆï¼Œå¦‚æœæƒ³è¦æŠŠè¿™äº›çŸ¥è¯†åº”ç”¨åˆ°æˆ‘ä»¬å¹³æ—¶çš„å¼€å‘ä¸­å»çš„è¯ï¼Œå°±éœ€è¦çŸ¥é“åœ¨<strong>JavaScript</strong>ä¸­ï¼Œèƒ½å¤Ÿä½¿ç”¨æ­£åˆ™çš„å‡½æ•°æœ‰å“ªäº›ï¼Ÿç„¶åå®ƒä»¬å„è‡ªçš„åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Ÿæœ‰å“ªäº›éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Ÿåªæœ‰æŒæ¡å¥½äº†æ¯ä¸€ä¸ªæ–¹æ³•çš„ä½¿ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬æ‰å¯èƒ½åœ¨éœ€è¦ä½¿ç”¨çš„æ—¶å€™èƒ½å¤Ÿå¾ˆå¿«çš„æƒ³èµ·æ¥ä½¿ç”¨å“ªä¸ªæ–¹æ³•æ•ˆç‡æœ€é«˜ï¼Œæ•ˆæœæœ€å¥½ã€‚</p>\n<p>è¿™äº›ç¡®å®æ˜¯ä¸€äº›åŸºç¡€çš„çŸ¥è¯†ï¼Œä½†æ˜¯æˆ‘ç›¸ä¿¡åº”è¯¥æœ‰å¾ˆå¤šåŒå­¦è¿˜æ²¡æœ‰ç³»ç»Ÿçš„æŠŠè¿™äº›çŸ¥è¯†å­¦ä¹ ä¸€è¾¹ã€‚<strong>ç›¸ä¿¡æˆ‘ï¼Œå¦‚æœä½ èƒ½å¤ŸæŠŠè¿™ç¯‡æ–‡ç« çœ‹å®Œçš„è¯ï¼Œä½ è‚¯å®šå¯ä»¥å­¦ä¹ åˆ°ä¸€äº›æ–°çš„çŸ¥è¯†ã€‚çŸ¥é“æ¯ä¸€ä¸ªæ–¹æ³•çš„ç”¨é€”ï¼Œä½¿ç”¨åœºæ™¯ï¼Œå­¦ä¼šåœ¨åˆé€‚çš„åœºæ™¯é€‰æ‹©åˆé€‚çš„æ–¹æ³•</strong>ã€‚å½“ç„¶ä½ è¿˜èƒ½å¤ŸæŒæ¡è¿™äº›æ–¹æ³•éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œä»¥é˜²åœ¨ä»¥åä½¿ç”¨çš„æ—¶å€™é™·å…¥äº†å›°å¢ƒã€‚</p>\n<p>æ–‡ç« ä¸­çš„ä»£ç ç¤ºä¾‹å¦‚æœæ²¡æœ‰ç‰¹åˆ«è¯´æ˜çš„è¯ï¼Œéƒ½æ˜¯åœ¨<code>Chrome</code>æµè§ˆå™¨ä¸­è¿›è¡Œçš„ã€‚æœ¬ç¯‡æ–‡ç« çš„å†…å®¹æ¯”è¾ƒé•¿ï¼Œå»ºè®®å…ˆæ”¶è—èµ·æ¥ï¼Œå¯ä»¥ä»¥åæ…¢æ…¢ç»†çœ‹ã€‚</p>\n<p>åœ¨<strong>JavaScript</strong>ä¸­ï¼Œèƒ½å¤Ÿä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„å‡½æ•°æœ‰ï¼ˆæ’é™¤äº†è¿‡æ—¶çš„æ–¹æ³•ï¼‰ï¼š</p>\n<ul>\n <li><p>RegExp.prototype</p>\n  <ul>\n   <li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test\" rel=\"nofollow noreferrer\">RegExp.prototype.test()</a></li>\n   <li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/exec\" rel=\"nofollow noreferrer\">RegExp.prototype.exec()</a></li>\n  </ul></li>\n <li><p>String.prototype</p>\n  <ul>\n   <li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/match\" rel=\"nofollow noreferrer\">String.prototype.match()</a></li>\n   <li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/matchAll\" rel=\"nofollow noreferrer\">String.prototype.matchAll()</a></li>\n   <li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace\" rel=\"nofollow noreferrer\">String.prototype.replace()</a></li>\n   <li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replaceAll\" rel=\"nofollow noreferrer\">String.prototype.replaceAll()</a></li>\n   <li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/search\" rel=\"nofollow noreferrer\">String.prototype.search()</a></li>\n   <li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/split\" rel=\"nofollow noreferrer\">String.prototype.split()</a></li>\n  </ul></li>\n</ul>\n<h2>RegExp.prototype</h2>\n<p>é¦–å…ˆæˆ‘ä»¬è¦è®²è§£çš„æ˜¯<strong>RegExp</strong>å¯¹è±¡ä¸Šçš„ä¸¤ä¸ªæ–¹æ³•</p>\n<h3>RegExp.prototype.test()</h3>\n<ul>\n <li><strong>ä½œç”¨</strong>ï¼šæ£€æµ‹ç»™å®šçš„å­—ç¬¦ä¸²ä¸­æ˜¯å¦æœ‰æ»¡è¶³æ­£åˆ™çš„åŒ¹é…</li>\n <li><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</li>\n</ul>\n<p>ç®€å•çš„åŒ¹é…ï¼Œæ ¹æ®åŒ¹é…çš„ç»“æœç¡®å®šæ˜¯å¦åŒ¹é…æˆåŠŸã€‚</p>\n<pre><code class=\"javascript\">const reg = /\\d{4}-\\d{2}-\\d{2}/;\nconst str1 = '2000-02-22';\nconst str2 = '20-20-20';\nconsole.log(reg.test(str1)); // true\nconsole.log(reg.test(str2)); // false</code></pre>\n<p>ä¸Šé¢çš„æ­£åˆ™è¡¨è¾¾å¼æ²¡æœ‰è®¾ç½®å…¨å±€çš„æ ‡å¿—ç¬¦<code>g</code>ï¼Œå¦‚æœè®¾ç½®äº†å…¨å±€çš„æ ‡å¿—ç¬¦çš„è¯ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™å°±è¦å°å¿ƒä¸€äº›äº†ã€‚<strong>å› ä¸ºå¦‚æœæ­£åˆ™è¡¨è¾¾å¼è®¾ç½®äº†å…¨å±€çš„æ ‡è¯†ç¬¦<code>g</code>ï¼Œé‚£ä¹ˆå¯¹äºåŒä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ¥è¯´ï¼Œåœ¨è¿è¡Œ<code>test</code>æ–¹æ³•çš„æ—¶å€™ï¼Œå¦‚æœåŒ¹é…æˆåŠŸçš„è¯ï¼Œå®ƒä¼šä¿®æ”¹è¿™ä¸ªæ­£åˆ™å¯¹è±¡çš„<code>lastIndex</code>å±æ€§ï¼Œå¯èƒ½ä¼šåœ¨ä¸‹æ¬¡åŒ¹é…çš„æ—¶å€™å¯¼è‡´ä¸€äº›é—®é¢˜ï¼Œæˆ‘ä»¬ä¸‹é¢æ¥çœ‹ä¸€ä¸ªä¾‹å­</strong>ã€‚</p>\n<pre><code class=\"javascript\">const reg = /abc/g;\nconst str1 = 'abcd';\nconst str2 = 'abcdabcd';\n\nconsole.log(reg.lastIndex);  // 0\nconsole.log(reg.test(str1));  // true\nconsole.log(reg.lastIndex);  // 3\nconsole.log(reg.test(str1));  // false\n\nconsole.log(reg.lastIndex);  // 0\nconsole.log(reg.test(str2));  // true\nconsole.log(reg.lastIndex);  // 3\nconsole.log(reg.test(str2));  // true</code></pre>\n<p>ä¸Šé¢çš„ä¾‹å­å¾ˆå¥½åœ°è¯´æ˜äº†è¿™ç§æƒ…å†µï¼Œå¦‚æœæˆ‘ä»¬è®¾ç½®äº†å…¨å±€æ ‡è¯†ç¬¦<code>g</code>çš„è¯ï¼Œ<strong>åªè¦æˆ‘ä»¬å½“å‰çš„åŒ¹é…æ˜¯æˆåŠŸçš„ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å¦‚æœå†æ¬¡ä½¿ç”¨åŒæ ·çš„æ­£åˆ™è¿›è¡ŒåŒ¹é…çš„è¯å°±å¯èƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œå› ä¸ºä¸Šä¸€ä¸ªæˆåŠŸçš„åŒ¹é…å¯¼è‡´æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡çš„<code>lastIndex</code>å±æ€§çš„å€¼å‘ç”Ÿäº†å˜åŒ–ï¼Œé‚£ä¹ˆä¸‹æ¬¡è¿›è¡ŒåŒ¹é…çš„æ—¶å€™æ˜¯ä»<code>lastIndex</code>ä½ç½®å¼€å§‹çš„ï¼Œæ‰€ä»¥å°±å¯èƒ½ä¼šå‡ºç°ä¸€äº›é—®é¢˜</strong>ã€‚</p>\n<ul>\n <li><strong>æ³¨æ„äº‹é¡¹</strong>ï¼šå¦‚æœåœ¨ä½¿ç”¨<code>test</code>æ–¹æ³•çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„æ­£åˆ™è¡¨è¾¾å¼æ˜¯å¦å¸¦æœ‰<code>g</code>æ ‡è¯†ç¬¦ã€‚å¦‚æœè¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼éœ€è¦è¿›è¡Œå¤šæ¬¡çš„åŒ¹é…çš„è¯ï¼Œæœ€å¥½ä¸è¦è®¾ç½®<code>g</code>æ ‡è¯†ç¬¦ã€‚é™¤éä½ çŸ¥é“è‡ªå·±ç¡®å®éœ€è¦è¿™æ ·åšã€‚</li>\n <li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</li>\n</ul>\n<p>å‡å¦‚æœ‰è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼Œä½ éœ€è¦åˆ¤æ–­ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åæ˜¯å¦æ»¡è¶³éœ€æ±‚ï¼Œéœ€æ±‚å¦‚ä¸‹ï¼š<strong>ï¼ˆ1ï¼‰ç”¨æˆ·åé•¿åº¦éœ€è¦æ˜¯8-16ä½ã€‚ï¼ˆ2ï¼‰ç”¨æˆ·åå¯ä»¥åŒ…å«æ•°å­—ï¼Œå­—æ¯ï¼ˆå¤§å°å†™éƒ½å¯ä»¥ï¼‰ï¼Œä¸‹åˆ’çº¿ã€‚ï¼ˆ3ï¼‰æ•°å­—å’Œå­—æ¯æ˜¯å¿…é¡»åŒ…å«çš„</strong>ã€‚</p>\n<p>å½“ç„¶å¯¹äºç†Ÿæ‚‰æ­£åˆ™è¡¨è¾¾å¼çš„ä½ æ¥è¯´ï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œèƒ½ç”¨ä¸€è¡Œä»£ç è§£å†³çš„é—®é¢˜ç»ä¸ç”¨ä¸¤è¡Œä»£ç å»è§£å†³ã€‚ä½ å¯ä»¥å¾ˆå¿«å¯ä»¥é€šè¿‡ä½¿ç”¨<code>test</code>æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>\n<pre><code class=\"javascript\">const validNameRE = /^(?=_*(?:\\d+_*[a-zA-Z]+|[a-zA-Z]+_*\\d+))\\w{8,16}$/;\n// å‡å¦‚è¿™æ˜¯ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·å\nconst userInputName = '1234567890';\n// æ£€æŸ¥ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åæ˜¯å¦åˆä¹è¦æ±‚\nconst isValidName = validNameRE.test(userInputName); // false</code></pre>\n<p>åœ¨å¹³æ—¶çš„å¼€å‘ä¸­ï¼Œ<strong>å¦‚æœéœ€è¦åˆ¤æ–­é¡µé¢æ‰€å¤„çš„å®¿ä¸»ç¯å¢ƒçš„è¯ï¼Œæˆ‘ä»¬ä¹Ÿä¼šä½¿ç”¨<code>test</code>æ–¹æ³•å»åˆ¤æ–­å½“å‰é¡µé¢æ‰€å¤„çš„ç¯å¢ƒ</strong>ã€‚ä¾‹å¦‚ï¼Œä½ éœ€è¦åˆ¤æ–­å½“å‰é¡µé¢æ‰€å¤„çš„ç¯å¢ƒæ˜¯ä¸æ˜¯<code>iPhone</code>çš„è¯ï¼Œä½ å¯èƒ½ä¼šå†™å‡ºè¿™æ ·çš„åˆ¤æ–­ï¼š</p>\n<pre><code class=\"javascript\">const iPhoneReg = /iPhone/;\nconsole.log(iPhoneReg.test(navigator.userAgent));  // true</code></pre>\n<h3>RegExp.prototype.exec()</h3>\n<ul>\n <li><strong>ä½œç”¨</strong>ï¼šè¿™ä¸ªæ–¹æ³•æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ä¸€ä¸ªæ–¹æ³•ï¼Œ<strong>åœ¨ç»™å®šçš„å­—ç¬¦ä¸²ä¸­è¿›è¡ŒåŒ¹é…ï¼Œè¿”å›ä¸€ä¸ªåŒ¹é…çš„ç»“æœæ•°ç»„æˆ–è€…<code>null</code></strong>ã€‚é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬ä¼šä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ¥æå–å­—ç¬¦ä¸²ä¸­ç¬¦åˆåŒ¹é…çš„ä¸€äº›å­—ç¬¦ä¸²ã€‚</li>\n <li><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</li>\n</ul>\n<p><strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæ²¡æœ‰ç¬¦åˆçš„åŒ¹é…ï¼Œè¿”å›çš„ç»“æœæ˜¯<code>null</code>ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç©ºæ•°ç»„<code>[]</code></strong>ã€‚æ‰€ä»¥å½“æˆ‘ä»¬éœ€è¦åˆ¤æ–­æ˜¯å¦æœ‰åŒ¹é…çš„ç»“æœçš„æ—¶å€™ï¼Œä¸èƒ½å‡­æ„Ÿè§‰è§‰å¾—è¿”å›çš„å€¼æ˜¯ä¸€ä¸ªç©ºçš„æ•°ç»„<code>[]</code>ã€‚</p>\n<pre><code class=\"javascript\">const reg1 = /(\\d{2}):(\\d{2}):(\\d{2})/;\nconst str1 = 'Sat Aug 22 2020 17:31:55 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)';\nconst str2 = 'Sat Aug 22 2020';\n\nconsole.log(reg1.exec(str1));  // [\"17:31:55\", \"17\", \"31\", \"55\", index: 16, input: \"Sat Aug 22 2020 17:31:55 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)\", groups: undefined]\nconsole.log(reg1.exec(str2));  // null</code></pre>\n<p>ä»ä¸Šé¢çš„ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ<strong>å¦‚æœæ²¡æœ‰åŒ¹é…ç»“æœçš„è¯ï¼Œè¿”å›çš„ç»“æœæ˜¯<code>null</code>ã€‚å¦‚æœèƒ½å¤ŸåŒ¹é…æˆåŠŸçš„è¯ï¼Œè¿”å›çš„ç»“æœæ˜¯ä¸€ä¸ªæ•°ç»„</strong>ã€‚åœ¨è¿™ä¸ªç»“æœæ•°ç»„ä¸­ï¼Œç¬¬<code>0</code>é¡¹è¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å†…å®¹ã€‚å…¶ä¸­ç¬¬<code>1..n</code>é¡¹è¡¨ç¤ºçš„æ˜¯æ­£åˆ™è¡¨è¾¾å¼ä¸­æ‹¬å·çš„æ•è·å†…å®¹ï¼Œå¯¹äºä¸Šé¢çš„ç¤ºä¾‹æ¥è¯´ï¼Œç¬¬<code>1..3</code>é¡¹è¡¨ç¤ºçš„æ˜¯æ•è·æ—¶é—´çš„æ—¶åˆ†ç§’ã€‚æ•°ç»„è¿˜æœ‰é¢å¤–çš„å±æ€§<code>index</code>å’Œ<code>input</code>ï¼Œå…¶ä¸­<code>index</code>è¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²åœ¨åŸå­—ç¬¦ä¸²ä¸­çš„ä½ç½®ã€‚<code>input</code>è¡¨ç¤ºåŸå§‹å¾…åŒ¹é…çš„å­—ç¬¦ä¸²ã€‚</p>\n<ul>\n <li><p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p>\n  <ul>\n   <li>æ³¨æ„æ­£åˆ™è¡¨è¾¾å¼æ˜¯å¦è®¾ç½®äº†<code>g</code>æ ‡è¯†ç¬¦ï¼Œå¦‚æœè®¾ç½®äº†<code>g</code>æ ‡è¯†ç¬¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œå…¨å±€çš„æœç´¢ã€‚å¯ä»¥çœ‹ä¸‹é¢çš„ä»£ç ç¤ºä¾‹ã€‚</li>\n  </ul><pre><code class=\"javascript\">const reg = /\\d/g;\nconst str = '654321';\nlet result;\nwhile ((result = reg.exec(str))) {\n  console.log(\n    `æœ¬æ¬¡åŒ¹é…åˆ°çš„æ•°å­—æ˜¯ï¼š${result[0]}, æ­£åˆ™è¡¨è¾¾å¼çš„ lastIndex çš„å€¼æ˜¯ï¼š${\n      reg.lastIndex\n    }`\n  );\n}</code></pre></li>\n</ul>\n<p>è¾“å‡ºçš„ç»“æœå¦‚ä¸‹ï¼š</p>\n<pre><code>æœ¬æ¬¡åŒ¹é…åˆ°çš„æ•°å­—æ˜¯ï¼š6, æ­£åˆ™è¡¨è¾¾å¼çš„ lastIndex çš„å€¼æ˜¯ï¼š1\næœ¬æ¬¡åŒ¹é…åˆ°çš„æ•°å­—æ˜¯ï¼š5, æ­£åˆ™è¡¨è¾¾å¼çš„ lastIndex çš„å€¼æ˜¯ï¼š2\næœ¬æ¬¡åŒ¹é…åˆ°çš„æ•°å­—æ˜¯ï¼š4, æ­£åˆ™è¡¨è¾¾å¼çš„ lastIndex çš„å€¼æ˜¯ï¼š3\næœ¬æ¬¡åŒ¹é…åˆ°çš„æ•°å­—æ˜¯ï¼š3, æ­£åˆ™è¡¨è¾¾å¼çš„ lastIndex çš„å€¼æ˜¯ï¼š4\næœ¬æ¬¡åŒ¹é…åˆ°çš„æ•°å­—æ˜¯ï¼š2, æ­£åˆ™è¡¨è¾¾å¼çš„ lastIndex çš„å€¼æ˜¯ï¼š5\næœ¬æ¬¡åŒ¹é…åˆ°çš„æ•°å­—æ˜¯ï¼š1, æ­£åˆ™è¡¨è¾¾å¼çš„ lastIndex çš„å€¼æ˜¯ï¼š6</code></pre>\n<p><strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä¸Šé¢åŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼æ²¡æœ‰è®¾ç½®<code>g</code>æ ‡è¯†ç¬¦ï¼Œæˆ–è€…åœ¨<code>while</code>å¾ªç¯çš„æ¡ä»¶åˆ¤æ–­ä¸­ä½¿ç”¨çš„æ˜¯æ­£åˆ™è¡¨è¾¾å¼çš„å­—é¢é‡çš„è¯ï¼Œéƒ½ä¼šé€ æˆâ€œæ­»å¾ªç¯â€ã€‚å› ä¸ºé‚£æ ·çš„è¯ï¼Œæ¯æ¬¡å¾ªç¯å¼€å§‹çš„æ—¶å€™ï¼Œæ­£åˆ™è¡¨è¾¾å¼çš„<code>lastIndex</code>å±æ€§éƒ½ä¼šæ˜¯<code>0</code>ï¼Œå¯¼è‡´<code>result</code>ä¸€ç›´éƒ½æ˜¯æœ‰å€¼çš„ï¼Œæ‰€ä»¥å°±å¯¼è‡´äº†â€œæ­»å¾ªç¯â€ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨<code>while</code>å¾ªç¯ä¸­ä½¿ç”¨<code>exec</code>æ–¹æ³•çš„æ—¶å€™ä¸€å®šè¦å°å¿ƒä¸€äº›</strong>ã€‚</p>\n<ul>\n <li><p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šè¿™ä¸ªæ–¹æ³•ä¸»è¦ç”¨æ¥åœ¨åŸå§‹æ–‡æœ¬ä¸­æå–ä¸€äº›æˆ‘ä»¬æƒ³è¦çš„å…³é”®ä¿¡æ¯ï¼Œæ‰€ä»¥åªè¦æ˜¯è¿™æ ·çš„ä¸€ä¸ªéœ€æ±‚åœºæ™¯ï¼Œéƒ½å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„<code>exec</code>æ–¹æ³•å»å¤„ç†ã€‚æ¯”å¦‚ï¼š</p>\n  <ul>\n   <li><strong>å¯¹ç”¨æˆ·è¾“å…¥å†…å®¹ä¸­çš„é“¾æ¥è¿›è¡Œè‡ªåŠ¨è¯†åˆ«</strong>ï¼Œç„¶åå¯¹ç›¸åº”çš„é“¾æ¥å†…å®¹è¿›è¡Œæ ·å¼å’ŒåŠŸèƒ½ä¸Šçš„å¤„ç†ã€‚</li>\n   <li><strong>å¯ä»¥æå–urlä¸­çš„æŸ¥è¯¢å‚æ•°</strong>ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦è‡ªå·±æŠŠurlä¸­çš„æŸ¥è¯¢å‚æ•°æå–å‡ºæ¥çš„è¯ï¼Œä½¿ç”¨<code>exec</code>æ–¹æ³•ä¹Ÿæ˜¯ä¸€ä¸ªé€‰æ‹©ã€‚</li>\n   <li>å¦‚æœä½ é˜…è¯»è¿‡vueçš„æºç çš„è¯ï¼Œ<strong>åœ¨ç¼–è¯‘æ¨¡å—ä¸­çš„<a href=\"https://github.com/vuejs/vue/blob/8f04135dbaa5f5f0500d42c0968beba8043f5363/src/compiler/parser/text-parser.js#L32\" rel=\"nofollow noreferrer\">æ–‡æœ¬è§£æ</a>ä½¿ç”¨åˆ°äº†<code>exec</code>æ–¹æ³•</strong>ï¼Œæœ‰å…´è¶£çš„è¯å¤§å®¶å¯ä»¥çœ‹ä¸€çœ‹ç›¸å…³çš„ä»£ç å®ç°ã€‚</li>\n  </ul></li>\n</ul>\n<p>å½“ç„¶è¿˜æœ‰å¾ˆå¤šçš„åœºæ™¯å¯ä»¥ä½¿ç”¨<code>exec</code>æ–¹æ³•å»å¤„ç†çš„ï¼Œå¤§å®¶åœ¨å¹³æ—¶çš„å¼€å‘ä¸­æœ‰æ²¡æœ‰ä½¿ç”¨è¿‡<code>exec</code>æ–¹æ³•å¤„ç†ä¸€äº›é—®é¢˜å‘¢ï¼Ÿå¯ä»¥åœ¨ä¸‹é¢ç•™è¨€ï¼Œæˆ‘ä»¬å¤§å®¶ä¸€èµ·è®¨è®ºä¸€ä¸‹ï¼ŒåŠ æ·±ä¸€ä¸‹å¯¹è¿™ä¸ªæ–¹æ³•çš„ç†è§£ã€‚</p>\n<h2>String.prototype</h2>\n<p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥è®²è§£ä¸€ä¸‹<code>String.prototype</code>ä¸Šé¢æœ‰å…³æ­£åˆ™çš„ä¸€äº›æ–¹æ³•ã€‚</p>\n<h3>String.prototype.match()</h3>\n<ul>\n <li><strong>ä½œç”¨</strong>ï¼šè¿™ä¸ªæ–¹æ³•è¿”å›å­—ç¬¦ä¸²åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„ç»“æœã€‚</li>\n <li><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</li>\n</ul>\n<pre><code class=\"javascript\">const reg = /\\d/;\nconst str = 'abc123';\nconsole.log(str.match(reg));  // [\"1\", index: 3, input: \"abc123\", groups: undefined]</code></pre>\n<ul>\n <li><p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p>\n  <ul>\n   <li>æ²¡æœ‰åŒ¹é…åˆ°ç»“æœçš„è¿”å›ç»“æœæ˜¯<code>null</code>ã€‚</li>\n  </ul><pre><code class=\"javascript\">const reg = /\\d/;\nconst str = 'abc';\nconsole.log(str.match(reg));  // null</code></pre>\n  <ul>\n   <li>æ˜¯å¦è®¾ç½®äº†<code>g</code>æ ‡è¯†ç¬¦ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®<code>g</code>çš„è¯ï¼Œ<code>match</code>çš„è¿”å›ç»“æœè·Ÿå¯¹åº”çš„<code>exec</code>çš„è¿”å›ç»“æœæ˜¯ä¸€æ ·çš„ã€‚å¦‚æœè®¾ç½®äº†<code>g</code>æ ‡è¯†ç¬¦çš„è¯ï¼Œè¿”å›çš„ç»“æœæ˜¯ä¸æ­£åˆ™è¡¨è¾¾å¼ç›¸åŒ¹é…çš„ç»“æœçš„é›†åˆã€‚</li>\n  </ul><pre><code class=\"javascript\">const reg = /\\d/g;\nconst str = 'abc123';\nconsole.log(str.match(reg));  // [\"1\", \"2\", \"3\"]</code></pre>\n  <ul>\n   <li>å¦‚æœ<code>match</code>æ–¹æ³•æ²¡æœ‰ä¼ é€’å‚æ•°çš„è¯ï¼Œè¿”å›çš„ç»“æœæ˜¯<code>['']</code>ï¼Œä¸€ä¸ªåŒ…å«ç©ºå­—ç¬¦ä¸²çš„æ•°ç»„ã€‚</li>\n  </ul><pre><code class=\"javascript\">const str = 'abc123';\nconsole.log(str.match());  // [\"\", index: 0, input: \"abc123\", groups: undefined]</code></pre>\n  <ul>\n   <li>å¦‚æœ<code>match</code>æ–¹æ³•ä¼ é€’çš„å‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…æ•°å­—çš„è¯ï¼Œä¼šåœ¨å†…éƒ¨éšå¼è°ƒç”¨<code>new RegExp(regex)</code>ï¼Œå°†ä¼ å…¥çš„å‚æ•°è½¬å˜ä¸ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ã€‚</li>\n  </ul><pre><code class=\"javascript\">const str = 'abc123';\nconsole.log(str.match('b'));  // [\"b\", index: 1, input: \"abc123\", groups: undefined]</code></pre></li>\n <li><p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p><p>ç®€å•è·å–urlä¸­çš„æŸ¥è¯¢å‚æ•°ï¼š</p><pre><code class=\"javascript\">const query = {};\n// é¦–å…ˆä½¿ç”¨å¸¦æœ‰gæ ‡è¯†ç¬¦çš„æ­£åˆ™ï¼Œè¡¨ç¤ºå…¨å±€æŸ¥æ‰¾\nconst kv = location.search.match(/\\w*=\\w*/g);\nif (kv) {\n  kv.forEach(v =&gt; {\n      // ä½¿ç”¨ä¸å¸¦gæ ‡è¯†ç¬¦çš„æ­£åˆ™ï¼Œéœ€è¦è·å–æ‹¬å·ä¸­çš„æ•è·å†…å®¹\n    const q = v.match(/(\\w*)=(\\w*)/);\n    query[q[1]] = q[2];\n  });\n}</code></pre></li>\n</ul>\n<h3>String.prototype.matchAll()</h3>\n<ul>\n <li><strong>ä½œç”¨</strong>ï¼šè¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ä»¥åŠæ­£åˆ™è¡¨è¾¾å¼ä¸­æ‹¬å·çš„æ•è·å†…å®¹çš„è¿­ä»£å™¨ã€‚éœ€è¦æ³¨æ„çš„æ˜¯è¿™ä¸ªæ–¹æ³•å­˜åœ¨å…¼å®¹æ€§ï¼Œå…·ä½“å†…å®¹å¯ä»¥æŸ¥çœ‹<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/matchAll\" rel=\"nofollow noreferrer\">String.prototype.matchAll</a>ã€‚</li>\n <li><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</li>\n</ul>\n<pre><code class=\"javascript\">const reg = /(\\w*)=(\\w*)/g;\nconst str = 'a=1,b=2,c=3';\nconsole.log([...str.matchAll(reg)]);</code></pre>\n<p><img src=\"https://segmentfault.com/img/bVbLKdp\" alt=\"String.prototype.matchAll()\" title=\"String.prototype.matchAll()\" /></p>\n<ul>\n <li><p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p>\n  <ul>\n   <li>è·Ÿ<code>match</code>æ–¹æ³•ç›¸åŒçš„åœ°æ–¹æ˜¯ï¼Œå¦‚æœä¼ é€’ç»™<code>matchAll</code>æ–¹æ³•çš„å‚æ•°ä¸æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„è¯ï¼Œé‚£ä¹ˆä¼šéšå¼è°ƒç”¨<code>new RegExp(obj)</code>å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ã€‚</li>\n   <li>ä¼ é€’ç»™<code>matchAll</code>çš„æ­£åˆ™è¡¨è¾¾å¼éœ€è¦æ˜¯è®¾ç½®äº†<code>g</code>æ ‡è¯†ç¬¦çš„ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®<code>g</code>æ ‡è¯†ç¬¦ï¼Œé‚£ä¹ˆå°±ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</li>\n  </ul><pre><code class=\"javascript\">const reg = /(\\w*)=(\\w*)/;\nconst str = 'a=1,b=2,c=3';\nconsole.log([...str.matchAll(reg)]);  // Uncaught TypeError: String.prototype.matchAll called with a non-global RegExp argument</code></pre>\n  <ul>\n   <li>åœ¨å¯ä»¥ä½¿ç”¨<code>matchAll</code>çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨<code>matchAll</code>æ¯”ä½¿ç”¨<code>exec</code>æ–¹æ³•æ›´ä¾¿æ·ä¸€äº›ã€‚å› ä¸ºåœ¨å…¨å±€éœ€è¦åŒ¹é…çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨<code>exec</code>æ–¹æ³•éœ€è¦é…åˆå¾ªç¯æ¥ä½¿ç”¨ï¼Œä½†æ˜¯ä½¿ç”¨<code>matchAll</code>å°±å¯ä»¥ä¸ä½¿ç”¨å¾ªç¯ã€‚</li>\n   <li><code>matchAll</code>æ–¹æ³•åœ¨å­—ç¬¦ä¸²æ‰§è¡ŒåŒ¹é…çš„è¿‡ç¨‹ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼çš„<code>lastIndex</code>å±æ€§ä¸ä¼šæ›´æ–°ã€‚æ›´å¤šè¯¦æƒ…å¯ä»¥å‚è€ƒ<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/matchAll\" rel=\"nofollow noreferrer\">String.prototype.matchAll()</a>ã€‚</li>\n  </ul></li>\n <li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</li>\n</ul>\n<p>è¿˜æ˜¯ä»¥ä¸Šé¢çš„è·å–urlä¸­çš„æŸ¥è¯¢å‚æ•°è¿™ä¸ªå°åŠŸèƒ½æ¥å®è·µä¸€ä¸‹ï¼š</p>\n<pre><code class=\"javascript\">const query = {};\nconst kvs = location.search.matchAll(/(\\w*)=(\\w*)/g);\nif (kvs) {\n    for (let kv of kvs) {\n        query[kv[1]] = kv[2];\n    }\n}\nconsole.log(query);</code></pre>\n<h3>String.prototype.replace()</h3>\n<ul>\n <li><strong>ä½œç”¨</strong>ï¼šè¿™ä¸ªæ–¹æ³•åœ¨å¹³æ—¶çš„å¼€å‘ä¸­åº”è¯¥æ¯”è¾ƒå¸¸ç”¨ï¼Œé‚£ä¹ˆå®ƒçš„ä½œç”¨å°±æ˜¯ä½¿ç”¨<strong>æ›¿æ¢ç‰©</strong><code>replacement</code>æ›¿æ¢åŸå­—ç¬¦ä¸²ä¸­ç¬¦åˆæŸç§<strong>æ¨¡å¼</strong><code>pattern</code>çš„å­—ç¬¦ä¸²ã€‚å…¶ä¸­<strong>æ›¿æ¢ç‰©</strong>å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæˆ–è€…è¿”å›å€¼æ˜¯å­—ç¬¦ä¸²çš„å‡½æ•°ï¼›<strong>æ¨¡å¼</strong>å¯ä»¥æ˜¯æ­£åˆ™è¡¨è¾¾å¼æˆ–è€…å­—ç¬¦ä¸²ã€‚</li>\n <li><p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p><p>å› ä¸ºè¿™ä¸ªå‡½æ•°çš„å…¥å‚å¯ä»¥æ˜¯ä¸åŒçš„ç±»å‹ï¼Œæ‰€ä»¥å¯¹æ¯ç§ç±»å‹çš„å…¥å‚æˆ‘ä»¬éƒ½æ¥å®è·µä¸€ä¸‹å§ã€‚</p>\n  <ul>\n   <li><strong><code>pattern</code>æ˜¯å­—ç¬¦ä¸²ï¼Œ<code>replacement</code>ä¹Ÿæ˜¯å­—ç¬¦ä¸²</strong>ã€‚è¿™ç§å½¢å¼åœ¨å¹³æ—¶çš„å¼€å‘ä¸­ä½¿ç”¨çš„æ¯”è¾ƒå¤šã€‚</li>\n  </ul><pre><code class=\"javascript\">const pattern = 'a';\nconst replacement = 'A';\nconst str = 'aBCD';\nconsole.log(str.replace(pattern, replacement));  // ABCD</code></pre>\n  <ul>\n   <li><strong><code>pattern</code>æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œ<code>replacement</code>æ˜¯å­—ç¬¦ä¸²</strong>ã€‚</li>\n  </ul><pre><code class=\"javascript\">const pattern = /__(\\d)__/;\nconst replacement = \"--$$--$&amp;--$`--$'--$1--\";\nconst str = 'aaa__1__bbb';\nconsole.log(str.replace(pattern, replacement));  // aaa--$--__1__--aaa--bbb--1--bbb</code></pre></li>\n</ul>\n<p>å¦‚æœ<code>replacement</code>æ˜¯å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªå­—ç¬¦ä¸²ä¸­å¯ä»¥ä½¿ç”¨ä¸€äº›ç‰¹æ®Šçš„å˜é‡ï¼Œå…·ä½“å¯å‚è€ƒ<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_string_as_a_parameter\" rel=\"nofollow noreferrer\">Specifying a string as a parameter</a>ã€‚</p>\n<ul>\n <li><p><strong><code>pattern</code>æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œ<code>replacement</code>æ˜¯å‡½æ•°</strong>ã€‚</p><pre><code class=\"javascript\">const pattern = /__(?&lt;number&gt;\\d)__/;\nconst replacement = function(match, p1, offset, str, groups) {\n  console.log(`åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²æ˜¯ï¼š${match}\\næ•è·åˆ°çš„å†…å®¹æ˜¯ï¼š${p1}\\nåŒ¹é…çš„ä½ç½®æ˜¯ï¼š${offset}\\nåŸå§‹å¾…åŒ¹é…çš„å­—ç¬¦ä¸²æ˜¯ï¼š${str}\\nå‘½åçš„æ•è·å†…å®¹æ˜¯ï¼š${JSON.stringify(groups)}`);\n  return '======';\n};\nconst str = 'aaa__1__bbb';\nconsole.log(str.replace(pattern, replacement)); // aaa======bbb</code></pre></li>\n</ul>\n<p>å…¶ä¸­æ§åˆ¶å°çš„è¾“å‡ºå¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<pre><code class=\"javascript\">åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²æ˜¯ï¼š__1__\næ•è·åˆ°çš„å†…å®¹æ˜¯ï¼š1\nåŒ¹é…çš„ä½ç½®æ˜¯ï¼š3\nåŸå§‹å¾…åŒ¹é…çš„å­—ç¬¦ä¸²æ˜¯ï¼šaaa__1__bbb\nå‘½åçš„æ•è·å†…å®¹æ˜¯ï¼š{\"number\":\"1\"}</code></pre>\n<p>å¦‚æœä½ å¯¹<code>replacement</code>æ˜¯å‡½æ•°è¿™ç§æƒ…å†µä¸æ˜¯å¾ˆäº†è§£çš„è¯å¯ä»¥çœ‹çœ‹<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_function_as_a_parameter\" rel=\"nofollow noreferrer\">Specifying a function as a parameter</a>ï¼Œé‡Œé¢ä¼šæœ‰è¯¦ç»†çš„è§£é‡Šï¼Œè¿™é‡Œå°±ä¸åœ¨å…·ä½“è§£é‡Šäº†ã€‚</p>\n<ul>\n <li><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š<p>éœ€è¦æ³¨æ„çš„åœ°æ–¹å°±æ˜¯å½“æˆ‘ä»¬çš„<code>pattern</code>æ˜¯æ­£åˆ™è¡¨è¾¾å¼çš„æ—¶å€™ï¼Œè¦æ³¨æ„æ˜¯å¦è®¾ç½®äº†<code>g</code>æ ‡è¯†ç¬¦ï¼Œå› ä¸ºå¦‚æœæ²¡æœ‰è®¾ç½®<code>g</code>æ ‡è¯†ç¬¦çš„è¯ï¼Œåªä¼šè¿›è¡Œä¸€æ¬¡åŒ¹é…ã€‚è®¾ç½®äº†<code>g</code>æ ‡è¯†ç¬¦çš„è¯ï¼Œä¼šè¿›è¡Œå…¨å±€çš„åŒ¹é…ã€‚</p></li>\n <li><p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p><p>å¯¹äºå‰ç«¯æ¥è¯´ï¼Œå¯¹ç”¨æˆ·çš„è¾“å…¥è¿›è¡Œæ ¡éªŒæ—¶å¾ˆå¸¸è§çš„éœ€æ±‚ã€‚å‡å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªè¾“å…¥æ¡†ï¼Œåªå…è®¸ç”¨æˆ·è¾“å…¥æ•°å­—ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å¤„ç†ï¼š</p><pre><code class=\"javascript\">const reg = /\\D/g;\nconst str = 'abc123';\nconsole.log(str.replace(reg, ''));  // 123</code></pre><p>è¿™æ ·å°±èƒ½å¤Ÿä¿è¯ç”¨æˆ·çš„è¾“å…¥åªæœ‰æ•°å­—äº†ã€‚</p></li>\n</ul>\n<h3>String.prototype.replaceAll()</h3>\n<blockquote>\n As of August 2020 the replaceAll() method is supported by Firefox but not by Chrome. It will become available in Chrome 85.\n</blockquote>\n<p>è¿™ä¸ªæ–¹æ³•å’Œ<code>replace</code>æ–¹æ³•çš„ä½œç”¨å·®ä¸å¤šï¼Œä»åå­—ä¸Šå°±èƒ½å¤ŸçŸ¥é“<code>replaceAll</code>æ˜¯å…¨å±€çš„æ›¿æ¢ã€‚å› ä¸ºè¿™ä¸ªæ–¹æ³•çš„å…¼å®¹æ€§é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦åœ¨<code>Firefox</code>æµè§ˆå™¨ä¸Šè¿›è¡Œè¯•éªŒã€‚</p>\n<pre><code class=\"javascript\">const pattern = 'a';\nconst replacement = 'A';\nconst str = 'aBCDa';\nconsole.log(str.replace(pattern, replacement));  // ABCDa\nconsole.log(str.replaceAll(pattern, replacement));  // ABCDA</code></pre>\n<ul>\n <li><strong>æ³¨æ„äº‹é¡¹</strong>ï¼šå¦‚æœç»™å‡½æ•°ä¼ é€’çš„<code>pattern</code>å‚æ•°æ˜¯ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„è¯ï¼Œè¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼å¿…é¡»è®¾ç½®äº†<code>g</code>æ ‡è¯†ç¬¦ï¼Œä¸ç„¶ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</li>\n</ul>\n<pre><code class=\"javascript\">const pattern = /a/;\nconst replacement = 'A';\nconst str = 'aBCDa';\nconsole.log(str.replace(pattern, replacement));  // ABCDa\nconsole.log(str.replaceAll(pattern, replacement));  // Uncaught TypeError: replaceAll must be called with a global RegExp</code></pre>\n<h3>String.prototype.search()</h3>\n<ul>\n <li><strong>ä½œç”¨</strong>ï¼šè¿™ä¸ªæ–¹æ³•ç”¨æ¥åœ¨å­—ç¬¦ä¸²ä¸­å¯»æ‰¾æ˜¯å¦å«æœ‰ç‰¹å®šæ¨¡å¼çš„åŒ¹é…ï¼Œå¦‚æœæ‰¾åˆ°å¯¹åº”çš„æ¨¡å¼ï¼Œè¿”å›åŒ¹é…å¼€å§‹çš„ä¸‹æ ‡ï¼›æ²¡æœ‰æ‰¾åˆ°çš„è¯è¿”å›<code>-1</code>ã€‚</li>\n <li><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</li>\n</ul>\n<pre><code class=\"javascript\">const reg = /\\d/;\nconst str1 = '123';\nconst str2 = 'abc';\nconsole.log(str1.search(reg));  // 0\nconsole.log(str2.search(reg));  // -1</code></pre>\n<ul>\n <li><p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p>\n  <ul>\n   <li>å¦‚æœä¼ å…¥çš„å‚æ•°ä¸æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„è¯ï¼Œä¼šéšå¼çš„è°ƒç”¨<code>new RegExp(regexp)</code>å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ã€‚</li>\n   <li>æ²¡æœ‰æ‰¾åˆ°ç›¸åº”åŒ¹é…çš„æ—¶å€™ï¼Œè¿”å›çš„å€¼æ˜¯<code>-1</code>ï¼›æ‰€ä»¥å¤§å®¶åœ¨ä½¿ç”¨è¿™ä¸ªæ–¹æ³•åšåˆ¤æ–­çš„æ—¶å€™è¦æ³¨æ„ï¼Œåªæœ‰è¿”å›å€¼æ˜¯<code>-1</code>çš„æ—¶å€™ï¼Œæ‰è¡¨ç¤ºæ²¡æœ‰æ‰¾åˆ°ç›¸åº”çš„åŒ¹é…ã€‚</li>\n  </ul></li>\n <li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</li>\n</ul>\n<p>å¦‚æœä½ éœ€è¦æ‰¾åˆ°ç‰¹å®šåŒ¹é…åœ¨å­—ç¬¦ä¸²ä¸­çš„ä½ç½®çš„è¯ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨<code>search</code>æ–¹æ³•ã€‚</p>\n<pre><code class=\"javascript\">const reg = /\\d/;\nconst str = 'abc6def';\nconsole.log(str.search(reg));  // 3</code></pre>\n<h3>String.prototype.split()</h3>\n<ul>\n <li><strong>ä½œç”¨</strong>ï¼šå°†ä¸€ä¸ªå­—ç¬¦ä¸²æŒ‰ç…§åˆ†å‰²å™¨è¿›è¡Œåˆ†å‰²ï¼Œå°†åˆ†å‰²åçš„å­—ç¬¦ä¸²ç‰‡æ®µç»„æˆä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œå…¶ä¸­<strong>åˆ†å‰²å™¨</strong><code>separator</code>å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ã€‚</li>\n <li><p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p>\n  <ul>\n   <li><strong>åˆ†å‰²å™¨</strong><code>separator</code>æ˜¯å­—ç¬¦ä¸²ï¼š</li>\n  </ul><pre><code class=\"javascript\">const str = 'hello, world!';\nconsole.log(str.split(''));  // [\"h\", \"e\", \"l\", \"l\", \"o\", \",\", \" \", \"w\", \"o\", \"r\", \"l\", \"d\", \"!\"]</code></pre>\n  <ul>\n   <li><strong>åˆ†å‰²å™¨</strong><code>separator</code>æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼š</li>\n  </ul><pre><code class=\"javascript\">const str = 'abc1abc2abc3';\nconst separator = /\\w(?=\\d)/;\nconsole.log(str.split(separator));  // [\"ab\", \"1ab\", \"2ab\", \"3\"]</code></pre></li>\n <li><p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p>\n  <ul>\n   <li>å¦‚æœ<code>split</code>æ–¹æ³•æ²¡æœ‰ä¼ é€’å‚æ•°çš„è¯ï¼Œä¼šè¿”å›ä¸€ä¸ªåŒ…å«åŸå­—ç¬¦ä¸²çš„æ•°ç»„ï¼š</li>\n  </ul><pre><code class=\"javascript\">const str = 'hello, world!';\nconsole.log(str.split());  // [\"hello, world!\"]</code></pre>\n  <ul>\n   <li>å› ä¸º<code>JavaScript</code>çš„å­—ç¬¦ä¸²æ˜¯ä½¿ç”¨<code>UTF-16</code>è¿›è¡Œç¼–ç çš„ï¼Œè¯¥ç¼–ç ä½¿ç”¨ä¸€ä¸ª16æ¯”ç‰¹çš„ç¼–ç å•å…ƒæ¥è¡¨ç¤ºå¤§éƒ¨åˆ†å¸¸è§çš„å­—ç¬¦ï¼Œä½¿ç”¨ä¸¤ä¸ªç¼–ç å•å…ƒè¡¨ç¤ºä¸å¸¸ç”¨çš„å­—ç¬¦ã€‚æ‰€ä»¥å¯¹äºä¸€äº›ä¸å¸¸ç”¨çš„å­—ç¬¦æ¥è¯´ï¼Œåœ¨ä½¿ç”¨<code>split</code>æ–¹æ³•è¿›è¡Œå­—ç¬¦ä¸²åˆ†å‰²çš„æ—¶å€™å¯èƒ½ä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼š</li>\n  </ul><pre><code class=\"javascript\">const str = 'ğŸ˜€ğŸ˜ƒğŸ˜„ğŸ˜ğŸ˜†ğŸ˜…';\nconsole.log(str.split(''));  // [\"ï¿½\", \"ï¿½\", \"ï¿½\", \"ï¿½\", \"ï¿½\", \"ï¿½\", \"ï¿½\", \"ï¿½\", \"ï¿½\", \"ï¿½\", \"ï¿½\", \"ï¿½\"]</code></pre></li>\n</ul>\n<p>å¦‚ä½•è§£å†³è¿™ç§ç±»å‹çš„é—®é¢˜å‘¢ï¼Ÿç¬¬ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨æ•°ç»„çš„æ‰©å±•è¿ç®—ç¬¦ï¼š</p>\n<pre><code class=\"javascript\">const str = 'ğŸ˜€ğŸ˜ƒğŸ˜„ğŸ˜ğŸ˜†ğŸ˜…';\nconsole.log([...str]);  // [\"ğŸ˜€\", \"ğŸ˜ƒ\", \"ğŸ˜„\", \"ğŸ˜\", \"ğŸ˜†\", \"ğŸ˜…\"]</code></pre>\n<p>ç¬¬äºŒç§æ–¹æ³•æ˜¯ä½¿ç”¨è®¾ç½®äº†<code>u</code>æ ‡è¯†ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š</p>\n<pre><code class=\"javascript\">const str = 'ğŸ˜€ğŸ˜ƒğŸ˜„ğŸ˜ğŸ˜†ğŸ˜…';\nconst separator = /(?=[\\s\\S])/u;\nconsole.log(str.split(separator)); // [\"ğŸ˜€\", \"ğŸ˜ƒ\", \"ğŸ˜„\", \"ğŸ˜\", \"ğŸ˜†\", \"ğŸ˜…\"]</code></pre>\n<li>\n <ul>\n  <li>å¦‚æœä¼ å…¥çš„æ­£åˆ™è¡¨è¾¾å‚æ•°ä¸­å«æœ‰æ•è·çš„æ‹¬å·ï¼Œé‚£ä¹ˆæ•è·çš„å†…å®¹ä¹Ÿä¼šåŒ…å«åœ¨è¿”å›çš„æ•°ç»„ä¸­ï¼š</li>\n </ul><pre><code class=\"javascript\">const str = 'abc1abc2abc3';\nconst separator = /(\\w)(?=\\d)/;\nconsole.log(str.split(separator));  // [\"ab\", \"c\", \"1ab\", \"c\", \"2ab\", \"c\", \"3\"]</code></pre>\n <ul>\n  <li><code>split</code>æ–¹æ³•è¿˜å¯ä»¥ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨æ¥æ§åˆ¶è¿”å›çš„æ•°ç»„çš„é•¿åº¦ï¼š</li>\n </ul><pre><code class=\"javascript\">const str = 'hello, world!';\nconsole.log(str.split('', 3));  // [\"h\", \"e\", \"l\"]</code></pre></li>\n<ul>\n <li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</li>\n</ul>\n<p>åœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œæœ€å¸¸ç”¨çš„åœºæ™¯å°±æ˜¯å°†ä¸€ä¸ªå­—ç¬¦ä¸²è½¬æ¢ä¸ºä¸€ä¸ªæ•°ç»„äº†ï¼š</p>\n<pre><code class=\"javascript\">const str = 'a/b/c/d/e';\nconsole.log(str.split('/')); // [\"a\", \"b\", \"c\", \"d\", \"e\"]</code></pre>\n<h2>æ€»ç»“</h2>\n<p>å½“æˆ‘ä»¬èƒ½å¤ŸæŠŠä¸Šé¢çš„è¿™äº›æ–¹æ³•éƒ½ç†Ÿç»ƒçš„æŒæ¡ä¹‹åï¼Œé‚£ä¹ˆåœ¨å®é™…çš„å¼€å‘ä¸­å†ç»“åˆæ­£åˆ™è¡¨è¾¾å¼æ¥ä½¿ç”¨çš„è¯ï¼Œé‚£ç®€ç›´å°±æ˜¯å¦‚è™æ·»ç¿¼ï¼Œèƒ½å¤Ÿåœ¨ä¸€äº›åœºæ™¯ä¸‹æé«˜æˆ‘ä»¬å¼€å‘çš„æ•ˆç‡ã€‚</p>\n<p><strong>å½“ç„¶å…‰é çœ‹çœ‹æ–‡ç« æ˜¯ä¸èƒ½å¤Ÿå¾ˆå¥½åœ°å°†è¿™äº›çŸ¥è¯†ç‚¹éƒ½è®°ç‰¢å›ºçš„ï¼Œä½ éœ€è¦çš„æ˜¯ä¸€ä¸ªä¸€ä¸ªçš„å®è·µä¸€ä¸‹ï¼Œè¿™æ ·æ‰èƒ½å¤ŸåŠ æ·±è‡ªå·±çš„è®°å¿†ï¼Œæ‰èƒ½å¤Ÿè®°å¾—æ›´ç‰¢å›º</strong>ã€‚</p>\n<p>å¦‚æœå¤§å®¶è¿˜æƒ³äº†è§£æ›´å¤šå…³äºæ­£åˆ™è¡¨è¾¾å¼çš„çŸ¥è¯†ç‚¹çš„è¯ï¼Œå¯ä»¥çœ‹çœ‹æˆ‘ä¹‹å‰å†™çš„ä¸€ç³»åˆ—çš„æ–‡ç« ï¼š</p>\n<ul>\n <li><a href=\"https://mp.weixin.qq.com/s/cKOkAVcMThmgldI3gJzMbA\" rel=\"nofollow noreferrer\">æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ç´ æ•°çš„åŸç†è®²è§£</a></li>\n <li><a href=\"https://mp.weixin.qq.com/s/VqiZ6fVL20sJ8NUoQJjm2g\" rel=\"nofollow noreferrer\">è·ç¦»å¼„æ‡‚æ­£åˆ™çš„ç¯è§†ï¼Œä½ åªå·®è¿™ä¸€ç¯‡æ–‡ç« </a></li>\n <li><a href=\"https://mp.weixin.qq.com/s/AxTuXvKINhX6qLzj6Q9UJw\" rel=\"nofollow noreferrer\">æ­£åˆ™è¡¨è¾¾å¼é‡è¯åŒ¹é…æ–¹å¼çš„è®²è§£ï¼ˆä¸Šç¯‡ï¼‰</a></li>\n <li><a href=\"https://mp.weixin.qq.com/s/ezul6Dg4f6_WLHXAkEgd6g\" rel=\"nofollow noreferrer\">æƒ³å†™å‡ºæ•ˆç‡æ›´é«˜çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Ÿè¯•è¯•å›ºåŒ–åˆ†ç»„å’Œå æœ‰ä¼˜å…ˆåŒ¹é…å§</a></li>\n</ul>\n<p>å¦‚æœä½ å¯¹æœ¬ç¯‡æ–‡ç« æœ‰ä»€ä¹ˆæ„è§å’Œå»ºè®®ï¼Œéƒ½å¯ä»¥ç›´æ¥åœ¨æ–‡ç« ä¸‹é¢ç•™è¨€ï¼Œä¹Ÿå¯ä»¥åœ¨<a href=\"https://github.com/dreamapplehappy/blog/issues/12\" rel=\"nofollow noreferrer\">è¿™é‡Œ</a>æå‡ºæ¥ã€‚ä¹Ÿæ¬¢è¿å¤§å®¶å…³æ³¨æˆ‘çš„å…¬ä¼—å·<a href=\"https://image-static.segmentfault.com/822/336/822336066-322f46895b4b1d98\">å…³å±±ä¸éš¾è¶Š</a>ï¼Œå­¦ä¹ æ›´å¤šå®ç”¨çš„å‰ç«¯çŸ¥è¯†ï¼Œè®©æˆ‘ä»¬ä¸€èµ·åŠªåŠ›è¿›æ­¥å§ã€‚</p>","descriptionType":"html","publishedDate":"Mon, 24 Aug 2020 00:00:00 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/bVbLKdl","linkMd5":"2bab059fcc83687a9e4e5c0f8280a58a","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn21@2020_1/2020/08/24/23-08-23-024_2805d581158c2c2d.webp","destWidth":800,"destHeight":342,"sourceBytes":70114,"destBytes":27064,"author":"dreamapplehappy","articleImgCdnMap":{"https://segmentfault.com/img/bVbLKdl":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn21@2020_1/2020/08/24/23-08-23-024_2805d581158c2c2d.webp","https://segmentfault.com/img/bVbLKdp":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn24@2020_1/2020/08/24/23-08-39-802_6dcde18ff4f9579f.webp"},"publishedOrCreatedDate":1598310388570},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"è„è¯»ã€å¹»è¯»å’Œä¸å¯é‡å¤è¯»","link":"https://segmentfault.com/a/1190000023689023","description":"<p><img src=\"https://segmentfault.com/img/bVbLyLa\" alt=\"\" title=\"\" /></p>\n<h2>ä¸€ã€å¼•è¨€</h2>\n<p>è„è¯»ã€ä¸å¯é‡å¤è¯»å’Œå¹»è¯»æ˜¯æ•°æ®åº“ä¸­ç”±äº<strong>å¹¶å‘è®¿é—®</strong>å¯¼è‡´çš„æ•°æ®è¯»å–é—®é¢˜ã€‚å½“å¤šä¸ªäº‹åŠ¡åŒæ—¶è¿›è¡Œæ—¶å¯ä»¥é€šè¿‡ä¿®æ”¹æ•°æ®åº“äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æ¥å¤„ç†è¿™ä¸‰ä¸ªé—®é¢˜ã€‚</p>\n<h2>äºŒã€é—®é¢˜è§£é‡Š</h2>\n<h3>1ã€è„è¯»ï¼ˆè¯»å–æœªæäº¤çš„æ•°æ®ï¼‰</h3>\n<p>è„è¯»åˆç§°æ— æ•ˆæ•°æ®çš„è¯»å‡ºï¼Œæ˜¯æŒ‡åœ¨æ•°æ®åº“è®¿é—®ä¸­ï¼Œäº‹åŠ¡ A å¯¹ä¸€ä¸ªå€¼åšä¿®æ”¹ï¼Œäº‹åŠ¡ B è¯»å–è¿™ä¸ªå€¼ï¼Œä½†æ˜¯ç”±äºæŸç§åŸå› äº‹åŠ¡ A å›æ»šæ’¤é”€äº†å¯¹è¿™ä¸ªå€¼å¾—ä¿®æ”¹ï¼Œè¿™å°±å¯¼è‡´äº‹åŠ¡ B è¯»å–åˆ°çš„å€¼æ˜¯æ— æ•ˆæ•°æ®ã€‚</p>\n<h3>2ã€ä¸å¯é‡å¤è¯»ï¼ˆå‰åæ•°æ®å¤šæ¬¡è¯»å–ï¼Œç»“æœé›†å†…å®¹ä¸ä¸€è‡´ï¼‰</h3>\n<p>ä¸å¯é‡å¤è¯»å³å½“äº‹åŠ¡ A æŒ‰ç…§æŸ¥è¯¢æ¡ä»¶å¾—åˆ°äº†ä¸€ä¸ªç»“æœé›†ï¼Œè¿™æ—¶äº‹åŠ¡ B å¯¹äº‹åŠ¡ A æŸ¥è¯¢çš„ç»“æœé›†æ•°æ®åšäº†ä¿®æ”¹æ“ä½œï¼Œä¹‹åäº‹åŠ¡ A ä¸ºäº†æ•°æ®æ ¡éªŒç»§ç»­æŒ‰ç…§ä¹‹å‰çš„æŸ¥è¯¢æ¡ä»¶å¾—åˆ°çš„ç»“æœé›†<strong>ä¸å‰ä¸€æ¬¡æŸ¥è¯¢ä¸åŒ</strong>ï¼Œå¯¼è‡´ä¸å¯é‡å¤è¯»å–åŸå§‹æ•°æ®ã€‚</p>\n<h3>3ã€å¹»è¯»ï¼ˆå‰åæ•°æ®å¤šæ¬¡è¯»å–ï¼Œç»“æœé›†æ•°é‡ä¸ä¸€è‡´ï¼‰</h3>\n<p>å¹»è¯»æ˜¯æŒ‡å½“äº‹åŠ¡ A æŒ‰ç…§æŸ¥è¯¢æ¡ä»¶å¾—åˆ°äº†ä¸€ä¸ªç»“æœé›†ï¼Œè¿™æ—¶äº‹åŠ¡ B å¯¹äº‹åŠ¡ A æŸ¥è¯¢çš„ç»“æœé›†æ•°æ®åšæ–°å¢æ“ä½œï¼Œä¹‹åäº‹åŠ¡ A ç»§ç»­æŒ‰ç…§ä¹‹å‰çš„æŸ¥è¯¢æ¡ä»¶å¾—åˆ°çš„ç»“æœé›†å¹³ç™½æ— æ•…<strong>å¤šäº†å‡ æ¡æ•°æ®</strong>ï¼Œå¥½åƒå‡ºç°äº†å¹»è§‰ä¸€æ ·ã€‚</p>\n<h2>ä¸‰ã€äº‹åŠ¡éš”ç¦»</h2>\n<p>åœ¨å¹¶å‘æ¡ä»¶ä¸‹ä¼šå‡ºç°ä¸Šè¿°é—®é¢˜ï¼Œå¦‚ä½•ç€æ‰‹è§£å†³ä»–ä»¬ä¿è¯æˆ‘ä»¬ç¨‹åºè¿è¡Œçš„æ­£ç¡®æ€§æ˜¯éå¸¸é‡è¦çš„ã€‚æ•°æ®åº“æä¾›äº† <strong>Read uncommitted ã€Read committed ã€Repeatable read ã€Serializable</strong> å››ç§äº‹åŠ¡éš”ç¦»çº§åˆ«æ¥è§£å†³è„è¯»ã€å¹»è¯»å’Œä¸å¯é‡å¤è¯»é—®é¢˜ï¼ŒåŒæ—¶å®¹æ˜“æƒ³åˆ°ï¼Œå¯ä»¥é€šè¿‡åŠ é”çš„æ–¹å¼å®ç°äº‹åŠ¡éš”ç¦»ã€‚</p>\n<p>åœ¨æ•°æ®åº“çš„å¢åˆ æ”¹æŸ¥æ“ä½œä¸­ï¼Œinsert ã€delete ã€update éƒ½ä¼šåŠ æ’ä»–é”ï¼Œ<strong>æ’å®ƒé”ä¼šé˜»æ­¢å…¶ä»–äº‹åŠ¡å¯¹å…¶åŠ é”çš„æ•°æ®åŠ ä»»ä½•ç±»å‹çš„é”</strong>ã€‚è€Œ select åªæœ‰æ˜¾ç¤ºå£°æ˜æ‰ä¼šåŠ é”ã€‚</p>\n<ul>\n <li><p>Read uncommitted</p>\n  <blockquote>\n   è¯»æœªæäº¤ï¼Œè¯´çš„æ˜¯ä¸€ä¸ªäº‹åŠ¡å¯ä»¥è¯»å–åˆ°å¦ä¸€ä¸ªäº‹åŠ¡æœªæäº¤çš„æ•°æ®ä¿®æ”¹ã€‚\n  </blockquote><p>è¯»è‹¥ä¸æ˜¾å¼å£°æ˜æ˜¯ä¸åŠ é”çš„ï¼Œå¯ä»¥ç›´æ¥è¯»å–åˆ°å¦ä¸€ä¸ªäº‹åŠ¡å¯¹æ•°æ®çš„æ“ä½œï¼Œæ²¡æœ‰é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»ã€‚</p></li>\n <li><p>Read committed</p>\n  <blockquote>\n   è¯»å·²æäº¤ï¼Œè¯´çš„æ˜¯ä¸€ä¸ªäº‹åŠ¡åªèƒ½è¯»å–åˆ°å¦ä¸€ä¸ªäº‹åŠ¡å·²ç»æäº¤çš„æ•°æ®ä¿®æ”¹ã€‚\n  </blockquote><p>å¾ˆæ˜æ˜¾ï¼Œè¿™ç§éš”ç¦»çº§åˆ«é¿å…äº†è„è¯»ï¼Œä½†æ˜¯å¯èƒ½ä¼šå‡ºç°ä¸å¯é‡å¤è¯»ã€å¹»è¯»ã€‚</p></li>\n <li><p>Repeatable read</p>\n  <blockquote>\n   å¯é‡å¤è¯»ï¼Œä¿è¯äº†åŒä¸€äº‹åŠ¡ä¸‹å¤šæ¬¡è¯»å–ç›¸åŒçš„æ•°æ®è¿”å›çš„ç»“æœé›†æ˜¯ä¸€æ ·çš„ã€‚\n  </blockquote><p>è¿™ç§éš”ç¦»çº§åˆ«è§£å†³äº†è„è¯»å’Œä¸å¯é‡å¤è¯»é—®é¢˜ï¼Œä½†æ˜¯æ‰”æœ‰å¯èƒ½å‡ºç°å¹»è¯»ã€‚</p></li>\n <li><p>Serializable</p>\n  <blockquote>\n   ä¸²è¡ŒåŒ–ï¼Œå¯¹åŒä¸€æ•°æ®çš„è¯»å†™å…¨åŠ é”ï¼Œå³å¯¹åŒä¸€æ•°æ®çš„è¯»å†™å…¨æ˜¯äº’æ–¥äº†ï¼Œæ•°æ®å¯é è¡Œå¾ˆå¼ºï¼Œä½†æ˜¯å¹¶å‘æ€§èƒ½ä¸å¿ç›´è§†ã€‚\n  </blockquote><p>è¿™ç§éš”ç¦»çº§åˆ«è™½ç„¶è§£å†³äº†ä¸Šè¿°ä¸‰ä¸ªé—®é¢˜ï¼Œä½†æ˜¯ç‰ºç‰²äº†æ€§èƒ½ã€‚</p></li>\n</ul>\n<p>æ€»ç»“å¦‚ä¸‹è¡¨ï¼š <code>âˆš ä»£è¡¨å¯èƒ½å‡ºç°ï¼ŒÃ— ä»£è¡¨ä¸ä¼šå‡ºç°ã€‚</code></p>\n<table>\n <thead>\n  <tr>\n   <th align=\"left\">éš”ç¦»çº§åˆ«</th>\n   <th align=\"left\">è„è¯»</th>\n   <th align=\"left\">ä¸å¯é‡å¤è¯»</th>\n   <th align=\"left\">å¹»è¯»</th>\n  </tr>\n </thead>\n <tbody>\n  <tr>\n   <td align=\"left\">Read uncommitted</td>\n   <td align=\"left\">âˆš</td>\n   <td align=\"left\">âˆš</td>\n   <td align=\"left\">âˆš</td>\n  </tr>\n  <tr>\n   <td align=\"left\">Read committed</td>\n   <td align=\"left\">Ã—</td>\n   <td align=\"left\">âˆš</td>\n   <td align=\"left\">âˆš</td>\n  </tr>\n  <tr>\n   <td align=\"left\">Repeatable read</td>\n   <td align=\"left\">Ã—</td>\n   <td align=\"left\">Ã—</td>\n   <td align=\"left\">âˆš</td>\n  </tr>\n  <tr>\n   <td align=\"left\">Serializable</td>\n   <td align=\"left\">Ã—</td>\n   <td align=\"left\">Ã—</td>\n   <td align=\"left\">Ã—</td>\n  </tr>\n </tbody>\n</table>\n<h2>å››ã€MySQL äº‹åŠ¡éš”ç¦»çº§åˆ«çš„å®ç°</h2>\n<p>åœ¨ MySQL ä¸­åªæœ‰ InnoDB å­˜å‚¨å¼•æ“æ”¯æŒäº‹åŠ¡ï¼Œä½†æ˜¯åœ¨æ—¥å¸¸ä½¿ç”¨ MySQL æ—¶æˆ‘ä»¬å¥½åƒæ²¡æœ‰æ€ä¹ˆå…³å¿ƒè¿‡ä¸Šè¿°ä¸‰ä¸ªé—®é¢˜å•Š...</p>\n<p>åŸå› å¾ˆç®€å•ï¼ŒMySQL é»˜è®¤ <strong>Repeatable read</strong> éš”ç¦»çº§åˆ«ï¼Œä½¿ç”¨äº† MVCC æŠ€æœ¯ï¼Œå¹¶ä¸”è§£å†³äº†å¹»è¯»é—®é¢˜ã€‚</p>\n<h3>MVCC</h3>\n<hr>\n <p>MVCC å…¨åå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼Œä½¿ç”¨å®ƒå¯ä»¥ä¿è¯ InnoDB å­˜å‚¨å¼•æ“ä¸‹è¯»æ“ä½œçš„ä¸€è‡´æ€§ã€‚ä½¿ç”¨ MVCC å¯ä»¥æŸ¥è¯¢è¢«å¦ä¸€ä¸ªäº‹åŠ¡ä¿®æ”¹çš„è¡Œæ•°æ®ï¼Œå¹¶ä¸”å¯ä»¥æŸ¥çœ‹è¿™äº›è¡Œè¢«æ›´æ–°ä¹‹å‰çš„æ•°æ®ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯<strong>ä½¿ç”¨ MVCC å¢åŠ äº†å¤šäº‹åŠ¡çš„å¹¶å‘æ€§èƒ½ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰è§£å†³å¹»è¯»é—®é¢˜</strong>ã€‚</p>\n <h4>1ã€åŸç†</h4>\n <p>MVCC æ˜¯é€šè¿‡ä¿å­˜æ•°æ®åœ¨æŸä¸ªæ—¶é—´ç‚¹çš„å¿«ç…§æ¥å®ç°çš„ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨åŒä¸€ä¸ªäº‹åŠ¡çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œæ•°æ®çš„å¿«ç…§å§‹ç»ˆæ˜¯ç›¸åŒçš„ï¼›è€Œåœ¨å¤šä¸ªäº‹åŠ¡ä¸­ï¼Œç”±äºäº‹åŠ¡çš„æ—¶é—´ç‚¹å¾ˆå¯èƒ½ä¸ç›¸åŒï¼Œæ•°æ®çš„å¿«ç…§ä¹Ÿä¸å°½ç›¸åŒã€‚</p>\n <h4>2ã€å®ç°ç»†èŠ‚</h4>\n <ul>\n  <li>æ¯è¡Œæ•°æ®éƒ½å­˜åœ¨ä¸€ä¸ªç‰ˆæœ¬ï¼Œæ¯æ¬¡æ•°æ®æ›´æ–°æ—¶éƒ½æ›´æ–°è¯¥ç‰ˆæœ¬ã€‚</li>\n  <li>ä¿®æ”¹æ—¶Copyå‡ºå½“å‰ç‰ˆæœ¬éšæ„ä¿®æ”¹ï¼Œå„ä¸ªäº‹åŠ¡ä¹‹é—´äº’ä¸å¹²æ‰°ã€‚</li>\n  <li>ä¿å­˜æ—¶æ¯”è¾ƒç‰ˆæœ¬å·ï¼Œå¦‚æœæˆåŠŸï¼ˆcommitï¼‰ï¼Œåˆ™è¦†ç›–åŸè®°å½•ï¼›å¤±è´¥åˆ™æ”¾å¼ƒcopyï¼ˆrollbackï¼‰ã€‚</li>\n </ul>\n <p>é€šè¿‡ä¸Šé¢ç‰¹ç‚¹æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒMVCC å…¶å®å°±æ˜¯ç±»ä¼¼ä¹è§‚é”çš„ä¸€ç§å®ç°ã€‚</p>\n <h4>3ã€InnoDB ä¸­ MVCC å®ç°</h4>\n <p>åœ¨ InnoDB ä¸­ä¸ºæ¯è¡Œå¢åŠ ä¸¤ä¸ªéšè—çš„å­—æ®µï¼Œåˆ†åˆ«æ˜¯è¯¥è¡Œæ•°æ®<strong>åˆ›å»ºæ—¶çš„ç‰ˆæœ¬å·</strong>å’Œ<strong>åˆ é™¤æ—¶çš„ç‰ˆæœ¬å·</strong>ï¼Œè¿™é‡Œçš„ç‰ˆæœ¬å·æ˜¯ç³»ç»Ÿç‰ˆæœ¬å·ï¼ˆå¯ä»¥ç®€å•ç†è§£ä¸ºäº‹åŠ¡çš„ IDï¼‰ï¼Œæ¯å¼€å§‹ä¸€ä¸ªæ–°çš„äº‹åŠ¡ï¼Œç³»ç»Ÿç‰ˆæœ¬å·å°±è‡ªåŠ¨é€’å¢ï¼Œä½œä¸ºäº‹åŠ¡çš„ ID ã€‚é€šå¸¸è¿™ä¸¤ä¸ªç‰ˆæœ¬å·åˆ†åˆ«å«åšåˆ›å»ºæ—¶é—´å’Œåˆ é™¤æ—¶é—´ã€‚</p>\n <p>ä¸‹é¢é€šè¿‡å…·ä½“çš„ä¾‹å­æ¥å¸®åŠ©ç†è§£ InnoDB ä¸­ MVCC å®ç°ï¼Œ</p>\n <p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªè¡¨ï¼š</p>\n <pre><code>create table info( \nid int primary key auto_increment, \nname varchar(20));</code></pre>\n <p>INSERT<br>InnoDB ä¸ºæ–°æ’å…¥çš„æ¯ä¸€è¡Œä¿å­˜å½“å‰ç³»ç»Ÿç‰ˆæœ¬å·ä½œä¸ºç‰ˆæœ¬å·ã€‚ç°åœ¨å‡è®¾äº‹åŠ¡çš„ç‰ˆæœ¬å·ä» 1 å¼€å§‹ã€‚</br></p>\n <p><strong>ç¬¬ä¸€ä¸ªäº‹åŠ¡</strong> IDä¸º1ï¼›</p>\n <pre><code>start transaction;\ninsert into info values(NULL,'a');\ninsert into info values(NULL,'b');\ninsert into info values(NULL,'c');\ncommit;</code></pre>\n <p>å¯¹åº”åœ¨æ•°æ®ä¸­çš„è¡¨å¦‚ä¸‹(åé¢ä¸¤åˆ—æ˜¯éšè—åˆ—,ä¹Ÿå°±æ˜¯ç‰ˆæœ¬å·)</p>\n <table>\n  <thead>\n   <tr>\n    <th>id</th>\n    <th>name</th>\n    <th>åˆ›å»ºç‰ˆæœ¬(äº‹åŠ¡ID)</th>\n    <th>åˆ é™¤ç‰ˆæœ¬(äº‹åŠ¡ID)</th>\n   </tr>\n  </thead>\n  <tbody>\n   <tr>\n    <td>1</td>\n    <td>a</td>\n    <td>1</td>\n    <td>undefined</td>\n   </tr>\n   <tr>\n    <td>2</td>\n    <td>b</td>\n    <td>1</td>\n    <td>undefined</td>\n   </tr>\n   <tr>\n    <td>3</td>\n    <td>c</td>\n    <td>1</td>\n    <td>undefined</td>\n    <td> </td>\n   </tr>\n  </tbody>\n </table>\n <blockquote>\n  SELECT\n </blockquote>\n <p>InnoDB ä¼šæ ¹æ®ä¸‹é¢ä¸¤ä¸ªæ¡ä»¶æ£€æŸ¥æ¯è¡Œè®°å½•:</p>\n <ul>\n  <li>åªä¼šæŸ¥æ‰¾ç‰ˆæœ¬<strong>æ—©äºå½“å‰äº‹åŠ¡ç‰ˆæœ¬çš„æ•°æ®è¡Œ</strong>ï¼ˆè¡Œçš„ç³»ç»Ÿç‰ˆæœ¬å·å°äºæˆ–ç­‰äºäº‹åŠ¡çš„ç³»ç»Ÿç‰ˆæœ¬å·)ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿äº‹åŠ¡è¯»å–çš„è¡Œï¼Œè¦ä¹ˆæ˜¯<strong>åœ¨äº‹åŠ¡å¼€å§‹å‰å·²ç»å­˜åœ¨çš„</strong>ï¼Œè¦ä¹ˆæ˜¯<strong>äº‹åŠ¡è‡ªèº«æ’å…¥æˆ–è€…ä¿®æ”¹è¿‡çš„</strong>ã€‚</li>\n  <li><strong>è¡Œçš„åˆ é™¤ç‰ˆæœ¬è¦ä¹ˆæœªå®šä¹‰</strong>,<strong>è¦ä¹ˆå¤§äºå½“å‰äº‹åŠ¡ç‰ˆæœ¬å·</strong>,è¿™å¯ä»¥ç¡®ä¿äº‹åŠ¡è¯»å–åˆ°çš„è¡Œï¼Œåœ¨<strong>äº‹åŠ¡å¼€å§‹ä¹‹å‰æœªè¢«åˆ é™¤</strong>ã€‚</li>\n </ul>\n <p>åªæœ‰ a, b åŒæ—¶æ»¡è¶³çš„è®°å½•ï¼Œæ‰èƒ½è¿”å›ä½œä¸ºæŸ¥è¯¢ç»“æœ.</p>\n <hr>\n  <blockquote>\n   DELETE\n  </blockquote>\n  <p>InnoDBä¼šä¸ºåˆ é™¤çš„æ¯ä¸€è¡Œä¿å­˜å½“å‰ç³»ç»Ÿçš„ç‰ˆæœ¬å·(äº‹åŠ¡çš„ID)ä½œä¸ºåˆ é™¤æ ‡è¯†.<br>çœ‹ä¸‹é¢çš„å…·ä½“ä¾‹å­åˆ†æ:</br></p>\n  <p><strong>ç¬¬äºŒä¸ªäº‹åŠ¡</strong> IDä¸º2;</p>\n  <pre><code>start transaction;\nselect * from info;  //(1)\nselect * from info;  //(2)\ncommit;</code></pre>\n  <ul>\n   <li>å‡è®¾1<br>å‡è®¾åœ¨æ‰§è¡Œè¿™ä¸ªäº‹åŠ¡ ID ä¸º 2 çš„è¿‡ç¨‹ä¸­ï¼Œåˆšæ‰§è¡Œåˆ° (1) ,è¿™æ—¶,æœ‰å¦ä¸€ä¸ªäº‹åŠ¡ ID ä¸º 3 å¾€è¿™ä¸ªè¡¨é‡Œæ’å…¥äº†ä¸€æ¡æ•°æ®;</br></li>\n  </ul>\n  <p><strong>ç¬¬ä¸‰ä¸ªäº‹åŠ¡</strong>IDä¸º3;</p>\n  <pre><code>start transaction;\ninsert into info values(NULL,'d');\ncommit;</code></pre>\n  <p>è¿™æ—¶è¡¨ä¸­çš„æ•°æ®å¦‚ä¸‹:</p>\n  <table>\n   <thead>\n    <tr>\n     <th>id</th>\n     <th>name</th>\n     <th>åˆ›å»ºç‰ˆæœ¬(äº‹åŠ¡ID)</th>\n     <th>åˆ é™¤ç‰ˆæœ¬(äº‹åŠ¡ID)</th>\n    </tr>\n   </thead>\n   <tbody>\n    <tr>\n     <td>1</td>\n     <td>a</td>\n     <td>1</td>\n     <td>undefined</td>\n    </tr>\n    <tr>\n     <td>2</td>\n     <td>b</td>\n     <td>1</td>\n     <td>undefined</td>\n    </tr>\n    <tr>\n     <td>3</td>\n     <td>c</td>\n     <td>1</td>\n     <td>undefined</td>\n    </tr>\n    <tr>\n     <td>4</td>\n     <td>d</td>\n     <td>3</td>\n     <td>undefined</td>\n    </tr>\n   </tbody>\n  </table>\n  <p>ç„¶åæ¥ç€æ‰§è¡Œ <strong>äº‹åŠ¡2</strong> ä¸­çš„ (2) ï¼Œç”±äº id=4 çš„æ•°æ®çš„åˆ›å»ºæ—¶é—´(äº‹åŠ¡ ID ä¸º 3 ),æ‰§è¡Œå½“å‰äº‹åŠ¡çš„ ID ä¸º 2 ï¼Œè€Œ InnoDB åªä¼šæŸ¥æ‰¾äº‹åŠ¡ ID å°äºç­‰äºå½“å‰äº‹åŠ¡ ID çš„æ•°æ®è¡Œ,æ‰€ä»¥ id=4 çš„æ•°æ®è¡Œå¹¶ä¸ä¼šåœ¨æ‰§è¡Œ <strong>äº‹åŠ¡2</strong> ä¸­çš„ (2) è¢«æ£€ç´¢å‡ºæ¥,åœ¨ <em>*äº‹åŠ¡2</em> *ä¸­çš„ä¸¤æ¡ select è¯­å¥æ£€ç´¢å‡ºæ¥çš„æ•°æ®éƒ½åªä¼šå¦‚ä¸‹è¡¨:</p>\n  <table>\n   <thead>\n    <tr>\n     <th>id</th>\n     <th>name</th>\n     <th>åˆ›å»ºç‰ˆæœ¬(äº‹åŠ¡ID)</th>\n     <th>åˆ é™¤ç‰ˆæœ¬(äº‹åŠ¡ID)</th>\n    </tr>\n   </thead>\n   <tbody>\n    <tr>\n     <td>1</td>\n     <td>a</td>\n     <td>1</td>\n     <td>undefined</td>\n    </tr>\n    <tr>\n     <td>2</td>\n     <td>b</td>\n     <td>1</td>\n     <td>undefined</td>\n    </tr>\n    <tr>\n     <td>3</td>\n     <td>c</td>\n     <td>1</td>\n     <td>undefined</td>\n    </tr>\n   </tbody>\n  </table>\n  <ul>\n   <li>å‡è®¾2<br>å‡è®¾åœ¨æ‰§è¡Œè¿™ä¸ªäº‹åŠ¡ ID ä¸º 2 çš„è¿‡ç¨‹ä¸­ï¼Œåˆšæ‰§è¡Œåˆ° (1) ,å‡è®¾äº‹åŠ¡æ‰§è¡Œå®Œ <strong>äº‹åŠ¡3</strong> åï¼Œæ¥ç€åˆæ‰§è¡Œäº† <strong>äº‹åŠ¡4</strong> ;</br></li>\n  </ul>\n  <p><strong>ç¬¬å››ä¸ªäº‹åŠ¡</strong>:</p>\n  <pre><code>start   transaction;  \ndelete from info where id=1;\ncommit;</code></pre>\n  <p>æ­¤æ—¶æ•°æ®åº“ä¸­çš„è¡¨æ•°æ®å¦‚ä¸‹:</p>\n  <table>\n   <thead>\n    <tr>\n     <th>id</th>\n     <th>name</th>\n     <th>åˆ›å»ºç‰ˆæœ¬(äº‹åŠ¡ID)</th>\n     <th>åˆ é™¤ç‰ˆæœ¬(äº‹åŠ¡ID)</th>\n    </tr>\n   </thead>\n   <tbody>\n    <tr>\n     <td>1</td>\n     <td>a</td>\n     <td>1</td>\n     <td>4</td>\n    </tr>\n    <tr>\n     <td>2</td>\n     <td>b</td>\n     <td>1</td>\n     <td>undefined</td>\n    </tr>\n    <tr>\n     <td>3</td>\n     <td>c</td>\n     <td>1</td>\n     <td>undefined</td>\n    </tr>\n    <tr>\n     <td>4</td>\n     <td>d</td>\n     <td>3</td>\n     <td>undefined</td>\n    </tr>\n   </tbody>\n  </table>\n  <p>æ¥ç€æ‰§è¡Œäº‹åŠ¡ ID ä¸º 2 çš„ <strong>äº‹åŠ¡(2)</strong>ï¼Œæ ¹æ® SELECT æ£€ç´¢æ¡ä»¶å¯ä»¥çŸ¥é“,å®ƒä¼šæ£€ç´¢åˆ›å»ºæ—¶é—´(åˆ›å»ºäº‹åŠ¡çš„ ID )å°äºå½“å‰äº‹åŠ¡ ID çš„è¡Œå’Œåˆ é™¤æ—¶é—´(åˆ é™¤äº‹åŠ¡çš„ ID )å¤§äºå½“å‰äº‹åŠ¡çš„è¡Œ,è€Œ id=4 çš„è¡Œä¸Šé¢å·²ç»è¯´è¿‡ï¼Œè€Œ id=1 çš„è¡Œç”±äºåˆ é™¤æ—¶é—´(åˆ é™¤äº‹åŠ¡çš„ ID )å¤§äºå½“å‰äº‹åŠ¡çš„ ID ï¼Œæ‰€ä»¥ <strong>äº‹åŠ¡2</strong> çš„ (2) select * from info ä¹Ÿä¼šæŠŠ id=1 çš„æ•°æ®æ£€ç´¢å‡ºæ¥ã€‚æ‰€ä»¥ï¼Œ<strong>äº‹åŠ¡2</strong> ä¸­çš„ä¸¤æ¡ select è¯­å¥æ£€ç´¢å‡ºæ¥çš„æ•°æ®éƒ½å¦‚ä¸‹:</p>\n  <table>\n   <thead>\n    <tr>\n     <th>id</th>\n     <th>name</th>\n     <th>åˆ›å»ºç‰ˆæœ¬(äº‹åŠ¡ID)</th>\n     <th>åˆ é™¤ç‰ˆæœ¬(äº‹åŠ¡ID)</th>\n    </tr>\n   </thead>\n   <tbody>\n    <tr>\n     <td>1</td>\n     <td>a</td>\n     <td>1</td>\n     <td>4</td>\n    </tr>\n    <tr>\n     <td>2</td>\n     <td>b</td>\n     <td>1</td>\n     <td>undefined</td>\n    </tr>\n    <tr>\n     <td>3</td>\n     <td>c</td>\n     <td>1</td>\n     <td>undefined</td>\n    </tr>\n   </tbody>\n  </table>\n  <hr>\n   <blockquote>\n    UPDATE\n   </blockquote>\n   <p>InnoDB æ‰§è¡Œ UPDATEï¼Œå®é™…ä¸Šæ˜¯<strong>æ–°æ’å…¥äº†ä¸€è¡Œè®°å½•</strong>ï¼Œå¹¶ä¿å­˜å…¶åˆ›å»ºæ—¶é—´ä¸ºå½“å‰äº‹åŠ¡çš„ ID ï¼ŒåŒæ—¶ä¿å­˜å½“å‰äº‹åŠ¡ ID åˆ°è¦ UPDATE çš„è¡Œçš„åˆ é™¤æ—¶é—´ã€‚</p>\n   <ul>\n    <li>å‡è®¾3<br>å‡è®¾åœ¨æ‰§è¡Œå®Œ <strong>äº‹åŠ¡2</strong> çš„ (1) ååˆæ‰§è¡Œï¼Œå…¶å®ƒç”¨æˆ·æ‰§è¡Œäº†äº‹åŠ¡ 3å’Œ 4ï¼Œè¿™æ—¶ï¼Œåˆæœ‰ä¸€ä¸ªç”¨æˆ·å¯¹è¿™å¼ è¡¨æ‰§è¡Œäº† UPDATE æ“ä½œ:</br></li>\n   </ul>\n   <p><strong>ç¬¬äº”ä¸ªäº‹åŠ¡</strong>:</p>\n   <pre><code>start  transaction;\nupdate info set name='b' where id=2;\ncommit;</code></pre>\n   <p>æ ¹æ®updateçš„æ›´æ–°åŸåˆ™ï¼šä¼šç”Ÿæˆæ–°çš„ä¸€è¡Œï¼Œå¹¶åœ¨åŸæ¥è¦ä¿®æ”¹çš„åˆ—çš„åˆ é™¤æ—¶é—´åˆ—ä¸Šæ·»åŠ æœ¬äº‹åŠ¡IDï¼Œå¾—åˆ°è¡¨å¦‚ä¸‹:</p>\n   <table>\n    <thead>\n     <tr>\n      <th>id</th>\n      <th>name</th>\n      <th>åˆ›å»ºç‰ˆæœ¬(äº‹åŠ¡ID)</th>\n      <th>åˆ é™¤ç‰ˆæœ¬(äº‹åŠ¡ID)</th>\n     </tr>\n    </thead>\n    <tbody>\n     <tr>\n      <td>1</td>\n      <td>a</td>\n      <td>1</td>\n      <td>4</td>\n     </tr>\n     <tr>\n      <td>2</td>\n      <td>b</td>\n      <td>1</td>\n      <td>5</td>\n     </tr>\n     <tr>\n      <td>3</td>\n      <td>c</td>\n      <td>1</td>\n      <td>undefined</td>\n     </tr>\n     <tr>\n      <td>4</td>\n      <td>d</td>\n      <td>3</td>\n      <td>undefined</td>\n     </tr>\n     <tr>\n      <td>2</td>\n      <td>b</td>\n      <td>5</td>\n      <td>undefined</td>\n     </tr>\n    </tbody>\n   </table>\n   <p>ç»§ç»­æ‰§è¡Œ <strong>äº‹åŠ¡2</strong> çš„ (2) ï¼Œæ ¹æ® select è¯­å¥çš„æ£€ç´¢æ¡ä»¶ï¼Œå¾—åˆ°ä¸‹è¡¨:</p>\n   <table>\n    <thead>\n     <tr>\n      <th>id</th>\n      <th>name</th>\n      <th>åˆ›å»ºç‰ˆæœ¬(äº‹åŠ¡ID)</th>\n      <th>åˆ é™¤ç‰ˆæœ¬(äº‹åŠ¡ID)</th>\n     </tr>\n    </thead>\n    <tbody>\n     <tr>\n      <td>1</td>\n      <td>a</td>\n      <td>1</td>\n      <td>4</td>\n     </tr>\n     <tr>\n      <td>2</td>\n      <td>b</td>\n      <td>1</td>\n      <td>5</td>\n     </tr>\n     <tr>\n      <td>3</td>\n      <td>c</td>\n      <td>1</td>\n      <td>undefined</td>\n     </tr>\n    </tbody>\n   </table>\n   <p>è¿˜æ˜¯å’Œ <strong>äº‹åŠ¡2</strong> ä¸­ (1) select å¾—åˆ°ç›¸åŒçš„ç»“æœã€‚</p>\n   <p>â€ æ€»ç»“ï¼š</p>\n   <blockquote>\n    <ul>\n     <li>SELECT<br>è¯»å–åˆ›å»ºç‰ˆæœ¬å·å°äºæˆ–ç­‰äºå½“å‰äº‹åŠ¡ç‰ˆæœ¬å·ï¼Œå¹¶ä¸”åˆ é™¤ç‰ˆæœ¬å·ä¸ºç©ºæˆ–å¤§äºå½“å‰äº‹åŠ¡ç‰ˆæœ¬å·çš„è®°å½•ã€‚å¦‚æ­¤å¯ä»¥ä¿è¯åœ¨äº‹åŠ¡åœ¨è¯»å–ä¹‹å‰è®°å½•æ˜¯å­˜åœ¨çš„ã€‚</br></li>\n     <li>INSERT<br>å°†å½“å‰äº‹åŠ¡çš„ç‰ˆæœ¬å·ä¿å­˜è‡³æ’å…¥è¡Œçš„åˆ›å»ºç‰ˆæœ¬å·ã€‚</br></li>\n     <li>UPDATE<br>æ–°æ’å…¥ä¸€è¡Œï¼Œå¹¶ä»¥å½“å‰äº‹åŠ¡çš„ç‰ˆæœ¬å·ä½œä¸ºæ–°è¡Œçš„åˆ›å»ºç‰ˆæœ¬å·ï¼ŒåŒæ—¶å°†åŸè®°å½•è¡Œçš„åˆ é™¤ç‰ˆæœ¬å·è®¾ç½®ä¸ºå½“å‰äº‹åŠ¡ç‰ˆæœ¬å·ã€‚</br></li>\n     <li>DELETE<br>å°†å½“å‰äº‹åŠ¡çš„ç‰ˆæœ¬å·ä¿å­˜è‡³è¡Œçš„åˆ é™¤ç‰ˆæœ¬å·ã€‚</br></li>\n    </ul>\n   </blockquote>\n   <p>ä¾‹å­å‚è€ƒï¼š<a href=\"https://blog.csdn.net/whoamiyang/article/details/51901888\" rel=\"nofollow noreferrer\">https://blog.csdn.net/whoamiy...</a></p>\n   <hr>\n    <h4>4ã€ InnoDB å¦‚ä½•è§£å†³å¹»è¯»é—®é¢˜</h4>\n    <p>åœ¨ InnoDB ä¸­åˆ†ä¸º<strong>å¿«ç…§è¯»</strong>å’Œ<strong>å½“å‰è¯»</strong>ã€‚å¿«ç…§è¯»è¯»çš„æ˜¯æ•°æ®çš„å¿«ç…§ï¼Œä¹Ÿå°±æ˜¯æ•°æ®çš„å†å²ç‰ˆæœ¬ï¼›å½“å‰è¯»å°±æ˜¯è¯»çš„æœ€æ–°ç‰ˆæœ¬çš„æ•°æ®ï¼Œå¹¶ä¸”åœ¨è¯»çš„æ—¶å€™åŠ é”ï¼Œå…¶ä»–äº‹åŠ¡éƒ½ä¸èƒ½å¯¹å½“å‰è¡Œåšä¿®æ”¹ã€‚</p>\n    <blockquote>\n     <ul>\n      <li>å¿«ç…§è¯»ï¼šç®€å•çš„ select æ“ä½œï¼Œå±äºå¿«ç…§è¯»ï¼Œä¸åŠ é”ã€‚<br>select * from table where ?;</br></li>\n      <li>å½“å‰è¯»ï¼šç‰¹æ®Šçš„è¯»æ“ä½œï¼Œæ’å…¥ã€æ›´æ–°ã€åˆ é™¤æ“ä½œï¼Œå±äºå½“å‰è¯»ï¼Œéœ€è¦åŠ é”ã€‚<br>select * from table where ? lock in share mode;<br>select * from table where ? for update;<br>insert into table values (â€¦);<br>update table set ? where ?;<br>delete from table where ?;</br></br></br></br></br></li>\n     </ul>\n    </blockquote>\n    <p>å¯¹äºä¸Šé¢å½“å‰è¯»çš„è¯­å¥ï¼Œç¬¬ä¸€æ¡è¯»å–è®°å½•åŠ å…±äº«é”ï¼Œå…¶ä»–çš„å…¨éƒ¨åŠ æ’å®ƒé”ã€‚</p>\n    <p>ä¹Ÿå°±æ˜¯è¯´åœ¨åšæ•°æ®çš„ä¿®æ”¹æ“ä½œæ—¶ï¼Œéƒ½ä¼šä½¿ç”¨å½“å‰è¯»çš„æ–¹å¼ï¼Œå½“å‰è¯»æ˜¯é€šè¿‡è¡Œé”å’Œé—´éš™é”æ§åˆ¶çš„ï¼Œæ­¤æ—¶æ˜¯åŠ äº†æ’ä»–é”çš„ï¼Œæ‰€æœ‰å…¶ä»–çš„äº‹åŠ¡éƒ½ä¸èƒ½åŠ¨å½“å‰çš„äº‹åŠ¡ï¼Œæ‰€ä»¥é¿å…äº†å‡ºç°å¹»è¯»çš„å¯èƒ½ã€‚</p>\n    <p>è€Œä¸ºäº†é˜²æ­¢å¹»è¯»ï¼Œè¡Œé”å’Œé—´éš™é”æ‰®æ¼”äº†é‡è¦è§’è‰²ï¼Œä¸‹é¢ç®€å•è¯´ä¸€ä¸‹ï¼š</p>\n    <ul>\n     <li>è¡Œé”<br>å­—é¢æ„æ€ç®€å•ç†è§£å¯¹æ•°æ®è¡ŒåŠ é”ï¼Œæ³¨æ„ InnoDB è¡Œé”æ˜¯é€šè¿‡ç»™ç´¢å¼•ä¸Šçš„ç´¢å¼•é¡¹åŠ é”æ¥å®ç°çš„ï¼Œä¹Ÿå°±æ˜¯è¯´<strong>åªæœ‰é€šè¿‡ç´¢å¼•æ¡ä»¶æ£€ç´¢æ•°æ®ï¼ŒInnoDBæ‰ä½¿ç”¨è¡Œçº§é”ï¼Œå¦åˆ™ï¼ŒInnoDBå°†ä½¿ç”¨è¡¨é”ï¼</strong></br></li>\n     <li>é—´éš™é”<br>é—´éš™é”å°±æ˜¯ç”¨æ¥ä¸ºæ•°æ®è¡Œä¹‹é—´çš„é—´éš™æ¥è¿›è¡ŒåŠ é”ã€‚</br></li>\n    </ul>\n    <p>ä¸¾ä¸ªä¾‹å­ï¼š</p>\n    <pre><code>select * from info where id &gt; 5;</code></pre>\n    <p>ä¸Šé¢ SQL ä¸­ï¼Œå…¶ä¸­ id æ˜¯ä¸»é”®ï¼Œå‡è®¾åœ¨ä¸€ä¸ª <strong>äº‹åŠ¡ A</strong> ä¸­æ‰§è¡Œè¿™ä¸ªæŸ¥è¯¢ï¼Œç¬¬ä¸€æ¬¡æŸ¥è¯¢ä¸ºä¸€ä¸ª <strong>ç»“æœé›† 1</strong> ã€‚åœ¨åšç¬¬äºŒæ¬¡æŸ¥è¯¢æ—¶ï¼Œå¦ä¸€ä¸ª <strong>äº‹åŠ¡ B</strong> åœ¨ info è¡¨è¿›è¡Œäº†æ’å…¥æ•°æ® 7 å’Œ 10 çš„æ“ä½œã€‚åœ¨ <strong>äº‹åŠ¡ A</strong> å†æ¬¡æ‰§è¡Œæ­¤æŸ¥è¯¢æŸ¥è¯¢å‡º <strong>ç»“æœé›† 2</strong> çš„æ—¶å€™ï¼Œå‘ç°å¤šäº†å‡ æ¡è®°å½•ï¼Œå¦‚æ­¤ä¾¿äº§ç”Ÿäº†å¹»è¯»ã€‚</p>\n    <ul>\n     <li>ç»“æœé›†1</li>\n    </ul>\n    <pre><code>6,8,9</code></pre>\n    <ul>\n     <li>ç»“æœé›†2</li>\n    </ul>\n    <pre><code>6,7,8,9,10</code></pre>\n    <p>æ‰€ä»¥è¯•æƒ³ä¸ºäº†é˜²æ­¢å¹»è¯»ï¼Œæˆ‘ä»¬ä¸ä½†è¦ç°å­˜çš„ id &gt; 5 çš„æ•°æ®è¡Œï¼ˆ6,8,9ï¼‰ä¸Šé¢åŠ é”ï¼ˆè¡Œé”ï¼‰ï¼Œè¿˜è¦åœ¨å®ƒä»¬çš„é—´éš™åŠ é”ï¼ˆé—´éš™é”ï¼‰ã€‚</p>\n    <p>æˆ‘ä»¬ä»¥åŒºé—´æ¥è¡¨ç¤ºè¦åŠ é”å¯¹è±¡ï¼š</p>\n    <p>(5,6]<br>(6,8]<br>(8,9]<br>(9,+âˆ)</br></br></br></p>\n    <p>å…¶ä¸­åŒºé—´çš„å³é—­å³ä¸ºè¦åŠ çš„è¡Œé”ï¼Œè€ŒåŒºé—´çš„èŒƒå›´å³æ˜¯è¦åŠ çš„é—´éš™é”ã€‚</p>\n    <h2>äº”ã€ç»“è¯­</h2>\n    <p>å…³äºè„è¯»ã€ä¸å¯é‡å¤è¯»å’Œå¹»è¯»çš„ç†è§£ä¾¿è®°å½•åˆ°è¿™é‡Œäº†ï¼Œå› ç¬”è€…æ°´å¹³æœ‰é™ï¼Œå¦‚æœ‰é”™è¯¯æ¬¢è¿æŒ‡æ­£ã€‚</p>\n    <blockquote>\n     æ¬¢è¿è®¿é—®\n     <a href=\"https://aysaml.com\" rel=\"nofollow noreferrer\">ä¸ªäººåšå®¢</a> è·å–æ›´å¤šçŸ¥è¯†åˆ†äº«ã€‚\n    </blockquote>\n   </hr>\n  </hr>\n </hr>\n</hr>","descriptionType":"html","publishedDate":"Wed, 19 Aug 2020 09:15:20 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/bVbLyLa","linkMd5":"5a738e1afa2c3c1a2044a79c194873cd","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn66@2020_4/2020/08/24/23-08-23-072_538d4e9f5497d55e.webp","destWidth":800,"destHeight":450,"sourceBytes":100901,"destBytes":51728,"author":"AYSAML","articleImgCdnMap":{"https://segmentfault.com/img/bVbLyLa":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn66@2020_4/2020/08/24/23-08-23-072_538d4e9f5497d55e.webp"},"publishedOrCreatedDate":1598310388570},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"å¥½å­©å­çš„ç¼–ç ä¹ æƒ¯","link":"https://segmentfault.com/a/1190000023660020","description":"<h2>å‰è¨€</h2>\n<p>æˆ‘ç»å¸¸èƒ½å¬åˆ°ä¸€äº›å¯¹è¯<br>ç‹—è…¿å­A:å“‡ æˆ‘åˆšåˆšå»æ”¹**é¡¹ç›®çš„ä»£ç ï¼Œçœ‹çš„æˆ‘æœ‰ç‚¹æ€€ç–‘äººç”Ÿ<br>ç‹—è…¿å­B: æˆ‘ç°åœ¨é¡¹ç›®çš„è·Ÿå±å±±ä¸€æ ·<br>ç‹—è…¿å­C: æˆ‘éš”å£é‚£å“¥ä»¬æ¯å¤©å†™ä»£ç éƒ½ç‰¹åˆ«éšæ€§ï¼Œæˆ‘æœ‰ç‚¹æŒ‰è€ä¸ä½æˆ‘çš„åˆ€<br>.....<br><img src=\"https://segmentfault.com/img/bVbLqMU\" alt=\"image.png\" title=\"image.png\"><br>ä»Šå¤©è·Ÿå¤§å®¶èŠèŠä¸€äº› <strong>æˆ‘çœ¼ä¸­</strong> å¥½å­©å­çš„ç¼–ç ä¹ æƒ¯ï¼Œè€Œä¸æ˜¯ä»£ç é£æ ¼ä¹ æƒ¯ ï¼Œå½“ç„¶è¿˜æ˜¯å¼ºçƒˆå»ºè®®å¤§å®¶ä»£ç é£æ ¼è·Ÿ<code>psr-12</code>å’Œ<code>psr-1</code>é é½ã€‚</br></img></br></br></br></br></br></p>\n<blockquote>\n <code>psr-1</code>åŸºç¡€ç¼–ç è§„èŒƒ ã€\n <code>psr-12</code>ç¼–ç è§„èŒƒæ‰˜å……\n <br>This specification extends, expands and replaces <a href=\"https://www.php-fig.org/psr/psr-2/\" rel=\"nofollow noreferrer\">PSR-2</a>, the coding style guide and requires adherence to <a href=\"https://www.php-fig.org/psr/psr-1/\" rel=\"nofollow noreferrer\">PSR-1</a>, the basic coding standard.</br>\n</blockquote>\n<p><img src=\"https://segmentfault.com/img/bVbLnDZ\" alt=\"ç¦»èŒæµç¨‹.png\" title=\"ç¦»èŒæµç¨‹.png\" /></p>\n<blockquote>\n æ¨èä¸€æœ¬ã€Šä»£ç æ•´æ´ä¹‹é“ã€‹ï¼Œè¿™æœ¬ä¹¦æˆ‘å·²ç»ä¹¦éƒ½å¿«ç¿»çƒ‚äº†ï¼Œå¢™è£‚æ¨èï¼ï¼ï¼\n</blockquote>\n<p><img src=\"https://segmentfault.com/img/bVbLnZN\" alt=\"image.png\" title=\"image.png\" /></p>\n<h2>ä¸è¿‡åº¦çš„ifåµŒå¥—åˆ¤æ–­</h2>\n<p><strong>æ¡ˆä¾‹èƒŒæ™¯</strong><br>æœ‰ä¸ªå‡½æ•°éœ€è¦åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å‚ä¸æ´»åŠ¨<br><img src=\"https://segmentfault.com/img/bVbLnGW\" alt=\"æµç¨‹å›¾1.png\" title=\"æµç¨‹å›¾1.png\" /></br></br></p>\n<p><strong>æ¡ˆä¾‹ä»£ç </strong></p>\n<pre><code>    if (ç”¨æˆ· == VIP) {\n        if (ç”¨æˆ·çš„è¿‡æœŸæ—¶é—´ &lt;= 1ä¸ªæœˆå†…) {\n            if (ç”¨æˆ·æ²¡å‚åŠ è¿‡ä»»åŠ¡) {\n                return true;\n            }\n        } else {\n            return false;\n        }\n    } else {\n        return true\n    }\n    </code></pre>\n<p>é¢å¯¹è¿™ç§å¤šæ¡ä»¶çš„åˆ¤æ–­å¯ä»¥è¯•ç€ç”¨<code>æ‹¦æˆªæ³•</code>å’Œ<code>é€†å‘æ€ç»´</code><br><code>æ‹¦æˆªæ³•</code>åªè¦ç¬¦åˆæ¡ä»¶ç«‹é©¬è¿”å›ç»“æœï¼Œä¸å†åµŒå¥—çš„ifã€‚å¯ä»¥ç†è§£æˆæ¨ªå‘åˆ¤æ–­å˜æˆçºµå‘åˆ¤æ–­ã€‚</br></p>\n<p><strong>èˆ’é€‚æ„Ÿ</strong><br>ä»ä¸Šå¾€ä¸‹çœ‹ &gt; ä»å·¦å¾€å³çœ‹</br></p>\n<p><code>é€†å‘æ€ç»´</code> å¤§å®¶ä¸Šå­¦çš„æ—¶å€™éƒ½äº†è§£è¿‡ï¼Œä¸å…¶æ¼«å¤©å»æ‰¾ç¬¦åˆçš„æ¡ä»¶è¿˜ä¸å¦‚æ‰¾ä¸ç¬¦åˆæ¡ä»¶ï¼Œè¿™æ ·çš„é€»è¾‘ä»£ç å¯ä»¥å°‘å¾ˆå¤šã€‚</p>\n<pre><code>    if (ç”¨æˆ· != VIP) {\n        return true;\n    } \n    \n    if (ç”¨æˆ·å‚åŠ è¿‡ä»»åŠ¡) {\n        return false;\n    }\n    \n    if (ç”¨æˆ·çš„è¿‡æœŸæ—¶é—´ &lt;= 1ä¸ªæœˆå†…) {\n        return true;    \n    }\n    \n    return false;\n    </code></pre>\n<h2>ä¸è¿‡åº¦çš„try-catchåµŒå¥—</h2>\n<p>æˆ‘é‡åˆ°è¿‡å¾ˆå¤šé¡¹ç›®éƒ½è¿‡åº¦åµŒå¥—<code>try-catch</code>å¯¼è‡´æœ€ä¸Šå±‚çš„<code>try-catch</code> <strong>catch</strong>äº†å¯‚å¯ã€‚<br><img src=\"https://segmentfault.com/img/bVbLnYJ\" alt=\"image.png\" title=\"image.png\" /></br></p>\n<p><strong>æ¡ˆä¾‹ä»£ç </strong></p>\n<pre><code>function insertUser($data)\n{\n    try {\n        userIsInValid();\n    } catch (Exception $exception) {\n    }\n}\n\nfunction userIsInValid()\n{\n    try {\n        //é€»è¾‘åˆ¤æ–­\n    } catch (Exception $exception) {\n        return true;\n    }\n    return true;\n    \n}</code></pre>\n<p>è¿™æ ·çš„ä»£ç æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœå‡è®¾<code>userIsInValid</code>çœŸçš„å‘ç”Ÿä»£ç çº§çš„é”™è¯¯æ²¡æ³•çŸ¥é“é‚£é‡Œå‡ºé—®é¢˜ï¼Œè™½ç„¶ä¸ä¼šç ´åä¸šåŠ¡çš„å¥å£®æ€§ã€‚<br>å¯èƒ½æœ‰äººè¯´äº†åœ¨ExcetionåŠ ä¸ªæ—¥å¿—ï¼Œä½†æ˜¯å¦‚æœåµŒå¥—çš„try-catchå¤šäº†ï¼Œæ’æŸ¥æ—¥å¿—ä¹Ÿæ˜¯ä¸€ä»¶å¾ˆç—›è‹¦çš„äº‹æƒ…ã€‚</br></p>\n<p>1.å°½å¯èƒ½ä¸šåŠ¡æœ€ä¸Šå±‚åŒ…è£¹å¼‚å¸¸ é™¤éç½‘ç»œIOè¯·æ±‚å‡½æ•°ã€‚<br>2.å¦‚æœéè¦å¼‚å¸¸åµŒå¥— éœ€è¦å®šä¹‰æ¯ä¸ªå¼‚å¸¸çš„ç±»å‹ã€‚<br>3.å°½å¯èƒ½æ ¹æ®ç‰¹å®šçš„å¼‚å¸¸è¿›è¡Œcatch ä¸å»ºè®®ç›´æ¥catch Exceptionã€‚<br>4.å¼‚å¸¸å’Œæ—¥å¿—æ˜¯ä¸ª<code>cp</code>ï¼Œè¿˜æ˜¯ä¸è¦å¿˜è®°äº†ã€‚<br><img src=\"https://segmentfault.com/img/bVbLqQQ\" alt=\"image.png\" title=\"image.png\" /></br></br></br></br></p>\n<pre><code>&lt;?php\n\nfunction insertUser($data)\n{\n    try {\n        userIsInValid();\n    } catch (Exception $exception) {\n        // æ—¥å¿—\n        // ä¸šåŠ¡å¤„ç†\n    } catch (HttpException $httpException) {\n       // æ—¥å¿—\n       // ä¸šåŠ¡å¤„ç†\n    }\n}\n\nfunction userIsInValid()\n{\n    //\n    return true;\n}</code></pre>\n<h2>ä¸è¦ç”¨if-elseåšé”™è¯¯ç±»å‹åˆ¤æ–­</h2>\n<p><strong>æ¡ˆä¾‹ä»£ç </strong> (æ¥æºæŸä¸ªç½‘æ°‘å‰æ®µæ—¶é—´å’¨è¯¢)</p>\n<pre><code>&lt;?php\n\n.....\nif ($code === 'NOTENOUGH') {\n    packApiData(400014, 'Company have no enough money to pay', [], 'ä¼ä¸šä½™é¢ä¸è¶³');\n} elseif ($code === 'AMOUNT_LIMIT') {\n    packApiData(400015, 'Amount limit', [], 'é‡‘é¢è¶…é™æˆ–è¢«å¾®ä¿¡é£æ§æ‹¦æˆª');\n} elseif ($code === 'OPENID_ERROR') {\n    packApiData(400016, 'Appid and Openid does not match', [], 'Openidæ ¼å¼é”™è¯¯æˆ–ä¸å±äºæ­¤å…¬ä¼—å·');\n} elseif ($code === 'SEND_FAILED') {\n    // ä»˜æ¬¾é”™è¯¯,è¦æŸ¥å•æ¥çœ‹æœ€ç»ˆç»“æœ\n    if ($orderInfo[1]['status'] == 'SUCCESS') {\n        // è¿˜æ˜¯æˆåŠŸç»™äº†ï¼Œæ‰£å›ä½™é¢\n        \n        packApiData(200, 'success', [$orderInfo[1]]);\n    } else {\n        packApiData(400017, 'Weixin pay failed', [], 'å¾®ä¿¡æ”¯ä»˜ä»˜æ¬¾å¤±è´¥');\n    }\n} elseif ($code === 'SYSTEMERROR') {\n    packApiData(400018, 'Weixin pay server error', [], 'å¾®ä¿¡æ”¯ä»˜æœåŠ¡å™¨é”™è¯¯');\n} elseif ($code === 'NAME_MISMATCH') {\n    packApiData(400019, 'Real name mismatch', [], 'å¾®ä¿¡ç”¨æˆ·çš„çœŸåæ ¡éªŒå¤±è´¥');\n} elseif ($code === 'FREQ_LIMIT') {\n    packApiData(400020, 'Api request frequently', [], 'å¾®ä¿¡æ”¯ä»˜æ¥å£è°ƒç”¨è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨å€™å†è¯·æ±‚');\n} elseif ($code === 'MONEY_LIMIT') {\n    packApiData(400021, 'Company have reached total payment limit', [], 'å·²ç»è¾¾åˆ°ä»Šæ—¥ä»˜æ¬¾æ€»é¢ä¸Šé™');\n} elseif ($code === 'V2_ACCOUNT_SIMPLE_BAN') {\n    packApiData(400022, 'This payment account has no real name', [], 'ç”¨æˆ·çš„å¾®ä¿¡æ”¯ä»˜è´¦æˆ·æœªå®å');\n} elseif ($code === 'SENDNUM_LIMIT') {\n    packApiData(400023, 'The number of times the user paid today exceeded the limit', [], 'è¯¥ç”¨æˆ·ä»Šæ—¥æ”¶æ¬¾æ¬¡æ•°è¶…è¿‡é™åˆ¶');\n}</code></pre>\n<p>è¿™æ ·çš„ä»£ç å¯èƒ½å†™èµ·æ¥ç‰¹åˆ«èˆ’æœï¼Œä½†æ˜¯åæœŸè¿›è¡Œä¸šåŠ¡çš„å¢åŠ æ”¹å†™å’Œæ—¶é—´çš„æ²‰æ·€ï¼Œå®¹æ˜“å˜æˆè®©äººå®³æ€•çš„å±å±±ä»£ç ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/bVbLqNT\" alt=\"image.png\" title=\"image.png\" /></p>\n<p>æˆ‘ä»¬ç”¨mappingé”™è¯¯ç æ¥è°ƒæ•´ä¸‹</p>\n<pre><code>function packApiDataByOrderError($code)\n{\n    $errorCodeMappins = [\n        \"NOTENOUGH\" =&gt; [\n            \"code\" =&gt; 400014,\n            \"wx_message\" =&gt; \"Company have no enough money to pay\",\n            \"error_message\" =&gt; \"ä¼ä¸šä½™é¢ä¸è¶³\"\n        ],\n\n        \"AMOUNT_LIMIT\" =&gt; [\n            \"code\" =&gt; 400015,\n            \"wx_message\" =&gt; \"Amount limit\",\n            \"error_message\" =&gt; \"é‡‘é¢è¶…é™æˆ–è¢«å¾®ä¿¡é£æ§æ‹¦æˆª\"\n        ],\n\n        .....\n    ];\n\n    if (array_key_exists($code, $errorCodeMappins)) {\n        packApiData(\n            $errorCodeMappins[$code]['code'],\n            $errorCodeMappins[$code]['wx_message'],\n            [],\n            $errorCodeMappins[$code]['error_message']\n        );\n    }\n\n    packApiData(\n        999999,\n        \"undefined message\",\n        [],\n        \"æœªçŸ¥é”™è¯¯\"\n    );\n}</code></pre>\n<p>å»ºè®®<code>errorCodeMappins</code>ä¸è¦æ”¾åœ¨å‡½æ•°å†…ï¼Œå¯ä»¥æ”¾åœ¨ç±»é¡¶éƒ¨æˆ–è€…ä¸“é—¨æšä¸¾ç±»ã€‚<br>é€šè¿‡errorCode å¯ä»¥é¿å…è°ƒæ•´ä¸»æµç¨‹ä»£ç ï¼Œèƒ½å¤Ÿä¿è¯ä¸»æµç¨‹çš„ä»£ç æ¯”è¾ƒç²¾ç®€ä¹Ÿèƒ½å¯¹ä¸åŒçš„codeè¿›è¡Œé”™è¯¯çš„å®šä¹‰</br></p>\n<pre><code>if ($code == \"SEND_FAILED\") {\n    // ä»˜æ¬¾é”™è¯¯,è¦æŸ¥å•æ¥çœ‹æœ€ç»ˆç»“æœ\n    if ($orderInfo[1]['status'] == 'SUCCESS') {\n        // è¿˜æ˜¯æˆåŠŸç»™äº†ï¼Œæ‰£å›ä½™é¢\n        PDOQuery($dbcon, 'UPDATE user SET money=money-? WHERE open_id=?', [$payAmount, $openId], [PDO::PARAM_INT, PDO::PARAM_STR]);\n        packApiData(200, 'success', [$orderInfo[1]]);\n    } else {\n        packApiData(400017, 'Weixin pay failed', [], 'å¾®ä¿¡æ”¯ä»˜ä»˜æ¬¾å¤±è´¥');\n    }\n}\n\npackApiDataByOrderError($code);</code></pre>\n<h2>åœ¨åˆé€‚çš„åœºæ™¯ä½¿ç”¨è®¾è®¡æ¨¡å¼</h2>\n<p>ä¸Šè¿°å¯èƒ½åªèƒ½é’ˆå¯¹é”™è¯¯ç è¿›è¡Œæ”¹é€ ï¼Œå¦‚æœä¸‡ä¸€æˆ‘ä»¬éœ€è¦ä¸åŒçš„é”™è¯¯è¿›è¡Œé€»è¾‘å¤„ç†è¿˜æ€ä¹ˆåŠã€‚è¿™æ—¶å€™å¯ä»¥è€ƒè™‘ç”¨è®¾è®¡æ¨¡å¼ (æ¯”å¦‚ç”¨ä»¥å¤šæ€å–ä»£æ¡ä»¶è¡¨è¾¾å¼)</p>\n<blockquote>\n <code>è®¾è®¡æ¨¡å¼</code>å›ºå¥½ä½†ä¸è¦è¿‡åº¦ä½¿ç”¨ï¼Œä¸ç„¶æ•´ä¸ªé¡¹ç›®æ›´éš¾ç»´æŠ¤ï¼Œä½ è¦åšä¿¡æœªæ¥çš„ä½ é˜Ÿå‹ä¸çŸ¥é“æ˜¯ä»€ä¹ˆæ ·çš„ç”Ÿç‰©\n</blockquote>\n<p><img src=\"https://segmentfault.com/img/bVbLqT9\" alt=\"image.png\" title=\"image.png\" /></p>\n<pre><code>$callbackCodeMappings = [\n    \"SEND_FAILED\" =&gt; OrderSendFailed::class,\n];\n\nif (array_key_exists($code, $callbackCodeMappings)) {\n    $class = new $callbackCodeMappings[$code];\n    $class-&gt;handle();\n}\n\n\ninterface OrderStateImp\n{\n    public function handle($context);\n}\n\nclass OrderSendFailed implements  OrderStateImp\n{\n    public function handle($context)\n    {\n\n    }\n}</code></pre>\n<p><code>$callbackCodeMappings</code>åŒæ ·å»ºè®®é…ç½®ä¸“é—¨æšä¸¾æ–‡ä»¶å†…ã€‚<br>ç»™å‡ºå¾—ä»£ç æ¯”è¾ƒç²—ç³™ï¼Œå…¶å®å¯ä»¥æ›´åŠ å¥å£®æ€§çš„åšä¸€äº›åˆ¤æ–­</br></p>\n<h2>ç»Ÿä¸€å¤„ç†æµ®ç‚¹è¿ç®—ç»“æœ</h2>\n<p>ç”±äºphpæ˜¯å¼±å¯¹è±¡è¯­è¨€ï¼Œæ‰€ä»¥é¢å¯¹ä¸€å †æƒ…å†µæ€»èƒ½å‡ºç°ï¼Œè¿™ä¸ªè®¢å•æ•°æ®æ€ä¹ˆä¸å¯¹äº†ï¼Œæ¥å£æœ‰é—®é¢˜ã€‚</p>\n<pre><code>$int = 0.58; var_dump(intval($int * 100));\noutput:57</code></pre>\n<p>åœ¨æµ®ç‚¹æ•°é‡Œé¢ 58æ˜¯è¢«è§†ä¸º57.999999999999999999999â€¦â€¦9999æ— é™æ¥è¿‘58 <br>å†intvalå¼ºåˆ¶è½¬æ¢ä¹˜æ•´å‹çš„æ—¶å€™å°±é»˜è®¤é‡‡ç”¨æˆªå–æ³•å–æ•´</br></p>\n<p>æ‰€ä»¥æœ€å¥½å…»æˆä¸€ä¸ªå¥½ä¹ æƒ¯æ¯æ¬¡åœ¨è®¡ç®—æµ®ç‚¹æ•°çš„æ—¶å€™ç”¨<br> <a href=\"https://www.php.net/bcMath\" rel=\"nofollow noreferrer\">BC Math</a></br></p>\n<pre><code>$int = 0.58;\nintval(strval($int * 100))</code></pre>\n<p>æˆ–è€…ä½¿ç”¨BC MATH</p>\n<pre><code>bcmul(0.58, 100, 0);</code></pre>\n<p><img src=\"https://segmentfault.com/img/bVbLuVG\" alt=\"image.png\" title=\"image.png\" /></p>\n<h2>é¼“åŠ±ç”¨å…¨å±€é”™è¯¯ç æ¥æ§åˆ¶é”™è¯¯</h2>\n<p>å†™æ¥å£çš„æˆ‘ä»¬å¯¹ä»¥ä¸‹çš„jsonæ ¼å¼ç‰¹åˆ«ç†Ÿæ‚‰</p>\n<pre><code>{\n    \"success\": true,\n    \"error_code\": 0,\n    \"message\": \"\",\n    \"results\": []\n}</code></pre>\n<p>å¯¹ä»¥ä¸‹çš„ä»£ç ä¹Ÿå·²ç»ç†Ÿæ‚‰</p>\n<pre><code>if (***) {\n    $this-&gt;error(999,\"****\", []);\n}</code></pre>\n<p>è¿™æ ·çš„ç»“æœçš„é”™è¯¯ç å®¹æ˜“é‡å¤æ²¡æœ‰ç»Ÿä¸€ç®¡ç†ï¼Œäº‹å®ä¸Šå”¯ä¸€é”™è¯¯ç åº”è¯¥æœ‰ä»¥ä¸‹å¸®åŠ©ã€‚<br>1.å‰ç«¯å¯ä»¥æ ¹æ®é”™è¯¯ç åšé€»è¾‘å¤„ç†<br>2.æ ¹æ®é”™è¯¯ç èƒ½ç›´æ¥å¿«é€Ÿå®šä½åˆ°é”™è¯¯ä»£ç </br></br></p>\n<p>å»ºè®®</p>\n<pre><code>&lt;?php\n\nnamespace App\\ErrorCode;\n\nclass UserErrorCode\n{\n    const USER_DISABLE_ERROR = [\n        \"error_code\" =&gt; 1050001,\n        \"message\" =&gt; \"ç”¨æˆ·å·²è¢«åœç”¨\"\n    ];\n}\n\n$this-&gt;error(UserErrorCode::USER_DISABLE_ERROR);</code></pre>\n<p>é”™è¯¯ç å»ºè®®</p>\n<p>1-2ä½ - é¡¹ç›®ç  | 3-4ä½ - æ¨¡å—ç  | 5-7ä½å…·ä½“ä¸šåŠ¡é”™è¯¯ç </p>\n<h2>å¯é çš„å‘½åè§„èŒƒ</h2>\n<p>ä¸å¯é çš„å‘½åæ€»ä¼šè®©äººè¯¯å¯¼ã€‚<br>æ¯”å¦‚å˜é‡å‘½åä¸ºuserArrayList æˆ‘ä»¥ä¸ºæ˜¯ä¸ªæ•°ç»„åˆ—è¡¨å˜é‡,äº‹å®ä¸Šè¿™ä¸ªç‰¹ä¹ˆæ˜¯ä¸ªå¯¹è±¡åˆ—è¡¨ã€‚</br></p>\n<p>1.åšæœ‰æ„ä¹‰çš„åŒºåˆ†<br>æ¯”å¦‚ <code>singleUserItem</code>è·Ÿ<code>userItem</code>æœ‰å•¥åŒºåˆ« <br>æ¯”å¦‚ <code>getUserList</code>è·Ÿ<code>getUsers</code>æœ‰å•¥åŒºåˆ«<br><img src=\"https://segmentfault.com/img/bVbLnYZ\" alt=\"image.png\" title=\"image.png\" /></br></br></br></p>\n<p>2.å¯ä»¥é€šè¿‡<code>æœç´¢ç¿»è¯‘</code>èƒ½çŸ¥é“çš„å˜é‡å«ä¹‰ <br>ä¸è¦æŠŠå˜é‡è´´å…¥<code>æœç´¢ç¿»è¯‘</code>ä¼šå‡ºç°ä¸ƒä¸ƒå…«å…«çš„ä¸œè¥¿<br>3.å¦‚æœçœŸçš„ä¸çŸ¥é“è¯¥æ€ä¹ˆç¿»è¯•è¯•ç”¨æ‹¼éŸ³æŠŠåˆ«ç¡¬å‡¹äº†<br>æ¯”å¦‚ä¹‹å‰åš<code>ç™¾åº¦</code>çš„ä¸€ä¸ªæ¥å£å¯¹æ¥<br>å˜é‡å‘½åä¸º<code>hundredDegree</code>è€Œä¸æ˜¯<code>baidu</code><br><img src=\"https://segmentfault.com/img/bVbLq6p\" alt=\"image.png\" title=\"image.png\"><br>å…¶ä»–çš„å¯ä»¥å‚ç…§ã€Šä»£ç ç®€æ´ä¹‹é“ã€‹</br></img></br></br></br></br></br></p>\n<h2>æ“…ç”¨middleware</h2>\n<p>middlewareå¯ä»¥ç†è§£æˆè§‚å¯Ÿè€…æ¨¡å¼ï¼Œæˆ‘ä»¬å¼€å‘çš„æ¥å£æ€»ä¼šé‡åˆ°å¾ˆå¤šåŒæ ·æ“ä½œï¼Œæ¯”å¦‚<br>1.èº«ä»½æ£€æµ‹<br>2.æƒé™åˆ¤æ–­<br>3.è¯·æ±‚å‚æ•°filterè°ƒæ•´<br>4.è®°å½•æ¥å£ä¿¡æ¯<br>5.æ¥å£é™æµ<br>æˆ‘è§è¿‡æŒ¨ä¸ªæ¥å£å»å®ç°ã€ä¹Ÿè§è¿‡åˆå§‹åŒ–ä¸€ä¸ªControllerBaseçš„ç±»ï¼Œå®ç°è¿™äº›ï¼Œå­ç±»çš„Controllerå»ç»§æ‰¿è¿™äº›ã€‚<br>å…¶å®æˆ‘ä»¬å¯ä»¥æŠ½ç¦»æˆmiddlewareå»å®ç°<br><img src=\"https://segmentfault.com/img/bVbLuyc\" alt=\"image.png\" title=\"image.png\" /></br></br></br></br></br></br></br></br></p>\n<p>å¥½å¤„å¯ä»¥æ ¹æ®ä¸åŒæ¥å£å¯¹middlewareè¿›è¡Œç»„åˆé€‰æ‹©ï¼Œè€Œä¸æ˜¯å¯¹ä»£ç è¿›è¡Œå„ç‰¹æ®ŠåŒ–å¤„ç†.</p>\n<h2>å‡½æ•°çš„å•ä¸€èŒè´£</h2>\n<p>æœ€æœ€æœ€æœ€åä¹Ÿæ˜¯æœ€é‡è¦çš„ï¼Œä»£ç çš„æ¶å¿ƒå¤§å¤šæ•°æ¥æºäºå‡½æ•°çš„èŒè´£ä¸æ¸…æ™°ï¼Œæœ‰å…¨éƒ½å¡åœ¨ä¸€èµ·çš„ã€ä¸œä¸€å—è¥¿ä¸€å—çš„ã€‚<br>å…¶å®å…³äºå•ä¸€èŒè´£æœ‰å¾ˆå¤šæ–‡ç« åœ¨æè¿°ï¼Œå¦‚ä½•å»æ£€éªŒæˆ–è€…å»å†™ç¬¦åˆæ ‡å‡†çš„å•ä¸€èŒè´£ã€‚<br><strong><em>ç”»æµç¨‹å›¾</em></strong><br>å¦‚æœä½ èƒ½æŠŠä¸šåŠ¡çš„æµç¨‹å›¾ç”»çš„ç‰¹åˆ«æ¸…æ™°ï¼Œé‚£ä¹ˆä½ çš„å‡½æ•°çš„èŒè´£ä¹Ÿå°±å®šä¸‹æ¥äº†ã€‚<br><img src=\"https://segmentfault.com/img/bVbLrbr\" alt=\"image.png\" title=\"image.png\" /></br></br></br></br></p>\n<pre><code>&lt;?php\n\n// å…‘æ¢é€»è¾‘\nfunction doExchange()\n{\n    if (checkIsLock()) {\n        \n    }\n    lock();\n    if (!checkUserIsExchange()) {\n        \n    }\n    costUserPoint();\n    exchangeGoods();\n}\n// åˆ¤æ–­æ˜¯å¦æ‚²è§‚é”\nfunction checkIsLock(){}\n// ä¸Šæ‚²è§‚é”\nfunction lock(){}\n// åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å¯ä»¥å…‘æ¢\nfunction checkUserIsExchange(){}\n// æ‰£é™¤ç§¯åˆ†\nfunction costUserPoint(){}\n// å…‘æ¢å•†å“\nfunction exchangeGoods(){}</code></pre>\n<h2>æœ€å</h2>\n<p>ä¸Šè¿°ä¸º<code>æ´ªå…‰å…‰</code>å¿ƒä¸­çš„å¥½å­©å­çš„ä¹ æƒ¯ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ä½ çœ¼ä¸­åå­©å­çš„ä¹ æƒ¯ã€‚å¦‚æœä½ è®¤ä¸ºæ˜¯åå­©å­çš„ä¹ æƒ¯æˆ–è€…è®¤ä¸ºè¿˜æœ‰å…¶ä»–å¥½å­©å­çš„ä¹ æƒ¯æ¬¢è¿è¯„è®º<del>æ’•é€¼</del>è®¨è®ºã€‚<br>æ¯•ç«Ÿ<br><img src=\"https://segmentfault.com/img/bVbLrdc\" alt=\"image.png\" title=\"image.png\" /></br></br></p>\n<p>ç•™ä¸ªå½©è›‹ çœ‹çœ‹å¤§å®¶æ€ä¹ˆå®ç° <br>å†™ä¸€ä¸ªå‡½æ•°<code>returnScoreResult</code>,è¯·æ ¹æ®è¾“å…¥çš„åˆ†æ•°ï¼Œè¿”å›å¯¹åº”çš„æˆç»©çš„ç­‰çº§ã€‚<br>1.å¦‚æœåˆ†æ•°å°äº0æˆ–è€…å¤§äº100 è¿”å› ã€æ— æ•ˆåˆ†æ•°ã€‘<br>2.å¦‚æœåˆ†æ•°&gt;=0ï¼Œ&lt;60 è¿”å› ã€ä¸åŠæ ¼ã€‘<br>3.å¦‚æœåˆ†æ•°&gt;=60ï¼Œ&lt;70 è¿”å›ã€åŠæ ¼ã€‘<br>4.å¦‚æœåˆ†æ•°&gt;=70ï¼Œ&lt;80 è¿”å› ã€ä¸€èˆ¬ã€‘<br>5.å¦‚æœåˆ†æ•°&gt;=80ï¼Œ &lt;90 è¿”å› ã€è‰¯å¥½ã€‘<br>5.å¦‚æœåˆ†æ•°&gt;=90ï¼Œ &lt;100 è¿”å› ã€ä¼˜ç§€ã€‘<br>6.å¦‚æœåˆ†æ•°=100 è¿”å›ã€æ»¡åˆ†ã€‘</br></br></br></br></br></br></br></br></p>","descriptionType":"html","publishedDate":"Mon, 17 Aug 2020 09:01:13 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/bVbLqMU","linkMd5":"6a526c91c6f56ccea5eb637c9da38dee","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx13/cdn65@2020_5/2020/08/24/23-08-22-735_cebd68292a8c6202.webp","destWidth":300,"destHeight":300,"sourceBytes":20447,"destBytes":5946,"author":"é£ä¸­æœ‰phpåšçš„äº‘","articleImgCdnMap":{"https://segmentfault.com/img/bVbLqMU":"https://cdn.jsdelivr.net/gh/myreaderx13/cdn65@2020_5/2020/08/24/23-08-22-735_cebd68292a8c6202.webp","https://segmentfault.com/img/bVbLnDZ":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn44@2020_6/2020/08/24/23-08-39-925_15e73f90245f980f.webp","https://segmentfault.com/img/bVbLnZN":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn10@2020_1/2020/08/24/23-08-42-916_d4723e98ac161e6d.webp","https://segmentfault.com/img/bVbLnGW":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn8@2020_5/2020/08/24/23-08-39-315_adc2628a7dd7bf8a.webp","https://segmentfault.com/img/bVbLnYJ":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn2@2020_2/2020/08/24/23-08-43-211_4c945cb1f7458133.webp","https://segmentfault.com/img/bVbLqQQ":"https://cdn.jsdelivr.net/gh/myreaderx14/cdn42@2020_3/2020/08/24/23-08-28-490_cccdf6bf3e166584.webp","https://segmentfault.com/img/bVbLqNT":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn58@2020_5/2020/08/24/23-08-32-542_96997f4a7107446a.webp","https://segmentfault.com/img/bVbLqT9":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn58@2020_3/2020/08/24/23-08-28-734_c26934c85deabe10.webp","https://segmentfault.com/img/bVbLuVG":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn18@2020_2/2020/08/24/23-08-28-788_0f370e0b14289a17.webp","https://segmentfault.com/img/bVbLnYZ":"https://cdn.jsdelivr.net/gh/myreaderx32/cdn5@2020_3/2020/08/24/23-08-43-205_580793b106d90c39.webp","https://segmentfault.com/img/bVbLq6p":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn20@2020_5/2020/08/24/23-08-45-396_546149266b4954c9.webp","https://segmentfault.com/img/bVbLuyc":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn32@2020_1/2020/08/24/23-08-39-566_da9fdf1e5cbe5397.webp","https://segmentfault.com/img/bVbLrbr":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn14@2020_6/2020/08/24/23-08-44-242_8fce31e013f973d0.webp","https://segmentfault.com/img/bVbLrdc":"https://cdn.jsdelivr.net/gh/myreaderx25/cdn70@2020_5/2020/08/24/23-08-43-038_f7428127a3a50bf0.webp"},"publishedOrCreatedDate":1598310388564},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"BashæŠ€å·§ï¼šæŠŠå˜é‡èµ‹å€¼ä¸ºæ¢è¡Œç¬¦ï¼Œåˆ¤æ–­æ–‡ä»¶æ˜¯å¦ä»¥æ¢è¡Œç¬¦ç»“å°¾","link":"https://segmentfault.com/a/1190000023553682","description":"<h2>æŠŠå˜é‡èµ‹å€¼ä¸ºæ¢è¡Œç¬¦</h2>\n<p>åœ¨ bash ä¸­ï¼Œå¦‚æœè¦æŠŠå˜é‡èµ‹å€¼ä¸ºæ¢è¡Œç¬¦ï¼Œå†™ä¸º <code>'\\n'</code> æ²¡æœ‰æ•ˆæœï¼Œéœ€è¦å†™ä¸º <code>$'\\n'</code>ã€‚å…·ä½“ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"bash\">$ newline='\\n'\n$ echo $newline\n\\n\n$ newline=$'\\n'\n$ echo $newline\n</code></pre>\n<p>å¯ä»¥çœ‹åˆ°ï¼ŒæŠŠ <em>newline</em> å˜é‡èµ‹å€¼ä¸º 'n'ï¼Œå¾—åˆ°çš„æ˜¯ <em>n</em> è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯æ¢è¡Œç¬¦è‡ªèº«ã€‚</p>\n<p>è¿™æ˜¯ bash å’Œ C è¯­è¨€ä¸ä¸€æ ·çš„åœ°æ–¹ã€‚ <br>åœ¨ C è¯­è¨€ä¸­ï¼Œ'n' å¯¹åº”æ¢è¡Œç¬¦è‡ªèº«ï¼Œåªæœ‰ä¸€ä¸ªå­—ç¬¦ï¼›è€Œ \"n\" å¯¹åº”ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ <br>ä½†æ˜¯åœ¨ bash ä¸­ï¼Œ'n' ä¹Ÿæ˜¯å¯¹åº”ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</br></br></p>\n<p>æŠŠ <em>newline</em> èµ‹å€¼ä¸º <code>$'\\n'</code>ï¼Œå°±èƒ½è·å–åˆ°æ¢è¡Œç¬¦è‡ªèº«ã€‚æŸ¥çœ‹ man bash å¯¹è¿™ä¸ªå†™æ³•çš„è¯´æ˜å¦‚ä¸‹ï¼š</p>\n<blockquote>\n Words of the form $'string' are treated specially. The word expands to string, with backslash-escaped characters replaced as specified by the ANSI C standard. Backslash escape sequences, if present, are decoded as follows:\n</blockquote>\n<pre><code>    \\n     new line\n    \\r     carriage return\n    \\t     horizontal tab\n    \\'     single quote</code></pre>\n<blockquote>\n The expanded result is single-quoted, as if the dollar sign had not been present.\n</blockquote>\n<p>å³ï¼Œ<code>$'string'</code> è¿™ä¸ªå†™æ³•å¯ä»¥ä½¿ç”¨ C è¯­è¨€çš„è½¬ä¹‰å­—ç¬¦æ¥è·å–åˆ°å¯¹åº”çš„å­—ç¬¦è‡ªèº«ã€‚</p>\n<h2>åˆ¤æ–­æ–‡ä»¶çš„æœ€åä¸€è¡Œæ˜¯å¦ä»¥æ¢è¡Œç¬¦ç»“å°¾</h2>\n<p>åœ¨ Linux ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤æ¥åˆ¤æ–­æ–‡ä»¶çš„æœ€åä¸€è¡Œæ˜¯å¦ä»¥æ¢è¡Œç¬¦ç»“å°¾ï¼š</p>\n<pre><code class=\"bash\">test -n \"$(tail filename -c 1)\"</code></pre>\n<p>è¿™é‡Œä½¿ç”¨ <code>tail filename -c 1</code> å‘½ä»¤è·å–åˆ° <em>filename</em> æ–‡ä»¶çš„æœ€åä¸€ä¸ªå­—ç¬¦ã€‚</p>\n<p>å®é™…ä½¿ç”¨æ—¶ï¼Œéœ€è¦æŠŠ <em>filename</em> æ¢æˆå…·ä½“è¦åˆ¤æ–­çš„æ–‡ä»¶åã€‚</p>\n<p><code>tail</code> å‘½ä»¤å¯ä»¥è·å–æ–‡ä»¶æœ«å°¾çš„å†…å®¹ã€‚å®ƒçš„ <code>-c</code> é€‰é¡¹æŒ‡å®šè¦è·å–æ–‡ä»¶æœ«å°¾çš„å¤šå°‘ä¸ªå­—èŠ‚ã€‚</p>\n<p>æŸ¥çœ‹ man tail å¯¹ <code>-c</code> é€‰é¡¹çš„è¯´æ˜å¦‚ä¸‹ï¼š</p>\n<blockquote>\n <strong>-c, --bytes=K</strong>\n <p>output the last K bytes; alternatively, use -c +K to output bytes starting with the Kth of each file.</p>\n</blockquote>\n<p>å³ï¼Œ<code>tail -c 1</code> å‘½ä»¤æŒ‡å®šè·å–æ‰€ç»™æ–‡ä»¶çš„æœ€åä¸€ä¸ªå­—ç¬¦ã€‚</p>\n<p>è·å–åˆ°æ–‡ä»¶çš„æœ€åä¸€ä¸ªå­—ç¬¦åï¼Œè¦åˆ¤æ–­è¯¥å­—ç¬¦æ˜¯ä¸æ˜¯æ¢è¡Œç¬¦ã€‚è¿™é‡Œä¸èƒ½ç›´æ¥åˆ¤æ–­è¯¥å­—ç¬¦æ˜¯å¦ç­‰äºæ¢è¡Œç¬¦ï¼Œè€Œæ˜¯è¦åˆ¤æ–­è¯¥å­—ç¬¦æ˜¯å¦ä¸ºç©ºã€‚</p>\n<p>åŸå› åœ¨äºï¼Œä½¿ç”¨ <code>$(tail filename -c 1)</code> å‘½ä»¤æ›¿æ¢æ¥è·å–å†…éƒ¨å‘½ä»¤çš„è¾“å‡ºç»“æœæ—¶ï¼Œbash ä¼šå»æ‰æœ«å°¾çš„æ¢è¡Œç¬¦ã€‚</p>\n<p>æ‰€ä»¥å½“æ–‡ä»¶çš„æœ€åä¸€è¡Œä»¥æ¢è¡Œç¬¦ç»“å°¾æ—¶ï¼Œ<code>$(tail filename -c 1)</code> å‘½ä»¤æ›¿æ¢ä¼šå»æ‰è·å–åˆ°çš„æ¢è¡Œç¬¦ï¼Œæœ€ç»ˆç»“æœä¸ºç©ºï¼Œå¹¶ä¸ä¼šè¿”å›æ¢è¡Œç¬¦è‡ªèº«ã€‚</p>\n<p>æŸ¥çœ‹ man bash å¯¹å‘½ä»¤æ›¿æ¢ï¼ˆcommand substitutionï¼‰çš„è¯´æ˜å¦‚ä¸‹ï¼š</p>\n<blockquote>\n Command substitution allows the output of a command to replace the command name. There are two forms:\n</blockquote>\n<pre><code>        $(command)\n    or\n        `command`</code></pre>\n<blockquote>\n Bash performs the expansion by executing command and replacing the command substitution with the standard output of the command, with any trailing newlines deleted. Embedded newlines are not deleted, but they may be removed during word splitting.\n</blockquote>\n<p>å¯ä»¥çœ‹åˆ°ï¼Œç»è¿‡å‘½ä»¤æ›¿æ¢åï¼Œä¼šå»æ‰æœ«å°¾çš„æ¢è¡Œç¬¦ã€‚</p>\n<p>ç”±äº <code>$(tail filename -c 1)</code> å‘½ä»¤æ›¿æ¢ä¼šå»æ‰æœ«å°¾çš„æ¢è¡Œç¬¦ï¼Œè¿™é‡Œä½¿ç”¨ <code>test -n</code> æ¥åˆ¤æ–­æœ€ç»ˆç»“æœæ˜¯å¦ä¸ºç©ºå­—ç¬¦ä¸²ã€‚</p>\n<p>å¦‚æœæ–‡ä»¶æœ€åä¸€è¡Œä»¥æ¢è¡Œç¬¦ç»“å°¾ï¼Œé‚£ä¹ˆ <code>$(tail filename -c 1)</code> çš„ç»“æœä¸ºç©ºï¼Œ<code>test -n</code> å‘½ä»¤ä¼šè¿”å› 1ï¼Œä¹Ÿå°±æ˜¯ falseã€‚</p>\n<p>å¦‚æœæ–‡ä»¶æœ€åä¸€è¡Œæ²¡æœ‰ä»¥æ¢è¡Œç¬¦ç»“å°¾ï¼Œé‚£ä¹ˆ <code>$(tail filename -c 1)</code> çš„ç»“æœä¸ä¸ºç©ºï¼Œ<code>test -n</code> å‘½ä»¤ä¼šè¿”å› 0ï¼Œä¹Ÿå°±æ˜¯ trueã€‚</p>\n<p>å¯ä»¥æ ¹æ®å®é™…éœ€è¦ï¼Œæ”¹ç”¨ <code>test -z</code> æ¥åˆ¤æ–­ã€‚å¦‚æœæ–‡ä»¶æœ€åä¸€è¡Œä»¥æ¢è¡Œç¬¦ç»“å°¾ï¼Œ<code>$(tail filename -c 1)</code> çš„ç»“æœä¸ºç©ºï¼Œ<code>test -z</code> å‘½ä»¤ä¼šè¿”å› 0ï¼Œä¹Ÿå°±æ˜¯ trueã€‚</p>","descriptionType":"html","publishedDate":"Mon, 17 Aug 2020 04:00:00 +0000","feedId":6615,"bgimg":"","linkMd5":"d04e541e8e5edb37890557d2eb089a57","bgimgJsdelivr":"","metaImg":"","author":"éœœé±¼ç‰‡","publishedOrCreatedDate":1598310388564},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"å›¾è§£ä¸¤æ•°ä¹‹å’Œï¼šåŒæŒ‡é’ˆæ³•","link":"https://segmentfault.com/a/1190000023552474","description":"<p><img src=\"https://segmentfault.com/img/bVbKYWU\" alt=\"image\" title=\"image\" /></p>\n<p>ä¸¤æ•°ä¹‹å’Œæ˜¯ä¸€é“éå¸¸ç»å…¸ï¼Œä¹Ÿéå¸¸é«˜é¢‘çš„é¢è¯•é¢˜ï¼Œé¢˜ç›®å¤§æ„å¦‚ä¸‹ï¼š</p>\n<blockquote>\n ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„\n <code>nums</code>&nbsp;å’Œä¸€ä¸ªç›®æ ‡å€¼\n <code>target</code>ï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼çš„é‚£ä¸¤ä¸ªæ•´æ•°ï¼Œå¹¶è¿”å›ä»–ä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚\n <br>case:<br>ç»™å®š <code>nums = [2, 1, 7, 11, 15], target = 9</code><br>å› ä¸º <code>nums[0] + nums[2] = 2 + 7 = 9</code><br>æ‰€ä»¥è¿”å› <code>[0, 2]</code></br></br></br></br>\n</blockquote>\n<p>ä¹‹å‰æˆ‘ä»¬æ¢è®¨äº†è¿™ä¸ªé—®é¢˜çš„æš´åŠ›è¿ç®—æ³•å’Œå“ˆå¸Œè¡¨æ³•ï¼Œä»Šå¤©æˆ‘ä»¬ä½¿ç”¨åŒæŒ‡é’ˆæ³•æ¥è§£å†³å®ƒã€‚</p>\n<h2>å¤ªé•¿ä¸çœ‹ç‰ˆ</h2>\n<ul>\n <li>é¦–å…ˆæ’åºæ•°ç»„ï¼›</li>\n <li>ä½¿ç”¨<code>left</code>ï¼Œ<code>right</code>ä¸¤ä¸ªæŒ‡é’ˆï¼›</li>\n <li>æ¯”è¾ƒ<code>target</code>ä¸<code>left</code>å€¼åŠ <code>right</code>å€¼çš„å’Œï¼Œç§»åŠ¨å¯¹åº”çš„æŒ‡é’ˆï¼›</li>\n <li>åŒæŒ‡é’ˆè§£æ³•çš„æ—¶é—´å¤æ‚åº¦å–å†³äºå¯¹åº”çš„æ’åºç®—æ³•ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(n)ã€‚</li>\n</ul>\n<h2>ä»€ä¹ˆæ˜¯åŒæŒ‡é’ˆï¼Ÿ</h2>\n<p>åŒæŒ‡é’ˆå’Œå¿«é€Ÿæ’åºã€å†’æ³¡æ’åºç­‰å…·ä½“ç®—æ³•ä¸åŒã€‚å®ƒæ›´æ¥è¿‘äºä¸€ç§æ€ï¼ˆtÃ oï¼‰è·¯ï¼Œä¸€ç§ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆäº’ç›¸é…åˆæ¥å­˜å‚¨èŠ‚ç‚¹ä»¥ä¾¿äºè¿ç®—çš„æŠ€å·§ã€‚</p>\n<p>åŒæŒ‡é’ˆæ³•é€‚ç”¨äºæ•°ç»„ã€é“¾è¡¨ç­‰çº¿æ€§æ•°æ®ç»“æ„ï¼Œå¸¸ç”¨çš„æ€è·¯æœ‰ï¼šç¢°æ’æŒ‡é’ˆã€æ»‘åŠ¨çª—å£ã€å¿«æ…¢æŒ‡é’ˆç­‰ã€‚</p>\n<p>åœ¨ä¸¤æ•°ä¹‹å’Œè¿™ä¸ªcaseä¸­æˆ‘ä»¬ä½¿ç”¨<strong>ç¢°æ’æŒ‡é’ˆ</strong>çš„æ–¹å¼æ¥å®ç°ï¼Œå…¶å®ƒä¸¤ç§å¥—è·¯ä¼šåœ¨åç»­æ–‡ç« ä¸­ä»‹ç»ã€‚</p>\n<h3>0.æ’åº</h3>\n<p>æ‰€è°“ç¢°æ’æŒ‡é’ˆï¼Œæ˜¯æŒ‡åœ¨æœ‰åºæ•°ç»„ä¸­å®šä¹‰<code>left</code>ï¼ˆæ•°ç»„èµ·å§‹ä½ç½®ï¼‰ã€<code>right</code>ï¼ˆæ•°ç»„ç»ˆæ­¢ä½ç½®ï¼‰ä¸¤ä¸ªæŒ‡é’ˆï¼Œåœ¨éå†æ—¶æ ¹æ®å¯¹åº”æ¡ä»¶çš„ä¸åŒæ¥åˆ¤æ–­åº”è¯¥ç§»åŠ¨å“ªä¸ªæŒ‡é’ˆï¼Œè¿›è€Œä»æ•°ç»„ä¸¤ç«¯éå†æ•°ç»„ã€‚</p>\n<p>æ‰€ä»¥åœ¨ä¸¤æ•°ä¹‹å’Œä¸­æˆ‘ä»¬éœ€è¦å…ˆå°†ç›®æ ‡æ•°ç»„è¿›è¡Œæ’åºï¼š</p>\n<hr>\n <p><img src=\"https://segmentfault.com/img/bVbKY8w\" alt=\"image\" title=\"image\" /></p>\n <hr>\n  <p>æ’åºç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å†³å®šäº†æ•´ä¸ªè®¡ç®—çš„æ—¶é—´å¤æ‚åº¦ã€‚å› ä¸ºåŒæŒ‡é’ˆéå†çš„å¤æ‚åº¦æ˜¯O(n)ã€‚</p>\n  <h3>1.åˆ›å»ºåŒæŒ‡é’ˆ</h3>\n  <p>åœ¨æ’å¥½åºçš„æ•°ç»„ï¼ˆä»¥ä¸‹ç®€ç§°æ•°ç»„ï¼‰ä¸¤ç«¯åˆ†åˆ«åˆ›å»º<code>left</code>ã€<code>right</code>æŒ‡é’ˆï¼š</p>\n  <hr>\n   <p><img src=\"https://segmentfault.com/img/bVbKY8B\" alt=\"image\" title=\"image\" /></p>\n   <hr>\n    <h3>2.å·¦ç§»å³æŒ‡é’ˆ</h3>\n    <p>æ­¤æ—¶<code>left</code>å€¼ä¸<code>right</code>å€¼ä¹‹å’Œï¼ˆä»¥ä¸‹ç®€ç§°<code>sum</code>ï¼‰å¤§äº<code>target</code>ï¼Œæ­¤æ—¶åº”è¯¥å°†<code>right</code>å·¦ç§»ä¸€ä½ï¼Œå‡å°<code>sum</code>ä½¿å…¶æ›´æ¥è¿‘<code>target</code>ã€‚</p>\n    <p>ä»è¿™é‡Œå°±å¯ä»¥çœ‹å‡ºï¼Œä¸ºä»€ä¹ˆå¯¹æœ‰åºæ•°ç»„æ‰é€‚ç”¨ç¢°æ’æŒ‡é’ˆã€‚</p>\n    <hr>\n     <p><img src=\"https://segmentfault.com/img/bVbKY8C\" alt=\"image\" title=\"image\" /></p>\n     <hr>\n      <h3>3.ç»§ç»­éå†æ•°ç»„</h3>\n      <p>åœ¨è¿™ä¸ªcaseä¸­æˆ‘ä»¬éœ€è¦ç»§ç»­éå†æ•°ç»„ï¼Œç›´åˆ°<code>right</code>æŒ‡é’ˆæŒ‡å‘7ï¼Œæ­¤æ—¶<code>sum</code>å°äº<code>target</code>ï¼š</p>\n      <hr>\n       <p><img src=\"https://segmentfault.com/img/bVbKY8E\" alt=\"image\" title=\"image\" /></p>\n       <hr>\n        <h3>4.å³ç§»å·¦æŒ‡é’ˆ</h3>\n        <p>ä¸æ­¥éª¤2ç±»ä¼¼ï¼Œå½“<code>sum</code>å°äº<code>target</code>æ—¶æˆ‘ä»¬éœ€è¦å³ç§»å·¦æŒ‡é’ˆï¼Œå¢åŠ <code>sum</code>å€¼ä½¿å¾—ä¸¤è€…æ›´åŠ æ¥è¿‘ï¼š</p>\n        <hr>\n         <p><img src=\"https://segmentfault.com/img/bVbKY8G\" alt=\"image\" title=\"image\" /></p>\n         <hr>\n          <h3>5.åŒ¹é…æˆåŠŸï¼</h3>\n          <p>åœ¨å½“å‰caseä¸­ï¼Œ<code>left</code>æŒ‡å‘2æ—¶<code>sum</code>ä¸<code>target</code>ç›¸ç­‰ï¼ŒåŒ¹é…æˆåŠŸï¼<br>æ­¤æ—¶è¿”å›<code>left</code>å€¼å’Œ<code>right</code>å€¼åœ¨åŸæ•°ç»„ä¸­çš„ä¸‹æ ‡å³å¯ï¼š</br></p>\n          <hr>\n           <p><img src=\"https://segmentfault.com/img/bVbKY8H\" alt=\"image\" title=\"image\" /></p>\n           <hr>\n            <h3>6.å®Œæ•´ç¤ºä¾‹ä»£ç </h3>\n            <p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>\n            <hr>\n             <p><img src=\"https://segmentfault.com/img/bVbKY8I\" alt=\"image\" title=\"image\" /></p>\n             <hr>\n              <p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºJavaScriptå¼•ç”¨ç±»å‹çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬é¦–å…ˆæ‹·è´äº†<code>nums</code>ï¼Œæ‰ä½¿ç”¨<code>Array.sort</code>å¯¹æ‹·è´æ•°ç»„è¿›è¡Œæ’åºã€‚</p>\n              <p>å¦å¤–ï¼Œå¯¹äº<code>nums=[1,2,2,3],target=4</code>è¿™ç§caseï¼Œå…¶æœŸæœ›çš„è¿”å›å€¼æ˜¯<code>[1,2]</code>è€Œä¸æ˜¯<code>[1,1]</code>æˆ–è€…<code>[2,2]</code>ã€‚æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†<code>Array.lastIndexOf()</code>è¿™ä¸ªAPIã€‚</p>\n              <h2>å°ç»“</h2>\n              <ul>\n               <li>é‡‡ç”¨ç¢°æ’åŒæŒ‡é’ˆè¿›è¡Œè¿ç®—ï¼›</li>\n               <li>ç¢°æ’åŒæŒ‡é’ˆè¿ç®—çš„æ—¶é—´å¤æ‚åº¦å–å†³äºå…·ä½“çš„æ’åºç®—æ³•ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(n)ï¼›</li>\n               <li>ç¢°æ’æŒ‡é’ˆéœ€è¦å¯¹æ•°ç»„è¿›è¡Œæ’åºï¼›</li>\n               <li>æ’åºæ—¶æ³¨æ„ä¸è¦æ±¡æŸ“åŸæ•°ç»„ï¼›</li>\n               <li>è¿”å›ç»“æœéœ€è¦è€ƒè™‘æ•°ç»„å«æœ‰ç›¸åŒé¡¹ï¼›</li>\n              </ul>\n              <p>å†å¤ä¹ ä¸€ä¸‹æš´åŠ›è¿ç®—æ³•å’Œå“ˆå¸Œè¡¨æ³•ï¼š</p>\n              <ul>\n               <li>åŒå±‚<code>for</code>å¾ªç¯æš´åŠ›è¿ç®—ç®€å•ç›´è§‚ï¼Œæ—¶é—´å¤æ‚åº¦O(n<sup>2</sup>)ã€ç©ºé—´å¤æ‚åº¦O(1)ï¼›</li>\n               <li>å“ˆå¸Œè¡¨æ³•æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦éƒ½æ˜¯O(n)ï¼›</li>\n               <li>è€ƒå¯Ÿç‚¹æ˜¯å¯¹å“ˆå¸Œè¡¨è¿™ç§æ•°æ®ç»“æ„çš„ç†Ÿæ‚‰ç¨‹åº¦ï¼›</li>\n               <li>å¤šä¸€ç§è§£æ³•å°±å¤šä¸€åˆ†èƒœç®—ï¼›</li>\n               <li>æ•´ä½“éš¾åº¦ä¸é«˜ã€‚</li>\n              </ul>\n              <hr>\n               <p><strong><em>ä¸€å…¥JSæ·±ä¼¼æµ·ï¼Œå¸Œæœ›è¿™ä¸ªä¸“æ èƒ½åœ¨ä½ ä¹˜é£ç ´æµªçš„æ—…é€”ä¸­æœ‰æ‰€å¸®åŠ©ã€‚æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šã€ŒJSæ¼«æ­¥æŒ‡å—ã€ï¼Œæ›´å¤šç²¾å½©ç­‰å¾…æ‚¨å‘ç°ï¼</em></strong></p>\n               <p><img src=\"https://segmentfault.com/img/bVbKY9n\" alt=\"image\" title=\"image\" /></p>\n              </hr>\n             </hr>\n            </hr>\n           </hr>\n          </hr>\n         </hr>\n        </hr>\n       </hr>\n      </hr>\n     </hr>\n    </hr>\n   </hr>\n  </hr>\n </hr>\n</hr>","descriptionType":"html","publishedDate":"Fri, 14 Aug 2020 01:00:00 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/bVbKYWU","linkMd5":"518d797df1c7c9d30e2acaaec433d26b","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn69@2020_4/2020/08/24/23-08-23-184_0d30b74097bcfe0f.webp","destWidth":800,"destHeight":450,"sourceBytes":209291,"destBytes":39226,"author":"ç‹äº®hengg","articleImgCdnMap":{"https://segmentfault.com/img/bVbKYWU":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn69@2020_4/2020/08/24/23-08-23-184_0d30b74097bcfe0f.webp","https://segmentfault.com/img/bVbKY8w":"https://cdn.jsdelivr.net/gh/myreaderx14/cdn78@2020_4/2020/08/24/23-08-33-533_03ba1729d180dc44.webp","https://segmentfault.com/img/bVbKY8B":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn84@2020_5/2020/08/24/23-08-42-674_0778a1e1cb410796.webp","https://segmentfault.com/img/bVbKY8C":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn90@2020_1/2020/08/24/23-08-43-089_00fb40bbb61603de.webp","https://segmentfault.com/img/bVbKY8E":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn94@2020_3/2020/08/24/23-08-43-312_99173a1bbea09ba0.webp","https://segmentfault.com/img/bVbKY8G":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn1@2020_1/2020/08/24/23-08-31-021_13b83779e9282377.webp","https://segmentfault.com/img/bVbKY8H":"https://cdn.jsdelivr.net/gh/myreaderx25/cdn6@2020_2/2020/08/24/23-08-31-343_f69c4c9c378440c7.webp","https://segmentfault.com/img/bVbKY8I":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn10@2020_5/2020/08/24/23-08-31-367_4e367cfe16dd2bc7.webp","https://segmentfault.com/img/bVbKY9n":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn98@2020_1/2020/08/24/23-08-33-472_6992bf171c48ab6b.webp"},"publishedOrCreatedDate":1598310388567},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"å¦‚ä½•ä½¿ç”¨åä¸ºäº‘æœåŠ¡ä¸€é”®æ„å»ºéƒ¨ç½²å‘å¸ƒå‰ç«¯å’ŒNode.jsæœåŠ¡","link":"https://segmentfault.com/a/1190000023663451","description":"<h2>å¦‚ä½•ä½¿ç”¨åä¸ºäº‘æœåŠ¡ä¸€é”®æ„å»ºéƒ¨ç½²å‘å¸ƒå‰ç«¯å’ŒNode.jsæœåŠ¡</h2>\n<h2><img src=\"https://segmentfault.com/img/remote/1460000023663455\" alt=\"image.png\" title=\"image.png\" /></h2>\n<h4>æ„å»ºéƒ¨ç½²,ä¸€ç›´æ˜¯ä¸€ä¸ªå¾ˆç¹ççš„è¿‡ç¨‹</h4>\n<ul>\n <li>ä½œä¸ºå¼€å‘,æœ€å®³æ€•é‡åˆ°ç‰ˆæœ¬å‘å¸ƒ,ç‰¹åˆ«æ˜¯å‰ã€åç«¯ä¸€èµ·ä¸Šçº¿å‘å¸ƒ,é¡¹ç›®åˆç‰¹åˆ«å¤šçš„æ—¶å€™</li>\n <li>ä¾‹å¦‚ä½ æœ‰<code>10</code>ä¸ªé¡¹ç›®,å‰åç«¯éƒ½è¦åŒæ—¶å‘å¸ƒ,é‚£ä¹ˆå°±éœ€è¦å¤šæ¬¡åˆå¹¶ä»£ç ã€æ„å»º,é‡å¤å¾ˆå¤šåŠ¨ä½œ..è€Œä¸”è¿˜è¦å»å…³å¿ƒæ„å»ºæœºå™¨ç¯å¢ƒæ˜¯ä¸æ˜¯å˜äº†?é…ç½®æ˜¯å¦èƒ½æ‰›ä½åŒæ—¶æ„å»ºå¤šä¸ªåº”ç”¨,äººä¸ºçš„æ“ä½œæ¬¡æ•°å¤šäº†,å°±å¾ˆéš¾ä¿è¯ä¸‡æ— ä¸€å¤±</li>\n <li>é‚£è¿™ç§å±€é¢æ€ä¹ˆç ´? æ˜¯ä¸æ˜¯è¦è€ƒè™‘ä»æŠ€æœ¯è§’åº¦æ¥ææ•ˆ? å‡å¦‚æˆ‘æŠŠæ‰€æœ‰çš„æ„å»ºã€å‘å¸ƒéƒ½è¿ç§»åˆ°äº‘ç«¯,å¯ä»¥ä¸€é”®<code>push</code>ä»£ç ,ç„¶åè‡ªåŠ¨å®Œæˆæ„å»º,æˆ‘åªè¦æ‰§è¡Œä¸€ä¸ªå‘½ä»¤å°±å¯ä»¥å®Œæˆéƒ¨ç½²,åˆä¸éœ€è¦å…³å¿ƒæœºå™¨é…ç½®å’Œç¯å¢ƒå˜åŒ–,é‚£æˆ‘ä»¬çš„å·¥ä½œæ•ˆç‡æ˜¯ä¸æ˜¯å¯ä»¥å¤§å¤§æå‡?</li>\n</ul>\n<h4>æˆ‘ä¹‹å‰çš„æ„å»ºå‘å¸ƒæµç¨‹</h4>\n<ul>\n <li>ä¹‹å‰æˆ‘æ˜¯ä½¿ç”¨<code>Travis CI</code>å’Œ<code>gitHub</code>ä»¥åŠ<code>docker-compose</code>ç»“åˆè¿›è¡Œä¸€é”®ä»£ç <code>push</code>æ„å»ºå‘å¸ƒ</li>\n <li>ä½†æ˜¯æœ‰ä¸€ä¸ªå¾ˆæ˜æ˜¾çš„é—®é¢˜,<code>gitHub</code>å’Œ<code>Travis</code>è¿™ä¸¤ä¸ªå¹³å°æ˜¯å®Œå…¨ç‹¬ç«‹çš„,ç‰¹åˆ«æ˜¯æˆ‘ä»£ç æ‰˜ç®¡åœ¨<code>gitHub</code>ä¸Šï¼Œæœ‰æ—¶å€™è®¿é—®é€Ÿåº¦è¿˜å¾ˆæ…¢,æ›´è¦å‘½çš„æ˜¯æ²¡æœ‰åœ¨ä¸€ä¸ªå¹³å°ä¸Šå½¢æˆå®Œæ•´çš„é“¾è·¯é—­ç¯</li>\n <li>äºæ˜¯æˆ‘æ‰¾äº†å¾ˆå¤šä¸ªå¹³å°ï¼Œæœ€ç»ˆå‘ç°ï¼Œ<code>åä¸ºäº‘</code>å¯ä»¥æ»¡è¶³æˆ‘çš„éœ€æ±‚,æ—¢å¯ä»¥ä»£ç æ‰˜ç®¡,ä¹Ÿæœ‰å¯é…ç½®çš„è‡ªåŠ¨åŒ–æ„å»ºæµç¨‹,è€Œä¸”è®¿é—®é€Ÿåº¦å¿«,çº¯ä¸­æ–‡ç•Œé¢å‹å¥½</li>\n</ul>\n<h2>æ–°å»ºé¡¹ç›® &amp; è¿ç§»åˆ°åä¸ºäº‘</h2>\n<ul>\n <li>åƒæˆ‘ä»¬å‰ç«¯å’Œ<code>Node.js</code>éƒ½æ˜¯æœ‰ä¸€äº›è„šæ‰‹æ¶ï¼Œä¾‹å¦‚<code>React</code>è¿™ç§æ¡†æ¶,å°±æœ‰å¾ˆå¤šè„šæ‰‹æ¶å¯ä»¥ä¸€é”®ç”Ÿæˆé¡¹ç›®æ¨¡æ¿,è®©ä½ ä¸å†å…³å¿ƒå·¥ç¨‹åŒ–é…ç½®çš„é—®é¢˜,åä¸ºäº‘çš„<code>developer</code>æ¨¡å—ä¹Ÿæä¾›äº†è¿™ä¸ªåŠŸèƒ½<p><img src=\"https://segmentfault.com/img/remote/1460000023663454\" alt=\"image.png\" title=\"image.png\" /></p></li>\n <li>é€‰æ‹©æƒ³è¦çš„æ¨¡æ¿,åƒæˆ‘é€‰æ‹©çš„æ˜¯<code>React</code>+<code>express</code>æ¨¡æ¿,10ç§’é’Ÿå·¦å³å°±ç”Ÿæˆå¥½äº†,æ­¤æ—¶å°±å¯ä»¥åœ¨æˆ‘çš„æ¨¡æ¿äº§ç‰©ä¸­çœ‹<p><img src=\"https://segmentfault.com/img/remote/1460000023663458\" alt=\"image.png\" title=\"image.png\" /></p></li>\n <li>æ­¤æ—¶ä¸‹è½½å‹ç¼©åŒ…,è§£å‹è¿è¡Œä»¥ä¸‹å‘½ä»¤å³å¯å¼€å§‹å¼€å‘</li>\n</ul>\n<p>`npm run install-all <br>npm run dev <br>`</br></br></p>\n<ul>\n <li>æ–°å»ºé¡¹ç›®æ—¶å€™,æˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸Šé¢è¿™ç§æ¨¡å¼å¿«é€Ÿæ ¹æ®æ¨¡ç‰ˆç”Ÿæˆä»£ç ,ä½†æ˜¯æˆ‘ä»Šå¤©æ˜¯è¦æŠŠæˆ‘çš„ä»£ç ä»<code>gitHub</code>è¿ç§»åˆ°åä¸ºäº‘ä¸Šæ‰˜ç®¡,ç„¶ååœ¨åä¸ºäº‘ä¸Šå®Œæˆæ•´ä¸ªå¼€å‘æµç¨‹çš„é—­ç¯</li>\n</ul>\n<h4>å°†æˆ‘<code>gitHub</code>ä»“åº“ä»£ç å¯¼å…¥åˆ°åä¸ºäº‘æ‰˜ç®¡</h4>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023663456\" alt=\"image.png\" title=\"image.png\" /></p>\n<ul>\n <li>è¿›å…¥åä¸ºäº‘<code>devcloud</code>æ¨¡å—,è¾“å…¥æƒ³è¦å¯¼å…¥çš„<code>gitHub</code>ä»“åº“åœ°å€å’Œè´¦å·å¯†ç ï¼ˆå¦‚æœéœ€è¦ï¼‰,ç„¶åå¼€å§‹å¯¼å…¥,å¤§çº¦è€—æ—¶<code>30S</code></li>\n <li>æ­¤æ—¶,åœ¨æœ¬åœ°ç”Ÿæˆ<code>git ssh</code>,å°†å…¬é’¥æ”¾ç½®åˆ°åä¸ºäº‘ä¸Š<p><img src=\"https://segmentfault.com/img/remote/1460000023663462\" alt=\"image.png\" title=\"image.png\" /></p></li>\n <li>æˆ‘ä»¬æ­¤æ—¶å¯ä»¥ç‚¹å‡»ä»£ç ä»“åº“,è¿›å»å°±å¯ä»¥çœ‹åˆ°ä»“åº“è¯¦æƒ…äº†(<code>çº¯ä¸­æ–‡ç•Œé¢,çœŸçš„å‹å¥½</code>)<p><img src=\"https://segmentfault.com/img/remote/1460000023663464\" alt=\"image.png\" title=\"image.png\" /></p></li>\n <li>åœ¨æœ¬åœ°ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å³å¯å®Œæˆ<code>clone</code>å’Œå¯åŠ¨</li>\n</ul>\n<p>`git clone&nbsp;remoteurl <br>cd&nbsp;your projectName <br>npm install <br>npm run dev </br></br></br></p>\n<p>`</p>\n<ul>\n <li>ä»¥ä¸Šå®Œæˆäº†ä»£ç è¿ç§»,ç›®å‰æˆ‘ä»¬ä»£ç å·²ç»æ‰˜ç®¡åˆ°<code>åä¸ºäº‘</code>ä¸Š,ä¸ºäº†å®Œæˆæ•´å¥—ç ”å‘ç¯èŠ‚çš„é—­ç¯,æˆ‘ä»¬éœ€è¦å°†æ„å»ºã€å‘å¸ƒéƒ½è¿ç§»åˆ°<code>åä¸ºäº‘é²²é¹æœåŠ¡å™¨</code>ä¸Š</li>\n</ul>\n<h4>æ”¹å˜æˆ‘çš„æ„å»ºç­–ç•¥</h4>\n<ul>\n <li>æˆ‘ä¹‹å‰æ˜¯åŸºäº<code>gitHub</code>å’Œ<code>Travis CI</code>å’Œ<code>docker-compose</code>å®Œæˆä¸€é”®<code>push</code>ä»£ç ,ç„¶åä¸€é”®å®Œæˆå‘å¸ƒ,ç°åœ¨è¦åœ¨<code>åä¸ºäº‘</code>ä¸Šå®ç°ä¸€å¥—è‡ªåŠ¨åŒ–æ„å»ºæµç¨‹</li>\n</ul>\n<h4>æ„å»ºç­–ç•¥é€‚é…éš¾åº¦æä½,è¿œè¶…æˆ‘çš„æƒ³è±¡</h4>\n<ul>\n <li>æˆ‘çš„é¡¹ç›®æ˜¯ä¸€ä¸ªå‰ç«¯åŸºäº<code>React</code>,åç«¯åŸºäº<code>Node.js</code>çš„<code>express</code>æ¡†æ¶,è·Ÿåä¸ºäº‘çš„<code>devstar</code>çš„æ¨¡æ¿éå¸¸åƒ</li>\n <li>å¦‚ä½•è®¾è®¡è¿™ä¸ªä»»åŠ¡æµ?</li>\n</ul>\n<h4>ç¼–å†™ä»»åŠ¡æµ</h4>\n<ul>\n <li>åŸºäºé¡¹ç›®,æ–°å»ºç¼–è¯‘æ„å»ºä»»åŠ¡<p><img src=\"https://segmentfault.com/img/remote/1460000023663459\" alt=\"image.png\" title=\"image.png\" /></p></li>\n <li>ç¼–å†™ä»»åŠ¡æµä»»åŠ¡æµ,æ‰€è°“ä»»åŠ¡æµ,å°±æ˜¯å®Œæˆä¸€ä¸ª,ç„¶åæ¥ç€ä¸‹ä¸€ä¸ª,åä¸ºäº‘è¿™é‡Œæ¯”è¾ƒè´´å¿ƒ,æ ¹æ®ä¸åŒçš„ç¯å¢ƒè¿›è¡Œäº†åŒºåˆ†ç¯å¢ƒ,ä¸åƒä¼ ç»Ÿçš„æœåŠ¡å™¨,ä½ è¿˜è¦å»è£…<code>dockerã€node.js</code>ç­‰ç­‰è¿™äº›(<code>PS:</code>ä»»åŠ¡æ–°å»ºåå¯ä»¥ä¿®æ”¹ä»»åŠ¡ï½)</li>\n</ul>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023663457\" alt=\"image.png\" title=\"image.png\" /></p>\n<ul>\n <li>è¿™é‡Œé»˜è®¤ä½¿ç”¨äº†åä¸ºçš„é•œåƒæºä»“åº“,è§£å†³äº†å› ä¸ºç¯å¢ƒé…ç½®é—®é¢˜å¯¼è‡´ä¸‹è½½æ…¢çš„é—®é¢˜~</li>\n</ul>\n<h4>å¦‚ä½•ç¼–å†™ä»»åŠ¡æµ?</h4>\n<ul>\n <li>ä»¥æˆ‘çš„ä¸€ä¸ªèµ„æ–™ç½‘ç«™é¡¹ç›®ä¸ºä¾‹å­,åŸºäº<code>docker-compose</code>å‘å¸ƒ,å‰åç«¯éƒ½æ‰“åŒ…åœ¨ä¸€ä¸ªé•œåƒä¸­</li>\n <li>é¦–å…ˆä»£ç <code>push</code>å,æ„å»ºä»»åŠ¡ä¸ä¸€å®šéœ€è¦é©¬ä¸Šæ‰§è¡Œ,è€Œä¸”æˆ‘çš„æ¨é€æ¬¡æ•°å¯èƒ½å¾ˆé¢‘ç¹,æ­¤æ—¶æˆ‘å¯ä»¥è°ƒæˆå®šæ—¶ä»»åŠ¡,è¿˜èƒ½é™åˆ¶æ¬¡æ•°(çœŸçš„å¾ˆè´´å¿ƒ)</li>\n <li><img src=\"https://segmentfault.com/img/remote/1460000023663461\" alt=\"image.png\" title=\"image.png\" /></li>\n</ul>\n<h4>ç¼–å†™dockerfile</h4>\n<ul>\n <li>æ­¤æ—¶å…ˆç¼–å†™<code>dockerfile</code>æ–‡ä»¶,ç”¨äº<code>docker</code>,åŸºäº<code>Node.js 12.16.3</code>ç‰ˆæœ¬çš„é•œåƒ,æŒ‡å®šç«¯å£</li>\n</ul>\n<p>`#å¼•ç”¨é•œåƒ <br>FROM node:12.16.3</br></p>\n<h1>æ‰§è¡Œå‘½ä»¤ï¼Œåˆ›å»ºæ–‡ä»¶å¤¹</h1>\n<p>RUN mkdir -p /usr/www <br>WORKDIR /usr/www <br>COPY . /usr/www <br>RUN npm run build</br></br></br></p>\n<h1>é…ç½®ç¯å¢ƒå˜é‡</h1>\n<p>&nbsp;ENV HOST 0.0.0.0 <br>&nbsp;ENV PORT 8080</br></p>\n<h1>å®šä¹‰ç¨‹åºé»˜è®¤ç«¯å£</h1>\n<p>EXPOSE 8080</p>\n<h1>è¿è¡Œç¨‹åºå‘½ä»¤</h1>\n<p>CMD [\"node\",\"./server/index.js\"] <br>`</br></p>\n<ul>\n <li>æ­¤æ—¶å¯ä»¥æƒ³è±¡,æˆ‘ä»¬æ¨é€ä»£ç å(<code>å¯ä»¥é€‰æ‹©ä»€ä¹ˆåˆ†æ”¯</code>),æ ¹æ®é…ç½®å®šæ—¶è‡ªåŠ¨æ„å»º,ç„¶åå¯ä»¥é€šè¿‡æ¥å£æˆ–è€…æ‰‹åŠ¨å€ŸåŠ©<code>docker-compose</code>å‘½ä»¤è¿›è¡Œä¸€é”®æ›´æ–°å‘å¸ƒ</li>\n <li><img src=\"https://segmentfault.com/img/remote/1460000023663460\" alt=\"image.png\" title=\"image.png\" /></li>\n <li>ç®€å•ä¸‰ä¸ªå‘½ä»¤,å®Œæˆ<code>docker-image</code>çš„åˆ¶ä½œå’Œ<code>push</code>ï¼ˆå…·ä½“å‚æ•°å¯ä»¥å‚è€ƒæç¤ºï¼‰</li>\n <li><img src=\"https://segmentfault.com/img/remote/1460000023663463\" alt=\"image.png\" title=\"image.png\" /></li>\n <li>é¦–å…ˆç™»é™†<code>docker</code>,ç„¶å<code>build</code>æ‰“åŒ…é•œåƒ,æœ€å<code>push</code>å³å¯å®Œæˆæ„å»ºè¿™ä¸€æ­¥,æˆ‘ä»¬æœ¬åœ°å®Œå…¨æ˜¯æ— æ„ŸçŸ¥çš„~ä¹Ÿä¸éœ€è¦è€ƒè™‘é…ç½®å’Œç¯å¢ƒçš„é—®é¢˜</li>\n <li>æ­¤æ—¶æˆ‘ä»¬æ‰‹åŠ¨è§¦å‘æ„å»ºä»»åŠ¡ï¼ˆåƒæˆ‘ä»¬å…¬å¸é¡¹ç›®ç‰¹åˆ«å¤§ï¼Œä¸€å°<code>4æ ¸8G</code>çš„æœºå™¨å¯èƒ½å°±æ‰›ä¸ä½å‡ ä¸ªé¡¹ç›®åŒæ—¶æ„å»ºï¼Œåœ¨è¿™é‡Œå°±ä¸ç”¨æ‹…å¿ƒï¼‰</li>\n <li><img src=\"https://segmentfault.com/img/remote/1460000023663466\" alt=\"image.png\" title=\"image.png\" /></li>\n <li>ç­‰å¾…ä¸€æ®µæ—¶é—´å,å‘ç°å‘½ä»¤æ‰§è¡Œå®Œæˆ,<code>docker</code>é•œåƒå·²ç»å‘å¸ƒå®Œæˆ</li>\n <li><img src=\"https://segmentfault.com/img/remote/1460000023663465\" alt=\"image.png\" title=\"image.png\" /></li>\n</ul>\n<h4>å‘å¸ƒ</h4>\n<ul>\n <li>ä¸¤ç§æ‰‹æ®µ</li>\n <li>é€šè¿‡<code>ssh</code>è¿æ¥åä¸ºäº‘æœåŠ¡å™¨,æ‰§è¡Œç¼–å†™å¥½çš„<code>docker-compose</code>æ–‡ä»¶</li>\n <li>é€šè¿‡æ¥å£å¸¦<code>token</code>æ–¹å¼(æœ‰æƒé™çš„äººæ‰å¯ä»¥å‘å¸ƒ)è°ƒç”¨,æ‰§è¡Œ<code>docker-compose</code>å‘½ä»¤,è¾¾åˆ°å‘å¸ƒç›®çš„</li>\n <li>æˆ‘ä»¬é‡ç‚¹å…³æ³¨ç¬¬ä¸€ç§,é€šè¿‡<code>ssh</code>è¿æ¥åˆ°<code>åä¸ºäº‘é²²é¹æœåŠ¡å™¨</code></li>\n <li>`<img src=\"https://segmentfault.com/img/remote/1460000023663467\" alt=\"image.png\" title=\"image.png\"> <br>`</br></img></li>\n <li>è¾“å…¥ç”¨æˆ·å’Œ<code>ip</code>åœ°å€å,<code>ssh</code>è¿æ¥æˆåŠŸ,ç¼–å†™<code>docker-compose</code>æ–‡ä»¶</li>\n</ul>\n<p>`version: \"3.7\" <br>services: <br>&nbsp; &nbsp; redis: <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; image: redis:3 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; container_name: redis <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; hostname: redis <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; command: redis-server /usr/local/etc/redis/redis.conf --requirepass huaweiapp666 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; volumes: <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; - ./redis/redis.conf:/usr/local/etc/redis/redis.conf <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; ports: <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; - \"6379:6379\" <br>&nbsp; &nbsp; huaweiapp: <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; image: jinjietan/huaweiapp:latest <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; ports: <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; - \"8080:8080\" <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; restart: on-failure <br>`</br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></p>\n<ul>\n <li>æ‰§è¡Œå‘½ä»¤ï¼Œæ‹‰å–é•œåƒ<p><code>docker-compose pull</code></p></li>\n <li>æ‹‰å–å®Œæˆå,è¿è¡Œ<code>docker-compose</code></li>\n</ul>\n<p><code>docker-compose up -d</code></p>\n<ul>\n <li>å¯åŠ¨æˆåŠŸ,è¾“å…¥åŸŸå,å³å¯è®¿é—®åˆ°æˆ‘çš„ç½‘ç«™äº†,å®Œæˆè¿™ä¸ªè¿ç§»å’Œæ•´å¥—å¼€å‘æ„å»ºæµç¨‹çš„é—­ç¯,ä»…ä»…ç”¨äº†1ä¸ªå°æ—¶ä¸åˆ°</li>\n</ul>\n<h4><img src=\"https://segmentfault.com/img/remote/1460000023663468\" alt=\"image.png\" title=\"image.png\" /></h4>\n<h4>æ„Ÿå—</h4>\n<ul>\n <li>åä¸ºäº‘ä»å¼€å‘è€…è§’åº¦å‡ºæ¥,é¡¹ç›®æ¨¡æ¿ä¸€é”®ç”Ÿæˆ,å®šæ—¶æ„å»ºä»»åŠ¡,ä»»åŠ¡æµçš„å®šåˆ¶åŒ–å¤„ç†è¿™äº›,éå¸¸äººæ€§åŒ–,å¤§å¤§é™ä½äº†å¼€å‘è¿ç»´é—¨æ§›,å½¢æˆæ•´å¥—ç ”å‘æ„å»ºæµç¨‹çš„é—­ç¯</li>\n <li>æˆ‘å¸ä¹Ÿæ­£åœ¨å‡†å¤‡è´­ä¹°è¿ç§»åä¸ºäº‘äº§å“ï¼Œæ‰€æœ‰æ‰˜ç®¡ã€æ„å»ºå‘å¸ƒéƒ½æ”¾åœ¨äº‘ç«¯å®Œæˆé—­ç¯</li>\n <li>ç›¸ä¿¡ä½ é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œä¹Ÿå¯ä»¥å¿«é€Ÿçš„å°†ä½ çš„ä»£ç æ‰˜ç®¡ã€æ„å»ºå‘å¸ƒå¿«é€Ÿè¿ç§»åˆ°<code>åä¸ºäº‘é²²é¹æœåŠ¡å™¨</code>ä¸Š</li>\n</ul>","descriptionType":"html","publishedDate":"Tue, 18 Aug 2020 00:00:00 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/remote/1460000023663455","linkMd5":"aa2132e98ae80a419b6636569f23b0d7","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn38@2020_4/2020/08/24/23-08-24-961_f11044dd1174001a.webp","destWidth":770,"destHeight":494,"sourceBytes":334245,"destBytes":28466,"author":"Peterè°­é‡‘æ°","articleImgCdnMap":{"https://segmentfault.com/img/remote/1460000023663455":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn38@2020_4/2020/08/24/23-08-24-961_f11044dd1174001a.webp","https://segmentfault.com/img/remote/1460000023663454":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn1@2020_2/2020/08/24/23-08-31-134_9fa46c777ab520a1.webp","https://segmentfault.com/img/remote/1460000023663458":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn65@2020_6/2020/08/24/23-08-28-473_cec3b758d21a710e.webp","https://segmentfault.com/img/remote/1460000023663456":"https://cdn.jsdelivr.net/gh/myreaderx25/cdn98@2020_2/2020/08/24/23-08-32-493_66d56292ccba60f9.webp","https://segmentfault.com/img/remote/1460000023663462":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn10@2020_2/2020/08/24/23-08-28-508_51ef71423df3d477.webp","https://segmentfault.com/img/remote/1460000023663464":"https://cdn.jsdelivr.net/gh/myreaderx14/cdn54@2020_6/2020/08/24/23-08-28-853_f70d6764a3ae6436.webp","https://segmentfault.com/img/remote/1460000023663459":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn62@2020_5/2020/08/24/23-08-28-683_06ae40cf5655a06c.webp","https://segmentfault.com/img/remote/1460000023663457":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn69@2020_6/2020/08/24/23-08-29-241_e461d9020d0ef79a.webp","https://segmentfault.com/img/remote/1460000023663461":"https://cdn.jsdelivr.net/gh/myreaderx/cdn14@2020_5/2020/08/24/23-08-28-862_28c5749083b296c8.webp","https://segmentfault.com/img/remote/1460000023663460":"https://cdn.jsdelivr.net/gh/myreaderx32/cdn21@2020_2/2020/08/24/23-08-28-891_e2bd700b6524c208.webp","https://segmentfault.com/img/remote/1460000023663463":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn6@2020_2/2020/08/24/23-08-28-516_a78bd2cd84532ab6.webp","https://segmentfault.com/img/remote/1460000023663466":"https://cdn.jsdelivr.net/gh/myreaderx23/cdn38@2020_2/2020/08/24/23-08-32-798_eb0a0c56eee8bbb0.webp","https://segmentfault.com/img/remote/1460000023663465":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn50@2020_4/2020/08/24/23-08-28-553_0db805f790b2fe3b.webp","https://segmentfault.com/img/remote/1460000023663467":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn26@2020_3/2020/08/24/23-08-28-656_c96df5d663364d77.webp","https://segmentfault.com/img/remote/1460000023663468":"https://cdn.jsdelivr.net/gh/myreaderx32/cdn33@2020_5/2020/08/24/23-08-30-799_c54b3b3ab9067f97.webp"},"publishedOrCreatedDate":1598310388563},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"Goå¤šåç¨‹å¹¶å‘ç¯å¢ƒä¸‹çš„é”™è¯¯å¤„ç†","link":"https://segmentfault.com/a/1190000023691221","description":"<h2>å¼•è¨€</h2>\n<p>åœ¨Goè¯­è¨€ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šç”¨åˆ°panicå’Œrecoveræ¥æŠ›å‡ºé”™è¯¯å’Œæ•è·é”™è¯¯ï¼Œè¿™ä¸€å¯¹æ“ä½œåœ¨å•åç¨‹ç¯å¢ƒä¸‹æˆ‘ä»¬æ­£å¸¸ç”¨å°±å¥½äº†ï¼Œå¹¶ä¸ä¼šè¸©åˆ°ä»€ä¹ˆå‘ã€‚ä½†æ˜¯åœ¨å¤šåç¨‹å¹¶å‘ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šç¢°åˆ°ä»¥ä¸‹ä¸¤ä¸ªé—®é¢˜ã€‚å‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰2ä¸ªåç¨‹ï¼Œæˆ‘ä»¬å«å®ƒä»¬åç¨‹Aå’ŒBå¥½äº†ï¼š</p>\n<ul>\n <li>å¦‚æœåç¨‹Aå‘ç”Ÿäº†panicï¼Œåç¨‹Bæ˜¯å¦ä¼šå› ä¸ºåç¨‹Açš„panicè€ŒæŒ‚æ‰ï¼Ÿ</li>\n <li>å¦‚æœåç¨‹Aå‘ç”Ÿäº†panicï¼Œåç¨‹Bæ˜¯å¦èƒ½ç”¨recoveræ•è·åˆ°åç¨‹Açš„panicï¼Ÿ</li>\n</ul>\n<p>ç­”æ¡ˆåˆ†åˆ«æ˜¯ï¼šä¼šã€ä¸èƒ½ã€‚<br>é‚£ä¹ˆä¸‹é¢æˆ‘ä»¬æ¥ä¸€ä¸€éªŒè¯ï¼Œå¹¶ç»™å‡ºåœ¨å…·ä½“çš„ä¸šåŠ¡åœºæ™¯ä¸‹çš„æœ€ä½³å®è·µã€‚</br></p>\n<h2>é—®é¢˜ä¸€</h2>\n<ul>\n <li>å¦‚æœåç¨‹Aå‘ç”Ÿäº†panicï¼Œåç¨‹Bæ˜¯å¦ä¼šå› ä¸ºåç¨‹Açš„panicè€ŒæŒ‚æ‰ï¼Ÿ</li>\n</ul>\n<p>ä¸ºäº†éªŒè¯è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å†™ä¸€æ®µç¨‹åºï¼š</p>\n<pre><code class=\"go\">package main\n\nimport (\n    \"fmt\"\n    \"time\"\n)\n\nfunc main() {\n\n    // åç¨‹A\n    go func() {\n        for {\n            fmt.Println(\"goroutine1_print\")\n        }\n    }()\n\n    // åç¨‹B\n    go func() {\n        time.Sleep(1 * time.Second)\n        panic(\"goroutine2_panic\")\n    }()\n\n    time.Sleep(2 * time.Second)\n}</code></pre>\n<p>é¦–å…ˆä¸»åç¨‹å¼€å¯ä¸¤ä¸ªå­åç¨‹Aå’ŒBï¼ŒAåç¨‹ä¸åœçš„å¾ªç¯æ‰“å°goroutine1_printå­—ç¬¦ä¸²ï¼›Båç¨‹åœ¨ç¡çœ 1såï¼Œå°±ä¼šæŠ›å‡ºpanicï¼ˆç¡çœ è¿™ä¸€æ­¥ä¸ºäº†ç¡®ä¿åœ¨Aè·‘èµ·æ¥å¼€å§‹æ‰“å°äº†ä¹‹åï¼ŒBæ‰ä¼španicï¼‰ï¼Œä¸»åç¨‹ç¡çœ 2sï¼Œç­‰å¾…Aã€Bå­åç¨‹å…¨éƒ¨æ‰§è¡Œå®Œæ¯•ï¼Œä¸»åç¨‹é€€å‡ºã€‚æœ€ç»ˆæ‰“å°ç»“æœå¦‚ä¸‹ï¼š</p>\n<pre><code class=\"go\">...\ngoroutine1_print\ngoroutine1_print\ngoroutine1_print\ngoroutine1_print\ngoroutine1_print\ngoroutine1_print\ngoroutine1_print\ngoroutine1_print\ngoroutine1_print\ngoroutine1_print\ngoroutine1_print\ngoroutine1_print\npanic: goroutine2_panicgoroutine1_print\n\n\ngoroutine1_print\ngoroutine goroutine1_print\n19goroutine1_print\ngoroutine1_print\ngoroutine1_print\ngoroutine1_print\n [runninggoroutine1_print\n]:\ngoroutine1_print\ngoroutine1_print\ngoroutine1_print\nmain.main.func2()\n        /Users/jiangbaiyan/go/src/awesomeProject/main.go:18 +0x46\ncreated by main.main\n        /Users/jiangbaiyan/go/src/awesomeProject/main.go:16 +0x4d\n</code></pre>\n<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨åç¨‹Bå‘ç”Ÿpanicä¹‹å‰ï¼Œåç¨‹Aä¸€ç›´åœ¨æ‰“å°å­—ç¬¦ä¸²ï¼›ç„¶ååç¨‹Aå’Œpanicäº¤æ›¿æ‰“å°å­—ç¬¦ä¸²ï¼Œæœ€åä¸»åç¨‹ä¸åç¨‹Aã€Bå…¨éƒ¨é€€å‡ºã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸€ä¸ªåç¨‹panicä¹‹åï¼Œæ˜¯ä¼šå¯¼è‡´æ‰€æœ‰çš„åç¨‹å…¨éƒ¨æŒ‚æ‰çš„ï¼Œç¨‹åºä¼šæ•´ä½“é€€å‡ºï¼Œåˆ°è¿™é‡Œæˆ‘ä»¬å°±éªŒè¯äº†ç¬¬ä¸€ä¸ªé—®é¢˜çš„ç­”æ¡ˆã€‚<br>è‡³äºpanicå’Œåç¨‹Aäº¤æ›¿æ‰“å°çš„åŸå› ï¼Œå¯èƒ½æ˜¯å› ä¸ºpanicä¹Ÿéœ€è¦æ‰“å°å­—ç¬¦ä¸²ã€‚å› ä¸ºæ‰“å°ä¹Ÿæ˜¯éœ€è¦æ—¶é—´çš„ï¼Œå½“æˆ‘ä»¬æ‰§è¡Œpanicè¿™ä¸€è¡Œä»£ç çš„æ—¶å€™ï¼Œåˆ°panicçœŸæ­£è§¦å‘æ‰€æœ‰åç¨‹æŒ‚æ‰ï¼Œæ˜¯éœ€è¦ä¸€å®šçš„æ—¶é—´çš„ï¼ˆå°½ç®¡è¿™ä¸ªæ—¶é—´å¾ˆçŸ­æš‚ï¼‰ï¼Œæ‰€ä»¥å†è¿™ä¸€å°æ®µæ—¶é—´å†…ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°äº¤æ›¿æ‰“å°çš„ç°è±¡ã€‚</br></p>\n<h2>é—®é¢˜äºŒ</h2>\n<ul>\n <li>å¦‚æœåç¨‹Aå‘ç”Ÿäº†panicï¼Œå…¶ä»–åç¨‹æ˜¯å¦èƒ½ç”¨recoveræ•è·åˆ°åç¨‹Açš„panicï¼Ÿ</li>\n</ul>\n<p>è¿˜æ˜¯ç±»ä¼¼ä¸Šé¢é‚£æ®µä»£ç ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å†ç²¾ç®€ä¸€ä¸‹ï¼š</p>\n<pre><code class=\"go\">package main\n\nimport (\n   \"fmt\"\n   \"time\"\n)\n\nfunc main() {\n\n   defer func() {\n       if e := recover(); e != nil {\n           fmt.Println(\"recover_panic\")\n       }\n   }()\n\n   go func() {\n       panic(\"goroutine2_panic\")\n   }()\n\n   time.Sleep(2 * time.Second)\n}</code></pre>\n<p>æˆ‘ä»¬è¿™æ¬¡åªå¼€å¯ä¸€ä¸ªåç¨‹ï¼Œå¹¶åœ¨ä¸»åç¨‹ä¸­åŠ å…¥äº†recoverï¼Œå¸Œæœ›å®ƒèƒ½å¤Ÿæ•è·åˆ°å­åç¨‹ä¸­çš„panicï¼Œä½†æ˜¯ç»“æœæœªèƒ½å¦‚æ„¿ï¼š</p>\n<pre><code class=\"go\">panic: goroutine2_panic\n\ngoroutine 6 [running]:\nmain.main.func2()\n       /Users/jiangbaiyan/go/src/awesomeProject/main.go:17 +0x39\ncreated by main.main\n       /Users/jiangbaiyan/go/src/awesomeProject/main.go:16 +0x57\n\nProcess finished with exit code 2\n</code></pre>\n<p>æˆ‘ä»¬çœ‹åˆ°ï¼Œrecoverå¹¶æ²¡æœ‰ç”Ÿæ•ˆã€‚æ‰€ä»¥ï¼Œå“ªä¸ªåç¨‹å‘ç”Ÿäº†panicï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨å“ªä¸ªåç¨‹recoverï¼Œæˆ‘ä»¬æ”¹æˆè¿™æ ·ï¼š</p>\n<pre><code class=\"golang\">package main\n\nimport (\n   \"fmt\"\n   \"time\"\n)\n\nfunc main() {\n\n   go func() {\n       defer func() {\n           if e := recover(); e != nil {\n               fmt.Println(\"recover_panic\")\n           }\n       }()\n       panic(\"goroutine2_panic\")\n   }()\n\n   time.Sleep(2 * time.Second)\n}</code></pre>\n<p>ç»“æœæˆåŠŸæ‰“å°recover_panicå­—ç¬¦ä¸²ï¼š</p>\n<pre><code class=\"go\">recover_panic\n\nProcess finished with exit code 0</code></pre>\n<p>æ‰€ä»¥æˆ‘ä»¬çš„ç­”æ¡ˆä¹Ÿå¾—åˆ°äº†éªŒè¯ï¼šåç¨‹Aå‘ç”Ÿpanicï¼Œåç¨‹Bæ— æ³•recoveråˆ°åç¨‹Açš„panicï¼Œåªæœ‰åç¨‹è‡ªå·±å†…éƒ¨çš„recoveræ‰èƒ½æ•è·è‡ªå·±æŠ›å‡ºçš„panicã€‚</p>\n<h2>æœ€ä½³å®è·µ</h2>\n<p>æˆ‘ä»¬å…ˆå‡è®¾æœ‰è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬è¦å¼€å‘ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œè¿™ä¸ªå®¢æˆ·ç«¯éœ€è¦è°ƒç”¨2ä¸ªæœåŠ¡ï¼Œè¿™2ä¸ªæœåŠ¡æ²¡æœ‰ä»»ä½•å…ˆåé¡ºåºçš„ä¾èµ–ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¼€å¯2ä¸ªgoroutineï¼Œé€šè¿‡å¹¶å‘è°ƒç”¨è¿™ä¸¤ä¸ªæœåŠ¡æ¥è·å¾—æ€§èƒ½æå‡ã€‚é‚£ä¹ˆè¿™ä¸ªæ—¶å€™æˆ‘ä»¬åˆšæ‰æ‰€è°ˆåˆ°çš„é—®é¢˜ä¸€å°±æˆäº†é—®é¢˜ã€‚<br>é€šå¸¸æ¥è®²ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›å…¶ä¸­ä¸€ä¸ªæœåŠ¡è°ƒç”¨å¤±è´¥ï¼Œå¦ä¸€ä¸ªæœåŠ¡è°ƒç”¨ä¹Ÿè·Ÿç€å¤±è´¥ï¼Œè€Œæ˜¯è¦ç»§ç»­æ‰§è¡Œå®Œå…¶ä»–å‡ ä¸ªæœåŠ¡è°ƒç”¨é€»è¾‘ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ<br>èªæ˜çš„ä½ ä¸€å®šä¼šæƒ³åˆ°ï¼Œæˆ‘åœ¨æ¯ä¸ªåç¨‹å†…éƒ¨ç¼–å†™ä¸€ä¸ªrecoverè¯­å¥ï¼Œè®©ä»–æ¥ä½æ¯ä¸ªåç¨‹è‡ªå·±å¯èƒ½ä¼šå‘ç”Ÿçš„panicï¼Œå°±èƒ½å¤Ÿè§£å†³ä¸€ä¸ªåç¨‹panicè€Œå¯¼è‡´æ‰€æœ‰åç¨‹æŒ‚æ‰çš„é—®é¢˜äº†ã€‚æˆ‘ä»¬ç¼–å†™å¦‚ä¸‹ä»£ç ï¼Œè¿™å°±æ˜¯åœ¨ä¸šåŠ¡å¼€å‘ä¸­ï¼Œç»“åˆé—®é¢˜äºŒè§£å†³é—®é¢˜ä¸€çš„æœ€ä½³å®è·µï¼š</br></br></p>\n<pre><code class=\"go\">// å¹¶å‘è°ƒç”¨æœåŠ¡ï¼Œæ¯ä¸ªhandleréƒ½ä¼šä¼ å…¥ä¸€ä¸ªè°ƒç”¨é€»è¾‘å‡½æ•°\nfunc GoroutineNotPanic(handlers ...func() error) (err error) {\n\n    var wg sync.WaitGroup\n    // å‡è®¾æˆ‘ä»¬è¦è°ƒç”¨handlersè¿™ä¹ˆå¤šä¸ªæœåŠ¡\n    for _, f := range handlers {\n\n        wg.Add(1)\n        // æ¯ä¸ªå‡½æ•°å¯åŠ¨ä¸€ä¸ªåç¨‹\n        go func(handler func() error) {\n\n            defer func() {\n                // æ¯ä¸ªåç¨‹å†…éƒ¨ä½¿ç”¨recoveræ•è·å¯èƒ½åœ¨è°ƒç”¨é€»è¾‘ä¸­å‘ç”Ÿçš„panic\n                if e := recover(); e != nil {\n                    // æŸä¸ªæœåŠ¡è°ƒç”¨åç¨‹æŠ¥é”™ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ‰“å°ä¸€äº›é”™è¯¯æ—¥å¿—\n                }\n                wg.Done()\n            }()\n\n            // å–ç¬¬ä¸€ä¸ªæŠ¥é”™çš„handlerè°ƒç”¨é€»è¾‘ï¼Œå¹¶æœ€ç»ˆå‘å¤–è¿”å›\n            e := handler()\n            if err == nil &amp;&amp; e != nil {\n                err = e\n            }\n        }(f)\n    }\n\n    wg.Wait()\n\n    return\n}</code></pre>\n<p>ä»¥ä¸Šæ–¹æ³•è°ƒç”¨ç¤ºä¾‹ï¼š</p>\n<pre><code class=\"go\">// è°ƒç”¨ç¤ºä¾‹\nfunc main() {\n\n    // è°ƒç”¨é€»è¾‘1\n    aRpc := func() error {\n        panic(\"rpc logic A panic\")\n        return nil\n    }\n    \n    // è°ƒç”¨é€»è¾‘2\n    bRpc := func() error {\n        fmt.Println(\"rpc logic B\")\n        return nil\n    }\n\n    err := GoroutineNotPanic(aRpc, bRpc)\n    if err != nil {\n        fmt.Println(err)\n    }\n}</code></pre>\n<p>è¿™æ ·æˆ‘ä»¬å°±å®ç°äº†ä¸€ä¸ªé€šç”¨çš„å¹¶å‘å¤„ç†é€»è¾‘ï¼Œæ¯æ¬¡è°ƒç”¨æˆ‘ä»¬åªéœ€è¦æŠŠä¸šåŠ¡é€»è¾‘çš„å‡½æ•°ä¼ å…¥å³å¯ï¼Œä¸ç”¨æ¯æ¬¡è‡ªå·±å•ç‹¬ç¼–å†™ä¸€å¥—å¹¶å‘æ§åˆ¶é€»è¾‘ï¼›åŒæ—¶è°ƒç”¨é€»è¾‘2å°±ä¸ä¼šå› ä¸ºè°ƒç”¨é€»è¾‘1çš„panicè€ŒæŒ‚æ‰äº†ï¼Œå®¹é”™ç‡æ›´é«˜ã€‚åœ¨ä¸šåŠ¡å¼€å‘ä¸­æˆ‘ä»¬å¯ä»¥å‚è€ƒè¿™ç§å®ç°æ–¹å¼~</p>\n<h2>å…³æ³¨æˆ‘ä»¬</h2>\n<p>æ¬¢è¿å„ä½è®¢é˜…æˆ‘ä»¬çš„å…¬ä¼—å·ï¼Œå…³æ³¨åšä¸»ä¸‹æ¬¡ä¸è¿·è·¯ï½</p>\n<p><img src=\"https://segmentfault.com/img/bVbESbH\" alt=\"Nosay\" title=\"Nosay\" /></p>","descriptionType":"html","publishedDate":"Wed, 19 Aug 2020 11:56:47 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/bVbESbH","linkMd5":"ed2d9ff0860340e13c972d901109e6db","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn79@2020_4/2020/08/24/23-08-22-002_23e3d2b285dd74b0.webp","destWidth":258,"destHeight":258,"sourceBytes":9980,"destBytes":9980,"author":"NoSay","articleImgCdnMap":{"https://segmentfault.com/img/bVbESbH":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn79@2020_4/2020/08/24/23-08-22-002_23e3d2b285dd74b0.webp"},"publishedOrCreatedDate":1598310388559},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"ä¸çŸ¥é“æ€ä¹ˆå°è£…ä»£ç ï¼Ÿçœ‹çœ‹è¿™å‡ ç§è®¾è®¡æ¨¡å¼å§ï¼","link":"https://segmentfault.com/a/1190000023735149","description":"<h2>ä¸ºä»€ä¹ˆè¦å°è£…ä»£ç ï¼Ÿ</h2>\n<p>æˆ‘ä»¬ç»å¸¸å¬è¯´ï¼šâ€œå†™ä»£ç è¦æœ‰è‰¯å¥½çš„å°è£…ï¼Œè¦é«˜å†…èšï¼Œä½è€¦åˆâ€ã€‚é‚£æ€æ ·æ‰ç®—è‰¯å¥½çš„å°è£…ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦å°è£…å‘¢ï¼Ÿå…¶å®å°è£…æœ‰è¿™æ ·å‡ ä¸ªå¥½å¤„ï¼š</p>\n<blockquote>\n <ol>\n  <li>å°è£…å¥½çš„ä»£ç ï¼Œå†…éƒ¨å˜é‡ä¸ä¼šæ±¡æŸ“å¤–éƒ¨ã€‚</li>\n  <li>å¯ä»¥ä½œä¸ºä¸€ä¸ªæ¨¡å—ç»™å¤–éƒ¨è°ƒç”¨ã€‚å¤–éƒ¨è°ƒç”¨è€…ä¸éœ€è¦çŸ¥é“å®ç°çš„ç»†èŠ‚ï¼Œåªéœ€è¦æŒ‰ç…§çº¦å®šçš„è§„èŒƒä½¿ç”¨å°±è¡Œäº†ã€‚</li>\n  <li>å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼Œå³å¼€é—­åŸåˆ™ã€‚å¤–éƒ¨ä¸èƒ½ä¿®æ”¹æ¨¡å—ï¼Œæ—¢ä¿è¯äº†æ¨¡å—å†…éƒ¨çš„æ­£ç¡®æ€§ï¼Œåˆå¯ä»¥ç•™å‡ºæ‰©å±•æ¥å£ï¼Œä½¿ç”¨çµæ´»ã€‚</li>\n </ol>\n</blockquote>\n<h2>æ€ä¹ˆå°è£…ä»£ç ï¼Ÿ</h2>\n<p>JSç”Ÿæ€å·²ç»æœ‰å¾ˆå¤šæ¨¡å—äº†ï¼Œæœ‰äº›æ¨¡å—å°è£…å¾—éå¸¸å¥½ï¼Œæˆ‘ä»¬ä½¿ç”¨èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œæ¯”å¦‚jQueryï¼ŒVueç­‰ã€‚å¦‚æœæˆ‘ä»¬ä»”ç»†å»çœ‹è¿™äº›æ¨¡å—çš„æºç ï¼Œæˆ‘ä»¬ä¼šå‘ç°ä»–ä»¬çš„å°è£…éƒ½æ˜¯æœ‰è§„å¾‹å¯å¾ªçš„ã€‚è¿™äº›è§„å¾‹æ€»ç»“èµ·æ¥å°±æ˜¯è®¾è®¡æ¨¡å¼ï¼Œç”¨äºä»£ç å°è£…çš„è®¾è®¡æ¨¡å¼ä¸»è¦æœ‰<code>å·¥å‚æ¨¡å¼</code>ï¼Œ<code>åˆ›å»ºè€…æ¨¡å¼</code>ï¼Œ<code>å•ä¾‹æ¨¡å¼</code>ï¼Œ<code>åŸå‹æ¨¡å¼</code>å››ç§ã€‚ä¸‹é¢æˆ‘ä»¬ç»“åˆä¸€äº›æ¡†æ¶æºç æ¥çœ‹çœ‹è¿™å››ç§è®¾è®¡æ¨¡å¼ï¼š</p>\n<h2>å·¥å‚æ¨¡å¼</h2>\n<p>å·¥å‚æ¨¡å¼çš„åå­—å°±å¾ˆç›´ç™½ï¼Œå°è£…çš„æ¨¡å—å°±åƒä¸€ä¸ªå·¥å‚ä¸€æ ·æ‰¹é‡çš„äº§å‡ºéœ€è¦çš„å¯¹è±¡ã€‚å¸¸è§å·¥å‚æ¨¡å¼çš„ä¸€ä¸ªç‰¹å¾å°±æ˜¯è°ƒç”¨çš„æ—¶å€™ä¸éœ€è¦ä½¿ç”¨<code>new</code>ï¼Œè€Œä¸”ä¼ å…¥çš„å‚æ•°æ¯”è¾ƒç®€å•ã€‚ä½†æ˜¯è°ƒç”¨æ¬¡æ•°å¯èƒ½æ¯”è¾ƒé¢‘ç¹ï¼Œç»å¸¸éœ€è¦äº§å‡ºä¸åŒçš„å¯¹è±¡ï¼Œé¢‘ç¹è°ƒç”¨æ—¶ä¸ç”¨<code>new</code>ä¹Ÿæ–¹ä¾¿å¾ˆå¤šã€‚ä¸€ä¸ªå·¥å‚æ¨¡å¼çš„ä»£ç ç»“æ„å¦‚ä¸‹æ‰€ç¤º:</p>\n<pre><code class=\"javascript\">function factory(type) {\n  switch(type) {\n    case 'type1':\n      return new Type1();\n    case 'type2':\n      return new Type2();\n    case 'type3':\n      return new Type3();\n  }\n}</code></pre>\n<p>ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¼ å…¥äº†<code>type</code>ï¼Œç„¶åå·¥å‚æ ¹æ®ä¸åŒçš„<code>type</code>æ¥åˆ›å»ºä¸åŒçš„å¯¹è±¡ã€‚</p>\n<h3>å®ä¾‹: å¼¹çª—ç»„ä»¶</h3>\n<p>ä¸‹é¢æ¥çœ‹çœ‹ç”¨å·¥å‚æ¨¡å¼çš„ä¾‹å­ï¼Œå‡å¦‚æˆ‘ä»¬æœ‰å¦‚ä¸‹éœ€æ±‚ï¼š</p>\n<blockquote>\n æˆ‘ä»¬é¡¹ç›®éœ€è¦ä¸€ä¸ªå¼¹çª—ï¼Œå¼¹çª—æœ‰å‡ ç§ï¼šæ¶ˆæ¯å‹å¼¹çª—ï¼Œç¡®è®¤å‹å¼¹çª—ï¼Œå–æ¶ˆå‹å¼¹çª—ï¼Œä»–ä»¬çš„é¢œè‰²å’Œå†…å®¹å¯èƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚\n</blockquote>\n<p>é’ˆå¯¹è¿™å‡ ç§å¼¹çª—ï¼Œæˆ‘ä»¬å…ˆæ¥åˆ†åˆ«å»ºä¸€ä¸ªç±»ï¼š</p>\n<pre><code class=\"javascript\">function infoPopup(content, color) {}\nfunction confirmPopup(content, color) {}\nfunction cancelPopup(content, color) {}</code></pre>\n<p>å¦‚æœæˆ‘ä»¬ç›´æ¥ä½¿ç”¨è¿™å‡ ä¸ªç±»ï¼Œå°±æ˜¯è¿™æ ·çš„:</p>\n<pre><code class=\"javascript\">let infoPopup1 = new infoPopup(content, color);\nlet infoPopup2 = new infoPopup(content, color);\nlet confirmPopup1 = new confirmPopup(content, color);\n...</code></pre>\n<p>æ¯æ¬¡ç”¨çš„æ—¶å€™éƒ½è¦å»<code>new</code>å¯¹åº”çš„å¼¹çª—ç±»ï¼Œæˆ‘ä»¬ç”¨å·¥å‚æ¨¡å¼æ”¹é€ ä¸‹ï¼Œå°±æ˜¯è¿™æ ·ï¼š</p>\n<pre><code class=\"javascript\">// æ–°åŠ ä¸€ä¸ªæ–¹æ³•popupæŠŠè¿™å‡ ä¸ªç±»éƒ½åŒ…è£…èµ·æ¥\nfunction popup(type, content, color) {\n  switch(type) {\n    case 'infoPopup':\n      return new infoPopup(content, color);\n    case 'confirmPopup':\n      return new confirmPopup(content, color);\n    case 'cancelPopup':\n      return new cancelPopup(content, color);\n  }\n}</code></pre>\n<p>ç„¶åæˆ‘ä»¬ä½¿ç”¨<code>popup</code>å°±ä¸ç”¨<code>new</code>äº†ï¼Œç›´æ¥è°ƒç”¨å‡½æ•°å°±è¡Œ:</p>\n<pre><code class=\"javascript\">let infoPopup1 = popup('infoPopup', content, color); </code></pre>\n<h3>æ”¹é€ æˆé¢å‘å¯¹è±¡</h3>\n<p>ä¸Šè¿°ä»£ç è™½ç„¶å®ç°äº†å·¥å‚æ¨¡å¼ï¼Œä½†æ˜¯<code>switch</code>å§‹ç»ˆæ„Ÿè§‰ä¸æ˜¯å¾ˆä¼˜é›…ã€‚æˆ‘ä»¬ä½¿ç”¨é¢å‘å¯¹è±¡æ”¹é€ ä¸‹<code>popup</code>ï¼Œå°†å®ƒæ”¹ä¸ºä¸€ä¸ªç±»ï¼Œå°†ä¸åŒç±»å‹çš„å¼¹çª—æŒ‚è½½åœ¨è¿™ä¸ªç±»ä¸Šæˆä¸ºå·¥å‚æ–¹æ³•ï¼š</p>\n<pre><code class=\"javascript\">function popup(type, content, color) {\n  // å¦‚æœæ˜¯é€šè¿‡newè°ƒç”¨çš„ï¼Œè¿”å›å¯¹åº”ç±»å‹çš„å¼¹çª—\n  if(this instanceof popup) {\n    return new this[type](content, color);\n  } else {\n    // å¦‚æœä¸æ˜¯newè°ƒç”¨çš„ï¼Œä½¿ç”¨newè°ƒç”¨ï¼Œä¼šèµ°åˆ°ä¸Šé¢é‚£è¡Œä»£ç \n    return new popup(type, content, color);\n  }\n}\n\n// å„ç§ç±»å‹çš„å¼¹çª—å…¨éƒ¨æŒ‚è½½åœ¨åŸå‹ä¸Šæˆä¸ºå®ä¾‹æ–¹æ³•\npopup.prototype.infoPopup = function(content, color) {}\npopup.prototype.confirmPopup = function(content, color) {}\npopup.prototype.cancelPopup = function(content, color) {}</code></pre>\n<h3>å°è£…æˆæ¨¡å—</h3>\n<p>è¿™ä¸ª<code>popup</code>ä¸ä»…ä»…è®©æˆ‘ä»¬è°ƒç”¨çš„æ—¶å€™å°‘äº†ä¸€ä¸ª<code>new</code>ï¼Œä»–å…¶å®è¿˜æŠŠç›¸å…³çš„å„ç§å¼¹çª—éƒ½å°è£…åœ¨äº†é‡Œé¢ï¼Œè¿™ä¸ª<code>popup</code>å¯ä»¥ç›´æ¥ä½œä¸ºæ¨¡å—<code>export</code>å‡ºå»ç»™åˆ«äººè°ƒç”¨ï¼Œä¹Ÿå¯ä»¥æŒ‚è½½åœ¨<code>window</code>ä¸Šä½œä¸ºä¸€ä¸ªæ¨¡å—ç»™åˆ«äººè°ƒç”¨ã€‚å› ä¸º<code>popup</code>å°è£…äº†å¼¹çª—çš„å„ç§ç»†èŠ‚ï¼Œå³ä½¿ä»¥å<code>popup</code>å†…éƒ¨æ”¹äº†ï¼Œæˆ–è€…æ–°å¢äº†å¼¹çª—ç±»å‹ï¼Œæˆ–è€…å¼¹çª—ç±»çš„åå­—å˜äº†ï¼Œåªè¦ä¿è¯å¯¹å¤–çš„æ¥å£å‚æ•°ä¸å˜ï¼Œå¯¹å¤–é¢éƒ½æ²¡æœ‰å½±å“ã€‚æŒ‚è½½åœ¨<code>window</code>ä¸Šä½œä¸ºæ¨¡å—å¯ä»¥ä½¿ç”¨è‡ªæ‰§è¡Œå‡½æ•°ï¼š</p>\n<pre><code class=\"javascript\">(function(){\n     function popup(type, content, color) {\n    if(this instanceof popup) {\n      return new this[type](content, color);\n    } else {\n      return new popup(type, content, color);\n    }\n  }\n\n  popup.prototype.infoPopup = function(content, color) {}\n  popup.prototype.confirmPopup = function(content, color) {}\n  popup.prototype.cancelPopup = function(content, color) {}\n  \n  window.popup = popup;\n})()\n\n// å¤–é¢å°±ç›´æ¥å¯ä»¥ä½¿ç”¨popupæ¨¡å—äº†\nlet infoPopup1 = popup('infoPopup', content, color); </code></pre>\n<h3>jQueryçš„å·¥å‚æ¨¡å¼</h3>\n<p>jQueryä¹Ÿæ˜¯ä¸€ä¸ªå…¸å‹çš„å·¥å‚æ¨¡å¼ï¼Œä½ ç»™ä»–ä¸€ä¸ªå‚æ•°ï¼Œä»–å°±ç»™ä½ è¿”å›ç¬¦åˆå‚æ•°DOMå¯¹è±¡ã€‚é‚£jQueryè¿™ç§ä¸ç”¨<code>new</code>çš„å·¥å‚æ¨¡å¼æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿå…¶å®å°±æ˜¯jQueryå†…éƒ¨å¸®ä½ è°ƒç”¨äº†<code>new</code>è€Œå·²ï¼ŒjQueryçš„è°ƒç”¨æµç¨‹ç®€åŒ–äº†å°±æ˜¯è¿™æ ·:</p>\n<pre><code class=\"javascript\">(function(){\n  var jQuery = function(selector) {\n    return new jQuery.fn.init(selector);   // newä¸€ä¸‹init, initæ‰æ˜¯çœŸæ­£çš„æ„é€ å‡½æ•°\n  }\n\n  jQuery.fn = jQuery.prototype;     // jQuery.fnå°±æ˜¯jQuery.prototypeçš„ç®€å†™\n\n  jQuery.fn.init = function(selector) {\n    // è¿™é‡Œé¢å®ç°çœŸæ­£çš„æ„é€ å‡½æ•°\n  }\n\n  // è®©initå’ŒjQueryçš„åŸå‹æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œä¾¿äºæŒ‚è½½å®ä¾‹æ–¹æ³•\n  jQuery.fn.init.prototype = jQuery.fn;  \n\n  // æœ€åå°†jQueryæŒ‚è½½åˆ°windowä¸Š\n  window.$ = window.jQuery = jQuery;\n})();</code></pre>\n<p>ä¸Šè¿°ä»£ç ç»“æ„æ¥è‡ªäºjQueryæºç ï¼Œä»ä¸­å¯ä»¥çœ‹å‡ºï¼Œä½ è°ƒç”¨æ—¶çœç•¥çš„<code>new</code>åœ¨jQueryé‡Œé¢å¸®ä½ è°ƒç”¨äº†ï¼Œç›®çš„æ˜¯ä¸ºäº†ä½¿å¤§é‡è°ƒç”¨æ›´æ–¹ä¾¿ã€‚ä½†æ˜¯è¿™ç§ç»“æ„éœ€è¦å€ŸåŠ©ä¸€ä¸ª<code>init</code>æ–¹æ³•ï¼Œæœ€åè¿˜è¦å°†<code>jQuery</code>å’Œ<code>init</code>çš„åŸå‹ç»‘åœ¨ä¸€èµ·ï¼Œå…¶å®è¿˜æœ‰ä¸€ç§æ›´åŠ ç®€ä¾¿çš„æ–¹æ³•å¯ä»¥å®ç°è¿™ä¸ªéœ€æ±‚:</p>\n<pre><code class=\"javascript\">var jQuery = function(selector) {\n  if(!(this instanceof jQuery)) {\n    return new jQuery(selector);\n  }\n  \n  // ä¸‹é¢è¿›è¡ŒçœŸæ­£æ„é€ å‡½æ•°çš„æ‰§è¡Œ\n}</code></pre>\n<p>ä¸Šè¿°ä»£ç å°±ç®€æ´å¤šäº†ï¼Œä¹Ÿå¯ä»¥å®ç°ä¸ç”¨<code>new</code>ç›´æ¥è°ƒç”¨ï¼Œè¿™é‡Œåˆ©ç”¨çš„ç‰¹æ€§æ˜¯<code>this</code>åœ¨å‡½æ•°è¢«<code>new</code>è°ƒç”¨æ—¶ï¼ŒæŒ‡å‘çš„æ˜¯<code>new</code>å‡ºæ¥çš„å¯¹è±¡ï¼Œ<code>new</code>å‡ºæ¥çš„å¯¹è±¡è‡ªç„¶æ˜¯ç±»çš„<code>instance</code>ï¼Œè¿™é‡Œçš„<code>this instanceof jQuery</code>å°±æ˜¯<code>true</code>ã€‚å¦‚æœæ˜¯æ™®é€šè°ƒç”¨ï¼Œä»–å°±æ˜¯<code>false</code>ï¼Œæˆ‘ä»¬å°±å¸®ä»–<code>new</code>ä¸€ä¸‹ã€‚</p>\n<h2>å»ºé€ è€…æ¨¡å¼</h2>\n<p>å»ºé€ è€…æ¨¡å¼æ˜¯ç”¨äºæ¯”è¾ƒå¤æ‚çš„å¤§å¯¹è±¡çš„æ„å»ºï¼Œæ¯”å¦‚<code>Vue</code>ï¼Œ<code>Vue</code>å†…éƒ¨åŒ…å«ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ï¼Œé€»è¾‘å¤æ‚çš„å¯¹è±¡ï¼Œåœ¨æ„å»ºçš„æ—¶å€™ä¹Ÿéœ€è¦ä¼ å¾ˆå¤šå‚æ•°è¿›å»ã€‚åƒè¿™ç§éœ€è¦åˆ›å»ºçš„æƒ…å†µä¸å¤šï¼Œåˆ›å»ºçš„å¯¹è±¡æœ¬èº«åˆå¾ˆå¤æ‚çš„æ—¶å€™å°±é€‚ç”¨å»ºé€ è€…æ¨¡å¼ã€‚å»ºé€ è€…æ¨¡å¼çš„ä¸€èˆ¬ç»“æ„å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"javascript\">function Model1() {}   // æ¨¡å—1\nfunction Model2() {}   // æ¨¡å—2\n\n// æœ€ç»ˆä½¿ç”¨çš„ç±»\nfunction Final() {\n  this.model1 = new Model1();\n  this.model2 = new Model2();\n}\n\n// ä½¿ç”¨æ—¶\nvar obj = new Final();</code></pre>\n<p>ä¸Šè¿°ä»£ç ä¸­æˆ‘ä»¬æœ€ç»ˆä½¿ç”¨çš„æ˜¯<code>Final</code>ï¼Œä½†æ˜¯<code>Final</code>é‡Œé¢çš„ç»“æ„æ¯”è¾ƒå¤æ‚ï¼Œæœ‰å¾ˆå¤šä¸ªå­æ¨¡å—ï¼Œ<code>Final</code>å°±æ˜¯å°†è¿™äº›å­æ¨¡å—ç»„åˆèµ·æ¥å®ŒæˆåŠŸèƒ½ï¼Œè¿™ç§éœ€è¦ç²¾ç»†åŒ–æ„é€ çš„å°±é€‚ç”¨äºå»ºé€ è€…æ¨¡å¼ã€‚</p>\n<h3>å®ä¾‹ï¼šç¼–è¾‘å™¨æ’ä»¶</h3>\n<p>å‡è®¾æˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼š</p>\n<blockquote>\n å†™ä¸€ä¸ªç¼–è¾‘å™¨æ’ä»¶ï¼Œåˆå§‹åŒ–çš„æ—¶å€™éœ€è¦é…ç½®å¤§é‡å‚æ•°ï¼Œè€Œä¸”å†…éƒ¨çš„åŠŸèƒ½å¾ˆå¤šå¾ˆå¤æ‚ï¼Œå¯ä»¥æ”¹å˜å­—ä½“é¢œè‰²å’Œå¤§å°ï¼Œä¹Ÿå¯ä»¥å‰è¿›åé€€ã€‚\n</blockquote>\n<p>ä¸€èˆ¬ä¸€ä¸ªé¡µé¢å°±åªæœ‰ä¸€ä¸ªç¼–è¾‘å™¨ï¼Œè€Œä¸”é‡Œé¢çš„åŠŸèƒ½å¯èƒ½å¾ˆå¤æ‚ï¼Œå¯èƒ½éœ€è¦è°ƒæ•´é¢œè‰²ï¼Œå­—ä½“ç­‰ã€‚ä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªæ’ä»¶å†…éƒ¨å¯èƒ½è¿˜ä¼šè°ƒç”¨å…¶ä»–ç±»ï¼Œç„¶åå°†ä»–ä»¬ç»„åˆèµ·æ¥å®ç°åŠŸèƒ½ï¼Œè¿™å°±é€‚åˆå»ºé€ è€…æ¨¡å¼ã€‚æˆ‘ä»¬æ¥åˆ†æä¸‹åšè¿™æ ·ä¸€ä¸ªç¼–è¾‘å™¨éœ€è¦å“ªäº›æ¨¡å—:</p>\n<blockquote>\n <ol>\n  <li>ç¼–è¾‘å™¨æœ¬èº«è‚¯å®šéœ€è¦ä¸€ä¸ªç±»ï¼Œæ˜¯ç»™å¤–éƒ¨è°ƒç”¨çš„æ¥å£</li>\n  <li>éœ€è¦ä¸€ä¸ªæ§åˆ¶å‚æ•°åˆå§‹åŒ–å’Œé¡µé¢æ¸²æŸ“çš„ç±»</li>\n  <li>éœ€è¦ä¸€ä¸ªæ§åˆ¶å­—ä½“çš„ç±»</li>\n  <li>éœ€è¦ä¸€ä¸ªçŠ¶æ€ç®¡ç†çš„ç±»</li>\n </ol>\n</blockquote>\n<pre><code class=\"javascript\">// ç¼–è¾‘å™¨æœ¬èº«ï¼Œå¯¹å¤–æš´éœ²\nfunction Editor() {\n  // ç¼–è¾‘å™¨é‡Œé¢å°±æ˜¯å°†å„ä¸ªæ¨¡å—ç»„åˆèµ·æ¥å®ç°åŠŸèƒ½\n  this.initer = new HtmlInit();\n  this.fontController = new FontController();\n  this.stateController = new StateController(this.fontController);\n}\n\n// åˆå§‹åŒ–å‚æ•°ï¼Œæ¸²æŸ“é¡µé¢\nfunction HtmlInit() {\n  \n}\nHtmlInit.prototype.initStyle = function() {}     // åˆå§‹åŒ–æ ·å¼\nHtmlInit.prototype.renderDom = function() {}     // æ¸²æŸ“DOM\n\n// å­—ä½“æ§åˆ¶å™¨\nfunction FontController() {\n  \n}\nFontController.prototype.changeFontColor = function() {}    // æ”¹å˜å­—ä½“é¢œè‰²\nFontController.prototype.changeFontSize = function() {}     // æ”¹å˜å­—ä½“å¤§å°\n\n// çŠ¶æ€æ§åˆ¶å™¨\nfunction StateController(fontController) {\n  this.states = [];       // ä¸€ä¸ªæ•°ç»„ï¼Œå­˜å‚¨æ‰€æœ‰çŠ¶æ€\n  this.currentState = 0;  // ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘å½“å‰çŠ¶æ€\n  this.fontController = fontController;    // å°†å­—ä½“ç®¡ç†å™¨æ³¨å…¥ï¼Œä¾¿äºæ”¹å˜çŠ¶æ€çš„æ—¶å€™æ”¹å˜å­—ä½“\n}\nStateController.prototype.saveState = function() {}     // ä¿å­˜çŠ¶æ€\nStateController.prototype.backState = function() {}     // åé€€çŠ¶æ€\nStateController.prototype.forwardState = function() {}     // å‰è¿›çŠ¶æ€</code></pre>\n<p>ä¸Šé¢çš„ä»£ç å…¶å®å°±å°†ä¸€ä¸ªç¼–è¾‘å™¨æ’ä»¶çš„æ¶å­æ­èµ·æ¥äº†ï¼Œå…·ä½“å®ç°åŠŸèƒ½å°±æ˜¯å¾€è¿™äº›æ–¹æ³•é‡Œé¢å¡«å…¥å…·ä½“çš„å†…å®¹å°±è¡Œäº†ï¼Œå…¶å®å°±æ˜¯å„ä¸ªæ¨¡å—çš„ç›¸äº’è°ƒç”¨ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦å®ç°åé€€çŠ¶æ€çš„åŠŸèƒ½å°±å¯ä»¥è¿™æ ·å†™:</p>\n<pre><code class=\"javascript\">StateController.prototype.backState = function() {\n  var state = this.states[this.currentState - 1];  // å–å‡ºä¸Šä¸€ä¸ªçŠ¶æ€\n  this.fontController.changeFontColor(state.color);  // æ”¹å›ä¸Šæ¬¡é¢œè‰²\n  this.fontController.changeFontSize(state.size);    // æ”¹å›ä¸Šæ¬¡å¤§å°\n}</code></pre>\n<h2>å•ä¾‹æ¨¡å¼</h2>\n<p>å•ä¾‹æ¨¡å¼é€‚ç”¨äºå…¨å±€åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹å¯¹è±¡çš„åœºæ™¯ï¼Œå•ä¾‹æ¨¡å¼çš„ä¸€èˆ¬ç»“æ„å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"javascript\">function Singleton() {}\n\nSingleton.getInstance = function() {\n  if(this.instance) {\n    return this.instance;\n  }\n  \n  this.instance = new Singleton();\n  return this.instance;\n}</code></pre>\n<p>ä¸Šè¿°ä»£ç ä¸­ï¼Œ<code>Singleton</code>ç±»æŒ‚è½½äº†ä¸€ä¸ªé™æ€æ–¹æ³•<code>getInstance</code>ï¼Œå¦‚æœè¦è·å–å®ä¾‹å¯¹è±¡åªèƒ½é€šè¿‡è¿™ä¸ªæ–¹æ³•æ‹¿ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šæ£€æµ‹æ˜¯ä¸æ˜¯æœ‰ç°å­˜çš„å®ä¾‹å¯¹è±¡ï¼Œå¦‚æœæœ‰å°±è¿”å›ï¼Œæ²¡æœ‰å°±æ–°å»ºä¸€ä¸ªã€‚</p>\n<h3>å®ä¾‹ï¼šå…¨å±€æ•°æ®å­˜å‚¨å¯¹è±¡</h3>\n<p>å‡å¦‚æˆ‘ä»¬ç°åœ¨æœ‰è¿™æ ·ä¸€ä¸ªéœ€æ±‚:</p>\n<blockquote>\n æˆ‘ä»¬éœ€è¦å¯¹ä¸€ä¸ªå…¨å±€çš„æ•°æ®å¯¹è±¡è¿›è¡Œç®¡ç†ï¼Œè¿™ä¸ªå¯¹è±¡åªèƒ½æœ‰ä¸€ä¸ªï¼Œå¦‚æœæœ‰å¤šä¸ªä¼šå¯¼è‡´æ•°æ®ä¸åŒæ­¥ã€‚\n</blockquote>\n<p>è¿™ä¸ªéœ€æ±‚è¦æ±‚å…¨å±€åªæœ‰ä¸€ä¸ªæ•°æ®å­˜å‚¨å¯¹è±¡ï¼Œæ˜¯å…¸å‹çš„é€‚åˆå•ä¾‹æ¨¡å¼çš„åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å¥—ç”¨ä¸Šé¢çš„ä»£ç æ¨¡æ¿ï¼Œä½†æ˜¯ä¸Šé¢çš„ä»£ç æ¨¡æ¿è·å–<code>instance</code>å¿…é¡»è¦è°ƒ<code>getInstance</code>æ‰è¡Œï¼Œè¦æ˜¯æŸä¸ªä½¿ç”¨è€…ç›´æ¥è°ƒäº†<code>Singleton()</code>æˆ–è€…<code>new Singleton()</code>å°±ä¼šå‡ºé—®é¢˜ï¼Œè¿™æ¬¡æˆ‘ä»¬æ¢ä¸€ç§å†™æ³•ï¼Œè®©ä»–èƒ½å¤Ÿå…¼å®¹<code>Singleton()</code>å’Œ<code>new Singleton()</code>ï¼Œä½¿ç”¨èµ·æ¥æ›´åŠ å‚»ç“œåŒ–:</p>\n<pre><code class=\"javascript\">function store() {\n  if(store.instance) {\n    return store.instance;\n  }\n  \n  store.instance = this;\n}</code></pre>\n<p>ä¸Šè¿°ä»£ç æ”¯æŒä½¿ç”¨<code>new store()</code>çš„æ–¹å¼è°ƒç”¨ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªé™æ€å˜é‡<code>instance</code>æ¥è®°å½•æ˜¯å¦æœ‰è¿›è¡Œè¿‡å®ä¾‹åŒ–ï¼Œå¦‚æœå®ä¾‹åŒ–äº†å°±è¿”å›è¿™ä¸ªå®ä¾‹ï¼Œå¦‚æœæ²¡æœ‰å®ä¾‹åŒ–è¯´æ˜æ˜¯ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼Œé‚£å°±æŠŠ<code>this</code>èµ‹ç»™è¿™ä¸ªè¿™ä¸ªé™æ€å˜é‡ï¼Œå› ä¸ºæ˜¯ä½¿ç”¨<code>new</code>è°ƒç”¨ï¼Œè¿™æ—¶å€™çš„<code>this</code>æŒ‡å‘çš„å°±æ˜¯å®ä¾‹åŒ–å‡ºæ¥çš„å¯¹è±¡ï¼Œå¹¶ä¸”æœ€åä¼šéšå¼çš„è¿”å›<code>this</code>ã€‚</p>\n<p>å¦‚æœæˆ‘ä»¬è¿˜æƒ³æ”¯æŒ<code>store()</code>ç›´æ¥è°ƒç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å‰é¢å·¥å‚æ¨¡å¼ç”¨è¿‡çš„æ–¹æ³•ï¼Œæ£€æµ‹<code>this</code>æ˜¯ä¸æ˜¯å½“å‰ç±»çš„å®ä¾‹ï¼Œå¦‚æœä¸æ˜¯å°±å¸®ä»–ç”¨<code>new</code>è°ƒç”¨å°±è¡Œäº†ï¼š</p>\n<pre><code class=\"javascript\">function store() {\n  // åŠ ä¸€ä¸ªinstanceofæ£€æµ‹\n  if(!(this instanceof store)) {\n    return new store();\n  }\n  \n  // ä¸‹é¢è·Ÿå‰é¢ä¸€æ ·çš„\n  if(store.instance) {\n    return store.instance;\n  }\n  \n  store.instance = this;\n}</code></pre>\n<p>ç„¶åæˆ‘ä»¬ç”¨ä¸¤ç§æ–¹å¼è°ƒç”¨æ¥æ£€æµ‹ä¸‹:</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023735152\" alt=\"image-20200521154322364\" title=\"image-20200521154322364\" /></p>\n<h3>å®ä¾‹ï¼švue-router</h3>\n<p><code>vue-router</code>å…¶å®ä¹Ÿç”¨åˆ°äº†å•ä¾‹æ¨¡å¼ï¼Œå› ä¸ºå¦‚æœä¸€ä¸ªé¡µé¢æœ‰å¤šä¸ªè·¯ç”±å¯¹è±¡ï¼Œå¯èƒ½é€ æˆçŠ¶æ€çš„å†²çªï¼Œ<code>vue-router</code>çš„å•ä¾‹å®ç°æ–¹å¼åˆæœ‰ç‚¹ä¸ä¸€æ ·ï¼Œ<a href=\"https://github.com/vuejs/vue-router/blob/dev/src/install.js\" rel=\"nofollow noreferrer\">ä¸‹åˆ—ä»£ç æ¥è‡ª<code>vue-router</code>æºç </a>ï¼š</p>\n<pre><code class=\"javascript\">let _Vue;\n\nfunction install(Vue) {\n  if (install.installed &amp;&amp; _Vue === Vue) return;\n  install.installed = true\n\n  _Vue = Vue\n}</code></pre>\n<p>æ¯æ¬¡æˆ‘ä»¬è°ƒç”¨<code>vue.use(vueRouter)</code>çš„æ—¶å€™å…¶å®éƒ½ä¼šå»æ‰§è¡Œ<code>vue-router</code>æ¨¡å—çš„<code>install</code>æ–¹æ³•ï¼Œå¦‚æœç”¨æˆ·ä¸å°å¿ƒå¤šæ¬¡è°ƒç”¨äº†<code>vue.use(vueRouter)</code>å°±ä¼šé€ æˆ<code>install</code>çš„å¤šæ¬¡æ‰§è¡Œï¼Œä»è€Œäº§ç”Ÿä¸å¯¹çš„ç»“æœã€‚<code>vue-router</code>çš„<code>install</code>åœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶ï¼Œå°†<code>installed</code>å±æ€§å†™æˆäº†<code>true</code>ï¼Œå¹¶ä¸”è®°å½•äº†å½“å‰çš„<code>Vue</code>ï¼Œè¿™æ ·åé¢åœ¨åŒä¸€ä¸ª<code>Vue</code>é‡Œé¢å†æ¬¡æ‰§è¡Œ<code>install</code>å°±ä¼šç›´æ¥<code>return</code>äº†ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§å•ä¾‹æ¨¡å¼ã€‚</p>\n<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬è¿™é‡Œä¸‰ç§ä»£ç éƒ½æ˜¯å•ä¾‹æ¨¡å¼ï¼Œä»–ä»¬è™½ç„¶å½¢å¼ä¸ä¸€æ ·ï¼Œä½†æ˜¯æ ¸å¿ƒæ€æƒ³éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ç”¨ä¸€ä¸ªå˜é‡æ¥æ ‡è®°ä»£ç æ˜¯å¦å·²ç»æ‰§è¡Œè¿‡äº†ï¼Œå¦‚æœæ‰§è¡Œè¿‡äº†å°±è¿”å›ä¸Šæ¬¡çš„æ‰§è¡Œç»“æœï¼Œè¿™æ ·å°±ä¿è¯äº†å¤šæ¬¡è°ƒç”¨ä¹Ÿä¼šæ‹¿åˆ°ä¸€æ ·çš„ç»“æœã€‚</p>\n<h2>åŸå‹æ¨¡å¼</h2>\n<p>åŸå‹æ¨¡å¼æœ€å…¸å‹çš„åº”ç”¨å°±æ˜¯JSæœ¬èº«å•Šï¼ŒJSçš„åŸå‹é“¾å°±æ˜¯åŸå‹æ¨¡å¼ã€‚JSä¸­å¯ä»¥ä½¿ç”¨<code>Object.create</code>æŒ‡å®šä¸€ä¸ªå¯¹è±¡ä½œä¸ºåŸå‹æ¥åˆ›å»ºå¯¹è±¡:</p>\n<pre><code class=\"javascript\">const obj = {\n  x: 1,\n  func: () =&gt; {}\n}\n\n// ä»¥objä¸ºåŸå‹åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡\nconst newObj = Object.create(obj);\n\nconsole.log(newObj.__proto__ === obj);    // true\nconsole.log(newObj.x);    // 1</code></pre>\n<p>ä¸Šè¿°ä»£ç æˆ‘ä»¬å°†<code>obj</code>ä½œä¸ºåŸå‹ï¼Œç„¶åç”¨<code>Object.create</code>åˆ›å»ºçš„æ–°å¯¹è±¡éƒ½ä¼šæ‹¥æœ‰è¿™ä¸ªå¯¹è±¡ä¸Šçš„å±æ€§å’Œæ–¹æ³•ï¼Œè¿™å…¶å®å°±ç®—æ˜¯ä¸€ç§åŸå‹æ¨¡å¼ã€‚è¿˜æœ‰JSçš„é¢å‘å¯¹è±¡å…¶å®æ›´åŠ æ˜¯è¿™ç§æ¨¡å¼çš„ä½“ç°ï¼Œæ¯”å¦‚JSçš„ç»§æ‰¿å¯ä»¥è¿™æ ·å†™:</p>\n<pre><code class=\"javascript\">function Parent() {\n  this.parentAge = 50;\n}\nfunction Child() {}\n\nChild.prototype = new Parent();\nChild.prototype.constructor = Child;      // æ³¨æ„é‡ç½®constructor\n\nconst obj = new Child();\nconsole.log(obj.parentAge);    // 50</code></pre>\n<p>è¿™é‡Œçš„ç»§æ‰¿å…¶å®å°±æ˜¯è®©å­ç±»<code>Child.prototype.__proto__</code>çš„æŒ‡å‘çˆ¶ç±»çš„<code>prototype</code>ï¼Œä»è€Œè·å–çˆ¶ç±»çš„æ–¹æ³•å’Œå±æ€§ã€‚<a href=\"https://segmentfault.com/a/1190000023201844\">JSä¸­é¢å‘å¯¹è±¡çš„å†…å®¹è¾ƒå¤šï¼Œæˆ‘è¿™é‡Œä¸å±•å¼€äº†ï¼Œæœ‰ä¸€ç¯‡æ–‡ç« ä¸“é—¨è®²è¿™ä¸ªé—®é¢˜</a>ã€‚</p>\n<h2>æ€»ç»“</h2>\n<ol>\n <li>å¾ˆå¤šç”¨èµ·æ¥é¡ºæ‰‹çš„å¼€æºåº“éƒ½æœ‰è‰¯å¥½çš„å°è£…ï¼Œå°è£…å¯ä»¥å°†å†…éƒ¨ç¯å¢ƒå’Œå¤–éƒ¨ç¯å¢ƒéš”ç¦»ï¼Œå¤–éƒ¨ç”¨èµ·æ¥æ›´é¡ºæ‰‹ã€‚</li>\n <li>é’ˆå¯¹ä¸åŒçš„åœºæ™¯å¯ä»¥æœ‰ä¸åŒçš„å°è£…æ–¹æ¡ˆã€‚</li>\n <li>éœ€è¦å¤§é‡äº§ç”Ÿç±»ä¼¼å®ä¾‹çš„ç»„ä»¶å¯ä»¥è€ƒè™‘ç”¨å·¥å‚æ¨¡å¼æ¥å°è£…ã€‚</li>\n <li>å†…éƒ¨é€»è¾‘è¾ƒå¤æ‚ï¼Œå¤–éƒ¨ä½¿ç”¨æ—¶éœ€è¦çš„å®ä¾‹ä¹Ÿä¸å¤šï¼Œå¯ä»¥è€ƒè™‘ç”¨å»ºé€ è€…æ¨¡å¼æ¥å°è£…ã€‚</li>\n <li>å…¨å±€åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹çš„éœ€è¦ç”¨å•ä¾‹æ¨¡å¼æ¥å°è£…ã€‚</li>\n <li>æ–°è€å¯¹è±¡ä¹‹é—´å¯èƒ½æœ‰ç»§æ‰¿å…³ç³»çš„å¯ä»¥è€ƒè™‘ç”¨åŸå‹æ¨¡å¼æ¥å°è£…ï¼ŒJSæœ¬èº«å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„åŸå‹æ¨¡å¼ã€‚</li>\n <li>ä½¿ç”¨è®¾è®¡æ¨¡å¼æ—¶ä¸è¦ç”Ÿæ¬ç¡¬å¥—ä»£ç æ¨¡æ¿ï¼Œæ›´é‡è¦çš„æ˜¯æŒæ¡æ€æƒ³ï¼ŒåŒä¸€ä¸ªæ¨¡å¼åœ¨ä¸åŒçš„åœºæ™¯å¯ä»¥æœ‰ä¸åŒçš„å®ç°æ–¹æ¡ˆã€‚</li>\n</ol>\n<p><strong>æ„Ÿè°¢ä½ èŠ±è´¹å®è´µçš„æ—¶é—´é˜…è¯»æœ¬æ–‡ï¼Œå¦‚æœæœ¬æ–‡ç»™äº†ä½ ä¸€ç‚¹ç‚¹å¸®åŠ©æˆ–è€…å¯å‘ï¼Œè¯·ä¸è¦åå•¬ä½ çš„èµå’ŒGitHubå°æ˜Ÿæ˜Ÿï¼Œä½ çš„æ”¯æŒæ˜¯ä½œè€…æŒç»­åˆ›ä½œçš„åŠ¨åŠ›ã€‚</strong></p>\n<p><strong>æœ¬æ–‡ä¸»è¦ç´ ææ¥è‡ªäº<a href=\"https://mooc.study.163.com/smartSpec/detail/1202851605.htm\" rel=\"nofollow noreferrer\">ç½‘æ˜“é«˜çº§å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆå¾®ä¸“ä¸š</a>å”ç£Šè€å¸ˆçš„è®¾è®¡æ¨¡å¼è§†é¢‘è¯¾ç¨‹ã€‚</strong></p>\n<p><strong>ä½œè€…åšæ–‡GitHubé¡¹ç›®åœ°å€ï¼š <a href=\"https://github.com/dennis-jiang/Front-End-Knowledges\" rel=\"nofollow noreferrer\">https://github.com/dennis-jiang/Front-End-Knowledges</a></strong></p>","descriptionType":"html","publishedDate":"Mon, 24 Aug 2020 02:22:08 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/remote/1460000023735152","linkMd5":"e96585e49877b1a5d367d8d830ee693d","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn94@2020_3/2020/08/24/23-08-22-973_d9a4a0f3fdb1bd81.webp","destWidth":254,"destHeight":121,"sourceBytes":8576,"destBytes":3076,"author":"è’‹é¹é£","articleImgCdnMap":{"https://segmentfault.com/img/remote/1460000023735152":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn94@2020_3/2020/08/24/23-08-22-973_d9a4a0f3fdb1bd81.webp"},"publishedOrCreatedDate":1598310388570},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"[Concentå°è¯¾å ‚]è®¤è¯†ç»„åˆapiï¼Œæ¢ä¸ªå§¿åŠ¿æ’¸æ›´æ¸…çˆ½çš„react","link":"https://segmentfault.com/a/1190000023648364","description":"<p><img src=\"https://segmentfault.com/img/remote/1460000023648367\" alt=\"\" title=\"\" /></p>\n<p>å¼€æºä¸æ˜“ï¼Œæ„Ÿè°¢ä½ çš„æ”¯æŒï¼Œ<a href=\"https://github.com/concentjs/concent\" rel=\"nofollow noreferrer\">â¤ star me if you like concent ^_^</a></p>\n<p>è¿™é‡Œæœ‰ä¸€ä»½æ”¶é›†ä¸­çš„çŠ¶æ€ç®¡ç†æ¸…å•ï¼Œæ¬¢è¿æœ‰å…´è¶£çš„æœ‹å‹äº†è§£^_^<br><a href=\"https://github.com/fantasticsoul/awesome-state/blob/master/README.md\" rel=\"nofollow noreferrer\">awesome-state</a></br></p>\n<h2>åºè¨€</h2>\n<p><code>composition api</code>ï¼ˆç»„åˆapiï¼‰ å’Œ <code>optional api</code>ï¼ˆå¯é€‰apiï¼‰ ä¸¤ç§ç»„ç»‡ä»£ç çš„æ–¹å¼ï¼Œç›¸ä¿¡å¤§å®¶åœ¨<code>vue3</code>å„ç§ç›¸å…³çš„ä»‹ç»æ–‡é‡Œå·²ç»äº†è§£åˆ°ä¸å°‘äº†ï¼Œå®ƒä»¬å¯ä»¥åŒæ—¶å­˜åœ¨ï¼Œå¹¶éå¼ºåˆ¶ä½ åªèƒ½ä½¿ç”¨å“ªä¸€ç§ï¼Œä½†ç»„åˆapiä¸¤å¤§ä¼˜åŠ¿çš„ç¡®è®©å¼€å‘è€…ä»¬æ›´å€¾å‘äºä½¿ç”¨å®ƒæ¥æ›¿ä»£å¯é€‰apiã€‚</p>\n<ul>\n <li>ä»¥å‡½æ•°ä¸ºåŸºç¡€å•ä½æ¥æ‰“åŒ…å¯å¤ç”¨é€»è¾‘ï¼Œå¹¶æ³¨å…¥åˆ°ä»»æ„ç»„ä»¶ï¼Œè®©è§†å›¾å’Œä¸šåŠ¡è§£è€¦æ›´ä¼˜é›…</li>\n <li>è®©ç›¸åŒåŠŸèƒ½çš„ä¸šåŠ¡æ›´åŠ ç´§å¯†çš„æ”¾ç½®åˆ°ä¸€èµ·ï¼Œä¸è¢«å‰²è£‚å¼€ï¼Œæé«˜å¼€å‘ä¸ç»´æŠ¤ä½“éªŒ</li>\n</ul>\n<p>ä»¥ä¸Šä¸¤ç‚¹åœ¨reacté‡Œå‡è¢«<code>hook</code>ä¼˜é›…çš„è§£å†³äº†ï¼Œé‚£ä¹ˆç›¸æ¯”<code>hook</code>ï¼Œç»„åˆapiè¿˜å…·æœ‰ä»€ä¹ˆä¼˜åŠ¿å‘¢ï¼Ÿè¿™é‡Œå°±ä¸å–å…³å­äº†ï¼Œç›¸ä¿¡å·²æœ‰å°ä¼™ä¼´åœ¨å°¤å¤§å¤§ä»‹ç»ç»„åˆapiæ—¶å·²ç»çŸ¥é“ï¼Œç»„åˆapiæ˜¯é™æ€å®šä¹‰çš„ï¼Œè§£å†³äº†<code>hook</code>å¿…éœ€æ¯æ¬¡æ¸²æŸ“éƒ½é‡æ–°ç”Ÿæˆä¸´æ—¶é—­åŒ…å‡½æ•°çš„æ€§èƒ½é—®é¢˜ï¼Œä¹Ÿæ²¡æœ‰äº†<code>hook</code>é‡Œé—­åŒ…æ—§å€¼é™·é˜±ï¼Œäººå·¥æ£€æµ‹ä¾èµ–ç­‰ç¼–ç ä½“éªŒé—®é¢˜ã€‚</p>\n<p>ä½†æ˜¯ï¼Œreactæ˜¯<strong>all in js</strong>çš„ç¼–ç æ–¹å¼ï¼Œæ‰€ä»¥åªè¦æˆ‘ä»¬æ•¢æƒ³ã€æ•¢åšï¼Œä¸€åˆ‡ä¼˜ç§€çš„ç¼–ç¨‹æ¨¡å‹éƒ½å¯ä»¥å¸çº³è¿›æ¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç”¨åŸç”Ÿ<code>hook</code>å’Œconcentçš„<code>setup</code>å¹¶é€šè¿‡å®ä¾‹å’Œè®²è§£ï¼Œæ¥å½»åº•è§£å†³å°¤å¤§æåˆ°çš„è¿™ä¸ªå…³äº<code>hook</code>çš„ç—›ç‚¹å§^_^</p>\n<h2>react hook</h2>\n<p>æˆ‘ä»¬åœ¨æ­¤å…ˆè®¾è®¡ä¸€ä¸ªä¼ ç»Ÿçš„è®¡æ•°å™¨ï¼Œè¦æ±‚å¦‚ä¸‹</p>\n<ul>\n <li>æœ‰ä¸€ä¸ªå°æ•°ï¼Œä¸€ä¸ªå¤§æ•°</li>\n <li>æœ‰ä¸¤ç»„åŠ ã€å‡æŒ‰é’®ï¼Œåˆ†åˆ«å¯¹å°æ•°å¤§æ•°åšæ“ä½œï¼Œå°æ•°æŒ‰é’®åŠ å‡1ï¼Œå¤§æ•°æŒ‰é’®åŠ å‡100</li>\n <li>è®¡æ•°å™¨åˆæ¬¡æŒ‚è½½æ—¶æ‹‰å–æ¬¢è¿é—®å€™è¯­</li>\n <li>å½“å°æ•°è¾¾åˆ°100æ—¶ï¼ŒæŒ‰é’®å˜ä¸ºçº¢è‰²ï¼Œå¦åˆ™å˜ä¸ºç»¿è‰²</li>\n <li>å½“å¤§æ•°è¾¾åˆ°1000æ—¶ï¼ŒæŒ‰é’®å˜ä¸ºç´«è‰²ï¼Œå¦åˆ™å˜ä¸ºç»¿è‰²</li>\n <li>å½“å¤§æ•°è¾¾åˆ°10000æ—¶ï¼Œä¸ŠæŠ¥å¤§æ•°çš„æ•°å­—</li>\n <li>è®¡ç®—å™¨å¸è½½æ—¶ï¼Œä¸ŠæŠ¥å½“å‰çš„æ•°å­—</li>\n</ul>\n<p>ä¸ºäº†å®Œæˆæ­¤éœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°ä»¥ä¸‹5æŠŠé’©å­</p>\n<h3>useState</h3>\n<p>è¿‡å®Œéœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°ç¬¬ä¸€æŠŠé’©å­<code>useState</code>æ¥åšç»„ä»¶é¦–æ¬¡æ¸²æŸ“çš„çŠ¶æ€åˆå§‹åŒ–</p>\n<pre><code class=\"js\">function Counter() {\n  const [num, setNum] = useState(6);\n  const [bigNum, setBigNum] = useState(120);\n}</code></pre>\n<h3>useCallback</h3>\n<p>å¦‚éœ€ä½¿ç”¨ç¼“å­˜å‡½æ•°ï¼Œåˆ™è¦ç”¨åˆ°ç¬¬äºŒæŠŠé’©å­<code>useCallback</code>ï¼Œæ­¤å¤„æˆ‘ä»¬ä½¿ç”¨è¿™æŠŠé’©å­æ¥å®šä¹‰åŠ å‡å‡½æ•°</p>\n<pre><code class=\"js\">  const addNum = useCallback(() =&gt; setNum(num + 1), [num]);\n  const addNumBig = useCallback(() =&gt; setBigNum(bigNum + 100), [bigNum]);</code></pre>\n<h3>useMemo</h3>\n<p>å¦‚éœ€ç”¨åˆ°ç¼“å­˜çš„è®¡ç®—ç»“æœï¼Œåˆ™è¦ç”¨åˆ°ç¬¬ä¸‰æŠŠé’©å­<code>useMemo</code>ï¼Œæ­¤å¤„æˆ‘ä»¬ä½¿ç”¨è¿™æŠŠé’©å­æ¥è®¡ç®—æŒ‰é’®é¢œè‰²</p>\n<pre><code class=\"js\"> const numBtnColor = useMemo(() =&gt; {\n    return num &gt; 100 ? 'red' : 'green';\n  }, [num]);\n  const bigNumBtnColor = useMemo(() =&gt; {\n    return bigNum &gt; 1000 ? 'purple' : 'green';\n  }, [bigNum]);</code></pre>\n<h3>useEffect</h3>\n<p>å¤„ç†å‡½æ•°çš„å‰¯ä½œç”¨åˆ™éœ€ç”¨åˆ°ç¬¬å››æŠŠé’©å­<code>useEffect</code>ï¼Œæ­¤å¤„æˆ‘ä»¬ç”¨æ¥å¤„ç†ä¸€ä¸‹ä¸¤ä¸ªéœ€æ±‚</p>\n<ul>\n <li>å½“å¤§æ•°è¾¾åˆ°10000æ—¶ï¼Œä¸ŠæŠ¥å¤§æ•°çš„æ•°å­—</li>\n <li>è®¡ç®—å™¨å¸è½½æ—¶ï¼Œä¸ŠæŠ¥å½“å‰çš„æ•°å­—</li>\n</ul>\n<pre><code class=\"js\">  useEffect(() =&gt; {\n    if (bigNum &gt; 10000) api.report('reach 10000')\n  }, [bigNum])\n  useEffect(() =&gt; {\n    return ()=&gt;{\n      api.reportStat(num, bigNum)\n    }\n  }, [])</code></pre>\n<h3>useRef</h3>\n<p>ä¸Šé¢ä½¿ç”¨æ¸…ç†å‡½æ•°çš„<code>useEffect</code>å†™æ³•åœ¨IDEæ˜¯ä¼šè¢«è­¦å‘Šçš„ï¼Œå› ä¸ºå†…éƒ¨ä½¿ç”¨äº†<code>num, bigNum</code>å˜é‡(ä¸å†™ä¾èµ–ä¼šé™·å…¥é—­åŒ…æ—§å€¼é™·é˜±)ï¼Œæ‰€ä»¥è¦æ±‚æˆ‘ä»¬å£°æ˜ä¾èµ–</p>\n<p>å¯æ˜¯å¦‚æœä¸ºäº†é¿å…IDEè­¦å‘Šï¼Œæˆ‘ä»¬æ”¹ä¸ºå¦‚ä¸‹æ–¹å¼æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬è¡¨è¾¾çš„æœ¬æ„ï¼Œæˆ‘ä»¬åªæ˜¯æƒ³ç»„ä»¶å¸è½½æ—¶æŠ¥å‘Šä¸€ä¸‹æ•°å­—ï¼Œè€Œä¸æ˜¯æ¯ä¸€è½®æ¸²æŸ“éƒ½è§¦å‘æ¸…ç†å‡½æ•°</p>\n<pre><code class=\"js\">  useEffect(() =&gt; {\n    return ()=&gt;{\n      api.reportStat(num, bigNum)\n    }\n  }, [num, bigNum])</code></pre>\n<p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦ç¬¬5æŠŠé’©å­<code>useRef</code>ï¼Œæ¥å¸®å¿™æˆ‘ä»¬å›ºå®šä¾èµ–äº†ï¼Œæ‰€ä»¥æ­£ç¡®çš„å†™æ³•æ˜¯</p>\n<pre><code class=\"js\">  const ref = useRef();// refæ˜¯ä¸€ä¸ªå›ºå®šçš„å˜é‡ï¼Œæ¯ä¸€è½®æ¸²æŸ“éƒ½æŒ‡å‘åŒä¸€ä¸ªå€¼\n  ref.current = {num, bigNum};// å¸®æˆ‘ä»¬è®°ä½æœ€æ–°çš„å€¼\n  useEffect(() =&gt; {\n    return () =&gt; {\n      const {num, bigNum} = ref.current;\n      reportStat(num, bigNum);\n    };\n  }, [ref]);</code></pre>\n<h3>å®Œæ•´çš„è®¡æ•°å™¨</h3>\n<p>ä½¿å®Œ5æŠŠé’©å­ï¼Œæˆ‘ä»¬å®Œæ•´çš„ç»„ä»¶å¦‚ä¸‹</p>\n<pre><code class=\"js\">function Counter() {\n  const [num, setNum] = useState(88);\n  const [bigNum, setBigNum] = useState(120);\n  const addNum = useCallback(() =&gt; setNum(num + 1), [num]);\n  const addNumBig = useCallback(() =&gt; setBigNum(bigNum + 100), [bigNum]);\n  const numBtnColor = useMemo(() =&gt; {\n    return num &gt; 100 ? \"red\" : \"green\";\n  }, [num]);\n  const bigNumBtnColor = useMemo(() =&gt; {\n    return bigNum &gt; 1000 ? \"purple\" : \"green\";\n  }, [bigNum]);\n  useEffect(() =&gt; {\n    if (bigNum &gt; 10000) report(\"reach 10000\");\n  }, [bigNum]);\n\n  const ref = useRef();\n  ref.current = {num, bigNum};\n  useEffect(() =&gt; {\n    return () =&gt; {\n      const {num, bigNum} = ref.current;\n      reportStat(num, bigNum);\n    };\n  }, [ref]);\n\n  // render ui ...\n}</code></pre>\n<p>å½“ç„¶æˆ‘ä»¬å¯ä»¥åŸºäº<code>hook</code>å¯å®šåˆ¶çš„ç‰¹æ€§ï¼Œå°†è¿™æ®µä»£ç å•ç‹¬æŠ½è±¡ä¸ºä¸€ä¸ªé’©å­ï¼Œè¿™æ ·çš„è¯åªéœ€å°†æ•°æ®å’Œæ–¹æ³•å¯¼å‡ºï¼Œä»¥ä¾¿è®©å¤šç§uiè¡¨è¾¾çš„Counterç»„ä»¶å¯ä»¥å¤ç”¨ï¼ŒåŒæ—¶ä¹Ÿåšåˆ°uiä¸ä¸šåŠ¡éš”ç¦»ï¼Œåˆ©äºç»´æŠ¤ã€‚</p>\n<pre><code class=\"js\">function useMyCounter(){\n  // .... ç•¥\n  return { num, bigNum. addNum, addNumBig, numBtnColor, bigNumBtnColor}\n}</code></pre>\n<h2>concent setup</h2>\n<p><code>hook</code>å‡½æ•°åœ¨æ¯ä¸€è½®æ¸²æŸ“æœŸé—´ä¸€å®šæ˜¯éœ€è¦å…¨éƒ¨é‡æ–°æ‰§è¡Œä¸€éçš„ï¼Œæ‰€ä»¥ä¸å¯é¿å…çš„åœ¨æ¯ä¸€è½®æ¸²æŸ“æœŸé—´éƒ½ä¼šäº§ç”Ÿå¤§é‡çš„ä¸´æ—¶é—­åŒ…å‡½æ•°ï¼Œå¦‚æœæˆ‘ä»¬èƒ½çœæ‰ä»–ä»¬ï¼Œçš„ç¡®èƒ½å¸®gcå‡è½»ä¸€äº›å›æ”¶å‹åŠ›çš„ï¼Œç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹ä½¿ç”¨<code>setup</code>æ”¹é€ å®Œæ¯•åçš„Counterä¼šæ˜¯ä»€ä¹ˆæ ·å­å§ã€‚</p>\n<p>ä½¿ç”¨<code>concent</code>éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨æ ¹ç»„ä»¶ä¹‹å‰ï¼Œå…ˆä½¿ç”¨<code>run</code>apiå¯åŠ¨å³å¯ï¼Œå› æ­¤å¤„æˆ‘ä»¬æ²¡æœ‰æ¨¡å—å®šä¹‰ï¼Œç›´æ¥è°ƒç”¨å°±å¯ä»¥äº†ã€‚</p>\n<pre><code class=\"js\">import { run } from 'concent';\n\nrun();// å…ˆå¯åŠ¨ï¼Œåœ¨render\nReactDOM.render(&lt;App /&gt;, rootEl)\n</code></pre>\n<p>æ¥ç€æˆ‘ä»¬å°†ä»¥ä¸Šé€»è¾‘ç¨åŠ æ”¹é€ ï¼Œå…¨éƒ¨åŒ…è£¹åˆ°<code>setup</code>å†…éƒ¨ï¼Œsetupå‡½æ•°å†…éƒ¨çš„é€»è¾‘åªä¼šè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œéœ€è¦ç”¨åˆ°çš„ç”±æ¸²æŸ“ä¸Šä¸‹æ–‡<code>ctx</code>æä¾›çš„apiæœ‰<code>initState</code>ã€<code>computed</code>ã€ <code>effect</code>ã€ <code>setState</code>ï¼ŒåŒæ—¶é…åˆ<code>setState</code>è°ƒç”¨æ—¶è¿˜éœ€è¦è¯»å–çš„çŠ¶æ€<code>state</code>ï¼Œä¹Ÿç”±<code>ctx</code>è·å¾—ã€‚</p>\n<pre><code class=\"js\">function setup(ctx) {// æ¸²æŸ“ä¸Šä¸‹æ–‡\n  const { initState, computed, effect, state, setState } = ctx;\n  // setupä»…åœ¨ç»„ä»¶é¦–æ¬¡æ¸²æŸ“ä¹‹å‰æ‰§è¡Œä¸€æ¬¡ï¼Œæˆ‘ä»¬å¯åœ¨å†…éƒ¨ä¹¦å†™ç›¸å…³ä¸šåŠ¡é€»è¾‘\n}</code></pre>\n<h3>initState</h3>\n<p><code>initState</code>ç”¨äºåˆå§‹åŒ–çŠ¶æ€ï¼Œæ›¿ä»£äº†<code>useState</code>ï¼Œå½“æˆ‘ä»¬çš„ç»„ä»¶çŠ¶æ€è¾ƒå¤§æ—¶ä¾ç„¶å¯ä»¥ä¸ç”¨è€ƒè™‘å¦‚ä½•åˆ‡åˆ†çŠ¶æ€ç²’åº¦ã€‚</p>\n<pre><code class=\"js\">initState({ num: 6, bigNum: 120 });</code></pre>\n<p>æ­¤å¤„ä¹Ÿæ”¯æŒå‡½æ•°æ˜¯å†™æ³•åˆå§‹åŒ–çŠ¶æ€</p>\n<pre><code class=\"js\">initState(()=&gt;({ num: 6, bigNum: 120 }));</code></pre>\n<h3>computed</h3>\n<p><code>computed</code>ç”¨äºå®šä¹‰è®¡ç®—å‡½æ•°ï¼Œä»å‚æ•°åˆ—è¡¨é‡Œè§£æ„æ—¶å°±ç¡®å®šäº†è®¡ç®—çš„è¾“å…¥ä¾èµ–ï¼Œç›¸æ¯”<code>useMemo</code>ï¼Œæ›´ç›´æ¥ä¸ä¼˜é›…ã€‚</p>\n<pre><code class=\"js\">// ä»…å½“numå‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰è§¦å‘æ­¤è®¡ç®—å‡½æ•°\ncomputed('numBtnColor', ({ num }) =&gt; (num &gt; 100 ? 'red' : 'green'));</code></pre>\n<p>æ­¤å¤„æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸¤ä¸ªè®¡ç®—å‡½æ•°ï¼Œå¯ä»¥ç”¨ä½ è®¡ç®—å¯¹è±¡æè¿°ä½“æ¥é…ç½®è®¡ç®—å‡½æ•°ï¼Œè¿™æ ·åªéœ€è°ƒç”¨ä¸€æ¬¡<code>computed</code>å³å¯</p>\n<pre><code class=\"js\">computed({\n  numBtnColor: ({ num }) =&gt; num &gt; 100 ? 'red' : 'green',\n  bigNumBtnColor: ({ bigNum }) =&gt; bigNum &gt; 1000 ? 'purple' : 'green',\n});</code></pre>\n<h3>effect</h3>\n<p><code>effect</code>çš„ç”¨æ³•å’Œ<code>useEffect</code>æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼ŒåŒºåˆ«ä»…ä»…æ˜¯ä¾èµ–æ•°ç»„ä»…ä¼ å…¥keyåç§°å³å¯ï¼ŒåŒæ—¶<code>effect</code>å†…éƒ¨å°†å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸè¿›è¡Œäº†ç»Ÿä¸€å°è£…ï¼Œç”¨æˆ·å¯ä»¥å°†ä¸šåŠ¡ä¸åšä»»ä½•ä¿®æ”¹ä¾¿è¿ç§»åˆ°ç±»ç»„ä»¶èº«ä¸Š</p>\n<pre><code class=\"js\">effect(() =&gt; {\n  if (state.bigNum &gt; 10000) api.report('reach 10000')\n}, ['bigNum'])\neffect(() =&gt; {\n  // è¿™é‡Œå¯ä»¥ä¹¦å†™é¦–æ¬¡æ¸²æŸ“å®Œæ¯•æ—¶éœ€è¦åšçš„äº‹æƒ…\n  return () =&gt; {\n      // å¸è½½æ—¶è§¦å‘çš„æ¸…ç†å‡½æ•°\n    api.reportStat(state.num, state.bigNum)\n  }\n}, []);</code></pre>\n<h3>setState</h3>\n<p>ç”¨äºä¿®æ”¹çŠ¶æ€ï¼Œæˆ‘ä»¬åœ¨<code>setup</code>å†…éƒ¨åŸºäº<code>setState</code>å®šä¹‰å®Œæ–¹æ³•åï¼Œç„¶åè¿”å›å³å¯ï¼Œæ¥ç€æˆ‘ä»¬å¯ä»¥åœ¨ä»»æ„ä½¿ç”¨æ­¤<code>setup</code>çš„ç»„ä»¶é‡Œï¼Œé€šè¿‡<code>ctx.settings</code>æ‹¿åˆ°è¿™äº›æ–¹æ³•å¥æŸ„ä¾¿å¯è°ƒç”¨</p>\n<pre><code class=\"js\">function setup(ctx) {// æ¸²æŸ“ä¸Šä¸‹æ–‡\n  const { state, setState } = ctx;\n  return {// å¯¼å‡ºæ–¹æ³•\n    addNum: () =&gt; setState({ num: state.num + 1 }),\n    addNumBig: () =&gt; setState({ bigNum: state.bigNum + 100 }),\n  }\n}</code></pre>\n<h3>å®Œæ•´çš„Setup Counter</h3>\n<p>åŸºäºä¸Šè¿°å‡ ä¸ªapiï¼Œæˆ‘ä»¬æœ€ç»ˆçš„Counterçš„é€»è¾‘ä»£ç å¦‚ä¸‹</p>\n<pre><code class=\"js\">function setup(ctx) {// æ¸²æŸ“ä¸Šä¸‹æ–‡\n  const { initState, computed, effect, state, setState } = ctx;\n  // åˆå§‹åŒ–æ•°æ®\n  initState({ num: 6, bigNum: 120 });\n  // å®šä¹‰è®¡ç®—å‡½æ•°\n  computed({\n    // å‚æ•°åˆ—è¡¨è§£æ„æ—¶å°±ç¡®å®šäº†è®¡ç®—çš„è¾“å…¥ä¾èµ–\n    numBtnColor: ({ num }) =&gt; num &gt; 100 ? 'red' : 'green',\n    bigNumBtnColor: ({ bigNum }) =&gt; bigNum &gt; 1000 ? 'purple' : 'green',\n  });\n  // å®šä¹‰å‰¯ä½œç”¨\n  effect(() =&gt; {\n    if (state.bigNum &gt; 10000) api.report('reach 10000')\n  }, ['bigNum'])\n  effect(() =&gt; {\n    return () =&gt; {\n      api.reportStat(state.num, state.bigNum)\n    }\n  }, []);\n\n  return {// å¯¼å‡ºæ–¹æ³•\n    addNum: () =&gt; setState({ num: state.num + 1 }),\n    addNumBig: () =&gt; setState({ bigNum: state.bigNum + 100 }),\n  }\n}</code></pre>\n<p>å®šä¹‰å®Œæ ¸å¿ƒçš„ä¸šåŠ¡é€»è¾‘ï¼Œç´§æ¥ç€ï¼Œæˆ‘ä»¬å¯åœ¨ä»»æ„å‡½æ•°ç»„ä»¶å†…éƒ¨ä½¿ç”¨<code>useConcent</code>è£…é…æˆ‘ä»¬å®šä¹‰å¥½çš„<code>setup</code>æ¥ä½¿ç”¨å®ƒäº†ï¼Œ<code>useConcent</code>ä¼šè¿”å›ä¸€ä¸ªæ¸²æŸ“ä¸Šä¸‹æ–‡ï¼ˆå’Œsetupå‡½æ•°å‚æ•°åˆ—è¡¨é‡ŒæŒ‡çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡å¼•ç”¨ï¼Œæœ‰æ—¶æˆ‘ä»¬ä¹Ÿç§°å®ä¾‹ä¸Šä¸‹æ–‡ï¼‰ï¼Œæˆ‘ä»¬å¯æŒ‰éœ€è·ä»<code>ctx</code>ä¸Šå–å‡ºç›®æ ‡æ•°æ®å’Œæ–¹æ³•ï¼Œé’ˆå¯¹æ­¤ç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥å¯¼å‡º<br><code>state</code>(æ•°æ®)ï¼Œ<code>settings</code>(setupæ‰“åŒ…è¿”å›çš„æ³•æ³•)ï¼Œ<code>refComputed</code>(å®ä¾‹çš„è®¡ç®—å‡½æ•°ç»“æœå®¹å™¨)è¿™3ä¸ªkeyæ¥ä½¿ç”¨å³å¯ã€‚</br></p>\n<pre><code class=\"js\">import { useConcent } from 'concent';\n\nfunction NewCounter() {\n  const { state, settings, refComputed } = useConcent(setup);\n  // const { num, bigNum } = state;\n  // const { addNum, addNumBig } = settings;\n  // const { numBtnColor, bigNumBtnColor } = refComputed;\n}</code></pre>\n<p>æˆ‘ä»¬ä¸Šé¢æåˆ°<code>setup</code>åŒæ ·å¯ä»¥è£…é…ç»™ç±»ç»„ä»¶ï¼Œä½¿ç”¨<code>register</code>å³å¯ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯è£…é…åçš„ç±»ç»„ä»¶ï¼Œå¯ä»¥ä»<code>this.ctx</code>ä¸Šç›´æ¥è·å–<code>concent</code>ä¸ºå…¶ç”Ÿæˆçš„æ¸²æŸ“ä¸Šä¸‹æ–‡ï¼ŒåŒæ—¶å‘¢<code>this.state</code>å’Œ<code>this.ctx.state</code>æ˜¯ç­‰æ•ˆçš„ï¼Œ<code>this.setState</code>å’Œ<code>this.ctx.setState</code>ä¹Ÿæ˜¯ç­‰æ•ˆçš„ï¼Œæ–¹ä¾¿ç”¨æˆ·ä»£ç 0æ”¹åŠ¨å³å¯æ¥å…¥<code>concent</code>ä½¿ç”¨ã€‚</p>\n<pre><code class=\"js\">import { register } from 'concent';\n\n@register(setup)\nclass NewClsCounter extends Component{\n  render(){\n   const { state, settings, refComputed } = this.ctx;\n  }\n}</code></pre>\n<h2>ç»“è¯­</h2>\n<p>å¯¹æ¯”åŸç”Ÿhookï¼Œ<code>setup</code>å°†ä¸šåŠ¡é€»è¾‘å›ºå®šåœ¨åªä¼šè¢«æ‰§è¡Œä¸€æ¬¡çš„å‡½æ•°å†…éƒ¨ï¼Œæä¾›äº†æ›´å‹å¥½çš„apiï¼Œä¸”åŒæ—¶å®Œç¾å…¼å®¹ç±»ç»„ä»¶ä¸å‡½æ•°ç»„ä»¶ï¼Œè®©ç”¨æˆ·å¯ä»¥é€ƒç¦»<code>hook</code>çš„ä½¿ç”¨è§„åˆ™çƒ¦æ¼ï¼ˆæƒ³æƒ³çœ‹ useEffect é…åˆ useRefï¼Œæ˜¯ä¸æ˜¯éƒ½æœ‰ä¸å°çš„è®¤çŸ¥æˆæœ¬ï¼Ÿï¼‰,è€Œä¸æ˜¯å°†è¿™äº›çº¦æŸå­¦ä¹ éšœç¢è½¬å«ç»™ç”¨æˆ·ï¼Œ åŒæ—¶å¯¹gcä¹Ÿæ›´åŠ å‹å¥½äº†ï¼Œç›¸ä¿¡å¤§å®¶éƒ½å·²é»˜è®¤äº†<code>hook</code>æ˜¯<code>react</code>çš„ä¸€ä¸ªé‡è¦å‘æ˜ï¼Œä½†æ˜¯å…¶å®å®ƒä¸æ˜¯é’ˆå¯¹ç”¨æˆ·çš„ï¼Œè€Œæ˜¯é’ˆå¯¹æ¡†æ¶çš„ï¼Œç”¨æˆ·å…¶å®æ˜¯ä¸éœ€è¦äº†è§£é‚£äº›çƒ§è„‘çš„ç»†èŠ‚ä¸è§„åˆ™çš„ï¼Œè€Œå¯¹äºconcentç”¨æˆ·æ¥è¯´ï¼Œå…¶å®åªéœ€ä¸€ä¸ªé’©å­å¼€å¯ä¸€ä¸ªä¼ é€é—¨ï¼Œå³å¯åœ¨å¦ä¸€ä¸ªç©ºé—´å†…éƒ¨å®ç°æ‰€æœ‰ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸”è¿™äº›é€»è¾‘åŒæ ·å¯ä»¥å¤ç”¨åˆ°ç±»ç»„ä»¶ä¸Šã€‚</p>\n<p>äº²çˆ±çš„å®¢å®˜çœ‹äº†è¿™ä¹ˆå¤šï¼Œè¿˜ä¸èµ¶ç´§ä¸Šæ‰‹è¯•è¯•ï¼Œä»¥ä¸‹æä¾›äº†ä¸¤ç§å†™æ³•çš„é“¾æ¥ï¼Œä¾›ä½ æŠŠç©ğŸ˜€</p>\n<li>\n <ul>\n  <li><a href=\"https://codesandbox.io/s/hook-counter-cu1i9\" rel=\"nofollow noreferrer\">åŸå§‹hook Counter</a></li>\n </ul></li>\n<ul>\n <li><a href=\"https://codesandbox.io/s/setup-counter-y7g0u\" rel=\"nofollow noreferrer\">setup Counter</a></li>\n</ul>\n<h3>one more thing</h3>\n<p>ä¸Šè¯‰ä¸¤ä¸ªhook Counterå¦‚æœæƒ³åšçŠ¶æ€å…±äº«ï¼Œæˆ‘ä»¬éœ€è¦æ”¹é€ ä»£ç æ¥å…¥<code>redux</code>æˆ–è€…è‡ªå»º<code>Context</code>ï¼Œä½†æ˜¯åœ¨<code>concent</code>çš„å¼€å‘æ¨¡å¼ä¸‹ï¼Œ<code>setup</code>æ— éœ€ä»»ä½•æ”¹é€ ï¼Œä»…ä»…åªéœ€è¦æå‰å£°æ˜ä¸€ä¸ªæ¨¡å—ï¼Œç„¶åæ³¨å†Œç»„ä»¶å†…å±äºè¯¥æ¨¡å—å³å¯ï¼Œè¿™ç§ä¸æ»‘èˆ¬çš„è¿ç§»è¿‡ç¨‹å¯ä»¥è®©ç”¨æˆ·çµæ´»åº”å¯¹å„ç§å¤æ‚åœºæ™¯ã€‚</p>\n<pre><code class=\"js\">import { run } from 'concent';\n\nrun({\n  counter:{\n    state: { num:88, bigNum: 120 },\n  },\n  //reducer: {...}, // å¦‚æ“ä½œæ•°æ®æµç¨‹å¤æ‚ï¼Œå¯å†å°†ä¸šåŠ¡æå‡åˆ°æ­¤å¤„\n})\n\n// å¯¹äºå‡½æ•°ç»„ä»¶\nuseConcent({setup});\n//  ---&gt; æ”¹ä¸º\nuseConcent({setup, module:'counter'})\n\n// å¯¹äºå‡½æ•°ç»„ä»¶\n@register({setup});\n//  ---&gt; æ”¹ä¸º\n@register({setup, module:'counter'});</code></pre>\n<ul>\n <li><a href=\"https://codesandbox.io/s/shared-counter-hetl9\" rel=\"nofollow noreferrer\">shared Counter</a></li>\n</ul>\n<h2>å®Œ</h2>\n<p>å¾€æœŸæ–‡ç« </p>\n<ul>\n <li><a href=\"https://segmentfault.com/a/1190000022935695\">ç»†èŠConcent &amp; Recoil , æ¢ç´¢reactæ•°æ®æµçš„æ–°å¼€å‘æ¨¡å¼</a></li>\n <li><a href=\"https://segmentfault.com/a/1190000022332809\">reduxã€mobxã€concentç‰¹æ€§å¤§æ¯”æ‹¼, çœ‹åç”Ÿå¦‚ä½•å¯¹å±€å‰è¾ˆ</a></li>\n</ul>\n<p><a href=\"https://github.com/concentjs/concent\" rel=\"nofollow noreferrer\">â¤ star me if you like concent ^_^</a></p>\n<p><a href=\"https://codesandbox.io/s/concent-guide-xvcej\" rel=\"nofollow noreferrer\">Edit on CodeSandbox</a><br><img src=\"https://segmentfault.com/img/remote/1460000022332831\" alt=\"https://codesandbox.io/s/concent-guide-xvcej\" title=\"https://codesandbox.io/s/concent-guide-xvcej\" /></br></p>\n<p><a href=\"https://stackblitz.com/edit/cc-multi-ways-to-wirte-code\" rel=\"nofollow noreferrer\">Edit on StackBlitz</a><br><img src=\"https://segmentfault.com/img/remote/1460000022332833\" alt=\"https://stackblitz.com/edit/cc-multi-ways-to-wirte-code\" title=\"https://stackblitz.com/edit/cc-multi-ways-to-wirte-code\" /></br></p>","descriptionType":"html","publishedDate":"Sun, 16 Aug 2020 11:03:39 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/remote/1460000023648367","linkMd5":"47f945d0758f841a94d5a32def62ad1a","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn98@2020_1/2020/08/24/23-08-22-613_13d61e813eca2336.webp","destWidth":800,"destHeight":337,"sourceBytes":128310,"destBytes":26444,"author":"é’Ÿæ­£æ¥·","articleImgCdnMap":{"https://segmentfault.com/img/remote/1460000023648367":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn98@2020_1/2020/08/24/23-08-22-613_13d61e813eca2336.webp","https://segmentfault.com/img/remote/1460000022332831":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn54@2020_6/2020/08/24/23-08-33-768_ab7bb1a669ed6d43.webp","https://segmentfault.com/img/remote/1460000022332833":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn62@2020_5/2020/08/24/23-08-34-275_d188d26ff603bb94.webp"},"publishedOrCreatedDate":1598310388567},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"Sparkä¼˜åŒ–ä¹‹å°æ–‡ä»¶æ˜¯å¦éœ€è¦åˆå¹¶?","link":"https://segmentfault.com/a/1190000023604337","description":"<p>æˆ‘ä»¬çŸ¥é“ï¼Œå¤§éƒ¨åˆ†Sparkè®¡ç®—éƒ½æ˜¯åœ¨å†…å­˜ä¸­å®Œæˆçš„ï¼Œæ‰€ä»¥Sparkçš„ç“¶é¢ˆä¸€èˆ¬æ¥è‡ªäºé›†ç¾¤(standalone, yarn, mesos, k8s)çš„èµ„æºç´§å¼ ï¼ŒCPUï¼Œç½‘ç»œå¸¦å®½ï¼Œå†…å­˜ã€‚Sparkçš„æ€§èƒ½ï¼Œæƒ³è¦å®ƒå¿«ï¼Œå°±å¾—å……åˆ†åˆ©ç”¨å¥½ç³»ç»Ÿèµ„æºï¼Œå°¤å…¶æ˜¯å†…å­˜å’ŒCPUã€‚æœ‰æ—¶å€™æˆ‘ä»¬ä¹Ÿéœ€è¦åšä¸€äº›ä¼˜åŒ–è°ƒæ•´æ¥å‡å°‘å†…å­˜å ç”¨ï¼Œä¾‹å¦‚å°†å°æ–‡ä»¶è¿›è¡Œåˆå¹¶çš„æ“ä½œã€‚</p>\n<h2>ä¸€ã€é—®é¢˜ç°è±¡</h2>\n<p>æˆ‘ä»¬æœ‰ä¸€ä¸ª15ä¸‡æ¡æ€»æ•°æ®é‡133MBçš„è¡¨ï¼Œä½¿ç”¨SELECT * FROM bi.dwd_tbl_conf_infoå…¨è¡¨æŸ¥è¯¢è€—æ—¶3minï¼Œå¦å¤–ä¸€ä¸ª500ä¸‡æ¡æ€»æ•°æ®é‡6.3Gçš„è¡¨ods_tbl_conf_detailï¼ŒæŸ¥è¯¢è€—æ—¶23ç§’ã€‚ä¸¤å¼ è¡¨å‡ä¸ºåˆ—å¼å­˜å‚¨çš„è¡¨ã€‚</p>\n<p>å¤§è¡¨æŸ¥è¯¢å¿«ï¼Œè€Œå°è¡¨åè€ŒæŸ¥è¯¢æ…¢äº†ï¼Œä¸ºä»€ä¹ˆä¼šäº§ç”Ÿå¦‚æ­¤å¥‡æ€ªçš„ç°è±¡å‘¢ï¼Ÿ</p>\n<h2>äºŒã€é—®é¢˜æ¢è¯¢</h2>\n<p>æ•°æ®é‡6.3Gçš„è¡¨æŸ¥è¯¢è€—æ—¶23ç§’ï¼Œåè€Œæ•°æ®é‡133MBçš„å°è¡¨æŸ¥è¯¢è€—æ—¶3minï¼Œè¿™éå¸¸å¥‡æ€ªã€‚æˆ‘ä»¬æ”¶é›†äº†å¯¹åº”çš„å»ºè¡¨è¯­å¥ï¼Œå‘ç°ä¸¤è€…æ²¡æœ‰å¤ªå¤§çš„å·®å¼‚ï¼Œå¤§éƒ¨åˆ†ä¸ºStringï¼Œä¸¤è¡¨çš„åˆ—æ•°ä¹Ÿç›¸å·®ä¸å¤§ã€‚</p>\n<pre><code class=\"text\">CREATE TABLE IF NOT EXISTS  `bi`.`dwd_tbl_conf_info`  (\n  `corp_id` STRING COMMENT '',\n  `dept_uuid` STRING COMMENT '',\n  `user_id` STRING COMMENT '',\n  `user_name` STRING COMMENT '',\n  `uuid` STRING COMMENT '',\n  `dtime` DATE COMMENT '',\n  `slice_number` INT COMMENT '',\n  `attendee_count` INT COMMENT '',\n  `mr_id` STRING COMMENT '',\n  `mr_pkg_id` STRING COMMENT '',\n  `mr_parties` INT COMMENT '',\n  `is_mr` TINYINT COMMENT 'R',\n  `is_live_conf` TINYINT COMMENT ''\n)</code></pre>\n<pre><code class=\"text\">CREATE TABLE IF NOT EXISTS `bi`.`ods_tbl_conf_detail` (\n    `id` string,\n    `conf_uuid` string,\n    `conf_id` string,\n    `name` string,\n    `number` string,\n    `device_type` string,\n    `j_time` bigint,\n    `l_time` bigint,\n    `media_type` string,\n    `dept_name` string,\n    `UPDATETIME` bigint,\n    `CREATETIME` bigint,\n    `user_id` string,\n    `USERAGENT` string,\n    `corp_id` string,\n    `account` string\n  )</code></pre>\n<p>å› ä¸ºä¸¤å¼ è¡¨å‡ä¸ºå¾ˆç®€å•çš„SELECTæŸ¥è¯¢æ“ä½œï¼Œæ— ä»»ä½•å¤æ‚çš„èšåˆjoinæ“ä½œï¼Œä¹Ÿæ— UDFç›¸å…³çš„æ“ä½œï¼Œæ‰€ä»¥åŸºæœ¬ç¡®è®¤æŸ¥è¯¢æ…¢çš„åº”è¯¥å‘ç”Ÿçš„è¯»è¡¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°†æ€€ç–‘çš„ç‚¹æ”¾åˆ°äº†è¯»è¡¨æ“ä½œä¸Šã€‚é€šè¿‡æŸ¥è¯¢ä¸¤ä¸ªæŸ¥è¯¢è¯­å¥çš„DAGå’Œä»»åŠ¡åˆ†å¸ƒï¼Œæˆ‘ä»¬å‘ç°äº†ä¸ä¸€æ ·çš„åœ°æ–¹ã€‚</p>\n<p>æŸ¥è¯¢å¿«çš„è¡¨ï¼ŒæŸ¥è¯¢æ—¶æ€»å…±æœ‰68ä¸ªä»»åŠ¡ï¼Œä»»åŠ¡åˆ†é…æ¯”å¦‚å‡åŒ€ï¼Œå¹³å‡7~9så·¦å³ï¼Œè€ŒæŸ¥è¯¢æ…¢çš„è¡¨ï¼ŒæŸ¥è¯¢æ—¶æ€»å…±1160ä¸ªä»»åŠ¡ï¼Œå¹³å‡ä¹Ÿæ˜¯9så·¦å³ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023604341\" alt=\"\" title=\"\" /></p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023604340\" alt=\"\" title=\"\" /></p>\n<p>è‡³æ­¤ï¼Œæˆ‘ä»¬åŸºæœ¬å‘ç°äº†çŒ«è…»æ‰€åœ¨ã€‚å¤§è¡¨6.3Gä½†æ–‡ä»¶ä¸ªæ•°å°ï¼Œåªæœ‰68ä¸ªï¼Œæ‰€ä»¥å¾ˆå¿«è·‘å®Œäº†ã€‚è€Œå°è¡¨è™½ç„¶åªæœ‰133MBï¼Œä½†æ–‡ä»¶ä¸ªæ•°ç‰¹åˆ«å¤šï¼Œå¯¼è‡´äº§ç”Ÿçš„ä»»åŠ¡ç‰¹åˆ«å¤šï¼Œè€Œç”±äºå•ä¸ªä»»åŠ¡æœ¬èº«æ¯”è¾ƒå¿«ï¼Œå¤§éƒ¨åˆ†æ—¶é—´èŠ±è´¹åœ¨ä»»åŠ¡è°ƒåº¦ä¸Šï¼Œå¯¼è‡´ä»»åŠ¡è€—æ—¶è¾ƒé•¿ã€‚</p>\n<p>é‚£å¦‚ä½•æ‰èƒ½è§£å†³å°è¡¨æŸ¥è¯¢æ…¢çš„é—®é¢˜å‘¢ï¼Ÿ</p>\n<h2>ä¸‰ã€ä¸šåŠ¡è°ƒä¼˜</h2>\n<p>é‚£ç°åœ¨æ‘†åœ¨æˆ‘ä»¬é¢å‰å°±å­˜åœ¨ç°åœ¨é—®é¢˜ï¼š</p>\n<p>1ã€ä¸ºä»€ä¹ˆå°è¡¨ä¼šäº§ç”Ÿè¿™ä¹ˆå°æ–‡ä»¶</p>\n<p>2ã€å·²ç»äº§ç”Ÿçš„è¿™ä¹ˆå°æ–‡ä»¶å¦‚ä½•åˆå¹¶</p>\n<p>å¸¦ç€è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å’Œä¸šåŠ¡çš„å¼€å‘äººå‘˜èŠäº†ä¸€ä¸ªå‘ç°å°è¡¨æ˜¯ä¸šåŠ¡å¼€å‘äººå‘˜ä»åŸå§‹æ•°æ®è¡¨ä¸­ï¼ŒæŒ‰ç…§ä¸åŒçš„æ—¶é—´åˆ‡ç‰‡æŸ¥è¯¢å¹¶åšæ•°æ®æ¸…æ´—åæ’å…¥åˆ°å°è¡¨ä¸­çš„ï¼Œè€Œç”±äºæ—¶é—´åˆ‡ç‰‡åˆ‡çš„æ¯”è¾ƒå°ï¼Œå¯¼è‡´è¿™æ ·çš„æ’å…¥æ¬¡æ•°ç‰¹åˆ«å¤šï¼Œä»è€Œäº§ç”Ÿäº†å¤§é‡çš„å°æ–‡ä»¶ã€‚</p>\n<p>é‚£ä¹ˆæˆ‘ä»¬éœ€è¦è§£å†³çš„é—®é¢˜å°±æ˜¯2ä¸ªï¼Œå¦‚ä½•æ‰èƒ½æŠŠè¿™äº›å†å²çš„å°æ–‡ä»¶è¿›è¡Œåˆå¹¶ä»¥åŠå¦‚ä½•æ‰èƒ½ä¿è¯åç»­çš„ä¸šåŠ¡æµç¨‹ä¸­ä¸å†äº§ç”Ÿå°æ–‡ä»¶ï¼Œæˆ‘ä»¬æŒ‡å¯¼ä¸šåŠ¡å¼€å‘äººå‘˜åšäº†ä»¥ä¸‹ä¼˜åŒ–ï¼š</p>\n<p>1ï¼‰ä½¿ç”¨INSERT OVERWRITE bi.dwd_tbl_conf_info SELECT * FROM bi.dwd_tbl_conf_infoåˆå¹¶ä¸‹å†å²çš„æ•°æ®ã€‚ç”±äºDLIåšäº†æ•°æ®ä¸€è‡´æ€§ä¿æŠ¤ï¼ŒOVERWRITEæœŸé—´ä¸å½±å“åŸæœ‰æ•°æ®çš„è¯»å–å’ŒæŸ¥è¯¢ï¼ŒOVERWRITEä¹‹åå°±ä¼šä½¿ç”¨æ–°çš„åˆå¹¶åçš„æ•°æ®ã€‚åˆå¹¶åå…¨è¡¨æŸ¥è¯¢ç”±åŸæ¥çš„3minç¼©çŸ­åˆ°9så†…å®Œæˆã€‚</p>\n<p>2ï¼‰åŸæœ‰è¡¨ä¿®æ”¹ä¸ºåˆ†åŒºè¡¨ï¼Œæ’å…¥æ—¶ä¸åŒæ—¶é—´æ”¾å…¥åˆ°ä¸åŒåˆ†åŒºï¼ŒæŸ¥è¯¢æ—¶åªæŸ¥è¯¢éœ€è¦çš„æ—¶é—´æ®µå†…çš„åˆ†åŒºæ•°æ®ï¼Œè¿›ä¸€æ­¥å‡å°è¯»å–æ•°æ®é‡ã€‚</p>\n<p><a href=\"https://bbs.huaweicloud.com/blogs/187212?utm_source=segmentfault&amp;utm_medium=bbs-ex&amp;utm_campaign=ei&amp;utm_content=content\" rel=\"nofollow noreferrer\"><strong>ç‚¹å‡»å…³æ³¨ï¼Œç¬¬ä¸€æ—¶é—´äº†è§£åä¸ºäº‘æ–°é²œæŠ€æœ¯~</strong></a></p>","descriptionType":"html","publishedDate":"Thu, 13 Aug 2020 03:03:41 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/remote/1460000023604341","linkMd5":"7fbcd44c2485b915a169b959a08502eb","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn90@2020_2/2020/08/24/23-08-22-943_ebf9b33d099efdb6.webp","destWidth":720,"destHeight":365,"sourceBytes":32507,"destBytes":23038,"author":"åä¸ºäº‘å¼€å‘è€…ç¤¾åŒº","articleImgCdnMap":{"https://segmentfault.com/img/remote/1460000023604341":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn90@2020_2/2020/08/24/23-08-22-943_ebf9b33d099efdb6.webp","https://segmentfault.com/img/remote/1460000023604340":"https://cdn.jsdelivr.net/gh/myreaderx32/cdn95@2020_3/2020/08/24/23-08-44-556_9e65854396b9e3eb.webp"},"publishedOrCreatedDate":1598310388568},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"ä»é›¶æ­å»º Node.js ä¼ä¸šçº§ Web æœåŠ¡å™¨ï¼ˆåäº”ï¼‰ï¼šæ€»ç»“ä¸å±•æœ›","link":"https://segmentfault.com/a/1190000023653863","description":"<h2>æ€»ç»“</h2>\n<p>æˆªæ­¢åˆ°æœ¬ç«  â€œä»é›¶æ­å»º Node.js ä¼ä¸šçº§ Web æœåŠ¡å™¨â€ ä¸»é¢˜å…±è®¡ 16 ç« å†…å®¹å°±æ›´æ–°å®Œæ¯•äº†ï¼Œå›é¡¾ç¬¬é›¶ç« æ›¾å†™é“ï¼š</p>\n<blockquote>\n <strong>æ­å»ºä¸€ä¸ª Node.js ä¼ä¸šçº§ Web æœåŠ¡å™¨å¹¶ééš¾äº‹ï¼Œåªæ˜¯å¿…é¡»åšå¥½å‡ ä¸ªå…³é”®äº‹é¡¹</strong>\n</blockquote>\n<p>è¿™å‡ ä»¶å¿…é¡»åšå¥½çš„å…³é”®äº‹é¡¹å°±æ˜¯åˆ°ç›®å‰ä¸ºæ­¢æ¯ä¸ªç« èŠ‚èŠåˆ°çš„å„ä¸ªå†…å®¹ï¼Œä¸ºæ–¹ä¾¿æŸ¥é˜…æ•´ç†æˆä»¥ä¸‹è¡¨æ ¼ï¼š</p>\n<table>\n <thead>\n  <tr>\n   <th align=\"left\">åºå·</th>\n   <th align=\"left\">æ ‡é¢˜</th>\n   <th align=\"left\">ä»£ç </th>\n  </tr>\n </thead>\n <tbody>\n  <tr>\n   <td align=\"left\">ç¬¬é›¶ç« </td>\n   <td align=\"left\"><a href=\"https://segmentfault.com/a/1190000023311123\">é™æ€æœåŠ¡</a></td>\n   <td align=\"left\"><a href=\"https://github.com/host1-tech/nodejs-server-examples/tree/master/00-static\" rel=\"nofollow noreferrer\">00-static</a></td>\n  </tr>\n  <tr>\n   <td align=\"left\">ç¬¬ä¸€ç« </td>\n   <td align=\"left\"><a href=\"https://segmentfault.com/a/1190000023324135\">æ¥å£ä¸åˆ†å±‚</a></td>\n   <td align=\"left\"><a href=\"https://github.com/host1-tech/nodejs-server-examples/tree/master/01-api-and-layering\" rel=\"nofollow noreferrer\">01-api-and-layering</a></td>\n  </tr>\n  <tr>\n   <td align=\"left\">ç¬¬äºŒç« </td>\n   <td align=\"left\"><a href=\"https://segmentfault.com/a/1190000023340748\">æ ¡éªŒ</a></td>\n   <td align=\"left\"><a href=\"https://github.com/host1-tech/nodejs-server-examples/tree/master/02-validate\" rel=\"nofollow noreferrer\">02-validate</a></td>\n  </tr>\n  <tr>\n   <td align=\"left\">ç¬¬ä¸‰ç« </td>\n   <td align=\"left\"><a href=\"https://segmentfault.com/a/1190000023351467\">ä¸­é—´ä»¶</a></td>\n   <td align=\"left\"><a href=\"https://github.com/host1-tech/nodejs-server-examples/tree/master/03-middleware\" rel=\"nofollow noreferrer\">03-middleware</a></td>\n  </tr>\n  <tr>\n   <td align=\"left\">ç¬¬å››ç« </td>\n   <td align=\"left\"><a href=\"https://segmentfault.com/a/1190000023368597\">å¼‚å¸¸å¤„ç†</a></td>\n   <td align=\"left\"><a href=\"https://github.com/host1-tech/nodejs-server-examples/tree/master/04-exception\" rel=\"nofollow noreferrer\">04-exception</a></td>\n  </tr>\n  <tr>\n   <td align=\"left\">ç¬¬äº”ç« </td>\n   <td align=\"left\"><a href=\"https://segmentfault.com/a/1190000023375620\">æ•°æ®åº“è®¿é—®</a></td>\n   <td align=\"left\"><a href=\"https://github.com/host1-tech/nodejs-server-examples/tree/master/05-database\" rel=\"nofollow noreferrer\">05-database</a></td>\n  </tr>\n  <tr>\n   <td align=\"left\">ç¬¬å…­ç« </td>\n   <td align=\"left\"><a href=\"https://segmentfault.com/a/1190000023388061\">ä¼šè¯</a></td>\n   <td align=\"left\"><a href=\"https://github.com/host1-tech/nodejs-server-examples/tree/master/06-session\" rel=\"nofollow noreferrer\">06-session</a></td>\n  </tr>\n  <tr>\n   <td align=\"left\">ç¬¬ä¸ƒç« </td>\n   <td align=\"left\"><a href=\"https://segmentfault.com/a/1190000023410877\">è®¤è¯ç™»å½•</a></td>\n   <td align=\"left\"><a href=\"https://github.com/host1-tech/nodejs-server-examples/tree/master/07-authentication\" rel=\"nofollow noreferrer\">07-authentication</a></td>\n  </tr>\n  <tr>\n   <td align=\"left\">ç¬¬å…«ç« </td>\n   <td align=\"left\"><a href=\"https://segmentfault.com/a/1190000023428158\">ç½‘ç»œå®‰å…¨</a></td>\n   <td align=\"left\"><a href=\"https://github.com/host1-tech/nodejs-server-examples/tree/master/08-security\" rel=\"nofollow noreferrer\">08-security</a></td>\n  </tr>\n  <tr>\n   <td align=\"left\">ç¬¬ä¹ç« </td>\n   <td align=\"left\"><a href=\"https://segmentfault.com/a/1190000023443092\">é…ç½®é¡¹</a></td>\n   <td align=\"left\"><a href=\"https://github.com/host1-tech/nodejs-server-examples/tree/master/09-config\" rel=\"nofollow noreferrer\">09-config</a></td>\n  </tr>\n  <tr>\n   <td align=\"left\">ç¬¬åç« </td>\n   <td align=\"left\"><a href=\"https://segmentfault.com/a/1190000023454393\">æ—¥å¿—</a></td>\n   <td align=\"left\"><a href=\"https://github.com/host1-tech/nodejs-server-examples/tree/master/10-log\" rel=\"nofollow noreferrer\">10-log</a></td>\n  </tr>\n  <tr>\n   <td align=\"left\">ç¬¬åä¸€ç« </td>\n   <td align=\"left\"><a href=\"https://segmentfault.com/a/1190000023469997\">å®šæ—¶ä»»åŠ¡</a></td>\n   <td align=\"left\"><a href=\"https://github.com/host1-tech/nodejs-server-examples/tree/master/11-schedule\" rel=\"nofollow noreferrer\">11-schedule</a></td>\n  </tr>\n  <tr>\n   <td align=\"left\">ç¬¬åäºŒç« </td>\n   <td align=\"left\"><a href=\"https://segmentfault.com/a/1190000023495075\">è¿œç¨‹è°ƒç”¨</a></td>\n   <td align=\"left\"><a href=\"https://github.com/host1-tech/nodejs-server-examples/tree/master/12-rpc\" rel=\"nofollow noreferrer\">12-rpc</a></td>\n  </tr>\n  <tr>\n   <td align=\"left\">ç¬¬åä¸‰ç« </td>\n   <td align=\"left\"><a href=\"https://segmentfault.com/a/1190000023520714\">æ–­ç‚¹è°ƒè¯•ä¸æ€§èƒ½åˆ†æ</a></td>\n   <td align=\"left\"><a href=\"https://github.com/host1-tech/nodejs-server-examples/tree/master/13-debugging-and-profiling\" rel=\"nofollow noreferrer\">13-debugging-and-profiling</a></td>\n  </tr>\n  <tr>\n   <td align=\"left\">ç¬¬åå››ç« </td>\n   <td align=\"left\"><a href=\"https://segmentfault.com/a/1190000023648009\">è‡ªåŠ¨åŒ–æµ‹è¯•</a></td>\n   <td align=\"left\"><a href=\"https://github.com/host1-tech/nodejs-server-examples/tree/master/14-testing\" rel=\"nofollow noreferrer\">14-testing</a></td>\n  </tr>\n  <tr>\n   <td align=\"left\">ç¬¬åäº”ç« </td>\n   <td align=\"left\"><a href=\"https://segmentfault.com/a/1190000023653863\">æ€»ç»“ä¸å±•æœ›</a></td>\n   <td align=\"left\">-</td>\n  </tr>\n </tbody>\n</table>\n<p>æœ¬æ–‡å·²åŒæ­¥æ”¶å½•äº Github ç¤ºä¾‹ä»£ç ä»“åº“ <a href=\"https://github.com/host1-tech/nodejs-server-examples\" rel=\"nofollow noreferrer\">host1-tech/nodejs-server-examples</a>ï¼Œå¯ä»¥ Star æˆ– Fork æ”¶è—ã€‚</p>\n<p>æ„Ÿè°¢ä¸€è·¯ä»¥æ¥è¯»è€…æœ‹å‹ä»¬çš„å…³æ³¨ä¸æ”¯æŒï¼Œç»™äº†æˆ‘åšæŒçš„åŠ¨åŠ›ã€‚æ„Ÿè°¢æŒ‡å‡ºä¸è¶³å¹¶ç»™å‡ºæ”¹è¿›å»ºè®®çš„æœ‹å‹ä»¬ï¼Œè®©æœ¬æ–‡æ›´åŠ çš„ä¸¥è°¨ã€‚</p>\n<h2>å±•æœ›</h2>\n<p>æœ‰äº› Java èƒŒæ™¯çš„å¼€å‘è€…ä¼šå¯¹ Node.js æŒæœ‰æ€€ç–‘ï¼Œå…¶å®å¤§å¯ä¸å¿…ã€‚èƒ½å¦å»ºæˆå¼ºå¤§ç¨³å®šçš„ä¼ä¸šçº§ Web æœåŠ¡å™¨çš„ç—‡ç»“ä¸åœ¨äºä¸šåŠ¡é€»è¾‘æ˜¯è¿è¡Œåœ¨ Node.js è¿˜æ˜¯ JVM ä¸Šï¼Œè€Œåœ¨äºä¼ä¸šçº§ Web æœåŠ¡å™¨çš„å…³é”®äº‹é¡¹èƒ½å¦å¾—åˆ°å¦¥å½“å¤„ç†ã€‚Node.js ç»è¿‡åä½™å¹´çš„å‘å±•ï¼Œå…·å¤‡äº†éå¸¸å®Œå–„çš„ç¤¾åŒºå‚¨å¤‡ä¸æ–¹æ¡ˆæ²‰æ·€æ¥è§£å†³ä¼ä¸šçº§ Web æœåŠ¡å™¨çš„å„ç§é—®é¢˜ï¼ŒNetflixã€PayPalã€Uberã€é˜¿é‡Œã€è…¾è®¯ç­‰å¤§ä¸­å‹ä¼ä¸šè§„æ¨¡åŒ–ä½¿ç”¨ Node.js å¼€å‘æœåŠ¡å™¨å·²æœ‰å¤šå¹´ï¼Œå†åŠ ä¸Š Node.js é«˜æ€§èƒ½ IO è®¾è®¡ä¸ JS äººæ‰å¤ç”¨å¸¦æ¥çš„æˆæœ¬èŠ‚çœï¼Œè®¸å¤šåˆåˆ›å°å¾®ä¼ä¸šä¹Ÿå¼€å§‹çº·çº·é¦–é€‰ Node.js è¿›è¡Œå¼€å‘æœåŠ¡å™¨ã€‚éšç€äº‘åŸç”ŸæŠ€æœ¯çš„å‘å±•ï¼Œé€šç”¨èƒ½åŠ›é€æ¸ä¸‹æ²‰ï¼Œå•ä¸ªèŠ‚ç‚¹æŠ€æœ¯æ ˆçš„å½±å“ä¸€ç‚¹ç‚¹è¢«æ·¡åŒ–ï¼Œä½¿ç”¨è€æŠ€æœ¯æ ˆå®ç°ä¸šåŠ¡é€»è¾‘å˜å¾—ä¸å†å¿…è¦ï¼Œä¸º Node.js æŠ€æœ¯æ ˆçš„åº”ç”¨ä¸å‘å±•è¿›ä¸€æ­¥å¸¦æ¥æ›´å¤šçš„æœºä¼šã€‚</p>\n<p>ç¬”è€…ååˆ†çœ‹å¥½ Node.js çš„å½“ä¸‹ä¸æœªæ¥ï¼Œé€šè¿‡æœ¬æ–‡å¸Œæœ›æ›´å¤šçš„äººèƒ½å¤Ÿäº†è§£ Node.jsã€æ¥å— Node.jsã€ä½¿ç”¨ Node.jsã€å–œæ¬¢ Node.jsã€‚æœ¬æ–‡åªç€é‡è¡¨è¿°äº† Web åç«¯æŠ€æœ¯æœ¬èº«å†…å®¹ï¼Œæ›´å…¨é¢çš„å®è·µæˆ‘ä¼šå°è¯•ä»¥å¼€æºé¡¹ç›®çš„æ–¹å¼æ²‰æ·€ä¸‹æ¥ï¼Œå±Šæ—¶è¿˜å¸Œæœ›è¯»è€…æœ‹å‹ä»¬ä¸åèµæ•™ï¼Œä¹Ÿæ¬¢è¿æœ‰å…´è¶£çš„æœ‹å‹ä»¬å…±åŒå‚ä¸ã€‚</p>\n<h2>æ›´å¤šé˜…è¯»</h2>\n<p><a href=\"https://segmentfault.com/a/1190000023311123\">ä»é›¶æ­å»º Node.js ä¼ä¸šçº§ Web æœåŠ¡å™¨ï¼ˆé›¶ï¼‰ï¼šé™æ€æœåŠ¡</a> <br><a href=\"https://segmentfault.com/a/1190000023324135\">ä»é›¶æ­å»º Node.js ä¼ä¸šçº§ Web æœåŠ¡å™¨ï¼ˆä¸€ï¼‰ï¼šæ¥å£ä¸åˆ†å±‚</a> <br><a href=\"https://segmentfault.com/a/1190000023340748\">ä»é›¶æ­å»º Node.js ä¼ä¸šçº§ Web æœåŠ¡å™¨ï¼ˆäºŒï¼‰ï¼šæ ¡éªŒ</a> <br><a href=\"https://segmentfault.com/a/1190000023351467\">ä»é›¶æ­å»º Node.js ä¼ä¸šçº§ Web æœåŠ¡å™¨ï¼ˆä¸‰ï¼‰ï¼šä¸­é—´ä»¶</a> <br><a href=\"https://segmentfault.com/a/1190000023368597\">ä»é›¶æ­å»º Node.js ä¼ä¸šçº§ Web æœåŠ¡å™¨ï¼ˆå››ï¼‰ï¼šå¼‚å¸¸å¤„ç†</a> <br><a href=\"https://segmentfault.com/a/1190000023375620\">ä»é›¶æ­å»º Node.js ä¼ä¸šçº§ Web æœåŠ¡å™¨ï¼ˆäº”ï¼‰ï¼šæ•°æ®åº“è®¿é—®</a> <br><a href=\"https://segmentfault.com/a/1190000023388061\">ä»é›¶æ­å»º Node.js ä¼ä¸šçº§ Web æœåŠ¡å™¨ï¼ˆå…­ï¼‰ï¼šä¼šè¯</a> <br><a href=\"https://segmentfault.com/a/1190000023410877\">ä»é›¶æ­å»º Node.js ä¼ä¸šçº§ Web æœåŠ¡å™¨ï¼ˆä¸ƒï¼‰ï¼šè®¤è¯ç™»å½•</a> <br><a href=\"https://segmentfault.com/a/1190000023428158\">ä»é›¶æ­å»º Node.js ä¼ä¸šçº§ Web æœåŠ¡å™¨ï¼ˆå…«ï¼‰ï¼šç½‘ç»œå®‰å…¨</a> <br><a href=\"https://segmentfault.com/a/1190000023443092\">ä»é›¶æ­å»º Node.js ä¼ä¸šçº§ Web æœåŠ¡å™¨ï¼ˆä¹ï¼‰ï¼šé…ç½®é¡¹</a> <br><a href=\"https://segmentfault.com/a/1190000023454393\">ä»é›¶æ­å»º Node.js ä¼ä¸šçº§ Web æœåŠ¡å™¨ï¼ˆåï¼‰ï¼šæ—¥å¿—</a> <br><a href=\"https://segmentfault.com/a/1190000023469997\">ä»é›¶æ­å»º Node.js ä¼ä¸šçº§ Web æœåŠ¡å™¨ï¼ˆåä¸€ï¼‰ï¼šå®šæ—¶ä»»åŠ¡</a> <br><a href=\"https://segmentfault.com/a/1190000023495075\">ä»é›¶æ­å»º Node.js ä¼ä¸šçº§ Web æœåŠ¡å™¨ï¼ˆåäºŒï¼‰ï¼šè¿œç¨‹è°ƒç”¨</a> <br><a href=\"https://segmentfault.com/a/1190000023520714\">ä»é›¶æ­å»º Node.js ä¼ä¸šçº§ Web æœåŠ¡å™¨ï¼ˆåä¸‰ï¼‰ï¼šæ–­ç‚¹è°ƒè¯•ä¸æ€§èƒ½åˆ†æ</a><br><a href=\"https://segmentfault.com/a/1190000023648009\">ä»é›¶æ­å»º Node.js ä¼ä¸šçº§ Web æœåŠ¡å™¨ï¼ˆåå››ï¼‰ï¼šè‡ªåŠ¨åŒ–æµ‹è¯•</a><br>ä»é›¶æ­å»º Node.js ä¼ä¸šçº§ Web æœåŠ¡å™¨ï¼ˆåäº”ï¼‰ï¼šæ€»ç»“ä¸å±•æœ›</br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></p>","descriptionType":"html","publishedDate":"Mon, 17 Aug 2020 03:21:07 +0000","feedId":6615,"bgimg":"","linkMd5":"f5c416c4a565f3e0e270206e2f8d5e93","bgimgJsdelivr":"","metaImg":"","author":"ä¹ŒæŸæœ¨","publishedOrCreatedDate":1598310388565},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"é˜¿é‡Œçš„ç§’æ€ç³»ç»Ÿæ˜¯æ€ä¹ˆè®¾è®¡çš„ï¼Ÿ","link":"https://segmentfault.com/a/1190000023651246","description":"<h2>èƒŒæ™¯</h2>\n<p>æˆ‘ä¹‹å‰å†™è¿‡ä¸€ä¸ªç§’æ€ç³»ç»Ÿçš„æ–‡ç« ä¸è¿‡æœ‰äº›è®¸ç‘•ç–µï¼Œæ‰€ä»¥æˆ‘å‡†å¤‡åœ¨ä¹‹å‰çš„åŸºç¡€ä¸Šè¿›è¡ŒäºŒæ¬¡åˆ›ä½œï¼Œä¸è¿‡è®©æˆ‘å†³å¿ƒäºŒåˆ›ç§’æ€ç³»ç»Ÿçš„åŸå› æ˜¯æˆ‘æœ€è¿‘é¢è¯•äº†å¾ˆå¤šè¯»è€…ï¼ŒåŠ¨ä¸åŠ¨å°±æ˜¯ç§’æ€ç³»ç»ŸæŠŠæˆ‘æ•´è’™è”½äº†ï¼Œæˆ‘æ‡µçš„ä¸»è¦æ˜¯ç§’æ€ç³»ç»Ÿçš„ç»†èŠ‚å¤§å®¶éƒ½ä¸çŸ¥é“ï¼Œç”šè‡³ä¸çŸ¥é“ç”µå•†å…¬å¸ä¸€ä¸ªç§’æ€ç³»ç»Ÿçš„ç»„æˆéƒ¨åˆ†ã€‚</p>\n<p>æˆ‘ä¹‹å‰åœ¨æŸç”µå•†å…¬å¸å°±æ˜¯åšç”µå•†æ´»åŠ¨çš„ï¼Œæ‰€ä»¥è¿™æ ·çš„åœºæ™¯å’Œå¾ˆå¤šè§£å†³æ–¹æ¡ˆæˆ‘æ˜¯æ¯”è¾ƒæ¸…æ¥šçš„ï¼Œé‚£æˆ‘å°±ä»æˆ‘è‡ªèº«å»å¸¦ç€å¤§å®¶çœ‹çœ‹ä¸€ä¸ªç§’æ€çš„è®¾è®¡ç»†èŠ‚ä»¥åŠä¸­é—´å„ç§è§£å†³æ–¹æ¡ˆçš„åˆ©å¼Šï¼Œä»¥ä¸‹å°±æ˜¯æˆ‘è®¾è®¡çš„ç§’æ€ç³»ç»Ÿï¼Œå‡ ä¹æ¶µç›–äº†å¸‚é¢ä¸Šæ‰€æœ‰ç§’æ€çš„å®ç°ç»†èŠ‚ï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023517942\" alt=\"\" title=\"\" /></p>\n<h2>æ­£æ–‡</h2>\n<p>é¦–å…ˆè®¾è®¡ä¸€ä¸ªç³»ç»Ÿä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç¡®è®¤æˆ‘ä»¬çš„ä¸šåŠ¡åœºæ™¯æ˜¯æ€ä¹ˆæ ·å­çš„ï¼Œæˆ‘å°±<strong>å¸¦ç€å¤§å®¶ä¸€èµ·å‡è®¾ä¸€ä¸ªåœºæ™¯</strong>å¥½å§ã€‚</p>\n<p>æˆ‘ä»¬ç°åœºè¦å–1000ä»¶ä¸‹é¢è¿™ä¸ª<strong>å©´å„¿çº¸å°¿è£¤</strong>ï¼Œç„¶åæˆ‘ä»¬æ ¹æ®ä»¥å¾€è¿™æ ·ç§’æ€æ´»åŠ¨çš„æ•°æ®ç»éªŒæ¥çœ‹ï¼Œç›®æµ‹æ¥æŠ¢è¿™100ä»¶çº¸å°¿è£¤çš„äººè¶³è¶³æœ‰10ä¸‡äººã€‚ï¼ˆå—æäººæ‰“é’±ï¼ï¼‰</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023517943\" alt=\"\" title=\"\" /></p>\n<p>ä½ ä¸€å¬ï¼Œå®Œäº†å‘€ï¼Œè¿™æˆ‘ä»¬çš„æœåŠ¡å™¨å“ªé‡Œé¡¶å¾—ä½å•Šï¼è¯´çœŸçš„ç›´æ¥æ‰“DBè‚¯å®šæŒ‚ï¼Œä½†æ˜¯åˆ«æ€¥å˜›ï¼Œæœ‰<strong>æš–ç”·</strong>æ•–ä¸™åœ¨ï¼Œä»»ä½•ç³»ç»Ÿæˆ‘ä»¬å¼€å§‹è®¾è®¡ä¹‹å‰æˆ‘ä»¬éƒ½åº”è¯¥å»æ€è€ƒ<strong>ä¼šå‡ºç°å“ªäº›é—®é¢˜</strong>ï¼Ÿè¿™é‡Œæˆ‘ç½—åˆ—äº†å‡ ä¸ªéå¸¸ç»å…¸çš„é—®é¢˜ï¼š</p>\n<h2>é—®é¢˜</h2>\n<h4>é«˜å¹¶å‘ï¼š</h4>\n<p>æ˜¯çš„<strong>é«˜å¹¶å‘</strong>è¿™ä¸ªæ˜¯æˆ‘ä»¬æƒ³éƒ½ä¸ç”¨æƒ³çš„ä¸€ä¸ªç‚¹ï¼Œä¸€ç¬é—´è¿™ä¹ˆå¤šäººè¿›æ¥è¿™ä¸æ˜¯é«˜å¹¶å‘ä»€ä¹ˆæ—¶å€™æ˜¯å‘¢ï¼Ÿ</p>\n<p>æ˜¯å§ï¼Œç§’æ€çš„ç‰¹ç‚¹å°±æ˜¯è¿™æ ·<strong>æ—¶é—´æçŸ­</strong>ã€ <strong>ç¬é—´ç”¨æˆ·é‡å¤§</strong>ã€‚</p>\n<p>æ­£å¸¸çš„åº—é“ºè¥é”€éƒ½æ˜¯ç”¨æä½çš„ä»·æ ¼é…åˆä¸ŠçŸ­ä¿¡ã€APPçš„ç²¾å‡†æ¨é€ï¼Œå¸å¼•ç‰¹åˆ«å¤šçš„ç”¨æˆ·æ¥å‚ä¸è¿™åœºç§’æ€ï¼Œ<strong>çˆ½äº†å•†å®¶è‹¦äº†å¼€å‘å‘€</strong>ã€‚</p>\n<p>ç§’æ€å¤§å®¶éƒ½çŸ¥é“å¦‚æœçœŸçš„è¥é”€åˆ°ä½ï¼Œä»·æ ¼è¯±äººï¼Œå‡ åä¸‡çš„æµé‡æˆ‘è§‰å¾—å®Œå…¨ä¸æ˜¯é—®é¢˜ï¼Œé‚£å•æœºçš„<strong>Redis</strong>æˆ‘æ„Ÿè§‰3-4Wçš„QPSè¿˜æ˜¯èƒ½é¡¶å¾—ä½çš„ï¼Œä½†æ˜¯å†é«˜äº†å°±æ²¡åŠæ³•äº†ï¼Œé‚£è¿™ä¸ªæ•°æ®éšä¾¿æä¸ªçƒ­é”€å•†å“çš„ç§’æ€å¯èƒ½éƒ½ä¸æ­¢äº†ã€‚</p>\n<p>å¤§é‡çš„è¯·æ±‚è¿›æ¥ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘çš„ç‚¹å°±å¾ˆå¤šäº†ï¼Œ<strong>ç¼“å­˜é›ªå´©</strong>ï¼Œ<strong>ç¼“å­˜å‡»ç©¿</strong>ï¼Œ<strong>ç¼“å­˜ç©¿é€</strong>è¿™äº›æˆ‘ä¹‹å‰æåˆ°çš„ç‚¹éƒ½æ˜¯æœ‰å¯èƒ½å‘ç”Ÿçš„ï¼Œå‡ºç°é—®é¢˜æ‰“æŒ‚DBé‚£å°±å¾ˆéš¾å—äº†ï¼Œæ´»åŠ¨å¤±è´¥ç”¨æˆ·ä½“éªŒå·®ï¼Œæ´»åŠ¨äººæ°”æ²¡äº†ï¼Œæœ€åèƒŒé”…çš„è¿˜æ˜¯<strong>å¼€å‘</strong>ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023517944\" alt=\"\" title=\"\" /></p>\n<h4>è¶…å–ï¼š</h4>\n<p>ä½†å‡¡æ˜¯ä¸ªç§’æ€ï¼Œéƒ½æ€•<strong>è¶…å–</strong>ï¼Œæˆ‘è¿™é‡Œä¸¾ä¾‹çš„åªæ˜¯å°¿ä¸æ¹¿ï¼Œè¦æ˜¯æ¢æˆ100ä¸ªMacBook Proï¼Œå•†å®¶çš„é¢„ç®—ç»è´¹å–100ä¸ªå¯ä»¥èµšç‚¹è¿˜å¯ä»¥é€ åŠ¿ï¼Œç»“æœä½ å†™é”™ç¨‹åºå¤šå–å‡ºå»200ä¸ªï¼Œä½ ä¸å‘è´§ç”¨æˆ·<strong>æŠ•è¯‰ä½ </strong>ï¼Œå¹³å°<strong>å°ä½ åº—</strong>ï¼Œä½ å‘è´§å°±<strong>è¡€äº</strong>ï¼Œä½ æ€ä¹ˆåŠï¼Ÿ ï¼ˆæ²¡äº‹çœ‹äº†æ•–ä¸™çš„æ–‡ç« ç›´æ¥ä¸æ€•ï¼‰</p>\n<p>é‚£æœ€ååªèƒ½<strong>æ€ä¸ªå¼€å‘ç¥­å¤©</strong>è§£æ°”äº†ï¼Œç§’æ€çš„ä»·æ ¼æœ¬æ¥å°±ä½äº†ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯ä¸æ€ä¹ˆèµšé’±çš„ï¼Œè¶…å–äº†å°±ææ€–äº†å‘€ï¼Œæ‰€ä»¥è¶…å–ä¹Ÿæ˜¯å¾ˆå…³é”®çš„ä¸€ä¸ªç‚¹ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023517945\" alt=\"\" title=\"\" /></p>\n<h4>æ¶æ„è¯·æ±‚ï¼š</h4>\n<p>ä½ è¿™ä¹ˆä½çš„ä»·æ ¼ï¼Œå‡å¦‚æˆ‘æŠ¢åˆ°äº†ï¼Œæˆ‘è½¬æ‰‹å–æ‰æˆ‘ä¸æ˜¯<strong>è¡€èµš</strong>ï¼Ÿå°±ç®—æˆ‘ä¸å–æˆ‘ä¹Ÿä¸äºå•Šï¼Œé‚£ç”¨æˆ·çŸ¥é“ï¼Œä½ çŸ¥é“ï¼Œåˆ«çš„åˆ«æœ‰ç”¨å¿ƒçš„äººï¼ˆé»‘å®¢ã€é»„ç‰›...ï¼‰è‚¯å®šä¹ŸçŸ¥é“çš„ã€‚</p>\n<p>é‚£ç®€å•å•Šï¼Œæˆ‘çŸ¥é“ä½ ä»€ä¹ˆæ—¶å€™æŠ¢ï¼Œæˆ‘æä¸ªå‡ åå°æœºå™¨æç‚¹è„šæœ¬ï¼Œæˆ‘ä¹Ÿæ¨¡æ‹Ÿå‡ºæ¥åå‡ ä¸‡ä¸ªäººå·¦å³çš„è¯·æ±‚ï¼Œé‚£æˆ‘æ˜¯ä¸æ˜¯æ„å‘³ç€æˆ‘åŸºæœ¬ä¸Šæœ‰80%çš„æˆåŠŸç‡äº†ã€‚</p>\n<p>çœŸå®æƒ…å†µå¯èƒ½è¿œè¿œä¸æ­¢ï¼Œå› ä¸ºæœºå™¨è¯·æ±‚çš„é€Ÿåº¦æ¯”äººçš„æ‰‹é€Ÿå¾€å¾€å¿«å¤ªå¤šäº†ï¼Œåœ¨è´µå·çš„æ•–ä¸™æˆ‘æ¯å¹´å›å®¶æŠ¢é«˜é“ç¥¨éƒ½æ˜¯<strong>ç§’å…‰</strong>çš„ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“æœ‰æ²¡æœ‰é»„ç‰›çš„åŠŸåŠ³ï¼Œæˆ‘è¦Dissä½ ï¼Œé»„ç‰›ã€‚æ°ä¼¦æ¼”å”±ä¼šé—¨ç¥¨æŠ¢ä¸åˆ°ï¼Œæˆ‘ä¹ŸDissä½ ã€‚</p>\n<p>Tipï¼šç§‘æ™®ä¸‹ï¼Œå°é“æ¶ˆæ¯äº†è§£åˆ°çš„ï¼Œé»„ç‰›çš„æŠ¢ç¥¨ç³»ç»Ÿï¼Œæ¯”å›½å†…å¾ˆå¤šå°å…¬å¸çš„ç³»ç»Ÿè¿˜åŠå¾ˆå¤šï¼Œæ¶æ„è®¾è®¡éƒ½æ˜¯é¡¶çº§çš„ï¼Œæˆ‘ç”¨<strong>é¡¶é…çš„æœåŠ¡</strong>åŠ ä¸Š<strong>é¡¶é…çš„æ¶æ„è®¾è®¡</strong>ï¼Œä½ è¿˜æƒ³çœ‹æ¼”å”±ä¼šï¼Ÿè¿˜æƒ³å›å®¶ï¼Ÿ</p>\n<p>ä¸è¿‡ä¸ç”¨é»„ç‰›æˆ‘å›å®¶éƒ½éš¾ï¼Œæˆ‘ä»¬äº‘è´µå·è·Ÿæˆ‘ä¸€æ ·è¦å›å®¶è¿‡å¹´çš„ä»”å¤ªå¤šäº†555ï¼</p>\n<h4>é“¾æ¥æš´éœ²ï¼š</h4>\n<p>å‰é¢å‡ ä¸ªé—®é¢˜å¤§å®¶å¯èƒ½éƒ½å¾ˆå¥½ç†è§£ï¼Œä¸€çœ‹åˆ°è¿™ä¸ªæœ‰çš„å°ä¼™ä¼´å¯èƒ½ä¼šæ¯”è¾ƒç–‘æƒ‘ï¼Œå•¥æ˜¯<strong>é“¾æ¥æš´éœ²</strong>å‘€ï¼Ÿ</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000021954610\" alt=\"\" title=\"\" /></p>\n<p>ç›¸ä¿¡æ˜¯ä¸ªå¼€å‘åŒå­¦éƒ½å¯¹è¿™ä¸ªç”»é¢ä¸€ç‚¹éƒ½ä¸é™Œç”Ÿå§ï¼Œæ‡‚ç‚¹è¡Œçš„ä»”éƒ½å¯ä»¥æ‰“å¼€è°·æ­Œçš„<strong>å¼€å‘è€…æ¨¡å¼</strong>ï¼Œç„¶åçœ‹çœ‹ä½ çš„ç½‘é¡µä»£ç ï¼Œæœ‰çš„å°±æœ‰URLï¼Œä½†æ˜¯æˆ‘å†™VUEçš„æ—¶å€™æ˜¯äº‹ä»¶è§¦å‘ç„¶åå»è°ƒç”¨æ–‡ä»¶é‡Œé¢çš„æ¥å£çœ‹æºç çœ‹ä¸åˆ°ï¼Œä½†æ˜¯æˆ‘å¯ä»¥ç‚¹å‡»ä¸€ä¸‹<strong>æŸ¥çœ‹ä½ çš„è¯·æ±‚åœ°å€</strong>å•Šï¼Œä¸è¿‡ä½ å¥½åƒå¯ä»¥å¯¹æŒ‰é’®åœ¨ç§’æ€å‰ç½®ç°ã€‚</p>\n<p>ä¸ç®¡æ€ä¹ˆæ ·å­éƒ½æœ‰å±é™©ï¼Œæ’‡å¼€å¤–é¢çš„æ‰€æœ‰çš„ä¸œè¥¿ä½ éƒ½æŒ¡ä½äº†ï¼Œä½ å–è¿™ä¸ªä¸œè¥¿å®åœ¨ä¾¿å®œå¾—è¿‡åˆ†ï¼Œæœ‰è¯±æƒ‘åŠ›ï¼Œä½ èƒ½ä¿è¯<strong>å¼€å‘ä¸åŠ¨å¿ƒ</strong>ï¼Ÿå¼€å‘çŸ¥é“åœ°å€ï¼Œåœ¨ç§’æ€çš„æ—¶å€™è‡ªå·±æå‰è¯·æ±‚ã€‚ã€‚ã€‚ï¼ˆå¼€å‘ï¼šæ€ä¹ˆTMåˆæ˜¯æˆ‘ï¼‰</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023517946\" alt=\"\" title=\"\" /></p>\n<h4>æ•°æ®åº“ï¼š</h4>\n<p>æ¯ç§’ä¸Šä¸‡ç”šè‡³åå‡ ä¸‡çš„<strong>QPS</strong>ï¼ˆæ¯ç§’è¯·æ±‚æ•°ï¼‰ç›´æ¥æ‰“åˆ°<strong>æ•°æ®åº“</strong>ï¼ŒåŸºæœ¬ä¸Šéƒ½è¦æŠŠåº“æ‰“æŒ‚æ‰ï¼Œè€Œä¸”ä½ æœåŠ¡ä¸å•å•æ˜¯åšç§’æ€çš„è¿˜æ¶‰åŠå…¶ä»–çš„ä¸šåŠ¡ï¼Œä½ æ²¡åš<strong>é™çº§ã€é™æµã€ç†”æ–­</strong>å•¥çš„ï¼Œåˆ«çš„ä¸€èµ·æŒ‚ï¼Œå°å…¬å¸çš„è¯å¯èƒ½<strong>å…¨ç«™å´©æºƒ404</strong>ã€‚</p>\n<p>åæ­£ä¸ç®¡ä½ ç§’æ€æ€ä¹ˆæŒ‚ï¼Œä½ åˆ«æŠŠåˆ«çš„ææŒ‚äº†å¯¹å§ï¼ŒææŒ‚äº†å°±ä¸æ˜¯æ€ä¸€ä¸ªç¨‹åºå‘˜èƒ½æå®šçš„ã€‚</p>\n<p>ç¨‹åºå‘˜ï¼šæˆ‘TMå¥½éš¾å•Šï¼</p>\n<p><strong>é—®é¢˜éƒ½åˆ—å‡ºæ¥äº†ï¼Œé‚£æ€ä¹ˆè®¾è®¡ï¼Œæ€ä¹ˆè§£å†³è¿™äº›é—®é¢˜å°±æ˜¯æ¥ä¸‹å»è¦è€ƒè™‘çš„äº†ï¼Œæˆ‘ä»¬å¯¹ç—‡ä¸‹è¯ã€‚</strong></p>\n<p>æˆ‘ä¼šä»æˆ‘è®¾è®¡çš„ç§’æ€ç³»ç»Ÿä»ä¸Šåˆ°ä¸‹å»ç»™å¤§å®¶ä»‹ç»æˆ‘ä»¬æ­£å¸¸ç”µå•†ç§’æ€ç³»ç»Ÿåœ¨æ¯ä¸€å±‚åšäº†äº›ä»€ä¹ˆï¼Œæ¯ä¸€å±‚å­˜åœ¨çš„é—®é¢˜ï¼Œéš¾ç‚¹ç­‰ã€‚</p>\n<p>æˆ‘ä»¬ä»å‰ç«¯å¼€å§‹ï¼š</p>\n<h2>å‰ç«¯</h2>\n<p>ç§’æ€ç³»ç»Ÿæ™®ééƒ½æ˜¯å•†åŸç½‘é¡µã€H5ã€APPã€å°ç¨‹åºè¿™å‡ é¡¹ã€‚</p>\n<p>åœ¨å‰ç«¯è¿™ä¸€å±‚å…¶å®æˆ‘ä»¬å¯ä»¥åšçš„äº‹æƒ…æœ‰å¾ˆå¤šï¼Œå¦‚æœç”¨nodeå»åšï¼Œç”šè‡³èƒ½ç›´æ¥å¤„ç†æ‰æ•´ä¸ªç§’æ€ï¼Œä½†æ˜¯nodeå…¶å®åº”è¯¥å±äºåç«¯ï¼Œæ‰€ä»¥æˆ‘ä¸è®¨è®ºnode Serviceäº†ã€‚</p>\n<h4>èµ„æºé™æ€åŒ–ï¼š</h4>\n<p>ç§’æ€ä¸€èˆ¬éƒ½æ˜¯ç‰¹å®šçš„å•†å“è¿˜æœ‰é¡µé¢æ¨¡æ¿ï¼Œç°åœ¨ä¸€èˆ¬éƒ½æ˜¯å‰åç«¯åˆ†ç¦»çš„ï¼Œé¡µé¢ä¸€èˆ¬éƒ½æ˜¯ä¸ä¼šç»è¿‡åç«¯çš„ï¼Œä½†æ˜¯å‰ç«¯ä¹Ÿè¦è‡ªå·±çš„æœåŠ¡å™¨å•Šï¼Œé‚£å°±æŠŠèƒ½æå‰æ”¾å…¥<strong>cdnæœåŠ¡å™¨</strong>çš„ä¸œè¥¿éƒ½æ”¾è¿›å»ï¼Œåæ­£æŠŠæ‰€æœ‰èƒ½æå‡æ•ˆç‡çš„æ­¥éª¤éƒ½åšä¸€ä¸‹ï¼Œå‡å°‘çœŸæ­£ç§’æ€æ—¶å€™æœåŠ¡å™¨çš„å‹åŠ›ã€‚</p>\n<h4>ç§’æ€é“¾æ¥åŠ ç›ï¼š</h4>\n<p>æˆ‘ä»¬ä¸Šé¢è¯´äº†é“¾æ¥è¦æ˜¯æå‰æš´éœ²å‡ºå»å¯èƒ½æœ‰äººç›´æ¥è®¿é—®urlå°±æå‰ç§’æ€äº†ï¼Œé‚£åˆæœ‰å°ä¼™ä¼´è¦è¯´äº†æˆ‘åšä¸ªæ—¶é—´çš„æ ¡éªŒå°±å¥½äº†å‘€ï¼Œé‚£æˆ‘å‘Šè¯‰ä½ ï¼ŒçŸ¥é“é“¾æ¥çš„åœ°å€æ¯”èµ·é¡µé¢äººå·¥ç‚¹å‡»çš„è¿˜æ˜¯æœ‰<strong>å¾ˆå¤§ä¼˜åŠ¿</strong>ã€‚</p>\n<p>æˆ‘çŸ¥é“urläº†ï¼Œé‚£æˆ‘é€šè¿‡ç¨‹åºä¸æ–­è·å–æœ€æ–°çš„åŒ—äº¬æ—¶é—´ï¼Œå¯ä»¥è¾¾åˆ°<strong>æ¯«ç§’çº§åˆ«</strong>çš„ï¼Œæˆ‘å°±åœ¨00æ¯«ç§’çš„æ—¶å€™è¯·æ±‚ï¼Œæˆ‘æ•¢è¯´ç»å¯¹æ¯”ä½ äººå·¥ç‚¹çš„æˆåŠŸç‡å¤§å¤ªå¤šäº†ï¼Œè€Œä¸”æˆ‘å¯ä»¥ä¸€æ¯«ç§’å‘é€Næ¬¡è¯·æ±‚ï¼Œæä¸å¥½ä½ å–100ä¸ªäº§å“æˆ‘å…¨æ‹¿äº†ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023517947\" alt=\"\" title=\"\" /></p>\n<p><strong>é‚£è¿™ç§æƒ…å†µæ€ä¹ˆé¿å…ï¼Ÿ</strong></p>\n<p>ç®€å•ï¼ŒæŠŠ<strong>URLåŠ¨æ€åŒ–</strong>ï¼Œå°±è¿å†™ä»£ç çš„äººéƒ½ä¸çŸ¥é“ï¼Œä½ å°±é€šè¿‡MD5ä¹‹ç±»çš„æ‘˜è¦ç®—æ³•åŠ å¯†éšæœºçš„å­—ç¬¦ä¸²å»åšurlï¼Œç„¶åé€šè¿‡å‰ç«¯ä»£ç è·å–urlåå°æ ¡éªŒæ‰èƒ½é€šè¿‡ã€‚</p>\n<p>è¿™ä¸ªåªèƒ½é˜²æ­¢ä¸€éƒ¨åˆ†æ²¡è€å¿ƒç»§ç»­ç ´è§£ä¸‹å»çš„é»‘å®¢ï¼Œæœ‰è€å¿ƒçš„äººç ”ç©¶å‡ºæ¥è¿˜æ˜¯èƒ½ç ´è§£ï¼Œåœ¨ç”µå•†åœºæ™¯å­˜åœ¨å¾ˆå¤šè¿™æ ·çš„ç¾Šæ¯›å…šï¼Œé‚£æ€ä¹ˆåšå‘¢ï¼Ÿ</p>\n<p>åé¢æˆ‘ä¼šè¯´ã€‚</p>\n<h4>é™æµï¼š</h4>\n<p>é™æµè¿™é‡Œæˆ‘è§‰å¾—åº”è¯¥åˆ†ä¸º<strong>å‰ç«¯é™æµ</strong>å’Œ<strong>åç«¯é™æµ</strong>ã€‚</p>\n<p><strong>ç‰©ç†æ§åˆ¶ï¼š</strong></p>\n<p>å¤§å®¶æœ‰æ²¡æœ‰å‘ç°æ²¡åˆ°ç§’æ€å‰ï¼Œä¸€èˆ¬æŒ‰é’®éƒ½æ˜¯<strong>ç½®ç°</strong>çš„ï¼Œåªæœ‰æ—¶é—´åˆ°äº†ï¼Œæ‰èƒ½ç‚¹å‡»ã€‚</p>\n<p>è¿™æ˜¯å› ä¸ºæ€•å¤§å®¶åœ¨æ—¶é—´å¿«åˆ°çš„æœ€åå‡ ç§’ç§’ç–¯ç‹‚è¯·æ±‚æœåŠ¡å™¨ï¼Œç„¶åè¿˜æ²¡åˆ°ç§’æ€çš„æ—¶å€™åŸºæœ¬ä¸ŠæœåŠ¡å™¨å°±æŒ‚äº†ã€‚</p>\n<p>è¿™ä¸ªæ—¶å€™å°±éœ€è¦å‰ç«¯çš„é…åˆï¼Œå®šæ—¶å»è¯·æ±‚ä½ çš„åç«¯æœåŠ¡å™¨ï¼Œè·å–æœ€æ–°çš„åŒ—äº¬æ—¶é—´ï¼Œåˆ°æ—¶é—´ç‚¹å†ç»™æŒ‰é’®å¯ç”¨çŠ¶æ€ã€‚</p>\n<p>æŒ‰é’®å¯ä»¥ç‚¹å‡»ä¹‹åä¹Ÿå¾—ç»™ä»–ç½®ç°å‡ ç§’ï¼Œä¸ç„¶ä»–ä¸€æ ·åœ¨å¼€å§‹ä¹‹åä¸€ç›´ç‚¹çš„ã€‚</p>\n<p><strong>ä½ æ•¢è¯´ä½ ä»¬ç§’æ€çš„æ—¶å€™ä¸æ˜¯è¿™æ ·çš„ï¼Ÿ</strong></p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023517948\" alt=\"\" title=\"\" /></p>\n<p><strong>å‰ç«¯é™æµ</strong>ï¼šè¿™ä¸ªå¾ˆç®€å•ï¼Œä¸€èˆ¬ç§’æ€ä¸ä¼šè®©ä½ ä¸€ç›´ç‚¹çš„ï¼Œä¸€èˆ¬éƒ½æ˜¯ç‚¹å‡»ä¸€ä¸‹æˆ–è€…ä¸¤ä¸‹ç„¶åå‡ ç§’ä¹‹åæ‰å¯ä»¥ç»§ç»­ç‚¹å‡»ï¼Œè¿™ä¹Ÿæ˜¯ä¿æŠ¤æœåŠ¡å™¨çš„ä¸€ç§æ‰‹æ®µã€‚</p>\n<p><strong>åç«¯é™æµ</strong>ï¼šç§’æ€çš„æ—¶å€™è‚¯å®šæ˜¯æ¶‰åŠåˆ°åç»­çš„è®¢å•ç”Ÿæˆå’Œæ”¯ä»˜ç­‰æ“ä½œï¼Œä½†æ˜¯éƒ½åªæ˜¯æˆåŠŸçš„å¹¸è¿å„¿æ‰ä¼šèµ°åˆ°é‚£ä¸€æ­¥ï¼Œé‚£ä¸€æ—¦100ä¸ªäº§å“å–å…‰äº†ï¼Œreturnäº†ä¸€ä¸ªfalseï¼Œå‰ç«¯ç›´æ¥ç§’æ€ç»“æŸï¼Œç„¶åä½ åç«¯ä¹Ÿå…³é—­åç»­æ— æ•ˆè¯·æ±‚çš„ä»‹å…¥äº†ã€‚</p>\n<p>Tipï¼šçœŸæ­£çš„é™æµè¿˜ä¼šæœ‰é™æµç»„ä»¶çš„åŠ å…¥ä¾‹å¦‚ï¼šé˜¿é‡Œçš„Sentinelã€Hystrixç­‰ã€‚æˆ‘è¿™é‡Œå°±ä¸å±•å¼€äº†ï¼Œå°±è¯´ä¸€ä¸‹ç‰©ç†çš„é™æµã€‚</p>\n<p>æˆ‘ä»¬å–1000ä»¶å•†å“ï¼Œè¯·æ±‚æœ‰10Wï¼Œæˆ‘ä»¬ä¸éœ€è¦æŠŠåä¸‡éƒ½æ”¾è¿›æ¥ï¼Œä½ å¯ä»¥æ”¾1Wè¯·æ±‚è¿›æ¥ï¼Œç„¶åå†è¿›è¡Œæ“ä½œï¼Œå› ä¸ºç§’æ€å¯¹äºç”¨æˆ·æœ¬èº«å°±æ˜¯é»‘ç›’çš„ï¼Œæ‰€ä»¥ä½ æ€ä¹ˆåšçš„ä»–ä»¬æ˜¯æ²¡æ„ŸçŸ¥çš„ï¼Œè‡³äºä¸ºå•¥æ”¾1Wè¿›æ¥ï¼Œè€Œä¸æ˜¯åˆšå¥½1000ï¼Œæ˜¯å› ä¸ºä¼šä¸¢æ‰ä¸€äº›è–…ç¾Šæ¯›çš„ç”¨æˆ·ï¼Œè‡³äºæ€ä¹ˆåˆ¤æ–­ï¼Œåé¢çš„é£æ§é˜¶æ®µæˆ‘ä¼šè¯´ã€‚</p>\n<h2>Nginxï¼š</h2>\n<p><strong>Nginx</strong>å¤§å®¶æƒ³å¿…éƒ½ä¸é™Œç”Ÿäº†å§ï¼Œè¿™ç©æ„æ˜¯<strong>é«˜æ€§èƒ½çš„webæœåŠ¡å™¨</strong>ï¼Œå¹¶å‘ä¹Ÿéšä¾¿é¡¶å‡ ä¸‡ä¸æ˜¯æ¢¦ï¼Œä½†æ˜¯æˆ‘ä»¬çš„<strong>Tomcat</strong>åªèƒ½é¡¶å‡ ç™¾çš„å¹¶å‘å‘€ï¼Œé‚£ç®€å•å‘€<strong>è´Ÿè½½å‡è¡¡</strong>å˜›ï¼Œä¸€å°æœåŠ¡å‡ ç™¾ï¼Œé‚£å°±å¤šæç‚¹ï¼Œåœ¨ç§’æ€çš„æ—¶å€™å¤šç§Ÿç‚¹<strong>æµé‡æœº</strong>ã€‚</p>\n<p>Tipï¼šæ®æˆ‘æ‰€çŸ¥å›½å†…æŸå¤§å‚å°±æ˜¯åœ¨å»å¹´æ˜¥èŠ‚æ´»åŠ¨æœŸé—´ç§Ÿå…‰äº†äºšæ´²æ‰€æœ‰çš„æœåŠ¡å™¨ï¼Œå°å…¬å¸ä¹Ÿå¾ˆå–œæ¬¢åœ¨åŒåä¸€æœŸé—´ä¹°æµé‡æœºæ¥é¡¶ä½å‹åŠ›ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000021954612\" alt=\"\" title=\"\" /></p>\n<p><strong>è¿™æ ·ä¸€å¯¹æ¯”æ˜¯ä¸æ˜¯è§‰å¾—ä½ çš„é›†ç¾¤èƒ½é¡¶å¾ˆå¤šäº†ã€‚</strong></p>\n<p><strong>æ¶æ„è¯·æ±‚æ‹¦æˆª</strong>ä¹Ÿéœ€è¦ç”¨åˆ°å®ƒï¼Œä¸€èˆ¬å•ä¸ªç”¨æˆ·è¯·æ±‚æ¬¡æ•°å¤ªå¤¸å¼ ï¼Œä¸åƒäººä¸ºçš„è¯·æ±‚åœ¨ç½‘å…³é‚£ä¸€å±‚å°±å¾—æ‹¦æˆªæ‰äº†ï¼Œä¸ç„¶è¯·æ±‚å¤šäº†ä»–æŠ¢ä¸æŠ¢å¾—åˆ°æ˜¯ä¸€å›äº‹ï¼ŒæœåŠ¡å™¨å‹åŠ›ä¸Šå»äº†ï¼Œå¯èƒ½å ç”¨ç½‘ç»œå¸¦å®½æˆ–è€…æŠŠ<strong>æœåŠ¡å™¨æ‰“å´©ã€ç¼“å­˜å‡»ç©¿</strong>ç­‰ç­‰ã€‚</p>\n<h2>é£æ§</h2>\n<p>æˆ‘å¯ä»¥æ˜ç¡®çš„å‘Šè¯‰å¤§å®¶ï¼Œå‰é¢çš„æ‰€æœ‰æªæ–½è¿˜æ˜¯æ‹¦ä¸ä½å¾ˆå¤šç¾Šæ¯›å…šï¼Œå› ä¸ºä»–ä»¬æ˜¯ä¸“ä¸šçš„å›¢é˜Ÿï¼Œä»–ä»¬å¯ä»¥æ³¨å†Œå¾ˆå¤šè´¦å·æ¥è–…ä½ çš„ç¾Šæ¯›ï¼Œè€Œä¸”ä¸ç”¨æœºå™¨è¯·æ±‚ï¼Œå°±ç”¨ç¾¤æ§ï¼Œæ“ä½œå‡ ä¹è·ŸçœŸå®ç”¨æˆ·ä¸€æ¨¡ä¸€æ ·ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023517949\" alt=\"\" title=\"\" /></p>\n<p><strong>é‚£æ€ä¹ˆåŠï¼Œæ˜¯ä¸æ˜¯æ— è§£äº†ï¼Ÿ</strong></p>\n<p>è¿™ä¸ªæ—¶å€™å°±éœ€è¦é£æ§åŒå­¦çš„ä»‹å…¥äº†ï¼Œåœ¨è¯·æ±‚åˆ°è¾¾åç«¯ä¹‹å‰ï¼Œé£æ§å¯ä»¥æ ¹æ®è´¦å·è¡Œä¸ºåˆ†æå‡ºè¿™ä¸ªè´¦å·æœºå™¨äººçš„æ¦‚ç‡å¤§ä¸å¤§ï¼Œæˆ‘ç°åœ¨è´Ÿè´£å…¬å¸çš„æŸäº›ç‰¹æ®Šç³»ç»Ÿï¼Œæ¯ä¸ªç”¨æˆ·çš„è¡Œä¸ºéƒ½æ˜¯ä¼šé€åˆ°æˆ‘ä»¬å¤§æ•°æ®å›¢é˜Ÿè¿›è¡Œåˆ†æå¤„ç†ï¼Œç»™ä½ æ‰“ä¸Šå¯¹åº”æ ‡ç­¾çš„ã€‚</p>\n<p>é‚£é»‘å®¢å…¶å®ä¹Ÿæœ‰åŠæ³•ï¼š<strong>å…»å·</strong></p>\n<p>ä»–ä»¬å»é»‘å¸‚ä¹°çœŸå®ç”¨æˆ·æœ‰è¿‡å¾ˆå¤šè®°å½•çš„è´¦å·ï¼Œä¹°åˆ°äº†è¿˜ä¸é—²ç€ï¼Œå¸®ä»–ä»¬å»è´­ç‰©å•¥çš„ï¼Œè®©ç³»ç»Ÿæ— æ³•è¯†åˆ«ä»–ä»¬æ˜¯é»‘å·è¿˜æ˜¯çœŸå®ç”¨æˆ·çš„å·ã€‚</p>\n<p><strong>æ€ä¹ˆåŠï¼Ÿ</strong></p>\n<p>é€šæ€ï¼æ˜¯çš„æ²¡æœ‰åŠæ³•ï¼Œåªèƒ½é€šæ€äº†ï¼Œé€šæ€çš„æ„æ€å°±æ˜¯ï¼Œæˆ‘ä»¬é€šè¿‡é£ç®¡åˆ†æå‡ºæ¥è¿™ä¸ªç”¨æˆ·æ˜¯çœŸå®ç”¨æˆ·çš„æ¦‚ç‡æ²¡æœ‰å…¶ä»–ç”¨æˆ·æ¦‚ç‡å¤§ï¼Œé‚£å°±è®¤ä¸ºä»–æ˜¯æœºå™¨äº†ï¼Œä¸¢å¼ƒä»–çš„è¯·æ±‚ã€‚</p>\n<p>ä¹‹å‰çš„é™æµæˆ‘ä»¬æ”¾è¿›æ¥10000ä¸ªè¯·æ±‚ï¼Œä½†æ˜¯æˆ‘ä»¬çœŸæ­£çš„åº“å­˜åªæœ‰1000ä¸ªï¼Œé‚£æˆ‘ä»¬å°±ç®—å‡ºæœ€æœ‰å¯èƒ½æ˜¯çœŸå®ç”¨æˆ·çš„1000äººè¿›è¡Œç§’æ€ï¼Œä¸¢å¼ƒå…¶ä»–è¯·æ±‚ï¼Œå› ä¸ºç§’æ€æœ¬æ¥å°±æ˜¯é»‘ç›’æ“ä½œçš„ï¼Œç”¨æˆ·å±‚é¢æ˜¯æ— æ„ŸçŸ¥çš„ï¼Œè¿™æ ·è®¾è®¡èƒ½è®©çœŸå®çš„ç”¨æˆ·ä¹°åˆ°ä¸œè¥¿ï¼Œè¿˜å¯ä»¥å‡å°‘è‡ªå·±è¢«è–…ç¾Šæ¯›çš„æ¦‚ç‡ã€‚</p>\n<p>é£æ§å¯ä»¥è¯´æ˜¯æµé‡è¿›å…¥çš„æœ€åä¸€é“é—¨æ§›äº†ï¼Œæ‰€ä»¥å¾ˆå¤šå…¬å¸çš„é£æ§æ˜¯å¾ˆå¼ºçš„ï¼Œèš‚èšé‡‘æœçš„é£æ§å¤§å®¶å¦‚æœäº†è§£è¿‡å°±çŸ¥é“äº†ï¼Œä½ çš„èµ„é‡‘åœ¨æ”¯ä»˜å®è¢«ç›—äº†ï¼Œä»–ä»¬æ˜¯èƒ½åšåˆ°å…¨æ¬¾è¡¥å¿æ˜¯æœ‰åŸå› çš„ã€‚</p>\n<h2>åç«¯</h2>\n<h4>æœåŠ¡å•ä¸€èŒè´£ï¼š</h4>\n<p>è®¾è®¡ä¸ªèƒ½æŠ—ä½é«˜å¹¶å‘çš„ç³»ç»Ÿï¼Œæˆ‘è§‰å¾—è¿˜æ˜¯å¾—<strong>å•ä¸€èŒè´£</strong>ã€‚</p>\n<p>ä»€ä¹ˆæ„æ€å‘¢ï¼Œå¤§å®¶éƒ½çŸ¥é“ç°åœ¨è®¾è®¡éƒ½æ˜¯<strong>å¾®æœåŠ¡çš„è®¾è®¡æ€æƒ³</strong>ï¼Œç„¶åå†ç”¨<strong>åˆ†å¸ƒå¼çš„éƒ¨ç½²æ–¹å¼</strong>ã€‚</p>\n<p>ä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸‹å•æ˜¯æœ‰ä¸ªè®¢å•æœåŠ¡ï¼Œç”¨æˆ·ç™»å½•ç®¡ç†ç­‰æœ‰ä¸ªç”¨æˆ·æœåŠ¡ç­‰ç­‰ï¼Œé‚£ä¸ºå•¥æˆ‘ä»¬ä¸ç»™ç§’æ€ä¹Ÿå¼€ä¸ªæœåŠ¡ï¼Œæˆ‘ä»¬æŠŠç§’æ€çš„ä»£ç ä¸šåŠ¡é€»è¾‘æ”¾ä¸€èµ·ã€‚</p>\n<p>å•ä¸€èŒè´£çš„å¥½å¤„å°±æ˜¯å°±ç®—ç§’æ€æ²¡æŠ—ä½ï¼Œç§’æ€åº“å´©äº†ï¼ŒæœåŠ¡æŒ‚äº†ï¼Œä¹Ÿä¸ä¼šå½±å“åˆ°å…¶ä»–çš„æœåŠ¡ã€‚ï¼ˆé«˜å¯ç”¨ï¼‰</p>\n<h4>Redisé›†ç¾¤ï¼š</h4>\n<p>ä¹‹å‰ä¸æ˜¯è¯´å•æœºçš„<strong>Redis</strong>é¡¶ä¸ä½å˜›ï¼Œé‚£ç®€å•å¤šæ‰¾å‡ ä¸ªå…„å¼Ÿå•Šï¼Œç§’æ€æœ¬æ¥å°±æ˜¯è¯»å¤šå†™å°‘ï¼Œé‚£ä½ ä»¬æ˜¯ä¸æ˜¯ç¬é—´æƒ³èµ·æ¥æˆ‘ä¹‹å‰è·Ÿä½ ä»¬æåˆ°è¿‡çš„ï¼Œ<strong>Redisé›†ç¾¤</strong>ï¼Œ<strong>ä¸»ä»åŒæ­¥</strong>ã€<strong>è¯»å†™åˆ†ç¦»</strong>ï¼Œæˆ‘ä»¬è¿˜æç‚¹<strong>å“¨å…µ</strong>ï¼Œå¼€å¯<strong>æŒä¹…åŒ–</strong>ç›´æ¥æ— æ•Œé«˜å¯ç”¨ï¼</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000020937494\" alt=\"\" title=\"\" /></p>\n<h4>åº“å­˜é¢„çƒ­ï¼š</h4>\n<p><strong>ç§’æ€çš„æœ¬è´¨ï¼Œå°±æ˜¯å¯¹åº“å­˜çš„æŠ¢å¤º</strong>ï¼Œæ¯ä¸ªç§’æ€çš„ç”¨æˆ·æ¥ä½ éƒ½å»æ•°æ®åº“æŸ¥è¯¢åº“å­˜æ ¡éªŒåº“å­˜ï¼Œç„¶åæ‰£å‡åº“å­˜ï¼Œæ’‡å¼€æ€§èƒ½å› æ•°ï¼Œä½ ä¸è§‰å¾—è¿™æ ·å¥½ç¹çï¼Œå¯¹ä¸šåŠ¡å¼€å‘äººå‘˜éƒ½ä¸å‹å¥½ï¼Œè€Œä¸”æ•°æ®åº“é¡¶ä¸ä½å•Šã€‚</p>\n<p><strong>å¼€å‘ï¼šä½ tmæ€»ç®—ä¸ºæˆ‘ç€æƒ³ä¸€æ¬¡äº†ã€‚</strong></p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023517950\" alt=\"\" title=\"\" /></p>\n<h4>é‚£æ€ä¹ˆåŠï¼Ÿ</h4>\n<p>æˆ‘ä»¬éƒ½çŸ¥é“æ•°æ®åº“é¡¶ä¸ä½ä½†æ˜¯ä»–çš„å…„å¼Ÿéå…³ç³»å‹çš„æ•°æ®åº“<strong>Redis</strong>èƒ½é¡¶å•Šï¼</p>\n<p>é‚£ä¸ç®€å•äº†ï¼Œæˆ‘ä»¬è¦å¼€å§‹ç§’æ€å‰ä½ é€šè¿‡å®šæ—¶ä»»åŠ¡æˆ–è€…è¿ç»´åŒå­¦<strong>æå‰æŠŠå•†å“çš„åº“å­˜åŠ è½½åˆ°Redisä¸­</strong>å»ï¼Œè®©æ•´ä¸ªæµç¨‹éƒ½åœ¨Redisé‡Œé¢å»åšï¼Œç„¶åç­‰ç§’æ€ä»‹ç»äº†ï¼Œå†å¼‚æ­¥çš„å»ä¿®æ”¹åº“å­˜å°±å¥½äº†ã€‚</p>\n<p>ä½†æ˜¯ç”¨äº†Rediså°±æœ‰ä¸€ä¸ªé—®é¢˜äº†ï¼Œæˆ‘ä»¬ä¸Šé¢è¯´äº†æˆ‘ä»¬é‡‡ç”¨<strong>ä¸»ä»</strong>ï¼Œå°±æ˜¯æˆ‘ä»¬ä¼šå»è¯»å–åº“å­˜ç„¶åå†åˆ¤æ–­ç„¶åæœ‰åº“å­˜æ‰å»å‡åº“å­˜ï¼Œæ­£å¸¸æƒ…å†µæ²¡é—®é¢˜ï¼Œä½†æ˜¯é«˜å¹¶å‘çš„æƒ…å†µé—®é¢˜å°±å¾ˆå¤§äº†ã€‚</p>\n<p>**å¤šå“å‡ éï¼ï¼ï¼**å°±æ¯”å¦‚ç°åœ¨åº“å­˜åªå‰©ä¸‹1ä¸ªäº†ï¼Œæˆ‘ä»¬é«˜å¹¶å‘å˜›ï¼Œ4ä¸ªæœåŠ¡å™¨ä¸€èµ·æŸ¥è¯¢äº†å‘ç°éƒ½æ˜¯è¿˜æœ‰1ä¸ªï¼Œé‚£å¤§å®¶éƒ½è§‰å¾—æ˜¯è‡ªå·±æŠ¢åˆ°äº†ï¼Œå°±éƒ½å»æ‰£åº“å­˜ï¼Œé‚£ç»“æœå°±å˜æˆäº†-3ï¼Œæ˜¯çš„åªæœ‰ä¸€ä¸ªæ˜¯çœŸçš„æŠ¢åˆ°äº†ï¼Œåˆ«çš„éƒ½æ˜¯è¶…å–çš„ã€‚å’‹åŠï¼Ÿ</p>\n<h3>äº‹åŠ¡ï¼š</h3>\n<p>Redisæœ¬èº«æ˜¯æ”¯æŒäº‹åŠ¡çš„ï¼Œè€Œä¸”ä»–æœ‰å¾ˆå¤šåŸå­å‘½ä»¤çš„ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥ç”¨LUAï¼Œè¿˜å¯ä»¥ç”¨ä»–çš„ç®¡é“ï¼Œä¹è§‚é”ä»–ä¹ŸçŸ¥æ”¯æŒã€‚</p>\n<h4>é™æµ&amp;é™çº§&amp;ç†”æ–­&amp;éš”ç¦»ï¼š</h4>\n<p>è¿™ä¸ªä¸ºå•¥è¦åšå‘¢ï¼Œä¸æ€•ä¸€ä¸‡å°±æ€•ä¸‡ä¸€ï¼Œä¸‡ä¸€ä½ çœŸçš„é¡¶ä¸ä½äº†ï¼Œ<strong>é™æµ</strong>ï¼Œé¡¶ä¸ä½å°±æŒ¡ä¸€éƒ¨åˆ†å‡ºå»ä½†æ˜¯ä¸èƒ½è¯´ä¸è¡Œï¼Œ<strong>é™çº§</strong>ï¼Œé™çº§äº†è¿˜æ˜¯è¢«æ‰“æŒ‚äº†ï¼Œ<strong>ç†”æ–­</strong>ï¼Œè‡³å°‘ä¸è¦å½±å“åˆ«çš„ç³»ç»Ÿï¼Œ<strong>éš”ç¦»</strong>ï¼Œä½ æœ¬èº«å°±ç‹¬ç«‹çš„ï¼Œä½†æ˜¯ä½ ä¼šè°ƒç”¨å…¶ä»–çš„ç³»ç»Ÿå˜›ï¼Œä½ å¿«ä¸è¡Œäº†ä½ åˆ«æ‹–ç´¯å…„å¼Ÿä»¬å•Šã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023517951\" alt=\"\" title=\"\" /></p>\n<h4>æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå‰Šå³°å¡«è°·ï¼‰ï¼š</h4>\n<p>ä¸€è¯´åˆ°è¿™ä¸ªåè¯ï¼Œå¾ˆå¤šå°ä¼™ä¼´å°±çŸ¥é“äº†ï¼Œå¯¹çš„<strong>MQ</strong>ï¼Œä½ ä¹°ä¸œè¥¿å°‘äº†ä½ ç›´æ¥100ä¸ªè¯·æ±‚æ”¹åº“æˆ‘è§‰å¾—æ²¡é—®é¢˜ï¼Œä½†æ˜¯ä¸‡ä¸€ç§’æ€ä¸€ä¸‡ä¸ªï¼Œ10ä¸‡ä¸ªå‘¢ï¼ŸæœåŠ¡å™¨æŒ‚äº†ï¼Œ<strong>ç¨‹åºå‘˜åˆè¦èƒŒé”…çš„</strong>ã€‚</p>\n<p>ç§’æ€å°±æ˜¯è¿™ç§ç¬é—´æµé‡å¾ˆé«˜ï¼Œä½†æ˜¯å¹³æ—¶åˆæ²¡æœ‰æµé‡çš„åœºæ™¯ï¼Œé‚£æ¶ˆæ¯é˜Ÿåˆ—å®Œå…¨å¥‘åˆè¿™æ ·çš„åœºæ™¯äº†å‘€ï¼Œå‰Šå³°å¡«è°·ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023517952\" alt=\"\" title=\"\" /></p>\n<p>Tipï¼š<strong>å¯èƒ½å°ä¼™ä¼´è¯´æˆ‘ä»¬ä¸šåŠ¡è¾¾ä¸åˆ°è¿™ä¸ªé‡çº§ï¼Œæ²¡å¿…è¦ã€‚ä½†æ˜¯æˆ‘æƒ³è¯´æˆ‘ä»¬å†™ä»£ç ï¼Œå°±ä¸åº”è¯¥å†™å‡ºæœ‰é€»è¾‘æ¼æ´çš„ä»£ç ï¼Œè‡³å°‘ä»¥åå…¬å¸ä½“é‡ä¸Šå»äº†ï¼Œåˆ«äººä¸€çœ‹å±…ç„¶ä¸ç”¨æ”¹ä»£ç ï¼Œä¸€çœ‹ä»£ç ä½œè€…æ˜¯æ•–ä¸™ï¼Ÿæœ‰ç‚¹ä¸œè¥¿ï¼</strong></p>\n<p>ä½ å¯ä»¥æŠŠå®ƒæ”¾æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç„¶åä¸€ç‚¹ç‚¹æ¶ˆè´¹å»æ”¹åº“å­˜å°±å¥½äº†å˜›ï¼Œä¸è¿‡å•ä¸ªå•†å“å…¶å®ä¸€æ¬¡ä¿®æ”¹å°±å¤Ÿäº†ï¼Œæˆ‘è¿™é‡Œè¯´çš„æ˜¯<strong>æŸä¸ªç‚¹å¤šä¸ªå•†å“</strong>ä¸€èµ·ç§’æ€çš„åœºæ™¯ï¼Œåƒæäº†åŒåä¸€é›¶ç‚¹ã€‚</p>\n<h2>æ•°æ®åº“</h2>\n<p>æ•°æ®åº“ç”¨MySQLåªè¦è¿æ¥æ± è®¾ç½®åˆç†ä¸€èˆ¬é—®é¢˜æ˜¯ä¸å¤§çš„ï¼Œä¸è¿‡ä¸€èˆ¬å¤§å…¬å¸ä¸ç¼ºé’±è€Œä¸”ç§’æ€è¿™æ ·çš„æ´»åŠ¨ååˆ†é¢‘ç¹ï¼Œæˆ‘ä¹‹å‰æ‰€åœ¨çš„å…¬å¸å°±æ˜¯è¿™æ ·ç§’æ€ç‰¹å–è¿™æ ·çš„åœºæ™¯ä¸€ç›´éƒ½æ˜¯ä¸é—´æ–­çš„ã€‚</p>\n<p>å•ç‹¬ç»™ç§’æ€å»ºç«‹ä¸€ä¸ªæ•°æ®åº“ï¼Œä¸ºç§’æ€æœåŠ¡ï¼Œè¡¨çš„è®¾è®¡ä¹Ÿæ˜¯ç«Ÿå¯èƒ½çš„ç®€å•ç‚¹ï¼Œç°åœ¨çš„äº’è”ç½‘æ¶æ„éƒ¨ç½²éƒ½æ˜¯<strong>åˆ†åº“</strong>çš„ã€‚</p>\n<p>è‡³äºè¡¨å°±çœ‹å¤§å®¶æ€ä¹ˆè®¾è®¡äº†ï¼Œè¯¥è®¾ç½®ç´¢å¼•çš„åœ°æ–¹è¿˜æ˜¯è¦è®¾ç½®ç´¢å¼•çš„ï¼Œå»ºå®Œåè®°å¾—ç”¨<strong>explain</strong>çœ‹çœ‹<strong>SQL</strong>çš„æ‰§è¡Œè®¡åˆ’ã€‚ï¼ˆä¸äº†è§£çš„å°ä¼™ä¼´ä¹Ÿæ²¡äº‹ï¼ŒMySQLç« èŠ‚å»åº·åº·ï¼‰</p>\n<h2>åˆ†å¸ƒå¼äº‹åŠ¡</h2>\n<p><strong>è¿™ä¸ºå•¥æˆ‘ä¸æ”¾åœ¨åç«¯è€Œæ”¾åˆ°æœ€åæ¥è®²å‘¢ï¼Ÿ</strong></p>\n<p>å› ä¸ºä¸Šé¢çš„ä»»ä½•ä¸€æ­¥éƒ½æ˜¯å¯èƒ½å‡ºé”™çš„ï¼Œè€Œä¸”æˆ‘ä»¬æ˜¯åœ¨ä¸åŒçš„æœåŠ¡é‡Œé¢å‡ºé”™çš„ï¼Œé‚£å°±æ¶‰åŠåˆ†å¸ƒå¼äº‹åŠ¡äº†ï¼Œä½†æ˜¯åˆ†å¸ƒå¼äº‹åŠ¡å¤§å®¶æƒ³çš„æ˜¯ä¸€å®šè¦æˆåŠŸä»€ä¹ˆçš„é‚£å°±ä¸å¯¹äº†ï¼Œè¿˜æ˜¯é‚£å¥è¯ï¼Œå‡ ä¸ªè¯·æ±‚ä¸¢äº†å°±ä¸¢äº†ï¼Œè¦ä¿è¯æ—¶æ•ˆå’ŒæœåŠ¡çš„å¯ç”¨å¯é ã€‚</p>\n<p>æ‰€ä»¥<strong>TCC</strong>å’Œ<strong>æœ€ç»ˆä¸€è‡´æ€§</strong>å…¶å®ä¸æ˜¯å¾ˆé€‚åˆï¼ŒTCCå¼€å‘æˆæœ¬å¾ˆå¤§ï¼Œæ‰€æœ‰æ¥å£éƒ½è¦å†™ä¸‰æ¬¡ï¼Œå› ä¸ºæ¶‰åŠTCCçš„ä¸‰ä¸ªé˜¶æ®µã€‚</p>\n<p>æœ€ç»ˆä¸€è‡´æ€§åŸºæœ¬ä¸Šéƒ½æ˜¯é è½®è®­çš„æ“ä½œå»ä¿è¯ä¸€ä¸ªæ“ä½œä¸€å®šæˆåŠŸï¼Œé‚£æ—¶æ•ˆæ€§å°±å¤§æ‰“æŠ˜æ‰£äº†ã€‚</p>\n<p>å¤§å®¶è§‰å¾—ä¸é‚£ä¹ˆå¯é çš„**ä¸¤æ®µå¼ï¼ˆ2PCï¼‰<strong>å’Œ</strong>ä¸‰æ®µå¼ï¼ˆ3PCï¼‰**å°±æ´¾ä¸Šç”¨åœºäº†ï¼Œä»–ä»¬ä¸ä¸€å®šèƒ½ä¿è¯æ•°æ®æœ€ç»ˆä¸€è‡´ï¼Œä½†æ˜¯æ•ˆç‡ä¸Šè¿˜ç®—okã€‚</p>\n<h2>æ€»ç»“</h2>\n<p>åˆ°è¿™é‡Œæˆ‘æƒ³æˆ‘å·²ç»åŸºæœ¬ä¸ŠæŠŠè¯¥è€ƒè™‘çš„ç‚¹è¿˜æœ‰å¯¹åº”çš„è§£å†³æ–¹æ¡ˆä¹Ÿéƒ½è¯´äº†ä¸€ä¸‹ï¼Œä¸çŸ¥é“è¿˜æœ‰æ²¡æœ‰æ²¡è€ƒè™‘åˆ°çš„ï¼Œä½†æ˜¯å°±ç®—æ²¡è€ƒè™‘åˆ°æˆ‘æƒ³æˆ‘è¿™ä¸ªè®¾è®¡ï¼Œåº”è¯¥ä¹Ÿèƒ½æ’‘ä½ä¸€ä¸ªå®Œæ•´çš„ç§’æ€æµç¨‹ã€‚</p>\n<p>æœ€åå¤§å®¶å†çœ‹çœ‹è¿™ä¸ªç§’æ€ç³»ç»Ÿæˆ–è®¸ä¼šæœ‰æ–°çš„æ„Ÿæ‚Ÿï¼Œæ˜¯ä¸æ˜¯ä¸€ä¸ªç³»ç»ŸçœŸçš„æ²¡æœ‰å¤§å®¶æƒ³çš„é‚£ä¹ˆç®€å•ï¼Œè€Œä¸”æˆ‘è¿˜æ˜¯æœ‰æ¼æ‰çš„ç»†èŠ‚ï¼Œè¿™æ˜¯ä¸€å®šçš„ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023517953\" alt=\"\" title=\"\" /></p>\n<p>ç§’æ€è¿™ç« æˆ‘è„‘ç»†èƒæ­»äº†å¾ˆå¤šï¼Œè€ƒè™‘äº†å¾ˆå¤šä¸ªç‚¹ï¼Œæœ€åè¿˜æ˜¯å‡ºæ¥äº†ï¼Œå¿ä¸ä½ç»™è‡ªå·±<strong>ç‚¹èµ</strong>ï¼</p>\n<h2>æ€»ç»“</h2>\n<p>æˆ‘ä»¬ç©å½’ç©ï¼Œé—¹å½’é—¹ï¼Œåˆ«æ‹¿é¢è¯•å¼€ç©ç¬‘ã€‚</p>\n<p>ç§’æ€ä¸ä¸€å®šæ˜¯æ¯ä¸ªåŒå­¦éƒ½ä¼šé—®åˆ°çš„ï¼Œè‡³å°‘è‚¯å®šæ²¡<strong>RedisåŸºç¡€</strong>é‚£æ ·å¸¸é—®ï¼Œä½†æ˜¯ä¸€æ—¦é—®åˆ°ï¼Œå¤§å®¶ä¸€å®šè¦å›ç­”åˆ°ç‚¹ä¸Šã€‚</p>\n<p>è‡³å°‘ä½ å¾—è¯´å‡º<strong>å¯èƒ½å‡ºç°çš„æƒ…å†µ</strong>ï¼Œ<strong>éœ€è¦æ³¨æ„çš„æƒ…å†µ</strong>ï¼Œä»¥åŠå¯¹äºçš„<strong>è§£å†³æ€è·¯å’Œæ–¹æ¡ˆ</strong>ï¼Œå› ä¸ºè¿™æ‰æ˜¯ä¸€ä¸ªcoderçš„åŸºæœ¬ç´ å…»ï¼Œè¿™äº›ä½ ä¸è€ƒè™‘ä½ ä¹Ÿå¾ˆéš¾å»è¿›æ­¥ã€‚</p>\n<p>æœ€åå°±æ˜¯éœ€è¦å¯¹æ•´ä¸ªé“¾è·¯æ¯”è¾ƒç†Ÿæ‚‰ï¼Œæ³¨æ„æ˜¯ä¸€ä¸ªå®Œæ•´çš„é“¾è·¯ï¼Œå‰ç«¯æ€ä¹ˆè®¾è®¡çš„å‘€ï¼Œç½‘å…³çš„ä½œç”¨å‘€ï¼Œæ€ä¹ˆ<strong>è§£å†³Redisçš„å¹¶å‘ç«äº‰</strong>å•Šï¼Œ<strong>æ•°æ®çš„åŒæ­¥æ–¹å¼</strong>å‘€ï¼Œ<strong>MQçš„ä½œç”¨</strong>å•Šç­‰ç­‰ï¼Œç›¸ä¿¡ä½ ä¼šæœ‰ä¸é”™çš„æ”¶è·ã€‚</p>\n<p>ä¸çŸ¥é“è¿™æ˜¯ä¸€æ¬¡æˆåŠŸè¿˜æ˜¯å¤±è´¥çš„äºŒåˆ›ï¼Œæˆ‘é‡Œé¢æ‰€æœ‰æåˆ°çš„æŠ€æœ¯ç»†èŠ‚æˆ‘éƒ½å†™äº†å¯¹åº”çš„æ–‡ç« ï¼Œå¤§å®¶å¯ä»¥å…³æ³¨æˆ‘å»å†å²æ–‡ç« çœ‹çœ‹ï¼Œå¤©è‰²å·²æ™šï¼Œæˆ‘æºœäº†ã€‚</p>\n<p>æˆ‘æ˜¯æ•–ä¸™ï¼Œä½ çŸ¥é“çš„è¶Šå¤šï¼Œä½ ä¸çŸ¥é“çš„è¶Šå¤šï¼Œæˆ‘ä»¬ä¸‹æœŸè§ï¼</p>\n<p><strong>äººæ‰</strong>ä»¬çš„ <strong>ã€ä¸‰è¿ã€‘</strong> å°±æ˜¯æ•–ä¸™åˆ›ä½œçš„æœ€å¤§åŠ¨åŠ›ï¼Œå¦‚æœæœ¬ç¯‡åšå®¢æœ‰ä»»ä½•é”™è¯¯å’Œå»ºè®®ï¼Œæ¬¢è¿äººæ‰ä»¬ç•™è¨€ï¼</p>","descriptionType":"html","publishedDate":"Mon, 17 Aug 2020 01:34:58 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/remote/1460000023517942","linkMd5":"9a60a00d9e8d732bd6972e94bc783594","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn21@2020_1/2020/08/24/23-08-24-093_e49a8578e1b0f2ed.webp","destWidth":800,"destHeight":739,"sourceBytes":62742,"destBytes":34606,"author":"æ•–ä¸™","articleImgCdnMap":{"https://segmentfault.com/img/remote/1460000023517942":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn21@2020_1/2020/08/24/23-08-24-093_e49a8578e1b0f2ed.webp","https://segmentfault.com/img/remote/1460000023517943":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn61@2020_6/2020/08/24/23-08-28-873_ce700e4c9aab44af.webp","https://segmentfault.com/img/remote/1460000023517944":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn66@2020_6/2020/08/24/23-08-28-682_f7b01d199b4e2d10.webp","https://segmentfault.com/img/remote/1460000023517945":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn77@2020_2/2020/08/24/23-08-28-801_26cd4b8b48fcfbad.webp","https://segmentfault.com/img/remote/1460000021954610":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn16@2020_6/2020/08/24/23-08-41-359_7ed64be196d18b41.webp","https://segmentfault.com/img/remote/1460000023517946":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn81@2020_6/2020/08/24/23-08-28-792_8d547681cad5df9e.webp","https://segmentfault.com/img/remote/1460000023517947":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn70@2020_2/2020/08/24/23-08-28-578_118080821669f072.webp","https://segmentfault.com/img/remote/1460000023517948":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn74@2020_1/2020/08/24/23-08-28-514_112237e2027b570b.webp","https://segmentfault.com/img/remote/1460000021954612":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn19@2020_6/2020/08/24/23-08-39-691_173e40b0392302c0.webp","https://segmentfault.com/img/remote/1460000023517949":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn74@2020_1/2020/08/24/23-08-28-748_386e2ac4d66c0eef.webp","https://segmentfault.com/img/remote/1460000020937494":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn77@2020_2/2020/08/24/23-08-43-037_52b4b78e1ae44485.webp","https://segmentfault.com/img/remote/1460000023517950":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn30@2020_3/2020/08/24/23-08-28-488_a496bc91ec0bd42e.webp","https://segmentfault.com/img/remote/1460000023517951":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn42@2020_6/2020/08/24/23-08-28-736_f4da94180b1b7f17.webp","https://segmentfault.com/img/remote/1460000023517952":"https://cdn.jsdelivr.net/gh/myreaderx25/cdn86@2020_1/2020/08/24/23-08-28-586_d34b134de0d771e7.webp","https://segmentfault.com/img/remote/1460000023517953":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn93@2020_4/2020/08/24/23-08-28-689_1ce65c690cf43f47.webp"},"publishedOrCreatedDate":1598310388566},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"æ´»åŠ¨å›é¡¾ä¸¨ALC Beijing é¦–åœº Meetupï¼šã€Šå¼€æºåˆ°åº•æœ‰å¤šéš¾ï¼Ÿã€‹","link":"https://segmentfault.com/a/1190000023675512","description":"<p><img src=\"https://segmentfault.com/img/bVbLvba\" alt=\"Apache ShardingSphere PMCã€äº¬ä¸œæ•°ç§‘é«˜çº§ DBA æ½˜å¨Ÿ\" title=\"Apache ShardingSphere PMCã€äº¬ä¸œæ•°ç§‘é«˜çº§ DBA æ½˜å¨Ÿ\" /></p>\n<p>8æœˆ16æ—¥ï¼ŒALC Beijing çš„é¦–æ¬¡çº¿ä¸‹æ²™é¾™æ´»åŠ¨ â€”â€” ã€Šå¼€æºåˆ°åº•æœ‰å¤šéš¾ï¼Ÿã€‹åœ¨å¾®è½¯å¤§å¦å¦‚æœŸä¸¾è¡Œã€‚æœ¬æ¬¡æ²™é¾™ä¸»è¦æ˜¯åˆ†äº«å¼€æºå¼€å‘ç»éªŒã€æ¢è®¨å¦‚ä½•è®©å¼€æºé¡¹ç›®æ›´åŠ èŒå£®æˆé•¿ï¼Œä»¥åŠåˆ†äº« ASF ç®¡ç†å’Œè¿ä½œå¼€æºé¡¹ç›®çš„æˆåŠŸä¹‹é“ã€‚</p>\n<p>Apache è½¯ä»¶åŸºé‡‘ä¼šæˆå‘˜ã€Apache è½¯ä»¶åŸºé‡‘å­µåŒ–å™¨å¯¼å¸ˆã€ALC Beijing å‘èµ·äººå§œå®ï¼›Apache Flink ç¤¾åŒº PMC member æé’°ï¼›Apache DolphinScheduler é¡¹ç›®è´Ÿè´£äººã€æ˜“è§‚ CTO éƒ­ç‚œï¼›ASF Memberã€é˜¿é‡Œå·´å·´ Tech Lead å­™é‡‘åŸï¼ˆèŠ±åï¼šé‡‘ç«¹ï¼‰ï¼›Apache APISIX PMC memberã€æ·±åœ³æ”¯æµç§‘æŠ€åˆ›å§‹äººæ¸©é“­ï¼›ALC Beijing memberã€å¼€æºå¸ƒé“å¸ˆæå»ºç››åˆ†åˆ«åœ¨æœ¬æ¬¡æ´»åŠ¨ä¸­è¿›è¡Œäº†åˆ†äº«ä¸æ¢è®¨ã€‚Apache ShardingSphere PMCã€äº¬ä¸œæ•°ç§‘é«˜çº§ DBA æ½˜å¨Ÿä¸ºæœ¬æ¬¡æ´»åŠ¨çš„ç‰¹é‚€ä¸»æŒã€‚</p>\n<p><img src=\"https://segmentfault.com/img/bVbLvcU\" alt=\"ALC Beijing é¦–åœº Meetupï¼šã€Šå¼€æºåˆ°åº•æœ‰å¤šéš¾ï¼Ÿã€‹\" title=\"ALC Beijing é¦–åœº Meetupï¼šã€Šå¼€æºåˆ°åº•æœ‰å¤šéš¾ï¼Ÿã€‹\" /></p>\n<h2>å§œå®ï¼šâ€œæˆ‘ä»¬ç¦»ç”Ÿäº§å¼€æºè¿˜æœ‰å¾ˆé•¿çš„è·¯è¦èµ°â€</h2>\n<p><img src=\"https://segmentfault.com/img/bVbLvde\" alt=\"Apache è½¯ä»¶åŸºé‡‘ä¼šæˆå‘˜ã€Apache è½¯ä»¶åŸºé‡‘å­µåŒ–å™¨å¯¼å¸ˆã€ALC Beijing å‘èµ·äººå§œå®\" title=\"Apache è½¯ä»¶åŸºé‡‘ä¼šæˆå‘˜ã€Apache è½¯ä»¶åŸºé‡‘å­µåŒ–å™¨å¯¼å¸ˆã€ALC Beijing å‘èµ·äººå§œå®\" /></p>\n<p>å§œå®è€å¸ˆä½œä¸º ALC Beijing çš„å‘èµ·äººï¼Œåœ¨æœ¬æ¬¡æ²™é¾™æ´»åŠ¨çš„ä¸»é¢˜æ¼”è®²ç¯èŠ‚ä¸­åˆ†äº«äº† ALC Beijing æˆç«‹çš„åˆè¡·ä»¥åŠ ALC Beijing ç›®å‰çš„ä¸€äº›åŠ¨æ€ã€‚</p>\n<p>å§œå®è€å¸ˆåœ¨æ²™é¾™ä¸­åˆ†äº«åˆ°ï¼Œæˆ‘å›½ä½œä¸ºå…¨çƒæœ€å¤§å¼€æºæ¶ˆè´¹å›½ï¼ŒASF åœ¨å›½å†…æœ‰å¹¿æ³›çš„ç¾¤ä¼—åŸºç¡€ï¼Œä½†å…¨çƒçš„ 300 å¤šä¸ªé¡¹ç›®ä¸­ï¼Œåªæœ‰ 19 ä¸ªé¡¹ç›®æ¥è‡ªä¸­å›½ã€‚å¦‚ä½•å°†è¿™äº›å¼€æºé¡¹ç›®ç”¨æˆ·å‘å±•è½¬æ¢æˆä¸ºç¤¾åŒºçš„è´¡çŒ®è€…ã€å¼€å‘è€…ï¼Œç”šè‡³æˆä¸ºå¼€æºé¡¹ç›®çš„å‘èµ·è€…ã€ç»´æŠ¤è€…æ˜¯ä¸€ä¸ªå€¼å¾—æ·±æ€çš„é—®é¢˜ã€‚</p>\n<p>æˆç«‹ ALC Beijing çš„åˆè¡·ï¼Œå°±æ˜¯æƒ³ç»™å¤§å®¶åšä¸€äº›äº‹æƒ…ï¼Œé€šè¿‡æ´»åŠ¨ç»™æœ¬åœ°çš„å¼€æºçˆ±å¥½è€…ä¸€ä¸ªèšåœ¨ä¸€èµ·çš„æœºä¼šï¼Œé€šè¿‡åˆ†äº«å¼€æºå¼€å‘çš„ç»éªŒï¼Œé¼“åŠ±æ›´å¤šäººå‚ä¸åˆ°æˆ‘ä»¬çš„å¼€å‘è¿‡ç¨‹ä¸­æ¥ï¼Œå¸®åŠ©æœ¬åœŸçš„å¼€æºé¡¹ç›®æ›´å¥½çš„å‘å±•ã€‚å§œå®è€å¸ˆä¹Ÿè¡¨ç¤ºå¸Œæœ›æ›´å¤šåŒå­¦å¯ä»¥å…ˆä»å¿—æ„¿è€…å¼€å§‹ï¼Œä¸ç¤¾åŒºå¤šå¤šäº’åŠ¨ï¼Œä¸ ALC Beijing å…±åŒæˆé•¿ã€‚</p>\n<h2>æé’°ï¼šâ€œåšä¸­æ–‡ç¤¾åŒºé¦–å…ˆæœ€éœ€è¦è§£å†³çš„é—®é¢˜ï¼Œæ˜¯æŠŠå…¥é—¨çš„é—¨æ§›é™ä½â€</h2>\n<p>æé’°è€å¸ˆæ˜¯ Apache Flink ç¤¾åŒº PMC memberï¼Œåœ¨æœ¬æ¬¡æ²™é¾™ä¸­ä¸»è¦è¿›è¡Œäº†ä¸‰éƒ¨åˆ†å†…å®¹çš„åˆ†äº«ã€‚</p>\n<p>é¦–å…ˆæé’°è€å¸ˆä¸ºåœ¨åœºå’Œçº¿ä¸Šçš„åŒå­¦è¿›è¡Œäº† Apache Flink çš„èƒŒæ™¯ä»¥åŠå‘å±•å†ç¨‹çš„ä»‹ç»ã€‚è°ˆåˆ° Flink ä¸­æ–‡ç¤¾åŒºç»„å»ºçš„åŸå› ï¼Œæé’°è€å¸ˆè¡¨ç¤ºæ˜¯ä¸ºäº†æŠŠ Apache Flink åœ¨å›½å†…è¿›è¡Œæœ¬åœŸåŒ–ï¼Œä» 2018 å¹´ 6 æœˆè·å¾—å®˜æ–¹æˆæƒæ­£å¼å¼€å§‹è¿›è¡Œå›¢é˜ŸåŒ–è¿è¥ï¼Œå¹¶é¢å‘å¼€å‘è€…è¿›è¡Œæ²‰æ·€ï¼Œé€šè¿‡ç»„ç»‡çº¿ä¸Šæˆ–çº¿ä¸‹çš„æ´»åŠ¨ï¼Œè®©åœˆå­å¾—åˆ°è¿›ä¸€æ­¥çš„æ‰©å±•ã€‚</p>\n<p>æœ€åï¼Œæé’°è€å¸ˆä¹Ÿåˆ†äº«äº†åœ¨ç»„å»ºä¸­æ–‡ç¤¾åŒºè¿‡ç¨‹ä¸­é‡åˆ°çš„å‘ä¸å›°éš¾ï¼Œå¹¶ç»“åˆè‡ªèº«å›¢é˜Ÿçš„ç»å†ä¸å¤§å®¶åˆ†äº«äº†ç›¸å¯¹åº”çš„ä¸¾æªä»¥åŠç»éªŒã€‚</p>\n<p>â€œåšä¸­æ–‡ç¤¾åŒºé¦–å…ˆæœ€éœ€è¦è§£å†³çš„é—®é¢˜ï¼Œæ˜¯æŠŠå…¥é—¨çš„é—¨æ§›é™ä½ã€‚â€â€œè¦æ€è€ƒæ€ä¹ˆæ ·æ²‰æ·€ç›¸å…³çš„èµ„æ–™ï¼Œæä¾›ç»Ÿä¸€çš„å…¥å£ï¼Œè®©åˆå­¦è€…æˆ–è€…çˆ±å¥½è€…èƒ½å¤Ÿæ–¹ä¾¿çš„è·å–ä¿¡æ¯ï¼Œè¿™ä¸ªéå¸¸å…³é”®ã€‚â€</p>\n<h2>éƒ­ç‚œï¼šâ€œçœŸæ­£çš„å¼€æºï¼Œæ˜¯æ‰¾åˆ°ä½ çš„ç¬¬ä¸€ä¸ªå¼€å‘è€…â€</h2>\n<p><img src=\"https://segmentfault.com/img/bVbLvd2\" alt=\"Apache DolphinScheduler é¡¹ç›®è´Ÿè´£äººã€æ˜“è§‚ CTO éƒ­ç‚œ\" title=\"Apache DolphinScheduler é¡¹ç›®è´Ÿè´£äººã€æ˜“è§‚ CTO éƒ­ç‚œ\" /></p>\n<p>éƒ­ç‚œè€å¸ˆåœ¨æœ¬æ¬¡æ²™é¾™æ´»åŠ¨ä¸­ï¼Œä¸»è¦å’Œå¤§å®¶åˆ†äº«äº†æœ¬åœ°å¼€æºé¡¹ç›®å¦‚ä½•æ‰èƒ½èµ°å‘ä¸–ç•Œã€‚</p>\n<p>åœ¨åˆ†äº«ä¸­ï¼Œéƒ­ç‚œè€å¸ˆé¦–å…ˆå’Œå¤§å®¶è¯¦ç»†è®²äº† Dolphin Scheduler é¡¹ç›®è¿›å…¥ Apache çš„æ•…äº‹ã€‚ä»ä¸€è…”çƒ­è¡€ä½†æ— äººé—®æ´¥ï¼Œåˆ°å‘ç°å¼€æºçš„æ ¸å¿ƒæ˜¯äº§å“ç†å¿µä»¥åŠæ‰¾åˆ°â€œç¬¬ä¸€ä¸ªå¼€å‘è€…ç”¨æˆ·â€ï¼Œéƒ­ç‚œè€å¸ˆåˆ†äº«äº†æ˜“è§‚æ›¾èµ°è¿‡ä¸€äº›å¼¯è·¯ã€‚</p>\n<p>ä¸ºäº†æ¨ç¿»â€œåœ¨ä¸­å›½åªæœ‰å…è´¹ï¼Œæ²¡æœ‰å¼€æºâ€çš„è¯´æ³•ï¼Œæ˜“è§‚é€šè¿‡ä¸€å¹´çš„ç­¹å¤‡æŠŠå†…éƒ¨ä½¿ç”¨çš„äº§å“ Dolphin Scheduler è¿›è¡Œäº†å¼€æºï¼Œå¹¶é¡ºåˆ©çš„åŠ å…¥ Apache å­µåŒ–å™¨ã€‚</p>\n<p>åœ¨åˆ†äº«çš„æœ€åï¼Œéƒ­ç‚œè€å¸ˆä¹Ÿåˆ†äº«äº†åœ¨å±¡è´¥å±¡æˆ˜çš„å¼€æºè¿‡ç¨‹ä¸­æ”¶è·çš„ç»éªŒï¼š</p>\n<ul>\n <li>å¼€æºï¼Œäº§å“æ˜¯åŸºç¡€ï¼Œä½ è¦åƒç«é”…ä¸€æ ·ï¼Œè‡ªå·±æ¥å‡èšä½ çš„å¼€å‘è€…ï¼›</li>\n <li>åšå¼€æºï¼Œç¤¾åŒºä¼˜å…ˆï¼›</li>\n <li>å¼€æºæ˜¯ä¸€ç§ç²¾ç¥ï¼Œæ˜¯ä¸€è¾ˆå­çš„äº‹å„¿ï¼Œéœ€è¦ä¸æ–­çš„åšæŒã€ä¸æ–­çš„åŠªåŠ›ã€‚</li>\n</ul>\n<hr>\n <p>é™¤äº†ä¸‰ä½è€å¸ˆçš„ä¸»é¢˜åˆ†äº«å¤–ï¼Œä¸ä¼šå˜‰å®¾è¿˜é’ˆå¯¹éƒ¨åˆ†å¼€æºç›¸å…³é—®é¢˜è¿›è¡Œäº†åœ†æ¡Œè®¨è®ºï¼Œå¹¶ä¸ç°åœºä»¥åŠçº¿ä¸Šçš„è§‚ä¼—è¿›è¡Œäº†äº’åŠ¨äº¤æµï¼ˆè¯¦ç»†çš„æ²™é¾™å†…å®¹è¿‘æœŸä¼šäº SegmentFault ç¤¾åŒºä»¥åŠ ALC Beijing å®˜æ–¹æ¸ é“è¿›è¡Œå‘å¸ƒï¼Œæ•¬è¯·æœŸå¾…ï¼‰ã€‚</p>\n <p><img src=\"https://segmentfault.com/img/bVbLveu\" alt=\"ALC Beijing é¦–åœº Meetupï¼šã€Šå¼€æºåˆ°åº•æœ‰å¤šéš¾ï¼Ÿã€‹\" title=\"ALC Beijing é¦–åœº Meetupï¼šã€Šå¼€æºåˆ°åº•æœ‰å¤šéš¾ï¼Ÿã€‹\" /></p>\n <p>æœ¬æ¬¡æ²™é¾™æ´»åŠ¨çš„æˆåŠŸä¸¾åŠï¼Œä»£è¡¨ ALC Beijing ä¸å…¶åˆä½œä¼™ä¼´æ­£åœ¨è¿›ä¸€æ­¥æ¨è¿›å¼€æºæ–‡åŒ–ä»¥åŠå¼€æºé¡¹ç›®çš„å‘å±•ï¼Œä¹Ÿæ„å‘³ç€å¼€æºä»ä¸šè€…ä»¥åŠçˆ±å¥½è€…æœ‰äº†ä¸€ä¸ªæ–°çš„äº¤æµä¸æ²Ÿé€šçš„å¹³å°ã€æ¸ é“ã€‚</p>\n <p>ALC Beijing åç»­ä¹Ÿå°†ä¸å¼€æºåˆä½œä¼™ä¼´å…±åŒè‡´åŠ›äºé€šè¿‡ï¼ˆä½†ä¸é™äºï¼‰ä¸‹è¿°è¡ŒåŠ¨å¸®åŠ©å¼€æºçˆ±å¥½è€…æ›´å¥½çš„åœ¨ Apache ç¤¾åŒºç”Ÿæ ¹å‘èŠ½ï¼š</p>\n <ul>\n  <li>ä¸¾åŠçº¿ä¸Šå’Œçº¿ä¸‹æ²™é¾™ï¼Œå°†æœ¬åœ°çš„å¼€å‘è€…ä¸ç”¨æˆ·èšç„¦åœ¨ä¸€èµ·ï¼›</li>\n  <li>é€šè¿‡åˆ†äº«å¼€æºå¼€å‘ç»éªŒï¼Œé¼“åŠ±æ›´å¤šçš„äººå‚ä¸åˆ° ASF çš„é¡¹ç›®å¼€å‘ä¸­æ¥ï¼›</li>\n  <li>ä¸º ASF çš„é¡¹ç›®å¯»æ‰¾ç›¸äº’åˆä½œçš„æœºä¼šï¼Œè®©è¿™äº›é¡¹ç›®èƒ½å¤Ÿæ›´åŠ èŒå£®çš„æˆé•¿ï¼›</li>\n  <li>ä»‹ç» ASF ç®¡ç†å’Œè¿ä½œå¼€æºé¡¹ç›®çš„æˆåŠŸä¹‹é“ï¼Œå¸®åŠ©å¤§å®¶æ›´å¥½åœ°è¿ä½œå¼€æºé¡¹ç›®ã€‚</li>\n </ul>\n <p>â€œåœ¨ä¸­å›½ï¼Œå¼€æºçš„æ—¶ä»£æ­£åœ¨è§‰é†’ï¼Œéœ€è¦æ¯ä¸€ä½å°ä¼™ä¼´ä¸æ‡ˆçš„åŠªåŠ›ï¼Œæœ€ç»ˆçš„è®©å¼€æºç²¾ç¥åœ¨ä¸­å›½æ‹¨äº‘è§æ—¥ï¼Œéåœ°ç”ŸèŠ±ã€‚â€è¿™æ˜¯éƒ­ç‚œè€å¸ˆåœ¨æ²™é¾™æ´»åŠ¨ä¸­åˆ†äº«çš„ä¸€ä¸ªè§‚ç‚¹ï¼Œä¹Ÿæ˜¯æ‰€æœ‰å¼€æºè¡Œä¸šä»ä¸šè€…å…±åŒçš„æœŸè®¸ã€‚</p>\n <p><img src=\"https://segmentfault.com/img/bVbLueg\" alt=\"ALC Beijing é¦–åœº Meetupï¼šã€Šå¼€æºåˆ°åº•æœ‰å¤šéš¾ï¼Ÿã€‹\" title=\"ALC Beijing é¦–åœº Meetupï¼šã€Šå¼€æºåˆ°åº•æœ‰å¤šéš¾ï¼Ÿã€‹\" /></p>\n <hr>\n  <p>SegmentFault ä½œä¸ºæœ¬æ¬¡æ´»åŠ¨ä»¥åŠ ALC Beijing çš„åª’ä½“åˆä½œä¼™ä¼´ï¼Œä¸€ç›´éå¸¸é‡è§†å¼€æºæ–‡åŒ–ä»¥åŠå¼€æºç”Ÿæ€çš„ä¼ æ’­ä¸å»ºè®¾ï¼Œå¹¶äºä»Šå¹´ 5 æœˆä»½æ¨å‡ºäº†<a href=\"https://segmentfault.com/a/1190000022680721\">ã€ŒSFOSSP - å¼€æºé¡¹ç›®æ‰¶æŒè®¡åˆ’ã€</a>ï¼Œç›®å‰å·²ç»åŠ©åŠ›æ•°åä½™ä¸ªå¼€æºé¡¹ç›®è¿›è¡Œå®£ä¼ æ¨å¹¿ã€‚</p>\n  <p>åç»­ä¹ŸæœŸå¾…å’Œ ALC Beijing ä»¥åŠå…¶ä»–å¼€æºç¤¾åŒºã€å¼€æºé¡¹ç›®å›¢é˜Ÿã€å¼€æºä»ä¸šè€…å…±åŒæ‰“é€ å¼€æºç”Ÿæ€ï¼Œè§£å†³å¼€æºè¿‡ç¨‹ä¸­çš„å®é™…é—®é¢˜ã€‚</p>\n  <p><img src=\"https://segmentfault.com/img/bVbLuza\" alt=\"ã€ŒSFOSSP - å¼€æºé¡¹ç›®æ‰¶æŒè®¡åˆ’ã€\" title=\"ã€ŒSFOSSP - å¼€æºé¡¹ç›®æ‰¶æŒè®¡åˆ’ã€\" /></p>\n </hr>\n</hr>","descriptionType":"html","publishedDate":"Tue, 18 Aug 2020 09:28:15 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/bVbLvba","linkMd5":"8130037c23e0c993c51e97490b17f7b6","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn6@2020_1/2020/08/24/23-08-23-211_d89633fd6dfd81d7.webp","destWidth":800,"destHeight":534,"sourceBytes":513728,"destBytes":23052,"author":"å¾ä¹","articleImgCdnMap":{"https://segmentfault.com/img/bVbLvba":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn6@2020_1/2020/08/24/23-08-23-211_d89633fd6dfd81d7.webp","https://segmentfault.com/img/bVbLvcU":"https://cdn.jsdelivr.net/gh/myreaderx23/cdn22@2020_1/2020/08/24/23-08-43-542_29a435c36e22e408.webp","https://segmentfault.com/img/bVbLvde":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn67@2020_4/2020/08/24/23-08-45-893_2b9c9b5a1aa9ddf4.webp","https://segmentfault.com/img/bVbLvd2":"https://cdn.jsdelivr.net/gh/myreaderx32/cdn23@2020_3/2020/08/24/23-08-45-486_3343783897cb269e.webp","https://segmentfault.com/img/bVbLveu":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn4@2020_2/2020/08/24/23-08-45-148_de46592035a11e50.webp","https://segmentfault.com/img/bVbLueg":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn34@2020_1/2020/08/24/23-08-33-833_d914957c0890d0d6.webp","https://segmentfault.com/img/bVbLuza":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn27@2020_6/2020/08/24/23-08-38-440_fb92e27a6436323a.webp"},"publishedOrCreatedDate":1598310388562},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"ç²¾è¯»ã€ŠTasks, microtasks, queues and schedulesã€‹","link":"https://segmentfault.com/a/1190000023652695","description":"<h2>1 å¼•è¨€</h2>\n<p>æœ¬å‘¨è·Ÿç€ <a href=\"https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/\" rel=\"nofollow noreferrer\">Tasks, microtasks, queues and schedules</a> è¿™ç¯‡æ–‡ç« ä¸€èµ·æ·±å…¥ç†è§£è¿™äº›æ¦‚å¿µé—´çš„åŒºåˆ«ã€‚</p>\n<p>å…ˆè¯´ç»“è®ºï¼š</p>\n<ul>\n <li>Tasks æŒ‰é¡ºåºæ‰§è¡Œï¼Œæµè§ˆå™¨å¯èƒ½åœ¨ Tasks ä¹‹é—´æ‰§è¡Œæ¸²æŸ“ã€‚</li>\n <li><p>Microtasks ä¹ŸæŒ‰é¡ºåºæ‰§è¡Œï¼Œæ—¶æœºæ˜¯ï¼š</p>\n  <ul>\n   <li>å¦‚æœæ²¡æœ‰æ‰§è¡Œä¸­çš„ js å †æ ˆï¼Œåˆ™åœ¨æ¯ä¸ªå›è°ƒä¹‹åã€‚</li>\n   <li>åœ¨æ¯ä¸ª task ä¹‹åã€‚</li>\n  </ul></li>\n</ul>\n<h2>2 æ¦‚è¿°</h2>\n<h3>Event Loop</h3>\n<p>åœ¨è¯´è¿™äº›æ¦‚å¿µå‰ï¼Œå…ˆè¦ä»‹ç» Event Loopã€‚</p>\n<p>é¦–å…ˆæµè§ˆå™¨æ˜¯å¤šçº¿ç¨‹çš„ï¼Œæ¯ä¸ª JS è„šæœ¬éƒ½åœ¨å•çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„ Event Loopï¼ŒåŒæºçš„æ‰€æœ‰æµè§ˆå™¨çª—å£å…±äº«ä¸€ä¸ª Event Loop ä»¥ä¾¿é€šä¿¡ã€‚</p>\n<p>Event Loop ä¼šæŒç»­å¾ªç¯çš„æ‰§è¡Œæ‰€æœ‰æ’é˜Ÿä¸­çš„ä»»åŠ¡ï¼Œæµè§ˆå™¨ä¼šä¸ºè¿™äº›ä»»åŠ¡åˆ’åˆ†ä¼˜å…ˆçº§ï¼ŒæŒ‰ç…§ä¼˜å…ˆçº§æ¥æ‰§è¡Œï¼Œè¿™å°±ä¼šå¯¼è‡´ Tasks ä¸ Microtasks æ‰§è¡Œé¡ºåºä¸è°ƒç”¨é¡ºåºçš„ä¸åŒã€‚</p>\n<h3>promise ä¸ setTimeout</h3>\n<p>çœ‹ä¸‹é¢ä»£ç çš„è¾“å‡ºé¡ºåºï¼š</p>\n<pre><code>console.log(\"script&nbsp;start\");setTimeout(function&nbsp;()&nbsp;{&nbsp;&nbsp;console.log(\"setTimeout\");},&nbsp;0);Promise.resolve()&nbsp;&nbsp;.then(function&nbsp;()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;console.log(\"promise1\");&nbsp;&nbsp;})&nbsp;&nbsp;.then(function&nbsp;()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;console.log(\"promise2\");&nbsp;&nbsp;});console.log(\"script&nbsp;end\");</code></pre>\n<p>æ­£ç¡®ç­”æ¡ˆæ˜¯ <code>script start</code>, <code>script end</code>, <code>promise1</code>, <code>promise2</code>, <code>setTimeout</code>ï¼Œåœ¨çº¿ç¨‹ä¸­ï¼ŒåŒæ­¥è„šæœ¬æ‰§è¡Œä¼˜å…ˆçº§æœ€é«˜ï¼Œç„¶å promise ä»»åŠ¡ä¼šå­˜æ”¾åˆ° Microtasksï¼ŒsetTimeout ä»»åŠ¡ä¼šå­˜æ”¾åˆ° Tasksï¼ŒMicrotasks ä¼šä¼˜å…ˆäº Tasks æ‰§è¡Œã€‚</p>\n<p>Microtasks ä¸­æ–‡å¯ä»¥ç¿»è¯‘ä¸ºå¾®ä»»åŠ¡ï¼Œåªè¦æœ‰ Microtasks æ’å…¥ï¼Œå°±ä¼šä¸æ–­æ‰§è¡Œ Microtasks é˜Ÿåˆ—ç›´åˆ°ç»“æŸï¼Œåœ¨ç»“æŸå‰éƒ½ä¸ä¼šæ‰§è¡Œåˆ° Tasksã€‚</p>\n<h3>ç‚¹å‡»å†’æ³¡ + ä»»åŠ¡</h3>\n<p>ä¸‹é¢ç»™å‡ºäº†æ›´å¤æ‚çš„ä¾‹å­ï¼Œæå‰è¯´æ˜åé¢çš„ä¾‹å­ Chromeã€Firefoxã€Safariã€Edge æµè§ˆå™¨çš„ç»“æœå®Œå…¨ä¸ä¸€æ ·ï¼Œä½†åªæœ‰ Chrome çš„è¿è¡Œç»“æœæ˜¯å¯¹çš„ï¼ä¸ºä»€ä¹ˆ Chrome æ˜¯å¯¹çš„å‘¢ï¼Œè¯·çœ‹ä¸‹é¢çš„åˆ†æï¼š</p>\n<pre><code>&lt;div&nbsp;class=\"outer\"&gt;&nbsp;&nbsp;&lt;div&nbsp;class=\"inner\"&gt;&lt;/div&gt;&lt;/div&gt;</code></pre>\n<pre><code>//&nbsp;Let's&nbsp;get&nbsp;hold&nbsp;of&nbsp;those&nbsp;elementsvar&nbsp;outer&nbsp;=&nbsp;document.querySelector(\".outer\");var&nbsp;inner&nbsp;=&nbsp;document.querySelector(\".inner\");//&nbsp;Let's&nbsp;listen&nbsp;for&nbsp;attribute&nbsp;changes&nbsp;on&nbsp;the//&nbsp;outer&nbsp;elementnew&nbsp;MutationObserver(function&nbsp;()&nbsp;{&nbsp;&nbsp;console.log(\"mutate\");}).observe(outer,&nbsp;{&nbsp;&nbsp;attributes:&nbsp;true,});//&nbsp;Here's&nbsp;a&nbsp;click&nbsp;listenerâ€¦function&nbsp;onClick()&nbsp;{&nbsp;&nbsp;console.log(\"click\");&nbsp;&nbsp;setTimeout(function&nbsp;()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;console.log(\"timeout\");&nbsp;&nbsp;},&nbsp;0);&nbsp;&nbsp;Promise.resolve().then(function&nbsp;()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;console.log(\"promise\");&nbsp;&nbsp;});&nbsp;&nbsp;outer.setAttribute(\"data-random\",&nbsp;Math.random());}//&nbsp;â€¦which&nbsp;we'll&nbsp;attach&nbsp;to&nbsp;both&nbsp;elementsinner.addEventListener(\"click\",&nbsp;onClick);outer.addEventListener(\"click\",&nbsp;onClick);</code></pre>\n<p>ç‚¹å‡» <code>inner</code> åŒºå—åï¼Œæ­£ç¡®è¾“å‡ºé¡ºåºåº”è¯¥æ˜¯ï¼š</p>\n<pre><code>click\npromise\nmutate\nclick\npromise\nmutate\ntimeout\ntimeout</code></pre>\n<p>é€»è¾‘å¦‚ä¸‹ï¼š</p>\n<ol>\n <li>ç‚¹å‡»è§¦å‘ <code>onClick</code> å‡½æ•°å…¥æ ˆã€‚</li>\n <li>ç«‹å³æ‰§è¡Œ <code>console.log('click')</code> æ‰“å° <code>click</code>ã€‚</li>\n <li><code>console.log('timeout')</code> å…¥æ ˆ Tasksã€‚</li>\n <li><code>console.log('promise')</code> å…¥æ ˆ microtasksã€‚</li>\n <li><code>outer.setAttribute('data-random')</code> çš„è§¦å‘å¯¼è‡´ç›‘å¬è€… <code>MutationObserver</code> å…¥æ ˆ microtasksã€‚</li>\n <li><code>onClick</code> å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œæ­¤æ—¶çº¿ç¨‹è°ƒç”¨æ ˆä¸ºç©ºï¼Œå¼€å§‹æ‰§è¡Œ microtasks é˜Ÿåˆ—ã€‚</li>\n <li>æ‰“å° <code>promise</code>ï¼Œæ‰“å° <code>mutate</code>ï¼Œæ­¤æ—¶ microtasks å·²ç©ºã€‚</li>\n <li>æ‰§è¡Œå†’æ³¡æœºåˆ¶ï¼Œouter div ä¹Ÿè§¦å‘ <code>onClick</code> å‡½æ•°ï¼ŒåŒç†ï¼Œæ‰“å° <code>promise</code>ï¼Œæ‰“å° <code>mutate</code>ã€‚</li>\n <li>éƒ½æ‰§è¡Œå®Œåï¼Œæ‰§è¡Œ Tasksï¼Œæ‰“å° <code>timeout</code>ï¼Œæ‰“å° <code>timeout</code>ã€‚</li>\n</ol>\n<h3>æ¨¡æ‹Ÿç‚¹å‡»å†’æ³¡ + ä»»åŠ¡</h3>\n<p>å¦‚æœå°†è§¦å‘ <code>onClick</code> è¡Œä¸ºç”±ç‚¹å‡»æ”¹ä¸ºï¼š</p>\n<pre><code>inner.click();</code></pre>\n<p>ç»“æœä¼šä¸åŒå—ï¼Ÿç­”æ¡ˆæ˜¯ä¼šï¼ˆå•å…ƒæµ‹è¯•ä¸ç”¨æˆ·è¡Œä¸ºä¸ç¬¦åˆï¼Œå•æµ‹ä¹Ÿæœ‰æ— è§£çš„æ—¶å€™ï¼‰ã€‚ç„¶è€Œå››å¤§æµè§ˆå™¨çš„æ‰§è¡Œç»“æœä¹Ÿæ˜¯å®Œå…¨ä¸ä¸€æ ·ï¼Œä½†ä»é€»è¾‘ä¸Šè®²ä»ç„¶ Chrome æ˜¯å¯¹çš„ï¼Œè®©æˆ‘ä»¬çœ‹ä¸‹ Chrome çš„ç»“æœï¼š</p>\n<pre><code>click\nclick\npromise\nmutate\npromise\ntimeout\ntimeout</code></pre>\n<p>é€»è¾‘å¦‚ä¸‹ï¼š</p>\n<ol>\n <li><code>inner.click()</code> è§¦å‘ <code>onClick</code> å‡½æ•°å…¥æ ˆã€‚</li>\n <li>ç«‹å³æ‰§è¡Œ <code>console.log('click')</code> æ‰“å° <code>click</code>ã€‚</li>\n <li><code>console.log('timeout')</code> å…¥æ ˆ Tasksã€‚</li>\n <li><code>console.log('promise')</code> å…¥æ ˆ microtasksã€‚</li>\n <li><code>outer.setAttribute('data-random')</code> çš„è§¦å‘å¯¼è‡´ç›‘å¬è€… <code>MutationObserver</code> å…¥æ ˆ microtasksã€‚</li>\n <li>ç”±äºå†’æ³¡æ”¹ä¸º js è°ƒç”¨æ ˆæ‰§è¡Œï¼Œæ‰€ä»¥æ­¤æ—¶ js è°ƒç”¨æ ˆæœªç»“æŸï¼Œä¸ä¼šæ‰§è¡Œ microtasksï¼Œåè€Œæ˜¯ç»§ç»­æ‰§è¡Œå†’æ³¡ï¼Œouter çš„ <code>onClick</code> å‡½æ•°å…¥æ ˆã€‚</li>\n <li>ç«‹å³æ‰§è¡Œ <code>console.log('click')</code> æ‰“å° <code>click</code>ã€‚</li>\n <li><code>console.log('timeout')</code> å…¥æ ˆ Tasksã€‚</li>\n <li><code>console.log('promise')</code> å…¥æ ˆ microtasksã€‚</li>\n <li><code>MutationObserver</code> ç”±äºè¿˜æ²¡è°ƒç”¨ï¼Œå› æ­¤è¿™æ¬¡ <code>outer.setAttribute('data-random')</code> çš„æ”¹åŠ¨å®é™…ä¸Šæ²¡æœ‰ä½œç”¨ã€‚</li>\n <li>js è°ƒç”¨æ ˆæ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œ microtasksï¼ŒæŒ‰ç…§å…¥æ ˆé¡ºåºï¼Œæ‰“å° <code>promise</code>ï¼Œ<code>mutate</code>ï¼Œ<code>promise</code>ã€‚</li>\n <li>microtasks æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œ Tasksï¼Œæ‰“å° <code>timeout</code>ï¼Œ<code>timeout</code>ã€‚</li>\n</ol>\n<h2>3 ç²¾è¯»</h2>\n<p>åŸºäºä»»åŠ¡è°ƒåº¦è¿™ä¹ˆå¤æ‚ï¼Œä¸”æµè§ˆå™¨å®ç°æ–¹å¼å¾ˆä¸åŒï¼Œä¸‹é¢ä¸¤ä»¶äº‹æ˜¯æˆ‘å¾ˆä¸æ¨èçš„ï¼š</p>\n<ol>\n <li>ä¸šåŠ¡é€»è¾‘ â€œå·§å¦™â€ ä¾èµ–äº† microtasks ä¸ Tasks æ‰§è¡Œé€»è¾‘çš„å¾®å¦™å·®å¼‚ã€‚</li>\n <li>æ­»è®°ç¡¬èƒŒè°ƒç”¨é¡ºåºã€‚</li>\n</ol>\n<p>ä¸”ä¸è¯´ä¾èµ–äº†è°ƒç”¨é¡ºåºçš„ä¸šåŠ¡é€»è¾‘æœ¬èº«å°±å¾ˆéš¾ç»´æŠ¤ï¼Œä¸åŒæµè§ˆå™¨ä¹‹é—´å¯¹ä»»åŠ¡è°ƒç”¨é¡ºåºè¿˜æ˜¯ä¸åŒçš„ï¼Œè¿™å¯èƒ½æºäºå¯¹ W3C æ ‡å‡†è§„èŒƒç†è§£çš„åå·®ï¼Œä¹Ÿå¯èƒ½æ˜¯ BUGï¼Œè¿™ä¼šå¯¼è‡´ä¾èµ–äºæ­¤çš„é€»è¾‘éå¸¸è„†å¼±ã€‚</p>\n<p>è™½ç„¶ä¸Šé¢ä¸¤ä¸ªä¾‹å­éå¸¸å¤æ‚ï¼Œä½†æˆ‘ä»¬ä¹Ÿä¸å¿…æŠŠè¿™ä¸ªä¾‹å­å½“ä½œç»å…¸èƒŒè¯µï¼Œåªè¦è®°ä½æ–‡ç« å¼€å¤´æåˆ°çš„æ‰§è¡Œé€»è¾‘å°±å¯ä»¥æ¨å¯¼ï¼š</p>\n<ul>\n <li>Tasks æŒ‰é¡ºåºæ‰§è¡Œï¼Œæµè§ˆå™¨å¯èƒ½åœ¨ Tasks ä¹‹é—´æ‰§è¡Œæ¸²æŸ“ã€‚</li>\n <li><p>Microtasks ä¹ŸæŒ‰é¡ºåºæ‰§è¡Œï¼Œæ—¶æœºæ˜¯ï¼š</p>\n  <ul>\n   <li>å¦‚æœæ²¡æœ‰æ‰§è¡Œä¸­çš„ js å †æ ˆï¼Œåˆ™åœ¨æ¯ä¸ªå›è°ƒä¹‹åã€‚</li>\n   <li>åœ¨æ¯ä¸ª task ä¹‹åã€‚</li>\n  </ul></li>\n</ul>\n<p>è®°ä½ <code>Promise</code> æ˜¯ <code>Microtasks</code>ï¼Œ<code>setTimeout</code> æ˜¯ <code>Tasks</code>ï¼ŒJS ä¸€æ¬¡ Event Loop å®Œæ¯•åï¼Œå³è°ƒç”¨æ ˆæ²¡æœ‰å†…å®¹æ—¶æ‰ä¼šæ‰§è¡Œ <code>Microtasks</code> -&gt; <code>Tasks</code>ï¼Œåœ¨æ‰§è¡Œ <code>Microtasks</code> è¿‡ç¨‹ä¸­æ’å…¥çš„ <code>Microtasks</code> ä¼šæŒ‰é¡ºåºç»§ç»­æ‰§è¡Œï¼Œè€Œæ‰§è¡Œ <code>Tasks</code> ä¸­æ’å…¥çš„ <code>Microtasks</code> å¾—ç­‰åˆ°è°ƒç”¨æ ˆæ‰§è¡Œå®Œåæ‰ç»§ç»­æ‰§è¡Œã€‚</p>\n<p>ä¸Šé¢è¯´çš„å†…å®¹éƒ½æ˜¯æŒ‡ä¸€æ¬¡ Event Loop æ—¶ç«‹å³æ‰§è¡Œçš„ä¼˜å…ˆçº§ï¼Œä¸è¦å’Œæ‰§è¡Œå»¶è¿Ÿæ—¶é—´å¼„æ··æ·†äº†ã€‚</p>\n<p>æŠŠ JS çº¿ç¨‹çš„ Event Loop å½“ä½œä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°å†…åŒæ­¥é€»è¾‘æ‰§è¡Œä¼˜å…ˆçº§æ˜¯æœ€é«˜çš„ï¼Œå¦‚æœé‡åˆ° <code>Microtasks</code> æˆ– <code>Tasks</code> å°±ä¼šç«‹å³è®°å½•ä¸‹æ¥ï¼Œå½“ä¸€æ¬¡ Event Loop æ‰§è¡Œå®Œåç«‹å³è°ƒç”¨ <code>Microtasks</code>ï¼Œç­‰ <code>Microtasks</code> é˜Ÿåˆ—æ‰§è¡Œå®Œæ¯•åå¯èƒ½è¿›è¡Œä¸€äº›æ¸²æŸ“è¡Œä¸ºï¼Œç­‰è¿™äº›æµè§ˆå™¨æ“ä½œå®Œæˆåï¼Œå†è€ƒè™‘æ‰§è¡Œ <code>Tasks</code> é˜Ÿåˆ—ã€‚</p>\n<h2>4 æ€»ç»“</h2>\n<p>æœ€åï¼Œè¿˜æ˜¯è¦å¼ºè°ƒä¸€å¥ï¼Œä¸è¦ä¾èµ– <code>Microtasks</code> ä¸ <code>Tasks</code> çš„æ‰§è¡Œé¡ºåºï¼Œå°¤å…¶åœ¨ç”³æ˜å¼ç¼–ç¨‹ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ <code>Microtasks</code> ä¸ <code>Tasks</code> éƒ½å½“ä½œæ˜¯å¼‚æ­¥å†…å®¹ï¼Œåœ¨æ¸²æŸ“æ—¶åšå¥½çŠ¶æ€åˆ¤æ–­å³å¯ï¼Œä¸ç”¨å…³å¿ƒå…ˆåé¡ºåºã€‚</p>\n<blockquote>\n è®¨è®ºåœ°å€æ˜¯ï¼š\n <a href=\"https://github.com/dt-fe/weekly/issues/264\" rel=\"nofollow noreferrer\">ç²¾è¯»ã€ŠTasks, microtasks, queues and schedulesã€‹Â· Issue #264 Â· dt-fe/weekly</a>\n</blockquote>\n<p><strong>å¦‚æœä½ æƒ³å‚ä¸è®¨è®ºï¼Œè¯· <a href=\"https://github.com/dt-fe/weekly\" rel=\"nofollow noreferrer\">ç‚¹å‡»è¿™é‡Œ</a>ï¼Œæ¯å‘¨éƒ½æœ‰æ–°çš„ä¸»é¢˜ï¼Œå‘¨æœ«æˆ–å‘¨ä¸€å‘å¸ƒã€‚å‰ç«¯ç²¾è¯» - å¸®ä½ ç­›é€‰é è°±çš„å†…å®¹ã€‚</strong></p>\n<blockquote>\n å…³æ³¨ \n <strong>å‰ç«¯ç²¾è¯»å¾®ä¿¡å…¬ä¼—å·</strong>\n</blockquote>\n<p><img src=\"https://segmentfault.com/img/remote/1460000018549678\" alt=\"\" title=\"\" /></p>\n<blockquote>\n ç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²åï¼ˆ\n <a href=\"https://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh\" rel=\"nofollow noreferrer\">åˆ›æ„å…±äº« 3.0 è®¸å¯è¯</a>ï¼‰\n</blockquote>","descriptionType":"html","publishedDate":"Mon, 17 Aug 2020 02:35:41 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/remote/1460000018549678","linkMd5":"77294d18bacb4a429bc351cad2ce49d1","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn62@2020_2/2020/08/24/23-08-22-916_a02e97e5e2b41934.webp","destWidth":258,"destHeight":258,"sourceBytes":20858,"destBytes":6490,"author":"é»„å­æ¯…","articleImgCdnMap":{"https://segmentfault.com/img/remote/1460000018549678":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn62@2020_2/2020/08/24/23-08-22-916_a02e97e5e2b41934.webp"},"publishedOrCreatedDate":1598310388565},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"é‡åˆ°ã€Œæœ€å€¼é—®é¢˜ã€è¿˜åœ¨æ— è„‘åŠ¨æ€è§„åˆ’ï¼ŸäºŒåˆ†æ³•è€ƒè™‘ä¸€ä¸‹å‘—","link":"https://segmentfault.com/a/1190000023677258","description":"<h1>ç›®å½•</h1> \n<ol> \n <li><a href=\"https://segmentfault.com/a/1190000023677258#%E5%89%8D%E8%A8%80\">å‰è¨€</a></li> \n <li><a href=\"https://segmentfault.com/a/1190000023677258#%E4%BA%8C%E5%88%86%E6%B3%95%E5%9F%BA%E7%A1%80%E5%8F%8A%E5%8F%98%E7%A7%8D%E7%BB%93%E6%9E%84\">äºŒåˆ†æ³•åŸºç¡€åŠå˜ç§ç»“æ„</a></li> \n <li><a href=\"https://segmentfault.com/a/1190000023677258#%E5%B0%8F%E8%AF%95%E7%89%9B%E5%88%80\">å°è¯•ç‰›åˆ€</a></li> \n <li><a href=\"https://segmentfault.com/a/1190000023677258#%E6%89%93%E6%80%AA%E5%8D%87%E7%BA%A7\">æ‰“æ€ªå‡çº§</a></li> \n <li><a href=\"https://segmentfault.com/a/1190000023677258#%E5%87%BA%E5%B8%88%E8%AF%95%E7%82%BC\">å‡ºå¸ˆè¯•ç‚¼</a></li> \n</ol> \n<h1>å‰è¨€</h1> \n<p>ä¸€èˆ¬æ¥è¯´ï¼Œé‡åˆ°ã€Œæœ€å€¼é—®é¢˜ã€é€šç”¨çš„æ–¹æ³•éƒ½æ˜¯åŠ¨æ€è§„åˆ’ï¼Œè€Œæœ‰ä¸€ç±»ã€Œæœ€å€¼é—®é¢˜ã€å¯ä»¥ç”¨å…¶ä»–æ–¹æ³•æ›´åŠ å·§å¦™ã€ç®€å•æ–¹ä¾¿çš„è§£å†³ï¼Œ<strong>è¿™ç±»é—®é¢˜çš„å¸¸è§é—®æ³•æ˜¯ã€Œä½¿â€¦â€¦æœ€å¤§å€¼å°½å¯èƒ½å°ã€ã€‚</strong></p> \n<pre><code>è¿™ç±»é—®é¢˜ä¹Ÿæ˜¯å¤§å‚ç¬”è¯•é¢è¯•å¸¸è§é¢˜å‹ï¼Œ2020 å¹´ç¾å›¢ç¬”è¯•é¢˜ã€å­—èŠ‚é¢è¯•é¢˜ä¸­éƒ½å‡ºç°è¿‡ã€‚\n</code></pre> \n<p>è¿™ç±»é—®é¢˜æœ‰ä¸‰å¤§ç‰¹å¾ï¼š</p> \n<ol> \n <li>æ±‚æœ€å€¼ï¼ˆä¸€èˆ¬æ˜¯æœ€å°å€¼ï¼‰</li> \n <li>å€¼çš„æœç´¢ç©ºé—´æ˜¯çº¿æ€§çš„</li> \n <li>å¯¹è¯¥å€¼æœ‰ä¸€ä¸ªé™åˆ¶æ¡ä»¶ï¼Œå¹¶ä¸”è‹¥ <code>x</code> æ»¡è¶³æ¡ä»¶ï¼Œåˆ™ <code>[x, +âˆ)</code> éƒ½æ»¡è¶³æ¡ä»¶ï¼Œåä¹‹ <code>(-âˆ, x]</code> éƒ½ä¸æ»¡è¶³æ¡ä»¶ã€‚</li> \n</ol> \n<p><img src=\"https://segmentfault.com/img/remote/1460000023677261\" alt=\"ä½ è¯´çš„æˆ‘éƒ½æ‡‚ï¼Œå¯é—®é¢˜æ˜¯ï¼Œè¿™æ˜¯å•¥æ„æ€å‘¢ï¼Ÿå‰ä¼šè…°ï¼Œå†·é™ä¸€ä¸‹\" title=\"ä½ è¯´çš„æˆ‘éƒ½æ‡‚ï¼Œå¯é—®é¢˜æ˜¯ï¼Œè¿™æ˜¯å•¥æ„æ€å‘¢ï¼Ÿå‰ä¼šè…°ï¼Œå†·é™ä¸€ä¸‹\"><br> &lt;center style=\"font-size:14px;color:#C0C0C0;text-decoration:underline\"&gt;ä½ è¯´çš„æˆ‘éƒ½æ‡‚ï¼Œå¯é—®é¢˜æ˜¯ï¼Œè¿™æ˜¯å•¥æ„æ€å‘¢ï¼Ÿå‰ä¼šè…°ï¼Œå†·é™ä¸€ä¸‹ã€‚&lt;/center&gt; </br></img></p> \n<p>ä¸ºäº†æ–¹ä¾¿å¤§å®¶ç†è§£è¿™ç±»é—®é¢˜åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆç©æ„å„¿ï¼Œæœ¬æ±ªåœ¨è¿™é‡Œåˆ—å‡º leetcode ä¸Šçš„ä¸€é“é¢˜ç›®ä½œä¸ºä¾‹å­ï¼š</p> \n<blockquote>\n  ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„å’Œä¸€ä¸ªæ•´æ•° mï¼Œä½ éœ€è¦å°†è¿™ä¸ªæ•°ç»„åˆ†æˆ m ä¸ªéç©ºçš„è¿ç»­å­æ•°ç»„ã€‚è®¾è®¡ä¸€ä¸ªç®—æ³•ä½¿å¾—è¿™ m ä¸ªå­æ•°ç»„å„è‡ªå’Œçš„æœ€å¤§å€¼æœ€å°ã€‚ \n</blockquote> \n<p>ä¸ç†Ÿæ‚‰äºŒåˆ†æ³•çš„åŒå­¦åˆé‡æ­¤é¢˜ï¼Œçœ‹åˆ°å…³é”®è¯â€œåˆ†å‰²æˆ m ä»½â€ã€â€œæœ€å°â€ï¼Œå°±æƒ³åˆ°äº†åŠ¨æ€è§„åˆ’ã€‚è¯šç„¶æ­¤é¢˜å…·å¤‡äº†ä½¿ç”¨åŠ¨æ€è§„åˆ’çš„ä¸€åˆ‡å‰ææ¡ä»¶ï¼Œä¹Ÿç¡®å®å¯ä»¥é€šè¿‡åŠ¨æ€è§„åˆ’åšå‡ºæ¥ï¼Œä½†å…¶æ—¶é—´å¤æ‚åº¦ä¸º $O(n^2Ã—m)$ , ç©ºé—´å¤æ‚åº¦ä¸º $O(n*m)$. </p> \n<p>å¦‚æœä½ çœ‹äº†æœ¬æ±ªçš„è¿™ç¯‡æ–‡ç« ï¼Œå­¦ä¼šäº†ç”¨äºŒåˆ†æ³•è§£å†³<strong>è¿™ä¸€ç±»é—®é¢˜</strong>ï¼Œé‚£ä¹ˆæ—¶é—´å¤æ‚åº¦å¯ä»¥ä¼˜åŒ–åˆ° $O(n * logx)$ï¼Œ ç©ºé—´å¤æ‚åº¦å¯ä»¥ä¼˜åŒ–åˆ° $O(1)$ï¼Œå¹¶ä¸”æ€è·¯éå¸¸ç®€æ´ï¼Œä»£ç å®ç°ä¹Ÿæå…¶ç®€å•ã€‚</p> \n<h1>äºŒåˆ†æ³•åŸºç¡€åŠå˜ç§ç»“æ„</h1> \n<p>åœ¨è®²å…·ä½“çš„æ–¹æ³•ä¹‹å‰ï¼Œæœ¬æ±ªå…ˆå’Œå¤§å®¶ä¸€èµ·å›é¡¾ä¸‹äºŒåˆ†æ³•ï¼Œç†Ÿæ‚‰äºŒåˆ†æ³•çš„åŒå­¦å¯ä»¥ç›´æ¥è·³è¿‡è¿™éƒ¨åˆ†ã€‚</p> \n<p>æœ€æ—©æ¥è§¦äºŒåˆ†æ€æƒ³çš„åœ°æ–¹åº”è¯¥æ˜¯åœ¨äºŒåˆ†æœç´¢ä¸­ã€‚ï¼ˆæœ¬è´¨ä¸Šç±»ä¼¼å¿«æ’ä¸­çš„ partition æ€æƒ³ï¼‰</p> \n<p>äºŒåˆ†æ³•æ˜¯åœ¨<strong>æœ‰åºçº¿æ€§æœç´¢ç©ºé—´</strong>å†…ï¼Œåˆ©ç”¨<strong>æœ‰åºæ€§</strong>ï¼Œæ¯æ¬¡æœç´¢é€šè¿‡æ’é™¤ä¸€åŠçš„å‰©ä½™æœç´¢ç©ºé—´ï¼Œä½¿ $O(n)$ çº§åˆ«çš„çº¿æ€§æœç´¢ä¼˜åŒ–åˆ° $O(logn)$ çº§åˆ«çš„æ–¹æ³•ã€‚</p> \n<p><img src=\"https://segmentfault.com/img/bVbLvGs\" alt=\"image\" title=\"image\"><br> &lt;center style=\"font-size:14px;color:#C0C0C0;text-decoration:underline\"&gt;äºŒå‰æ ‘ï¼šæˆ‘éƒ½ä¼šäºŒåˆ†ï¼Œä¸ä¼šè¿˜æœ‰äººä¸ä¼šäºŒåˆ†æ³•å§ï¼Ÿä¸ä¼šå°±è®©å¾€è¥¿æ±ªé‚£å°å­æ•™ä½ &lt;/center&gt; </br></img></p> \n<p>äºŒåˆ†æ³•çš„åŸºæœ¬ä»£ç éå¸¸ç®€å•ï¼Œè¿™é‡Œå°±ä¸å¤šæäº†ï¼Œä¸‹é¢ç”¨ç±» java è¯­è¨€ç»™å‡ºå…¶é’ˆå¯¹ã€Œæœ€å€¼é—®é¢˜ã€çš„å˜ç§ç»“æ„ï¼š</p> \n<pre><code class=\"java\">// nums æ•°ç»„æ˜¯æœç´¢ç©ºé—´ï¼Œm æ˜¯é™åˆ¶æ¡ä»¶\n// check(x, m) è¡¨ç¤ºåœ¨æœç´¢ç©ºé—´ nums ä¸­çš„ç‚¹ xï¼Œæ»¡è¶³äº†é™åˆ¶æ¡ä»¶ m\npublic int binary(int[] nums, int m){  \n      åˆå§‹åŒ– l, r ä¸ºæœç´¢ç©ºé—´çš„èµ·å§‹ç‚¹å’Œç»ˆç‚¹\n    while(l &lt; r){\n        int mid = (l + r) &gt;&gt; 1; //äºŒåˆ†ï¼Œä¸€æ¬¡æœç´¢å¯ä»¥æ’é™¤ mid çš„å·¦è¾¹æˆ–è€…å³è¾¹(å‰©ä½™æœç´¢ç©ºé—´çš„ä¸€åŠ)\n        if(check(mid, m)) r = mid; //å› ä¸ºè¿™ä¸€ç±»æœ€å€¼é—®é¢˜è¦æ‰¾çš„æ˜¯æœ€å°ï¼Œmid æ»¡è¶³æ¡ä»¶äº†ï¼Œ(mid, r] å°±ä¸æ˜¯æœ€å°çš„ç­”æ¡ˆäº†\n        else l = mid + 1; // mid ä¸æ»¡è¶³æ¡ä»¶ï¼Œæ ¹æ®æœ‰åºæ€§ï¼Œ[l, mid] é‡Œçš„æ•°å…¨ä¸æ»¡è¶³æ¡ä»¶\n    }\n    return r;\n}</code></pre> \n<p>æ ¹æ®ç»“æ„æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œé‡åˆ°è¿™ç±»é—®é¢˜çš„æ—¶å€™åªéœ€è¦æ‰¾åˆ°ã€Œæœç´¢ç©ºé—´ã€ã€ã€Œæ£€æŸ¥æ¡ä»¶ã€ï¼Œç„¶åå¥—ç”¨ç»“æ„å°±èƒ½<strong>è½»è½»æ¾æ¾</strong>åœ°è§£å†³é—®é¢˜ã€‚</p> \n<p>ä¸‹é¢å°±è®©æˆ‘ä»¬æ¥ç”¨äºŒåˆ†æ³•è§£å†³åˆšåˆšæåˆ°çš„é—®é¢˜ã€‚</p> \n<h1>å°è¯•ç‰›åˆ€</h1> \n<h2>é¢˜ç›®</h2> \n<p>ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„å’Œä¸€ä¸ªæ•´æ•° mï¼Œä½ éœ€è¦å°†è¿™ä¸ªæ•°ç»„åˆ†æˆ m ä¸ªéç©ºçš„è¿ç»­å­æ•°ç»„ã€‚è®¾è®¡ä¸€ä¸ªç®—æ³•ä½¿å¾—è¿™ m ä¸ªå­æ•°ç»„å„è‡ªå’Œçš„æœ€å¤§å€¼æœ€å°ã€‚</p> \n<h2>æ€è·¯</h2> \n<p>å‰æ–‡æåŠï¼Œè§£å†³æœ¬é¢˜åªéœ€è¦æ‰¾åˆ°ã€Œæœç´¢ç©ºé—´ã€ã€ã€Œæ£€æŸ¥æ¡ä»¶ã€ï¼Œå‰©ä¸‹çš„å°±æ˜¯é—­ç€çœ¼ç›å¥—ç»“æ„çš„äº‹å„¿äº†ã€‚</p> \n<p>å…ˆæ‰¾ã€Œæœç´¢ç©ºé—´ã€ï¼Œå› ä¸ºæ­¤ç±»é—®é¢˜çš„æœç´¢ç©ºé—´éƒ½æ˜¯çº¿æ€§çš„ï¼Œæ‰€ä»¥æ‰¾åˆ°äº†<strong>èµ·å§‹ç‚¹</strong>å’Œ<strong>ç»ˆç‚¹</strong>ï¼Œä¹Ÿå°±æ‰¾åˆ°äº†æœç´¢ç©ºé—´ã€‚</p> \n<p>çœ‹é—®é¢˜æè¿° â€œå­æ•°ç»„å„è‡ªå’Œçš„æœ€å¤§å€¼æœ€å°â€ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æœç´¢çš„ç‚¹æ˜¯ \"å­æ•°ç»„å„è‡ªå’Œçš„æœ€å¤§å€¼\"ï¼Œé‚£ä¹ˆæœç´¢ç©ºé—´çš„èµ·å§‹ç‚¹æ˜¯æ•°ç»„ nums ä¸­çš„æœ€å¤§å€¼ï¼Œå³ <code>min(nums)</code>ï¼Œæœç´¢ç©ºé—´çš„ç»ˆç‚¹æ˜¯æ•°ç»„ nums ä¸­çš„æ‰€æœ‰å…ƒç´ ä¹‹å’Œï¼Œå³ <code>sum(nums)</code>ã€‚å› æ­¤æˆ‘ä»¬æ‰¾åˆ°äº†æœç´¢ç©ºé—´ï¼Œä¸º <code>[min(nums), sum(nums)]</code>.</p> \n<p>å†çœ‹ã€Œæ£€æŸ¥æ¡ä»¶ã€ã€‚ç»™å®šæœç´¢ç©ºé—´ numsï¼Œå’Œç‚¹ xï¼Œåˆ¤æ–­ x æ˜¯å¦æ»¡è¶³é™åˆ¶æ¡ä»¶ mã€‚</p> \n<p>æœ¬é¢˜çš„æ¡ä»¶æ˜¯â€œå­æ•°ç»„å„è‡ªå’Œçš„æœ€å¤§å€¼â€ï¼Œä¹Ÿå°±æ˜¯è¯´ x å’Œ m ä¸ªå­æ•°ç»„å„è‡ªå’Œç›¸æ¯”è¾ƒï¼Œéƒ½è¦å¤§äºæˆ–è€…ç­‰äºå®ƒä»¬ã€‚</p> \n<p>ã€Œæœç´¢ç©ºé—´ã€ã€ã€Œæ£€æŸ¥æ¡ä»¶ã€éƒ½æ‰¾åˆ°äº†ï¼Œä¸‹é¢é—­ç€çœ¼ç›å¥—ç»“æ„å§ï½</p> \n<p><img src=\"https://segmentfault.com/img/bVbLvGS\" alt=\"image\" title=\"image\"><br>&lt;center style=\"font-size:14px;color:#C0C0C0;text-decoration:underline\"&gt;(ç‘Ÿç‘Ÿå‘æŠ–.jpg) å¥½çš„ï¼Œè¿™å°±ä¸Šä»£ç &lt;/center&gt;</br></img></p> \n<h2>ä»£ç </h2> \n<pre><code class=\"java\">class Solution {\n      // è¿™ä¸ªæ–¹æ³•å°±æ˜¯ç›´æ¥å¥—ç»“æ„\n    public int splitArray(int[] nums, int m) {\n        long l = 0, r = 0;\n        for(int num: nums) {r += num; l = Math.max(l, num);} // åˆå§‹åŒ– l å’Œ r\n        while(l &lt; r) {\n            long mid = (l + r) &gt;&gt; 1;\n            if(check(nums, mid, m)) r = mid;\n            else l = mid + 1;\n        }\n        return (int)r;\n    }\n    \n    public boolean check(int[] nums, long a, int m) { // ç»™å®šæœç´¢ç©ºé—´ä¸­çš„ç‚¹ aï¼Œçœ‹å®ƒæ˜¯å¦å¤§äºç­‰äºæ‰€æœ‰å­æ•°ç»„çš„å„è‡ªå’Œ\n        int cnt = 1;\n        long sum = 0;\n        for(int n: nums) {\n            sum += n;\n            if(sum &gt; a) {\n                sum = n;\n                cnt ++;\n                if(cnt &gt; m) return false;\n            }\n        }\n        return true;\n    }\n}</code></pre> \n<h1>æ‰“æ€ªå‡çº§</h1> \n<p>å’±ä»¬å†æ¥çœ‹ä¸€é“é¢˜ï¼Œå°ä¼™ä¼´ä»¬å¯ä»¥å…ˆè‡ªå·±æ€è€ƒï¼Œæœ‰æ€è·¯çš„è¯è‡ªå·±åŠ¨æ‰‹å®ç°ä¸‹ã€‚å†çœ‹çœ‹æœ¬æ±ªç»™å‡ºçš„æ€è·¯ï¼ŒåŠ æ·±ç†è§£ã€‚</p> \n<h2>é¢˜ç›®</h2> \n<p>ç‚ç‚å–œæ¬¢åƒé¦™è•‰ã€‚è¿™é‡Œæœ‰ N å †é¦™è•‰ï¼Œç¬¬ i å †ä¸­æœ‰ piles[i] æ ¹é¦™è•‰ã€‚è­¦å«å·²ç»ç¦»å¼€äº†ï¼Œå°†åœ¨ H å°æ—¶åå›æ¥ã€‚</p> \n<p>ç‚ç‚å¯ä»¥å†³å®šå¥¹åƒé¦™è•‰çš„é€Ÿåº¦ K ï¼ˆå•ä½ï¼šæ ¹/å°æ—¶ï¼‰ã€‚æ¯ä¸ªå°æ—¶ï¼Œå¥¹å°†ä¼šé€‰æ‹©ä¸€å †é¦™è•‰ï¼Œä»ä¸­åƒæ‰ K æ ¹ã€‚å¦‚æœè¿™å †é¦™è•‰å°‘äº K æ ¹ï¼Œå¥¹å°†åƒæ‰è¿™å †çš„æ‰€æœ‰é¦™è•‰ï¼Œç„¶åè¿™ä¸€å°æ—¶å†…ä¸ä¼šå†åƒæ›´å¤šçš„é¦™è•‰ã€‚ </p> \n<p>ç‚ç‚å–œæ¬¢æ…¢æ…¢åƒï¼Œä½†ä»ç„¶æƒ³åœ¨è­¦å«å›æ¥å‰åƒæ‰æ‰€æœ‰çš„é¦™è•‰ã€‚</p> \n<p>è¿”å›å¥¹å¯ä»¥åœ¨ H å°æ—¶å†…åƒæ‰æ‰€æœ‰é¦™è•‰çš„æœ€å°é€Ÿåº¦ Kï¼ˆK ä¸ºæ•´æ•°ï¼‰ã€‚</p> \n<p><img src=\"https://segmentfault.com/img/bVbLvGR\" alt=\"image\" title=\"image\" /></p> \n<p>&lt;center style=\"font-size:14px;color:#C0C0C0;text-decoration:underline\"&gt;å¾€è¥¿æ±ªï¼šæˆ‘è¯·ä½ ä»¬åƒé¦™è•‰ï¼Œå¯ä»¥ç»™æˆ‘ç‚¹ä¸ªèµå—&lt;/center&gt;</p> \n<h2>æ€è·¯</h2> \n<p>è€è§„çŸ©ï¼Œå…ˆæ‰¾ã€Œæœç´¢ç©ºé—´ã€ï¼Œå†æ‰¾ã€Œæ£€æŸ¥æ¡ä»¶ã€ï¼Œæœ€åé—­ç€çœ¼ç›å¥—ç»“æ„ã€‚</p> \n<p>ã€Œæœç´¢ç©ºé—´ã€ï¼šH å°æ—¶å†…å¿…é¡»åƒå®Œ <code>sum(piles)</code> æ ¹é¦™è•‰ï¼Œæ‰€ä»¥åˆå§‹ç‚¹ä¸º <code>sum(piles) / H</code>ï¼Œä¸€æ¬¡æœ€å¤šåªèƒ½åƒä¸€å †ï¼Œæ‰€ä»¥ç»ˆç‚¹ä¸º <code>max(piles)</code>ã€‚å› æ­¤ï¼Œæœç´¢ç©ºé—´ä¸º <code>[sum(piles) / H, max(piles)]</code>ã€‚</p> \n<p>ã€Œæ£€æŸ¥æ¡ä»¶ã€ï¼šâ€œåœ¨ H å°æ—¶å†…åƒæ‰æ‰€æœ‰é¦™è•‰â€ï¼Œå› æ­¤ä»¥ <code> K ä¸ª / å°æ—¶</code> çš„é€Ÿåº¦åƒå®Œé¦™è•‰çš„ç”¨æ—¶è¦å°äºç­‰äº Hã€‚</p> \n<p>ä¸‹é¢å°±é—­ç€çœ¼ç›å¥—ç»“æ„å§ã€‚</p> \n<h2>ä»£ç </h2> \n<pre><code class=\"java\">class Solution {\n    public int minEatingSpeed(int[] piles, int H) {\n        int l = 1, r = 0; // è¿™é‡Œæœ¬æ±ªä¸ºäº†ä»£ç çš„ç®€æ´æ€§ï¼Œåœ¨ä¸å½±å“æ—¶é—´å¤æ‚åº¦çš„æƒ…å†µä¸‹ï¼Œç›´æ¥è®©åˆå§‹ç‚¹ä¸º 1\n        for(int i: piles) r = Math.max(r, i); // ä¸€æ¬¡æœ€å¤šåƒä¸€å †\n        while(l &lt; r){\n            int mid = (l + r) &gt;&gt; 1;\n            if(check(piles, mid, H)) r = mid;\n            else l = mid + 1;\n        }\n        return r;\n    }\n\n    boolean check(int[] piles, int K, int H){\n        int t = 0;\n        for(double i: piles){\n            t += Math.ceil(i / K); // ä¸€å †é¦™è•‰å…±è®¡ i ä¸ªï¼Œéœ€è¦ âŒˆi / KâŒ‰ ä¸ªå°æ—¶åƒå®Œ\n            if(t &gt; H) return false; // è­¦å«å›æ¥äº†è¿˜æ²¡åƒå®Œ\n        }\n        return true;\n    }\n}</code></pre> \n<h1>å‡ºå¸ˆè¯•ç‚¼</h1> \n<p>æˆ‘éå¸¸å–œæ¬¢çœ‹æˆ‘æ–‡ç« çš„å°ä¼™ä¼´ï¼Œä¸ªä¸ªéƒ½æ˜¯äººæ‰ï¼Œè¯´è¯åˆå¥½å¬ï¼Œè„‘ç“œå­åˆèªæ˜ï¼Œè¿˜å¾ˆä¸»åŠ¨çš„ç»™æˆ‘æ–‡ç« ç‚¹èµã€‚æˆ‘ç›¸ä¿¡ç ç¿»ä¸¤ä¸ªå°æ€ªä¹‹åï¼Œä½ ä»¬å·²ç»æ˜¯è¿™ç±»é—®é¢˜çš„ä¸“å®¶äº†ï¼Œä¸‹é¢å°±ç»™å‡ é“é¢˜ç›®ä¾›å¤§ä¼™éšä¾¿ç©ç©ã€‚</p> \n<p><img src=\"https://segmentfault.com/img/bVbLvGN\" alt=\"image\" title=\"image\"><br>&lt;center style=\"font-size:14px;color:#C0C0C0;text-decoration:underline\"&gt;è¶…å–œæ¬¢å¾€è¥¿æ±ªçš„æ–‡ç« çš„&lt;/center&gt;</br></img></p> \n<h2>å…³å¡ 1</h2> \n<p>ä½ å°†ä¼šè·å¾—ä¸€ç³»åˆ—è§†é¢‘ç‰‡æ®µï¼Œè¿™äº›ç‰‡æ®µæ¥è‡ªäºä¸€é¡¹æŒç»­æ—¶é•¿ä¸º T ç§’çš„ä½“è‚²èµ›äº‹ã€‚è¿™äº›ç‰‡æ®µå¯èƒ½æœ‰æ‰€é‡å ï¼Œä¹Ÿå¯èƒ½é•¿åº¦ä¸ä¸€ã€‚</p> \n<p>è§†é¢‘ç‰‡æ®µ <code>clips[i]</code> éƒ½ç”¨åŒºé—´è¿›è¡Œè¡¨ç¤ºï¼šå¼€å§‹äº <code>clips[i][0]</code>å¹¶äº <code>clips[i][1]</code> ç»“æŸã€‚æˆ‘ä»¬ç”šè‡³å¯ä»¥å¯¹è¿™äº›ç‰‡æ®µè‡ªç”±åœ°å†å‰ªè¾‘ï¼Œä¾‹å¦‚ç‰‡æ®µ [0, 7] å¯ä»¥å‰ªåˆ‡æˆ [0, 1] + [1, 3] + [3, 7] ä¸‰éƒ¨åˆ†ã€‚</p> \n<p>æˆ‘ä»¬éœ€è¦å°†è¿™äº›ç‰‡æ®µè¿›è¡Œå†å‰ªè¾‘ï¼Œå¹¶å°†å‰ªè¾‘åçš„å†…å®¹æ‹¼æ¥æˆè¦†ç›–æ•´ä¸ªè¿åŠ¨è¿‡ç¨‹çš„ç‰‡æ®µï¼ˆ[0, T]ï¼‰ã€‚è¿”å›æ‰€éœ€ç‰‡æ®µçš„æœ€å°æ•°ç›®ï¼Œå¦‚æœæ— æ³•å®Œæˆè¯¥ä»»åŠ¡ï¼Œåˆ™è¿”å› -1 ã€‚</p> \n<h2>å…³å¡ 2</h2> \n<p>ç‰›ç‰›æœ‰ n ä»¶å¸¦æ°´çš„è¡£æœï¼Œå¹²ç‡¥è¡£æœæœ‰ä¸¤ç§æ–¹å¼ã€‚</p> \n<p>ä¸€ã€æ˜¯ç”¨çƒ˜å¹²æœºï¼Œå¯ä»¥æ¯åˆ†é’Ÿçƒ¤å¹²è¡£æœçš„ k æ»´æ°´ã€‚</p> \n<p>äºŒã€æ˜¯è‡ªç„¶çƒ˜å¹²ï¼Œæ¯åˆ†é’Ÿè¡£æœä¼šè‡ªç„¶çƒ˜å¹² 1 æ»´æ°´ã€‚</p> \n<p>çƒ˜å¹²æœºæ¯”è¾ƒå°ï¼Œæ¯æ¬¡åªèƒ½æ”¾è¿›ä¸€ä»¶è¡£æœã€‚</p> \n<p>æ³¨æ„ï¼Œä½¿ç”¨çƒ˜å¹²æœºçš„æ—¶å€™ï¼Œå…¶ä»–è¡£æœä»ç„¶å¯ä»¥ä¿æŒè‡ªç„¶çƒ˜å¹²çŠ¶æ€ï¼Œç°åœ¨ç‰›ç‰›æƒ³çŸ¥é“æœ€å°‘è¦å¤šå°‘æ—¶é—´å¯ä»¥æŠŠè¡£æœå…¨çƒ˜å¹²ã€‚</p> \n<h2>å…³å¡ 3</h2> \n<p>ä½ å¤ªå¼ºäº†ï¼æˆ‘å·²ç»æ²¡æœ‰æ›´å¤šçš„é¢˜ç›®ç»™ä½ ç©äº†ã€‚ä½ å¯ä»¥å‡­å€Ÿè¿™å¥—æ­¦åŠŸé—¯è¡æ±Ÿæ¹–äº†ï¼</p> \n<p>â€¦â€¦</p> \n<p>â€¦â€¦</p> \n<p>â€¦â€¦</p> \n<p>ç­‰ç­‰ï¼Œæˆ‘è¯´ç¬‘å‘¢ã€‚ä½ è¿™å°èº«æ¿ï¼Œè¦ä¸å…ˆè¿›æˆ‘çš„å…¶ä»–è®­ç»ƒè¥å†ç»ƒç»ƒå‘—ï¼Ÿ</p> \n<p>å•¥ï¼Œä½ é—®æˆ‘çš„å…¶ä»–è®­ç»ƒè¥åœ¨å“ªé‡Œï¼ŸåŠ¨åŠ¨å°æ‰‹ï¼Œç‚¹ä¸ªå…³æ³¨ï¼Œæ–°çš„è®­ç»ƒè¥å·²ç»åœ¨å»ºè®¾äº†ï¼Œå˜¿å˜¿ã€‚</p> \n<p><img src=\"https://segmentfault.com/img/bVbLvGJ\" alt=\"å’³å’³ï¼Œæš—ç¤ºçš„å¾ˆæ˜æ˜¾äº†\" title=\"å’³å’³ï¼Œæš—ç¤ºçš„å¾ˆæ˜æ˜¾äº†\"><br>&lt;center style=\"font-size:14px; color:#C0C0C0\"&gt;å’³å’³ï¼Œæš—ç¤ºçš„å¾ˆæ˜æ˜¾äº†&lt;/center&gt;</br></img></p>","descriptionType":"html","publishedDate":"Tue, 18 Aug 2020 11:19:33 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/remote/1460000023677261","linkMd5":"81351ef5cee65b004bca5b0902fb9913","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn86@2020_6/2020/08/24/23-08-22-904_dce38b7c68cc1701.webp","destWidth":219,"destHeight":219,"sourceBytes":7088,"destBytes":6372,"author":"å¾€è¥¿æ±ª","articleImgCdnMap":{"https://segmentfault.com/img/remote/1460000023677261":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn86@2020_6/2020/08/24/23-08-22-904_dce38b7c68cc1701.webp","https://segmentfault.com/img/bVbLvGs":"https://cdn.jsdelivr.net/gh/myreaderx13/cdn23@2020_5/2020/08/24/23-08-37-100_402763b3dd71ef2c.webp","https://segmentfault.com/img/bVbLvGS":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn71@2020_5/2020/08/24/23-08-36-323_5b993b1029d81167.webp","https://segmentfault.com/img/bVbLvGR":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn68@2020_3/2020/08/24/23-08-36-191_c3fec51f8080522e.webp","https://segmentfault.com/img/bVbLvGN":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn38@2020_1/2020/08/24/23-08-33-674_5324ccda8059124e.webp","https://segmentfault.com/img/bVbLvGJ":"https://cdn.jsdelivr.net/gh/myreaderx32/cdn57@2020_4/2020/08/24/23-08-33-915_ec37b2d3704c5497.webp"},"publishedOrCreatedDate":1598310388562},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"é‡ç£…ä¸¨ç§‘æŠ€æ•™è‚²å…¬å¸â€œå¥½æœªæ¥â€æ­£å¼å¯¹å¤–å¼€æºé«˜æ€§èƒ½PHPæ¡†æ¶Fend","link":"https://segmentfault.com/a/1190000023636701","description":"<p><strong>å¥½æœªæ¥æ˜¯ä¸€å®¶ä»¥æ™ºæ…§æ•™è‚²å’Œå¼€æ”¾å¹³å°ä¸ºä¸»ä½“ï¼Œä»¥ç´ è´¨æ•™è‚²å’Œè¯¾å¤–è¾…å¯¼ä¸ºè½½ä½“ï¼Œåœ¨å…¨çƒèŒƒå›´å†…æœåŠ¡å…¬åŠæ•™è‚²ï¼ŒåŠ©åŠ›æ°‘åŠæ•™è‚²ï¼Œæ¢ç´¢æœªæ¥æ•™è‚²æ–°æ¨¡å¼çš„ç§‘æŠ€æ•™è‚²å…¬å¸ã€‚</strong></p>\n<p><strong>æˆªè‡³ç›®å‰ï¼Œå¥½æœªæ¥é›†å›¢å·²å›´ç»•æ•™è‚²åœºæ™¯éœ€æ±‚ï¼Œç´¯è®¡ç ”å‘åŒ…æ‹¬å›¾åƒã€è¯­éŸ³ã€æ•°æ®æŒ–æ˜ã€è‡ªç„¶è¯­è¨€å¤„ç†ç­‰8å¤§ç±»å‹ã€100å¤šé¡¹AIèƒ½åŠ›ï¼Œæ‰“é€ 10ä½™é¡¹æ•™è‚²åœºæ™¯åº”ç”¨AIè§£å†³æ–¹æ¡ˆã€‚</strong></p>\n<p><strong>åœ¨æŠ€æœ¯ä¸æ–­æå‡çš„é“è·¯ä¸Šï¼Œå¥½æœªæ¥æŠ€æœ¯çº¿æå‡ºåšæŒâ€œå¤§ä¸­å°ã€å°å‰å°â€çš„æŠ€æœ¯æˆ˜ç•¥ï¼Œç»Ÿä¸€åŸºç¡€æœåŠ¡è®¾æ–½å»ºè®¾ï¼Œæ¨è¿›å…¬å¸æŠ€æœ¯ç»„ä»¶è½åœ°ï¼Œå¢å¼ºä¼ä¸šæŠ€æœ¯äººæ‰å†…ç”Ÿï¼Œä¸æ–­æå‡ä¼ä¸šçš„æŠ€æœ¯å®åŠ›åŠæŠ€æœ¯å½±å“åŠ›ã€‚</strong></p>\n<p><strong>é™¤æ­¤ä¹‹å¤–ï¼Œå¥½æœªæ¥å†…éƒ¨åšæŒå¼€æºå…±äº«ï¼Œé€šè¿‡â€œå¼€æ”¾ã€å…±äº«ã€åˆåŠ›å¼€å‘â€çš„æ¨¡å¼ï¼Œæ¨åŠ¨å¼€æºæ–‡åŒ–æ°›å›´çš„å½¢æˆä¸æŠ€æœ¯ç»„ç»‡å˜é©ï¼Œä¸ºä¸­å°å»ºè®¾æä¾›äº†å¦å¤–ä¸€ç§æŠ“æ‰‹ã€‚åŒæ—¶é€šè¿‡å¼€æºæ–‡åŒ–çš„å»ºè®¾ï¼Œä¿ƒè¿›æ•´ä¸ªæ•™è‚²ç”Ÿæ€æŠ€æœ¯å…±äº«ï¼Œæå‡æ•™è‚²ç§‘æŠ€å®åŠ›ï¼Œæ›´å¥½çš„ä¸ºâ€œç§‘æŠ€ä¸çˆ±è®©æ•™è‚²æ›´ç¾å¥½â€çš„æ„¿æ™¯å¥ å®šåŸºç¡€ã€‚</strong></p>\n<p><strong>è¿‘æœŸç”±â€œå¥½æœªæ¥â€æŠ€æœ¯å›¢é˜Ÿå¼€æºçš„é«˜æ€§èƒ½PHPæ¡†æ¶Fend PHPæ­£å¼ä¸Šçº¿ï¼è¯¥æ¡†æ¶å•æœºQPSå¯è¾¾åˆ°4000ä¸ªï¼Œå¥½æœªæ¥å†…éƒ¨ç›®å‰è¶…è¿‡30ä¸ªå›¢é˜Ÿé¡¹ç›®åœ¨ä½¿ç”¨è¯¥PHPæ¡†æ¶ï¼</strong></p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023636705\" alt=\"\" title=\"\" /></p>\n<h2>å‰è¨€</h2>\n<p>PHPæ˜¯ä¸€æ¬¾ç®€å•æ–¹ä¾¿çš„è¯­è¨€ï¼Œè€Œè¡Œä¸šå¼€æºæ¡†æ¶ä¸ºäº†<code>åç»­çµæ´»</code> è€Œå˜å¾—è¿‡äºç¹é‡</p>\n<p>Fendæ¡†æ¶æ˜¯ä¸€æ¬¾å¾ˆæœ‰å†å²çš„æ¡†æ¶ã€åˆä»£å‘å¸ƒåä¸€ç›´åœ¨å¥½æœªæ¥åŠé—´ä¼ æ’­ä½¿ç”¨ã€è¡ç”Ÿå‡ºå¤§é‡åˆ†æ”¯ç‰ˆæœ¬</p>\n<p>è¿™æ˜¯ä¸€æ¬¾å¾ˆæœ‰æ„æ€çš„æ¡†æ¶ã€æ™®é€šçš„æ¡†æ¶å†…éšè—ç€å¤§å‹äº’è”ç½‘ç»éªŒçš„ç²¾åã€ä¹ŸåŒæ—¶å­˜åœ¨å¤§é‡å†å²ç—•è¿¹</p>\n<p>2019å¹´7æœˆ æˆ‘ä»¬å¯¹Fendè¿›è¡Œæ•´ç†ã€å°è£…ã€æ¨å¹¿ã€ç›®å‰åœ¨å¥½æœªæ¥å†…éƒ¨æœ‰å¤§é‡çš„ç”¨æˆ·åœ¨ä½¿ç”¨ã€ç»´æŠ¤</p>\n<p>2020å¹´7æœˆ å¼€æºã€ä»¥æ­¤å…±å»ºäº¤æµ</p>\n<p>æˆ‘ä»¬å´‡å°š <code>è„šè¸å®åœ°ã€ä»°æœ›æ˜Ÿç©º</code> ç²¾ç¥ æ¬¢è¿å°ä¼™ä¼´ä¸€èµ·å‚ä¸å¼€æºå…±å»º</p>\n<h2>è®¾è®¡æ–¹å‘</h2>\n<p>Fend æ¡†æ¶æ˜¯ä¸€æ¬¾ä»¥ä¼ä¸šå¿«é€Ÿå®ç°ä¸šåŠ¡ä¸ºä¸»è¦ç›®æ ‡çš„æ¡†æ¶ï¼Œä½†ä¸å¤æ‚çš„è¡Œä¸šæµè¡Œæ¡†æ¶è¿½æ±‚ä¸åŒï¼š</p>\n<ul>\n <li><code>ç®€å•å®ç”¨</code>ï¼šè¿½æ±‚å¿«é€Ÿä¸Šæ‰‹ï¼Œæ‰©å±•åŠŸèƒ½ä¸€æ­¥åˆ°ä½ã€å¤§é‡é™ä½åŠŸèƒ½çš„å¤æ‚åº¦ã€æ¡†æ¶æ›´æ³¨é‡ç®€å•å®ç”¨å®ç°</li>\n <li><code>å•å±‚å†…æ ¸</code>ï¼šè¿½æ±‚ä¸€ä¸ªå‡½æ•°èƒ½å®ç°çš„åŠŸèƒ½ç»ä¸ç»§æ‰¿å°è£…ï¼Œä¸è¿½æ±‚æ¡†æ¶è‡ªèº«åŠŸèƒ½çš„ç»§æ‰¿å¯å¤ç”¨</li>\n <li><code>å†…èšå½’ç±»</code>ï¼šé«˜åº¦é›†ä¸­å½’ç±»åŠŸèƒ½ï¼Œé™ä½åº•å±‚å¤æ‚åº¦ï¼Œå‡å°‘åº•å±‚ç»„ä»¶å…³æ³¨åº¦ã€æ›´å¤šæ—¶é—´åœ¨ä¸šåŠ¡</li>\n <li><code>æŒç»­ç§¯ç´¯</code>ï¼šæŒç»­ç§¯ç´¯å¤§å‹äº’è”ç½‘çº¿ä¸Šè¿è¥ç»éªŒï¼ŒæŒç»­æ¢ç´¢ä¼ä¸šå®ç”¨æŠ€å·§ï¼Œæ·±åº¦æ¥è‡ªäºç§¯ç´¯è€ŒéAOPå¸¦æ¥çš„çµæ´»æ€§</li>\n <li><code>å†…æ ¸è®¾è®¡</code>ï¼šé«˜å†…èšç®€å•å†…æ ¸ï¼Œæ”¾å¼€ä¸šåŠ¡è‡ªå°è£…ç©ºé—´ï¼Œç•™ä¸‹æ›´å¤šç©ºé—´ç»™ä¸šåŠ¡</li>\n <li><code>å¼€æºå¿ƒæ€</code>ï¼šå¼€æ”¾å…¬å¼€ï¼Œæ¥å—ä»»ä½•ç¬¦åˆä»·å€¼è§‚æºç å¥‰çŒ®ã€ä½†æœ‰ä¸¥æ ¼ä»£ç å®¡æ ¸</li>\n</ul>\n<h2>åŠŸèƒ½ç®€ä»‹</h2>\n<ul>\n <li>Swoole/FPM åŒå¼•æ“å¹³æ»‘åˆ‡æ¢(åç¨‹ç‰ˆæœ¬è¿˜åœ¨æ•´ç†ç¨æ™šæ”¾å‡º)</li>\n <li>ç»Ÿä¸€ä½¿ç”¨ Composer Autoload PSR4</li>\n <li>è¯·æ±‚Debug æ¨¡å¼ï¼Œè¯·æ±‚ç½‘å€wxdebug=1å¯æŸ¥çœ‹debugæ¨¡å¼æŸ¥çœ‹å¼‚å¸¸åˆ†ææ€§èƒ½</li>\n <li>åç¨‹æ¨¡å¼ä¸‹å¯¹å˜é‡åŸŸåšäº†æ›´å¥½çš„å°è£…ï¼Œé™ä½åç¨‹ä½¿ç”¨éš¾åº¦</li>\n <li>æ”¯æŒå‹æµ‹ä½¿ç”¨ç°åº¦å½±å­åº“</li>\n <li>é«˜é€Ÿmapæ˜ å°„è·¯ç”± + FastRouteræ­£åˆ™è·¯ç”±</li>\n <li>ç¬¦åˆå¤§æ•°æ®æŒ–æ˜è®¾è®¡çš„Traceæ—¥å¿—ï¼Œæ–¹ä¾¿ELKåˆ†æã€ClickHouseã€HBaseã€å®æ—¶é¢„è­¦</li>\n <li>throw new Exceptionæ–¹å¼å¤„ç†ä¸šåŠ¡å¼‚å¸¸ã€èƒ½å¤Ÿå¿«é€Ÿå‘ç°å¼‚å¸¸</li>\n</ul>\n<h2>æ€§èƒ½å‹æµ‹</h2>\n<p>ç›®å‰æ˜¯åœ¨KVMè™šæ‹Ÿæœºä¸Šå‹æµ‹ã€åç»­ä¼šæ‰¾ä¸€å°é˜¿é‡Œäº‘è¿›è¡Œå‹æµ‹</p>\n<h3>FPMæ€§èƒ½</h3>\n<p>æœåŠ¡å™¨é…ç½®</p>\n<ul>\n <li>CPU 4 æ ¸ Xeon 2.2</li>\n <li>å†…å­˜ 12G</li>\n <li>KVM + CentOS 7.6</li>\n <li>FPM å¼€å¯è¿›ç¨‹æ•° 500</li>\n</ul>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023636704\" alt=\"\" title=\"\" /></p>\n<p>QPS 5331 (åˆ†æï¼šfpmç©ºè·‘hello 1wã€å¼•å…¥composer autoload å 7000ã€å¼€å¯æ—¥å¿—trace 6000ã€æ¡†æ¶å†…echo 5000)</p>\n<h3>Swoole 1.10.x æ€§èƒ½</h3>\n<p>æœåŠ¡å™¨é…ç½®</p>\n<ul>\n <li>CPU 4 æ ¸ Xeon 2.2</li>\n <li>å†…å­˜ 12G</li>\n <li>KVM + CentOS 7.6</li>\n <li>FPM å¼€å¯è¿›ç¨‹æ•° 500</li>\n</ul>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023636706\" alt=\"\" title=\"\" /></p>\n<p>QPS 24000ã€åç¨‹ç‰ˆæœ¬ç¨æ™šæ”¾å‡º</p>\n<h3>å‘è¡Œç‰ˆæœ¬ä»‹ç»</h3>\n<p>Fendæœ‰ä¸¤ä¸ªç‰ˆæœ¬</p>\n<ul>\n <li>Tagç‰ˆæœ¬ä¸º 1.2.x FPM/Swoole 1.10.x å¹³æ»‘åˆ‡æ¢ç‰ˆæœ¬</li>\n <li>Tagç‰ˆæœ¬ä¸º 1.3.x FPM/Swoole 4.5.x Coroutine åç¨‹ å¹³æ»‘åˆ‡æ¢ç‰ˆæœ¬ <code>æ­¤ç‰ˆæœ¬è¿˜åœ¨è°ƒæ•´</code></li>\n</ul>\n<h2>ä»¥ä¸‹ä¸º1.2.xç‰ˆæœ¬å®‰è£…</h2>\n<h4>FPM Engine Start</h4>\n<p>master is 1.2.x version</p>\n<pre><code>composer create-project fend/fend-skeleton:~1.2.0 project_name\nå¤åˆ¶ä»£ç </code></pre>\n<p>Ref <a href=\"https://github.com/tal-tech/fend/blob/master/nginx.conf\" rel=\"nofollow noreferrer\">nginx.conf</a> to configure Nginx and <a href=\"http://127.0.0.1/\" rel=\"nofollow noreferrer\">http://127.0.0.1/</a> on browser</p>\n<h4>Swoole Engine Start</h4>\n<pre><code>composer create-project fend/fend-skeleton:~1.2.0 project_name\n\n# swoole start ( /bin/fend depend on composer require symfony/console )\nphp /bin/fend Swoole -c app/Config/Swoole.php start\nphp /bin/start.php -c app/Config/Swoole.php start\nå¤åˆ¶ä»£ç </code></pre>\n<p>browser <a href=\"http://127.0.0.1:9572/\" rel=\"nofollow noreferrer\">http://127.0.0.1:9572/</a></p>\n<h2>1.3.0åç¨‹ç‰ˆæœ¬ å®‰è£…</h2>\n<pre><code>composer create-project fend/fend-skeleton:~1.3.0\nå¤åˆ¶ä»£ç </code></pre>\n<h2>è½¯ä»¶ä½œè€…è´¡çŒ®åˆ—è¡¨</h2>\n<p><img src=\"https://segmentfault.com/img/bVbLk9V\" alt=\"image\" title=\"image\" /></p>\n<p>(å…¶ä»–è´¡çŒ®è€…ã€è¯·è¯¦è§æ–‡æ¡£é¸£è°¢)</p>\n<h2>åˆä½œä¼™ä¼´</h2>\n<p>å¥½æœªæ¥æ•™è‚²é›†å›¢90%åœ¨çº¿ä¸šåŠ¡åœ¨ä½¿ç”¨æœ¬æ¡†æ¶</p>\n<ul>\n <li><img src=\"https://segmentfault.com/img/remote/1460000023636708\" alt=\"\" title=\"\" /></li>\n <li><img src=\"https://segmentfault.com/img/remote/1460000023636707\" alt=\"\" title=\"\" /></li>\n <li><img src=\"https://segmentfault.com/img/remote/1460000023636710\" alt=\"xiaohouai.png\" title=\"xiaohouai.png\"><p>xiaohouai.png</p></img></li>\n <li><img src=\"https://segmentfault.com/img/remote/1460000023636709\" alt=\"\" title=\"\" /></li>\n</ul>\n<h2>å…±å»ºè§„åˆ™</h2>\n<p>æ¬¢è¿æŒ‘æˆ˜ç»„ä»¶åŠŸèƒ½ã€å…è®¸åŒç±»åŠŸèƒ½åŒæ—¶å‘å¸ƒç«äº‰ã€ä»¥ æ€§èƒ½å¥½ + å®ç”¨åŠå®ç°ç®€å• + åŠŸèƒ½å®ç”¨ è¯„åˆ¤</p>\n<h2>è”ç³»æˆ‘ä»¬</h2>\n<p>issue: <a href=\"https://github.com/tal-tech/fend/issues\" rel=\"nofollow noreferrer\">github.com/tal-tech/feâ€¦</a></p>\n<p>åŠ ç¾¤è¯·åŠ å¾®ä¿¡ï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023636711\" alt=\"contactus.png\" title=\"contactus.png\" /></p>\n<p><strong>ä¹Ÿè®¸ä½ è¿˜æƒ³çœ‹</strong></p>\n<p><a href=\"http://mp.weixin.qq.com/s?__biz=MzI4MDM5MTAzNA==&amp;mid=2247483964&amp;idx=2&amp;sn=a8f1b52d3ca00a6fae100cbe555e0897&amp;chksm=ebb87e29dccff73f0c1afc8362bf7add48f5203f0117f32e0f2e2bba4d928a7c3b1bb84741fe&amp;scene=21#wechat_redirect\" rel=\"nofollow noreferrer\">DStack--åŸºäºflutterçš„æ··åˆå¼€å‘æ¡†æ¶</a></p>\n<p><a href=\"http://mp.weixin.qq.com/s?__biz=MzI4MDM5MTAzNA==&amp;mid=2247483856&amp;idx=1&amp;sn=e48f6c63e11c86a550fdcbdb8f90c26b&amp;chksm=ebb87dc5dccff4d357dc39137e2e74f741a2b65b908c54887658dc5e985ab62681ec39c1d111&amp;scene=21#wechat_redirect\" rel=\"nofollow noreferrer\">WebRTCæºç åˆ†æâ€”â€”è§†é¢‘æµæ°´çº¿å»ºç«‹ï¼ˆä¸Šï¼‰</a></p>\n<p><a href=\"http://mp.weixin.qq.com/s?__biz=MzI4MDM5MTAzNA==&amp;mid=2247483785&amp;idx=1&amp;sn=b9964373d5b5a07954d531b124c9dc4a&amp;chksm=ebb87d9cdccff48a877b8be329f0070b9a640509ae7ede1d2360775fa7f58f5393fe8729532b&amp;scene=21#wechat_redirect\" rel=\"nofollow noreferrer\">\"è€ƒè¯•\"èƒŒåçš„ç§‘å­¦ï¼šæ•™è‚²æµ‹é‡ä¸­çš„ç†è®ºä¸æ¨¡å‹ï¼ˆIRTç¯‡ï¼‰</a></p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023636712\" alt=\"\" title=\"\" /></p>","descriptionType":"html","publishedDate":"Fri, 14 Aug 2020 10:59:08 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/remote/1460000023636705","linkMd5":"3f522baba1e817cf81ff90c5e1d10cfb","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn78@2020_2/2020/08/24/23-08-22-752_88bc2bcf04a82bf3.webp","destWidth":461,"destHeight":180,"sourceBytes":32231,"destBytes":9310,"author":"å¥½æœªæ¥æŠ€æœ¯å›¢é˜Ÿ","articleImgCdnMap":{"https://segmentfault.com/img/remote/1460000023636705":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn78@2020_2/2020/08/24/23-08-22-752_88bc2bcf04a82bf3.webp","https://segmentfault.com/img/remote/1460000023636704":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn58@2020_5/2020/08/24/23-08-41-880_4d348bf55d8de54e.webp","https://segmentfault.com/img/remote/1460000023636706":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn49@2020_5/2020/08/24/23-08-43-314_cd76465a00b523c4.webp","https://segmentfault.com/img/bVbLk9V":"https://cdn.jsdelivr.net/gh/myreaderx32/cdn45@2020_5/2020/08/24/23-08-33-349_7f210afa164eab9c.webp","https://segmentfault.com/img/remote/1460000023636708":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn44@2020_6/2020/08/24/23-08-42-102_38b4354b68e47c64.webp","https://segmentfault.com/img/remote/1460000023636707":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn40@2020_4/2020/08/24/23-08-42-022_92b4b2118af3de22.webp","https://segmentfault.com/img/remote/1460000023636710":"https://cdn.jsdelivr.net/gh/myreaderx23/cdn8@2020_3/2020/08/24/23-08-41-903_966b3e9e7d0df3ae.webp","https://segmentfault.com/img/remote/1460000023636709":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn53@2020_4/2020/08/24/23-08-41-847_78d5f3da1847c64b.webp","https://segmentfault.com/img/remote/1460000023636711":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn15@2020_3/2020/08/24/23-08-41-491_a91637ac7b4d1501.webp","https://segmentfault.com/img/remote/1460000023636712":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn20@2020_5/2020/08/24/23-08-41-617_74973801d641c1f5.webp"},"publishedOrCreatedDate":1598310388568},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"äº†ä¸èµ·çš„ IoC ä¸ DI","link":"https://segmentfault.com/a/1190000023650518","description":"<p>æœ¬æ–‡é˜¿å®å“¥å°†ä»å…­ä¸ªæ–¹é¢å…¥æ‰‹ï¼Œå…¨æ–¹ä½å¸¦ä½ ä¸€èµ·æ¢ç´¢é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ <strong>IoCï¼ˆæ§åˆ¶åè½¬ï¼‰å’Œ DIï¼ˆä¾èµ–æ³¨å…¥ï¼‰</strong> çš„è®¾è®¡æ€æƒ³ã€‚é˜…è¯»å®Œæœ¬æ–‡ï¼Œä½ å°†äº†è§£ä»¥ä¸‹å†…å®¹ï¼š</p>\n<ul>\n <li>IoC æ˜¯ä»€ä¹ˆã€IoC èƒ½è§£å†³ä»€ä¹ˆé—®é¢˜ï¼›</li>\n <li>IoC ä¸ DI ä¹‹é—´çš„å…³ç³»ã€æœªä½¿ç”¨ DI æ¡†æ¶å’Œä½¿ç”¨ DI æ¡†æ¶ä¹‹é—´çš„åŒºåˆ«ï¼›</li>\n <li>DI åœ¨ AngularJS/Angular å’Œ NestJS ä¸­çš„åº”ç”¨ï¼›</li>\n <li>äº†è§£å¦‚ä½•ä½¿ç”¨ TypeScript å®ç°ä¸€ä¸ª IoC å®¹å™¨ï¼Œå¹¶äº†è§£ <strong>è£…é¥°å™¨ã€åå°„</strong> çš„ç›¸å…³çŸ¥è¯†ã€‚</li>\n</ul>\n<h3>ä¸€ã€èƒŒæ™¯æ¦‚è¿°</h3>\n<p>åœ¨ä»‹ç»ä»€ä¹ˆæ˜¯ IoC å®¹å™¨ä¹‹å‰ï¼Œé˜¿å®å“¥æ¥ä¸¾ä¸€ä¸ªæ—¥å¸¸å·¥ä½œä¸­å¾ˆå¸¸è§çš„åœºæ™¯ï¼Œå³åˆ›å»ºæŒ‡å®šç±»çš„å®ä¾‹ã€‚æœ€ç®€å•çš„æƒ…å½¢æ˜¯è¯¥ç±»æ²¡æœ‰ä¾èµ–å…¶ä»–ç±»ï¼Œä½†ç°å®å¾€å¾€æ˜¯æ®‹é…·çš„ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºæŸä¸ªç±»çš„å®ä¾‹æ—¶ï¼Œéœ€è¦ä¾èµ–ä¸åŒç±»å¯¹åº”çš„å®ä¾‹ã€‚ä¸ºäº†è®©å°ä¼™ä¼´ä»¬èƒ½å¤Ÿæ›´å¥½åœ°ç†è§£ä¸Šè¿°çš„å†…å®¹ï¼Œé˜¿å®å“¥æ¥ä¸¾ä¸€ä¸ªä¾‹å­ã€‚</p>\n<p>ä¸€è¾†å°æ±½è½¦ ğŸš— é€šå¸¸ç”± <strong>å‘åŠ¨æœºã€åº•ç›˜ã€è½¦èº«å’Œç”µæ°”è®¾å¤‡</strong> å››å¤§éƒ¨åˆ†ç»„æˆã€‚æ±½è½¦ç”µæ°”è®¾å¤‡çš„å†…éƒ¨æ„é€ å¾ˆå¤æ‚ï¼Œç®€å•èµ·è§ï¼Œæˆ‘ä»¬åªè€ƒè™‘ä¸‰ä¸ªéƒ¨åˆ†ï¼šå‘åŠ¨æœºã€åº•ç›˜å’Œè½¦èº«ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023650522\" alt=\"\" title=\"\" /></p>\n<p>ï¼ˆå›¾ç‰‡æ¥æºï¼š<a href=\"https://www.newkidscar.com/vehicle-construction/car-structure/\" rel=\"nofollow noreferrer\">https://www.newkidscar.com/ve...</a>ï¼‰</p>\n<p>åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œè¦é€ è¾†è½¦è¿˜æ˜¯å¾ˆå›°éš¾çš„ã€‚è€Œåœ¨è½¯ä»¶çš„ä¸–ç•Œä¸­ï¼Œè¿™å¯éš¾ä¸å€’æˆ‘ä»¬ã€‚ğŸ‘‡æ˜¯é˜¿å®å“¥è¦é€ çš„è½¦å­ï¼Œæœ‰æœ¨æœ‰å¾ˆé…·ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023650524\" alt=\"\" title=\"\" /></p>\n<p>ï¼ˆå›¾ç‰‡æ¥æºï¼š<a href=\"https://pixabay.com/zh/illustrations/car-sports-car-racing-car-speed-49278/\" rel=\"nofollow noreferrer\">https://pixabay.com/zh/illust...</a>ï¼‰</p>\n<p>åœ¨å¼€å§‹é€ è½¦å‰ï¼Œæˆ‘ä»¬å¾—å…ˆçœ‹ä¸€ä¸‹ â€œå›¾çº¸â€ï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023650528\" alt=\"\" title=\"\" /></p>\n<p>çœ‹å®Œä¸Šé¢çš„ â€œå›¾çº¸â€ï¼Œæˆ‘ä»¬é©¬ä¸Šæ¥å¼€å¯é€ è½¦ä¹‹æ—…ã€‚ç¬¬ä¸€æ­¥æˆ‘ä»¬å…ˆæ¥å®šä¹‰è½¦èº«ç±»ï¼š</p>\n<p><strong>1.å®šä¹‰è½¦èº«ç±»</strong></p>\n<pre><code class=\"typescript\">export default class Body { }</code></pre>\n<p><strong>2.å®šä¹‰åº•ç›˜ç±»</strong></p>\n<pre><code class=\"typescript\">export default class Chassis { }</code></pre>\n<p><strong>3.å®šä¹‰å¼•æ“ç±»</strong></p>\n<pre><code class=\"typescript\">export default class Engine {\n  start() {\n    console.log(\"å¼•æ“å‘åŠ¨äº†\");\n  }\n}</code></pre>\n<p><strong>4.å®šä¹‰æ±½è½¦ç±»</strong></p>\n<pre><code class=\"typescript\">import Engine from './engine';\nimport Chassis from './chassis';\nimport Body from './body';\n\nexport default class Car {\n    engine: Engine;\n    chassis: Chassis;\n    body: Body;\n\n    constructor() {\n      this.engine = new Engine();\n      this.body = new Body();\n      this.chassis = new Chassis();\n    }\n\n    run() {\n      this.engine.start();\n    }\n}</code></pre>\n<p>ä¸€åˆ‡å·²å‡†å¤‡å°±ç»ªï¼Œæˆ‘ä»¬é©¬ä¸Šæ¥é€ ä¸€è¾†è½¦ï¼š</p>\n<pre><code class=\"typescript\">const car = new Car(); // é˜¿å®å“¥é€ è¾†æ–°è½¦\ncar.run(); // æ§åˆ¶å°è¾“å‡ºï¼šå¼•æ“å‘åŠ¨äº†</code></pre>\n<p>ç°åœ¨è™½ç„¶è½¦å·²ç»å¯ä»¥å¯åŠ¨äº†ï¼Œä½†å´å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>\n<ul>\n <li>é—®é¢˜ä¸€ï¼šåœ¨é€ è½¦çš„æ—¶å€™ï¼Œä½ ä¸èƒ½é€‰æ‹©é…ç½®ã€‚æ¯”å¦‚ä½ æƒ³æ›´æ¢æ±½è½¦å¼•æ“çš„è¯ï¼ŒæŒ‰ç…§ç›®å‰çš„æ–¹æ¡ˆï¼Œæ˜¯å®ç°ä¸äº†çš„ã€‚</li>\n <li>é—®é¢˜äºŒï¼šåœ¨æ±½è½¦ç±»å†…éƒ¨ï¼Œä½ éœ€è¦åœ¨æ„é€ å‡½æ•°ä¸­æ‰‹åŠ¨å»åˆ›å»ºæ±½è½¦çš„å„ä¸ªéƒ¨ä»¶ã€‚</li>\n</ul>\n<p>ä¸ºäº†è§£å†³ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæä¾›æ›´çµæ´»çš„æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯ä»¥é‡æ„ä¸€ä¸‹å·²å®šä¹‰çš„æ±½è½¦ç±»ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"typescript\">export default class Car {\n    body: Body;\n    engine: Engine;\n    chassis: Chassis;\n  \n    constructor(engine, body, chassis) {\n      this.engine = engine;\n      this.body = body;\n      this.chassis = chassis;\n    }\n\n    run() {\n      this.engine.start();\n    }\n}</code></pre>\n<p>é‡æ„å®Œæ±½è½¦ç±»ï¼Œæˆ‘ä»¬æ¥é‡æ–°é€ è¾†æ–°è½¦ï¼š</p>\n<pre><code class=\"typescript\">const engine = new NewEngine();\nconst body = new Body();\nconst chassis = new Chassis();\n\nconst newCar = new Car(engine, body, chassis);\nnewCar.run();</code></pre>\n<p>æ­¤æ—¶æˆ‘ä»¬å·²ç»è§£å†³äº†ä¸Šé¢æåˆ°çš„ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œè¦è§£å†³ç¬¬äºŒä¸ªé—®é¢˜æˆ‘ä»¬è¦æ¥äº†è§£ä¸€ä¸‹ IoCï¼ˆæ§åˆ¶åè½¬ï¼‰çš„æ¦‚å¿µã€‚</p>\n<h3>äºŒã€IoC æ˜¯ä»€ä¹ˆ</h3>\n<p>IoCï¼ˆInversion of Controlï¼‰ï¼Œå³ â€œæ§åˆ¶åè½¬â€ã€‚åœ¨å¼€å‘ä¸­ï¼Œ IoC æ„å‘³ç€ä½ è®¾è®¡å¥½çš„å¯¹è±¡äº¤ç»™å®¹å™¨æ§åˆ¶ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ä¼ ç»Ÿçš„æ–¹å¼ï¼Œåœ¨å¯¹è±¡å†…éƒ¨ç›´æ¥æ§åˆ¶ã€‚ã€€ã€€</p>\n<p>å¦‚ä½•ç†è§£å¥½ IoC å‘¢ï¼Ÿç†è§£å¥½ IoC çš„å…³é”®æ˜¯è¦æ˜ç¡® <strong>â€œè°æ§åˆ¶è°ï¼Œæ§åˆ¶ä»€ä¹ˆï¼Œä¸ºä½•æ˜¯åè½¬ï¼Œå“ªäº›æ–¹é¢åè½¬äº†â€</strong>ï¼Œæˆ‘ä»¬æ¥æ·±å…¥åˆ†æä¸€ä¸‹ã€‚ã€€ã€€</p>\n<ul>\n <li>è°æ§åˆ¶è°ï¼Œæ§åˆ¶ä»€ä¹ˆï¼šåœ¨ä¼ ç»Ÿçš„ç¨‹åºè®¾è®¡ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨å¯¹è±¡å†…éƒ¨é€šè¿‡ <code>new</code> çš„æ–¹å¼åˆ›å»ºå¯¹è±¡ï¼Œæ˜¯ç¨‹åºä¸»åŠ¨åˆ›å»ºä¾èµ–å¯¹è±¡ï¼› <strong>è€Œ IoC æ˜¯æœ‰ä¸“é—¨ä¸€ä¸ªå®¹å™¨æ¥åˆ›å»ºè¿™äº›å¯¹è±¡ï¼Œå³ç”± IoC å®¹å™¨æ§åˆ¶å¯¹è±¡çš„åˆ›å»º</strong>ï¼›<p>è°æ§åˆ¶è°ï¼Ÿå½“ç„¶æ˜¯ IoC å®¹å™¨æ§åˆ¶äº†å¯¹è±¡ï¼›æ§åˆ¶ä»€ä¹ˆï¼Ÿä¸»è¦æ˜¯æ§åˆ¶å¤–éƒ¨èµ„æºï¼ˆä¾èµ–å¯¹è±¡ï¼‰è·å–ã€‚</p></li>\n <li>ä¸ºä½•æ˜¯åè½¬äº†ï¼Œå“ªäº›æ–¹é¢åè½¬äº†ï¼šæœ‰åè½¬å°±æœ‰æ­£è½¬ï¼Œä¼ ç»Ÿåº”ç”¨ç¨‹åºæ˜¯ç”±æˆ‘ä»¬è‡ªå·±åœ¨ç¨‹åºä¸­ä¸»åŠ¨æ§åˆ¶å»è·å–ä¾èµ–å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æ­£è½¬ï¼› <strong>è€Œåè½¬åˆ™æ˜¯ç”±å®¹å™¨æ¥å¸®å¿™åˆ›å»ºåŠæ³¨å…¥ä¾èµ–å¯¹è±¡</strong>ï¼›<p>ä¸ºä½•æ˜¯åè½¬ï¼Ÿå› ä¸ºç”±å®¹å™¨å¸®æˆ‘ä»¬æŸ¥æ‰¾åŠæ³¨å…¥ä¾èµ–å¯¹è±¡ï¼Œå¯¹è±¡åªæ˜¯è¢«åŠ¨çš„æ¥å—ä¾èµ–å¯¹è±¡ï¼Œæ‰€ä»¥æ˜¯åè½¬äº†ï¼›å“ªäº›æ–¹é¢åè½¬äº†ï¼Ÿä¾èµ–å¯¹è±¡çš„è·å–è¢«åè½¬äº†ã€‚</p></li>\n</ul>\n<h3>ä¸‰ã€IoC èƒ½åšä»€ä¹ˆ</h3>\n<p>IoC ä¸æ˜¯ä¸€ç§æŠ€æœ¯ï¼Œåªæ˜¯ä¸€ç§æ€æƒ³ï¼Œæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„ä¸€ç§è®¾è®¡åŸåˆ™ï¼Œå¯ä»¥ç”¨æ¥å‡ä½è®¡ç®—æœºä»£ç ä¹‹é—´çš„è€¦åˆåº¦ã€‚</p>\n<p>ä¼ ç»Ÿåº”ç”¨ç¨‹åºéƒ½æ˜¯ç”±æˆ‘ä»¬åœ¨ç±»å†…éƒ¨ä¸»åŠ¨åˆ›å»ºä¾èµ–å¯¹è±¡ï¼Œä»è€Œå¯¼è‡´ç±»ä¸ç±»ä¹‹é—´é«˜è€¦åˆï¼Œéš¾äºæµ‹è¯•ï¼› <strong>æœ‰äº† IoC å®¹å™¨åï¼ŒæŠŠåˆ›å»ºå’ŒæŸ¥æ‰¾ä¾èµ–å¯¹è±¡çš„æ§åˆ¶æƒäº¤ç»™äº†å®¹å™¨ï¼Œç”±å®¹å™¨æ³¨å…¥ç»„åˆå¯¹è±¡ï¼Œæ‰€ä»¥å¯¹è±¡ä¹‹é—´æ˜¯æ¾æ•£è€¦åˆã€‚</strong> è¿™æ ·ä¹Ÿä¾¿äºæµ‹è¯•ï¼Œåˆ©äºåŠŸèƒ½å¤ç”¨ï¼Œæ›´é‡è¦çš„æ˜¯ä½¿å¾—ç¨‹åºçš„æ•´ä¸ªä½“ç³»ç»“æ„å˜å¾—éå¸¸çµæ´»ã€‚ã€€ã€€</p>\n<p>å…¶å® IoC å¯¹ç¼–ç¨‹å¸¦æ¥çš„æœ€å¤§æ”¹å˜ä¸æ˜¯ä»ä»£ç ä¸Šï¼Œè€Œæ˜¯æ€æƒ³ä¸Šï¼Œå‘ç”Ÿäº† â€œä¸»ä»æ¢ä½â€ çš„å˜åŒ–ã€‚åº”ç”¨ç¨‹åºæœ¬æ¥æ˜¯è€å¤§ï¼Œè¦è·å–ä»€ä¹ˆèµ„æºéƒ½æ˜¯ä¸»åŠ¨å‡ºå‡»ï¼Œä½†åœ¨ IoC æ€æƒ³ä¸­ï¼Œåº”ç”¨ç¨‹åºå°±å˜æˆè¢«åŠ¨äº†ï¼Œè¢«åŠ¨çš„ç­‰å¾… IoC å®¹å™¨æ¥åˆ›å»ºå¹¶æ³¨å…¥å®ƒæ‰€éœ€çš„èµ„æºäº†ã€‚ã€€ã€€ã€€ã€€</p>\n<h3>å››ã€IoC ä¸ DI ä¹‹é—´çš„å…³ç³»</h3>\n<p>å¯¹äºæ§åˆ¶åè½¬æ¥è¯´ï¼Œå…¶ä¸­æœ€å¸¸è§çš„æ–¹å¼å«åš <strong>ä¾èµ–æ³¨å…¥</strong>ï¼Œç®€ç§°ä¸º DIï¼ˆDependency Injectionï¼‰ã€‚</p>\n<p>ç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»ç”±å®¹å™¨åœ¨è¿è¡ŒæœŸå†³å®šï¼Œå½¢è±¡çš„è¯´ï¼Œå³ç”±å®¹å™¨åŠ¨æ€çš„å°†æŸä¸ªä¾èµ–å…³ç³»æ³¨å…¥åˆ°ç»„ä»¶ä¹‹ä¸­ã€‚ <strong>ä¾èµ–æ³¨å…¥çš„ç›®çš„å¹¶éä¸ºè½¯ä»¶ç³»ç»Ÿå¸¦æ¥æ›´å¤šåŠŸèƒ½ï¼Œè€Œæ˜¯ä¸ºäº†æå‡ç»„ä»¶é‡ç”¨çš„é¢‘ç‡ï¼Œå¹¶ä¸ºç³»ç»Ÿæ­å»ºä¸€ä¸ªçµæ´»ã€å¯æ‰©å±•çš„å¹³å°ã€‚</strong> </p>\n<p>é€šè¿‡ä¾èµ–æ³¨å…¥æœºåˆ¶ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡ç®€å•çš„é…ç½®ï¼Œè€Œæ— éœ€ä»»ä½•ä»£ç å°±å¯æŒ‡å®šç›®æ ‡éœ€è¦çš„èµ„æºï¼Œå®Œæˆè‡ªèº«çš„ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸éœ€è¦å…³å¿ƒå…·ä½“çš„èµ„æºæ¥è‡ªä½•å¤„ï¼Œç”±è°å®ç°ã€‚</p>\n<p>ç†è§£ DI çš„å…³é”®æ˜¯ <strong>â€œè°ä¾èµ–äº†è°ï¼Œä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–ï¼Œè°æ³¨å…¥äº†è°ï¼Œæ³¨å…¥äº†ä»€ä¹ˆâ€</strong>ï¼šã€€</p>\n<ul>\n <li>è°ä¾èµ–äº†è°ï¼šå½“ç„¶æ˜¯åº”ç”¨ç¨‹åºä¾èµ– IoC å®¹å™¨ï¼›</li>\n <li>ä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–ï¼šåº”ç”¨ç¨‹åºéœ€è¦ IoC å®¹å™¨æ¥æä¾›å¯¹è±¡éœ€è¦çš„å¤–éƒ¨èµ„æºï¼ˆåŒ…æ‹¬å¯¹è±¡ã€èµ„æºã€å¸¸é‡æ•°æ®ï¼‰ï¼›</li>\n <li>è°æ³¨å…¥è°ï¼šå¾ˆæ˜æ˜¾æ˜¯ IoC å®¹å™¨æ³¨å…¥åº”ç”¨ç¨‹åºä¾èµ–çš„å¯¹è±¡ï¼›</li>\n <li>æ³¨å…¥äº†ä»€ä¹ˆï¼šæ³¨å…¥æŸä¸ªå¯¹è±¡æ‰€éœ€çš„å¤–éƒ¨èµ„æºï¼ˆåŒ…æ‹¬å¯¹è±¡ã€èµ„æºã€å¸¸é‡æ•°æ®ï¼‰ã€‚</li>\n</ul>\n<p>é‚£ä¹ˆ IoC å’Œ DI æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿå…¶å®å®ƒä»¬æ˜¯åŒä¸€ä¸ªæ¦‚å¿µçš„ä¸åŒè§’åº¦æè¿°ï¼Œç”±äºæ§åˆ¶åè½¬çš„æ¦‚å¿µæ¯”è¾ƒå«ç³Šï¼ˆå¯èƒ½åªæ˜¯ç†è§£ä¸ºå®¹å™¨æ§åˆ¶å¯¹è±¡è¿™ä¸€ä¸ªå±‚é¢ï¼Œå¾ˆéš¾è®©äººæƒ³åˆ°è°æ¥ç»´æŠ¤ä¾èµ–å…³ç³»ï¼‰ï¼Œæ‰€ä»¥ 2004 å¹´å¤§å¸ˆçº§äººç‰© Martin Fowler åˆç»™å‡ºäº†ä¸€ä¸ªæ–°çš„åå­—ï¼š<strong>â€œä¾èµ–æ³¨å…¥â€ï¼Œç›¸å¯¹ IoC è€Œè¨€ï¼Œâ€œä¾èµ–æ³¨å…¥â€ æ˜ç¡®æè¿°äº†è¢«æ³¨å…¥å¯¹è±¡ä¾èµ– IoC å®¹å™¨é…ç½®ä¾èµ–å¯¹è±¡</strong>ã€‚</p>\n<p>æ€»çš„æ¥è¯´ï¼Œ æ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼‰æ˜¯è¯´åˆ›å»ºå¯¹è±¡çš„æ§åˆ¶æƒå‘ç”Ÿè½¬ç§»ï¼Œä»¥å‰åˆ›å»ºå¯¹è±¡çš„ä¸»åŠ¨æƒå’Œåˆ›å»ºæ—¶æœºç”±åº”ç”¨ç¨‹åºæŠŠæ§ï¼Œè€Œç°åœ¨è¿™ç§æƒåˆ©è½¬äº¤ç»™ IoC å®¹å™¨ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨æ¥åˆ›å»ºå¯¹è±¡çš„å·¥å‚ï¼Œä½ éœ€è¦ä»€ä¹ˆå¯¹è±¡ï¼Œå®ƒå°±ç»™ä½ ä»€ä¹ˆå¯¹è±¡ã€‚ <strong>æœ‰äº† IoC å®¹å™¨ï¼Œä¾èµ–å…³ç³»å°±æ”¹å˜äº†ï¼ŒåŸå…ˆçš„ä¾èµ–å…³ç³»å°±æ²¡äº†ï¼Œå®ƒä»¬éƒ½ä¾èµ– IoC å®¹å™¨äº†ï¼Œé€šè¿‡ IoC å®¹å™¨æ¥å»ºç«‹å®ƒä»¬ä¹‹é—´çš„å…³ç³»</strong>ã€‚ã€€</p>\n<p>å‰é¢ä»‹ç»äº†é‚£ä¹ˆå¤šçš„æ¦‚å¿µï¼Œç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æœªä½¿ç”¨ä¾èµ–æ³¨å…¥æ¡†æ¶å’Œä½¿ç”¨ä¾èµ–æ³¨å…¥æ¡†æ¶ä¹‹é—´æœ‰ä»€ä¹ˆæ˜æ˜¾çš„åŒºåˆ«ã€‚</p>\n<h4>4.1 æœªä½¿ç”¨ä¾èµ–æ³¨å…¥æ¡†æ¶</h4>\n<p>å‡è®¾æˆ‘ä»¬çš„æœåŠ¡ A ä¾èµ–äºæœåŠ¡ Bï¼Œå³è¦ä½¿ç”¨æœåŠ¡ A å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆåˆ›å»ºæœåŠ¡ Bã€‚å…·ä½“çš„æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023650527\" alt=\"\" title=\"\" /></p>\n<p>ä»ä¸Šå›¾å¯çŸ¥ï¼Œæœªä½¿ç”¨ä¾èµ–æ³¨å…¥æ¡†æ¶æ—¶ï¼ŒæœåŠ¡çš„ä½¿ç”¨è€…éœ€è¦å…³å¿ƒæœåŠ¡æœ¬èº«å’Œå…¶ä¾èµ–çš„å¯¹è±¡æ˜¯å¦‚ä½•åˆ›å»ºçš„ï¼Œä¸”éœ€è¦æ‰‹åŠ¨ç»´æŠ¤ä¾èµ–å…³ç³»ã€‚è‹¥æœåŠ¡æœ¬èº«éœ€è¦ä¾èµ–å¤šä¸ªå¯¹è±¡ï¼Œè¿™æ ·å°±ä¼šå¢åŠ ä½¿ç”¨éš¾åº¦å’ŒåæœŸçš„ç»´æŠ¤æˆæœ¬ã€‚å¯¹äºä¸Šè¿°çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘å¼•å…¥ä¾èµ–æ³¨å…¥æ¡†æ¶ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¼•å…¥ä¾èµ–æ³¨å…¥æ¡†æ¶ï¼Œæ•´ä½“æµç¨‹ä¼šå‘ç”Ÿä»€ä¹ˆå˜åŒ–ã€‚</p>\n<h4>4.2 ä½¿ç”¨ä¾èµ–æ³¨å…¥æ¡†æ¶</h4>\n<p>ä½¿ç”¨ä¾èµ–æ³¨å…¥æ¡†æ¶ä¹‹åï¼Œç³»ç»Ÿä¸­çš„æœåŠ¡ä¼šç»Ÿä¸€æ³¨å†Œåˆ° IoC å®¹å™¨ä¸­ï¼Œå¦‚æœæœåŠ¡æœ‰ä¾èµ–å…¶ä»–æœåŠ¡æ—¶ï¼Œä¹Ÿéœ€è¦å¯¹ä¾èµ–è¿›è¡Œå£°æ˜ã€‚å½“ç”¨æˆ·éœ€è¦ä½¿ç”¨ç‰¹å®šçš„æœåŠ¡æ—¶ï¼ŒIoC å®¹å™¨ä¼šè´Ÿè´£è¯¥æœåŠ¡åŠå…¶ä¾èµ–å¯¹è±¡çš„åˆ›å»ºä¸ç®¡ç†å·¥ä½œã€‚å…·ä½“çš„æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023650521\" alt=\"\" title=\"\" /></p>\n<p>åˆ°è¿™é‡Œæˆ‘ä»¬å·²ç»ä»‹ç»äº† IoC ä¸ DI çš„æ¦‚å¿µåŠç‰¹ç‚¹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥ä»‹ç» DI çš„åº”ç”¨ã€‚</p>\n<h3>äº”ã€DI çš„åº”ç”¨</h3>\n<p>DI åœ¨å‰ç«¯å’ŒæœåŠ¡ç«¯éƒ½æœ‰ç›¸åº”çš„åº”ç”¨ï¼Œæ¯”å¦‚åœ¨å‰ç«¯é¢†åŸŸçš„ä»£è¡¨æ˜¯ <a href=\"https://angularjs.org/\" rel=\"nofollow noreferrer\">AngularJS</a> å’Œ <a href=\"https://angular.io/\" rel=\"nofollow noreferrer\">Angular</a>ï¼Œè€Œåœ¨æœåŠ¡ç«¯é¢†åŸŸæ˜¯ <a href=\"https://nodejs.org/zh-cn/\" rel=\"nofollow noreferrer\">Node.js</a> ç”Ÿæ€ä¸­æ¯”è¾ƒå‡ºåçš„ <a href=\"https://nestjs.com/\" rel=\"nofollow noreferrer\">NestJS</a>ã€‚æ¥ä¸‹æ¥é˜¿å®å“¥å°†ç®€å•ä»‹ç»ä¸€ä¸‹ DI åœ¨ AngularJS/Angular å’Œ NestJS ä¸­çš„åº”ç”¨ã€‚</p>\n<h4>5.1 DI åœ¨ AngularJS ä¸­çš„åº”ç”¨</h4>\n<p>åœ¨ AngularJS ä¸­ï¼Œä¾èµ–æ³¨å…¥æ˜¯å…¶æ ¸å¿ƒçš„ç‰¹æ€§ä¹‹ä¸€ã€‚åœ¨ AngularJS ä¸­å£°æ˜ä¾èµ–é¡¹æœ‰ 3 ç§æ–¹å¼ï¼š</p>\n<pre><code class=\"javascript\">// æ–¹å¼ä¸€ï¼šã€€ä½¿ç”¨ $inject annotation æ–¹å¼\nlet fn = function (a, b) {};\nfn.$inject = ['a', 'b'];\n\n// æ–¹å¼äºŒï¼šã€€ä½¿ç”¨ array-style annotations æ–¹å¼\nlet fn = ['a', 'b', function (a, b) {}];\n\n// æ–¹å¼ä¸‰ï¼šã€€ä½¿ç”¨éšå¼å£°æ˜æ–¹å¼ã€€\nlet fn = function (a, b) {}; // ä¸æ¨è</code></pre>\n<p>å¯¹äºä»¥ä¸Šçš„ä»£ç ï¼Œç›¸ä¿¡ä½¿ç”¨è¿‡ AngularJS çš„å°ä¼™ä»¬éƒ½ä¸ä¼šé™Œç”Ÿã€‚ä½œä¸º AngularJS æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§çš„ DI è¿˜æ˜¯è›®å¼ºå¤§çš„ï¼Œä½†éšç€ AngularJS çš„æ™®åŠå’Œåº”ç”¨çš„å¤æ‚åº¦ä¸æ–­æé«˜ï¼ŒAngularJS DI ç³»ç»Ÿçš„é—®é¢˜å°±æš´éœ²å‡ºæ¥äº†ã€‚</p>\n<p>è¿™é‡Œé˜¿å®å“¥ç®€å•ä»‹ç»ä¸€ä¸‹ AngularJS DI ç³»ç»Ÿå­˜åœ¨çš„å‡ ä¸ªé—®é¢˜ï¼š</p>\n<ul>\n <li>å†…éƒ¨ç¼“å­˜ï¼š AngularJS åº”ç”¨ç¨‹åºä¸­æ‰€æœ‰çš„ä¾èµ–é¡¹éƒ½æ˜¯å•ä¾‹ï¼Œæˆ‘ä»¬ä¸èƒ½æ§åˆ¶æ˜¯å¦ä½¿ç”¨æ–°çš„å®ä¾‹ï¼›</li>\n <li>å‘½åç©ºé—´å†²çªï¼š åœ¨ç³»ç»Ÿä¸­æˆ‘ä»¬ä½¿ç”¨å­—ç¬¦ä¸²æ¥æ ‡è¯†æœåŠ¡çš„åç§°ï¼Œå‡è®¾æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­å·²æœ‰ä¸€ä¸ª CarServiceï¼Œç„¶è€Œç¬¬ä¸‰æ–¹åº“ä¸­ä¹Ÿå¼•å…¥äº†åŒæ ·çš„æœåŠ¡ï¼Œè¿™æ ·çš„è¯å°±å®¹æ˜“å‡ºç°æ··æ·†ã€‚</li>\n</ul>\n<p>ç”±äº AngularJS DI å­˜åœ¨ä»¥ä¸Šçš„é—®é¢˜ï¼Œæ‰€ä»¥åœ¨åç»­çš„ Angular é‡æ–°è®¾è®¡äº†æ–°çš„ DI ç³»ç»Ÿã€‚</p>\n<h4>5.2 DI åœ¨ Angular ä¸­çš„åº”ç”¨</h4>\n<p>ä»¥å‰é¢æ±½è½¦çš„ä¾‹å­ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ±½è½¦ã€å‘åŠ¨æœºã€åº•ç›˜å’Œè½¦èº«è¿™äº›è®¤ä¸ºæ˜¯ä¸€ç§ â€œæœåŠ¡â€ï¼Œæ‰€ä»¥å®ƒä»¬ä¼šä»¥æœåŠ¡æä¾›è€…çš„å½¢å¼æ³¨å†Œåˆ° DI ç³»ç»Ÿä¸­ã€‚ä¸ºäº†èƒ½åŒºåˆ†ä¸åŒæœåŠ¡ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸åŒçš„ä»¤ç‰Œï¼ˆTokenï¼‰æ¥æ ‡è¯†å®ƒä»¬ã€‚æ¥ç€æˆ‘ä»¬ä¼šåŸºäºå·²æ³¨å†Œçš„æœåŠ¡æä¾›è€…åˆ›å»ºæ³¨å…¥å™¨å¯¹è±¡ã€‚</p>\n<p>ä¹‹åï¼Œå½“æˆ‘ä»¬éœ€è¦è·å–æŒ‡å®šæœåŠ¡æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¯¥æœåŠ¡å¯¹åº”çš„ä»¤ç‰Œï¼Œä»æ³¨å…¥å™¨å¯¹è±¡ä¸­è·å–ä»¤ç‰Œå¯¹åº”çš„ä¾èµ–å¯¹è±¡ã€‚ä¸Šè¿°çš„æµç¨‹çš„å…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023650523\" alt=\"\" title=\"\" /></p>\n<p>å¥½çš„ï¼Œäº†è§£å®Œä¸Šè¿°çš„æµç¨‹ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ Angular å†…ç½®çš„ DI ç³»ç»Ÿæ¥ â€œé€ è½¦â€ã€‚</p>\n<h5>5.2.1 car.ts</h5>\n<pre><code class=\"typescript\">// car.ts\nimport { Injectable, ReflectiveInjector } from '@angular/core';\n\n// é…ç½®Provider\n@Injectable({\n  providedIn: 'root',\n})\nexport class Body {}\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class Chassis {}\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class Engine {\n  start() {\n    console.log('å¼•æ“å‘åŠ¨äº†');\n  }\n}\n\n@Injectable()\nexport default class Car {\n  // ä½¿ç”¨æ„é€ æ³¨å…¥æ–¹å¼æ³¨å…¥ä¾èµ–å¯¹è±¡\n  constructor(\n    private engine: Engine,\n    private body: Body,\n    private chassis: Chassis\n  ) {}\n\n  run() {\n    this.engine.start();\n  }\n}\n\nconst injector = ReflectiveInjector.resolveAndCreate([\n  Car,\n  Engine,\n  Chassis,\n  Body,\n]);\n\nconst car = injector.get(Car);\ncar.run();</code></pre>\n<p>åœ¨ä»¥ä¸Šä»£ç ä¸­æˆ‘ä»¬è°ƒç”¨ ReflectiveInjector å¯¹è±¡çš„ <code>resolveAndCreate</code> æ–¹æ³•æ‰‹åŠ¨åˆ›å»ºæ³¨å…¥å™¨ï¼Œç„¶åæ ¹æ®è½¦è¾†å¯¹åº”çš„ <code>Token</code> æ¥è·å–å¯¹åº”çš„ä¾èµ–å¯¹è±¡ã€‚é€šè¿‡è§‚å¯Ÿä¸Šè¿°ä»£ç ï¼Œä½ å¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬å·²ç»ä¸éœ€è¦æ‰‹åŠ¨åœ°ç®¡ç†å’Œç»´æŠ¤ä¾èµ–å¯¹è±¡äº†ï¼Œè¿™äº› â€œè„æ´»â€ã€â€œç´¯æ´»â€ å·²ç»äº¤ç»™æ³¨å…¥å™¨æ¥å¤„ç†äº†ã€‚</p>\n<p>æ­¤å¤–ï¼Œå¦‚æœè¦èƒ½æ­£å¸¸è·å–æ±½è½¦å¯¹è±¡ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨ <code>app.module.ts</code> æ–‡ä»¶ä¸­å£°æ˜ Car å¯¹åº” Providerï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<h5>5.2.2 app.module.ts</h5>\n<pre><code class=\"typescript\">import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AppComponent } from './app.component';\nimport Car, { Body, Chassis, Engine } from './car';\n\n@NgModule({\n  declarations: [AppComponent],\n  imports: [BrowserModule],\n  providers: [{ provide: Car, deps: [Engine, Body, Chassis] }],\n  bootstrap: [AppComponent],\n})\nexport class AppModule {}</code></pre>\n<h4>5.3 DI åœ¨ NestJS ä¸­çš„åº”ç”¨</h4>\n<p><a href=\"https://nestjs.com/\" rel=\"nofollow noreferrer\">NestJS</a> æ˜¯æ„å»ºé«˜æ•ˆï¼Œå¯æ‰©å±•çš„ <a href=\"http://nodejs.cn/\" rel=\"nofollow noreferrer\">Node.js</a> Web åº”ç”¨ç¨‹åºçš„æ¡†æ¶ã€‚ å®ƒä½¿ç”¨ç°ä»£çš„ JavaScript æˆ– <a href=\"https://www.tslang.cn/\" rel=\"nofollow noreferrer\">TypeScript</a>ï¼ˆä¿ç•™ä¸çº¯ JavaScript çš„å…¼å®¹æ€§ï¼‰ï¼Œå¹¶ç»“åˆ OOPï¼ˆé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼‰ï¼ŒFPï¼ˆå‡½æ•°å¼ç¼–ç¨‹ï¼‰å’ŒFRPï¼ˆå‡½æ•°å“åº”å¼ç¼–ç¨‹ï¼‰çš„å…ƒç´ ã€‚</p>\n<p>åœ¨åº•å±‚ï¼ŒNest ä½¿ç”¨äº† <a href=\"http://www.expressjs.com.cn/\" rel=\"nofollow noreferrer\">Express</a>ï¼Œä½†ä¹Ÿæä¾›äº†ä¸å…¶ä»–å„ç§åº“çš„å…¼å®¹ï¼Œä¾‹å¦‚ <a href=\"https://github.com/fastify/fastify\" rel=\"nofollow noreferrer\">Fastify</a>ï¼Œå¯ä»¥æ–¹ä¾¿åœ°ä½¿ç”¨å„ç§å¯ç”¨çš„ç¬¬ä¸‰æ–¹æ’ä»¶ã€‚</p>\n<p>è¿‘å‡ å¹´ï¼Œç”±äº Node.jsï¼ŒJavaScript å·²ç»æˆä¸º Web å‰ç«¯å’Œåç«¯åº”ç”¨ç¨‹åºçš„ã€Œé€šç”¨è¯­è¨€ã€ï¼Œä»è€Œäº§ç”Ÿäº†åƒ <a href=\"https://angular.cn/\" rel=\"nofollow noreferrer\">Angular</a>ã€<a href=\"https://github.com/facebook/react\" rel=\"nofollow noreferrer\">React</a>ã€<a href=\"https://github.com/vuejs/vue\" rel=\"nofollow noreferrer\">Vue</a> ç­‰ä»¤äººè€³ç›®ä¸€æ–°çš„é¡¹ç›®ï¼Œè¿™äº›é¡¹ç›®æé«˜äº†å¼€å‘äººå‘˜çš„ç”Ÿäº§åŠ›ï¼Œä½¿å¾—å¯ä»¥å¿«é€Ÿæ„å»ºå¯æµ‹è¯•çš„ä¸”å¯æ‰©å±•çš„å‰ç«¯åº”ç”¨ç¨‹åºã€‚ ç„¶è€Œï¼Œåœ¨æœåŠ¡å™¨ç«¯ï¼Œè™½ç„¶æœ‰å¾ˆå¤šä¼˜ç§€çš„åº“ã€helper å’Œ Node å·¥å…·ï¼Œä½†æ˜¯å®ƒä»¬éƒ½æ²¡æœ‰æœ‰æ•ˆåœ°è§£å†³ä¸»è¦é—®é¢˜ â€”â€” æ¶æ„ã€‚</p>\n<p><strong>NestJS æ—¨åœ¨æä¾›ä¸€ä¸ªå¼€ç®±å³ç”¨çš„åº”ç”¨ç¨‹åºä½“ç³»ç»“æ„ï¼Œå…è®¸è½»æ¾åˆ›å»ºé«˜åº¦å¯æµ‹è¯•ï¼Œå¯æ‰©å±•ï¼Œæ¾æ•£è€¦åˆä¸”æ˜“äºç»´æŠ¤çš„åº”ç”¨ç¨‹åºã€‚</strong> åœ¨ NestJS ä¸­ä¹Ÿä¸ºæˆ‘ä»¬å¼€å‘è€…æä¾›äº†ä¾èµ–æ³¨å…¥çš„åŠŸèƒ½ï¼Œè¿™é‡Œæˆ‘ä»¬ä»¥<a href=\"https://nestjs.com/\" rel=\"nofollow noreferrer\">å®˜ç½‘</a>çš„ç¤ºä¾‹æ¥æ¼”ç¤ºä¸€ä¸‹ä¾èµ–æ³¨å…¥çš„åŠŸèƒ½ã€‚</p>\n<h5>5.3.1 app.service.ts</h5>\n<pre><code class=\"typescript\">import { Injectable } from '@nestjs/common';\n\n@Injectable()\nexport class AppService {\n  getHello(): string {\n    return 'Hello World!';\n  }\n}</code></pre>\n<h5>5.3.2 app.controller.ts</h5>\n<pre><code class=\"typescript\">import { Get, Controller, Render } from '@nestjs/common';\nimport { AppService } from './app.service';\n\n@Controller()\nexport class AppController {\n  constructor(private readonly appService: AppService) {}\n\n  @Get()\n  @Render('index')\n  render() {\n    const message = this.appService.getHello();\n    return { message };\n  }\n}</code></pre>\n<p>åœ¨ AppController ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡æ„é€ æ³¨å…¥çš„æ–¹å¼æ³¨å…¥äº† AppService å¯¹è±¡ï¼Œå½“ç”¨æˆ·è®¿é—®é¦–é¡µçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šè°ƒç”¨ AppService å¯¹è±¡çš„ <code>getHello</code> æ–¹æ³•æ¥è·å– <code>'Hello World!'</code> æ¶ˆæ¯ï¼Œå¹¶æŠŠæ¶ˆæ¯è¿”å›ç»™ç”¨æˆ·ã€‚å½“ç„¶ä¸ºäº†ä¿è¯ä¾èµ–æ³¨å…¥å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨ AppModule ä¸­å£°æ˜ providers å’Œ controllersï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹ï¼š</p>\n<pre><code class=\"typescript\">import { Module } from '@nestjs/common';\nimport { AppController } from './app.controller';\nimport { AppService } from './app.service';\n\n@Module({\n  imports: [],\n  controllers: [AppController],\n  providers: [AppService],\n})\nexport class AppModule {}</code></pre>\n<p>å…¶å® DI å¹¶ä¸æ˜¯ AngularJS/Angular å’Œ NestJS æ‰€ç‰¹æœ‰çš„ï¼Œå¦‚æœä½ æƒ³åœ¨å…¶ä»–é¡¹ç›®ä¸­ä½¿ç”¨ DI/IoC çš„åŠŸèƒ½ç‰¹æ€§ï¼Œé˜¿å®å“¥æ¨èä½ ä½¿ç”¨ <a href=\"http://inversify.io/\" rel=\"nofollow noreferrer\">InversifyJS</a>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯ç”¨äº JavaScript å’Œ Node.js åº”ç”¨ï¼ŒåŠŸèƒ½å¼ºå¤§ã€è½»é‡çš„ IoC å®¹å™¨ã€‚</p>\n<p>å¯¹ <a href=\"http://inversify.io/\" rel=\"nofollow noreferrer\">InversifyJS</a> æ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è‡ªè¡Œäº†è§£ä¸€ä¸‹ï¼Œé˜¿å®å“¥å°±ä¸ç»§ç»­å±•å¼€ä»‹ç»äº†ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è¿›å…¥æœ¬æ–‡çš„é‡ç‚¹ï¼Œå³ä»‹ç»å¦‚ä½•ä½¿ç”¨ TypeScript å®ç°ä¸€ä¸ªç®€å•çš„ IoC å®¹å™¨ï¼Œè¯¥å®¹å™¨å®ç°çš„åŠŸèƒ½å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023650526\" alt=\"\" title=\"\" /></p>\n<h3>å…­ã€æ‰‹å†™ IoC å®¹å™¨</h3>\n<p>ä¸ºäº†è®©å¤§å®¶èƒ½æ›´å¥½åœ°ç†è§£ IoC å®¹å™¨çš„å®ç°ä»£ç ï¼Œé˜¿å®å“¥æ¥ä»‹ç»ä¸€äº›ç›¸å…³çš„å‰ç½®çŸ¥è¯†ã€‚</p>\n<h4>6.1 è£…é¥°å™¨</h4>\n<p>å¦‚æœä½ æœ‰ä½¿ç”¨è¿‡ Angular æˆ– NestJSï¼Œç›¸ä¿¡ä½ å¯¹ä»¥ä¸‹çš„ä»£ç ä¸ä¼šé™Œç”Ÿã€‚</p>\n<pre><code class=\"typescript\">@Injectable()\nexport class HttpService {\n  constructor(\n    private httpClient: HttpClient\n  ) {}\n}</code></pre>\n<p>åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† <code>Injectable</code> è£…é¥°å™¨ã€‚è¯¥è£…é¥°å™¨ç”¨äºè¡¨ç¤ºæ­¤ç±»å¯ä»¥è‡ªåŠ¨æ³¨å…¥å…¶ä¾èµ–é¡¹ã€‚å…¶ä¸­ <code>@Injectable()</code> ä¸­çš„ <code>@</code> ç¬¦å·å±äºè¯­æ³•ç³–ã€‚</p>\n<p>è£…é¥°å™¨æ˜¯ä¸€ä¸ªåŒ…è£…ç±»ï¼Œå‡½æ•°æˆ–æ–¹æ³•å¹¶ä¸ºå…¶æ·»åŠ è¡Œä¸ºçš„å‡½æ•°ã€‚è¿™å¯¹äºå®šä¹‰ä¸å¯¹è±¡å…³è”çš„å…ƒæ•°æ®å¾ˆæœ‰ç”¨ã€‚è£…é¥°å™¨æœ‰ä»¥ä¸‹å››ç§åˆ†ç±»ï¼š</p>\n<ul>\n <li>ç±»è£…é¥°å™¨ï¼ˆClass decoratorsï¼‰</li>\n <li>å±æ€§è£…é¥°å™¨ï¼ˆProperty decoratorsï¼‰</li>\n <li>æ–¹æ³•è£…é¥°å™¨ï¼ˆMethod decoratorsï¼‰</li>\n <li>å‚æ•°è£…é¥°å™¨ï¼ˆParameter decoratorsï¼‰</li>\n</ul>\n<p>å‰é¢ç¤ºä¾‹ä¸­ä½¿ç”¨çš„ <code>@Injectable()</code> è£…é¥°å™¨ï¼Œå±äºç±»è£…é¥°å™¨ã€‚åœ¨è¯¥ç±»è£…é¥°å™¨ä¿®é¥°çš„ <code>HttpService</code> ç±»ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡æ„é€ æ³¨å…¥çš„æ–¹å¼æ³¨å…¥äº†ç”¨äºå¤„ç† HTTP è¯·æ±‚çš„ <code>HttpClient</code> ä¾èµ–å¯¹è±¡ã€‚</p>\n<h4>6.2 åå°„</h4>\n<pre><code class=\"typescript\">@Injectable()\nexport class HttpService {\n  constructor(\n    private httpClient: HttpClient\n  ) {}\n}</code></pre>\n<p>ä»¥ä¸Šä»£ç è‹¥è®¾ç½®ç¼–è¯‘çš„ç›®æ ‡ä¸º ES5ï¼Œåˆ™ä¼šç”Ÿæˆä»¥ä¸‹ä»£ç ï¼š</p>\n<pre><code class=\"typescript\">// å¿½ç•¥__decorateå‡½æ•°ç­‰ä»£ç \nvar __metadata = (this &amp;&amp; this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" &amp;&amp; typeof Reflect.metadata === \"function\") \n      return Reflect.metadata(k, v);\n};\n\nvar HttpService = /** @class */ (function () {\n    function HttpService(httpClient) {\n      this.httpClient = httpClient;\n    }\n    var _a;\n    HttpService = __decorate([\n        Injectable(),\n        __metadata(\"design:paramtypes\", [typeof (_a = typeof HttpClient !== \"undefined\" &amp;&amp; HttpClient)\n           === \"function\" ? _a : Object])\n    ], HttpService);\n    return HttpService;\n}());</code></pre>\n<p>é€šè¿‡è§‚å¯Ÿä¸Šè¿°ä»£ç ï¼Œä½ ä¼šå‘ç° <code>HttpService</code> æ„é€ å‡½æ•°ä¸­ <code>httpClient</code> å‚æ•°çš„ç±»å‹è¢«æ“¦é™¤äº†ï¼Œè¿™æ˜¯å› ä¸º JavaScript æ˜¯å¼±ç±»å‹è¯­è¨€ã€‚é‚£ä¹ˆå¦‚ä½•åœ¨è¿è¡Œæ—¶ï¼Œä¿è¯æ³¨å…¥æ­£ç¡®ç±»å‹çš„ä¾èµ–å¯¹è±¡å‘¢ï¼Ÿè¿™é‡Œ TypeScript ä½¿ç”¨ <a href=\"https://www.npmjs.com/package/reflect-metadata\" rel=\"nofollow noreferrer\">reflect-metadata</a> è¿™ä¸ªç¬¬ä¸‰æ–¹åº“æ¥å­˜å‚¨é¢å¤–çš„ç±»å‹ä¿¡æ¯ã€‚</p>\n<p><a href=\"https://www.npmjs.com/package/reflect-metadata\" rel=\"nofollow noreferrer\">reflect-metadata</a> è¿™ä¸ªåº“æä¾›äº†å¾ˆå¤š API ç”¨äºæ“ä½œå…ƒä¿¡æ¯ï¼Œè¿™é‡Œæˆ‘ä»¬åªç®€å•ä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„ APIï¼š</p>\n<pre><code class=\"typescript\">// define metadata on an object or property\nReflect.defineMetadata(metadataKey, metadataValue, target);\nReflect.defineMetadata(metadataKey, metadataValue, target, propertyKey);\n\n// check for presence of a metadata key on the prototype chain of an object or property\nlet result = Reflect.hasMetadata(metadataKey, target);\nlet result = Reflect.hasMetadata(metadataKey, target, propertyKey);\n\n// get metadata value of a metadata key on the prototype chain of an object or property\nlet result = Reflect.getMetadata(metadataKey, target);\nlet result = Reflect.getMetadata(metadataKey, target, propertyKey);\n\n// delete metadata from an object or property\nlet result = Reflect.deleteMetadata(metadataKey, target);\nlet result = Reflect.deleteMetadata(metadataKey, target, propertyKey);\n\n// apply metadata via a decorator to a constructor\n@Reflect.metadata(metadataKey, metadataValue)\nclass C {\n  // apply metadata via a decorator to a method (property)\n  @Reflect.metadata(metadataKey, metadataValue)\n  method() {\n  }\n}</code></pre>\n<p>å¯¹äºä¸Šè¿°çš„ API åªéœ€ç®€å•äº†è§£ä¸€ä¸‹å³å¯ã€‚åœ¨åç»­çš„å†…å®¹ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»å…·ä½“å¦‚ä½•ä½¿ç”¨ã€‚è¿™é‡Œæˆ‘ä»¬éœ€è¦æ³¨æ„ä»¥ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š</p>\n<ul>\n <li>å¯¹äºç±»æˆ–å‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨è£…é¥°å™¨æ¥ä¿®é¥°å®ƒä»¬ï¼Œè¿™æ ·æ‰èƒ½ä¿å­˜å…ƒæ•°æ®ã€‚</li>\n <li>åªæœ‰ç±»ã€æšä¸¾æˆ–åŸå§‹æ•°æ®ç±»å‹èƒ½è¢«è®°å½•ã€‚æ¥å£å’Œè”åˆç±»å‹ä½œä¸º â€œå¯¹è±¡â€ å‡ºç°ã€‚è¿™æ˜¯å› ä¸ºè¿™äº›ç±»å‹åœ¨ç¼–è¯‘åå®Œå…¨æ¶ˆå¤±ï¼Œè€Œç±»å´ä¸€ç›´å­˜åœ¨ã€‚</li>\n</ul>\n<h4>6.3 å®šä¹‰ Token å’Œ Provider</h4>\n<p>äº†è§£å®Œè£…é¥°å™¨ä¸åå°„ç›¸å…³çš„åŸºç¡€çŸ¥è¯†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥å¼€å§‹å®ç° IoC å®¹å™¨ã€‚æˆ‘ä»¬çš„ IoC å®¹å™¨å°†ä½¿ç”¨ä¸¤ä¸ªä¸»è¦çš„æ¦‚å¿µï¼šä»¤ç‰Œï¼ˆTokenï¼‰å’Œæä¾›è€…ï¼ˆProviderï¼‰ã€‚ä»¤ç‰Œæ˜¯ IoC å®¹å™¨æ‰€è¦åˆ›å»ºå¯¹è±¡çš„æ ‡è¯†ç¬¦ï¼Œè€Œæä¾›è€…ç”¨äºæè¿°å¦‚ä½•åˆ›å»ºè¿™äº›å¯¹è±¡ã€‚</p>\n<p>IoC å®¹å™¨æœ€å°çš„å…¬å…±æ¥å£å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<pre><code class=\"typescript\">export class Container {\n  addProvider&lt;T&gt;(provider: Provider&lt;T&gt;) {} // TODO\n  inject&lt;T&gt;(type: Token&lt;T&gt;): T {} // TODO\n}</code></pre>\n<p>æ¥ä¸‹æ¥æˆ‘ä»¬å…ˆæ¥å®šä¹‰ Tokenï¼š</p>\n<pre><code class=\"typescript\">// type.ts\ninterface Type&lt;T&gt; extends Function {\n  new (...args: any[]): T;\n}\n\n// provider.ts\nclass InjectionToken {\n  constructor(public injectionIdentifier: string) {}\n}\n\ntype Token&lt;T&gt; = Type&lt;T&gt; | InjectionToken;</code></pre>\n<p>Token ç±»å‹æ˜¯ä¸€ä¸ªè”åˆç±»å‹ï¼Œæ—¢å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ç±»å‹ä¹Ÿå¯ä»¥æ˜¯ InjectionToken ç±»å‹ã€‚AngularJS ä¸­ä½¿ç”¨å­—ç¬¦ä¸²ä½œä¸º Tokenï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šå¯¼è‡´å†²çªã€‚å› æ­¤ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å®šä¹‰äº† InjectionToken ç±»ï¼Œæ¥é¿å…å‡ºç°å‘½åå†²çªé—®é¢˜ã€‚</p>\n<p>å®šä¹‰å®Œ Token ç±»å‹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥å®šä¹‰ä¸‰ç§ä¸åŒç±»å‹çš„ Providerï¼š</p>\n<ul>\n <li>ClassProviderï¼šæä¾›ä¸€ä¸ªç±»ï¼Œç”¨äºåˆ›å»ºä¾èµ–å¯¹è±¡ï¼›</li>\n <li>ValueProviderï¼šæä¾›ä¸€ä¸ªå·²å­˜åœ¨çš„å€¼ï¼Œä½œä¸ºä¾èµ–å¯¹è±¡ï¼›</li>\n <li>FactoryProviderï¼šæä¾›ä¸€ä¸ªå·¥å‚æ–¹æ³•ï¼Œç”¨äºåˆ›å»ºä¾èµ–å¯¹è±¡ã€‚</li>\n</ul>\n<pre><code class=\"typescript\">// provider.ts\nexport type Factory&lt;T&gt; = () =&gt; T;\n\nexport interface BaseProvider&lt;T&gt; {\n  provide: Token&lt;T&gt;;\n}\n\nexport interface ClassProvider&lt;T&gt; extends BaseProvider&lt;T&gt; {\n  provide: Token&lt;T&gt;;\n  useClass: Type&lt;T&gt;;\n}\n\nexport interface ValueProvider&lt;T&gt; extends BaseProvider&lt;T&gt; {\n  provide: Token&lt;T&gt;;\n  useValue: T;\n}\n\nexport interface FactoryProvider&lt;T&gt; extends BaseProvider&lt;T&gt; {\n  provide: Token&lt;T&gt;;\n  useFactory: Factory&lt;T&gt;;\n}\n\nexport type Provider&lt;T&gt; =\n  | ClassProvider&lt;T&gt;\n  | ValueProvider&lt;T&gt;\n  | FactoryProvider&lt;T&gt;;</code></pre>\n<p>ä¸ºäº†æ›´æ–¹ä¾¿çš„åŒºåˆ†è¿™ä¸‰ç§ä¸åŒç±»å‹çš„ Providerï¼Œæˆ‘ä»¬è‡ªå®šä¹‰äº†ä¸‰ä¸ªç±»å‹å®ˆå«å‡½æ•°ï¼š</p>\n<pre><code class=\"typescript\">// provider.ts\nexport function isClassProvider&lt;T&gt;(\n  provider: BaseProvider&lt;T&gt;\n): provider is ClassProvider&lt;T&gt; {\n  return (provider as any).useClass !== undefined;\n}\n\nexport function isValueProvider&lt;T&gt;(\n  provider: BaseProvider&lt;T&gt;\n): provider is ValueProvider&lt;T&gt; {\n  return (provider as any).useValue !== undefined;\n}\n\nexport function isFactoryProvider&lt;T&gt;(\n  provider: BaseProvider&lt;T&gt;\n): provider is FactoryProvider&lt;T&gt; {\n  return (provider as any).useFactory !== undefined;\n}</code></pre>\n<h4>6.4 å®šä¹‰è£…é¥°å™¨</h4>\n<p>åœ¨å‰é¢æˆ‘ä»¬å·²ç»æè¿‡äº†ï¼Œå¯¹äºç±»æˆ–å‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨è£…é¥°å™¨æ¥ä¿®é¥°å®ƒä»¬ï¼Œè¿™æ ·æ‰èƒ½ä¿å­˜å…ƒæ•°æ®ã€‚å› æ­¤ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥åˆ†åˆ«åˆ›å»º <strong>Injectable</strong> å’Œ <strong>Inject</strong> è£…é¥°å™¨ã€‚</p>\n<h5>6.4.1 Injectable è£…é¥°å™¨</h5>\n<p>Injectable è£…é¥°å™¨ç”¨äºè¡¨ç¤ºæ­¤ç±»å¯ä»¥è‡ªåŠ¨æ³¨å…¥å…¶ä¾èµ–é¡¹ï¼Œè¯¥è£…é¥°å™¨å±äºç±»è£…é¥°å™¨ã€‚åœ¨ TypeScript ä¸­ï¼Œç±»è£…é¥°å™¨çš„å£°æ˜å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"typescript\">declare type ClassDecorator = &lt;TFunction extends Function&gt;(target: TFunction) \n  =&gt; TFunction | void;</code></pre>\n<p>ç±»è£…é¥°å™¨é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ç”¨æ¥è£…é¥°ç±»çš„ã€‚å®ƒæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼š<code>target: TFunction</code>ï¼Œè¡¨ç¤ºè¢«è£…é¥°çš„ç±»ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ Injectable è£…é¥°å™¨çš„å…·ä½“å®ç°ï¼š</p>\n<pre><code class=\"typescript\">// Injectable.ts\nimport { Type } from \"./type\";\nimport \"reflect-metadata\";\n\nconst INJECTABLE_METADATA_KEY = Symbol(\"INJECTABLE_KEY\");\n\nexport function Injectable() {\n  return function(target: any) {\n    Reflect.defineMetadata(INJECTABLE_METADATA_KEY, true, target);\n    return target;\n  };\n}</code></pre>\n<p>åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œå½“è°ƒç”¨å®Œ Injectable å‡½æ•°ä¹‹åï¼Œä¼šè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚åœ¨æ–°çš„å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <a href=\"https://www.npmjs.com/package/reflect-metadata\" rel=\"nofollow noreferrer\">reflect-metadata</a> è¿™ä¸ªåº“æä¾›çš„ defineMetadata API æ¥ä¿å­˜å…ƒä¿¡æ¯ï¼Œå…¶ä¸­ defineMetadata API çš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<pre><code class=\"typescript\">// define metadata on an object or property\nReflect.defineMetadata(metadataKey, metadataValue, target);\nReflect.defineMetadata(metadataKey, metadataValue, target, propertyKey);</code></pre>\n<p>Injectable ç±»è£…é¥°å™¨ä½¿ç”¨æ–¹å¼ä¹Ÿç®€å•ï¼Œåªéœ€è¦åœ¨è¢«è£…é¥°ç±»çš„ä¸Šæ–¹ä½¿ç”¨ <code>@Injectable()</code> è¯­æ³•ç³–å°±å¯ä»¥åº”ç”¨è¯¥è£…é¥°å™¨ï¼š</p>\n<pre><code class=\"typescript\">@Injectable()\nexport class HttpService {\n  constructor(\n    private httpClient: HttpClient\n  ) {}\n}</code></pre>\n<p>åœ¨ä»¥ä¸Šç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æ³¨å…¥çš„æ˜¯ Type ç±»å‹çš„ HttpClient å¯¹è±¡ã€‚ä½†åœ¨å®é™…çš„é¡¹ç›®ä¸­ï¼Œå¾€å¾€ä¼šæ¯”è¾ƒå¤æ‚ã€‚é™¤äº†éœ€è¦æ³¨å…¥ Type ç±»å‹çš„ä¾èµ–å¯¹è±¡ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯èƒ½ä¼šæ³¨å…¥å…¶ä»–ç±»å‹çš„ä¾èµ–å¯¹è±¡ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸Œæœ›åœ¨ HttpService æœåŠ¡ä¸­æ³¨å…¥è¿œç¨‹æœåŠ¡å™¨çš„ API åœ°å€ã€‚é’ˆå¯¹è¿™ç§æƒ…å½¢ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ Inject è£…é¥°å™¨ã€‚</p>\n<h5>6.4.2 Inject è£…é¥°å™¨</h5>\n<p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥åˆ›å»º Inject è£…é¥°å™¨ï¼Œè¯¥è£…é¥°å™¨å±äºå‚æ•°è£…é¥°å™¨ã€‚åœ¨ TypeScript ä¸­ï¼Œå‚æ•°è£…é¥°å™¨çš„å£°æ˜å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"typescript\">declare type ParameterDecorator = (target: Object, \n  propertyKey: string | symbol, parameterIndex: number ) =&gt; void</code></pre>\n<p>å‚æ•°è£…é¥°å™¨é¡¾åæ€ä¹‰ï¼Œæ˜¯ç”¨æ¥è£…é¥°å‡½æ•°å‚æ•°ï¼Œå®ƒæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š</p>\n<ul>\n <li>target: Object â€”â€” è¢«è£…é¥°çš„ç±»ï¼›</li>\n <li>propertyKey: string | symbol â€”â€” æ–¹æ³•åï¼›</li>\n <li>parameterIndex: number â€”â€” æ–¹æ³•ä¸­å‚æ•°çš„ç´¢å¼•å€¼ã€‚</li>\n</ul>\n<p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ Inject è£…é¥°å™¨çš„å…·ä½“å®ç°ï¼š</p>\n<pre><code class=\"typescript\">// Inject.ts\nimport { Token } from './provider';\nimport 'reflect-metadata';\n\nconst INJECT_METADATA_KEY = Symbol('INJECT_KEY');\n\nexport function Inject(token: Token&lt;any&gt;) {\n  return function(target: any, _: string | symbol, index: number) {\n    Reflect.defineMetadata(INJECT_METADATA_KEY, token, target, `index-${index}`);\n    return target;\n  };\n}</code></pre>\n<p>åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œå½“è°ƒç”¨å®Œ Inject å‡½æ•°ä¹‹åï¼Œä¼šè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚åœ¨æ–°çš„å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <a href=\"https://www.npmjs.com/package/reflect-metadata\" rel=\"nofollow noreferrer\">reflect-metadata</a> è¿™ä¸ªåº“æä¾›çš„ defineMetadata API æ¥ä¿å­˜å‚æ•°ç›¸å…³çš„å…ƒä¿¡æ¯ã€‚è¿™é‡Œæ˜¯ä¿å­˜ index ç´¢å¼•ä¿¡æ¯å’Œ Token ä¿¡æ¯ã€‚</p>\n<p>å®šä¹‰å®Œ Inject è£…é¥°å™¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨å®ƒæ¥æ³¨å…¥æˆ‘ä»¬å‰é¢æ‰€æåˆ°çš„è¿œç¨‹æœåŠ¡å™¨çš„ API åœ°å€ï¼Œå…·ä½“çš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"typescript\">const API_URL = new InjectionToken('apiUrl');\n\n@Injectable()\nexport class HttpService {\n  constructor(\n    private httpClient: HttpClient,\n    @Inject(API_URL) private apiUrl: string\n  ) {}\n}</code></pre>\n<h4>6.5 å®ç° IoC å®¹å™¨</h4>\n<p>ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å®šä¹‰äº† Tokenã€Providerã€Injectable å’Œ Inject è£…é¥°å™¨ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å®ç°å‰é¢æ‰€æåˆ°çš„ IoC å®¹å™¨çš„ APIï¼š</p>\n<pre><code class=\"typescript\">export class Container {\n  addProvider&lt;T&gt;(provider: Provider&lt;T&gt;) {} // TODO\n  inject&lt;T&gt;(type: Token&lt;T&gt;): T {} // TODO\n}</code></pre>\n<h5>6.5.1 å®ç° addProvider æ–¹æ³•</h5>\n<p>addProvider() æ–¹æ³•çš„å®ç°å¾ˆç®€å•ï¼Œæˆ‘ä»¬ä½¿ç”¨ Map æ¥å­˜å‚¨ Token ä¸ Provider ä¹‹é—´çš„å…³ç³»ï¼š</p>\n<pre><code class=\"typescript\">export class Container {\n  private providers = new Map&lt;Token&lt;any&gt;, Provider&lt;any&gt;&gt;();\n\n  addProvider&lt;T&gt;(provider: Provider&lt;T&gt;) {\n    this.assertInjectableIfClassProvider(provider);\n    this.providers.set(provider.provide, provider);\n  }\n}</code></pre>\n<p>åœ¨ addProvider() æ–¹æ³•å†…éƒ¨é™¤äº†æŠŠ Token ä¸ Provider çš„å¯¹åº”ä¿¡æ¯ä¿å­˜åˆ° providers å¯¹è±¡ä¸­ä¹‹å¤–ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª assertInjectableIfClassProvider æ–¹æ³•ï¼Œç”¨äºç¡®ä¿æ·»åŠ çš„ ClassProvider æ˜¯å¯æ³¨å…¥çš„ã€‚è¯¥æ–¹æ³•çš„å…·ä½“å®ç°å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"typescript\">private assertInjectableIfClassProvider&lt;T&gt;(provider: Provider&lt;T&gt;) {\n  if (isClassProvider(provider) &amp;&amp; !isInjectable(provider.useClass)) {\n    throw new Error(\n        `Cannot provide ${this.getTokenName(\n          provider.provide\n     )} using class ${this.getTokenName(\n          provider.useClass\n     )}, ${this.getTokenName(provider.useClass)} isn't injectable`\n   );\n  }\n}</code></pre>\n<p>åœ¨ assertInjectableIfClassProvider æ–¹æ³•ä½“ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å‰é¢å·²ç»ä»‹ç»çš„ <code>isClassProvider</code> ç±»å‹å®ˆå«å‡½æ•°æ¥åˆ¤æ–­æ˜¯å¦ä¸º ClassProviderï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œä¼šåˆ¤æ–­è¯¥ ClassProvider æ˜¯å¦ä¸ºå¯æ³¨å…¥çš„ï¼Œå…·ä½“ä½¿ç”¨çš„æ˜¯ isInjectable å‡½æ•°ï¼Œè¯¥å‡½æ•°çš„å®šä¹‰å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"typescript\">export function isInjectable&lt;T&gt;(target: Type&lt;T&gt;) {\n  return Reflect.getMetadata(INJECTABLE_METADATA_KEY, target) === true;\n}</code></pre>\n<p>åœ¨ isInjectable å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <a href=\"https://www.npmjs.com/package/reflect-metadata\" rel=\"nofollow noreferrer\">reflect-metadata</a> è¿™ä¸ªåº“æä¾›çš„ getMetadata API æ¥è·å–ä¿å­˜åœ¨ç±»ä¸­çš„å…ƒä¿¡æ¯ã€‚ä¸ºäº†æ›´å¥½åœ°ç†è§£ä»¥ä¸Šä»£ç ï¼Œæˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹å‰é¢ Injectable è£…é¥°å™¨ï¼š</p>\n<pre><code class=\"typescript\">const INJECTABLE_METADATA_KEY = Symbol(\"INJECTABLE_KEY\");\n\nexport function Injectable() {\n  return function(target: any) {\n    Reflect.defineMetadata(INJECTABLE_METADATA_KEY, true, target);\n    return target;\n  };\n}</code></pre>\n<p>å¦‚æœæ·»åŠ çš„ Provider æ˜¯ ClassProviderï¼Œä½† Provider å¯¹åº”çš„ç±»æ˜¯ä¸å¯æ³¨å…¥çš„ï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ä¸ºäº†è®©å¼‚å¸¸æ¶ˆæ¯æ›´åŠ å‹å¥½ï¼Œä¹Ÿæ›´åŠ ç›´è§‚ã€‚æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª <code>getTokenName</code> æ–¹æ³•æ¥è·å– Token å¯¹åº”çš„åç§°ï¼š</p>\n<pre><code class=\"typescript\">private getTokenName&lt;T&gt;(token: Token&lt;T&gt;) {\n  return token instanceof InjectionToken\n    ? token.injectionIdentifier\n    : token.name;\n}</code></pre>\n<p>ç°åœ¨æˆ‘ä»¬å·²ç»å®ç°äº† Container ç±»çš„ <code>addProvider</code> æ–¹æ³•ï¼Œè¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å®ƒæ¥æ·»åŠ ä¸‰ç§ä¸åŒç±»å‹çš„ Providerï¼š</p>\n<pre><code class=\"typescript\">const container = new Container();\nconst input = { x: 200 };\n\nclass BasicClass {}\n// æ³¨å†ŒClassProvider\ncontainer.addProvider({ provide: BasicClass, useClass:  BasicClass});\n// æ³¨å†ŒValueProvider\ncontainer.addProvider({ provide: BasicClass, useValue: input });\n// æ³¨å†ŒFactoryProvider\ncontainer.addProvider({ provide: BasicClass, useFactory: () =&gt; input });</code></pre>\n<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä»¥ä¸Šç¤ºä¾‹ä¸­æ³¨å†Œä¸‰ç§ä¸åŒç±»å‹çš„ Provider ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ª Token ä»…æ˜¯ä¸ºäº†æ¼”ç¤ºè€Œå·²ã€‚ä¸‹é¢æˆ‘ä»¬æ¥å®ç° Container ç±»ä¸­æ ¸å¿ƒçš„ inject æ–¹æ³•ã€‚</p>\n<h5>6.5.2 å®ç° inject æ–¹æ³•</h5>\n<p>åœ¨çœ‹ inject æ–¹æ³•çš„å…·ä½“å®ç°ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹è¯¥æ–¹æ³•æ‰€å®ç°çš„åŠŸèƒ½ï¼š</p>\n<pre><code class=\"typescript\">const container = new Container();\nconst input = { x: 200 };\n\ncontainer.addProvider({ provide: BasicClass, useValue: input });\nconst output = container.inject(BasicClass);\nexpect(input).toBe(output); // true</code></pre>\n<p>è§‚å¯Ÿä»¥ä¸Šçš„æµ‹è¯•ç”¨ä¾‹å¯çŸ¥ï¼ŒContainer ç±»ä¸­ inject æ–¹æ³•æ‰€å®ç°çš„åŠŸèƒ½å°±æ˜¯æ ¹æ® Token è·å–ä¸ä¹‹å¯¹åº”çš„å¯¹è±¡ã€‚åœ¨å‰é¢å®ç°çš„ addProvider æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬æŠŠ Token å’Œè¯¥ Token å¯¹åº”çš„ Provider ä¿å­˜åœ¨ providers Map å¯¹è±¡ä¸­ã€‚æ‰€ä»¥åœ¨ inject æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆä» providers å¯¹è±¡ä¸­è·å–è¯¥ Token å¯¹åº”çš„ Provider å¯¹è±¡ï¼Œç„¶ååœ¨æ ¹æ®ä¸åŒç±»å‹çš„ Provider æ¥è·å–å…¶å¯¹åº”çš„å¯¹è±¡ã€‚</p>\n<p>å¥½çš„ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ inject æ–¹æ³•çš„å…·ä½“å®ç°ï¼š</p>\n<pre><code class=\"typescript\">inject&lt;T&gt;(type: Token&lt;T&gt;): T {\n  let provider = this.providers.get(type);\n  // å¤„ç†ä½¿ç”¨Injectableè£…é¥°å™¨ä¿®é¥°çš„ç±»\n  if (provider === undefined &amp;&amp; !(type instanceof InjectionToken)) {\n    provider = { provide: type, useClass: type };\n    this.assertInjectableIfClassProvider(provider);\n  }\n  return this.injectWithProvider(type, provider);\n}</code></pre>\n<p>åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œé™¤äº†å¤„ç†æ­£å¸¸çš„æµç¨‹ä¹‹å¤–ã€‚æˆ‘ä»¬è¿˜å¤„ç†ä¸€ä¸ªç‰¹æ®Šçš„åœºæ™¯ï¼Œå³æ²¡æœ‰ä½¿ç”¨ <code>addProvider</code> æ–¹æ³•æ³¨å†Œ Providerï¼Œè€Œæ˜¯ä½¿ç”¨ Injectable è£…é¥°å™¨æ¥è£…é¥°æŸä¸ªç±»ã€‚å¯¹äºè¿™ä¸ªç‰¹æ®Šåœºæ™¯ï¼Œæˆ‘ä»¬ä¼šæ ¹æ®ä¼ å…¥çš„ type å‚æ•°æ¥åˆ›å»ºä¸€ä¸ª provider å¯¹è±¡ï¼Œç„¶åè¿›ä¸€æ­¥è°ƒç”¨ <code>injectWithProvider</code> æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ï¼Œè¯¥æ–¹æ³•çš„å…·ä½“å®ç°å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"typescript\">private injectWithProvider&lt;T&gt;(type: Token&lt;T&gt;, provider?: Provider&lt;T&gt;): T {\n  if (provider === undefined) {\n    throw new Error(`No provider for type ${this.getTokenName(type)}`);\n  }\n  if (isClassProvider(provider)) {\n    return this.injectClass(provider as ClassProvider&lt;T&gt;);\n  } else if (isValueProvider(provider)) {\n    return this.injectValue(provider as ValueProvider&lt;T&gt;);\n  } else {\n    return this.injectFactory(provider as FactoryProvider&lt;T&gt;);\n  }\n }</code></pre>\n<p>åœ¨ <code>injectWithProvider</code> æ–¹æ³•å†…éƒ¨ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨å‰é¢å®šä¹‰çš„ç”¨äºåŒºåˆ†ä¸‰ç§ä¸åŒç±»å‹ Provider çš„ç±»å‹å®ˆå«å‡½æ•°æ¥å¤„ç†ä¸åŒçš„ Providerã€‚è¿™é‡Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹æœ€ç®€å• ValueProviderï¼Œå½“å‘ç°æ³¨å…¥çš„æ˜¯ ValueProvider ç±»å‹æ—¶ï¼Œåˆ™ä¼šè°ƒç”¨ <code>injectValue</code> æ–¹æ³•æ¥è·å–å…¶å¯¹åº”çš„å¯¹è±¡ï¼š</p>\n<pre><code class=\"typescript\">// { provide: API_URL, useValue: 'https://www.semlinker.com/' }\nprivate injectValue&lt;T&gt;(valueProvider: ValueProvider&lt;T&gt;): T {\n  return valueProvider.useValue;\n}</code></pre>\n<p>æ¥ç€æˆ‘ä»¬æ¥çœ‹å¦‚ä½•å¤„ç† FactoryProvider ç±»å‹çš„ Providerï¼Œå¦‚æœå‘ç°æ˜¯ FactoryProvider ç±»å‹æ—¶ï¼Œåˆ™ä¼šè°ƒç”¨ <code>injectFactory</code> æ–¹æ³•æ¥è·å–å…¶å¯¹åº”çš„å¯¹è±¡ï¼Œè¯¥æ–¹æ³•çš„å®ç°ä¹Ÿå¾ˆç®€å•ï¼š</p>\n<pre><code class=\"typescript\">// const input = { x: 200 };\n// container.addProvider({ provide: BasicClass, useFactory: () =&gt; input });\nprivate injectFactory&lt;T&gt;(valueProvider: FactoryProvider&lt;T&gt;): T {\n  return valueProvider.useFactory();\n}</code></pre>\n<p>æœ€åæˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹å¦‚ä½•å¤„ç† ClassProviderï¼Œå¯¹äº ClassProvider ç±»è¯´ï¼Œé€šè¿‡ Provider å¯¹è±¡çš„ useClass å±æ€§ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è·å–åˆ°ç±»å¯¹åº”çš„æ„é€ å‡½æ•°ã€‚æœ€ç®€å•çš„æƒ…å½¢æ˜¯è¯¥ç±»æ²¡æœ‰ä¾èµ–å…¶ä»–å¯¹è±¡ï¼Œä½†åœ¨å¤§å¤šæ•°åœºæ™¯ä¸‹ï¼Œå³å°†å®ä¾‹åŒ–çš„æœåŠ¡ç±»æ˜¯ä¼šä¾èµ–å…¶ä»–çš„å¯¹è±¡çš„ã€‚æ‰€ä»¥åœ¨å®ä¾‹åŒ–æœåŠ¡ç±»å‰ï¼Œæˆ‘ä»¬éœ€è¦æ„é€ å…¶ä¾èµ–çš„å¯¹è±¡ã€‚</p>\n<p>é‚£ä¹ˆç°åœ¨é—®é¢˜æ¥äº†ï¼Œæ€ä¹ˆè·å–ç±»æ‰€ä¾èµ–çš„å¯¹è±¡å‘¢ï¼Ÿæˆ‘ä»¬å…ˆæ¥åˆ†æä¸€ä¸‹ä»¥ä¸‹ä»£ç ï¼š</p>\n<pre><code class=\"typescript\">const API_URL = new InjectionToken('apiUrl');\n\n@Injectable()\nexport class HttpService {\n  constructor(\n    private httpClient: HttpClient,\n    @Inject(API_URL) private apiUrl: string\n  ) {}\n}</code></pre>\n<p>ä»¥ä¸Šä»£ç è‹¥è®¾ç½®ç¼–è¯‘çš„ç›®æ ‡ä¸º ES5ï¼Œåˆ™ä¼šç”Ÿæˆä»¥ä¸‹ä»£ç ï¼š</p>\n<pre><code class=\"javascript\">// å·²çœç•¥__decorateå‡½æ•°çš„å®šä¹‰\nvar __metadata = (this &amp;&amp; this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" &amp;&amp; typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\nvar __param = (this &amp;&amp; this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\n\nvar HttpService = /** @class */ (function () {\n    function HttpService(httpClient, apiUrl) {\n        this.httpClient = httpClient;\n        this.apiUrl = apiUrl;\n    }\n    var _a;\n    HttpService = __decorate([\n        Injectable(),\n        __param(1, Inject(API_URL)),\n        __metadata(\"design:paramtypes\", [typeof (_a = typeof HttpClient !== \"undefined\" &amp;&amp; HttpClient) \n          === \"function\" ? _a : Object, String])\n    ], HttpService);\n    return HttpService;\n}());</code></pre>\n<p>è§‚å¯Ÿä»¥ä¸Šçš„ä»£ç ä¼šä¸ä¼šè§‰å¾—æœ‰ç‚¹æ™•ï¼Ÿä¸è¦ç€æ€¥ï¼Œé˜¿å®å“¥ä¼šé€ä¸€åˆ†æ HttpService ä¸­çš„ä¸¤ä¸ªå‚æ•°ã€‚é¦–å…ˆæˆ‘ä»¬å…ˆæ¥åˆ†æ <code>apiUrl</code> å‚æ•°ï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023650525\" alt=\"\" title=\"\" /></p>\n<p>åœ¨å›¾ä¸­æˆ‘ä»¬å¯ä»¥å¾ˆæ¸…æ¥šåœ°çœ‹åˆ°ï¼Œ<code>API_URL</code> å¯¹åº”çš„ Token æœ€ç»ˆä¼šé€šè¿‡ Reflect.defineMetadata API è¿›è¡Œä¿å­˜ï¼Œæ‰€ä½¿ç”¨çš„ Key æ˜¯ <code>Symbol('INJECT_KEY')</code>ã€‚è€Œå¯¹äºå¦ä¸€ä¸ªå‚æ•°å³ httpClientï¼Œå®ƒä½¿ç”¨çš„ Key æ˜¯ <code>\"design:paramtypes\"</code>ï¼Œå®ƒç”¨äºä¿®é¥°ç›®æ ‡å¯¹è±¡æ–¹æ³•çš„å‚æ•°ç±»å‹ã€‚</p>\n<p>é™¤äº† <code>\"design:paramtypes\"</code> ä¹‹å¤–ï¼Œè¿˜æœ‰å…¶ä»–çš„ <code>metadataKey</code>ï¼Œæ¯”å¦‚ <code>design:type</code> å’Œ <code>design:returntype</code>ï¼Œå®ƒä»¬åˆ†åˆ«ç”¨äºä¿®é¥°ç›®æ ‡å¯¹è±¡çš„ç±»å‹å’Œä¿®é¥°ç›®æ ‡å¯¹è±¡æ–¹æ³•è¿”å›å€¼çš„ç±»å‹ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023650529\" alt=\"\" title=\"\" /></p>\n<p>ç”±ä¸Šå›¾å¯çŸ¥ï¼ŒHttpService æ„é€ å‡½æ•°çš„å‚æ•°ç±»å‹æœ€ç»ˆä¼šä½¿ç”¨ <code>Reflect.metadata</code> API è¿›è¡Œå­˜å‚¨ã€‚äº†è§£å®Œä¸Šè¿°çš„çŸ¥è¯†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ª <code>getInjectedParams</code> æ–¹æ³•ï¼Œç”¨äºè·å–ç±»æ„é€ å‡½æ•°ä¸­å£°æ˜çš„ä¾èµ–å¯¹è±¡ï¼Œè¯¥æ–¹æ³•çš„å…·ä½“å®ç°å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"typescript\">type InjectableParam = Type&lt;any&gt;;\nconst REFLECT_PARAMS = \"design:paramtypes\";\n\nprivate getInjectedParams&lt;T&gt;(target: Type&lt;T&gt;) {\n  // è·å–å‚æ•°çš„ç±»å‹\n  const argTypes = Reflect.getMetadata(REFLECT_PARAMS, target) as (\n      | InjectableParam\n      | undefined\n  )[];\n  if (argTypes === undefined) {\n      return [];\n  }\n  return argTypes.map((argType, index) =&gt; {\n    // The reflect-metadata API fails on circular dependencies, and will return undefined\n    // for the argument instead.\n    if (argType === undefined) {\n      throw new Error(\n        `Injection error. Recursive dependency detected in constructor for type ${target.name} \n           with parameter at index ${index}`\n      );\n    }\n    const overrideToken = getInjectionToken(target, index);\n    const actualToken = overrideToken === undefined ? argType : overrideToken;\n    let provider = this.providers.get(actualToken);\n    return this.injectWithProvider(actualToken, provider);\n  });\n}</code></pre>\n<p>å› ä¸ºæˆ‘ä»¬çš„ Token çš„ç±»å‹æ˜¯ <code>Type&lt;T&gt; | InjectionToken</code> è”åˆç±»å‹ï¼Œæ‰€ä»¥åœ¨ <code>getInjectedParams</code> æ–¹æ³•ä¸­æˆ‘ä»¬ä¹Ÿè¦è€ƒè™‘ InjectionToken çš„æƒ…å½¢ï¼Œå› æ­¤æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª <code>getInjectionToken</code> æ–¹æ³•æ¥è·å–ä½¿ç”¨ <code>@Inject</code> è£…é¥°å™¨æ³¨å†Œçš„ Tokenï¼Œè¯¥æ–¹æ³•çš„å®ç°å¾ˆç®€å•ï¼š</p>\n<pre><code class=\"typescript\">export function getInjectionToken(target: any, index: number) {\n  return Reflect.getMetadata(INJECT_METADATA_KEY, target, `index-${index}`) as Token&lt;any&gt; | undefined;\n}</code></pre>\n<p>ç°åœ¨æˆ‘ä»¬å·²ç»å¯ä»¥è·å–ç±»æ„é€ å‡½æ•°ä¸­æ‰€ä¾èµ–çš„å¯¹è±¡ï¼ŒåŸºäºå‰é¢å®šä¹‰çš„ <code>getInjectedParams</code> æ–¹æ³•ï¼Œæˆ‘ä»¬å°±æ¥å®šä¹‰ä¸€ä¸ª <code>injectClass</code> æ–¹æ³•ï¼Œç”¨æ¥å®ä¾‹åŒ– ClassProvider æ‰€æ³¨å†Œçš„ç±»ã€‚</p>\n<pre><code class=\"typescript\">// { provide: HttpClient, useClass: HttpClient }\nprivate injectClass&lt;T&gt;(classProvider: ClassProvider&lt;T&gt;): T {\n  const target = classProvider.useClass;\n  const params = this.getInjectedParams(target);\n  return Reflect.construct(target, params);\n}</code></pre>\n<p>è¿™æ—¶ IoC å®¹å™¨ä¸­å®šä¹‰çš„ä¸¤ä¸ªæ–¹æ³•éƒ½å·²ç»å®ç°äº†ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ IoC å®¹å™¨çš„å®Œæ•´ä»£ç ï¼š</p>\n<pre><code class=\"typescript\">// container.ts\ntype InjectableParam = Type&lt;any&gt;;\n\nconst REFLECT_PARAMS = \"design:paramtypes\";\n\nexport class Container {\n  private providers = new Map&lt;Token&lt;any&gt;, Provider&lt;any&gt;&gt;();\n\n  addProvider&lt;T&gt;(provider: Provider&lt;T&gt;) {\n    this.assertInjectableIfClassProvider(provider);\n    this.providers.set(provider.provide, provider);\n  }\n\n  inject&lt;T&gt;(type: Token&lt;T&gt;): T {\n    let provider = this.providers.get(type);\n    if (provider === undefined &amp;&amp; !(type instanceof InjectionToken)) {\n      provider = { provide: type, useClass: type };\n      this.assertInjectableIfClassProvider(provider);\n    }\n    return this.injectWithProvider(type, provider);\n  }\n\n  private injectWithProvider&lt;T&gt;(type: Token&lt;T&gt;, provider?: Provider&lt;T&gt;): T {\n    if (provider === undefined) {\n      throw new Error(`No provider for type ${this.getTokenName(type)}`);\n    }\n    if (isClassProvider(provider)) {\n      return this.injectClass(provider as ClassProvider&lt;T&gt;);\n    } else if (isValueProvider(provider)) {\n      return this.injectValue(provider as ValueProvider&lt;T&gt;);\n    } else {\n      // Factory provider by process of elimination\n      return this.injectFactory(provider as FactoryProvider&lt;T&gt;);\n    }\n  }\n\n  private assertInjectableIfClassProvider&lt;T&gt;(provider: Provider&lt;T&gt;) {\n    if (isClassProvider(provider) &amp;&amp; !isInjectable(provider.useClass)) {\n      throw new Error(\n        `Cannot provide ${this.getTokenName(\n          provider.provide\n        )} using class ${this.getTokenName(\n          provider.useClass\n        )}, ${this.getTokenName(provider.useClass)} isn't injectable`\n      );\n    }\n  }\n\n  private injectClass&lt;T&gt;(classProvider: ClassProvider&lt;T&gt;): T {\n    const target = classProvider.useClass;\n    const params = this.getInjectedParams(target);\n    return Reflect.construct(target, params);\n  }\n\n  private injectValue&lt;T&gt;(valueProvider: ValueProvider&lt;T&gt;): T {\n    return valueProvider.useValue;\n  }\n\n  private injectFactory&lt;T&gt;(valueProvider: FactoryProvider&lt;T&gt;): T {\n    return valueProvider.useFactory();\n  }\n\n  private getInjectedParams&lt;T&gt;(target: Type&lt;T&gt;) {\n    const argTypes = Reflect.getMetadata(REFLECT_PARAMS, target) as (\n      | InjectableParam\n      | undefined\n    )[];\n    if (argTypes === undefined) {\n      return [];\n    }\n    return argTypes.map((argType, index) =&gt; {\n      // The reflect-metadata API fails on circular dependencies, and will return undefined\n      // for the argument instead.\n      if (argType === undefined) {\n        throw new Error(\n          `Injection error. Recursive dependency detected in constructor for type ${target.name} \n             with parameter at index ${index}`\n        );\n      }\n      const overrideToken = getInjectionToken(target, index);\n      const actualToken = overrideToken === undefined ? argType : overrideToken;\n      let provider = this.providers.get(actualToken);\n      return this.injectWithProvider(actualToken, provider);\n    });\n  }\n\n  private getTokenName&lt;T&gt;(token: Token&lt;T&gt;) {\n    return token instanceof InjectionToken\n      ? token.injectionIdentifier\n      : token.name;\n  }\n}</code></pre>\n<p>æœ€åæˆ‘ä»¬æ¥ç®€å•æµ‹è¯•ä¸€ä¸‹æˆ‘ä»¬å‰é¢å¼€å‘çš„ IoC å®¹å™¨ï¼Œå…·ä½“çš„æµ‹è¯•ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<pre><code class=\"typescript\">// container.test.ts\nimport { Container } from \"./container\";\nimport { Injectable } from \"./injectable\";\nimport { Inject } from \"./inject\";\nimport { InjectionToken } from \"./provider\";\n\nconst API_URL = new InjectionToken(\"apiUrl\");\n\n@Injectable()\nclass HttpClient {}\n\n@Injectable()\nclass HttpService {\n  constructor(\n    private httpClient: HttpClient,\n    @Inject(API_URL) private apiUrl: string\n  ) {}\n}\n\nconst container = new Container();\n\ncontainer.addProvider({\n  provide: API_URL,\n  useValue: \"https://www.semlinker.com/\",\n});\n\ncontainer.addProvider({ provide: HttpClient, useClass: HttpClient });\ncontainer.addProvider({ provide: HttpService, useClass: HttpService });\n\nconst httpService = container.inject(HttpService);\nconsole.dir(httpService);</code></pre>\n<p>ä»¥ä¸Šä»£ç æˆåŠŸè¿è¡Œåï¼Œæ§åˆ¶å°ä¼šè¾“å‡ºä»¥ä¸‹ç»“æœï¼š</p>\n<pre><code class=\"shell\">HttpService {\n  httpClient: HttpClient {},\n  apiUrl: 'https://www.semlinker.com/' }</code></pre>\n<p>å¾ˆæ˜æ˜¾è¯¥ç»“æœæ­£æ˜¯æˆ‘ä»¬æ‰€æœŸæœ›çš„ï¼Œè¿™è¡¨ç¤ºæˆ‘ä»¬ IoC å®¹å™¨å·²ç»å¯ä»¥æ­£å¸¸å·¥ä½œäº†ã€‚å½“ç„¶åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä¸€ä¸ªæˆç†Ÿçš„ IoC å®¹å™¨è¿˜è¦è€ƒè™‘å¾ˆå¤šä¸œè¥¿ï¼Œå¦‚æœå°ä¼™ä¼´æƒ³åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„è¯ï¼Œé˜¿å®å“¥å»ºè®®å¯ä»¥è€ƒè™‘ä½¿ç”¨ <a href=\"http://inversify.io/\" rel=\"nofollow noreferrer\">InversifyJS</a> è¿™ä¸ªåº“ã€‚</p>\n<blockquote>\n è‹¥éœ€è¦è·å–å®Œæ•´ IoC å®¹å™¨æºç çš„è¯ï¼Œå¯åœ¨ \n <strong>å…¨æ ˆä¿®ä»™ä¹‹è·¯</strong> å…¬ä¼—å·å›å¤ ioc å…³é”®å­—ï¼Œå³å¯è·å–ã€‚\n</blockquote>\n<h3>ä¸ƒã€å‚è€ƒèµ„æº</h3>\n<ul>\n <li><a href=\"https://zh.wikipedia.org/wiki/%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC\" rel=\"nofollow noreferrer\">ç»´åŸºç™¾ç§‘ - æ§åˆ¶åè½¬</a></li>\n <li><a href=\"https://stackblitz.com/edit/typescript-jsd5tr?file=index.ts\" rel=\"nofollow noreferrer\">Stackblitz - Car-Demo</a></li>\n <li><a href=\"https://rbuckton.github.io/reflect-metadata/\" rel=\"nofollow noreferrer\">Github - reflect-metadata</a></li>\n <li><a href=\"https://rbuckton.github.io/reflect-metadata/\" rel=\"nofollow noreferrer\">Metadata Proposal - ECMAScript</a></li>\n <li><a href=\"https://dev.to/darcyrayner/typescript-dependency-injection-in-200-loc-12j7\" rel=\"nofollow noreferrer\">typescript-dependency-injection-in-200-loc</a></li>\n</ul>\n<h3>å…«ã€æ¨èé˜…è¯»</h3>\n<ul>\n <li><a href=\"http://www.semlinker.com/ts-quickstart-2020/\" rel=\"nofollow noreferrer\">äº†ä¸èµ·çš„ TypeScript å…¥é—¨æ•™ç¨‹</a></li>\n <li><a href=\"http://www.semlinker.com/deno-quickstart/\" rel=\"nofollow noreferrer\">äº†ä¸èµ·çš„ Deno å…¥é—¨ç¯‡</a></li>\n <li><a href=\"http://www.semlinker.com/deno-in-action/\" rel=\"nofollow noreferrer\">äº†ä¸èµ·çš„ Deno å®æˆ˜æ•™ç¨‹</a></li>\n <li><a href=\"http://www.semlinker.com/you-dont-know-blob/\" rel=\"nofollow noreferrer\">ä½ ä¸çŸ¥é“çš„ Blob</a></li>\n <li><a href=\"http://www.semlinker.com/you-dont-know-weakmap/\" rel=\"nofollow noreferrer\">ä½ ä¸çŸ¥é“çš„ WeakMap</a></li>\n</ul>","descriptionType":"html","publishedDate":"Mon, 17 Aug 2020 00:43:46 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/remote/1460000023650522","linkMd5":"569e2336cd79bc25ac4f434bfa5337fb","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx23/cdn26@2020_5/2020/08/24/23-08-24-392_31a173cafd36f563.webp","destWidth":800,"destHeight":426,"sourceBytes":79664,"destBytes":37504,"author":"é˜¿å®å“¥","articleImgCdnMap":{"https://segmentfault.com/img/remote/1460000023650522":"https://cdn.jsdelivr.net/gh/myreaderx23/cdn26@2020_5/2020/08/24/23-08-24-392_31a173cafd36f563.webp","https://segmentfault.com/img/remote/1460000023650524":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn93@2020_1/2020/08/24/23-08-31-248_82a398d90f8d4d67.webp","https://segmentfault.com/img/remote/1460000023650528":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn78@2020_4/2020/08/24/23-08-30-890_0a757f6a41f5f311.webp","https://segmentfault.com/img/remote/1460000023650527":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn70@2020_2/2020/08/24/23-08-31-206_51bb2ad6d7647e06.webp","https://segmentfault.com/img/remote/1460000023650521":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn86@2020_6/2020/08/24/23-08-31-209_90d83c08e9ab7de3.webp","https://segmentfault.com/img/remote/1460000023650523":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn89@2020_5/2020/08/24/23-08-31-279_e99c09a9a60e22c5.webp","https://segmentfault.com/img/remote/1460000023650526":"https://cdn.jsdelivr.net/gh/myreaderx14/cdn66@2020_4/2020/08/24/23-08-31-671_9a1dabc2dfac2a2e.webp","https://segmentfault.com/img/remote/1460000023650525":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn57@2020_2/2020/08/24/23-08-30-874_b28db8e72475b886.webp","https://segmentfault.com/img/remote/1460000023650529":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn98@2020_2/2020/08/24/23-08-30-948_d37fcf9ccf470a5a.webp"},"publishedOrCreatedDate":1598310388567},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"RabbitMQé«˜çº§ä¹‹å¦‚ä½•ä¿è¯æ¶ˆæ¯å¯é æ€§ï¼Ÿ","link":"https://segmentfault.com/a/1190000023736395","description":"<blockquote>\n äººç”Ÿç»ˆå°†æ˜¯åœºå•äººæ—…é€”ï¼Œå­¤ç‹¬ä¹‹å‰æ˜¯è¿·èŒ«ï¼Œå­¤ç‹¬è¿‡åæ˜¯æˆé•¿ã€‚\n</blockquote>\n<h2>æ¥”å­</h2>\n<p>æœ¬ç¯‡æ˜¯æ¶ˆæ¯é˜Ÿåˆ—<code>RabbitMQ</code>çš„ç¬¬å››å¼¹ã€‚</p>\n<p><code>RabbitMQ</code>æˆ‘å·²ç»å†™äº†ä¸‰ç¯‡äº†ï¼ŒåŸºç¡€çš„æ”¶å‘æ¶ˆæ¯å’ŒåŸºç¡€çš„æ¦‚å¿µæˆ‘éƒ½å·²ç»å†™äº†ï¼Œå­¦ä»»ä½•ä¸œè¥¿éƒ½æ˜¯è¿™æ ·ï¼Œå…ˆåŸºç¡€çš„ä¸Šæ‰‹èƒ½ç”¨ï¼Œç„¶åé‡åˆ°é—®é¢˜å†å»è§£å†³ï¼Œæ— æ³•ç†è§£å°±å»æ·±å…¥æºç ï¼Œéšç€æ—¶é—´çš„ç§¯ç´¯å¯¹è¿™ä¸€é—¨æŠ€æœ¯çš„ç†è§£ä¹Ÿä¼šéšä¹‹æé«˜ã€‚</p>\n<p>åŸºç¡€æ“ä½œå·²ç»ç†Ÿç»ƒåï¼Œç›¸ä¿¡å¤§å®¶ä¸å¯é¿å…çš„ä¼šç”Ÿå‡ºå‘é‚£æ›´é«˜å¤„æ”€ç™»çš„å¿ƒæ¥ï¼Œä»Šå¤©æˆ‘å°±ç½—åˆ—ä¸€äº›<code>RabbitMQ</code>æ¯”è¾ƒé«˜çº§çš„ç”¨æ³•ï¼Œæœ‰äº›ç”¨å¾—åˆ°æœ‰äº›ç”¨ä¸ä¸Šï¼Œä½†æ˜¯ä¸€å®šè¦æœ‰æ‰€äº†è§£ï¼Œå› ä¸ºå¤§éƒ¨åˆ†æƒ…å†µæˆ‘ä»¬éƒ½æ˜¯é¢å‘é¢è¯•å­¦ä¹ ~</p>\n<ul>\n <li>å¦‚ä½•ä¿è¯æ¶ˆæ¯çš„å¯é æ€§ï¼Ÿ</li>\n <li>æ¶ˆæ¯é˜Ÿåˆ—å¦‚ä½•è¿›è¡Œé™æµï¼Ÿ</li>\n <li><p>å¦‚ä½•è®¾ç½®å»¶æ—¶é˜Ÿåˆ—è¿›è¡Œå»¶æ—¶æ¶ˆè´¹ï¼Ÿ</p>\n  <hr /></li>\n</ul>\n<p><a href=\"https://juejin.im/user/5cc53c8251882524f72ccef6/posts\" rel=\"nofollow noreferrer\">ç¥æœ‰å¥½æ”¶è·ï¼Œå…ˆèµåçœ‹ï¼Œå¿«ä¹æ— é™ã€‚</a></p>\n<p><strong>æœ¬æ–‡ä»£ç ï¼š</strong> <a href=\"https://gitee.com/he-erduo/spring-boot-learning-demo\" rel=\"nofollow noreferrer\">ç äº‘åœ°å€</a>â€ƒ<a href=\"https://github.com/he-erduo/spring-boot-learning-demo\" rel=\"nofollow noreferrer\">GitHubåœ°å€</a></p>\n<h2>1. ğŸ“–å¦‚ä½•ä¿è¯æ¶ˆæ¯çš„å¯é æ€§ï¼Ÿ</h2>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023473305\" alt=\"rabbitæ¶æ„å›¾\" title=\"rabbitæ¶æ„å›¾\" /></p>\n<p>å…ˆæ¥çœ‹çœ‹æˆ‘ä»¬çš„ä¸‡å¹´è€å›¾ï¼Œä»å›¾ä¸Šæˆ‘ä»¬å¤§æ¦‚å¯ä»¥çœ‹å‡ºæ¥ä¸€ä¸ªæ¶ˆæ¯ä¼šç»å†å››ä¸ªèŠ‚ç‚¹ï¼Œåªæœ‰ä¿è¯è¿™å››ä¸ªèŠ‚ç‚¹çš„å¯é æ€§æ‰èƒ½ä¿è¯æ•´ä¸ªç³»ç»Ÿçš„å¯é æ€§ã€‚</p>\n<ul>\n <li>ç”Ÿäº§è€…å‘å‡ºåä¿è¯åˆ°è¾¾äº†MQã€‚</li>\n <li>MQæ”¶åˆ°æ¶ˆæ¯ä¿è¯åˆ†å‘åˆ°äº†æ¶ˆæ¯å¯¹åº”çš„Exchangeã€‚</li>\n <li>Exchangeåˆ†å‘æ¶ˆæ¯å…¥é˜Ÿä¹‹åä¿è¯æ¶ˆæ¯çš„æŒä¹…æ€§ã€‚</li>\n <li>æ¶ˆè´¹è€…æ”¶åˆ°æ¶ˆæ¯ä¹‹åä¿è¯æ¶ˆæ¯çš„æ­£ç¡®æ¶ˆè´¹ã€‚</li>\n</ul>\n<p>ç»å†äº†è¿™å››ä¸ªä¿è¯ï¼Œæˆ‘ä»¬æ‰èƒ½ä¿è¯æ¶ˆæ¯çš„å¯é æ€§ï¼Œä»è€Œä¿è¯æ¶ˆæ¯ä¸ä¼šä¸¢å¤±ã€‚</p>\n<h2>2. ğŸ”ç”Ÿäº§è€…å‘é€æ¶ˆæ¯åˆ°MQå¤±è´¥</h2>\n<p>æˆ‘ä»¬çš„ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ä¹‹åå¯èƒ½ç”±äºç½‘ç»œé—ªæ–­ç­‰å„ç§åŸå› å¯¼è‡´æˆ‘ä»¬çš„æ¶ˆæ¯å¹¶æ²¡æœ‰å‘é€åˆ°MQä¹‹ä¸­ï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™æˆ‘ä»¬ç”Ÿäº§ç«¯åˆä¸çŸ¥é“æˆ‘ä»¬çš„æ¶ˆæ¯æ²¡æœ‰å‘å‡ºå»ï¼Œè¿™å°±ä¼šé€ æˆæ¶ˆæ¯çš„ä¸¢å¤±ã€‚</p>\n<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ<code>RabbitMQ</code>å¼•å…¥äº†<strong>äº‹åŠ¡æœºåˆ¶</strong>å’Œ<strong>å‘é€æ–¹ç¡®è®¤æœºåˆ¶ï¼ˆpublisher confirmï¼‰</strong>ï¼Œç”±äºäº‹åŠ¡æœºåˆ¶è¿‡äºè€—è´¹æ€§èƒ½æ‰€ä»¥ä¸€èˆ¬ä¸ç”¨ï¼Œè¿™é‡Œæˆ‘ç€é‡è®²è¿°<strong>å‘é€æ–¹ç¡®è®¤æœºåˆ¶</strong>ã€‚</p>\n<p>è¿™ä¸ªæœºåˆ¶å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯<strong>æ¶ˆæ¯å‘é€åˆ°MQé‚£ç«¯ä¹‹åï¼ŒMQä¼šå›ä¸€ä¸ªç¡®è®¤æ”¶åˆ°çš„æ¶ˆæ¯ç»™æˆ‘ä»¬</strong>ã€‚</p>\n<hr>\n <p>æ‰“å¼€æ­¤åŠŸèƒ½éœ€è¦é…ç½®ï¼Œæ¥ä¸‹æ¥æˆ‘æ¥æ¼”ç¤ºä¸€ä¸‹é…ç½®ï¼š</p>\n <pre><code class=\"yml\">spring:\n  rabbitmq:\n    addresses: 127.0.0.1\n    host: 5672\n    username: guest\n    password: guest\n    virtual-host: /\n    # æ‰“å¼€æ¶ˆæ¯ç¡®è®¤æœºåˆ¶\n    publisher-confirm-type: correlated</code></pre>\n <p>æˆ‘ä»¬åªéœ€è¦åœ¨é…ç½®é‡Œé¢æ‰“å¼€æ¶ˆæ¯ç¡®è®¤å³å¯(<strong>true</strong>æ˜¯è¿”å›å®¢æˆ·ç«¯ï¼Œ<strong>false</strong>æ˜¯è‡ªåŠ¨åˆ é™¤)ã€‚</p>\n <p><strong>ç”Ÿäº§è€…ï¼š</strong></p>\n <pre><code class=\"java\">    public void sendAndConfirm() {\n        User user = new User();\n\n        log.info(\"Message content : \" + user);\n\n        CorrelationData correlationData = new CorrelationData(UUID.randomUUID().toString());\n        rabbitTemplate.convertAndSend(Producer.QUEUE_NAME,user,correlationData);\n        log.info(\"æ¶ˆæ¯å‘é€å®Œæ¯•ã€‚\");\n\n        rabbitTemplate.setConfirmCallback(new RabbitTemplate.ConfirmCallback(){\n            @Override\n            public void confirm(CorrelationData correlationData, boolean ack, String cause) {\n                log.info(\"CorrelationData content : \" + correlationData);\n                log.info(\"Ack status : \" + ack);\n                log.info(\"Cause content : \" + cause);\n                if(ack){\n                    log.info(\"æ¶ˆæ¯æˆåŠŸå‘é€ï¼Œè®¢å•å…¥åº“ï¼Œæ›´æ”¹è®¢å•çŠ¶æ€\");\n                }else{\n                    log.info(\"æ¶ˆæ¯å‘é€å¤±è´¥ï¼š\"+correlationData+\", å‡ºç°å¼‚å¸¸ï¼š\"+cause);\n                }\n            }\n        });\n    }</code></pre>\n <p>ç”Ÿäº§è€…ä»£ç é‡Œæˆ‘ä»¬çœ‹åˆ°åˆå¤šäº†ä¸€ä¸ªå‚æ•°ï¼š<code>CorrelationData</code>ï¼Œè¿™ä¸ªå‚æ•°æ˜¯ç”¨æ¥åšæ¶ˆæ¯çš„å”¯ä¸€æ ‡è¯†ï¼ŒåŒæ—¶æˆ‘ä»¬æ‰“å¼€æ¶ˆæ¯ç¡®è®¤ä¹‹åéœ€è¦å¯¹<code>rabbitTemplate</code>å¤šè®¾ç½®ä¸€ä¸ª<code>setConfirmCallback</code>ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªåŒ¿åç±»ï¼Œæˆ‘ä»¬æ¶ˆæ¯ç¡®è®¤æˆåŠŸorå¤±è´¥ä¹‹åçš„å¤„ç†å°±æ˜¯å†™åœ¨è¿™ä¸ªåŒ¿åç±»é‡Œé¢ã€‚</p>\n <p>æ¯”å¦‚ä¸€æ¡è®¢å•æ¶ˆæ¯ï¼Œå½“æ¶ˆæ¯ç¡®è®¤åˆ°è¾¾MQç¡®è®¤ä¹‹åå†è¡Œå…¥åº“æˆ–è€…ä¿®æ”¹è®¢å•çš„èŠ‚ç‚¹çŠ¶æ€ï¼Œå¦‚æœæ¶ˆæ¯æ²¡æœ‰æˆåŠŸåˆ°è¾¾MQå¯ä»¥è¿›è¡Œä¸€æ¬¡è®°å½•æˆ–è€…å°†è®¢å•çŠ¶æ€ä¿®æ”¹ã€‚</p>\n <p><strong>Tip</strong>ï¼šæ¶ˆæ¯ç¡®è®¤å¤±è´¥ä¸åªæœ‰æ¶ˆæ¯æ²¡å‘è¿‡å»ä¼šè§¦å‘ï¼Œæ¶ˆæ¯å‘è¿‡å»ä½†æ˜¯æ‰¾ä¸åˆ°å¯¹åº”çš„Exchangeï¼Œä¹Ÿä¼šè§¦å‘ã€‚</p>\n <h2>3. ğŸ“”MQæ¥æ”¶å¤±è´¥æˆ–è€…è·¯ç”±å¤±è´¥</h2>\n <p>ç”Ÿäº§è€…çš„å‘é€æ¶ˆæ¯å¤„ç†å¥½äº†ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¥çœ‹çœ‹MQç«¯çš„å¤„ç†ï¼ŒMQå¯èƒ½å‡ºç°ä¸¤ä¸ªé—®é¢˜ï¼š</p>\n <ol>\n  <li>æ¶ˆæ¯æ‰¾ä¸åˆ°å¯¹åº”çš„Exchangeã€‚</li>\n  <li>æ‰¾åˆ°äº†Exchangeä½†æ˜¯æ‰¾ä¸åˆ°å¯¹åº”çš„Queueã€‚</li>\n </ol>\n <p>è¿™ä¸¤ç§æƒ…å†µéƒ½å¯ä»¥ç”¨<code>RabbitMQ</code>æä¾›çš„<code>mandatory</code>å‚æ•°æ¥è§£å†³ï¼Œå®ƒä¼šè®¾ç½®æ¶ˆæ¯æŠ•é€’å¤±è´¥çš„ç­–ç•¥ï¼Œæœ‰ä¸¤ç§ç­–ç•¥ï¼šè‡ªåŠ¨åˆ é™¤æˆ–è¿”å›åˆ°å®¢æˆ·ç«¯ã€‚</p>\n <p>æˆ‘ä»¬æ—¢ç„¶è¦åšå¯é æ€§ï¼Œå½“ç„¶æ˜¯è®¾ç½®ä¸ºè¿”å›åˆ°å®¢æˆ·ç«¯ã€‚</p>\n <hr>\n  <p><strong>é…ç½®ï¼š</strong></p>\n  <pre><code class=\"yml\">spring:\n  rabbitmq:\n    addresses: 127.0.0.1\n    host: 5672\n    username: guest\n    password: guest\n    virtual-host: /\n    # æ‰“å¼€æ¶ˆæ¯ç¡®è®¤æœºåˆ¶\n    publisher-confirm-type: correlated\n    # æ‰“å¼€æ¶ˆæ¯è¿”å›\n    publisher-returns: true\n    template:\n      mandatory: true</code></pre>\n  <p>æˆ‘ä»¬åªéœ€è¦åœ¨é…ç½®é‡Œé¢æ‰“å¼€æ¶ˆæ¯è¿”å›å³å¯ï¼Œ<code>template.mandatory: true</code>è¿™ä¸€æ­¥ä¸è¦å°‘~</p>\n  <p><strong>ç”Ÿäº§è€…ï¼š</strong></p>\n  <pre><code class=\"java\">    public void sendAndReturn() {\n        User user = new User();\n\n        log.info(\"Message content : \" + user);\n\n        rabbitTemplate.setReturnCallback((message, replyCode, replyText, exchange, routingKey) -&gt; {\n            log.info(\"è¢«é€€å›çš„æ¶ˆæ¯ä¸ºï¼š{}\", message);\n            log.info(\"replyCodeï¼š{}\", replyCode);\n            log.info(\"replyTextï¼š{}\", replyText);\n            log.info(\"exchangeï¼š{}\", exchange);\n            log.info(\"routingKeyï¼š{}\", routingKey);\n        });\n\n        rabbitTemplate.convertAndSend(\"fail\",user);\n        log.info(\"æ¶ˆæ¯å‘é€å®Œæ¯•ã€‚\");\n    }</code></pre>\n  <p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥æ‹¿åˆ°è¢«é€€å›æ¶ˆæ¯çš„æ‰€æœ‰ä¿¡æ¯ï¼Œç„¶åå†è¿›è¡Œå¤„ç†ï¼Œæ¯”å¦‚æ”¾åˆ°ä¸€ä¸ªæ–°çš„é˜Ÿåˆ—å•ç‹¬å¤„ç†ï¼Œè·¯ç”±å¤±è´¥ä¸€èˆ¬éƒ½æ˜¯é…ç½®é—®é¢˜äº†ã€‚</p>\n  <h2>4. ğŸ“‘æ¶ˆæ¯å…¥é˜Ÿä¹‹åMQå®•æœº</h2>\n  <p>åˆ°è¿™ä¸€æ­¥åŸºæœ¬éƒ½æ˜¯ä¸€äº›å¾ˆå°æ¦‚ç‡çš„é—®é¢˜äº†ï¼Œæ¯”å¦‚MQçªç„¶å®•æœºäº†æˆ–è€…è¢«å…³é—­äº†ï¼Œè¿™ç§é—®é¢˜å°±å¿…é¡»è¦å¯¹æ¶ˆæ¯åšæŒä¹…åŒ–ï¼Œä»¥ä¾¿MQé‡æ–°å¯åŠ¨ä¹‹åæ¶ˆæ¯è¿˜èƒ½é‡æ–°æ¢å¤è¿‡æ¥ã€‚</p>\n  <p>æ¶ˆæ¯çš„æŒä¹…åŒ–è¦åšï¼Œä½†æ˜¯ä¸èƒ½åªåšæ¶ˆæ¯çš„æŒä¹…åŒ–ï¼Œè¿˜è¦åšé˜Ÿåˆ—çš„æŒä¹…åŒ–å’ŒExchangeçš„æŒä¹…åŒ–ã€‚</p>\n  <pre><code class=\"java\">    @Bean\n    public DirectExchange directExchange() {\n        // ä¸‰ä¸ªæ„é€ å‚æ•°ï¼šname durable autoDelete\n        return new DirectExchange(\"directExchange\", false, false);\n    }\n\n    @Bean\n    public Queue erduo() {\n        // å…¶ä¸‰ä¸ªå‚æ•°ï¼šdurable exclusive autoDelete\n        // ä¸€èˆ¬åªè®¾ç½®ä¸€ä¸‹æŒä¹…åŒ–å³å¯\n        return new Queue(\"erduo\",true);\n    }</code></pre>\n  <p>åˆ›å»ºExchangeå’Œé˜Ÿåˆ—æ—¶åªè¦è®¾ç½®å¥½æŒä¹…åŒ–ï¼Œå‘é€çš„æ¶ˆæ¯é»˜è®¤å°±æ˜¯æŒä¹…åŒ–æ¶ˆæ¯ã€‚</p>\n  <p>è®¾ç½®æŒä¹…åŒ–æ—¶ä¸€å®šè¦å°†Exchangeå’Œé˜Ÿåˆ—éƒ½è®¾ç½®ä¸ŠæŒä¹…åŒ–ï¼š</p>\n  <p>å•å•åªè®¾ç½®ExchangeæŒä¹…åŒ–ï¼Œé‡å¯ä¹‹åé˜Ÿåˆ—ä¼šä¸¢å¤±ã€‚å•å•åªè®¾ç½®é˜Ÿåˆ—çš„æŒä¹…åŒ–ï¼Œé‡å¯ä¹‹åExchangeä¼šæ¶ˆå¤±ï¼Œæ—¢è€Œæ¶ˆæ¯ä¹Ÿä¸¢å¤±ï¼Œæ‰€ä»¥å¦‚æœä¸ä¸¤ä¸ªä¸€å—è®¾ç½®æŒä¹…åŒ–å°†æ¯«æ— æ„ä¹‰ã€‚</p>\n  <p><strong>Tipï¼š</strong> è¿™äº›éƒ½æ˜¯MQå®•æœºå¼•èµ·çš„é—®é¢˜ï¼Œå¦‚æœå‡ºç°æœåŠ¡å™¨å®•æœºæˆ–è€…ç£ç›˜æŸååˆ™ä¸Šé¢çš„æ‰‹æ®µç»Ÿç»Ÿæ— æ•ˆï¼Œå¿…é¡»å¼•å…¥é•œåƒé˜Ÿåˆ—ï¼Œåšå¼‚åœ°å¤šæ´»æ¥æŠµå¾¡è¿™ç§ä¸å¯æŠ—å› ç´ ã€‚</p>\n  <h2>5. ğŸ“Œæ¶ˆè´¹è€…æ— æ³•æ­£å¸¸æ¶ˆè´¹</h2>\n  <p>æœ€åä¸€æ­¥ä¼šå‡ºé—®é¢˜çš„åœ°æ–¹å°±åœ¨æ¶ˆè´¹è€…ç«¯äº†ï¼Œä¸è¿‡è¿™ä¸ªè§£å†³é—®é¢˜çš„æ–¹æ³•æˆ‘ä»¬ä¹‹å‰çš„æ–‡ç« å·²ç»è¯´è¿‡äº†ï¼Œå°±æ˜¯æ¶ˆè´¹è€…çš„æ¶ˆæ¯ç¡®è®¤ã€‚</p>\n  <pre><code class=\"yml\">spring:\n  rabbitmq:\n    addresses: 127.0.0.1\n    host: 5672\n    username: guest\n    password: guest\n    virtual-host: /\n    # æ‰‹åŠ¨ç¡®è®¤æ¶ˆæ¯\n    listener:\n      simple:\n          acknowledge-mode: manual</code></pre>\n  <p>æ‰“å¼€æ‰‹åŠ¨æ¶ˆæ¯ç¡®è®¤ä¹‹åï¼Œåªè¦æˆ‘ä»¬è¿™æ¡æ¶ˆæ¯æ²¡æœ‰æˆåŠŸæ¶ˆè´¹ï¼Œæ— è®ºä¸­é—´æ˜¯å‡ºç°æ¶ˆè´¹è€…å®•æœºè¿˜æ˜¯ä»£ç å¼‚å¸¸ï¼Œåªè¦è¿æ¥æ–­å¼€ä¹‹åè¿™æ¡ä¿¡æ¯è¿˜æ²¡æœ‰è¢«æ¶ˆè´¹é‚£ä¹ˆè¿™æ¡æ¶ˆæ¯å°±ä¼šè¢«é‡æ–°æ”¾å…¥é˜Ÿåˆ—å†æ¬¡è¢«æ¶ˆè´¹ã€‚</p>\n  <p>å½“ç„¶è¿™ä¹Ÿå¯èƒ½ä¼šå‡ºç°é‡å¤æ¶ˆè´¹çš„æƒ…å†µï¼Œä¸è¿‡åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¹‚ç­‰æ€§æ˜¯ä¸€å®šè¦åšçš„ï¼Œæ‰€ä»¥ä¸€èˆ¬é‡å¤æ¶ˆè´¹éƒ½ä¼šè¢«æ¥å£çš„å¹‚ç­‰ç»™æ‹¦æ‰ã€‚</p>\n  <p>æ‰€è°“å¹‚ç­‰æ€§å°±æ˜¯ï¼š<strong>ä¸€ä¸ªæ“ä½œå¤šæ¬¡æ‰§è¡Œäº§ç”Ÿçš„ç»“æœä¸ä¸€æ¬¡æ‰§è¡Œäº§ç”Ÿçš„ç»“æœä¸€è‡´ã€‚</strong></p>\n  <p>å¹‚ç­‰æ€§ç›¸å…³å†…å®¹ä¸åœ¨æœ¬ç« è®¨è®ºèŒƒå›´~æ‰€ä»¥æˆ‘å°±ä¸å¤šåšé˜è¿°äº†ã€‚</p>\n  <h2>6. ğŸ’¡æ¶ˆæ¯å¯é æ€§æ¡ˆä¾‹</h2>\n  <p><img src=\"https://segmentfault.com/img/remote/1460000023736398\" alt=\"æ¶ˆæ¯å¯é æ€§æ¶æ„\" title=\"æ¶ˆæ¯å¯é æ€§æ¶æ„\" /></p>\n  <p>è¿™ä¸ªå›¾æ˜¯æˆ‘å¾ˆæ—©ä¹‹å‰ç”»çš„ï¼Œæ˜¯ä¸ºäº†è®°å½•å½“æ—¶ä½¿ç”¨<code>RabbitMQ</code>åšæ¶ˆæ¯å¯é æ€§çš„å…·ä½“åšæ³•ï¼Œè¿™é‡Œæˆ‘æ­£å¥½æ‹¿å‡ºæ¥åšä¸ªä¾‹å­ç»™å¤§å®¶çœ‹ä¸€çœ‹ã€‚</p>\n  <p>è¿™ä¸ªä¾‹å­ä¸­çš„æ¶ˆæ¯æ˜¯å…ˆå…¥åº“çš„ï¼Œç„¶åç”Ÿäº§è€…ä»DBé‡Œé¢æ‹¿åˆ°æ•°æ®åŒ…è£…æˆæ¶ˆæ¯å‘ç»™MQï¼Œç»è¿‡æ¶ˆè´¹è€…æ¶ˆè´¹ä¹‹åå¯¹DBæ•°æ®çš„çŠ¶æ€è¿›è¡Œæ›´æ”¹ï¼Œç„¶åé‡æ–°å…¥åº“ã€‚</p>\n  <p>è¿™ä¸­é—´æœ‰ä»»ä½•æ­¥éª¤å¤±è´¥ï¼Œæ•°æ®çš„çŠ¶æ€éƒ½æ˜¯æ²¡æœ‰æ›´æ–°çš„ï¼Œè¿™æ—¶é€šè¿‡ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ä¸åœçš„å»åˆ·åº“ï¼Œæ‰¾åˆ°æœ‰é—®é¢˜çš„æ•°æ®å°†å®ƒé‡æ–°æ‰”åˆ°ç”Ÿäº§è€…é‚£é‡Œè¿›è¡Œé‡æ–°æŠ•é€’ã€‚</p>\n  <p>è¿™ä¸ªæ–¹æ¡ˆå…¶å®å’Œç½‘ä¸Šçš„å¾ˆå¤šæ–¹æ¡ˆå¤§åŒå°å¼‚ï¼ŒåŸºç¡€çš„å¯é æ€§ä¿è¯ä¹‹åï¼Œå®šæ—¶ä»»åŠ¡åšä¸€ä¸ªå…œåº•è¿›è¡Œä¸æ–­çš„æ‰«æï¼ŒåŠ›å›¾100%å¯é æ€§ã€‚</p>\n  <h2>åè®°</h2>\n  <p>è¶Šå†™è¶Šé•¿ï¼Œå› ä¸ºç¯‡å¹…ç¼˜æ•…é™æµå’Œå»¶æ—¶é˜Ÿåˆ—æ”¾åˆ°ä¸‹ä¸€ç¯‡äº†ï¼Œæˆ‘ä¼šå°½å¿«å‘å‡ºæ¥ä¾›å¤§å®¶é˜…è¯»ï¼Œè®²çœŸï¼Œæˆ‘çœŸçš„ä¸æ˜¯æ•…æ„å¤šæ°´ä¸€ç¯‡çš„ï¼ï¼ï¼</p>\n  <p>æœ€åå†ç»™ä¼˜ç‹æ‰“ä¸ªå¹¿å‘Šï¼Œæœ€è¿‘æ˜é‡‘åœ¨GitHubä¸Šé¢å»ºç«‹äº†ä¸€ä¸ªå¼€æºè®¡åˆ’ - <a href=\"https://github.com/juejin-im/open-source\" rel=\"nofollow noreferrer\">open-source</a>ï¼Œæ—¨åœ¨æ”¶å½•å„ç§å¥½ç©çš„å¥½ç”¨çš„å¼€æºåº“ï¼Œå¦‚æœå¤§å®¶æœ‰æƒ³è¦è‡ªèæˆ–è€…åˆ†äº«çš„å¼€æºåº“éƒ½å¯ä»¥å‚ä¸è¿›å»ï¼Œä¸ºè¿™ä¸ªå¼€æºè®¡åˆ’åšä¸€ä»½è´¡çŒ®ï¼ŒåŒæ—¶è¿™ä¸ªå¼€æºåº“çš„<code>Start</code>ä¹Ÿåœ¨ç¨³æ­¥å¢é•¿ä¸­ï¼Œå‚ä¸è¿›å»ä¹Ÿå¯ä»¥å¢åŠ è‡ªå·±é¡¹ç›®çš„æ›å…‰åº¦ï¼Œä¸€ä¸¾ä¸¤å¾—ã€‚</p>\n  <p>åŒæ—¶è¿™ä¸ªå¼€æºåº“è¿˜æœ‰ä¸€ä¸ªå…„å¼Ÿé¡¹ç›® - <a href=\"https://github.com/juejin-im/open-source-translation\" rel=\"nofollow noreferrer\">open-source-translation</a>ï¼Œæ—¨åœ¨æ‹›å‹ŸæŠ€æœ¯æ–‡ç« ç¿»è¯‘å¿—æ„¿è€…è¿›è¡ŒæŠ€æœ¯æ–‡ç« çš„ç¿»è¯‘å·¥ä½œï¼Œ<br>äº‰åšæœ€æ£’å¼€æºç¿»è¯‘ï¼Œç¿»è¯‘ä¸šç•Œé«˜è´¨é‡æ–‡ç¨¿ï¼Œä¸ºæŠ€æœ¯äººçš„æˆé•¿çŒ®ä¸€ä»½åŠ›ã€‚</br></p>\n  <hr>\n   <p>æœ€è¿‘è¿™æ®µæ—¶é—´äº‹æƒ…æŒºå¤šï¼Œä¼˜ç‹ä»¤æˆ‘å…«æœˆåº•ä¹‹å‰å‡çº§åˆ°ä¸‰çº§ï¼Œæ‰€ä»¥å„ä½è¯»è€…çš„èµå¯¹æˆ‘å¾ˆé‡è¦ï¼Œå¸Œæœ›å¤§å®¶èƒ½å¤Ÿé«˜æŠ¬è´µæ‰‹ï¼Œå¸®æˆ‘ä¸€å“ˆ~</p>\n   <p>å¥½äº†ï¼Œä»¥ä¸Šå°±æ˜¯æœ¬æœŸçš„å…¨éƒ¨å†…å®¹ï¼Œæ„Ÿè°¢ä½ èƒ½çœ‹åˆ°è¿™é‡Œï¼Œæ¬¢è¿å¯¹æœ¬æ–‡ç‚¹èµæ”¶è—ä¸è¯„è®ºï¼ŒğŸ‘ä½ ä»¬çš„æ¯ä¸ªç‚¹èµéƒ½æ˜¯æˆ‘åˆ›ä½œçš„æœ€å¤§åŠ¨åŠ›ã€‚</p>\n   <p>æˆ‘æ˜¯è€³æœµï¼Œä¸€ä¸ªä¸€ç›´æƒ³åšçŸ¥è¯†è¾“å‡ºçš„ä¼ªæ–‡è‰ºç¨‹åºå‘˜ï¼Œæˆ‘ä»¬ä¸‹æœŸè§ã€‚</p>\n   <p><strong>æœ¬æ–‡ä»£ç ï¼š</strong><a href=\"https://gitee.com/he-erduo/spring-boot-learning-demo\" rel=\"nofollow noreferrer\">ç äº‘åœ°å€</a>â€ƒ<a href=\"https://github.com/he-erduo/spring-boot-learning-demo\" rel=\"nofollow noreferrer\">GitHubåœ°å€</a></p>\n  </hr>\n </hr>\n</hr>","descriptionType":"html","publishedDate":"Mon, 24 Aug 2020 03:14:34 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/remote/1460000023473305","linkMd5":"0350953f3ed11c58067e084970f74395","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx23/cdn14@2020_2/2020/08/24/23-08-22-277_79d59aaca7438433.webp","destWidth":800,"destHeight":317,"sourceBytes":62172,"destBytes":17268,"author":"å’Œè€³æœµ","articleImgCdnMap":{"https://segmentfault.com/img/remote/1460000023473305":"https://cdn.jsdelivr.net/gh/myreaderx23/cdn14@2020_2/2020/08/24/23-08-22-277_79d59aaca7438433.webp","https://segmentfault.com/img/remote/1460000023736398":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn36@2020_5/2020/08/24/23-08-35-897_b31ea577fa877f02.webp"},"publishedOrCreatedDate":1598310388558},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"æ€å¦æœ‰çº¦ä¸¨@æ´ªå…‰å…‰ï¼šPHP æ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€ï¼Œæˆ‘æ¬ç€å…¨ä¸–ç•Œæœ€é¦™çš„ç –","link":"https://segmentfault.com/a/1190000023622134","description":"<p><img src=\"https://segmentfault.com/img/bVbLgRH\" alt=\"image.png\" title=\"image.png\"><br><em>æ´ªå…‰å…‰ï¼ˆå³äºŒï¼‰</em></br></img></p>\n<p><strong>æœ¬æœŸè®¿è°ˆå˜‰å®¾ï¼š<a href=\"https://segmentfault.com/u/guangguang_5ef84d351d77d\">æ´ªå…‰å…‰</a></strong> <br><strong>è®¿è°ˆç¼–è¾‘ï¼šèŠ’æœæœ</strong></br></p>\n<p>æ´ªå…‰å…‰æˆä¸ºä¸€ä¸ªç¨‹åºå‘˜å·²ç» 4 å¹´äº†ï¼Œä»ç„¶å¯¹ç¼–ç¨‹å……æ»¡çƒ­æƒ…ï¼Œä»–è¯´ï¼šâ€œ<strong>php æ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€ï¼Œæˆ‘æ¬ç€å…¨ä¸–ç•Œæœ€é¦™çš„ç –ã€‚</strong>â€ä»–åº”è¯¥æ˜¯æˆ‘æ¥è§¦çš„ç¨‹åºå‘˜ä¸­æœ€ç›´ç™½è¡¨è¾¾å¯¹ç¼–ç¨‹çƒ­çˆ±çš„äººã€‚</p>\n<p>è™½ç„¶ç°åœ¨è¯´èµ·ç¼–ç¨‹ï¼Œæˆ‘å¯ä»¥ä»æ´ªå…‰å…‰çš„å­—é‡Œè¡Œé—´æ„Ÿå—åˆ°ä»–å¯¹è‡ªå·±å·¥ä½œçš„çƒ­çˆ±ï¼Œæ˜¯é‚£ç§æŠŠå·¥ä½œå½“æˆä¹è¶£çš„äº«å—ã€‚ä½†å…¶å®ï¼Œä»–èµ°ä¸Šç¼–ç¨‹ä¹‹è·¯å´æ˜¯å› ä¸ºå¤§å­¦æ¯•ä¸šå‰è‹±è¯­å››çº§æ²¡è¿‡ï¼Œä¸å¾—ä¸é å‚åŠ æ¯”èµ›æ‹¿åˆ°æ¯•ä¸šè¯ä¹¦ã€‚å› ä¸ºåªè¦è·å¾—å…¨å›½å¼€å‘å¥–é¡¹å°±å¯ä»¥ä»£æ›¿å››çº§è¯ä¹¦é¡ºåˆ©æ¯•ä¸šã€‚</p>\n<p>äººçš„æ½œèƒ½æ˜¯æ— é™çš„ï¼Œåœ¨é¢ä¸´æ— æ³•æ¯•ä¸šçš„æƒ…å†µä¸‹ï¼Œæ´ªå…‰å…‰å°±åƒå›åˆ°äº†é«˜è€ƒå†²åˆºé˜¶æ®µï¼Œæ§ç€å•ç‰‡æœºåœ¨åŠå…¬å®¤ä¸€åå°±æ˜¯åŠå¹´ã€‚ç»ˆäºï¼Œåœ¨å…¨å›½è“æ¡¥æ¯å•ç‰‡æœºæ¯”èµ›ä¸­æ‹¿äº†å¥–ï¼Œä»–ä¹Ÿæˆä¸ºäº†å­¦æ ¡è‡ªå»ºæ ¡ä»¥æ¥ç¬¬ä¸€ä¸ªè·å¾—å…¨å›½ç¡¬ä»¶ç±»å¥–é¡¹çš„å­¦ç”Ÿã€‚ä¸€æ—¶é—´ï¼Œæ´ªå…‰å…‰ç«Ÿæˆäº†å­¦æ ¡çš„é£äº‘äººç‰©ã€‚</p>\n<p>é‚£æ—¶ï¼Œä»–åœ¨å­¦æ ¡å®£ä¼ ä¸­è®²çš„ä¸»é¢˜æ˜¯ã€Šå…´è¶£æ˜¯æœ€å¥½çš„è€å¸ˆã€‹ï¼Œä½†æ˜¯ç°åœ¨ï¼Œä»–è¯´ï¼šâ€œå¦‚æœå†å›åˆ°é‚£ä¸ªæ—¶å€™ï¼Œæˆ‘æƒ³æ”¹æˆã€Šæ¯•ä¸šæ˜¯æœ€å¥½çš„å‹åŠ›ã€‹â€ã€‚</p>\n<p><strong>æ´ªå…‰å…‰çš„ 4 å¹´ä¹‹åå„¿</strong></p>\n<p>ä¸€å¼€å§‹åªæ˜¯å¸Œæœ›èƒ½é¡ºåˆ©æ¯•ä¸šï¼Œæ²¡æƒ³åˆ°æ‹¿äº†ä¸ªå…¨å›½å¥–é¡¹ï¼Œè¿™å°±æ ·æ´ªå…‰å…‰é¡ºç†æˆç« çš„æˆäº†ä¸€ä¸ªç¨‹åºå‘˜ã€‚</p>\n<p>ä½†ä¸æ¯•ä¸šå‰å°±æ‹¿å¥–çš„é£å…‰ç»å†ä¸åŒï¼Œå…¥è¡Œ 4 å¹´ï¼Œæ´ªå…‰å…‰æœ€åæ‚”çš„å°±æ˜¯æ²¡æœ‰æŠŠä¸ºäº†æ‹¿åˆ°æ¯•ä¸šè¯é‚£ç§å­¦ä¹ çš„çƒ­æƒ…åšæŒä¸‹æ¥ã€‚è¿‡äº†å‡ å¹´å®‰é€¸çš„ç”Ÿæ´»åï¼Œä»–æ„è¯†åˆ°äº†å¦‚æœä¸æŠŠè½ä¸‹çš„æ—¶é—´ä¸ä¸Šï¼Œå°±å¾ˆéš¾åœ¨å·¥ä½œä¸­ä½œå‡ºæˆç»©äº†ã€‚</p>\n<p>å¤§å­¦å­¦åˆ¶æ˜¯ 4 å¹´ï¼Œå¥¥è¿ä¼šå‘¨æœŸä¹Ÿæ˜¯ 4 å¹´ï¼Œ4 å¹´ä¼¼ä¹æ˜¯å¾ˆå¤šäº‹æƒ…çš„ä¸€ä¸ªç ã€‚æ´ªå…‰å…‰çš„å¤§å­¦ 4 å¹´å†³å®šäº†ä»–çš„å·¥ä½œæ–¹å‘ï¼Œ<strong>å…¥è¡Œåçš„ 4 å¹´ä»–å¼€å§‹çœŸæ­£äº†è§£è¿™ä¸ªè¡Œä¸šï¼Œä¹Ÿå¼€å§‹ç„¦è™‘ï¼Œå› ä¸ºç°å®å’Œç†æƒ³çš„å·®è·ï¼Œä¹Ÿå› ä¸ºè‡ªå·±çš„æ— èƒ½ä¸ºåŠ›ã€‚</strong></p>\n<p><strong><em>Qï¼šä»‹ç»ä¸€ä¸‹è‡ªå·±å§ã€‚</em></strong></p>\n<p>æˆ‘å«æ´ªå…‰å…‰ã€‚å¦‚æœä¸€å¥è¯ä»‹ç»è‡ªå·±ä»å…¥è¡Œåˆ°ç°åœ¨ï¼Œæˆ‘æƒ³æˆ‘åº”è¯¥æ˜¯ä¸€ä¸ªåœ¨è·¯ä¸Šèµ°äº†å››å¹´å·®ç‚¹èµ°ä¸¢ï¼Œä»£è¡¨ç€ç»å¤§æ•°çš„ä¸€ä¸ªå¹³å‡¡æ™®é€šçš„å¼€å‘ä»”ã€‚</p>\n<p><strong><em>Qï¼šä¸ºä»€ä¹ˆè¯´è‡ªå·±æ˜¯å·®ç‚¹èµ°ä¸¢çš„å¼€å‘ä»”ï¼Ÿ</em></strong></p>\n<p>æˆ‘æ˜¯ä¸€ä¸ªæ²¡æœ‰æ‹¿å¾—å‡ºæ‰‹çš„å¼€æºé¡¹ç›®ã€æ²¡æœ‰æ¯”è¾ƒæ‹”å°–çš„æŠ€æœ¯ã€æ²¡æœ‰è®©äººæƒŠå¹çš„å¤©èµ‹ã€æ²¡æœ‰åšéŸ§ä¸æ‹”çš„è‡ªå¾‹çš„å´æ€€ç€å¤§å‚æ¢¦åšäº†å¾ˆå¤šä¸æ¢¦æƒ³æ¯«æ— å¸®åŠ©çš„äº‹æƒ…çš„äººã€‚</p>\n<p>2016 å¹´æ¯•ä¸šå…¥è¡Œè‡³ä»Š 4 å¹´ å‰é¢ 2 å¹´ä¸€ç›´ä¿æŒé«˜çƒ­æƒ…å­¦ä¹ åé¢å¼€å§‹æµ‘æµ‘å™©å™©çš„æ··äº† 2 å¹´ï¼Œç°åœ¨ä¸€ç›´å†å¿è¿˜è¿™ä¸¤å¹´æ¬ ä¸‹çš„çªŸçª¿å€ºã€‚å› ä¸ºè‡ªå·±è¿‡çš„å¤ªè¿‡å¹³å‡¡å’Œå¹³åº¸ï¼Œä¹Ÿä¼šåœ¨æ— æ•°æ¬¡çš„æ—¶å€™å»é—®è‡ªå·±ï¼Œè‡ªå·±è¿˜é€‚åˆç¨‹åºå‘˜å—?åˆ°äº† 30 å²å¦‚ä½•ä¿è¯è‡ªå·±ä¸è¢«æ·˜æ±°?</p>\n<p>æˆ‘è§‰çš„è‡ªå·±ä»£è¡¨äº†å¾ˆå¤šå¹³å‡¡çš„ç¨‹åºå‘˜ï¼Œæƒ³å†å¹³å‡¡çš„ç”Ÿæ´»é‡Œå»è¯•ç€ç»½æ”¾ä¸€ç‚¹å¾®äº®ï¼Œ<strong>æˆ‘ä»¬å°±ç®—æ³¨å®šæˆä¸ºä¸äº†å¤šè€€çœ¼çš„å¤§ä½¬ä¹Ÿè¦ä¿è¯è‡ªå·±èµ°åœ¨è·¯ä¸Šã€‚</strong></p>\n<p><strong><em>Qï¼šå…¥è¡Œ 4 å¹´äº†ï¼Œä½ æœ€å¤§çš„æ„Ÿå—æ˜¯ä»€ä¹ˆï¼Ÿ</em></strong></p>\n<p>å¤§å®¶éƒ½è¯´å››å¹´æ˜¯ä¸€ä¸ªåï¼Œå› ä¸ºå››å¹´çš„æ—¶é—´è¶³å¤Ÿå»äº†è§£è¿™ä¸ªè¡Œä¸šå’Œè¶³å¤Ÿäº†è§£è‡ªå·±ï¼Œæ‰€ä»¥æˆ‘å¼€å§‹æ„Ÿåˆ°ç„¦è™‘ã€‚ç„¦è™‘æ¥æºæ ¹æœ¬è¿˜æ˜¯å› ä¸ºç°å®å’Œç†æƒ³çš„å·®è·ï¼Œè¯´ç™½è¿˜æ˜¯æ¥è‡ªç°åœ¨çš„æ— èƒ½ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023622137\" alt=\"\" title=\"\" /></p>\n<p><strong>è‡ªå¾‹çš„å…»æˆé™¤äº†é«˜æ•ˆå®Œæˆå·¥ä½œè¿˜åŒ…æ‹¬è‡ªå¾‹çš„ç”Ÿæ´»ï¼Œè¿åŠ¨å°±æ˜¯æ´ªå…‰å…‰æ‰¾åˆ°çš„é€‚åˆè‡ªå·±çš„æ–¹å¼ï¼Œä»–ç”šè‡³æŠŠè‡ªå·±çš„å¾®ä¿¡æ˜µç§°éƒ½æ”¹æˆäº†â€œè¿åŠ¨å…‰â€ã€‚</strong></p>\n<p><strong>ä¹Ÿè®¸ï¼Œè¿™ä¹Ÿæ˜¯ä»–ç£ä¿ƒè‡ªå·±çš„ä¸€ç§æ–¹å¼å§ï¼Œå°±åƒæœ‰äººä¼šæŠŠæ˜µç§°æ”¹æˆâ€œä¸ç˜¦åæ–¤ä¸æ”¹åâ€ï¼Œä»¥æ­¤æ¥ç£ä¿ƒè‡ªå·±å‡è‚¥ä¸€æ ·ã€‚</strong></p>\n<p><strong>ä¸ºäº†æ›´å¥åº·çš„èº«ä½“ï¼Œä¹Ÿä¸ºäº†å…»æˆæ›´å¥½çš„ä¹ æƒ¯ï¼Œæ´ªå…‰å…‰ä¼šä¿è¯æ¯å‘¨æ‰“ä¸¤æ¬¡ç¾½æ¯›çƒã€ä¸€æ¬¡ç½‘çƒã€ä¸€æ¬¡ä¹’ä¹“çƒã€‚</strong></p>\n<p><strong>æ— è®ºæ˜¯å­¦ä¹ è¿˜æ˜¯è¿åŠ¨ï¼Œéƒ½æ˜¯ä¸ºäº†æå‡è‡ªå·±ï¼Œè®©è‡ªå·±çš„ç²¾ç¥å’Œèº«ä½“éƒ½è¿‡çš„å……å®ï¼Œä¸å†æµªè´¹æ—¶é—´ã€‚å°±åƒé‚£ä¸ªè¢«æ¯•ä¸šé€¼å‡ºæ¥çš„å…¨å›½å¥–é¡¹ï¼Œæœ€åä¸€åˆ»çš„çªå‡»æˆ–è®¸èƒ½å–å¾—å¥½æˆç»©ï¼Œä½†ç»ä¸æ˜¯é•¿ä¹…ä¹‹è®¡ã€‚æƒ³è¦ç‚¹äº®è‡ªå·±èƒ¸å‰çš„å‹‹ç« ï¼Œå°±å¿…é¡»è„šè¸å®åœ°çš„åŠªåŠ›ã€‚</strong></p>\n<p><strong><em>Qï¼šä½ å¦‚ä½•åŒ–è§£ç„¦è™‘çš„ï¼Ÿ</em></strong></p>\n<p>ç„¦è™‘å¯¹æˆ‘æ¥è¯´å°±åƒæ˜¯ç—”ç–®ï¼Œè®©æˆ‘åç«‹éš¾å®‰ã€‚</p>\n<p>æ˜¯è°åœ¨æ— æ•°æ¬¡çš„å¤œæ™šæé†’ä½ ä¸è¦å†æ‰“æ¸¸æˆäº† è¦å­¦ä¹ </p>\n<p>æ˜¯è°åœ¨æ— æ•°æ¬¡çš„åˆ·å‰§ä¸­æé†’ä½ ä¸è¦å†å¤§æ¸¸æˆ è¦å­¦ä¹ </p>\n<p>æ˜¯è°åœ¨æ— æ•°æ¬¡çš„éº»æœ¨CURDæé†’ä½ ä¸è¦æ²‰è¿·CURD è¦å­¦ä¹ </p>\n<p>é™¤äº†å­¦ä¹ ï¼Œæˆ‘ä¹Ÿå¸¸å¸¸æé†’è‡ªå·±è¦å¤šè¿åŠ¨ï¼Œé€æ¸çš„æ…¢æ…¢ä»ç„¦è™‘ä¸­æ€€ç–‘äººç”Ÿåˆ°é ç€ç„¦è™‘é€¼ç€è‡ªå·±ä¸æ–­çš„å¾€å‰èµ°ï¼Œç„¦è™‘æ˜¯æ²¡åŠæ³•å½»åº•æ¶ˆé™¤ï¼Œä½†æ˜¯å¯ä»¥å°½å¯èƒ½çš„é™ä½ç„¦è™‘ã€‚</p>\n<p><strong><em>Qï¼šç”¨å­¦ä¹ æ¥ç¼“è§£ç„¦è™‘ï¼Œé‚£ä½ æœ‰ä»€ä¹ˆå­¦ä¹ æ–¹æ³•æ¨èå—ï¼Ÿ</em></strong></p>\n<p>å¤±çœ å’Œç„¦è™‘æ˜¯ä¸ªå¥½åŸºå‹ï¼Œå¯èƒ½å¾ˆå¤šäººæƒ³ç€æˆ‘ç™½å¤©å·¥ä½œå¾ˆå¿™åªèƒ½é ç€æ™šä¸Šå»å­¦ä¹ å……ç”µï¼Œè¿™é‡Œæˆ‘å¹¶ä¸æ˜¯ç‰¹åˆ«æ”¯æŒï¼Œå› ä¸ºæˆ‘ä¹Ÿå°è¯•è¿‡æ¯å¤©å­¦ä¹ åˆ°2ç‚¹ï¼Œç™½å¤©å˜å¾—ç‰¹åˆ«ç–²æƒ«ï¼Œä¸€æ®µæ—¶é—´è¿‡åå‘ç°ç„¦è™‘æ›´åŠ ä¸¥é‡äº†ã€‚</p>\n<p>å¯ä»¥è¯•ç€å¯ä»¥æ—©ç‚¹ç¡è§‰ï¼Œç„¶åæ—©æ™¨æ—©ç‚¹èµ·æ¥çœ‹ä¸€äº›ä¹¦å’ŒæŠ€æœ¯æ–‡ç« å†å»ä¸Šç­ï¼Œäº‹å®ä¸Šå……ç”µæ—¶é—´å®é™…ä¸Šç‰¹åˆ«å¤šï¼Œæ¯”å¦‚æƒ³æƒ³å¦‚ä½•æé«˜å·¥ä½œæ•ˆåŠ›åŠ é«˜æ‘¸é±¼æ—¶é—´ç­‰ã€‚</p>\n<p>å…¶å®<strong>ç¨‹åºå‘˜æ˜¯ä¸€ä¸ªä½ åŠªåŠ›äº†ä¸€å®šå°±ä¼šæœ‰å›æŠ¥çš„èŒä¸š</strong>ï¼Œäº‹å®ä¸Šå¾ˆå¤šäººåœ¨æ— æ•°ä¸ªå¯‚å¯å¤œæ™šæ²¡èƒ½æŠŠæŒä½è‡ªå·±å­¦ä¹ çš„å¿ƒã€‚</p>\n<p>æ‰€ä»¥è¿˜æ˜¯è¦ä¸æ–­é ç„¦è™‘å»é€¼è‡ªå·±å­¦ä¹ ï¼Œæˆ‘ä¼šä¸æ–­çš„æ”¶è—å„ç§å¤§ä½¬çš„æ–‡ç« ï¼Œæ¯•ç«Ÿæ”¶è—å°±æ˜¯ç²¾é€šã€‚ä¹Ÿä¼šä¸æ–­çš„é˜…è¯»å„ç§ä¹¦ç±ï¼Œæœ€è¿‘å°±åœ¨çœ‹é™ˆé›·çš„ã€ŠREDIS5æ¶‰åŠä¸æºç åˆ†æã€‹å’Œåˆ†æ`swoole`çš„æºç ï¼Œæœ‰å…´è¶£çš„å¯ä»¥çœ‹çœ‹æˆ‘çš„`swoole`ç³»åˆ—ã€‚</p>\n<p>å¦‚æœçœŸæƒ³è®©è‡ªå·±æˆä¸ºåˆ«äººçš„å£ä¸­çš„å¤§ä½¬ï¼Œä¹¦å’Œä»£ç ä¸€æ ·å°‘ä¸äº†ã€‚</p>\n<p><strong><em>Qï¼šæœ€è¿‘æœ‰æ²¡æœ‰å°è¯•æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼Ÿä¸€èˆ¬é€šè¿‡ä»€ä¹ˆæ–¹å¼å’Œæ¸ é“æå‡è‡ªå·±çš„èƒ½åŠ›ï¼Ÿ</em></strong></p>\n<p>è‡ªå·±ä¸€ç›´éƒ½å†å°è¯•çš„æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼Œ4å¹´ä»¥ä¸Šçš„å¼€å‘è€…éƒ½ä¼šæ˜ç™½ç¼–ç¨‹è¯­è¨€åªæ˜¯ä¸€ç§ä¸šåŠ¡çš„è¡¨è¾¾è½½ä½“ï¼Œè¿™é‡Œè·Ÿäººæµ·èŒ«èŒ«çš„é‚£äº›å¦‚åŒæˆ‘ä¸€æ ·çš„å¹³å‡¡å¼€å‘ä»”è¯´ä¸€å¥ä¸­è‚¯çš„è¯ï¼Œä¸€å®šè¦ç”¨æ–°è¯­è¨€å¤šå†™é¡¹ç›®ï¼Œä¸ç„¶çœŸçš„å¾ˆå®¹æ˜“å¿˜è®°ã€‚</p>\n<p>å­¦æ–°è¯­è¨€çš„æœ€å¥½çš„æ–¹å¼å°±æ˜¯å†™é¡¹ç›®ï¼Œä½†æ˜¯ä¸æ˜¯çå†™ï¼Œå¯ä»¥æ‰¾ä¸ªå…·ä½“çš„åœºæ™¯å»ç”¨æ–°è¯­è¨€æ˜¯å®ç°ï¼Œå¦‚æœåªæ˜¯èµ°ä¸€é CURD ï¼ˆé‚£duckä¸å¿…ï¼‰</p>\n<p>å­¦ä¹ è¯­è¨€çš„è·¯å¾„æˆ‘ä¸€èˆ¬éƒ½æ˜¯ä¼šå»ä¹°å¯¹åº”çš„ä¹¦ç±ï¼Œç„¶åæ”¾åœ¨åºŠå¤´æ•ç€ç¡è§‰ã€‚æ‰€ä»¥å»ºè®®å¤§å®¶ç›´æ¥ä¸Šæ‰‹æ’¸å“ªé‡Œä¸ä¼šå­¦å“ªé‡Œã€‚ç­‰åˆ°å…¥é—¨äº†ï¼Œå†å»æ·±æŒ–é‚£äº›è¯­è¨€ç‰¹æ€§åº•å±‚çš„ä¸€äº›ä¸œè¥¿ã€‚</p>\n<p><strong><em>Qï¼šæœ‰ä»€ä¹ˆä¸ªäººçš„ç‰¹åˆ«çš„å·¥ä½œä¹ æƒ¯ä¹ˆï¼Ÿ</em></strong></p>\n<p>æˆ‘æ˜¯ä¸€ä¸ªåšäº‹æ•ˆç‡ç‰¹åˆ«é«˜çš„äººï¼Œæ‰€ä»¥æˆ‘æ€»æœ‰è‡ªå·±çš„æ—¶é—´å»æŠ˜è…¾ä¸€äº›å·¥å…·å’Œé¡¹ç›®ä¼˜åŒ–ã€ç”šè‡³æ‘¸é±¼ã€‚</p>\n<p>æˆ‘çš„å·¥ä½œä¹ æƒ¯å°±æ˜¯ä¸“æ³¨åšä¸€ä»¶äº‹æƒ…ï¼Œå°±ç®—æ‘¸é±¼ä¹Ÿè¦ä¸“æ³¨çš„æ‘¸é±¼ã€‚å¾ˆå¤šäººå·¥ä½œä¹ æƒ¯å¯èƒ½codingåŠå°æ—¶ã€å¾®ä¿¡ååˆ†é’Ÿï¼Œå…¶å®è¿™ç§ç‰¹åˆ«ä¸å¥½ï¼Œå°¤å…¶åœ¨ä¸æ–­è¢«äº§å“å¤§ä½¬å„ç§ä¼šè®®è½°ç‚¸çš„æƒ…å†µä¸‹ï¼Œæ‰€ä»¥æˆ‘å·¥ä½œåŸºæœ¬å°±æ˜¯ coding å°±è®¤çœŸ codingï¼Œå¤šå‡ºæ¥çš„æ—¶é—´å½“ç„¶å°±æ˜¯æ‘¸é±¼å……ç”µä¸Šï¼Œè¿™å››å¹´æˆ‘åŸºæœ¬æ²¡æœ‰é‡åˆ°è¿‡é¡¹ç›®å»¶æœŸæˆ–è€…é¡¹ç›®å‡ºé—®é¢˜çš„äº‹æƒ…ã€‚</p>\n<p><strong><em>Qï¼šä¸æ€å¦çš„æ•…äº‹ï¼Ÿ</em></strong></p>\n<p>ä¸€å¼€å§‹æ˜¯å…¬å¸è¦åšä¸ªæŠ€æœ¯åˆ†äº«ï¼Œæ¯ä¸ªå­£åº¦çš„æ¯ä¸ªäººéƒ½éœ€è¦åˆ†äº«ä¸¤ä¸ªä¸»é¢˜ï¼Œä½†æ˜¯ç¢äºå†™`ppt`æ’ç‰ˆå¤ªæµªè´¹æ—¶é—´äº†ï¼Œæƒ³ç€å†™ä¸€ä¸ªæŠ€æœ¯æ–‡ç« åˆ†äº«ï¼Œç»å¸¸åœ¨æœ‹å‹åœˆçœ‹åˆ°å„ä½å¤§ä½¬å‘çš„æ€å¦çš„æ–‡ç« ï¼ˆswooleå¤§éƒ¨åˆ†æ–‡ç« éƒ½æ¥æºæ€å¦ï¼‰ï¼Œæ‰€ä»¥å°±è‡ªå·±æ³¨å†Œä¸€ä¸ªè´¦å·åˆ°å‘å¸ƒä¸€ç¯‡ã€Šã€SWOOLEç³»åˆ—ã€‘æµ…è°ˆSWOOLEåç¨‹ç¯‡ã€‹æ–‡ç« ã€‚</p>\n<p>ä½†æ˜¯æ²¡æƒ³åˆ°ä¸€ä¸ªç”¨æ¥å…¬å¸åˆ†äº«çš„æ–‡ç« è¢«`éŸ©å¤©å³°`å’Œ`éƒ­æ–°å`ç»™ç‚¹èµå’Œåˆ†äº«äº†ï¼Œåæ¥ä¹Ÿè¢«swooleçš„å®˜æ–¹å…¬ä¼—å·è½¬è½½äº†ï¼Œç¬é—´æ„Ÿå—äº†ä»€ä¹ˆæ˜¯å¹³å‡¡çš„ç”Ÿæ´»ç»½æ”¾äº†ä¸€ç‚¹å¾®äº®ã€‚å°åˆ°äº†ä¸€äº›ç”œå¤´ååˆå‘å¸ƒäº†å‡ ç¯‡æ–‡ç« ï¼ŒçœŸæ­£çš„æ„Ÿå—äº†ç¤¾åŒºçš„åŠ›é‡å’Œä¸€äº›ä¿¡å¿ƒã€‚è¿™é‡Œå¯¹é‚£äº›ç‚¹èµå’Œæ”¶è—æˆ‘æ–‡ç« çš„è¯´äº†ä¸€å¥ï¼Œä½ ä»¬éƒ½æ˜¯ç å†œå±Šæœ€é“çš„ä»”ï¼Œä¹Ÿç‰¹åˆ«æ„Ÿè°¢æ€å¦ä½œä¸ºä¸€ä¸ªå¹³å°è®©æˆ‘æ„Ÿå—åˆ°äº†è‡ªå·±çš„ä¸€äº›ä¸ä¸å¹³å‡¡ã€‚</p>\n<p><strong><em>Qï¼šå¦‚ä½•çœ‹å¾…å›½å†…ç¤¾åŒºçš„ç¯å¢ƒå’Œæ°›å›´ï¼Ÿ</em></strong></p>\n<p>æˆ‘è§‰å¾—å›½å†…çš„ç¤¾åŒºæœ‰ä¸€ä¸ªå¾ˆä¸å¥½çš„ç°è±¡å°±æ˜¯ä¸€ç¯‡æ–‡ç« å°±ç®—æ¼æ´ç™¾å‡ºä¹Ÿèƒ½è¢«ä¸æ–­çš„å¤åˆ¶åˆ°å„ä¸ªè®ºå›ï¼Œå¯¼è‡´å¤§å®¶æœç´¢ä¸€ä¸ªé—®é¢˜èƒ½æœç´¢å‡ºå„ç§æ— æ•ˆçš„æ–‡ç« ï¼Œè¿˜æ˜¯éœ€è¦å¤§å®¶æœ‰ä¸ªè‡ªæˆ‘åˆ¤æ–­çš„æ„è¯†ï¼Œå°±ç®—å¤åˆ¶ç²˜è´´ä¹Ÿå¸Œæœ›è‡ªå·±çº¿ä¸‹è·‘é€šå’Œå®è·µã€‚</p>\n<p>ä½œä¸ºä¸€ä¸ªå¸¸å¹´çš„ç”¨æœç´¢å¼•æ“å¼€å‘çš„å·¥ç¨‹å¸ˆï¼Œè¿™å‡ å¹´ä¹Ÿæœ‰å¾ˆå¼ºçƒˆçš„æ„Ÿå—åˆ°å›½å†…çš„ç¤¾åŒºçš„é€æ¸çš„æ´»è·ƒå’Œå¤§ä½¬çš„æ¶Œå‡ºï¼Œæˆ‘è®°å¾—ä¹‹å‰å‡ºé—®é¢˜æ€»åœ¨`stackoverflow`ä¸ŠæŸ¥ï¼Œç°åœ¨åŸºæœ¬ä¸Šå¯ä»¥å›½å†…å¾ˆå¤šç¤¾åŒºæ‰¾åˆ°è‡ªå·±æƒ³è¦çš„ç­”æ¡ˆã€‚</p>\n<p><strong>å°ç¼–æœ‰è¯è¯´ï¼š</strong></p>\n<p>æ´ªå…‰å…‰å¾ˆåƒæˆ‘ä»¬ä¸Šå­¦æ—¶ç­é‡Œé‚£ä¸ªæ·˜æ°”çš„ç”·ç”Ÿï¼Œå‡­ç€è‡ªå·±çš„èªæ˜ï¼Œå¹³æ—¶ä¸åŠªåŠ›ä½†æ˜¯è€ƒè¯•å‰æ€»ä¼šçªå‡»å­¦ä¹ ï¼Œç„¶åå°±èƒ½å–å¾—ä¸é”™çš„æˆç»©ã€‚</p>\n<p>ä½†æ˜¯å…¥è¡Œ 4 å¹´åä»–å¥½åƒå‘ç”Ÿäº†ä¸å°çš„å˜åŒ–ï¼Œ25 å²çš„ä»–å´æŠŠâ€œç„¦è™‘â€æŒ‚åœ¨å˜´ä¸Šã€‚</p>\n<p>è¿™ä¸ä»…æ˜¯æ¥è‡ªå·¥ä½œå’Œç”Ÿæ´»çš„å‹åŠ›ï¼Œæ›´å¤šçš„æºäºæ˜¯ä»–å¼€å§‹æ€è€ƒæœªæ¥ï¼Œè§„åˆ’äººç”Ÿäº†ã€‚å› ä¸ºä¸æƒ³å†â€œæ··æ—¥å­â€ï¼Œå› ä¸ºæƒ³è¦åœ¨æŠ€æœ¯é¢†åŸŸæœ‰æ‰€å»ºæ ‘ï¼Œæ‰€ä»¥ä»–å¼€å§‹è®¤çœŸçš„æ€è€ƒè¯¥å¦‚ä½•æ”¹å˜ç°çŠ¶ã€‚</p>\n<p>å¸Œæœ›è¿™ä»½ç„¦è™‘ä¼šåƒå½“åˆæ¯•ä¸šæ—¶çš„å‹åŠ›ä¸€æ ·ï¼Œéƒ½æˆä¸ºä»–çš„åŠ¨åŠ›ã€‚</p>\n<hr>\n <p><strong>æ¬¢è¿æœ‰å…´è¶£å‚ä¸è®¿è°ˆçš„å°ä¼™ä¼´è¸Šè·ƒæŠ¥åï¼Œã€Šæ€å¦æœ‰çº¦ã€‹å°†æŠŠä½ ä¸ç¼–ç¨‹æœ‰å…³çš„æ•…äº‹è®°å½•ä¸‹æ¥ã€‚æŠ¥åé‚®ç®±ï¼šmango@sifou.com</strong></p>\n <p><img src=\"https://segmentfault.com/img/bVbJcHj\" alt=\"segmentfaultå…¬ä¼—å·\" title=\"segmentfaultå…¬ä¼—å·\" /></p>\n</hr>","descriptionType":"html","publishedDate":"Fri, 14 Aug 2020 05:48:19 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/bVbLgRH","linkMd5":"feb087fef9d4181f56dd8589fa8fcc79","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx14/cdn30@2020_3/2020/08/24/23-08-23-291_58228cad1bdea290.webp","destWidth":800,"destHeight":507,"sourceBytes":607936,"destBytes":65920,"author":"èŠ’æœæœ","articleImgCdnMap":{"https://segmentfault.com/img/bVbLgRH":"https://cdn.jsdelivr.net/gh/myreaderx14/cdn30@2020_3/2020/08/24/23-08-23-291_58228cad1bdea290.webp","https://segmentfault.com/img/remote/1460000023622137":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn100@2020_3/2020/08/24/23-08-45-005_b456f90a4d7dc104.webp","https://segmentfault.com/img/bVbJcHj":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn20@2020_2/2020/08/24/23-08-37-345_f113e092cc336adb.webp"},"publishedOrCreatedDate":1598310388567},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"SSL è¯ä¹¦è¿‡æœŸäº‹ä»¶é¢‘å‘ï¼Œåˆ‡å¿Œä¸è¦å› å°å¤±å¤§ï¼","link":"https://segmentfault.com/a/1190000023608432","description":"<p><img src=\"https://segmentfault.com/img/bVbLdLv\" alt=\"clipboard.png\" title=\"clipboard.png\" /></p>\n<p><strong>æŠ€æœ¯ç¼–è¾‘ï¼šå¾ä¹ä¸¨å‘è‡ªï¼šæ€å¦ç¼–è¾‘éƒ¨</strong></p>\n<hr>\n <p>ä¸ä¹…å‰ï¼Œå¾®åšæœ‰äº†ä¸€ä¸ªæŠ€æœ¯åœˆå„¿çš„çƒ­æœã€‚</p>\n <p>åœ¨åŒä¸€æ—¶é—´ï¼Œ<strong>å¤§é‡ç‰¹æ–¯æ‹‰è½¦ä¸»çº·çº·åæ˜  APP å‡ºç°å¤§é¢ç§¯å®•æœºï¼Œæ‰‹æœºé’¥åŒ™æ— æ³•è·å–è½¦è¾†ä¿¡æ¯ï¼Œè¡Œè½¦è¿‡ç¨‹ä¸­æ— æ³•ç‚¹äº®è½¦å†…ä»ªè¡¨ç›˜å’Œä¸­æ§å±åªèƒ½â€œç›²å¼€â€ã€‚</strong></p>\n <p><img src=\"https://segmentfault.com/img/bVbLdLF\" alt=\"clipboard.png\" title=\"clipboard.png\" /></p>\n <p>åœ¨ç´§æ€¥ä¿®å¤ä¹‹åï¼Œç‰¹æ–¯æ‹‰å®˜æ–¹è¡¨ç¤ºåŸå› ç³» APP åŸŸåè¯ä¹¦ï¼ˆSSL è¯ä¹¦ï¼‰è¿‡æœŸï¼Œå¯¼è‡´ APP æ— æ³•è¿æ¥ã€‚è¿™æ ·ä¸€ä¸ªæ¨å´‡æŠ€æœ¯çš„ä¼ä¸šç«Ÿç„¶å‡ºç°è¿™ç§ä½çº§çš„æŠ€æœ¯é—®é¢˜ï¼Œéš¾å…è®©äººå”å˜˜ã€‚</p>\n <p>ä½†å…¶å® SSL è¯ä¹¦è¿‡æœŸäº‹ä»¶ï¼Œæ›¾ç»åœ¨ä¼—å¤šå¤§å‹ä¼ä¸šç”šè‡³å›½å¤–æŸäº›æ”¿åºœæœºæ„ç½‘ç«™å‡å‡ºç°è¿‡ã€‚æ®ã€Šä¼ä¸šæ•°å­—è¯ä¹¦ç®¡ç†å®‰å…¨è°ƒæŸ¥ 2019ã€‹æƒå¨æŠ¥å‘Šç»Ÿè®¡ï¼Œ<strong>74% çš„ç»„ç»‡ç»å†è¿‡åœæœºæˆ–ç”±äºè¯ä¹¦è¿‡æœŸå¯¼è‡´çš„åœæœºï¼Œ æ¯ä¸ªç»„ç»‡çš„å¹³å‡æŸå¤±è¶…è¿‡ 1100 ä¸‡ç¾å…ƒã€‚</strong></p>\n <p>ä¸ºä»€ä¹ˆå¤§å®¶è¿ä¸€ä¸ªç®€å•çš„è¯ä¹¦è®¤è¯éƒ½æä¸å¥½ï¼ŸSSL è¯ä¹¦å¯¹ä¼ä¸šæ¥è¯´åˆ°åº•æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</p>\n <h2>ä¸€ã€ä» HTTP åè®®çš„è‡´å‘½ç¼ºé™·è¯´èµ·</h2>\n <p><img src=\"https://segmentfault.com/img/bVbLdLG\" alt=\"clipboard.png\" title=\"clipboard.png\" /></p>\n <p>HTTP åè®®æœ‰ä¸€ä¸ªè‡´å‘½ç¼ºé™·ï¼Œå³è¿™æ˜¯ä¸€ç§æ²¡æœ‰åŠ å¯†çš„æ˜æ–‡ä¼ è¾“åè®®ï¼Œä¸èƒ½å®‰å…¨çš„ä¼ è¾“æ•æ„Ÿæ•°æ®ä¿¡æ¯ã€‚è€Œå‘æ˜ SSL åè®®çš„åˆè¡·ï¼Œå°±æ˜¯ä¸ºäº†è§£å†³ HTTP çš„è¿™ä¸€é—®é¢˜ã€‚å’Œ SSL ç»å¸¸ä¸€èµ·å‡ºç°çš„ TLSï¼Œæ˜¯å°† SSL åè®®æ ‡å‡†åŒ–ä¹‹åçš„åç§°ï¼Œå› æ­¤ç»å¸¸æœ‰äººå°†å…¶å¹¶åˆ—ç§°ä¸º SSL/TLSã€‚</p>\n <p>SSL/TLS è¯ä¹¦ä½œä¸ºæ•°æ®å®‰å…¨å’Œéšç§ä¿æŠ¤çš„å®‰å…¨æ ‡ç­¾ï¼Œåœ¨ç½‘ç»œä¸­è¢«å¤§é‡ä½¿ç”¨ï¼Œä½†è¿‘å‡ å¹´æ¥ï¼Œäº’è”ç½‘å®‰å…¨äº‹ä»¶ä»ç„¶é¢‘å‘ï¼Œç©¶å…¶åŸå› ï¼Œ<strong>ä¸€æ˜¯å› ä¸ºä¼ä¸šå®‰å…¨æ„è¯†ç–å¿½å¯¼è‡´çš„è¯ä¹¦è¿‡æœŸï¼Œå¦ä¸€ä¸ªåŸå› æ˜¯æ­¤å‰è¯ä¹¦çš„å¯¿å‘½è¿‡é•¿ï¼Œå¤§éƒ¨åˆ†ä¼ä¸šä¸ä¼šé…åˆè¿›è¡Œé¢‘ç¹çš„è¯ä¹¦æ›´æ–°ã€‚</strong></p>\n <p>ä¸ºäº†é¿å…è¿™ä¸€é—®é¢˜ï¼Œä» 2020 å¹´ 9 æœˆ 1 æ—¥å¼€å§‹ï¼Œè‹¹æœã€è°·æ­Œã€Mozilla çš„æµè§ˆå™¨å’Œè®¾å¤‡å°†å¯¹æœ‰æ•ˆæœŸè¶…è¿‡ 398 å¤©çš„æ–° TLS è¯ä¹¦æ˜¾ç¤ºé”™è¯¯ã€‚</p>\n <p><img src=\"https://segmentfault.com/img/bVbLdLH\" alt=\"clipboard.png\" title=\"clipboard.png\" /></p>\n <p>è¦çŸ¥é“æœ€æ—©çš„è¯ä¹¦å¯¿å‘½æ˜¯ 8 å¹´ï¼Œåæ¥æ…¢æ…¢ç¼©çŸ­ä¸º5å¹´ã€3 å¹´ã€2 å¹´ï¼Œè¿™æ¬¡ç¼©çŸ­ä¸ºä¸€å¹´å·¦å³ï¼Œæ— ç–‘ä¸ºä¼ä¸šåŸæœ¬å°±ç¹çå›°éš¾çš„è¯ä¹¦ç®¡ç†å†æ¬¡å¢åŠ äº†éš¾åº¦ã€‚</p>\n <p>é‚£ä¹ˆå®‰è£… SSL/TLS è¯ä¹¦çœŸçš„æœ‰å¿…è¦ä¹ˆï¼Ÿä¸å®‰è£…åˆä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p>\n <h2>äºŒã€ä¼ä¸šå¿…é¡»å®‰è£… SSL/TLS è¯ä¹¦ä¹ˆï¼Ÿ</h2>\n <p><img src=\"https://segmentfault.com/img/bVbLdLI\" alt=\"clipboard.png\" title=\"clipboard.png\" /></p>\n <p>æ¯«æ— ç–‘é—®ï¼Œè¯ä¹¦æœ‰æ•ˆæœŸæœŸç¼©çŸ­ä¼šå¢åŠ è¯ä¹¦ä½¿ç”¨è€…æ›´æ–°è¯ä¹¦çš„é¢‘ç‡ã€‚ä¼ä¸šéœ€è¦æ¯å¹´è¿›è¡Œä¸€æ¬¡è¯ä¹¦ç”³è¯·ï¼Œè€Œè¯ä¹¦ç”³è¯·ä¸€èˆ¬è¦èµ°å•†åŠ¡åˆåŒã€ç»è¿‡å±‚å±‚å®¡æ ¸ã€‚è¿‡ç¨‹ç¹çä¸”å‘¨æœŸé•¿ï¼Œè‹¥æ˜¯ç–å¿½å¿˜è®°æ›´æ–°ï¼Œè¿˜ä¼šå¯¼è‡´è¯ä¹¦è¿‡æœŸï¼Œä»è€Œä¸ºä¼ä¸šå¸¦æ¥åˆ©ç›Šå’Œå“ç‰Œçš„åŒé‡æŸå¤±ã€‚</p>\n <p>ä½†è¿™ä¸ªè¯ä¹¦ä¸è£…å¯èƒ½è¿˜çœŸä¸è¡Œã€‚</p>\n <p>é¦–å…ˆ<strong>åœ¨å›½å®¶å±‚é¢ï¼Œä¸€ç›´æœ‰ç›¸åº”çš„æ³•å¾‹æ³•è§„è¦æ±‚è¿›è¡Œç›¸åº”çš„æ•°æ®åŠ å¯†ã€‚</strong>åœ¨ä»Šå¹´æ–°ä¿®è®¢çš„ã€Šä¿¡æ¯å®‰å…¨æŠ€æœ¯ç½‘ç»œå®‰å…¨ç­‰çº§ä¿æŠ¤åŸºæœ¬è¦æ±‚ã€‹ç­‰ç³»åˆ—å›½å®¶æ ‡å‡†ä¸­ï¼Œæ›´æ˜¯æ˜ç¡®äº†ç½‘ç»œå®‰å…¨ä½“ç³»æ‰¿å»ºè€…ã€ç½‘ç»œè¿è¥è€…ç­‰å„æ–¹å¯¹äºç½‘ç»œå®‰å…¨çš„è´£ä»»å’Œä¹‰åŠ¡ã€‚</p>\n <p>æ­¤å¤–ï¼Œå¯¹äºç½‘ç«™è‡ªèº«æ¥è¯´ï¼Œ<strong>å®‰è£…äº†å®‰å…¨è¯ä¹¦åå¯ä»¥æœ‰æ•ˆçš„é˜²æ­¢é»‘å®¢çš„çªƒå–å’Œç¯¡æ”¹ï¼Œé™ä½ä¼ä¸šçš„ä¸šåŠ¡é£é™©ã€‚</strong>ç½‘ç«™åœ¨å®‰è£…ç›¸åº”çš„è¯ä¹¦åï¼Œåœ¨æµè§ˆå™¨åœ°å€æ ä¼šæ˜¾ç¤ºä¸€ä¸ªã€Œå®‰å…¨é”ã€ï¼Œå‘Šè¯‰ç”¨æˆ·è¿™ä¸ªç½‘ç«™æ˜¯ç»è¿‡è®¤è¯çš„ã€‚</p>\n <p><img src=\"https://segmentfault.com/img/bVbLdLJ\" alt=\"clipboard.png\" title=\"clipboard.png\" /></p>\n <p>ä¸€äº›é«˜çº§è¯ä¹¦è¿˜æ”¯æŒåœ¨åœ°å€æ æ˜¾ç¤ºå…¬å¸çš„åç§°ï¼Œè®©è®¿å®¢æ˜ç¡®çŸ¥é“è¿™æ˜¯ä¼ä¸šå®˜ç½‘ï¼Œå¯ä»¥æ”¾å¿ƒè®¿é—®ã€‚å¹¶ä¸”ï¼Œè¿›è¡Œ SSL/TLS è¯ä¹¦è®¤è¯ï¼Œå¯¹äºä¼ä¸šçš„ SEO ä¼˜åŒ–ä¹Ÿæ˜¯æœ‰å¸®åŠ©çš„ã€‚</p>\n <h2>ä¸‰ã€ä¼ä¸šçš„ç—›ç‚¹è¦å¦‚ä½•è§£å†³ï¼Ÿ</h2>\n <p><img src=\"https://segmentfault.com/img/bVbLdLK\" alt=\"clipboard.png\" title=\"clipboard.png\" /></p>\n <p>æ—¢ç„¶å®‰è£… SSL/TLS è¯ä¹¦åŠ¿åœ¨å¿…è¡Œï¼Œå¹¶ä¸”ä¹Ÿå¯¹ä¼ä¸šæœ‰ç€å®å®åœ¨åœ¨çš„å¥½å¤„ï¼Œä¸ºä»€ä¹ˆä¼ä¸šè¿˜è¦è¿™ä¹ˆå‘æ„ï¼Ÿå…·ä½“æœ‰å“ªäº›ç—›ç‚¹éœ€è¦è§£å†³ï¼Ÿ</p>\n <p>é¦–å…ˆï¼Œ<strong>è¯ä¹¦çš„ç®¡ç†å°±æ˜¯ä¸€ä»¶éº»çƒ¦äº‹ï¼Œä»ç­¾å‘åˆ°ç»­ç­¾ã€æ›¿æ¢å’ŒåŠé”€éƒ½æœ‰ç€ç¹ççš„è¿‡ç¨‹ï¼›å…¶æ¬¡ï¼Œè¯ä¹¦çš„æ•°é‡ä¸ç§ç±»å¤šç§å¤šæ ·</strong>ï¼Œä¸ªäººèº«ä»½è¯ä¹¦ã€ä¼ä¸šæˆ–æœºæ„èº«ä»½è¯ä¹¦ã€æ”¯ä»˜ç½‘å…³è¯ä¹¦ã€æœåŠ¡å™¨è¯ä¹¦ã€å®‰å…¨ç”µå­é‚®ä»¶è¯ä¹¦ã€ä¸ªäººä»£ç ç­¾åè¯ä¹¦...å¾ˆå¤šä¼ä¸šå‹æ ¹å°±æä¸æ¸…è‡ªå·±éœ€è¦å®‰è£…å“ªäº›ã€éœ€è¦å®‰è£…å¤šå°‘ã€‚</p>\n <p>æ­¤æ¬¡éšç€è¯ä¹¦å¯¿å‘½çš„è¿›ä¸€æ­¥ç¼©çŸ­ï¼Œæ›´æ˜¯å¢åŠ äº†ä¼ä¸šè¯ä¹¦ç®¡ç†çš„éš¾åº¦ã€‚ä½†å…¶å®ä¼ä¸šçš„å®‰å…¨è¯ä¹¦ç®¡ç†æ˜¯æœ‰æ·å¾„çš„ï¼Œç›®å‰å¸‚é¢ä¸Šæœ€ä¸“ä¸šçš„è¯ä¹¦è‡ªåŠ¨åŒ–ç®¡ç†å¹³å°ï¼Œå·²ç»å¯ä»¥æä¾›<strong>è‡ªåŠ¨åŒ–äº¤ä»˜</strong>çš„ç›¸å…³åŠŸèƒ½ï¼Œæ¯”å¦‚ï¼š</p>\n <ul>\n  <li>å¤šå¹´æœŸè¯ä¹¦æœåŠ¡</li>\n  <li>å¿«é€Ÿè‡ªåŠ¨éªŒè¯</li>\n  <li>é›†æˆ ACME åè®®éƒ¨ç½²</li>\n  <li>ä¼ä¸šç»„ç»‡ä¿¡æ¯é¢„å®¡æ ¸</li>\n  <li>...</li>\n </ul>\n <h2>å››ã€ä¸šå†…é¢†å…ˆçš„è‡ªåŠ¨åŒ–å¹³å°æœ‰å“ªäº›èƒ½åŠ›ï¼Ÿ</h2>\n <p><img src=\"https://segmentfault.com/img/bVbLdLP\" alt=\"clipboard.png\" title=\"clipboard.png\" /></p>\n <p>äºšæ´²è¯šä¿¡æ˜¯äºšæ•°ä¿¡æ¯ç§‘æŠ€ï¼ˆä¸Šæµ·ï¼‰æœ‰é™å…¬å¸åº”ç”¨äºä¿¡æ¯å®‰å…¨é¢†åŸŸçš„å“ç‰Œï¼Œä¸“ä¸šä¸ºå„è¡Œä¸šæä¾›å›½é™…çŸ¥åå“ç‰Œæ•°å­—è¯ä¹¦åŠç½‘ç»œä¿¡æ¯å®‰å…¨ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚</p>\n <p>æ ¹æ® NetCraft æ•°æ®æ˜¾ç¤ºï¼Œ<strong>äºšæ´²è¯šä¿¡æ——ä¸‹çš„ TrustAsia SSL è¯ä¹¦åœ¨å›½å†…å“ç‰Œè¯ä¹¦çš„å¸‚åœºå æœ‰ç‡ä¸ºç¬¬ä¸€ã€‚</strong>ç›®å‰å…¶å®¢æˆ·è¦†ç›–ç”µå­å•†åŠ¡ ã€äº’è”ç½‘é‡‘èã€é“¶è¡ŒåŠæ”¿åºœæœºæ„ã€ä¿é™©è¯åˆ¸ã€åŒ»ç–—æœºæ„ã€ç³»ç»Ÿä¸è½¯ä»¶å¼€å‘å•†ç­‰å„ä¸ªé¢†åŸŸã€‚å…±ç”³è¯· 30 ä½™é¡¹è½¯è‘—ï¼Œ4 é¡¹ä¸“åˆ©ç­‰æŠ€æœ¯æˆæœã€‚</p>\n <p>æˆ‘ä»¬ä»¥ CertCloud ä¸ºä¾‹ï¼Œæ¥çœ‹çœ‹è¯ä¹¦è‡ªåŠ¨åŒ–ç®¡ç†å¹³å°å…·ä½“å¯ä»¥æä¾›å“ªäº›æœåŠ¡äºèƒ½åŠ›ï¼š</p>\n <p><img src=\"https://segmentfault.com/img/bVbLdLW\" alt=\"clipboard.png\" title=\"clipboard.png\" /></p>\n <h4>1. å¤šå¹´æœŸè¯ä¹¦è‡ªåŠ¨åŒ–äº¤ä»˜</h4>\n <p>è¿™é¡¹åŠŸèƒ½åœ¨æ–°æ”¿ç­–çš„å®æ–½åæ˜¾å¾—æ›´ä¸ºå®ç”¨ã€‚å€ŸåŠ© CertCloud æœåŠ¡ï¼Œæ— éœ€ä¼ä¸šæ‰‹åŠ¨æ“ä½œï¼Œå¯ä»¥è‡ªåŠ¨å»¶é•¿è¯ä¹¦æœ‰æ•ˆæœŸï¼Œé¿å…å› é—å¿˜è¯ä¹¦åˆ°æœŸæ—¶é—´è€ŒæœªåŠæ—¶æ›´æ–°è¯ä¹¦ã€‚</p>\n <h4>2. ç®€åŒ–ã€è‡ªåŠ¨åŒ–ç®¡ç†è¯ä¹¦ç”Ÿå‘½å‘¨æœŸ</h4>\n <p>å‰é¢æˆ‘ä»¬æåˆ°ï¼Œä¼ä¸šå®‰å…¨è¯ä¹¦çš„ç®¡ç†å…¶å®æ˜¯ä¸€ä¸ªéå¸¸ç¹ççš„è¿‡ç¨‹ï¼ŒCertCloud å¯ä»¥å¸®åŠ©ç®€åŒ–ã€è‡ªåŠ¨åŒ–ç®¡ç†è¯ä¹¦ç”Ÿå‘½å‘¨æœŸçš„æ¯ä¸€é˜¶æ®µï¼ˆä»ç­¾å‘åˆ°ç»­ç­¾ã€æ›¿æ¢å’ŒåŠé”€ï¼‰ï¼Œå¹¶ä¸”è¿˜å¯ä»¥å¸®åŠ©ä¼ä¸šé€šè¿‡ä¿¡æ¯é¢„å®¡æ ¸ï¼Œå¤§å¹…ç¼©çŸ­ OV/EV è¯ä¹¦çš„ç­¾å‘å‘¨æœŸï¼Œå¿«é€Ÿè·å– OV/EV è¯ä¹¦ã€‚</p>\n <h4>3. è‰¯å¥½çš„é€‚é…æ€§</h4>\n <p>å¾ˆå¤šä¼ä¸šéœ€è¦éƒ¨ç½²å¾ˆå¤šä¸åŒçš„ç¯å¢ƒï¼Œè€ŒCertCloud å¯ä»¥é€‚é…å¤šç±»éƒ¨ç½²ç¯å¢ƒï¼Œæ”¯æŒACME ã€å‘½ä»¤è¡Œ ã€å„å¤§äº‘æœåŠ¡ï¼ˆ é˜¿é‡Œã€è…¾è®¯ã€åä¸ºç­‰ï¼‰ã€ä¸»æµ WEB SERVERSï¼ˆNginx/Apache/IIS ç­‰ï¼‰ã€ç½‘å…³è®¾å¤‡ï¼ˆF5/SSLVPN ç­‰ï¼‰ï¼Œä»¥åŠ OPENAPIï¼Œä¸€ç«™å¼çš„å¸®åŠ©ä¼ä¸šè§£å†³å®‰å…¨è¯ä¹¦çš„é—®é¢˜ã€‚</p>\n <h4>4. è‡ªå®šä¹‰ç§é’¥è½®æ¢å‘¨æœŸ</h4>\n <p>å¾ˆå¤šæ—¶å€™çš„å®‰å…¨é£é™©ï¼Œæ˜¯å› ä¸ºç§é’¥ä¸è¿›è¡Œå®šæœŸæ›´æ–°å¯¼è‡´çš„ã€‚CertCloud å¯ä»¥æä¾›å®šæœŸæ›´æ–°ç§é’¥çš„åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ›´æ¢å‘¨æœŸï¼Œä»è€Œæ»¡è¶³ä¸åŒå®‰å…¨éœ€æ±‚ã€‚</p>\n <h4>5. å¯†ç æ•æ·æ€§</h4>\n <p>è‡ªåŠ¨åŒ–å·¥å…·å¿«é€Ÿåº”å¯¹å®‰å…¨é—®é¢˜ï¼Œå€ŸåŠ©ACMEã€OPENAPIã€å‘½ä»¤è¡Œå·¥å…·å¿«é€Ÿç­¾å‘è¯ä¹¦è¯ä¹¦æ›´æ–°ç§é’¥ã€‚</p>\n <h4>6. å®‰å…¨è¯„çº§ç®¡ç† + ç›‘æ§å‘Šè­¦</h4>\n <p>æŒç»­çš„ç›‘æ§è¯ä¹¦çŠ¶æ€çš„åŠŸèƒ½ï¼Œç²¾ç¡®å®šä½é—®é¢˜ï¼Œå¼‚å¸¸æƒ…å†µå®æ—¶å‘Šè­¦ï¼Œé¿å…äººå·¥ç›‘æ§ç–å¿½å¸¦æ¥çš„å®‰å…¨é£é™©ã€‚</p>\n <h4>7. è¯ä¹¦è¯¦ç»†å®‰å…¨æŠ¥å‘Š</h4>\n <p>ä¸€é”®æ‰«æè¯ä¹¦çš„æ¼æ´å’Œå¼±é…ç½®é¿å…äº§ç”Ÿå®‰å…¨é—®é¢˜ï¼ˆå†…ç½® MySSL.com æä¾›æ”¯æŒï¼‰ï¼Œå¯ä»¥åœ¨ä»»ä½•æ—¶åˆ»æŸ¥çœ‹ç½‘ç»œå®‰å…¨çŠ¶æ€çš„åˆ†æå’ŒæŠ¥å‘Šã€‚</p>\n <h4>8. å®‰å…¨ç­–ç•¥</h4>\n <p>é€šè¿‡å¤šå› ç´ èº«ä»½éªŒè¯å’Œè¯ä¹¦è¯·æ±‚çš„ IP åœ°å€é™åˆ¶ä»¥åŠé¡¹ç›®éš”ç¦»æ¥æé«˜å®‰å…¨æ€§ï¼Œè§„é¿é»‘å®¢æ”»å‡»çš„é£é™©ã€‚</p>\n <hr>\n  <p>è¿™äº›åŠŸèƒ½éƒ½æ˜¯ä¼ä¸šåœ¨è¯ä¹¦ç®¡ç†ä¸­çš„ç—›ç‚¹ä¸éš¾ç‚¹ï¼Œå¦‚æœå¯ä»¥å€ŸåŠ©ä¸“ä¸šçš„å¹³å°å®ç°è‡ªåŠ¨åŒ–ç®¡ç†ï¼Œå°†å¤§å¤§é™ä½ä¼ä¸šçš„ç®¡ç†æˆæœ¬ä¸é£é™©ã€‚</p>\n  <p><strong>ä»æ›´å¤§çš„è§’åº¦æ¥çœ‹ï¼Œç°åœ¨å¯èƒ½æ˜¯ä¼ä¸šå¼€å§‹è€ƒè™‘è‡ªåŠ¨åŒ–è¯ä¹¦ç®¡ç†çš„å¥½æ—¶æœº</strong>ï¼Œå°¤å…¶æ˜¯å¯¹äºç®¡ç†æ•°åä¸ªå…¬å…±å¯ä¿¡ç½‘ç«™è¯ä¹¦çš„å¤§å‹ç»„ç»‡ã€‚</p>\n  <p>éšç€æŠ€æœ¯çš„å‘å±•ä¸å®Œå–„ï¼Œè‡ªåŠ¨åŒ–è¿ç»´å·²ç»æˆä¸ºäº†å‘å±•è¶‹åŠ¿ï¼Œç‰¹åˆ«æ˜¯<strong>æ¶‰åŠåˆ°ä¸šåŠ¡å®‰å…¨ä»¥åŠä¼ä¸šåˆ©ç›Šçš„æ—¶å€™ï¼Œä»‹å…¥ä¸“ä¸šçš„å¹³å°æˆ–è€…å·¥å…·æ— ç–‘æ˜¯é™æœ¬å¢æ•ˆçš„å¥½ç­–ç•¥ã€‚</strong></p>\n  <hr>\n   <p><img src=\"https://segmentfault.com/img/bVbLdL2\" alt=\"clipboard.png\" title=\"clipboard.png\" /></p>\n   <p>äºšæ´²è¯šä¿¡ä»æˆç«‹ä»¥æ¥ï¼Œä¸€ç›´è‡´åŠ›äº SSL è¯ä¹¦åœ¨ä¸­å›½çš„åº”ç”¨å’Œæ™®åŠã€‚äºšæ´²è¯šä¿¡ CEO ç¿Ÿæ–°å…ƒä½œä¸ºä¸šå†…æœ€æ—©çš„æŠ€æœ¯ä¸“å®¶ä¹‹ä¸€ï¼Œ<strong>æ›¾ä¸»å¯¼äº†äº‘ç«¯è‡ªåŠ¨åŒ– SSL è¯ä¹¦æ¨¡å¼çš„å®ç°ï¼Œä½¿ SSL è¯ä¹¦ä»ä¼ ç»Ÿçš„äº¤ä»˜æ–¹å¼é©æ–°åˆ°äº‘ç«¯ä¸€é”®å¼€å¯ HTTPS çš„ç²¾ç®€æ¨¡å¼</strong>ï¼Œä¸ºä¸­å›½ç«™ç‚¹åº”ç”¨ HTTPS å®‰å…¨åŠ å¯†ä¼ è¾“çš„æ™®åŠä¹Ÿåšå‡ºäº†å¹¿å—ä¸šç•Œè®¤å¯çš„è´¡çŒ®ã€‚</p>\n   <p>åœ¨æ•°æ®å³èµ„äº§çš„å¹´ä»£ï¼Œæ²¡æœ‰ä»€ä¹ˆæ¯”æ•°æ®å®‰å…¨æ›´ä¸ºé‡è¦ã€‚</p>\n   <p>å¼€æ”¾å’Œä¿¡ä»»çš„äº’è”ç½‘æ˜¯å…¨çƒæ€§çš„ã€ç›¸äº’åˆä½œçš„ç½‘ç»œä¸–ç•Œï¼Œå…¶åŸºç¡€æ˜¯ä¿¡ä»»æœºåˆ¶ã€‚å°¤å…¶åœ¨æ–°çš„å›½é™…å½¢åŠ¿å’Œå›½å†…è¿›ä¸€æ­¥çš„è§„èŒƒè¦æ±‚ä¸‹ï¼Œä¼ä¸šæ›´åŠ éœ€è¦ç¡®ä¿ç½‘ç»œå®‰å…¨ã€æ•°æ®éšç§å®‰å…¨ï¼Œè€Œäºšæ´²è¯šä¿¡ä¹Ÿåœ¨è‡´åŠ›äºè®©è¿™ä¸€ã€Œè€å¤§éš¾ã€çš„é—®é¢˜ï¼Œå˜å¾—æ›´åŠ ç®€å•ã€ä¾¿åˆ©ã€‚</p>\n   <p>-å®Œ-</p>\n   <p><img src=\"https://segmentfault.com/img/bVbKULG\" alt=\"clipboard.png\" title=\"clipboard.png\" /></p>\n  </hr>\n </hr>\n</hr>","descriptionType":"html","publishedDate":"Thu, 13 Aug 2020 07:16:20 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/bVbLdLv","linkMd5":"749b88d16e8263f6e6691f06881f8209","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn69@2020_2/2020/08/24/23-08-22-589_061a58f778cd47e5.webp","destWidth":800,"destHeight":300,"sourceBytes":101996,"destBytes":7834,"author":"å¾ä¹","articleImgCdnMap":{"https://segmentfault.com/img/bVbLdLv":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn69@2020_2/2020/08/24/23-08-22-589_061a58f778cd47e5.webp","https://segmentfault.com/img/bVbLdLF":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn22@2020_1/2020/08/24/23-08-31-096_8bc295045278e761.webp","https://segmentfault.com/img/bVbLdLG":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn18@2020_2/2020/08/24/23-08-31-035_63b0ce2dc1f9a19f.webp","https://segmentfault.com/img/bVbLdLH":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn30@2020_3/2020/08/24/23-08-32-395_1f1e125dfeab6f55.webp","https://segmentfault.com/img/bVbLdLI":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn26@2020_2/2020/08/24/23-08-31-464_32e3bd917b7c4cb4.webp","https://segmentfault.com/img/bVbLdLJ":"https://cdn.jsdelivr.net/gh/myreaderx/cdn38@2020_1/2020/08/24/23-08-33-099_547588ad0b88b0f6.webp","https://segmentfault.com/img/bVbLdLK":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn34@2020_1/2020/08/24/23-08-33-617_a294f8a47711264c.webp","https://segmentfault.com/img/bVbLdLP":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn50@2020_6/2020/08/24/23-08-33-234_a531250d12d5cd21.webp","https://segmentfault.com/img/bVbLdLW":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn42@2020_2/2020/08/24/23-08-32-865_bc2956f96c8c82ca.webp","https://segmentfault.com/img/bVbLdL2":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn13@2020_3/2020/08/24/23-08-31-249_cae8c8909f921d73.webp","https://segmentfault.com/img/bVbKULG":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn27@2020_5/2020/08/24/23-08-36-689_6b82b381e1690545.webp"},"publishedOrCreatedDate":1598310388570},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"â€œæ—¢ç”Ÿ ExecutorService, ä½•ç”Ÿ CompletionServiceï¼Ÿâ€","link":"https://segmentfault.com/a/1190000023587881","description":"<p><img src=\"https://segmentfault.com/img/bVbK8rH\" alt=\"\" title=\"\" /></p>\n<h2>å‰è¨€</h2>\n<p>åœ¨ <a href=\"https://dayarch.top/p/why-we-need-to-use-threadpool.html\" rel=\"nofollow noreferrer\">æˆ‘ä¼šæ‰‹åŠ¨åˆ›å»ºçº¿ç¨‹ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨çº¿ç¨‹æ± ?</a> ä¸­è¯¦ç»†çš„ä»‹ç»äº† ExecutorServiceï¼Œå¯ä»¥å°†æ•´å—ä»»åŠ¡æ‹†åˆ†åšç®€å•çš„å¹¶è¡Œå¤„ç†ï¼›</p>\n<p>åœ¨ <a href=\"https://dayarch.top/p/java-future-and-callable.html\" rel=\"nofollow noreferrer\">ä¸ä¼šç”¨Java Futureï¼Œæˆ‘æ€€ç–‘ä½ æ³¡èŒ¶æ²¡æˆ‘å¿«</a> ä¸­åˆè¯¦ç»†çš„ä»‹ç»äº† Future çš„ä½¿ç”¨ï¼Œå¡«è¡¥äº† Runnable ä¸èƒ½è·å–çº¿ç¨‹æ‰§è¡Œç»“æœçš„ç©ºç¼º</p>\n<p>å°†äºŒè€…ç»“åˆèµ·æ¥ä½¿ç”¨çœ‹ä¼¼è¦ä¸€æ‹›åƒå¤©ä¸‹äº†ï¼ˆJavaæœ‰å¹¶å‘ï¼Œå¹¶å‘ä¹‹å¤§ï¼Œä¸€å£åƒä¸ä¸‹ï¼‰, but ï½ï½ æ˜¯æˆ‘å¤ªå¤©çœŸ</p>\n<p><img src=\"https://segmentfault.com/img/bVbK8rI\" alt=\"\" title=\"\" /></p>\n<h2>ExecutorService VS CompletionService</h2>\n<p>å‡è®¾æˆ‘ä»¬æœ‰ 4 ä¸ªä»»åŠ¡(A, B, C, D)ç”¨æ¥æ‰§è¡Œå¤æ‚çš„è®¡ç®—ï¼Œæ¯ä¸ªä»»åŠ¡çš„æ‰§è¡Œæ—¶é—´éšç€è¾“å…¥å‚æ•°çš„ä¸åŒè€Œä¸åŒï¼Œå¦‚æœå°†ä»»åŠ¡æäº¤åˆ° ExecutorServiceï¼Œ ç›¸ä¿¡ä½ å·²ç»å¯ä»¥â€œä¿¡æ‰‹æ‹ˆæ¥â€</p>\n<pre><code class=\"java\">ExecutorService executorService = Executors.newFixedThreadPool(4);\nList&lt;Future&gt; futures = new ArrayList&lt;Future&lt;Integer&gt;&gt;();\nfutures.add(executorService.submit(A));\nfutures.add(executorService.submit(B));\nfutures.add(executorService.submit(C));\nfutures.add(executorService.submit(D));\n\n// éå† Future listï¼Œé€šè¿‡ get() æ–¹æ³•è·å–æ¯ä¸ª future ç»“æœ\nfor (Future future:futures) {\n    Integer result = future.get();\n    // å…¶ä»–ä¸šåŠ¡é€»è¾‘\n}</code></pre>\n<p>å…ˆç›´å…¥ä¸»é¢˜ï¼Œç”¨ CompletionService å®ç°åŒæ ·çš„åœºæ™¯</p>\n<pre><code class=\"java\">ExecutorService executorService = Executors.newFixedThreadPool(4);\n\n// ExecutorCompletionService æ˜¯ CompletionService å”¯ä¸€å®ç°ç±»\nCompletionService executorCompletionService= new ExecutorCompletionService&lt;&gt;(executorService );\n\nList&lt;Future&gt; futures = new ArrayList&lt;Future&lt;Integer&gt;&gt;();\nfutures.add(executorCompletionService.submit(A));\nfutures.add(executorCompletionService.submit(B));\nfutures.add(executorCompletionService.submit(C));\nfutures.add(executorCompletionService.submit(D));\n\n// éå† Future listï¼Œé€šè¿‡ get() æ–¹æ³•è·å–æ¯ä¸ª future ç»“æœ\nfor (int i=0; i&lt;futures.size(); i++) {\n    Integer result = executorCompletionService.take().get();\n    // å…¶ä»–ä¸šåŠ¡é€»è¾‘\n}</code></pre>\n<p>ä¸¤ç§æ–¹å¼åœ¨ä»£ç å®ç°ä¸Šå‡ ä¹ä¸€æ¯›ä¸€æ ·ï¼Œæˆ‘ä»¬æ›¾ç»è¯´è¿‡ JDK ä¸­ä¸ä¼šé‡å¤é€ è½®å­ï¼Œå¦‚æœè¦é€ ä¸€ä¸ªæ–°è½®å­ï¼Œå¿…å®šæ˜¯åŸæœ‰çš„è½®å­åœ¨æŸäº›åœºæ™¯çš„ä½¿ç”¨ä¸Šæœ‰è‡´å‘½ç¼ºé™·</p>\n<p><img src=\"https://segmentfault.com/img/bVbK8rJ\" alt=\"\" title=\"\" /></p>\n<p>æ—¢ç„¶æ–°è½®å­å‡ºæ¥äº†ï¼ŒäºŒè€…åˆ°åº•æœ‰å•¥ä¸åŒå‘¢ï¼Ÿ åœ¨ <a href=\"https://dayarch.top/p/java8-completablefuture-tutorial.html\" rel=\"nofollow noreferrer\">æå®š CompletableFutureï¼Œå¹¶å‘å¼‚æ­¥ç¼–ç¨‹å’Œç¼–å†™ä¸²è¡Œç¨‹åºè¿˜æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a> æ–‡ä¸­ï¼Œæˆ‘ä»¬æåˆ°äº† <code>Future get()</code> æ–¹æ³•çš„è‡´å‘½ç¼ºé™·:</p>\n<blockquote>\n å¦‚æœ Future ç»“æœæ²¡æœ‰å®Œæˆï¼Œè°ƒç”¨ get() æ–¹æ³•ï¼Œç¨‹åºä¼š\n <strong>é˜»å¡</strong>åœ¨é‚£é‡Œï¼Œç›´è‡³è·å–è¿”å›ç»“æœ\n</blockquote>\n<p>å…ˆæ¥çœ‹ç¬¬ä¸€ç§å®ç°æ–¹å¼ï¼Œå‡è®¾ä»»åŠ¡ A ç”±äºå‚æ•°åŸå› ï¼Œæ‰§è¡Œæ—¶é—´ç›¸å¯¹ä»»åŠ¡ B,C,D éƒ½è¦é•¿å¾ˆå¤šï¼Œä½†æ˜¯æŒ‰ç…§ç¨‹åºçš„æ‰§è¡Œé¡ºåºï¼Œç¨‹åºåœ¨ get() ä»»åŠ¡ A çš„æ‰§è¡Œç»“æœä¼šé˜»å¡åœ¨é‚£é‡Œï¼Œå¯¼è‡´ä»»åŠ¡ B,C,D çš„åç»­ä»»åŠ¡æ²¡åŠæ³•æ‰§è¡Œã€‚åˆå› ä¸ºæ¯ä¸ªä»»åŠ¡æ‰§è¡Œæ—¶é—´æ˜¯ä¸å›ºå®šçš„ï¼Œ<strong>æ‰€ä»¥æ— è®ºæ€æ ·è°ƒæ•´å°†ä»»åŠ¡æ”¾åˆ° List çš„é¡ºåºï¼Œéƒ½ä¸åˆé€‚ï¼Œè¿™å°±æ˜¯è‡´å‘½å¼Šç«¯</strong></p>\n<p>æ–°è½®å­è‡ªç„¶è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒçš„è®¾è®¡ç†å¿µå°±æ˜¯å“ªä¸ªä»»åŠ¡å…ˆæ‰§è¡Œå®Œæˆï¼Œget() æ–¹æ³•å°±ä¼šè·å–åˆ°ç›¸åº”çš„ä»»åŠ¡ç»“æœï¼Œè¿™ä¹ˆåšçš„å¥½å¤„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ¥çœ‹ä¸ªå›¾ä½ å°±ç¬é—´ç†è§£äº†</p>\n<p><img src=\"https://segmentfault.com/img/bVbK8rK\" alt=\"\" title=\"\" /></p>\n<p><img src=\"https://segmentfault.com/img/bVbK8rL\" alt=\"\" title=\"\" /></p>\n<p>ä¸¤å¼ å›¾ä¸€å¯¹æ¯”ï¼Œæ‰§è¡Œæ—¶é•¿é«˜ä¸‹ç«‹åˆ¤äº†ï¼Œåœ¨å½“ä»Šé«˜å¹¶å‘çš„æ—¶ä»£ï¼Œè¿™ç‚¹æ—¶é—´å·®ï¼Œåœ¨ååé‡ä¸Šèµ·åˆ°çš„æ•ˆæœå¯èƒ½ä¸æ˜¯ä¸€ç‚¹åŠç‚¹äº†</p>\n<blockquote>\n é‚£ CompletionService æ˜¯æ€ä¹ˆåšåˆ°è·å–æœ€å…ˆæ‰§è¡Œå®Œçš„ä»»åŠ¡ç»“æœçš„å‘¢ï¼Ÿ\n</blockquote>\n<p><img src=\"https://segmentfault.com/img/bVbK8rM\" alt=\"\" title=\"\" /></p>\n<h2>è¿œçœ‹CompletionService è½®å»“</h2>\n<p>å¦‚æœä½ ä½¿ç”¨è¿‡æ¶ˆæ¯é˜Ÿåˆ—ï¼Œä½ åº”è¯¥ç§’æ‡‚æˆ‘è¦è¯´ä»€ä¹ˆäº†ï¼ŒCompletionService å®ç°åŸç†å¾ˆç®€å•</p>\n<blockquote>\n å°±æ˜¯ä¸€ä¸ªå°†å¼‚æ­¥ä»»åŠ¡çš„ç”Ÿäº§å’Œä»»åŠ¡å®Œæˆç»“æœçš„æ¶ˆè´¹è§£è€¦çš„æœåŠ¡\n</blockquote>\n<p>ç”¨äººè¯è§£é‡Šä¸€ä¸‹ä¸Šé¢çš„æŠ½è±¡æ¦‚å¿µæˆ‘åªèƒ½å†ç”»ä¸€å¼ å›¾äº†</p>\n<p><img src=\"https://segmentfault.com/img/bVbK8rN\" alt=\"\" title=\"\" /></p>\n<p>è¯´ç™½äº†ï¼Œå“ªä¸ªä»»åŠ¡æ‰§è¡Œçš„å®Œï¼Œå°±ç›´æ¥å°†æ‰§è¡Œç»“æœæ”¾åˆ°é˜Ÿåˆ—ä¸­ï¼Œè¿™æ ·æ¶ˆè´¹è€…æ‹¿åˆ°çš„ç»“æœè‡ªç„¶å°±æ˜¯æœ€æ—©æ‹¿åˆ°çš„é‚£ä¸ªäº†</p>\n<p>ä»ä¸Šå›¾ä¸­çœ‹åˆ°ï¼Œæœ‰<strong>ä»»åŠ¡</strong>ï¼Œæœ‰<strong>ç»“æœé˜Ÿåˆ—</strong>ï¼Œé‚£ <code>CompletionService</code> è‡ªç„¶ä¹Ÿè¦å›´ç»•ç€å‡ ä¸ªå…³é”®å­—åšæ–‡ç« äº†</p>\n<ul>\n <li>æ—¢ç„¶æ˜¯å¼‚æ­¥ä»»åŠ¡ï¼Œé‚£è‡ªç„¶å¯èƒ½ç”¨åˆ° Runnable æˆ– Callable</li>\n <li>æ—¢ç„¶èƒ½è·å–åˆ°ç»“æœï¼Œè‡ªç„¶ä¹Ÿä¼šç”¨åˆ° Future äº†</li>\n</ul>\n<p>å¸¦ç€è¿™äº›çº¿ç´¢ï¼Œæˆ‘ä»¬èµ°è¿› <strong>CompletionService</strong> æºç çœ‹ä¸€çœ‹</p>\n<h2>è¿‘çœ‹ CompletionService æºç </h2>\n<p><code>CompletionService</code> æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒç®€å•çš„åªæœ‰ 5 ä¸ªæ–¹æ³•ï¼š</p>\n<pre><code class=\"java\">Future&lt;V&gt; submit(Callable&lt;V&gt; task);\nFuture&lt;V&gt; submit(Runnable task, V result);\nFuture&lt;V&gt; take() throws InterruptedException;\nFuture&lt;V&gt; poll();\nFuture&lt;V&gt; poll(long timeout, TimeUnit unit) throws InterruptedException;</code></pre>\n<p>å…³äº 2 ä¸ª submit æ–¹æ³•ï¼Œ æˆ‘åœ¨ <a href=\"https://dayarch.top/p/java-future-and-callable.html\" rel=\"nofollow noreferrer\">ä¸ä¼šç”¨Java Futureï¼Œæˆ‘æ€€ç–‘ä½ æ³¡èŒ¶æ²¡æˆ‘å¿«</a> æ–‡ç« ä¸­åšäº†éå¸¸è¯¦ç»†çš„åˆ†æä»¥åŠæ¡ˆä¾‹ä½¿ç”¨è¯´æ˜ï¼Œè¿™é‡Œä¸å†è¿‡å¤šèµ˜è¿°</p>\n<p><img src=\"https://segmentfault.com/img/bVbJkcQ\" alt=\"\" title=\"\" /></p>\n<p>å¦å¤– 3 ä¸ªæ–¹æ³•éƒ½æ˜¯ä»é˜»å¡é˜Ÿåˆ—ä¸­è·å–å¹¶ç§»é™¤é˜»å¡é˜Ÿåˆ—ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œåªä¸è¿‡ä»–ä»¬çš„åŠŸèƒ½ç•¥æœ‰ä¸åŒ</p>\n<ul>\n <li>Take: å¦‚æœ<strong>é˜Ÿåˆ—ä¸ºç©º</strong>ï¼Œé‚£ä¹ˆè°ƒç”¨ <strong>take()</strong> æ–¹æ³•çš„çº¿ç¨‹ä¼š<strong>è¢«é˜»å¡</strong></li>\n <li>Poll: å¦‚æœ<strong>é˜Ÿåˆ—ä¸ºç©º</strong>ï¼Œé‚£ä¹ˆè°ƒç”¨ <strong>poll()</strong> æ–¹æ³•çš„çº¿ç¨‹ä¼š<strong>è¿”å› null</strong></li>\n <li>Poll-timeout: ä»¥<strong>è¶…æ—¶çš„æ–¹å¼</strong>è·å–å¹¶ç§»é™¤é˜»å¡é˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœè¶…æ—¶æ—¶é—´åˆ°ï¼Œé˜Ÿåˆ—è¿˜æ˜¯ç©ºï¼Œé‚£ä¹ˆè¯¥æ–¹æ³•ä¼šè¿”å› null</li>\n</ul>\n<p>æ‰€ä»¥è¯´ï¼ŒæŒ‰å¤§ç±»åˆ’åˆ†ä¸Šé¢5ä¸ªæ–¹æ³•ï¼Œå…¶å®å°±æ˜¯ä¸¤ä¸ªåŠŸèƒ½</p>\n<ul>\n <li>æäº¤å¼‚æ­¥ä»»åŠ¡ ï¼ˆsubmitï¼‰</li>\n <li>ä»é˜Ÿåˆ—ä¸­æ‹¿å–å¹¶ç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´  (take/poll)</li>\n</ul>\n<p><code>CompletionService</code> åªæ˜¯æ¥å£ï¼Œ<code>ExecutorCompletionService</code> æ˜¯è¯¥æ¥å£çš„å”¯ä¸€å®ç°ç±»</p>\n<h3>ExecutorCompletionService æºç åˆ†æ</h3>\n<p>å…ˆæ¥çœ‹ä¸€ä¸‹ç±»ç»“æ„, å®ç°ç±»é‡Œé¢å¹¶æ²¡æœ‰å¤šå°‘å†…å®¹</p>\n<p>&lt;fancybox&gt;<img src=\"https://segmentfault.com/img/bVbK8rO\" alt=\"\" title=\"\">&lt;/fancybox&gt;</img></p>\n<p><code>ExecutorCompletionService</code> æœ‰ä¸¤ç§æ„é€ å‡½æ•°ï¼š</p>\n<pre><code class=\"java\">private final Executor executor;\nprivate final AbstractExecutorService aes;\nprivate final BlockingQueue&lt;Future&lt;V&gt;&gt; completionQueue;\n\npublic ExecutorCompletionService(Executor executor) {\n    if (executor == null)\n        throw new NullPointerException();\n    this.executor = executor;\n    this.aes = (executor instanceof AbstractExecutorService) ?\n        (AbstractExecutorService) executor : null;\n    this.completionQueue = new LinkedBlockingQueue&lt;Future&lt;V&gt;&gt;();\n}\n\n</code></pre>\n<pre><code class=\"java\">public ExecutorCompletionService(Executor executor,\n                                 BlockingQueue&lt;Future&lt;V&gt;&gt; completionQueue) {\n    if (executor == null || completionQueue == null)\n        throw new NullPointerException();\n    this.executor = executor;\n    this.aes = (executor instanceof AbstractExecutorService) ?\n        (AbstractExecutorService) executor : null;\n    this.completionQueue = completionQueue;\n}</code></pre>\n<p>ä¸¤ä¸ªæ„é€ å‡½æ•°éƒ½éœ€è¦ä¼ å…¥ä¸€ä¸ª Executor çº¿ç¨‹æ± ï¼Œ<strong>å› ä¸ºæ˜¯å¤„ç†å¼‚æ­¥ä»»åŠ¡çš„ï¼Œæˆ‘ä»¬æ˜¯ä¸è¢«å…è®¸æ‰‹åŠ¨åˆ›å»ºçº¿ç¨‹çš„</strong>ï¼Œæ‰€ä»¥è¿™é‡Œè¦ä½¿ç”¨çº¿ç¨‹æ± ä¹Ÿå°±å¾ˆå¥½ç†è§£äº†</p>\n<p>å¦å¤–ä¸€ä¸ªå‚æ•°æ˜¯ BlockingQueueï¼Œå¦‚æœä¸ä¼ è¯¥å‚æ•°ï¼Œå°±ä¼šé»˜è®¤é˜Ÿåˆ—ä¸º <code>LinkedBlockingQueue</code>ï¼Œä»»åŠ¡æ‰§è¡Œç»“æœå°±æ˜¯åŠ å…¥åˆ°è¿™ä¸ªé˜»å¡é˜Ÿåˆ—ä¸­çš„</p>\n<p>æ‰€ä»¥è¦å½»åº•ç†è§£ <code>ExecutorCompletionService</code> ï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“ä¸€ä¸ªé—®é¢˜çš„ç­”æ¡ˆå°±å¯ä»¥äº†ï¼š</p>\n<blockquote>\n å®ƒæ˜¯å¦‚ä½•å°†å¼‚æ­¥ä»»åŠ¡ç»“æœæ”¾åˆ°è¿™ä¸ªé˜»å¡é˜Ÿåˆ—ä¸­çš„ï¼Ÿ\n</blockquote>\n<p>æƒ³çŸ¥é“è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆï¼Œé‚£åªéœ€è¦çœ‹å®ƒæäº¤ä»»åŠ¡ä¹‹åéƒ½åšäº†äº›ä»€ä¹ˆï¼Ÿ</p>\n<pre><code class=\"java\">public Future&lt;V&gt; submit(Callable&lt;V&gt; task) {\n    if (task == null) throw new NullPointerException();\n    RunnableFuture&lt;V&gt; f = newTaskFor(task);\n    executor.execute(new QueueingFuture(f));\n    return f;\n}</code></pre>\n<p>æˆ‘ä»¬å‰é¢ä¹Ÿåˆ†æè¿‡ï¼Œexecute æ˜¯æäº¤ Runnable ç±»å‹çš„ä»»åŠ¡ï¼Œæœ¬èº«å¾—ä¸åˆ°è¿”å›å€¼ï¼Œä½†åˆå¯ä»¥å°†æ‰§è¡Œç»“æœæ”¾åˆ°é˜»å¡é˜Ÿåˆ—é‡Œé¢ï¼Œæ‰€ä»¥è‚¯å®šæ˜¯åœ¨ QueueingFuture é‡Œé¢åšäº†æ–‡ç« </p>\n<p><img src=\"https://segmentfault.com/img/bVbK8rP\" alt=\"\" title=\"\" /></p>\n<p>ä»ä¸Šå›¾ä¸­çœ‹ä¸€çœ‹å‡ºï¼ŒQueueingFuture å®ç°çš„æ¥å£éå¸¸å¤šï¼Œæ‰€ä»¥è¯´ä¹Ÿå°±å…·å¤‡äº†ç›¸åº”çš„æ¥å£èƒ½åŠ›ã€‚</p>\n<p>é‡ä¸­ä¹‹é‡æ˜¯ï¼Œå®ƒç»§æ‰¿äº† FutureTask ï¼ŒFutureTask é‡å†™äº† Runnable çš„ run() æ–¹æ³• (æ–¹æ³•ç»†èŠ‚åˆ†æå¯ä»¥æŸ¥çœ‹<a href=\"https://dayarch.top/p/java-future-and-callable.html#FutureTask\" rel=\"nofollow noreferrer\">FutureTaskæºç åˆ†æ</a> ) æ–‡ä¸­è¯¦ç»†è¯´æ˜äº†ï¼Œæ— è®ºæ˜¯set() æ­£å¸¸ç»“æœï¼Œè¿˜æ˜¯setException() ç»“æœï¼Œéƒ½ä¼šè°ƒç”¨ <code>finishCompletion()</code> æ–¹æ³•:</p>\n<pre><code class=\"java\">private void finishCompletion() {\n    // assert state &gt; COMPLETING;\n    for (WaitNode q; (q = waiters) != null;) {\n        if (UNSAFE.compareAndSwapObject(this, waitersOffset, q, null)) {\n            for (;;) {\n                Thread t = q.thread;\n                if (t != null) {\n                    q.thread = null;\n                    LockSupport.unpark(t);\n                }\n                WaitNode next = q.next;\n                if (next == null)\n                    break;\n                q.next = null; // unlink to help gc\n                q = next;\n            }\n            break;\n        }\n    }\n\n      // é‡ç‚¹ é‡ç‚¹ é‡ç‚¹\n    done();\n\n    callable = null;        // to reduce footprint\n}</code></pre>\n<p>ä¸Šè¿°æ–¹æ³•ä¼šæ‰§è¡Œ done() æ–¹æ³•ï¼Œè€Œ QueueingFuture æ°å·§é‡å†™äº† FutureTask çš„ done() æ–¹æ³•ï¼š</p>\n<p><img src=\"https://segmentfault.com/img/bVbK8rQ\" alt=\"\" title=\"\" /></p>\n<p>æ–¹æ³•å®ç°å¾ˆç®€å•ï¼Œå°±æ˜¯å°† task æ”¾åˆ°é˜»å¡é˜Ÿåˆ—ä¸­</p>\n<pre><code class=\"java\">protected void done() { \n  completionQueue.add(task); \n}</code></pre>\n<p>æ‰§è¡Œåˆ°æ­¤çš„ task å·²ç»æ˜¯å‰åºæ­¥éª¤ set è¿‡ç»“æœçš„ taskï¼Œæ‰€ä»¥å°±å¯ä»¥é€šè¿‡æ¶ˆè´¹é˜»å¡é˜Ÿåˆ—è·å–ç›¸åº”çš„ç»“æœäº†</p>\n<p>ç›¸ä¿¡åˆ°è¿™é‡Œï¼ŒCompletionService åœ¨ä½ é¢å‰åº”è¯¥æ²¡ä»€ä¹ˆç§˜å¯†å¯è¨€äº†</p>\n<h2>CompletionService çš„ä¸»è¦ç”¨é€”</h2>\n<p>åœ¨ JDK docs ä¸Šæ˜ç¡®ç»™äº†ä¸¤ä¸ªä¾‹å­æ¥è¯´æ˜ CompletionService çš„ç”¨é€”ï¼š</p>\n<blockquote>\n å‡è®¾ä½ æœ‰ä¸€ç»„é’ˆå¯¹æŸä¸ªé—®é¢˜çš„solversï¼Œæ¯ä¸ªéƒ½è¿”å›ä¸€ä¸ªç±»å‹ä¸ºResultçš„å€¼ï¼Œå¹¶ä¸”æƒ³è¦å¹¶å‘åœ°è¿è¡Œå®ƒä»¬ï¼Œå¤„ç†æ¯ä¸ªè¿”å›ä¸€ä¸ªéç©ºå€¼çš„ç»“æœï¼Œåœ¨æŸäº›æ–¹æ³•ä½¿ç”¨(Result r)\n</blockquote>\n<p>å…¶å®å°±æ˜¯æ–‡ä¸­å¼€å¤´çš„ä½¿ç”¨æ–¹å¼</p>\n<pre><code class=\"java\"> void solve(Executor e,\n            Collection&lt;Callable&lt;Result&gt;&gt; solvers)\n     throws InterruptedException, ExecutionException {\n     CompletionService&lt;Result&gt; ecs\n         = new ExecutorCompletionService&lt;Result&gt;(e);\n     for (Callable&lt;Result&gt; s : solvers)\n         ecs.submit(s);\n     int n = solvers.size();\n     for (int i = 0; i &lt; n; ++i) {\n         Result r = ecs.take().get();\n         if (r != null)\n             use(r);\n     }\n }</code></pre>\n<blockquote>\n å‡è®¾ä½ æƒ³ä½¿ç”¨ä»»åŠ¡é›†çš„ç¬¬ä¸€ä¸ªéç©ºç»“æœï¼Œå¿½ç•¥ä»»ä½•é‡åˆ°å¼‚å¸¸çš„ä»»åŠ¡ï¼Œå¹¶åœ¨ç¬¬ä¸€ä¸ªä»»åŠ¡å‡†å¤‡å¥½æ—¶å–æ¶ˆæ‰€æœ‰å…¶ä»–ä»»åŠ¡\n</blockquote>\n<pre><code class=\"java\">void solve(Executor e,\n            Collection&lt;Callable&lt;Result&gt;&gt; solvers)\n     throws InterruptedException {\n     CompletionService&lt;Result&gt; ecs\n         = new ExecutorCompletionService&lt;Result&gt;(e);\n     int n = solvers.size();\n     List&lt;Future&lt;Result&gt;&gt; futures\n         = new ArrayList&lt;Future&lt;Result&gt;&gt;(n);\n     Result result = null;\n     try {\n         for (Callable&lt;Result&gt; s : solvers)\n             futures.add(ecs.submit(s));\n         for (int i = 0; i &lt; n; ++i) {\n             try {\n                 Result r = ecs.take().get();\n                 if (r != null) {\n                     result = r;\n                     break;\n                 }\n             } catch (ExecutionException ignore) {}\n         }\n     }\n     finally {\n         for (Future&lt;Result&gt; f : futures)\n               // æ³¨æ„è¿™é‡Œçš„å‚æ•°ç»™çš„æ˜¯ trueï¼Œè¯¦è§£åŒæ ·åœ¨å‰åº Future æºç åˆ†ææ–‡ç« ä¸­\n             f.cancel(true);\n     }\n\n     if (result != null)\n         use(result);\n }</code></pre>\n<p>è¿™ä¸¤ç§æ–¹å¼éƒ½æ˜¯éå¸¸ç»å…¸çš„ CompletionService ä½¿ç”¨ <strong>èŒƒå¼</strong> ï¼Œè¯·å¤§å®¶ä»”ç»†å“å‘³æ¯ä¸€è¡Œä»£ç çš„ç”¨æ„</p>\n<p>èŒƒå¼æ²¡æœ‰è¯´æ˜ Executor çš„ä½¿ç”¨ï¼Œä½¿ç”¨ ExecutorCompletionServiceï¼Œéœ€è¦è‡ªå·±åˆ›å»ºçº¿ç¨‹æ± ï¼Œçœ‹ä¸Šå»è™½ç„¶æœ‰äº›éº»çƒ¦ï¼Œä½†å¥½å¤„æ˜¯ä½ å¯ä»¥è®©å¤šä¸ª ExecutorCompletionService çš„çº¿ç¨‹æ± éš”ç¦»ï¼Œè¿™ç§éš”ç¦»æ€§èƒ½é¿å…å‡ ä¸ªç‰¹åˆ«è€—æ—¶çš„ä»»åŠ¡æ‹–å®æ•´ä¸ªåº”ç”¨çš„é£é™© ï¼ˆè¿™ä¹Ÿæ˜¯æˆ‘ä»¬åå¤è¯´è¿‡å¤šæ¬¡çš„ï¼Œ<strong>ä¸è¦æ‰€æœ‰ä¸šåŠ¡å…±ç”¨ä¸€ä¸ªçº¿ç¨‹æ± </strong>ï¼‰</p>\n<h2>æ€»ç»“</h2>\n<p>CompletionService çš„åº”ç”¨åœºæ™¯è¿˜æ˜¯éå¸¸å¤šçš„ï¼Œæ¯”å¦‚</p>\n<ul>\n <li>Dubbo ä¸­çš„ Forking Cluster</li>\n <li>å¤šä»“åº“æ–‡ä»¶/é•œåƒä¸‹è½½ï¼ˆä»æœ€è¿‘çš„æœåŠ¡ä¸­å¿ƒä¸‹è½½åç»ˆæ­¢å…¶ä»–ä¸‹è½½è¿‡ç¨‹ï¼‰</li>\n <li>å¤šæœåŠ¡è°ƒç”¨ï¼ˆå¤©æ°”é¢„æŠ¥æœåŠ¡ï¼Œæœ€å…ˆè·å–åˆ°çš„ç»“æœï¼‰</li>\n</ul>\n<p>CompletionService ä¸ä½†èƒ½æ»¡è¶³è·å–æœ€å¿«ç»“æœï¼Œè¿˜èƒ½èµ·åˆ°ä¸€å®š \"load balancer\" ä½œç”¨ï¼Œè·å–å¯ç”¨æœåŠ¡çš„ç»“æœï¼Œä½¿ç”¨ä¹Ÿéå¸¸ç®€å•ï¼Œ åªéœ€è¦éµå¾ªèŒƒå¼å³å¯</p>\n<p><a href=\"https://dayarch.top/categories/Coding/Java-Concurrency/\" rel=\"nofollow noreferrer\">å¹¶å‘ç³»åˆ—</a> è®²äº†è¿™ä¹ˆå¤šï¼Œåˆ†ææºç çš„è¿‡ç¨‹ä¹Ÿç¢°åˆ°å„ç§é˜Ÿåˆ—ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±çœ‹çœ‹é‚£äº›è®©äººçœ¼èŠ±ç¼­ä¹±çš„é˜Ÿåˆ—</p>\n<h2>çµé­‚è¿½é—®</h2>\n<ol>\n <li>é€šå¸¸å¤„ç†ç»“æœè¿˜ä¼šç”¨å¼‚æ­¥æ–¹å¼è¿›è¡Œå¤„ç†ï¼Œå¦‚æœé‡‡ç”¨è¿™ç§æ–¹å¼ï¼Œæœ‰å“ªäº›æ³¨æ„äº‹é¡¹ï¼Ÿ</li>\n <li>å¦‚æœæ˜¯ä½ ï¼Œä½ ä¼šé€‰æ‹©ä½¿ç”¨æ— ç•Œé˜Ÿåˆ—å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</li>\n</ol>\n<p>æ—¥æ‹±ä¸€å…µ ï½œ åŸåˆ›</p>","descriptionType":"html","publishedDate":"Wed, 12 Aug 2020 01:09:02 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/bVbK8rH","linkMd5":"38260b3f6e6b52df89d4a67c52a99d4e","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx/cdn2@2020_3/2020/08/24/23-08-22-403_40b51c4991f714b5.webp","destWidth":800,"destHeight":444,"sourceBytes":79075,"destBytes":58018,"author":"æ—¥æ‹±ä¸€å…µ","articleImgCdnMap":{"https://segmentfault.com/img/bVbK8rH":"https://cdn.jsdelivr.net/gh/myreaderx/cdn2@2020_3/2020/08/24/23-08-22-403_40b51c4991f714b5.webp","https://segmentfault.com/img/bVbK8rI":"https://cdn.jsdelivr.net/gh/myreaderx14/cdn92@2020_5/2020/08/24/23-08-36-947_42b85b2ae6d997a1.webp","https://segmentfault.com/img/bVbK8rJ":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn96@2020_2/2020/08/24/23-08-36-120_24bfbdbe72cc45ff.webp","https://segmentfault.com/img/bVbK8rK":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn99@2020_4/2020/08/24/23-08-37-087_cedf4db363bdd8fe.webp","https://segmentfault.com/img/bVbK8rL":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn8@2020_4/2020/08/24/23-08-36-839_67cdf4d01f6a82ed.webp","https://segmentfault.com/img/bVbK8rM":"https://cdn.jsdelivr.net/gh/myreaderx23/cdn76@2020_3/2020/08/24/23-08-34-896_2dc307b4541a0abd.webp","https://segmentfault.com/img/bVbK8rN":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn80@2020_3/2020/08/24/23-08-36-263_3c39699332f578b1.webp","https://segmentfault.com/img/bVbJkcQ":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn3@2020_5/2020/08/24/23-08-41-152_0e8f52e3944cf4dd.webp","https://segmentfault.com/img/bVbK8rO":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn83@2020_4/2020/08/24/23-08-35-793_31b62aedb2eb6fe6.webp","https://segmentfault.com/img/bVbK8rP":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn88@2020_1/2020/08/24/23-08-37-146_33e57f0e6761d6ff.webp","https://segmentfault.com/img/bVbK8rQ":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn15@2020_3/2020/08/24/23-08-35-676_125212a0c80ae003.webp"},"publishedOrCreatedDate":1598310388570},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"ç²¾è¯»ã€ŠSpring æ¦‚å¿µã€‹","link":"https://segmentfault.com/a/1190000023734444","description":"<p><a href=\"https://spring.io/\" rel=\"nofollow noreferrer\">spring</a> æ˜¯ Java éå¸¸é‡è¦çš„æ¡†æ¶ï¼Œä¸”è•´å«äº†ä¸€ç³»åˆ—è®¾è®¡æ¨¡å¼ï¼Œéå¸¸å€¼å¾—ç ”ç©¶ï¼Œæœ¬æœŸå°±é€šè¿‡ <a href=\"https://www.cnblogs.com/wmyskxz/p/8820371.html\" rel=\"nofollow noreferrer\">Springå­¦ä¹ </a> è¿™ç¯‡æ–‡ç« äº†è§£ä¸€ä¸‹ springã€‚</p>\n<h2>spring ä¸ºä½•é•¿å¯¿</h2>\n<p>spring ä½œä¸ºä¸€ä¸ªåç«¯æ¡†æ¶ï¼Œæ‹¥æœ‰ 17 å¹´å†å²ï¼Œè¿™åœ¨å‰ç«¯çœ‹æ¥æ˜¯ä¸å¯æ€è®®çš„ã€‚å‰ç«¯å‡ ä¹æ²¡æœ‰ä¸€ä¸ªæ¡†æ¶å¯ä»¥æµè¡Œè¶…è¿‡ 5 å¹´ï¼Œå°±æœ€è¿‘æ¥çœ‹ï¼Œreactã€angularã€vue ä¸‰å¤§æ¡†æ¶å¯èƒ½ä¼šæ´»çš„ä¹…ä¸€ç‚¹ï¼Œä»–ä»¬éƒ½æ˜¯å‰ç«¯ç›¸å¯¹æˆç†Ÿé˜¶æ®µçš„äº§ç‰©ï¼Œæˆ‘ä»¬æˆ–å¤šæˆ–å°‘å¯ä»¥çœ‹å‡ºä¸€äº›è®¾è®¡æ¨¡å¼ã€‚ç„¶è€Œè¿™äº›å‰ç«¯æ¡†æ¶ä¸ spring æ¯”èµ·æ¥è¿˜æ˜¯å·®è·å¾ˆå¤§ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ spring åˆ°åº•å¼ºå¤§åœ¨å“ªã€‚</p>\n<h3>è®¾è®¡æ¨¡å¼</h3>\n<p>è®¾è®¡æ¨¡å¼æ˜¯ä¸€ç§æ€æƒ³ï¼Œä¸ä¾é™„äºä»»ä½•ç¼–ç¨‹è¯­è¨€ä¸å¼€å‘æ¡†æ¶ã€‚æ¯”å¦‚ä½ å­¦ä¼šäº†å·¥å‚è®¾è®¡æ¨¡å¼ï¼Œå¯ä»¥åœ¨åç«¯ç”¨ï¼Œä¹Ÿå¯ä»¥è½¬åˆ°å‰ç«¯ç”¨ï¼Œå¯ä»¥åœ¨ Go è¯­è¨€ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨ Typescript ç”¨ï¼Œå¯ä»¥åœ¨ React æ¡†æ¶ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨ Vue é‡Œç”¨ï¼Œæ‰€ä»¥è®¾è®¡æ¨¡å¼æ˜¯ä¸€ç§å…·æœ‰è¿ç§»èƒ½åŠ›çš„çŸ¥è¯†ï¼Œå­¦ä¼šåå¯ä»¥å—ç›Šæ•´ä¸ªèŒä¸šç”Ÿæ¶¯ï¼Œè€Œè¯­è¨€ã€æ¡†æ¶åˆ™ä¸å…·å¤‡è¿ç§»æ€§ï¼Œå‰ç«¯è®¸å¤šåŒå­¦éƒ½æŠŠç²¾åŠ›èŠ±åœ¨å­¦ä¹ æ¡†æ¶ç‰¹æ€§ä¸Šï¼Œé‡åˆ°å‰ç«¯æŠ€æœ¯è¿­ä»£æ—¶æœŸå°±å°´å°¬äº†ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¤§å…¬å¸é¢è¯•è¦é—®æ¡†æ¶åŸç†ï¼Œå°±æ˜¯çœ‹çœ‹ä½ èƒ½å¦æŠ“ä½ä¸€äº›ä¸å˜çš„ä¸œè¥¿ï¼Œæ‰€ä»¥æ´‹æ´‹æ´’æ´’çš„è¯´ä¸Šä¸‹æ–‡ç›¸å…³çš„ç»†èŠ‚ä¹Ÿä¸æ˜¯é¢è¯•å®˜æƒ³è¦çš„ï¼ŒçœŸæ­£æƒ³å¬åˆ°çš„æ˜¯ä½ æŠ½è±¡åå¯¹æ¡†æ¶åŸç†å…±æ€§çš„æ€»ç»“ã€‚</p>\n<p>spring æ¡†æ¶å°±ç”¨åˆ°äº†è®¸å¤šè®¾è®¡æ¨¡å¼ï¼ŒåŒ…æ‹¬ï¼š</p>\n<p>å·¥å‚æ¨¡å¼ï¼šç”¨å·¥å‚ç”Ÿäº§å¯¹è±¡å®ä¾‹æ¥ä»£æ›¿åŸå§‹çš„ newã€‚æ‰€è°“å·¥å‚å°±æ˜¯å±è”½å®ä¾‹è¯çš„ç»†èŠ‚ï¼Œè°ƒç”¨å¤„æ— éœ€å…³å¿ƒå®ä¾‹åŒ–å¯¹è±¡éœ€è¦çš„ç¯å¢ƒå‚æ•°ï¼Œæå‡å¯ç»´æŠ¤æ€§ã€‚spring çš„ BeanFactory åˆ›å»º bean å¯¹è±¡å°±æ˜¯å·¥å‚æ¨¡å¼çš„ä½“ç°ã€‚ ä»£ç†æ¨¡å¼ï¼šå…è®¸é€šè¿‡ä»£ç†å¯¹è±¡è®¿é—®ç›®æ ‡å¯¹è±¡ã€‚Spring å®ç° AOP å°±æ˜¯é€šè¿‡åŠ¨æ€ä»£ç†æ¨¡å¼ã€‚ å•ä¾‹æ¨¡å¼ï¼šå•å®ä¾‹ã€‚spring çš„ bean é»˜è®¤éƒ½æ˜¯å•ä¾‹ã€‚ åŒ…è£…å™¨æ¨¡å¼ï¼šå°†å‡ ä¸ªä¸åŒæ–¹æ³•é€šç”¨éƒ¨åˆ†æŠ½è±¡å‡ºæ¥ï¼Œè°ƒç”¨æ—¶é€šè¿‡åŒ…è£…å™¨å†…éƒ¨å¼•å¯¼åˆ°ä¸åŒçš„å®ç°ã€‚æ¯”å¦‚ spring è¿æ¥å¤šç§æ•°æ®åº“å°±ä½¿ç”¨äº†åŒ…è£…å™¨æ¨¡å¼ç®€åŒ–ã€‚ è§‚å¯Ÿè€…æ¨¡å¼ï¼šè¿™ä¸ªå‰ç«¯åŒå­¦å¾ˆç†Ÿæ‚‰ï¼Œå°±æ˜¯äº‹ä»¶æœºåˆ¶ï¼Œspring ä¸­å¯ä»¥é€šè¿‡ ApplicationEvent å®è·µè§‚å¯Ÿè€…æ¨¡å¼ã€‚ é€‚é…å™¨æ¨¡å¼ï¼šé€šè¿‡é€‚é…å™¨å°†æ¥å£è½¬æ¢ä¸ºå¦ä¸€ä¸ªæ ¼å¼çš„æ¥å£ã€‚spring AOP çš„å¢å¼ºå’Œé€šçŸ¥å°±ä½¿ç”¨äº†é€‚é…å™¨æ¨¡å¼ã€‚ æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼šçˆ¶ç±»å…ˆå®šä¹‰ä¸€äº›å‡½æ•°ï¼Œè¿™äº›å‡½æ•°ä¹‹é—´å­˜åœ¨è°ƒç”¨å…³è”ï¼Œå°†æŸäº›è®¾å®šä¸ºæŠ½è±¡å‡½æ•°ç­‰å¾…å­ç±»ç»§æ‰¿æ—¶å»é‡å†™ã€‚spring çš„ <code>jdbcTemplate</code>ã€<code>hibernateTemplate</code> ç­‰æ•°æ®åº“æ“ä½œç±»ä½¿ç”¨äº†æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼ã€‚</p>\n<h3>å…¨å®¶æ¡¶</h3>\n<p>spring ä½œä¸ºä¸€ä¸ªå…¨é¢çš„ java æ¡†æ¶ï¼Œæä¾›äº†ç³»åˆ—å…¨å®¶æ¡¶æ»¡è¶³å„ç§åœºæ™¯éœ€æ±‚ï¼šspring mvcã€spring securityã€spring dataã€spring bootã€spring cloudã€‚</p>\n<ul>\n <li>spring bootï¼šç®€åŒ–äº† spring åº”ç”¨é…ç½®ï¼Œçº¦å®šå¤§äºé…ç½®çš„æ€ç»´ã€‚</li>\n <li>spring dataï¼šæ˜¯ä¸€ä¸ªæ•°æ®æ“ä½œä¸è®¿é—®å·¥å…·é›†ï¼Œæ¯”å¦‚æ”¯æŒ jdbcã€redis ç­‰æ•°æ®æºæ“ä½œã€‚</li>\n <li>spring cloudï¼šæ˜¯ä¸€ä¸ªå¾®æœåŠ¡è§£å†³æ–¹æ¡ˆï¼ŒåŸºäº spring bootï¼Œé›†æˆäº†æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†ã€æ¶ˆæ¯æ€»çº¿ã€è´Ÿè½½å‡è¡¡ã€æ–­è·¯å™¨ã€æ•°æ®ç›‘æ§ç­‰å„ç§æœåŠ¡æ²»ç†èƒ½åŠ›ã€‚</li>\n <li>spring securityï¼šæ”¯æŒä¸€äº›å®‰å…¨æ¨¡å‹æ¯”å¦‚å•ç‚¹ç™»å½•ã€ä»¤ç‰Œä¸­ç»§ã€ä»¤ç‰Œäº¤æ¢ç­‰ã€‚</li>\n <li>spring mvcï¼šMVC æ€æƒ³çš„ web æ¡†æ¶ã€‚</li>\n</ul>\n<h2>IOC</h2>\n<p>IOCï¼ˆInverse of Controlï¼‰æ§åˆ¶åè½¬ã€‚IOC æ˜¯ Spring æœ€æ ¸å¿ƒéƒ¨åˆ†ï¼Œå› ä¸ºæ‰€æœ‰å¯¹è±¡è°ƒç”¨éƒ½ç¦»ä¸å¼€ IOC æ¨¡å¼ã€‚</p>\n<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸‰ä¸ªç±»ï¼šCountryã€Provinceã€Cityï¼Œæœ€å¤§çš„ç±»åˆ«æ˜¯å›½å®¶ï¼Œå…¶æ¬¡æ˜¯çœã€åŸå¸‚ï¼Œå›½å®¶ç±»éœ€è¦è°ƒç”¨çœç±»ï¼Œçœç±»éœ€è¦è°ƒç”¨åŸå¸‚ç±»ï¼š</p>\n<pre><code>public&nbsp;class&nbsp;Country&nbsp;{&nbsp;&nbsp;private&nbsp;Province&nbsp;province;&nbsp;&nbsp;public&nbsp;Country(){&nbsp;&nbsp;&nbsp;&nbsp;this.province&nbsp;=&nbsp;new&nbsp;Province()&nbsp;&nbsp;}}public&nbsp;class&nbsp;Province&nbsp;{&nbsp;&nbsp;private&nbsp;City&nbsp;city;&nbsp;&nbsp;public&nbsp;Province(){&nbsp;&nbsp;&nbsp;&nbsp;this.city&nbsp;=&nbsp;new&nbsp;City()&nbsp;&nbsp;}}public&nbsp;class&nbsp;City&nbsp;{&nbsp;&nbsp;public&nbsp;City(){&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;...&nbsp;&nbsp;}}</code></pre>\n<p>å‡è®¾æ¥äº†ä¸€ä¸ªéœ€æ±‚ï¼ŒCity å®ä¾‹åŒ–æ—¶éœ€å¢åŠ äººå£ï¼ˆpeopleï¼‰å‚æ•°ï¼Œæˆ‘ä»¬å°±è¦æ”¹åŠ¨æ‰€æœ‰ç±»ä»£ç ï¼š</p>\n<pre><code>public&nbsp;class&nbsp;Country&nbsp;{&nbsp;&nbsp;private&nbsp;Province&nbsp;province;&nbsp;&nbsp;public&nbsp;Country(int&nbsp;people){&nbsp;&nbsp;&nbsp;&nbsp;this.province&nbsp;=&nbsp;new&nbsp;Province(people)&nbsp;&nbsp;}}public&nbsp;class&nbsp;Province&nbsp;{&nbsp;&nbsp;private&nbsp;City&nbsp;city;&nbsp;&nbsp;public&nbsp;Province(int&nbsp;people){&nbsp;&nbsp;&nbsp;&nbsp;this.city&nbsp;=&nbsp;new&nbsp;City(people)&nbsp;&nbsp;}}public&nbsp;class&nbsp;City&nbsp;{&nbsp;&nbsp;public&nbsp;City(int&nbsp;people){&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;...&nbsp;&nbsp;}}</code></pre>\n<p>é‚£ä¹ˆåœ¨çœŸå®ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œä¸€ä¸ªåº•å±‚ç±»å¯èƒ½è¢«æ•°ä»¥åƒè®¡çš„ç±»ä½¿ç”¨ï¼Œè¿™ä¹ˆæ”¹æ˜¾ç„¶éš¾ä»¥ç»´æŠ¤ã€‚IOC å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒä½¿å¾—æˆ‘ä»¬å¯ä»¥åªæ”¹åŠ¨ City çš„ä»£ç ï¼Œè€Œä¸ç”¨æ”¹åŠ¨å…¶ä»–ç±»çš„ä»£ç ï¼š</p>\n<pre><code>public&nbsp;class&nbsp;Country&nbsp;{&nbsp;&nbsp;private&nbsp;Province&nbsp;province;&nbsp;&nbsp;public&nbsp;Country(Province&nbsp;province){&nbsp;&nbsp;&nbsp;&nbsp;this.province&nbsp;=&nbsp;province&nbsp;&nbsp;}}public&nbsp;class&nbsp;Province&nbsp;{&nbsp;&nbsp;private&nbsp;City&nbsp;city;&nbsp;&nbsp;public&nbsp;Province(City&nbsp;city){&nbsp;&nbsp;&nbsp;&nbsp;this.city&nbsp;=&nbsp;city&nbsp;&nbsp;}}public&nbsp;lass&nbsp;City&nbsp;{&nbsp;&nbsp;public&nbsp;City(int&nbsp;people){&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;...&nbsp;&nbsp;}}</code></pre>\n<p>å¯ä»¥çœ‹åˆ°ï¼Œå¢åŠ  <code>people</code> å±æ€§åªéœ€è¦æ”¹åŠ¨ city ç±»ã€‚ç„¶è€Œè¿™æ ·åšä¹Ÿæ˜¯æœ‰æˆæœ¬çš„ï¼Œå°±æ˜¯ç±»å®ä¾‹åŒ–æ­¥éª¤ä¼šç¨å¾®ç¹çä¸€äº›ï¼š</p>\n<pre><code>City&nbsp;city&nbsp;=&nbsp;new&nbsp;City(1000);Province&nbsp;province&nbsp;=&nbsp;new&nbsp;Province(city);Country&nbsp;country&nbsp;=&nbsp;new&nbsp;Country(province);</code></pre>\n<p>è¿™å°±æ˜¯æ§åˆ¶åè½¬ï¼Œç”± Country ä¾èµ– Province å˜æˆäº†ç±»ä¾èµ–æ¡†æ¶ï¼ˆä¸Šé¢çš„å®ä¾‹åŒ–ä»£ç ï¼‰æ³¨å…¥ã€‚</p>\n<p>ç„¶è€Œæ‰‹åŠ¨ç»´æŠ¤è¿™ç§åˆå§‹åŒ–ä¾èµ–æ˜¯ç¹ççš„ï¼Œspring æä¾›äº† bean å®¹å™¨è‡ªåŠ¨åšè¿™ä»¶äº‹ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ©ç”¨è£…é¥°å™¨ Autowired å°±å¯ä»¥è‡ªåŠ¨æ³¨å…¥ä¾èµ–ï¼š</p>\n<pre><code>@Componentpublic&nbsp;class&nbsp;Country&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Autowired&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;Province&nbsp;province;}@Componentpublic&nbsp;class&nbsp;Province&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Autowired&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;City&nbsp;city;}@Componentpublic&nbsp;class&nbsp;City&nbsp;{&nbsp;&nbsp;}</code></pre>\n<p>å®é™…ä¸Šè¿™ç§è‡ªåŠ¨åˆ†æå¹¶å®ä¾‹åŒ–çš„æ‰‹æ®µï¼Œä¸ä»…æ¯”æ‰‹å†™æ–¹ä¾¿ï¼Œè¿˜èƒ½è§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜ã€‚åœ¨å®é™…åœºæ™¯ä¸­ï¼Œä¸¤ä¸ªç±»ç›¸äº’è°ƒç”¨æ˜¯å¾ˆå¸¸è§çš„ï¼Œå‡è®¾ç°åœ¨æœ‰ Aã€B ç±»ç›¸äº’ä¾èµ–ï¼š</p>\n<pre><code>@Componentpublic&nbsp;class&nbsp;A&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Autowired&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;B&nbsp;b;}@Componentpublic&nbsp;class&nbsp;B&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Autowired&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;A&nbsp;a;}</code></pre>\n<p>é‚£ä¹ˆå‡è®¾æˆ‘ä»¬æƒ³è·å– A å®ä¾‹ï¼Œä¼šç»å†è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ï¼š</p>\n<pre><code>è·å– A å®ä¾‹ -&gt; å®ä¾‹åŒ–ä¸å®Œæ•´ A -&gt; æ£€æµ‹åˆ°æ³¨å…¥ B -&gt; å®ä¾‹åŒ–ä¸å®Œæ•´ B -&gt; æ£€æµ‹åˆ°æ³¨å…¥ A -&gt; æ³¨å…¥ä¸å®Œæ•´ A -&gt; å¾—åˆ°å®Œæ•´ B -&gt; å¾—åˆ°å®Œæ•´ A -&gt; è¿”å› A å®ä¾‹</code></pre>\n<p>å…¶å® spring ä»…æ”¯æŒå•ä¾‹æ¨¡å¼ä¸‹éæ„é€ å™¨çš„å¾ªç¯ä¾èµ–ï¼Œè¿™æ˜¯å› ä¸ºå…¶å†…éƒ¨æœ‰ä¸€å¥—æœºåˆ¶ï¼Œè®© bean åœ¨åˆå§‹åŒ–é˜¶æ®µå…ˆæå‰æŒæœ‰å¯¹æ–¹å¼•ç”¨åœ°å€ï¼Œè¿™æ ·å°±å¯ä»¥åŒæ—¶å®ä¾‹åŒ–ä¸¤ä¸ªå¯¹è±¡äº†ã€‚</p>\n<p>é™¤äº†æ–¹ä¾¿ä¹‹å¤–ï¼ŒIOC é…åˆ spring å®¹å™¨æ¦‚å¿µè¿˜å¯ä»¥ä½¿è·å–å®ä¾‹æ—¶ä¸ç”¨å…³å¿ƒä¸€ä¸ªç±»å®ä¾‹åŒ–éœ€è¦å“ªäº›å‚æ•°ï¼Œåªéœ€è¦ç›´æ¥ç”³æ˜è·å–å³å¯ï¼Œè¿™æ ·åœ¨ç±»çš„æ•°é‡ç‰¹åˆ«å¤šï¼Œå°¤å…¶æ˜¯å¤§é‡ä»£ç ä¸æ˜¯ä½ å†™çš„æƒ…å†µä¸‹ï¼Œä¸éœ€è¦é˜…è¯»ç±»æºç ä¹Ÿå¯ä»¥è½»æ¾è·å–å®ä¾‹ï¼Œå®åœ¨æ˜¯å¤§å¤§æå‡äº†å¯ç»´æŠ¤æ€§ã€‚</p>\n<p>è¯´åˆ°è¿™å°±æåˆ°äº† Bean å®¹å™¨ï¼Œåœ¨ spring æ¦‚å¿µä¸­ï¼ŒBean å®¹å™¨æ˜¯å¯¹ class çš„åŠ å¼ºï¼Œå¦‚æœè¯´ Class å®šä¹‰äº†ç±»çš„åŸºæœ¬å«ä¹‰ï¼Œé‚£ Bean å°±æ˜¯å¯¹ç±»è¿›è¡Œä½¿ç”¨æ‹“å±•ï¼Œå‘Šè¯‰æˆ‘ä»¬åº”è¯¥å¦‚ä½•å®ä¾‹åŒ–ä¸ä½¿ç”¨è¿™ä¸ªç±»ã€‚</p>\n<p>ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚åˆ©ç”¨æ³¨è§£æè¿°çš„è¿™æ®µ Bean ç±»ï¼š</p>\n<pre><code>@Configurationpublic&nbsp;class&nbsp;CityConfig&nbsp;{&nbsp;&nbsp;@Scope(\"prototype\")&nbsp;&nbsp;@Lazy&nbsp;&nbsp;@Bean(initMethod&nbsp;=&nbsp;\"init\",&nbsp;destroyMethod&nbsp;=&nbsp;\"destroy\")&nbsp;&nbsp;public&nbsp;City&nbsp;city()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;City()&nbsp;&nbsp;}}</code></pre>\n<p>å¯ä»¥çœ‹åˆ°ï¼Œé¢å¤–æè¿°äº†æ˜¯å¦å»¶è¿ŸåŠ è½½ï¼Œæ˜¯å¦å•ä¾‹ï¼Œåˆå§‹åŒ–ä¸ææ„å‡½æ•°åˆ†åˆ«æ˜¯ä»€ä¹ˆç­‰ç­‰ã€‚</p>\n<p>ä¸‹é¢ç»™å‡ºä¸€ä¸ªä» Bean è·å–å®ä¾‹çš„ä¾‹å­ï¼Œé‡‡ç”¨æ¯”è¾ƒå¤è€çš„ xml é…ç½®æ–¹å¼ï¼š</p>\n<pre><code>public&nbsp;interface&nbsp;City&nbsp;{&nbsp;&nbsp;Int&nbsp;getPeople();}</code></pre>\n<pre><code>public&nbsp;class&nbsp;CityImpl&nbsp;implements&nbsp;City&nbsp;{&nbsp;&nbsp;public&nbsp;Int&nbsp;getPeople()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1000;&nbsp;&nbsp;}}</code></pre>\n<p>æ¥ä¸‹æ¥ç”¨ xml æè¿°è¿™ä¸ª beanï¼š</p>\n<pre><code>&lt;?xml&nbsp;version=\"1.0\"&nbsp;encoding=\"UTF-8\"&nbsp;?&gt;&lt;beans&nbsp;xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"&nbsp;&nbsp;xmlns=\"http://www.springframework.org/schema/beans\"&nbsp;&nbsp;xsi:schemaLocation=\"http://www.springframework.org/schema/beans&nbsp;http://www.springframework.org/schema/beans/spring-beans.xsd\"&nbsp;default-autowire=\"byName\"&gt;&nbsp;&nbsp;&lt;bean&nbsp;id=\"city\"&nbsp;class=\"xxx.CityImpl\"/&gt;&lt;/beans&gt;</code></pre>\n<p><code>bean</code> æ”¯æŒçš„å±æ€§è¿˜æœ‰å¾ˆå¤šï¼Œç”±äºæœ¬æ–‡å¹¶ä¸åšå…¥é—¨æ•™å­¦ï¼Œå°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ï¼Œæ€»ä¹‹ <code>id</code> æ˜¯ä¸€ä¸ªå¯é€‰çš„å”¯ä¸€æ ‡å¿—ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>id</code> è®¿é—®åˆ° city çš„å®ä¾‹ã€‚</p>\n<pre><code>public&nbsp;class&nbsp;App&nbsp;{&nbsp;&nbsp;public&nbsp;static&nbsp;void&nbsp;main(String[]&nbsp;args)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;ApplicationContext&nbsp;context&nbsp;=&nbsp;new&nbsp;ClassPathXmlApplicationContext(\"classpath:application.xml\");&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;ä»&nbsp;context&nbsp;ä¸­è¯»å–&nbsp;Beanï¼Œè€Œä¸&nbsp;new&nbsp;City()&nbsp;&nbsp;&nbsp;&nbsp;City&nbsp;city&nbsp;=&nbsp;context.getBean(City.class);&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(city.getPeople());&nbsp;&nbsp;}}</code></pre>\n<p>å¯ä»¥çœ‹åˆ°ï¼Œç¨‹åºä»»ä½•åœ°æ–¹ä½¿ç”¨ city å®ä¾‹ï¼Œåªéœ€è¦è°ƒç”¨ <code>getBean</code> å‡½æ•°ï¼Œå°±åƒä¸€ä¸ªå·¥å‚æŠŠå®ä¾‹åŒ–è¿‡ç¨‹ç»™æ‰¿åŒ…äº†ï¼Œæˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒ City æ„é€ å‡½æ•°è¦ä¼ é€’ä»€ä¹ˆå‚æ•°ï¼Œä¸éœ€è¦å…³å¿ƒå®ƒä¾èµ–å“ªäº›å…¶ä»–çš„ç±»ï¼Œåªè¦è¿™ä¸€å¥è¯å°±å¯ä»¥æ‹¿åˆ°å®ä¾‹ï¼Œæ˜¯ä¸æ˜¯åœ¨ç»´æŠ¤é¡¹ç›®æ—¶çœå¿ƒäº†å¾ˆå¤šã€‚</p>\n<h2>AOP</h2>\n<p>AOPï¼ˆAspect Oriented Programï¼‰é¢å‘åˆ‡é¢ç¼–ç¨‹ã€‚</p>\n<p>AOP æ˜¯ä¸ºäº†è§£å†³ä¸»è¦ä¸šåŠ¡é€»è¾‘ä¸æ¬¡è¦ä¸šåŠ¡é€»è¾‘ä¹‹é—´è€¦åˆé—®é¢˜çš„ã€‚ä¸»è¦ä¸šåŠ¡é€»è¾‘æ¯”å¦‚ç™»é™†ã€æ•°æ®è·å–ã€æŸ¥è¯¢ç­‰ï¼Œæ¬¡è¦ä¸šåŠ¡é€»è¾‘æ¯”å¦‚æ€§èƒ½ç›‘æ§ã€å¼‚å¸¸å¤„ç†ç­‰ç­‰ï¼Œæ¬¡è¦ä¸šåŠ¡é€»è¾‘å¾€å¾€æœ‰ï¼šä¸é‡è¦ã€å’Œä¸šåŠ¡å…³è”åº¦ä½ã€è´¯ç©¿å¤šå¤„ä¸šåŠ¡é€»è¾‘çš„ç‰¹æ€§ï¼Œå¦‚æœæ²¡æœ‰å¥½çš„è®¾è®¡æ¨¡å¼ï¼Œåªèƒ½åœ¨ä¸šåŠ¡ä»£ç é‡Œå°†ä¸»è¦é€»è¾‘ä¸æ¬¡è¦é€»è¾‘æ··åˆèµ·æ¥ï¼Œä½† AOP å¯ä»¥åšåˆ°ä¸»è¦ã€æ¬¡è¦ä¸šåŠ¡é€»è¾‘éš”ç¦»ã€‚</p>\n<p>ä½¿ç”¨ AOP å°±æ˜¯åœ¨å®šä¹‰åœ¨å“ªäº›åœ°æ–¹ï¼ˆç±»ã€æ–¹æ³•ï¼‰åˆ‡å…¥ï¼Œåœ¨ä»€ä¹ˆåœ°æ–¹åˆ‡å…¥ï¼ˆæ–¹æ³•å‰ã€åã€å‰åï¼‰ä»¥åŠåšä»€ä¹ˆã€‚</p>\n<p>æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬æƒ³åœ¨æŸä¸ªæ–¹æ³•å‰ååˆ†åˆ«æ‰§è¡Œä¸¤ä¸ªå‡½æ•°è®¡ç®—æ‰§è¡Œæ—¶é—´ï¼Œä¸‹é¢æ˜¯ä¸»è¦ä¸šåŠ¡é€»è¾‘ï¼š</p>\n<pre><code>@Component(\"work\")public&nbsp;class&nbsp;Work&nbsp;{&nbsp;&nbsp;public&nbsp;void&nbsp;do()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(\"æ‰§è¡Œä¸šåŠ¡é€»è¾‘\");&nbsp;&nbsp;}}</code></pre>\n<p>å†å®šä¹‰åˆ‡é¢æ–¹æ³•ï¼š</p>\n<pre><code>@Component@Aspectclass&nbsp;Broker&nbsp;{&nbsp;&nbsp;@Before(\"execution(*&nbsp;xxx.Work.do())\")&nbsp;&nbsp;public&nbsp;void&nbsp;before(){&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;è®°å½•å¼€å§‹æ—¶é—´&nbsp;&nbsp;}&nbsp;&nbsp;@After(\"execution(*&nbsp;xxx.Work.do())\")&nbsp;&nbsp;public&nbsp;void&nbsp;after(){&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;è®¡ç®—æ—¶é—´&nbsp;&nbsp;}}</code></pre>\n<p>å†é€šè¿‡ xml å®šä¹‰æ‰«æä¸‹è¿™ä¸¤ä¸ª Beanï¼Œå°±å¯ä»¥åœ¨è¿è¡Œ <code>work.do()</code> ä¹‹å‰æ‰§è¡Œ <code>before()</code>ï¼Œä¹‹åæ‰§è¡Œ <code>after()</code>ã€‚</p>\n<p>è¿˜å¯ä»¥å®Œå…¨è¦†ç›–åŸå‡½æ•°ï¼Œåˆ©ç”¨ <code>joinPoint.proceed()</code> å¯ä»¥æ‰§è¡ŒåŸå‡½æ•°ï¼š</p>\n<pre><code>@Component@Aspectclass&nbsp;Broker&nbsp;{&nbsp;&nbsp;@Around(\"execution(*&nbsp;xxx.Work.do())\")&nbsp;&nbsp;public&nbsp;void&nbsp;around(ProceedingJoinPoint&nbsp;joinPoint)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;è®°å½•å¼€å§‹æ—¶é—´&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;joinPoint.proceed();&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(Throwable&nbsp;throwable)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throwable.printStackTrace();&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;è®¡ç®—æ—¶é—´&nbsp;&nbsp;}}</code></pre>\n<p>å…³äºè¡¨è¾¾å¼ <code>\"execution(* xxx.Work.do())\"</code> æ˜¯ç”¨æ­£åˆ™çš„æ–¹å¼åŒ¹é…ï¼Œ<code>*</code> è¡¨ç¤ºä»»æ„è¿”å›ç±»å‹çš„æ–¹æ³•ï¼Œåé¢å°±ä¸ç”¨è§£é‡Šäº†ã€‚</p>\n<p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸ä¿®æ”¹åŸæ–¹æ³•çš„åŸºç¡€ä¸Šï¼Œåœ¨å…¶æ‰§è¡Œå‰åå¢åŠ è‡ªå®šä¹‰ä¸šåŠ¡é€»è¾‘ï¼Œæˆ–è€…ç›‘æ§å…¶æŠ¥é”™ï¼Œéå¸¸é€‚åˆåšæ¬¡è¦ä¸šåŠ¡é€»è¾‘ï¼Œä¸”ç”±äºä¸ä¸ä¸»è¦ä¸šåŠ¡é€»è¾‘ä»£ç è€¦åˆï¼Œä¿è¯äº†ä»£ç çš„ç®€æ´ï¼Œä¸”æ¬¡è¦ä¸šåŠ¡é€»è¾‘ä¸å®¹æ˜“é—æ¼ã€‚</p>\n<h2>æ€»ç»“</h2>\n<p>IOC ç‰¹åˆ«é€‚åˆæè¿°ä¸šåŠ¡æ¨¡å‹ï¼Œåç«¯å¤©ç„¶éœ€è¦è¿™ä¸€å¥—ï¼Œç„¶è€Œéšç€å‰ç«¯è¶Šåšè¶Šé‡ï¼Œå¦‚æœæŸä¸ªä¸šåŠ¡åœºæ™¯ä¸‹éœ€è¦å°†éƒ¨åˆ†ä¸šåŠ¡é€»è¾‘æ”¾åˆ°å‰ç«¯ï¼Œä¹Ÿæ˜¯éå¸¸æ¨èä½¿ç”¨ IOC è®¾è®¡æ¨¡å¼æ¥åšï¼Œè¿™æ˜¯åç«¯æ²‰æ·€äº†è¿‘ 20 å¹´çš„ç»éªŒï¼Œæ²¡æœ‰å¿…è¦å†å¦è¾Ÿè¹Šå¾„ã€‚</p>\n<p>AOP å¯¹å‰ç«¯æœ‰å¸®åŠ©ä½†æ²¡æœ‰é‚£ä¹ˆå¤§ï¼Œå› ä¸ºå‰ç«¯ä¸šåŠ¡é€»è¾‘è¾ƒä¸ºåˆ†æ•£ï¼Œå¦‚æœè¦è¿›è¡Œåˆ‡é¢ç¼–ç¨‹ï¼Œå¾€å¾€ç”¨ <code>window</code> äº‹ä»¶ç›‘å¬æ¥åšä¼šæ›´å½»åº•ï¼Œå¯èƒ½è¿™éƒ½æ˜¯å‰ç«¯æ²¡æœ‰æµè¡Œ AOP çš„åŸå› ã€‚å½“ç„¶å‰ç«¯çº¦å®šå¤§äºé…ç½®çš„è¶‹åŠ¿ä¸‹ï¼Œæ¯”å¦‚æ‰“ç‚¹æˆ–ç›‘æ§éƒ½é›†æˆåˆ°æ¡†æ¶å†…éƒ¨ï¼Œå¾€å¾€ä¹Ÿåšåˆ°äº†ä¸šåŠ¡ä»£ç æ— æ„Ÿï¼Œå‰©ä¸‹çš„ä¸šåŠ¡ä»£ç ä¹Ÿå°±æ²¡æœ‰ AOP çš„éœ€æ±‚ã€‚</p>\n<p>æœ€åï¼Œspring çš„ä½ä¾µå…¥å¼è®¾è®¡ï¼Œä½¿å¾—ä¸šåŠ¡ä»£ç ä¸ç”¨å…³å¿ƒæ¡†æ¶ï¼Œè®©ä¸šåŠ¡ä»£ç èƒ½å¤Ÿå¿«é€Ÿåœ¨ä¸åŒæ¡†æ¶é—´åˆ‡æ¢ï¼Œè¿™ä¸ä»…æ–¹ä¾¿äº†ä¸šåŠ¡å¼€å‘è€…ï¼Œæ›´ä½¿å¾— spring èµ°å‘æˆåŠŸï¼Œè¿™æ˜¯å‰ç«¯è¿˜éœ€è¦è¿½èµ¶çš„ã€‚</p>\n<blockquote>\n è®¨è®ºåœ°å€æ˜¯ï¼š\n <a href=\"https://github.com/dt-fe/weekly/issues/265\" rel=\"nofollow noreferrer\">ç²¾è¯»ã€ŠSpring æ¦‚å¿µã€‹Â· Issue #265 Â· dt-fe/weekly</a>\n</blockquote>\n<p><strong>å¦‚æœä½ æƒ³å‚ä¸è®¨è®ºï¼Œè¯· <a href=\"https://github.com/dt-fe/weekly\" rel=\"nofollow noreferrer\">ç‚¹å‡»è¿™é‡Œ</a>ï¼Œæ¯å‘¨éƒ½æœ‰æ–°çš„ä¸»é¢˜ï¼Œå‘¨æœ«æˆ–å‘¨ä¸€å‘å¸ƒã€‚å‰ç«¯ç²¾è¯» - å¸®ä½ ç­›é€‰é è°±çš„å†…å®¹ã€‚</strong></p>\n<blockquote>\n å…³æ³¨ \n <strong>å‰ç«¯ç²¾è¯»å¾®ä¿¡å…¬ä¼—å·</strong>\n</blockquote>\n<p><img src=\"https://segmentfault.com/img/remote/1460000018549678\" alt=\"\" title=\"\" /></p>\n<blockquote>\n ç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²åï¼ˆ\n <a href=\"https://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh\" rel=\"nofollow noreferrer\">åˆ›æ„å…±äº« 3.0 è®¸å¯è¯</a>ï¼‰\n</blockquote>","descriptionType":"html","publishedDate":"Mon, 24 Aug 2020 01:42:11 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/remote/1460000018549678","linkMd5":"b7dfe327eb9a61822da340b39059d2f1","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn62@2020_2/2020/08/24/23-08-22-916_a02e97e5e2b41934.webp","destWidth":258,"destHeight":258,"sourceBytes":20858,"destBytes":6490,"author":"é»„å­æ¯…","articleImgCdnMap":{"https://segmentfault.com/img/remote/1460000018549678":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn62@2020_2/2020/08/24/23-08-22-916_a02e97e5e2b41934.webp"},"publishedOrCreatedDate":1598310388558},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"å‰ç«¯éŸ³è§†é¢‘çš„é‚£äº›åè¯","link":"https://segmentfault.com/a/1190000023663493","description":"<p><img src=\"https://segmentfault.com/img/bVbLr7m\" alt=\"image\" title=\"image\" /></p>\n<p><strong>è§‚æ„Ÿåº¦ï¼šğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</strong></p>\n<p><strong>å£å‘³ï¼šæ¤’ç›å°é…¥è‚‰</strong></p>\n<p><strong>çƒ¹é¥ªæ—¶é—´ï¼š10min</strong></p>\n<blockquote>\n æœ¬æ–‡å·²æ”¶å½•åœ¨å‰ç«¯é£Ÿå ‚åŒåä»“åº“\n <code>Github</code> \n <a href=\"https://github.com/Geekhyt/front-end-canteen\" rel=\"nofollow noreferrer\">github.com/Geekhyt</a>ï¼Œæ¬¢è¿å…‰ä¸´é£Ÿå ‚ï¼Œå¦‚æœè§‰å¾—é…’èœè¿˜ç®—å¯å£ï¼Œèµä¸ª Star å¯¹é£Ÿå ‚è€æ¿æ¥è¯´æ˜¯è«å¤§çš„é¼“åŠ±ã€‚\n</blockquote>\n<h2>æ¯”ç‰¹ç‡ Bit rate ï¼ˆç ç‡ã€ç æµï¼‰</h2>\n<p><code>ä»£è¡¨æ¯ç§’ä¼ é€çš„æ¯”ç‰¹æ•°ã€‚</code></p>\n<p>æ¯”ç‰¹ç‡åˆç§°ä¸ºâ€œäºŒè¿›åˆ¶ä½é€Ÿç‡â€ï¼Œä¿—ç§°â€œç ç‡â€ï¼Œâ€œç æµâ€ï¼Œåˆç§°ä¸ºæ•°æ®ä¿¡å·é€Ÿç‡ã€‚è¿™å¤§å…„å¼Ÿåˆ«åå¥½å¤šã€‚ã€‚</p>\n<p>ä»ä¼ è¾“é€Ÿåº¦çš„å‘å±•çœ‹æ¥ï¼Œæ‘©å°”å®šå¾‹ä¸ä»…åº”ç”¨åœ¨æ™¶ä½“ç®¡çš„å¯†åº¦ï¼ŒåŒæ ·å¯ä»¥ç”¨åœ¨ä¼ è¾“é€Ÿåº¦ï¼šæ¯”ç‰¹ç‡å¤§æ¦‚æ¯18ä¸ªæœˆæé«˜ä¸€å€ã€‚</p>\n<h3>å•ä½</h3>\n<p>æ¯”ç‰¹/ç§’(bit/s æˆ– bps)ã€åƒæ¯”ç‰¹/ç§’(kbit/s æˆ– kbps)ã€å…†æ¯”ç‰¹/ç§’ (Mbit/s æˆ– Mbps)</p>\n<p>(1Mbps = 1000kbit/s)</p>\n<p>æ¯”ç‰¹ç‡è¶Šé«˜ï¼Œä»£è¡¨å•ä½æ—¶é—´ä¼ é€çš„æ•°æ®å°±è¶Šå¤šã€‚</p>\n<h3>å…¬å¼</h3>\n<p><code>ç ç‡(kbps) = æ–‡ä»¶å¤§å°(KB) * 8 / æ—¶é—´(s)</code></p>\n<p>ä¸¾ä¸ªä¾‹å­ç†è§£ï¼šå‡å¦‚è§†é¢‘æ–‡ä»¶çš„å®¹é‡ä¸º 2.888Gï¼Œè§†é¢‘é•¿åº¦100åˆ†é’Ÿï¼ˆ6000ç§’ï¼‰ï¼Œç ç‡çº¦ç­‰äº 4037kbps (3.446 <em> 1024 </em> 1024 * 8 / 6000 = 4037.717)ã€‚</p>\n<h2>å¸§ç‡ Frame rate</h2>\n<p>å›¾å½¢å¤„ç†å™¨æ¯ç§’èƒ½å¤Ÿåˆ·æ–°å‡ æ¬¡ï¼Œä¹Ÿå°±æ˜¯æ¯ç§’èƒ½å¤Ÿæ’­æ”¾å¤šå°‘å¸§ã€‚</p>\n<p>äººç±»çœ¼ç›çš„ç‰¹æ®Šç”Ÿç†ç»“æ„ï¼Œå¦‚æœç”»é¢çš„å¸§ç‡é«˜äºæ¯ç§’çº¦10-12å¸§æ—¶ï¼Œéƒ½ä¼šè®¤ä¸ºæ˜¯è¿è´¯çš„ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„è§†è§‰æš‚ç•™ã€‚</p>\n<p><code>ä½å¸§ç‡ä¼šé€ æˆè§†è§‰å¡é¡¿ï¼Œå¸§ç‡è¶Šé«˜ï¼Œæµç•…åº¦è¶Šé«˜ã€‚</code></p>\n<p>å¦‚æœä½ ç©è¿‡LOLï¼Œé‚£ä¹ˆæ¸¸æˆå¸§æ•°ä¿è¯ç¨³å®šåœ¨60å¸§å·¦å³æˆ–ä»¥ä¸Šï¼Œä½ çš„æ¸¸æˆç”»é¢å°±æ˜¯æµç•…çš„ã€‚</p>\n<h3>å•ä½</h3>\n<p>æ¯ç§’æ˜¾ç¤ºçš„å¸§æ•°(Frames per Secondï¼ŒFPSï¼‰æˆ–èµ«å…¹ï¼ˆHzï¼‰ã€‚</p>\n<h2>å‹ç¼©ç‡ Compression rate</h2>\n<p><code>ç»è¿‡å‹ç¼©åæ–‡ä»¶çš„å¤§å° / åŸå§‹æ–‡ä»¶çš„å¤§å° * 100% = å‹ç¼©ç‡</code></p>\n<p>å‹ç¼©ç‡ä¸€èˆ¬æ˜¯è¶Šå°è¶Šå¥½ï¼Œä½†æ˜¯å‹å¾—è¶Šå°ï¼Œè§£å‹æ—¶é—´è¶Šé•¿ã€‚</p>\n<h2>åˆ†è¾¨ç‡ Image resolution</h2>\n<p>é€šå¸¸è¡¨ç¤ºç§°PPIï¼Œç”¨äºåº¦é‡å›¾åƒå†…æ•°æ®é‡å¤šå°‘çš„ä¸€ä¸ªå‚æ•°ã€‚</p>\n<p>åƒç´ å¯†åº¦è¶Šé«˜ï¼Œè¯´æ˜åƒç´ è¶Šå¯†é›†ï¼Œ5PPIè¡¨ç¤ºæ¯è‹±å¯¸æœ‰5ä¸ªåƒç´ ï¼Œ500PPIè¡¨ç¤ºæ¯è‹±å¯¸æœ‰500ä¸ªåƒç´ ã€‚</p>\n<p>PPIçš„æ•°å€¼é«˜ï¼Œå›¾ç‰‡å’Œè§†é¢‘çš„æ¸…æ™°åº¦å°±æ›´é«˜ã€‚</p>\n<h3>å…¬å¼</h3>\n<p><code>åˆ†è¾¨ç‡ = å•ä½é•¿åº¦å†…çš„åƒç´ æ•°é‡ / å•ä½é•¿åº¦</code></p>\n<h3>å•ä½</h3>\n<p>DPIï¼ˆç‚¹æ¯è‹±å¯¸ï¼‰ã€LPIï¼ˆçº¿æ¯è‹±å¯¸ï¼‰ã€PPIï¼ˆåƒç´ æ¯è‹±å¯¸ï¼‰å’Œ PPDï¼ˆPPPixels Per Degree è§’åˆ†è¾¨ç‡ï¼Œåƒç´ æ¯åº¦ï¼‰ã€‚</p>\n<p><code>æ˜¯PPD ä¸æ˜¯ PDDã€‚</code></p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023663498\" alt=\"\" title=\"\" /></p>\n<h2>å®¹å™¨æ ¼å¼</h2>\n<h3>MP4</h3>\n<p>ç”±å›½é™…æ ‡å‡†åŒ–ç»„ç»‡ï¼ˆISOï¼‰å’Œå›½é™…ç”µå·¥å§”å‘˜ä¼šï¼ˆIECï¼‰ä¸‹å±çš„â€åŠ¨æ€å›¾åƒä¸“å®¶ç»„â€œï¼ˆMoving Picture Experts Groupï¼Œå³MPEGï¼‰åˆ¶å®šã€‚</p>\n<p>MP4 ååˆ†å¼€æ”¾ï¼Œå‡ ä¹å¯ä»¥ç”¨æ¥æè¿°æ‰€æœ‰çš„åª’ä½“ç»“æ„ã€‚æ”¯æŒæµåª’ä½“ï¼Œè¢«å¹¿æ³›ç”¨äº H.264/H.265 è§†é¢‘å’Œ ACC éŸ³é¢‘ï¼Œæ˜¯é«˜æ¸…è§†é¢‘çš„æ‰›æŠŠå­ã€‚</p>\n<h3>AVI</h3>\n<p>AVIï¼ˆAudio Video Interleavedï¼‰ï¼Œæ˜¯å¾®è½¯ç”¨äºå¯¹æŠ—è‹¹æœ QuickTime çš„äº§ç‰©ã€‚å®ƒå¯ä»¥è·¨å¤šä¸ªå¹³å°ä½¿ç”¨ï¼Œä¸è¿‡ä½“ç§¯è¿‡äºåºå¤§ï¼Œå‹ç¼©æ ‡å‡†ä¹Ÿä¸ç»Ÿä¸€ã€‚</p>\n<h3>FLV</h3>\n<p>FLVï¼ˆFlash Videoï¼‰æ˜¯ç›®å‰æœ€æµè¡Œçš„æµåª’ä½“æ ¼å¼ï¼Œå…¶æ–‡ä»¶ä½“ç§¯å°ã€å°è£…æ’­æ”¾ç®€å•ï¼Œéå¸¸é€‚åˆåœ¨ç½‘ç»œåœºæ™¯ä¸‹åº”ç”¨ã€‚å„å¤§è§†é¢‘ç½‘ç«™å¤§å¤šéƒ½ä¼šä½¿ç”¨ FLV æ ¼å¼ã€‚</p>\n<h3>TS,M3U8</h3>\n<p>HLS ç”± TS å’Œ M3U8 ä¸¤éƒ¨åˆ†ç»„æˆï¼š</p>\n<ul>\n <li>.m3u8 æ–‡ä»¶ï¼šä»¥ UTF-8 ç¼–ç çš„ m3u æ–‡ä»¶ã€‚</li>\n <li>.ts è§†é¢‘æ–‡ä»¶ï¼šä¸€ä¸ª m3u8 æ–‡ä»¶å¯¹åº”ç€è‹¥å¹²ä¸ª tsæ–‡ä»¶ã€‚</li>\n</ul>\n<p>m3u8 åªå­˜æ”¾äº†ä¸€äº› ts æ–‡ä»¶çš„é…ç½®ä¿¡æ¯å’Œç›¸å…³è·¯å¾„ï¼Œè€Œ ts æ–‡ä»¶å­˜æ”¾äº†è§†é¢‘çš„æ•°æ®ã€‚å½“è§†é¢‘æ’­æ”¾æ—¶ï¼Œvideo æ ‡ç­¾ä¼šè§£æ m3u8 å¹¶æ‰¾åˆ°å¯¹åº”çš„<br>ts æ–‡ä»¶è¿›è¡Œæ’­æ”¾ã€‚</br></p>\n<p>ä¸è¿‡ HLS çš„å»¶æ—¶ç›¸å¯¹è¾ƒé«˜ï¼Œå»¶æ—¶åŒ…å«äº† TCP æ¡æ‰‹ã€m3u8 æ–‡ä»¶ä¸‹è½½ä¸è§£æã€ts æ–‡ä»¶ä¸‹è½½ä¸è§£æç­‰å¤šä¸ªæ­¥éª¤ã€‚è™½ç„¶å¯ä»¥ç¼©çŸ­åˆ—è¡¨çš„é•¿åº¦å’Œé™åˆ¶å•ä¸ª ts æ–‡ä»¶çš„å¤§å°æ¥é™ä½å»¶è¿Ÿï¼Œä½†æ˜¯ä¼šé€ æˆè¯·æ±‚æ¬¡æ•°å¢åŠ ï¼ŒæœåŠ¡å™¨å‹åŠ›å¢å¤§ã€‚</p>\n<p>è‹¹æœå®˜æ–¹æ¨èçš„ ts æ—¶é•¿æ˜¯ 10sï¼Œå¤§æ¦‚ä¼šæœ‰ 30s çš„å»¶è¿Ÿã€‚</p>\n<h3>WebM</h3>\n<p>WebM ç”± Google æå‡ºï¼Œæ˜¯ä¸€ç§ä¸“ä¸º Web è®¾è®¡çš„å¼€æ”¾ï¼Œå…ç‰ˆç¨çš„åª’ä½“æ–‡ä»¶æ ¼å¼ã€‚WebM æ–‡ä»¶åŒ…å«ä½¿ç”¨ VP8 æˆ– VP9 è§†é¢‘ç¼–è§£ç å™¨å‹ç¼©çš„è§†é¢‘æµå’Œä½¿ç”¨ Vorbis æˆ– Opus éŸ³é¢‘ç¼–è§£ç å™¨å‹ç¼©çš„éŸ³é¢‘æµã€‚</p>\n<h3>OGV</h3>\n<p>OGV æ˜¯ HTML5 ä¸­çš„ä¸€ä¸ªåä¸º Ogg Theora çš„è§†é¢‘æ ¼å¼ï¼Œèµ·æºäº OGG å®¹å™¨æ ¼å¼(ç”± Xiph.Org å¼€æº)ï¼Œå®ƒä¸å—è½¯ä»¶ä¸“åˆ©çš„é™åˆ¶ã€‚</p>\n<h3>MOV</h3>\n<p>MOV æ˜¯ QuickTime ä¸­å¸¸è§çš„å½±ç‰‡æ ¼å¼ï¼Œæ‹¥æœ‰ç€å‡ºè‰²çš„å…¼å®¹èƒ½åŠ›ï¼Œå…¼å®¹ Macintosh å’Œ Windowsã€‚</p>\n<h2>ç¼–ç æ ¼å¼</h2>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023663497\" alt=\"\" title=\"\" /></p>\n<h3>H.264 (AVC)</h3>\n<p>H.264 æ˜¯ç”±å›½é™…ç”µä¿¡è”ç›Ÿå’Œå›½é™…æ ‡å‡†åŒ–ç»„ç»‡/å›½é™…ç”µå·¥å§”å‘˜ä¼šè¿åŠ¨å›¾åƒä¸“å®¶ç»„è”åˆå¼€å‘çš„è§†é¢‘å‹ç¼©æŠ€æœ¯æˆ–ç¼–è§£ç å™¨(å¦‚ MPEG-4 Part 10ï¼Œé«˜çº§è§†é¢‘ç¼–ç æˆ– AVC)ã€‚å®ƒæ˜¯åœ¨ MPEG-4 æŠ€æœ¯çš„åŸºç¡€ä¹‹ä¸Šå»ºç«‹èµ·æ¥çš„ã€‚å¹¿æ³›åº”ç”¨äºç½‘ç»œæµåª’ä½“æ•°æ®ã€ç½‘ç»œè½¯ä»¶ã€é«˜æ¸…æ™°åº¦ç”µè§†ã€å«æ˜Ÿç­‰ã€‚</p>\n<h3>H.265(HEVC)</h3>\n<p>ç”¨æ¥æ›¿ä»£ H.264/AVC ç¼–ç æ ‡å‡†ã€‚ç›¸åŒè§†é¢‘æ–‡ä»¶ä½¿ç”¨ H.265 ç¼–ç æ–¹å¼ç¼–ç åçš„æ–‡ä»¶ä½“ç§¯å¤§çº¦æ˜¯ MPEG-4 ç¼–ç åæ–‡ä»¶çš„ 1/3ã€‚</p>\n<ul>\n <li>æ”¯æŒ 4k åŠæ›´é«˜çš„åˆ†è¾¨ç‡ï¼Œç”¨æˆ·ä½“éªŒå¥½</li>\n <li>é«˜å‹ç¼©èƒ½ä¸ºç”¨æˆ·æä¾›æ›´å¤šå†…å®¹ã€é™ä½è´¹ç”¨ã€æå‡ä¸‹è½½é€Ÿåº¦</li>\n <li>æµè§ˆå™¨æ”¯æŒè¾ƒå·®ï¼Œä¸šç•Œè§£å†³æ–¹æ¡ˆï¼šlibe265.js, FFMpeg + WebAssembly</li>\n</ul>\n<h3>VP9</h3>\n<p>VP9 æ˜¯ Google ä¸ºäº†æ›¿æ¢ VP8 å¹¶ä¸ H.265/HEVC ç«äº‰æ‰€å¼€å‘çš„å…è´¹ã€å¼€æºçš„å½±åƒç¼–ç æ ¼å¼ã€‚è¶…è¿‡20äº¿ä¸ªç«¯ç‚¹æ”¯æŒVP9è§£ç ï¼ŒåŒ…æ‹¬Chromeï¼ŒOperaï¼ŒEdgeï¼ŒFirefoxå’ŒAndroidè®¾å¤‡ä»¥åŠæ•°ç™¾ä¸‡å°æ™ºèƒ½ç”µè§†ã€‚</p>\n<p>VP10 è§†é¢‘ç¼–ç çš„æŠ€æœ¯è¢«æ”¶å½•åœ¨å¼€æ”¾åª’ä½“è”ç›Ÿæ‰€é¢†å¯¼çš„ AV1 ç¼–ç ä¸­ï¼Œå› æ­¤ Google è¡¨ç¤ºä¸ä¼šåœ¨å†…éƒ¨éƒ¨ç½²æˆ–æ­£å¼å‘å¸ƒ VP10ã€‚</p>\n<h3>AV1</h3>\n<p>AV1ï¼ˆAlliance for Open Media Video 1ï¼‰æ˜¯ç”± <a href=\"https://aomedia.org/about/\" rel=\"nofollow noreferrer\">AOMï¼ˆAlliance for Open Mediaï¼Œå¼€æ”¾åª’ä½“è”ç›Ÿï¼‰</a>åˆ¶å®šçš„ä¸€ä¸ªå¼€æºã€å…ç‰ˆæƒè´¹çš„è§†é¢‘ç¼–ç æ ¼å¼ï¼Œä¸“é—¨ä¸ºé€šè¿‡ç½‘ç»œè¿›è¡Œæµä¼ è¾“è€Œè®¾è®¡ã€‚IETF ä¹Ÿå°†è¿™é¡¹å·¥ä½œæ ‡å‡†åŒ–ä¸ºäº’è”ç½‘è§†é¢‘ç¼–è§£ç å™¨(NetVC)ã€‚</p>\n<p>AV1 çš„ç›®æ ‡æ˜¯è§£å†³ H.265 æ˜‚è´µçš„ä¸“åˆ©è´¹ç”¨å’Œå¤æ‚çš„ä¸“åˆ©æˆæƒé—®é¢˜å¹¶æˆä¸ºæ–°ä¸€ä»£é¢†å…ˆçš„å…ç‰ˆæƒè´¹çš„ç¼–ç æ ‡å‡†ã€‚å®ƒæ˜¯ Google åˆ¶å®šçš„ VP9 æ ‡å‡†çš„ç»§ä»»è€…ï¼Œä¹Ÿæ˜¯ H.265 å¼ºæœ‰åŠ›çš„ç«äº‰è€…ã€‚</p>\n<ul>\n <li>YouTube å·²å¼€å§‹å°è¯•åœ¨éƒ¨åˆ†å½±ç‰‡ä½¿ç”¨AV1è§†é¢‘æ ¼å¼ã€‚</li>\n <li>2020å¹´2æœˆ5æ—¥ï¼ŒNetflixå¼€å§‹åœ¨Androidè®¾å¤‡ä¸Šæœ‰é™åº¦ä½¿ç”¨AV1è§†é¢‘æ ¼å¼æ’­æ”¾å½±ç‰‡ï¼Œå…¶å‹ç¼©æ•ˆç‡è¾ƒåŸæœ¬çš„VP9æå‡20%</li>\n <li>2020å¹´4æœˆ30æ—¥ï¼Œçˆ±å¥‡è‰ºå®£å¸ƒåœ¨ä¸ªäººç”µè„‘ç½‘é¡µæµè§ˆå™¨å’ŒAndroidè®¾å¤‡ä¸Šæ”¯æŒAV1è§†é¢‘æ ¼å¼ã€‚</li>\n</ul>\n<h2>å‚è€ƒ</h2>\n<ul>\n <li><a href=\"https://zh.wikipedia.org/wiki/WebM\" rel=\"nofollow noreferrer\">WebM</a></li>\n <li><a href=\"https://zh.wikipedia.org/wiki/VP9\" rel=\"nofollow noreferrer\">VP9</a></li>\n <li><a href=\"https://zh.wikipedia.org/wiki/AOMedia_Video_1\" rel=\"nofollow noreferrer\">AOMedia Video 1</a></li>\n <li><a href=\"https://zh.wikipedia.org/wiki/H.264/MPEG-4_AVC\" rel=\"nofollow noreferrer\">H.264/MPEG-4 AVC</a></li>\n <li><a href=\"https://www.yuque.com/webmedia/handbook/knowledge-map\" rel=\"nofollow noreferrer\">æ·˜ç³»æŠ€æœ¯å¤šåª’ä½“å‰ç«¯æ‰‹å†Œ</a></li>\n</ul>\n<h2>â¤ï¸çˆ±å¿ƒä¸‰è¿å‡»</h2>\n<p>1.çœ‹åˆ°è¿™é‡Œäº†å°±ç‚¹ä¸ªèµæ”¯æŒä¸‹å§ï¼Œä½ çš„<strong>èµ</strong>æ˜¯æˆ‘åˆ›ä½œçš„åŠ¨åŠ›ã€‚</p>\n<p>2.å…³æ³¨å…¬ä¼—å·å‰ç«¯é£Ÿå ‚ï¼Œ<strong>ä½ çš„å‰ç«¯é£Ÿå ‚ï¼Œè®°å¾—æŒ‰æ—¶åƒé¥­</strong>ï¼</p>\n<p>3.æœ¬æ–‡å·²æ”¶å½•åœ¨å‰ç«¯é£Ÿå ‚<code>Github</code> <a href=\"https://github.com/Geekhyt/front-end-canteen\" rel=\"nofollow noreferrer\">github.com/Geekhyt</a>ï¼Œæ±‚ä¸ªå°æ˜Ÿæ˜Ÿï¼Œæ„Ÿè°¢Starã€‚</p>","descriptionType":"html","publishedDate":"Mon, 17 Aug 2020 13:40:23 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/bVbLr7m","linkMd5":"b02edc6d556383db4bdfaad310312379","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn74@2020_1/2020/08/24/23-08-22-400_863f702969491e2a.webp","destWidth":800,"destHeight":340,"sourceBytes":81708,"destBytes":24254,"author":"ç«¥æ¬§å·´","articleImgCdnMap":{"https://segmentfault.com/img/bVbLr7m":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn74@2020_1/2020/08/24/23-08-22-400_863f702969491e2a.webp","https://segmentfault.com/img/remote/1460000023663498":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn92@2020_4/2020/08/24/23-08-44-175_2d68dd852b72db7e.webp","https://segmentfault.com/img/remote/1460000023663497":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn95@2020_5/2020/08/24/23-08-44-284_d3fa1282d5721ffb.webp"},"publishedOrCreatedDate":1598310388563},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"Swiftæšä¸¾å…³è”å€¼çš„å†…å­˜æ¢ç©¶","link":"https://segmentfault.com/a/1190000023669152","description":"<pre><code class=\"swift\">enum Season {\n   case Spring, Summer, Autumn, Winter\n}\nlet s = Season.Spring</code></pre> \n<p>è¿™æ˜¯æšä¸¾æœ€åŸºç¡€çš„ç”¨æ³•ï¼Œä½†æ˜¯åœ¨swiftä¸­ï¼Œå¯¹æšä¸¾çš„åŠŸèƒ½è¿›è¡Œäº†åŠ å¼ºï¼Œä¹Ÿå°±æ˜¯å…³è”å€¼ã€‚</p> \n<p>å…³è”å€¼å¯ä»¥å°†é¢å¤–ä¿¡æ¯é™„åŠ åˆ° enum caseä¸­ï¼Œåƒä¸‹é¢è¿™æ ·å­ã€‚</p> \n<pre><code class=\"swift\">\nenum Test {\n    case test1(v1: Int, v2: Int, v3: Int)\n    case test2(v1: Int, v2: Int)\n    case test3(v1: Int)\n    case test4\n}\nlet t = Test.test1(v1: 1, v2: 2, v3: 3)\n    \nswitch t {\ncase .test1(let v1, let v2, let v3):\n    print(v1, v2, v3)\ndefault:\n    break\n}\n// è¾“å‡ºï¼š 1 2 3</code></pre> \n<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæšä¸¾å€¼tçš„æ—¶å€™ï¼Œè®¾ç½®ä»–çš„é€‰é¡¹ä¸ºtest1ï¼ŒåŒæ—¶å¯ä»¥å…³è”3ä¸ªIntç±»å‹çš„å€¼ï¼Œç„¶ååœ¨switchä¸­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æŠŠè¿™3ä¸ªIntå€¼å–å‡ºæ¥è¿›è¡Œä½¿ç”¨ã€‚</p> \n<p>æˆ‘ä»¬ä»Šå¤©çš„ä¸»è¦ä»»åŠ¡å°±æ˜¯æ¢ç´¢ä¸€ä¸‹æœ‰å…³è”å€¼çš„æšä¸¾ç±»å‹ï¼Œå†åº•å±‚çš„å†…å­˜å¸ƒå±€æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œè¿™äº›å€¼éƒ½æ˜¯æ€ä¹ˆå‚¨å­˜çš„ã€‚</p> \n<p>åœ¨OCä¸­æˆ‘ä»¬ä½¿ç”¨sizeOfæ­¤ç±»æ–¹æ³•ï¼Œå¯ä»¥è¾“å‡ºä¸€ä¸ªå˜é‡å ç”¨å†…å­˜çš„å¤§å°ï¼Œåœ¨swiftä¸­ä¹Ÿæœ‰æ­¤ç±»çš„å·¥ä½œç±»ï¼Œé‚£å°±æ˜¯MemoryLayoutã€‚</p> \n<pre><code class=\"swift\">print(MemoryLayout&lt;Int&gt;.size)// å®é™…ä½¿ç”¨å†…å­˜å¤§å°\nprint(MemoryLayout&lt;Int&gt;.stride)//åˆ†é…å†…å­˜å¤§å°\nprint(MemoryLayout&lt;Int&gt;.alignment)//å†…å­˜å¯¹é½å‚æ•°\n\n// è¾“å‡º 8 8 8 </code></pre> \n<p>ä¸Šé¢çš„ä¾‹å­æ˜¯åªæ˜¯ç®€å•çš„å®ä¾‹MemoryLayoutçš„ç”¨æ³•ï¼Œè¿™ä¸ªæˆ‘ä»¬çŸ¥é“ï¼Œåœ¨64ä½çš„ç³»ç»Ÿä¸­Intç±»å‹ç¡®å®æ˜¯å ç”¨8ä¸ªå­—èŠ‚ï¼ˆ64ä½ï¼‰ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±çœ‹ä¸€ä¸‹æšä¸¾çš„å†…å­˜å ç”¨æƒ…å†µã€‚</p> \n<p>ç‚¹å‡»Xcodeèœå•æ ä¸­çš„Debug -&gt; Debug Workflow -&gt; View Memoryï¼Œç„¶ååœ¨ä¸‹é¢çº¢è‰²æ¡†ä¸­è¾“å…¥å˜é‡çš„å†…å­˜åœ°å€ï¼Œå°±å¯ä»¥çœ‹åˆ°å˜é‡çš„å†…å­˜ä½¿ç”¨æƒ…å†µã€‚</p> \n<p>ä½¿ç”¨swiftåï¼Œä»xcodeæ²¡æ³•ç›´æ¥æ‰“å°å˜é‡çš„å†…å­˜åœ°å€ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†githubä¸Šçš„ä¸€ä¸ªå·¥å…·ç±»(<a href=\"https://segmentfault.com/a/1190000023669152#\">githubé“¾æ¥</a>)æ¥å¸®åŠ©æˆ‘ä»¬è¾“å‡ºå˜é‡çš„å†…å­˜åœ°å€ã€‚</p> \n<p><img src=\"https://segmentfault.com/img/bVbLty0\" alt=\"1.png\" title=\"1.png\" /></p> \n<p>å‡†å¤‡å·¥ä½œå®Œæˆåï¼Œæˆ‘ä»¬å…ˆä»æœ€åŸºç¡€çš„æšä¸¾å¼€å§‹ã€‚</p> \n<pre><code class=\"swift\">\nenum Season {\n    case Spring, Summer, Autumn, Winter\n}\nprint(\"å®é™…å ç”¨:\",MemoryLayout&lt;Season&gt;.size)\nprint(\"åˆ†é…:\",MemoryLayout&lt;Season&gt;.stride)\nprint(\"å¯¹é½å‚æ•°:\", MemoryLayout&lt;Season&gt;.alignment)\n    \nvar s = Season.Spring\nprint(\"å†…å­˜åœ°å€\",Mems.ptr(ofVal: &amp;s))\n    \nprint(\"å†…å­˜æ•°æ®\",Mems.memStr(ofVal: &amp;s, alignment: .one))\n    \ns = Season.Summer\nprint(\"å†…å­˜æ•°æ®\",Mems.memStr(ofVal: &amp;s, alignment: .one))\n    \ns = Season.Autumn\nprint(\"å†…å­˜æ•°æ®\",Mems.memStr(ofVal: &amp;s, alignment: .one))\n    \ns = Season.Winter\nprint(\"å†…å­˜æ•°æ®\",Mems.memStr(ofVal: &amp;s, alignment: .one))\n</code></pre> \n<p>æ³¨ï¼šMems.memStrå¯ä»¥ç›´æ¥æ‰“å°å†…å­˜æ•°æ®ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨æ¯æ¬¡æ‹¿åˆ°åœ°å€å†å»å·¥å…·ä¸­çœ‹äº†</p> \n<pre><code>å®é™…å ç”¨: 1\nåˆ†é…: 1\nå¯¹é½å‚æ•°: 1\nå†…å­˜åœ°å€ 0x00007ffee753f0f0\nå†…å­˜æ•°æ® 0x00\nå†…å­˜æ•°æ® 0x01\nå†…å­˜æ•°æ® 0x02\nå†…å­˜æ•°æ® 0x03</code></pre> \n<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ç§æ™®é€šçš„æšä¸¾ç±»å‹ï¼Œåªå ç”¨ä¸€ä¸ªå­—èŠ‚ã€‚è€Œä¸”é€šè¿‡æˆ‘ä»¬å¯¹å˜é‡è®¾ç½®ä¸åŒçš„æšä¸¾å€¼ï¼Œæ‰“å°çš„è¿™ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œå…¶å®ä¹Ÿå°±æ˜¯ä½¿ç”¨è¿™ä¸€ä¸ªå­—èŠ‚é€šè¿‡è®¾ç½®ä¸åŒçš„æ•°å€¼æ¥è¡¨ç¤ºä¸åŒçš„æšä¸¾å€¼ï¼Œè¿™æ ·çš„è¯å…¶å®å¯ä»¥è‡³å°‘å‚¨å­˜0x00-0xFFå…±256ä¸ªå€¼ã€‚é‚£å¦‚æœè¶…è¿‡256ä¸ªcaseå‘¢ï¼Ÿå…¶å®æˆ‘è§‰å¾—æ²¡æœ‰å¿…è¦è€ƒè™‘è¿™ç§æƒ…å†µï¼Œæšä¸¾æœ¬æ¥è®¾è®¡å‡ºå°±æ˜¯ä¸ºäº†åŒºåˆ†æœ‰é™ä¸­æƒ…å†µï¼Œå¦‚æœå¤ªå¤šï¼Œå°±åƒ200å¤šä¸ªï¼Œé‚£å®Œå…¨å¯ä»¥ä½¿ç”¨Intæ¥è®¾ç½®ä¸åŒçš„å€¼äº†ï¼Œå°±æ²¡å¿…è¦ç”¨æšä¸¾äº†ï¼Œå½“ç„¶ï¼Œå¦‚æœæ‚¨æ„¿æ„æ¢ç©¶ä¸€ä¸‹çš„è¯ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p> \n<p>æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå¸¦å…³è”å€¼çš„æšä¸¾æ¥çœ‹ä¸€ä¸‹ã€‚</p> \n<pre><code class=\"swift\">\nenum Test {\n    case test1(v1: Int, v2: Int, v3: Int)\n    case test2(v1: Int, v2: Int)\n    case test3(v1: Int)\n    case test4\n}\n    \nprint(\"å®é™…å ç”¨:\",MemoryLayout&lt;Test&gt;.size)\nprint(\"åˆ†é…:\",MemoryLayout&lt;Test&gt;.stride)\nprint(\"å¯¹é½å‚æ•°:\", MemoryLayout&lt;Test&gt;.alignment)\n    \nvar t = Test.test1(v1: 1, v2: 2, v3: 3)\nprint(\"å†…å­˜åœ°å€\",Mems.ptr(ofVal: &amp;t))\n    \nprint(\"å†…å­˜æ•°æ®\",Mems.memStr(ofVal: &amp;t, alignment: .one))\n    \nt = Test.test2(v1: 4, v2: 5)\nprint(\"å†…å­˜æ•°æ®\",Mems.memStr(ofVal: &amp;t, alignment: .one))\n    \nt = Test.test3(v1: 6)\nprint(\"å†…å­˜æ•°æ®\",Mems.memStr(ofVal: &amp;t, alignment: .one))\n    \nt = Test.test4\nprint(\"å†…å­˜æ•°æ®\",Mems.memStr(ofVal: &amp;t, alignment: .one))\n</code></pre> \n<p>ä¸‹é¢æ˜¯è¾“å‡º, ä¸ºäº†èƒ½ç›´è§‚ä¸€ä¸‹ï¼Œæˆ‘ç»™æ’äº†å‡ ä¸ªæ¢è¡Œ</p> \n<pre><code class=\"swift\">å®é™…å ç”¨: 25\nåˆ†é…: 32\nå¯¹é½å‚æ•°: 8\nå†…å­˜åœ°å€ 0x00007ffee0afe0d8\nå†…å­˜æ•°æ® \n0x01 0x00 0x00 0x00 0x00 0x00 0x00 0x00 \n0x02 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n0x03 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n0x00 \n0x00 0x00 0x00 0x00 0x00 0x00 0x00\nå†…å­˜æ•°æ® \n0x04 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n0x05 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n0x01 \n0x00 0x00 0x00 0x00 0x00 0x00 0x00\nå†…å­˜æ•°æ® \n0x06 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 \n0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 \n0x02 \n0x00 0x00 0x00 0x00 0x00 0x00 0x00\nå†…å­˜æ•°æ® \n0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 \n0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 \n0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 \n0x03 \n0x00 0x00 0x00 0x00 0x00 0x00 0x00</code></pre> \n<p>å®é™…å ç”¨äº†25ä¸ªå­—èŠ‚ï¼Œæˆ‘ä»¬è‡³å°‘å¯ä»¥ç¡®å®šï¼Œæšä¸¾çš„å…³è”å€¼æ˜¯å­˜å‚¨åœ¨æšä¸¾å€¼çš„å†…å­˜ä¸­çš„ã€‚</p> \n<p>ä½†æ˜¯é€šè¿‡è¿™ä¸€ä¸ªä¾‹å­å…¶å®å¯èƒ½è¿˜çœ‹ä¸å‡ºæœ‰ä»€ä¹ˆè§„å¾‹ï¼Œå¤§å®¶å¯ä»¥å¤šç”¨å‡ ä¸ªä¾‹å­æ¥éªŒè¯ï¼Œè¿™æ˜¯æˆ‘å°±ç›´æ¥è¯´ç»“è®ºäº†ã€‚</p> \n<p>æœ‰å…³è”å€¼å¾—æšä¸¾å®é™…å ç”¨çš„å†…å­˜æ˜¯<strong>æœ€å¤šå…³è”å€¼å ç”¨çš„å†…å­˜+1</strong>ï¼Œåœ¨æˆ‘ä»¬è¿™ä¸ªTestä¸­ï¼Œtest1çš„å…³è”å€¼æ˜¯æœ€å¤šçš„ï¼Œæœ‰3ä¸ªIntç±»å‹çš„å…³è”å€¼ï¼Œæ‰€ä»¥è¦8*3=24å­—èŠ‚æ¥å­˜æ”¾å…³è”å€¼ï¼Œä½†æ˜¯è¿˜éœ€è¦ä¸€ä¸ªå­—èŠ‚æ¥å‚¨å­˜ï¼ˆè¾¨åˆ«ï¼‰æ˜¯å“ªä¸€ä¸ªcaseã€‚</p> \n<p>å¸¦ç€è¿™ä¸ªç»“è®ºæˆ‘ä»¬çœ‹ä¸€ä¸‹è¾“å‡ºçš„ç»“æœï¼š</p> \n<p>å½“t=.test1æ—¶ï¼Œå‰é¢24ä¸ªå­—èŠ‚åˆ†é…ç»™3ä¸ªIntç±»å‹å…³è”å€¼ï¼Œåˆ†åˆ«å­˜å‚¨äº†1ï¼Œ2ï¼Œ3ï¼Œ ç¬¬25ä¸ªå­—èŠ‚æ˜¯0ã€‚</p> \n<p>å½“t=.test2æ—¶ï¼Œå‰é¢24ä¸ªå­—èŠ‚è¿˜æ˜¯ç•™ç»™å…³è”å€¼çš„ï¼Œä½†æ˜¯test2åªæœ‰ä¸¤ä¸ªå…³è”å€¼ï¼Œæ‰€ä»¥ä½¿ç”¨äº†å‰é¢16ä¸ªå­—èŠ‚åˆ†é…ç»™ä»–çš„å…³è”å€¼ï¼Œæ­¤æ—¶17åˆ°24è¿™8å­—èŠ‚å°±ç©ºç½®ï¼Œç¬¬25ä¸ªå­—èŠ‚æ˜¯1ã€‚</p> \n<p>...</p> \n<p>æœ€åå½“t = test4 , æ²¡æœ‰å…³è”å€¼ï¼Œæ‰€ä»¥å‰é¢çš„å­—èŠ‚éƒ½æ˜¯0ï¼Œ åªæœ‰ç¬¬25ä¸ªå­—èŠ‚æ˜¯3</p> \n<p>ä»¥æ­¤ç±»æ¨...</p> \n<p>ç¬¬25ä¸ªå­—èŠ‚å…¶å®å®Œå…¨å¯ä»¥çœ‹æˆä¸€ä¸ªè¾¨è¯†ä½ï¼Œæˆ–è€…è¯´ç¬¬25ä¸ªå­—èŠ‚å°±æ˜¯æšä¸¾çš„æœ¬è´¨ï¼Œé€šè¿‡ä¸åŒå€¼æ¥åŒºåˆ†ä¸åŒcaseï¼Œåªæ˜¯å› ä¸ºæœ‰äº†å…³è”å€¼ï¼Œæ‰€ä»¥å¼€è¾Ÿäº†æ›´å¤šçš„ç©ºé—´æ¥å­˜å‚¨è€Œå·²ã€‚</p> \n<p>åé¢å¤šä½™çš„å­—èŠ‚éƒ½æ˜¯ä¸ºäº†å†…å­˜å¯¹é½ï¼Œå†…å­˜å¯¹é½ç›¸å…³çš„çŸ¥è¯†å¤§å®¶å¯ä»¥è‡ªè¡Œä¸Šç½‘æŸ¥é˜…ã€‚</p> \n<p>è¡¥å……ï¼š<br>æ—¢ç„¶è¯´åˆ°äº†å…³è”å€¼ï¼Œé‚£å°±é¡ºä¾¿å¯¹æšä¸¾åŸå§‹å€¼è¯´ä¸¤å¥ã€‚å…·é€šè¿‡ä½ æ‰“å°å¸¦åŸå§‹å€¼çš„æšä¸¾çš„å†…å­˜æ•°æ®ï¼Œå‘ç°æ˜¯å¦å¸¦æœ‰åŸå§‹å€¼å¯¹æšä¸¾çš„å†…å­˜å ç”¨å¹¶æ— å½±å“ï¼Œæ‰€ä»¥åŸå§‹å€¼åº”è¯¥ä¸æ˜¯å­˜å‚¨åœ¨æšä¸¾å˜é‡çš„å†…éƒ¨çš„ã€‚å¤§å®¶å¯ä»¥è‡ªå·±è¯•éªŒä¸€ä¸‹</br></p>","descriptionType":"html","publishedDate":"Tue, 18 Aug 2020 03:37:47 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/bVbLty0","linkMd5":"c9849a6e55ae7d588b45b8503f19231a","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn82@2020_3/2020/08/24/23-08-23-222_57802582ab559705.webp","destWidth":800,"destHeight":725,"sourceBytes":46146,"destBytes":17710,"author":"Sunxb","articleImgCdnMap":{"https://segmentfault.com/img/bVbLty0":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn82@2020_3/2020/08/24/23-08-23-222_57802582ab559705.webp"},"publishedOrCreatedDate":1598310388563},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"å­¦ä¹ Vue3.0,å…ˆæ¥äº†è§£ä¸€ä¸‹Proxy","link":"https://segmentfault.com/a/1190000023684153","description":"<blockquote>\n äº§å“ç»ç†èº«æ—è¿‡ï¼Œéœ€æ±‚å˜æ›´é€ƒä¸è¿‡ã€‚\n <br>æµ‹è¯•å§å§çœ¯çœ¼ç¬‘ï¼Œä»Šæ™šbugå¿…ç„¶å¤šã€‚</br>\n</blockquote>\n<p>æ®æ‚‰<code>Vue3.0</code>çš„æ­£å¼ç‰ˆå°†è¦åœ¨æœ¬æœˆ(8æœˆ)å‘å¸ƒï¼Œä»å‘å¸ƒåˆ°æ­£å¼æŠ•å…¥åˆ°æ­£å¼é¡¹ç›®ä¸­ï¼Œè¿˜éœ€è¦ä¸€å®šçš„è¿‡æ¸¡æœŸï¼Œä½†æˆ‘ä»¬ä¸èƒ½ä¸€ç›´ç­‰åˆ°<code>Vue3</code>æ­£å¼æŠ•å…¥åˆ°é¡¹ç›®ä¸­çš„æ—¶å€™æ‰å»å­¦ä¹ ï¼Œæå‰å­¦ä¹ ï¼Œè®©ä½ æ›´å¿«ä¸€æ­¥æŒæ¡<code>Vue3.0</code>,å‡èŒåŠ è–ªè¿å¨¶ç™½å¯Œç¾å°±é å®ƒäº†ã€‚ä¸è¿‡åœ¨å­¦ä¹ <code>Vue3</code>ä¹‹å‰ï¼Œè¿˜éœ€è¦å…ˆäº†è§£ä¸€ä¸‹<code>Proxy</code>,å®ƒæ˜¯<code>Vue3.0</code>å®ç°æ•°æ®åŒå‘ç»‘å®šçš„åŸºç¡€ã€‚</p>\n<blockquote>\n æœ¬æ–‡æ˜¯ä½œè€…å…³äºVue3.0ç³»åˆ—çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œåç»­ä½œè€…å°†ä¼šæ¯å‘¨å‘å¸ƒä¸€ç¯‡Vue3.0ç›¸å…³ï¼Œå¦‚æœå–œæ¬¢ï¼Œéº»çƒ¦ç»™å°ç¼–ä¸€ä¸ªèµï¼Œè°¢è°¢\n</blockquote>\n<h3>äº†è§£ä»£ç†æ¨¡å¼</h3>\n<h4>ä¸€ä¸ªä¾‹å­</h4>\n<p>ä½œä¸ºä¸€ä¸ªå•èº«é’¢é“ç›´ç”·ç¨‹åºå‘˜ï¼Œå°ç‹æœ€è¿‘é€æ¸å–œæ¬¢ä¸Šäº†å‰å°å°å¦¹ï¼Œä¸è¿‡å‘¢ï¼Œä»–åˆå’Œå‰å°å°å¦¹ä¸ç†Ÿï¼Œæ‰€ä»¥å†³å®šå§”æ‰˜ä¸å‰ç«¯å°å¦¹æ¯”è¾ƒç†Ÿçš„<code>UI</code>å°å§å§å¸®å¿™ç»™è‡ªå·±æ­æ¡¥å¼•çº¿ã€‚å°ç‹äºæ˜¯è¯·<code>UI</code>å°å§å§åƒäº†ä¸€é¡¿å¤§é¤ï¼Œç„¶åæ‹¿å‡ºä¸€å°æƒ…ä¹¦å§”æ‰˜å®ƒè½¬äº¤ç»™å‰å°å°å¦¹ï¼Œæƒ…ä¹¦ä¸Šå†™çš„ <code>æˆ‘å–œæ¬¢ä½ ï¼Œæˆ‘æƒ³å’Œä½ ç¡è§‰</code>ï¼Œä¸æ„§é’¢é“ç›´ç”·ã€‚ä¸è¿‡è¿™æ ·å†™è‚¯å®šæ˜¯æ²¡æˆçš„ï¼Œ<code>UI</code>å°å§å§åƒäººå˜´çŸ­ï¼Œäºæ˜¯å¸®å¿™æ”¹äº†æƒ…ä¹¦ï¼Œæ”¹æˆäº†<code>æˆ‘å–œæ¬¢ä½ ï¼Œæˆ‘æƒ³å’Œä½ ä¸€èµ·åœ¨æ™¨è¾‰çš„æ²æµ´ä¸‹èµ·åºŠ</code>ï¼Œç„¶åäº¤ç»™äº†å‰å°å°å¦¹ã€‚è™½ç„¶æœ‰æ²¡æœ‰æ’®åˆæˆåŠŸä¸æ¸…æ¥šå•Šï¼Œä¸è¿‡è¿™ä¸ªæ•…äº‹å‘Šè¯‰æˆ‘ä»¬ï¼Œå°ç‹æ´»è¯¥å•èº«ç‹—ã€‚</p>\n<p>å…¶å®ä¸Šé¢å°±æ˜¯ä¸€ä¸ªæ¯”è¾ƒå…¸å‹çš„ä»£ç†æ¨¡å¼çš„ä¾‹å­ï¼Œå°ç‹æƒ³ç»™å‰å°å°å¦¹é€æƒ…ä¹¦ï¼Œå› ä¸ºä¸ç†Ÿæ‰€ä»¥å§”æ‰˜<code>UIå°å§å§</code>ï¼Œ<code>UI</code>å°å§å§ç›¸å½“äºä»£ç†äººï¼Œä»£æ›¿å°ç‹å®Œæˆäº†é€æƒ…ä¹¦çš„äº‹æƒ…ã€‚</p>\n<h4>å¼•ç”³</h4>\n<p>é€šè¿‡ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬æƒ³æƒ³<code>Vue</code>çš„æ•°æ®å“åº”åŸç†ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ®µä»£ç </p>\n<pre><code class=\"javascript\">\nconst xiaowang = {\n  love: 'æˆ‘å–œæ¬¢ä½ ï¼Œæˆ‘æƒ³å’Œä½ ç¡è§‰'\n}\n// é€ç»™å°å§å§æƒ…ä¹¦\nfunction sendToMyLove(obj) {\n    console.log(obj.love)\n    return 'æµæ°“ï¼Œæ»š'\n}\nconsole.log(sendToMyLove(xiaowang))</code></pre>\n<p>å¦‚æœæ²¡æœ‰<code>UI</code>å°å§å§ä»£æ›¿é€æƒ…ä¹¦ï¼Œæ˜¾ç¤ºç»“å±€æ˜¯æ‚²æƒ¨çš„ï¼Œæƒ³æƒ³<code>Vue2.0</code>çš„åŒå‘ç»‘å®šï¼Œé€šè¿‡<code>Object.defineProperty</code>æ¥ç›‘å¬çš„å±æ€§ <code>get</code>,<code>set</code>æ–¹æ³•æ¥å®ç°åŒå‘ç»‘å®š,è¿™ä¸ª<code>Object.defineProperty</code>å°±ç›¸å½“äº<code>UI</code>å°å§å§</p>\n<pre><code class=\"javascript\">const xiaowang = {\n  loveLetter: 'æˆ‘å–œæ¬¢ä½ ï¼Œæˆ‘æƒ³å’Œä½ ç¡è§‰'\n}\n// UIå°å§å§ä»£ç†\nObject.defineProperty(xiaowang,'love', {\n  get() {\n    return xiaowang.loveLetter.replace('ç¡è§‰','ä¸€èµ·åœ¨æ™¨è¾‰çš„æ²æµ´ä¸‹èµ·åºŠ')\n  }\n})\n\n// é€ç»™å°å§å§æƒ…ä¹¦\nfunction sendToMyLove(obj) {\n    console.log(obj.love)\n    return 'å°ä¼™å­è¿˜æŒºæœ‰è¯—æƒ…ç”»æ„çš„ä¹ˆï¼Œä¸è¿‡è€å¨˜ä¸å–œæ¬¢ï¼Œæ»š'\n}\nconsole.log(sendToMyLove(xiaowang))</code></pre>\n<p>è™½ç„¶ä¾ç„¶æ˜¯ä¸€ä¸ªæ‚²æƒ¨çš„æ•…äº‹ï¼Œå› ä¸ºé€å¥”é©°çš„æˆåŠŸç‡å¯èƒ½ä¼šæ›´é«˜ä¸€äº›ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡<code>Object.defineproperty</code>å¯ä»¥å¯¹å¯¹è±¡çš„å·²æœ‰å±æ€§è¿›è¡Œæ‹¦æˆªï¼Œç„¶ååšä¸€äº›é¢å¤–çš„æ“ä½œã€‚</p>\n<h4>å­˜åœ¨çš„é—®é¢˜</h4>\n<p>åœ¨<code>Vue2.0</code>ä¸­ï¼Œæ•°æ®åŒå‘ç»‘å®šå°±æ˜¯é€šè¿‡<code>Object.defineProperty</code>å»ç›‘å¬å¯¹è±¡çš„æ¯ä¸€ä¸ªå±æ€§ï¼Œç„¶ååœ¨<code>get</code>,<code>set</code>æ–¹æ³•ä¸­é€šè¿‡å‘å¸ƒè®¢é˜…è€…æ¨¡å¼æ¥å®ç°çš„æ•°æ®å“åº”ï¼Œä½†æ˜¯å­˜åœ¨ä¸€å®šçš„ç¼ºé™·ï¼Œæ¯”å¦‚åªèƒ½ç›‘å¬å·²å­˜åœ¨çš„å±æ€§ï¼Œå¯¹äºæ–°å¢åˆ é™¤å±æ€§å°±æ— èƒ½ä¸ºåŠ›äº†ï¼ŒåŒæ—¶æ— æ³•ç›‘å¬æ•°ç»„çš„å˜åŒ–ï¼Œæ‰€ä»¥åœ¨<code>Vue3.0</code>ä¸­å°†å…¶æ¢æˆäº†åŠŸèƒ½æ›´å¼ºå¤§çš„<code>Proxy</code>ã€‚</p>\n<h3>äº†è§£Proxy</h3>\n<blockquote>\n <code>Proxy</code>æ˜¯\n <code>ES6</code>æ–°æ¨å‡ºçš„ä¸€ä¸ªç‰¹æ€§ï¼Œå¯ä»¥ç”¨å®ƒå»æ‹¦æˆª\n <code>js</code>æ“ä½œçš„æ–¹æ³•ï¼Œä»è€Œå¯¹è¿™äº›æ–¹æ³•è¿›è¡Œä»£ç†æ“ä½œã€‚\n</blockquote>\n<h4>ç”¨Proxyé‡å†™ä¸Šé¢çš„ä¾‹å­</h4>\n<p>æ¯”å¦‚æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>Proxy</code>å¯¹ä¸Šé¢çš„é€æƒ…ä¹¦æƒ…èŠ‚è¿›è¡Œé‡å†™:</p>\n<pre><code class=\"javascript\">const xiaowang = {\n  loveLetter: 'æˆ‘å–œæ¬¢ä½ ï¼Œæˆ‘æƒ³å’Œä½ ç¡è§‰'\n}\nconst proxy = new Proxy(xiaowang, {\n  get(target,key) {\n    if(key === 'loveLetter') {\n      return target[key].replace('ç¡è§‰','ä¸€èµ·åœ¨æ™¨è¾‰çš„æ²æµ´ä¸‹èµ·åºŠ')\n    }\n  }\n})\n// é€ç»™å°å§å§æƒ…ä¹¦\nfunction sendToMyLove(obj) {\n    console.log(obj.loveLetter)\n    return 'å°ä¼™å­è¿˜æŒºæœ‰è¯—æƒ…ç”»æ„çš„ä¹ˆï¼Œä¸è¿‡è€å¨˜ä¸å–œæ¬¢ï¼Œæ»š'\n}\nconsole.log(sendToMyLove(proxy))</code></pre>\n<h4>å†çœ‹è¿™æ ·ä¸€ä¸ªåœºæ™¯</h4>\n<p>è¯·åˆ†åˆ«ä½¿ç”¨<code>Object.defineProperty</code>å’Œ<code>Proxy</code>å®Œå–„ä¸‹é¢çš„ä»£ç é€»è¾‘.</p>\n<pre><code class=\"javascript\">function observe(obj, callback) {}\n\nconst obj = observe(\n  {\n    name: 'å­å›',\n    sex: 'ç”·'\n  },\n  (key, value) =&gt; {\n    console.log(`å±æ€§[${key}]çš„å€¼è¢«ä¿®æ”¹ä¸º[${value}]`)\n  }\n)\n\n// è¿™æ®µä»£ç æ‰§è¡Œåï¼Œè¾“å‡º å±æ€§[name]çš„å€¼è¢«ä¿®æ”¹ä¸º[å¦¹çº¸]\nobj.name = 'å¦¹çº¸'\n\n// è¿™æ®µä»£ç æ‰§è¡Œåï¼Œè¾“å‡º å±æ€§[sex]çš„å€¼è¢«ä¿®æ”¹ä¸º[å¥³]\nobj.sex = 'å¥³'</code></pre>\n<p>çœ‹äº†ä¸Šé¢çš„ä»£ç ï¼Œå¸Œæœ›å¤§å®¶å¯ä»¥å…ˆè‡ªè¡Œå®ç°ä»¥ä¸‹ï¼Œä¸‹é¢æˆ‘ä»¬åˆ†åˆ«ç”¨<code>Object.defineProperty</code>å’Œ<code>Proxy</code>å»å®ç°ä¸Šé¢çš„é€»è¾‘.</p>\n<ol>\n <li>ä½¿ç”¨<code>Object.defineProperty</code></li>\n</ol>\n<pre><code class=\"javascript\">/**\n * è¯·å®ç°è¿™ä¸ªå‡½æ•°ï¼Œä½¿ä¸‹é¢çš„ä»£ç é€»è¾‘æ­£å¸¸è¿è¡Œ\n * @param {*} obj å¯¹è±¡\n * @param {*} callback å›è°ƒå‡½æ•°\n */\nfunction observe(obj, callback) {\n  const newObj = {}\n  Object.keys(obj).forEach(key =&gt; {\n    Object.defineProperty(newObj, key, {\n      configurable: true,\n      enumerable: true,\n      get() {\n        return obj[key]\n      },\n      // å½“å±æ€§çš„å€¼è¢«ä¿®æ”¹æ—¶ï¼Œä¼šè°ƒç”¨setï¼Œè¿™æ—¶å€™å°±å¯ä»¥åœ¨seté‡Œé¢è°ƒç”¨å›è°ƒå‡½æ•°\n      set(newVal) {\n        obj[key] = newVal\n        callback(key, newVal)\n      }\n    })\n  })\n  return newObj\n}\n\nconst obj = observe(\n  {\n    name: 'å­å›',\n    sex: 'ç”·'\n  },\n  (key, value) =&gt; {\n    console.log(`å±æ€§[${key}]çš„å€¼è¢«ä¿®æ”¹ä¸º[${value}]`)\n  }\n)\n\n// è¿™æ®µä»£ç æ‰§è¡Œåï¼Œè¾“å‡º å±æ€§[name]çš„å€¼è¢«ä¿®æ”¹ä¸º[å¦¹çº¸]\nobj.name = 'å¦¹çº¸'\n\n// è¿™æ®µä»£ç æ‰§è¡Œåï¼Œè¾“å‡º å±æ€§[sex]çš„å€¼è¢«ä¿®æ”¹ä¸º[å¥³]\nobj.name = 'å¥³'\n</code></pre>\n<ol>\n <li>ä½¿ç”¨<code>Proxy</code></li>\n</ol>\n<pre><code class=\"javascript\">function observe(obj, callback) {\n  return new Proxy(obj, {\n    get(target, key) {\n      return target[key]\n    },\n    set(target, key, value) {\n      target[key] = value\n      callback(key, value)\n    }\n  })\n}\n\nconst obj = observe(\n  {\n    name: 'å­å›',\n    sex: 'ç”·'\n  },\n  (key, value) =&gt; {\n    console.log(`å±æ€§[${key}]çš„å€¼è¢«ä¿®æ”¹ä¸º[${value}]`)\n  }\n)\n\n// è¿™æ®µä»£ç æ‰§è¡Œåï¼Œè¾“å‡º å±æ€§[name]çš„å€¼è¢«ä¿®æ”¹ä¸º[å¦¹çº¸]\nobj.name = 'å¦¹çº¸'\n\n// è¿™æ®µä»£ç æ‰§è¡Œåï¼Œè¾“å‡º å±æ€§[sex]çš„å€¼è¢«ä¿®æ”¹ä¸º[å¥³]\nobj.name = 'å¥³'\n</code></pre>\n<p>é€šè¿‡ä¸Šé¢ä¸¤ç§ä¸åŒå®ç°æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å¤§æ¦‚çš„äº†è§£åˆ°<code>Object.defineProperty</code>å’Œ<code>Proxy</code>çš„ç”¨æ³•ï¼Œä½†æ˜¯å½“ç»™å¯¹è±¡æ·»åŠ æ–°çš„å±æ€§çš„æ—¶å€™ï¼ŒåŒºåˆ«å°±å‡ºæ¥äº†ï¼Œæ¯”å¦‚</p>\n<pre><code class=\"javascript\">// æ·»åŠ å…¬ä¼—å·å­—æ®µ\nobj.gzh = 'å‰ç«¯æœ‰çš„ç©'</code></pre>\n<p>ä½¿ç”¨<code>Object.defineProperty</code>æ— æ³•ç›‘å¬åˆ°æ–°å¢å±æ€§ï¼Œä½†æ˜¯ä½¿ç”¨<code>Proxy</code>æ˜¯å¯ä»¥ç›‘å¬åˆ°çš„ã€‚å¯¹æ¯”ä¸Šé¢ä¸¤æ®µä»£ç å¯ä»¥å‘ç°æœ‰ä»¥ä¸‹å‡ ç‚¹ä¸åŒ</p>\n<ul>\n <li><code>Object.defineProperty</code>ç›‘å¬çš„æ˜¯å¯¹è±¡çš„æ¯ä¸€ä¸ªå±æ€§ï¼Œè€Œ<code>Proxy</code>ç›‘å¬çš„æ˜¯å¯¹è±¡è‡ªèº«</li>\n <li>ä½¿ç”¨<code>Object.defineProperty</code>éœ€è¦éå†å¯¹è±¡çš„æ¯ä¸€ä¸ªå±æ€§ï¼Œå¯¹äºæ€§èƒ½ä¼šæœ‰ä¸€å®šçš„å½±å“</li>\n <li><code>Proxy</code>å¯¹æ–°å¢çš„å±æ€§ä¹Ÿèƒ½ç›‘å¬åˆ°ï¼Œä½†<code>Object.defineProperty</code>æ— æ³•ç›‘å¬åˆ°ã€‚</li>\n</ul>\n<h3>åˆè¯†<code>Proxy</code></h3>\n<h4>æ¦‚å¿µä¸è¯­æ³•</h4>\n<p>åœ¨<code>MDN</code>ä¸­ï¼Œå…³äº<code>Proxy</code>æ˜¯è¿™æ ·ä»‹ç»çš„: <code>Proxy</code> å¯¹è±¡ç”¨äºå®šä¹‰åŸºæœ¬æ“ä½œçš„è‡ªå®šä¹‰è¡Œä¸ºï¼ˆå¦‚å±æ€§æŸ¥æ‰¾ã€èµ‹å€¼ã€æšä¸¾ã€å‡½æ•°è°ƒç”¨ç­‰ï¼‰ã€‚ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ<code>Proxy</code>å°±åƒä¸€ä¸ªæ‹¦æˆªå™¨ä¸€æ ·ï¼Œå®ƒå¯ä»¥åœ¨è¯»å–å¯¹è±¡çš„å±æ€§ï¼Œä¿®æ”¹å¯¹è±¡çš„å±æ€§ï¼Œè·å–å¯¹è±¡å±æ€§åˆ—è¡¨ï¼Œé€šè¿‡<code>for in</code>å¾ªç¯ç­‰ç­‰æ“ä½œçš„æ—¶å€™ï¼Œå»æ‹¦æˆªå¯¹è±¡ä¸Šé¢çš„é»˜è®¤è¡Œä¸ºï¼Œç„¶åè‡ªå·±å»è‡ªå®šä¹‰è¿™äº›è¡Œä¸ºï¼Œæ¯”å¦‚ä¸Šé¢ä¾‹å­ä¸­çš„<code>set</code>,æˆ‘ä»¬é€šè¿‡æ‹¦æˆªé»˜è®¤çš„<code>set</code>,ç„¶ååœ¨è‡ªå®šä¹‰çš„<code>set</code>é‡Œé¢æ·»åŠ äº†å›è°ƒå‡½æ•°çš„è°ƒç”¨</p>\n<p><code>Proxy</code>çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹</p>\n<pre><code class=\"javascript\">/**\n* target: è¦å…¼å®¹çš„å¯¹è±¡ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ•°ç»„,å‡½æ•°ç­‰ç­‰\n* handler: æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢åŒ…å«äº†å¯ä»¥ç›‘å¬è¿™ä¸ªå¯¹è±¡çš„è¡Œä¸ºå‡½æ•°ï¼Œæ¯”å¦‚ä¸Šé¢ä¾‹å­é‡Œé¢çš„`get`ä¸`set`\n* åŒæ—¶ä¼šè¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡proxy, ä¸ºäº†èƒ½å¤Ÿè§¦å‘handleré‡Œé¢çš„å‡½æ•°ï¼Œå¿…é¡»è¦ä½¿ç”¨è¿”å›å€¼å»è¿›è¡Œå…¶ä»–æ“ä½œï¼Œæ¯”å¦‚ä¿®æ”¹å€¼\n*/\nconst proxy = new Proxy(target, handler)</code></pre>\n<p>åœ¨ä¸Šé¢çš„ä¾‹å­é‡Œé¢ï¼Œæˆ‘ä»¬å·²ç»ä½¿ç”¨åˆ°äº†<code>handler</code>é‡Œé¢æä¾›çš„<code>get</code>ä¸<code>set</code>æ–¹æ³•äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¸€ä¸€çœ‹ä¸€ä¸‹<code>handler</code>é‡Œé¢çš„æ–¹æ³•ã€‚</p>\n<h4>handler é‡Œé¢çš„æ–¹æ³•åˆ—è¡¨</h4>\n<p><code>handler</code>é‡Œé¢çš„æ–¹æ³•å¯ä»¥æœ‰ä»¥ä¸‹è¿™åä¸‰ä¸ªï¼Œæ¯ä¸€ä¸ªéƒ½å¯¹åº”çš„ä¸€ç§æˆ–å¤šç§é’ˆå¯¹<code>proxy</code>ä»£ç†å¯¹è±¡çš„æ“ä½œè¡Œä¸º</p>\n<ol>\n <li><code>handler.get</code><p>å½“é€šè¿‡<code>proxy</code>å»è¯»å–å¯¹è±¡é‡Œé¢çš„å±æ€§çš„æ—¶å€™ï¼Œä¼šè¿›å…¥åˆ°<code>get</code>é’©å­å‡½æ•°é‡Œé¢</p></li>\n <li><code>handler.set</code><p>å½“é€šè¿‡<code>proxy</code>å»ä¸ºå¯¹è±¡è®¾ç½®ä¿®æ”¹å±æ€§çš„æ—¶å€™ï¼Œä¼šè¿›å…¥åˆ°<code>set</code>é’©å­å‡½æ•°é‡Œé¢</p></li>\n <li><p><code>handler.has</code></p><p>å½“ä½¿ç”¨<code>in</code>åˆ¤æ–­å±æ€§æ˜¯å¦åœ¨<code>proxy</code>ä»£ç†å¯¹è±¡é‡Œé¢æ—¶ï¼Œä¼šè§¦å‘<code>has</code>ï¼Œæ¯”å¦‚</p><pre><code class=\"javascript\">const obj = {\n  name: 'å­å›'\n}\nconsole.log('name' in obj)</code></pre></li>\n <li><code>handler.deleteProperty</code><p>å½“ä½¿ç”¨<code>delete</code>å»åˆ é™¤å¯¹è±¡é‡Œé¢çš„å±æ€§çš„æ—¶å€™ï¼Œä¼šè¿›å…¥deleteProperty`é’©å­å‡½æ•°</p></li>\n <li><code>handler.apply</code><p>å½“<code>proxy</code>ç›‘å¬çš„æ˜¯ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå½“è°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ï¼Œä¼šè¿›å…¥<code>apply</code>é’©å­å‡½æ•°</p></li>\n <li><code>handle.ownKeys</code><p>å½“é€šè¿‡<code>Object.getOwnPropertyNames</code>,<code>Object.getownPropertySymbols</code>,<code>Object.keys</code>,<code>Reflect.ownKeys</code>å»è·å–å¯¹è±¡çš„ä¿¡æ¯çš„æ—¶å€™ï¼Œå°±ä¼šè¿›å…¥<code>ownKeys</code>è¿™ä¸ªé’©å­å‡½æ•°</p></li>\n <li><code>handler.construct</code><p>å½“ä½¿ç”¨<code>new</code>æ“ä½œç¬¦çš„æ—¶å€™ï¼Œä¼šè¿›å…¥<code>construct</code>è¿™ä¸ªé’©å­å‡½æ•°</p></li>\n <li><code>handler.defineProperty</code><p>å½“ä½¿ç”¨<code>Object.defineProperty</code>å»ä¿®æ”¹å±æ€§ä¿®é¥°ç¬¦çš„æ—¶å€™ï¼Œä¼šè¿›å…¥è¿™ä¸ªé’©å­å‡½æ•°</p></li>\n <li><code>handler.getPrototypeOf</code><p>å½“è¯»å–å¯¹è±¡çš„åŸå‹çš„æ—¶å€™ï¼Œä¼šè¿›å…¥è¿™ä¸ªé’©å­å‡½æ•°</p></li>\n <li><code>handler.setPrototypeOf</code><p>å½“è®¾ç½®å¯¹è±¡çš„åŸå‹çš„æ—¶å€™ï¼Œä¼šè¿›å…¥è¿™ä¸ªé’©å­å‡½æ•°</p></li>\n <li><code>handler.isExtensible</code><p>å½“é€šè¿‡<code>Object.isExtensible</code>å»åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯ä»¥æ·»åŠ æ–°çš„å±æ€§çš„æ—¶å€™ï¼Œè¿›å…¥è¿™ä¸ªé’©å­å‡½æ•°</p></li>\n <li><code>handler.preventExtensions</code><p>å½“é€šè¿‡<code>Object.preventExtensions</code>å»è®¾ç½®å¯¹è±¡ä¸å¯ä»¥ä¿®æ”¹æ–°å±æ€§æ—¶å€™ï¼Œè¿›å…¥è¿™ä¸ªé’©å­å‡½æ•°</p></li>\n <li><code>handler.getOwnPropertyDescriptor</code><p>åœ¨è·å–ä»£ç†å¯¹è±¡æŸä¸ªå±æ€§çš„å±æ€§æè¿°æ—¶è§¦å‘è¯¥æ“ä½œï¼Œæ¯”å¦‚åœ¨æ‰§è¡Œ <code>Object.getOwnPropertyDescriptor(proxy, \"foo\")</code> æ—¶ä¼šè¿›å…¥è¿™ä¸ªé’©å­å‡½æ•°</p></li>\n</ol>\n<p><code>Proxy</code>æä¾›äº†åä¸‰ç§æ‹¦æˆªå¯¹è±¡æ“ä½œçš„æ–¹æ³•ï¼Œæœ¬æ–‡ä¸»è¦æŒ‘é€‰å…¶ä¸­ä¸€éƒ¨åˆ†åœ¨<code>Vue3</code>ä¸­æ¯”è¾ƒé‡è¦çš„è¿›è¡Œè¯´æ˜ï¼Œå…¶ä½™çš„å»ºè®®å¯ä»¥ç›´æ¥é˜…è¯»<code>MDN</code>å…³äº<code>Proxy</code>çš„ä»‹ç»ã€‚</p>\n<h3>è¯¦ç»†ä»‹ç»</h3>\n<h4>get</h4>\n<blockquote>\n å½“é€šè¿‡\n <code>proxy</code>å»è¯»å–å¯¹è±¡é‡Œé¢çš„å±æ€§çš„æ—¶å€™ï¼Œä¼šè¿›å…¥åˆ°\n <code>get</code>é’©å­å‡½æ•°é‡Œé¢\n</blockquote>\n<p>å½“æˆ‘ä»¬ä»ä¸€ä¸ª<code>proxy</code>ä»£ç†ä¸Šé¢è¯»å–å±æ€§çš„æ—¶å€™ï¼Œå°±ä¼šè§¦å‘<code>get</code>é’©å­å‡½æ•°ï¼Œ<code>get</code>å‡½æ•°çš„ç»“æ„å¦‚ä¸‹</p>\n<pre><code class=\"javascript\">/**\n * target: ç›®æ ‡å¯¹è±¡ï¼Œå³é€šè¿‡proxyä»£ç†çš„å¯¹è±¡\n * key: è¦è®¿é—®çš„å±æ€§åç§°\n * receiver: receiverç›¸å½“äºæ˜¯æˆ‘ä»¬è¦è¯»å–çš„å±æ€§çš„this,ä¸€èˆ¬æƒ…å†µ\n *           ä¸‹ä»–å°±æ˜¯proxyå¯¹è±¡æœ¬èº«ï¼Œå…³äºreceiverçš„ä½œç”¨ï¼Œåæ–‡å°†å…·ä½“è®²è§£\n */\nhandle.get(target,key, receiver)</code></pre>\n<h5>ç¤ºä¾‹</h5>\n<p>æˆ‘ä»¬åœ¨å·¥ä½œä¸­ç»å¸¸ä¼šæœ‰å°è£…<code>axios</code>çš„éœ€æ±‚ï¼Œåœ¨å°è£…è¿‡ç¨‹ä¸­ï¼Œä¹Ÿéœ€è¦å¯¹è¯·æ±‚å¼‚å¸¸è¿›è¡Œå°è£…ï¼Œæ¯”å¦‚ä¸åŒçš„çŠ¶æ€ç è¿”å›çš„å¼‚å¸¸ä¿¡æ¯æ˜¯ä¸åŒçš„ï¼Œå¦‚ä¸‹æ˜¯ä¸€éƒ¨åˆ†çŠ¶æ€ç åŠå…¶æç¤ºä¿¡æ¯:</p>\n<pre><code class=\"javascript\">// çŠ¶æ€ç æç¤ºä¿¡æ¯\nconst errorMessage = {\n  400: 'é”™è¯¯è¯·æ±‚',\n  401: 'ç³»ç»Ÿæœªæˆæƒï¼Œè¯·é‡æ–°ç™»å½•',\n  403: 'æ‹’ç»è®¿é—®',\n  404: 'è¯·æ±‚å¤±è´¥ï¼Œæœªæ‰¾åˆ°è¯¥èµ„æº'\n}\n\n// ä½¿ç”¨æ–¹å¼\nconst code = 404\nconst message = errorMessage[code]\nconsole.log(message)</code></pre>\n<p>ä½†è¿™å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼ŒçŠ¶æ€ç å¾ˆå¤šï¼Œæˆ‘ä»¬ä¸å¯èƒ½æ¯ä¸€ä¸ªçŠ¶æ€ç éƒ½å»æšä¸¾å‡ºæ¥ï¼Œæ‰€ä»¥å¯¹äºä¸€äº›å¼‚å¸¸çŠ¶æ€ç ï¼Œæˆ‘ä»¬å¸Œæœ›å¯ä»¥è¿›è¡Œç»Ÿä¸€æç¤ºï¼Œå¦‚æç¤ºä¸º<code>ç³»ç»Ÿå¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜</code>ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨<code>Proxy</code>å¯¹é”™è¯¯ä¿¡æ¯è¿›è¡Œä»£ç†å¤„ç†</p>\n<pre><code class=\"javascript\">// çŠ¶æ€ç æç¤ºä¿¡æ¯\nconst errorMessage = {\n  400: 'é”™è¯¯è¯·æ±‚',\n  401: 'ç³»ç»Ÿæœªæˆæƒï¼Œè¯·é‡æ–°ç™»å½•',\n  403: 'æ‹’ç»è®¿é—®',\n  404: 'è¯·æ±‚å¤±è´¥ï¼Œæœªæ‰¾åˆ°è¯¥èµ„æº'\n}\n\nconst proxy = new Proxy(errorMessage, {\n  get(target,key) {\n    const value = target[key]\n    return value || 'ç³»ç»Ÿå¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜'\n  }\n})\n\n// è¾“å‡º é”™è¯¯è¯·æ±‚\nconsole.log(proxy[400])\n// è¾“å‡º ç³»ç»Ÿå¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜\nconsole.log(proxy[500])</code></pre>\n<h4>set</h4>\n<blockquote>\n å½“ä¸ºå¯¹è±¡é‡Œé¢çš„å±æ€§èµ‹å€¼çš„æ—¶å€™ï¼Œä¼šè§¦å‘\n <code>set</code>\n</blockquote>\n<p>å½“ç»™å¯¹è±¡é‡Œé¢çš„å±æ€§èµ‹å€¼çš„æ—¶å€™ï¼Œä¼šè§¦å‘<code>set</code>,<code>set</code>å‡½æ•°çš„ç»“æ„å¦‚ä¸‹</p>\n<pre><code class=\"javascript\">/**\n * target: ç›®æ ‡å¯¹è±¡ï¼Œå³é€šè¿‡proxyä»£ç†çš„å¯¹è±¡\n * key: è¦èµ‹å€¼çš„å±æ€§åç§°\n * value: ç›®æ ‡å±æ€§è¦èµ‹çš„æ–°å€¼\n * receiver: ä¸ getçš„receiver åŸºæœ¬ä¸€è‡´\n */\nhandle.set(target,key,value, receiver)</code></pre>\n<h5>ç¤ºä¾‹</h5>\n<p>æŸç³»ç»Ÿéœ€è¦å½•å…¥ä¸€ç³»åˆ—æ•°å€¼ç”¨äºæ•°æ®ç»Ÿè®¡ï¼Œä½†æ˜¯åœ¨å½•å…¥æ•°å€¼çš„æ—¶å€™ï¼Œå¯èƒ½å½•å…¥çš„å­˜åœ¨ä¸€éƒ¨åˆ†å¼‚å¸¸å€¼ï¼Œå¯¹äºè¿™äº›å¼‚å¸¸å€¼éœ€è¦åœ¨å½•å…¥çš„æ—¶å€™è¿›è¡Œå¤„ç†, æ¯”å¦‚å¤§äº<code>100</code>çš„å€¼ï¼Œè½¬æ¢ä¸º<code>100</code>, å°äº<code>0</code>çš„å€¼ï¼Œè½¬æ¢ä¸º<code>0</code>, è¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨<code>proxy</code>çš„<code>set</code>ï¼Œåœ¨èµ‹å€¼çš„æ—¶å€™ï¼Œå¯¹æ•°æ®è¿›è¡Œå¤„ç†</p>\n<pre><code class=\"javascript\">const numbers = []\nconst proxy = new Proxy(numbers, {\n  set(target,key,value) {\n    if(value &lt; 0) {\n      value = 0\n    }else if(value &gt; 100) {\n      value = 100\n    }\n    target[key] = value\n    // å¯¹äºset æ¥è¯´ï¼Œå¦‚æœæ“ä½œæˆåŠŸå¿…é¡»è¿”å›true, å¦åˆ™ä¼šè¢«è§†ä¸ºå¤±è´¥\n    return true\n  }\n})\n\nproxy.push(1)\nproxy.push(101)\nproxy.push(-10)\n// è¾“å‡º [1, 100, 0]\nconsole.log(numbers)</code></pre>\n<h5>å¯¹æ¯”<code>Vue2.0</code></h5>\n<p>åœ¨ä½¿ç”¨<code>Vue2.0</code>çš„æ—¶å€™ï¼Œå¦‚æœç»™å¯¹è±¡æ·»åŠ æ–°å±æ€§çš„æ—¶å€™ï¼Œå¾€å¾€éœ€è¦è°ƒç”¨<code>$set</code>, è¿™æ˜¯å› ä¸º<code>Object.defineProperty</code>åªèƒ½ç›‘å¬å·²å­˜åœ¨çš„å±æ€§ï¼Œè€Œæ–°å¢çš„å±æ€§æ— æ³•ç›‘å¬ï¼Œè€Œé€šè¿‡<code>$set</code>ç›¸å½“äºæ‰‹åŠ¨ç»™å¯¹è±¡æ–°å¢äº†å±æ€§ï¼Œç„¶åå†è§¦å‘æ•°æ®å“åº”ã€‚ä½†æ˜¯å¯¹äº<code>Vue3.0</code>æ¥è¯´ï¼Œå› ä¸ºä½¿ç”¨äº†<code>Proxy</code>ï¼Œ åœ¨ä»–çš„<code>set</code>é’©å­å‡½æ•°ä¸­æ˜¯å¯ä»¥ç›‘å¬åˆ°æ–°å¢å±æ€§çš„ï¼Œæ‰€ä»¥å°±ä¸å†éœ€è¦ä½¿ç”¨<code>$set</code></p>\n<pre><code class=\"javascript\">const obj = {\n  name: 'å­å›'\n}\nconst proxy = new Proxy(obj, {\n  set(target,key,value) {\n    if(!target.hasOwnProperty(key)) {\n      console.log(`æ–°å¢äº†å±æ€§${key},å€¼ä¸º${value}`)\n    }\n    target[key] = value\n    return true\n  }\n})\n// æ–°å¢ å…¬ä¼—å· å±æ€§\n// è¾“å‡º æ–°å¢äº†å±æ€§gzh,å€¼ä¸ºå‰ç«¯æœ‰çš„ç©\nproxy.gzh = 'å‰ç«¯æœ‰çš„ç©'\n</code></pre>\n<h4>has</h4>\n<blockquote>\n å½“ä½¿ç”¨\n <code>in</code>åˆ¤æ–­å±æ€§æ˜¯å¦åœ¨\n <code>proxy</code>ä»£ç†å¯¹è±¡é‡Œé¢æ—¶ï¼Œä¼šè§¦å‘\n <code>has</code>\n</blockquote>\n<pre><code class=\"javascript\">/**\n * target: ç›®æ ‡å¯¹è±¡ï¼Œå³é€šè¿‡proxyä»£ç†çš„å¯¹è±¡\n * key: è¦åˆ¤æ–­çš„keyæ˜¯å¦åœ¨targetä¸­\n */\n handle.has(target,key)</code></pre>\n<h5>ç¤ºä¾‹</h5>\n<p>ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬åœ¨<code>js</code>ä¸­å£°æ˜ç§æœ‰å±æ€§çš„æ—¶å€™ï¼Œä¼šå°†å±æ€§çš„åå­—ä»¥<code>_</code>å¼€å¤´ï¼Œå¯¹äºè¿™äº›ç§æœ‰å±æ€§ï¼Œæ˜¯ä¸éœ€è¦å¤–éƒ¨è°ƒç”¨ï¼Œæ‰€ä»¥å¦‚æœå¯ä»¥éšè—æ‰æ˜¯æœ€å¥½çš„ï¼Œè¿™æ—¶å€™å°±å¯ä»¥é€šè¿‡<code>has</code>åœ¨åˆ¤æ–­æŸä¸ªå±æ€§æ˜¯å¦åœ¨å¯¹è±¡æ—¶ï¼Œå¦‚æœä»¥<code>_</code>å¼€å¤´ï¼Œåˆ™è¿”å›<code>false</code></p>\n<pre><code class=\"javascript\">const obj =  {\n  publicMethod() {},\n  _privateMethod(){}\n}\nconst proxy = new Proxy(obj, {\n  has(target, key) {\n    if(key.startsWith('_')) {\n      return false\n    }\n    return Reflect.get(target,key)\n  }\n})\n\n// è¾“å‡º false\nconsole.log('_privateMethod' in proxy)\n\n// è¾“å‡º true\nconsole.log('publicMethod' in proxy)\n</code></pre>\n<h4>deleteProperty</h4>\n<blockquote>\n å½“ä½¿ç”¨\n <code>delete</code>å»åˆ é™¤å¯¹è±¡é‡Œé¢çš„å±æ€§çš„æ—¶å€™ï¼Œä¼šè¿›å…¥deleteProperty`æ‹¦æˆªå™¨\n</blockquote>\n<pre><code class=\"javascript\">/**\n * target: ç›®æ ‡å¯¹è±¡ï¼Œå³é€šè¿‡proxyä»£ç†çš„å¯¹è±¡\n * key: è¦åˆ é™¤çš„å±æ€§\n */\n handle.deleteProperty(target,key)</code></pre>\n<h5>ç¤ºä¾‹</h5>\n<p>ç°åœ¨æœ‰ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯çš„å¯¹è±¡ï¼Œå¯¹äºæŸäº›ç”¨æˆ·ä¿¡æ¯ï¼Œåªå…è®¸æŸ¥çœ‹ï¼Œä½†ä¸èƒ½åˆ é™¤æˆ–è€…ä¿®æ”¹ï¼Œå¯¹æ­¤ä½¿ç”¨<code>Proxy</code>å¯ä»¥å¯¹ä¸èƒ½åˆ é™¤æˆ–è€…ä¿®æ”¹çš„å±æ€§è¿›è¡Œæ‹¦æˆªå¹¶æŠ›å‡ºå¼‚å¸¸ï¼Œå¦‚ä¸‹</p>\n<pre><code class=\"javascript\">const userInfo = {\n  name: 'å­å›',\n  gzh: 'å‰ç«¯æœ‰çš„ç©',\n  sex: 'ç”·',\n  age: 22\n}\n// åªèƒ½åˆ é™¤ç”¨æˆ·åå’Œå…¬ä¼—å·\nconst readonlyKeys = ['name', 'gzh']\nconst proxy = new Proxy(userInfo, {\n  set(target,key,value) {\n    if(readonlyKeys.includes(key)) {\n      throw new Error(`å±æ€§${key}ä¸èƒ½è¢«ä¿®æ”¹`)\n    }\n    target[key] = value\n    return true\n  },\n   deleteProperty(target,key) {\n    if(readonlyKeys.includes(key)) {\n      throw new Error(`å±æ€§${key}ä¸èƒ½è¢«åˆ é™¤`)\n      return\n    }\n    delete target[key]\n    return true\n  }\n})\n// æŠ¥é”™ \ndelete proxy.name</code></pre>\n<h5>å¯¹æ¯”<code>Vue2.0</code></h5>\n<p>å…¶å®ä¸<code>$set</code>è§£å†³çš„é—®é¢˜ç±»ä¼¼ï¼Œ<code>Vue2.0</code>æ˜¯æ— æ³•ç›‘å¬åˆ°å±æ€§è¢«åˆ é™¤çš„ï¼Œæ‰€ä»¥æä¾›äº†<code>$delete</code>ç”¨äºåˆ é™¤å±æ€§ï¼Œä½†æ˜¯å¯¹äº<code>Proxy</code>ï¼Œæ˜¯å¯ä»¥ç›‘å¬åˆ é™¤æ“ä½œçš„ï¼Œæ‰€ä»¥å°±ä¸éœ€è¦å†ä½¿ç”¨<code>$delete</code>äº†</p>\n<h4>å…¶ä»–æ“ä½œ</h4>\n<p>åœ¨ä¸Šæ–‡ä¸­ï¼Œæˆ‘ä»¬æåˆ°äº†<code>Proxy</code>çš„<code>handler</code>æä¾›äº†åä¸‰ä¸ªå‡½æ•°ï¼Œåœ¨ä¸Šé¢æˆ‘ä»¬åˆ—ä¸¾äº†æœ€å¸¸ç”¨çš„ä¸‰ä¸ªï¼Œå…¶å®æ¯ä¸€ä¸ªçš„ç”¨æ³•éƒ½æ˜¯åŸºæœ¬ä¸€è‡´çš„ï¼Œæ¯”å¦‚<code>ownKeys</code>ï¼Œå½“é€šè¿‡<code>Object.getOwnPropertyNames</code>,<code>Object.getownPropertySymbols</code>,<code>Object.keys</code>,<code>Reflect.ownKeys</code>å»è·å–å¯¹è±¡çš„ä¿¡æ¯çš„æ—¶å€™ï¼Œå°±ä¼šè¿›å…¥<code>ownKeys</code>è¿™ä¸ªé’©å­å‡½æ•°ï¼Œä½¿ç”¨è¿™ä¸ªæˆ‘ä»¬å°±å¯ä»¥å¯¹ä¸€äº›æˆ‘ä»¬ä¸åƒæš´éœ²çš„å±æ€§è¿›è¡Œä¿æŠ¤ï¼Œæ¯”å¦‚ä¸€èˆ¬ä¼šçº¦å®š<code>_</code>å¼€å¤´çš„ä¸ºç§æœ‰å±æ€§ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨<code>Object.keys</code>å»è·å–å¯¹è±¡çš„æ‰€æœ‰<code>key</code>çš„æ—¶å€™ï¼Œå°±å¯ä»¥æŠŠæ‰€æœ‰<code>_</code>å¼€å¤´çš„å±æ€§å±è”½æ‰ã€‚å…³äºå‰©ä½™çš„é‚£äº›å±æ€§ï¼Œå»ºè®®å¤§å®¶å¤šå»çœ‹çœ‹<code>MDN</code>ä¸­çš„ä»‹ç»ã€‚</p>\n<h3>Reflect</h3>\n<p>åœ¨ä¸Šé¢ï¼Œæˆ‘ä»¬è·å–å±æ€§çš„å€¼æˆ–è€…ä¿®æ”¹å±æ€§çš„å€¼éƒ½æ˜¯é€šè¿‡ç›´æ¥æ“ä½œ<code>target</code>æ¥å®ç°çš„ï¼Œä½†å®é™…ä¸Š<code>ES6</code>å·²ç»ä¸ºæˆ‘ä»¬æä¾›äº†åœ¨<code>Proxy</code>å†…éƒ¨è°ƒç”¨å¯¹è±¡çš„é»˜è®¤è¡Œä¸ºçš„<code>API</code>,å³<code>Reflect</code>ã€‚æ¯”å¦‚ä¸‹é¢çš„ä»£ç </p>\n<pre><code class=\"javascript\">const obj = {}\nconst proxy = new Proxy(obj, {\n  get(target,key,receiver) {\n    return Reflect.get(target,key,receiver)\n  }\n})</code></pre>\n<p>å¤§å®¶å¯èƒ½çœ‹åˆ°ä¸Šé¢çš„ä»£ç ä¸ç›´æ¥ä½¿ç”¨<code>target[key]</code>çš„æ–¹å¼æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œä½†å®é™…ä¸Š<code>Reflect</code>çš„å‡ºç°æ˜¯ä¸ºäº†è®©<code>Object</code>ä¸Šé¢çš„æ“ä½œæ›´åŠ è§„èŒƒï¼Œæ¯”å¦‚æˆ‘ä»¬è¦åˆ¤æ–­æŸä¸€ä¸ª<code>prop</code>æ˜¯å¦åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œé€šå¸¸ä¼šä½¿ç”¨åˆ°<code>in</code>,å³</p>\n<pre><code>const obj = {name: 'å­å›'}\nconsole.log('name' in obj)</code></pre>\n<p>ä½†ä¸Šé¢çš„æ“ä½œæ˜¯ä¸€ç§å‘½ä»¤å¼çš„è¯­æ³•ï¼Œé€šè¿‡<code>Reflect</code>å¯ä»¥å°†å…¶è½¬å˜ä¸ºå‡½æ•°å¼çš„è¯­æ³•ï¼Œæ˜¾å¾—æ›´åŠ è§„èŒƒ</p>\n<pre><code>Reflect.has(obj,'name')</code></pre>\n<p>é™¤äº†<code>has</code>,<code>get</code>ä¹‹å¤–ï¼Œå…¶å®<code>Reflect</code>ä¸Šé¢æ€»å…±æä¾›äº†åä¸‰ä¸ªé™æ€æ–¹æ³•ï¼Œè¿™åä¸‰ä¸ªé™æ€æ–¹æ³•ä¸<code>Proxy</code>çš„<code>handler</code>ä¸Šé¢çš„åä¸‰ä¸ªæ–¹æ³•æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œé€šè¿‡å°†<code>Proxy</code>ä¸<code>Reflect</code>ç›¸ç»“åˆï¼Œå°±å¯ä»¥å¯¹å¯¹è±¡ä¸Šé¢çš„é»˜è®¤æ“ä½œè¿›è¡Œæ‹¦æˆªå¤„ç†ï¼Œå½“ç„¶è¿™ä¹Ÿå°±å±äºå‡½æ•°å…ƒç¼–ç¨‹çš„èŒƒç•´äº†ã€‚</p>\n<h3>æ€»ç»“</h3>\n<p>æœ‰çš„åŒå­¦å¯èƒ½ä¼šæœ‰ç–‘æƒ‘ï¼Œæˆ‘ä¸ä¼š<code>Proxy</code>å’Œ<code>Reflect</code>å°±å­¦ä¸äº†<code>Vue3.0</code>äº†å—ï¼Ÿå…¶å®æ‡‚ä¸æ‡‚è¿™ä¸ªæ˜¯ä¸å½±å“å­¦ä¹ <code>Vue3.0</code>çš„ï¼Œä½†æ˜¯å¦‚æœæƒ³æ·±å…¥ å»ç†è§£<code>Vue3.0</code>ï¼Œè¿˜æ˜¯å¾ˆæœ‰å¿…è¦äº†è§£è¿™äº›çš„ã€‚æ¯”å¦‚ç»å¸¸ä¼šæœ‰äººåœ¨ä½¿ç”¨<code>Vue2</code>çš„æ—¶å€™é—®ï¼Œä¸ºä»€ä¹ˆæˆ‘æ•°ç»„é€šè¿‡ç´¢å¼•ä¿®æ”¹å€¼ä¹‹åï¼Œç•Œé¢æ²¡æœ‰å˜å‘¢ï¼Ÿå½“ä½ äº†è§£åˆ°<code>Object.defineProperty</code>çš„ä½¿ç”¨æ–¹å¼ä¸é™åˆ¶ä¹‹åï¼Œå°±ä¼šæç„¶å¤§æ‚Ÿï¼ŒåŸæ¥å¦‚æ­¤ã€‚æœ¬æ–‡ä¹‹åï¼Œå°ç¼–å°†ä¸ºå¤§å®¶å¸¦æ¥<code>Vue3.0</code>ç³»åˆ—æ–‡ç« ï¼Œæ¬¢è¿å…³æ³¨ï¼Œä¸€èµ·å­¦ä¹ ã€‚åŒæ—¶æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ã€å‰ç«¯æœ‰çš„ç©ã€‘ï¼Œç”¨ç©çš„å§¿åŠ¿å­¦å‰ç«¯ï¼Œå°±åœ¨ã€å‰ç«¯æœ‰çš„ç©ã€‘</p>","descriptionType":"html","publishedDate":"Wed, 19 Aug 2020 05:16:19 +0000","feedId":6615,"bgimg":"","linkMd5":"0a59e65366f289a078cb96f1c4586eab","bgimgJsdelivr":"","metaImg":"","author":"å­å›","publishedOrCreatedDate":1598310388562},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"ç¾å›½å¦‚æœæŠŠæ ¹åŸŸåæœåŠ¡å™¨å°äº†ï¼Œä¸­å›½ä¼šä»ç½‘ç»œä¸Šæ¶ˆå¤±ï¼Ÿ","link":"https://segmentfault.com/a/1190000023696737","description":"<p><img src=\"https://segmentfault.com/img/bVbLAIE\" alt=\"ç¾å›½å¦‚æœæŠŠæ ¹åŸŸåæœåŠ¡å™¨å°äº†ï¼Œä¸­å›½ä¼šä»ç½‘ç»œä¸Šæ¶ˆå¤±ï¼Ÿ\" title=\"ç¾å›½å¦‚æœæŠŠæ ¹åŸŸåæœåŠ¡å™¨å°äº†ï¼Œä¸­å›½ä¼šä»ç½‘ç»œä¸Šæ¶ˆå¤±ï¼Ÿ\"><br>ä½œè€…ï¼šå«å‰‘é’’<br>æ¥æºï¼šå…¬ä¼—å·å¾®æœˆäººè¯</br></br></img></p>\n<hr>\n <p>è‡ªä»ç¾å›½å®£å¸ƒâ€œæ¸…æ´ç½‘ç»œâ€è¡ŒåŠ¨åï¼Œå¾ˆå¤šæ‡‚ç‚¹ç½‘ç»œçš„äººï¼Œç¬¬ä¸€ååº”æ˜¯ï¼Œç¾å›½äººä¼šä¸‹æ‰‹æ ¹åŸŸåæœåŠ¡å™¨å—ï¼Ÿ</p>\n <p>è¿™ç§å¿§è™‘å¯ä¸æ˜¯ä¸€å¹´ä¸¤å¹´äº†ã€‚</p>\n <p>2014å¹´6æœˆ24æ—¥çš„ã€Šäººæ°‘æ—¥æŠ¥ã€‹ä¸Šå¼•ç”¨ä¸“å®¶å‘è¨€ï¼šâ€œç›®å‰ç¾å›½æŒæ¡ç€å…¨çƒäº’è”ç½‘13å°åŸŸåæ ¹æœåŠ¡å™¨ä¸­çš„10å°ã€‚ç†è®ºä¸Šï¼Œåªè¦åœ¨æ ¹æœåŠ¡å™¨ä¸Šå±è”½è¯¥å›½å®¶åŸŸåï¼Œå°±èƒ½è®©è¿™ä¸ªå›½å®¶çš„å›½å®¶é¡¶çº§åŸŸåç½‘ç«™åœ¨ç½‘ç»œä¸Šç¬é—´â€œæ¶ˆå¤±â€ã€‚åœ¨è¿™ä¸ªæ„ä¹‰ä¸Šï¼Œç¾å›½å…·æœ‰å…¨çƒç‹¬ä¸€æ— äºŒçš„åˆ¶ç½‘æƒï¼Œæœ‰èƒ½åŠ›å¨æ…‘ä»–å›½çš„ç½‘ç»œè¾¹ç–†å’Œç½‘ç»œä¸»æƒã€‚è­¬å¦‚ï¼Œä¼Šæ‹‰å…‹æˆ˜äº‰æœŸé—´ï¼Œåœ¨ç¾å›½æ”¿åºœæˆæ„ä¸‹ï¼Œä¼Šæ‹‰å…‹é¡¶çº§åŸŸåâ€œ.iqâ€çš„ç”³è¯·å’Œè§£æå·¥ä½œè¢«ç»ˆæ­¢ï¼Œæ‰€æœ‰ç½‘å€ä»¥â€œ.iqâ€ä¸ºåç¼€çš„ç½‘ç«™ä»äº’è”ç½‘è’¸å‘ã€‚â€_ï¼ˆ1ï¼‰_</p>\n <p>ã€Šä¿¡æ¯å®‰å…¨ä¸é€šä¿¡ä¿å¯†ã€‹æ‚å¿—2014å¹´ç¬¬10æœŸçš„ä¸€ç¯‡æ–‡ç« å†™é“ï¼šâ€œ2004å¹´ï¼Œç”±äºä¸åˆ©æ¯”äºšåœ¨é¡¶çº§åŸŸåç®¡ç†æƒé—®é¢˜ä¸Šå‘ç”Ÿäº‰æ‰§ï¼Œç¾å›½ç»ˆæ­¢äº†åˆ©æ¯”äºšçš„é¡¶çº§åŸŸå.LYçš„è§£ææœåŠ¡ï¼Œå¯¼è‡´åˆ©æ¯”äºšä»ç½‘ç»œä¸­æ¶ˆå¤±3å¤©ã€‚â€_ï¼ˆ2ï¼‰_</p>\n <p>å¯¹æ­¤ï¼Œæˆ‘ä»¬éœ€è¦å®³æ€•å—ï¼Ÿæˆ‘ä»¬éœ€è¦ä»€ä¹ˆæ ·çš„ååˆ¶æªæ–½ï¼Ÿ </p>\n <p>ä¸æ˜¯ä¸“å®¶ï¼Œè¿˜çœŸå›ç­”ä¸äº†è¿™ä¸ªé—®é¢˜ã€‚</p>\n <p>å› ä¸ºè¿™éœ€è¦äº†è§£DNSçš„å·¥ä½œåŸç†ï¼Œäº†è§£æ ¹åŸŸåçš„ç®¡ç†æœºåˆ¶ã€‚</p>\n <p>è¿™é‡Œå…ˆç»™å‡ºç®€è¦å›ç­”ï¼šä¸æ’é™¤è¿™ç§å¯èƒ½æ€§ï¼Œä½†å¹¶ä¸æ˜¯æ²¡æœ‰åŠæ³•ã€‚</p>\n <p>ä¸€å¥è¯åŸå› ï¼šè™½ç„¶æ ¹ä¸åœ¨æˆ‘ä»¬æ‰‹é‡Œï¼Œä½†æˆ‘ä»¬æœ‰é•œåƒã€‚</p>\n <h2><strong>DNSå‚»ç“œä¹¦</strong></h2>\n <p>å…ˆäº†è§£ç‚¹åŸºæœ¬æ¦‚å¿µï¼Œæ‡‚DNSçš„å¯ä»¥ç›´æ¥è·³è¿‡æœ¬èŠ‚ã€‚</p>\n <p>1ã€DNSæ˜¯ä»€ä¹ˆï¼Ÿ</p>\n <p>DNSå°±æ˜¯å°†åŸŸåè½¬æ¢ä¸ºIPçš„ï¼Œå› ä¸ºæˆ‘ä»¬äººç±»çš„è®°å¿†åŠ›å¤ªå·®ï¼Œæ ¹æœ¬è®°ä¸ä½IPï¼Œè€Œç”µè„‘é€šä¿¡åˆå¿…é¡»ç”¨IPï¼Œæ‰€ä»¥äººç±»å‘æ˜äº†åŸŸåï¼Œè®©æˆ‘ä»¬å¯ä»¥è®°ä½baidu.comã€taobao.comè¿™ç§è¿˜ç®—èƒ½è®°å¾—ä½çš„åŸŸåã€‚ç„¶åé€šè¿‡DNSï¼Œå°†è¿™äº›åŸŸåè½¬æ¢ä¸ºç”µè„‘éœ€è¦çš„IPã€‚</p>\n <p>2ã€DNSæ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ</p>\n <p>æ¯ä¸ªç”µè„‘é‡Œé¢éƒ½è®¾ç½®äº†æœ¬åœ°DNSæœåŠ¡å™¨ï¼ˆç®€ç§°LDNSï¼‰ï¼Œéœ€è¦çš„æ—¶å€™ï¼Œå°±å‘LDNSå‘å‡ºè¯·æ±‚ï¼ŒLDNSåœ¨ç½‘ä¸Šé—®æƒå¨åŸŸåæœåŠ¡å™¨ï¼ˆç®€ç§°æƒå¨DNSï¼‰ï¼Œæœ‰æ—¶å€™é—®ä¸€å®¶æ˜¯ä¸å¤Ÿçš„ï¼Œè¦é—®ä¸€å¤§åœˆä¸‹æ¥ï¼Œæœ€åæ‰èƒ½å¾—åˆ°ç­”æ¡ˆã€‚</p>\n <p>3ã€æƒå¨DNSæ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ</p>\n <p>é—®æˆ‘ä¸€ä¸ªåŸŸåï¼Œæˆ‘å‘Šè¯‰ä½ IPï¼Œå¦‚æœæˆ‘ä¸çŸ¥é“ï¼Œæˆ‘å‘Šè¯‰ä½ è°å¯èƒ½çŸ¥é“ï¼Œä½ å†å»é—®å®ƒã€‚</p>\n <p>4ã€ä»€ä¹ˆæ˜¯æ ¹åŸŸåæœåŠ¡å™¨ï¼ˆç®€ç§°æ ¹DNSï¼‰ï¼Ÿ</p>\n <p>å½“LDNSå•¥éƒ½ä¸çŸ¥é“çš„æ—¶å€™ï¼ˆä¹Ÿå³æ²¡æœ‰ä»»ä½•ç¼“å­˜ï¼‰ï¼Œå°±å»é—®æ ¹DNSï¼Œæ ¹èƒ½å‘Šè¯‰LDNSä¸‹ä¸€æ­¥è¯¥é—®è°ã€‚</p>\n <p>5ã€å…¨ä¸–ç•Œæœ‰å¤šå°‘æ ¹DNSï¼Ÿ</p>\n <p>13ä¸ªï¼Œå…¶ä¸­10ä¸ªåœ¨ç¾å›½ï¼Œè‹±å›½å’Œç‘å…¸å„1ä¸ªï¼Œæ—¥æœ¬1ä¸ªã€‚</p>\n <p>6ã€æ ¹DNSçš„åå­—å’ŒIPéƒ½æ˜¯ä»€ä¹ˆï¼Ÿ</p>\n <p>åœ¨è¿™ä¸ªç½‘å€ï¼š</p>\n <p><a href=\"https://www.internic.net/domain/named.root\" rel=\"nofollow noreferrer\">https://www.internic.net/doma...</a></p>\n <p>æ‰“å¼€å¯ä»¥çœ‹åˆ°ï¼Œé‡Œé¢æœ‰13ä¸ªæ ¹çš„åå­—å’ŒIPï¼Œå…¶åå­—ä»A.root-servers.netåˆ°M.root-servers.netã€‚</p>\n <p>Aå¼€å¤´é‚£ä¸ªç®€ç§°Aæ ¹ï¼Œæ˜¯ä¸»æ ¹ï¼Œå…¶ä»–12ä¸ªï¼ˆBã€Cã€Dã€Eã€Fã€Gã€Hã€Iã€Jã€Kã€Lã€Mï¼‰æ˜¯è¾…æ ¹ã€‚</p>\n <h2><strong>ä¸ºä»€ä¹ˆæ ¹DNSåªæœ‰13å°ï¼Ÿ</strong></h2>\n <p>æœ¬èŠ‚çœ‹ä¸æ‡‚æ²¡å…³ç³»ï¼ˆä¸€èˆ¬äººéƒ½çœ‹ä¸æ‡‚ï¼‰ï¼Œä½ åªéœ€è¦çŸ¥é“ï¼Œç”±äºå†å²åŸå› å’ŒæŠ€æœ¯åŸå› ï¼Œå¯¹äºIPv4è€Œè¨€ï¼Œæ ¹DNSåªèƒ½æœ‰13ä¸ªIPã€‚</p>\n <p>æ­£å®—ç­”æ¡ˆæ˜¯ï¼šDNSä¸»è¦ä½¿ç”¨UDPæ•°æ®æŠ¥ä¼ é€æŠ¥æ–‡ï¼Œä¸å«å‰é¢çš„å„ç§å¤´éƒ¨ï¼ŒDNSæŠ¥æ–‡è¦æ±‚è¢«æ§åˆ¶åœ¨512å­—èŠ‚ä¹‹å†…ï¼ˆ RFC1035 ï¼‰ï¼Œä¸»è¦è€ƒè™‘æ˜¯è¿™ä¸ªå¤§å°å‡ ä¹å¯ä»¥åœ¨äº’è”ç½‘ä¸Šç•…é€šæ— é˜»ï¼Œä¸ä¼šå› ä¸ºè·¯å¾„ä¸­æŸä¸ªMTUå¤ªå°ï¼ˆ MTU é€šå¸¸æ€»ä¼š &gt;= 576ï¼Œè§ RFC791 ï¼‰è€Œå¯¼è‡´IPåˆ†ç‰‡ï¼Œä»è€Œé¢„é˜²äº†å„ç§ä¸å¯é¢„æœŸçš„åæœ_ï¼ˆ3ï¼‰_ã€‚</p>\n <p>è€Œæ¯ä¸€ä¸ªæ ¹DNSåœ¨DNSæŠ¥æ–‡ä¸­éƒ½è¦å ç”¨ä¸€å®šçš„å­—èŠ‚æ•°ï¼Œæ¯”å¦‚æ ¹çš„åç§°ã€TTLã€IPåœ°å€ç­‰ã€‚è¿™æ ·ï¼Œ13ä¸ªæ ¹åŸŸåæœåŠ¡å™¨åŸºæœ¬ä¸Šå°±æŠŠç©ºé—´å å·®ä¸å¤šäº†ï¼Œå‰©ä½™çš„å­—èŠ‚è¿˜è¦ç”¨äºåŒ…è£…DNSæŠ¥å¤´ä»¥åŠå…¶å®ƒåè®®å‚æ•°ï¼Œæ‰€ä»¥æ ¹åŸŸåæœåŠ¡å™¨ä¸æ˜“å¤ªå¤šï¼Œ13ä¸ªç®—æ˜¯æ¯”è¾ƒåˆé€‚çš„æ•°ç›®ã€‚å…·ä½“å¯ä»¥çœ‹ä¸€ä¸‹â€œWhy 13 DNS root servers?â€è¿™ç¯‡æ–‡ç« ã€‚_ï¼ˆ4&nbsp;ï¼‰_</p>\n <h2>çœŸçš„åªæœ‰13å°æœåŠ¡å™¨å—ï¼Ÿ</h2>\n <p>å’Œå¾ˆå¤šäººæƒ³è±¡çš„å®Œå…¨ä¸ä¸€æ ·ï¼Œè¿™13ä¸ªæ ¹åŸŸåæœåŠ¡å™¨ï¼Œå¹¶ä¸æ˜¯åªæœ‰13å°ç‰©ç†çš„æœåŠ¡å™¨ã€‚</p>\n <p>è¿™13ä¸ªæ ¹ï¼Œåªæ˜¯ä¸€ä¸ªé€»è¾‘ä¸Šçš„æ¦‚å¿µï¼Œæ¯ä¸ªæ ¹DNSï¼ŒèƒŒåéƒ½æœ‰å¤šå°çœŸæ­£çš„ç‰©ç†æœåŠ¡å™¨åœ¨å·¥ä½œï¼</p>\n <p>æˆªè‡³2020å¹´8æœˆ12æ—¥ï¼Œå…¨çƒä¸€å…±æœ‰1097ä¸ªæ ¹æœåŠ¡å™¨ã€‚æ¯ä¸€ä¸ªæ ¹éƒ½æœ‰è‹¥å¹²ä¸ªé•œåƒï¼Œåˆ†å¸ƒåœ¨å…¨çƒä¸åŒçš„åœ°æ–¹ã€‚</p>\n <p><img src=\"https://segmentfault.com/img/remote/1460000023696740\" alt=\"\" title=\"\" /></p>\n <blockquote>\n  è¿™ä¸ªæ•°ç›®åœ¨ä¸æ–­ä¸Šæ¶¨ï¼Œå»å¹´10æœˆ1æ—¥æ–°ä¸­å›½æˆç«‹70å‘¨å¹´é˜…å…µçš„æ—¶å€™ï¼Œæˆ‘çœ‹äº†ä¸€ä¸‹ï¼Œæ˜¯1015ä¸ªæœåŠ¡å™¨ã€‚\n  <p>è¿™13ä¸ªæ ¹ç”±12ä¸ªç‹¬ç«‹çš„æœºæ„ç®¡ç†ï¼Œæ¯”å¦‚Aæ ¹å’ŒJæ ¹éƒ½æ˜¯ç”±Verisignå…¬å¸ç®¡ç†ï¼Œæˆªè‡³2020å¹´8æœˆ12æ—¥ï¼ŒAæ ¹åœ¨å…¨çƒå„åœ°æœ‰53ä¸ªç«™ç‚¹ï¼ŒJæ ¹æœ‰185ä¸ªç«™ç‚¹ã€‚Læ ¹ç”±ICANNç®¡ç†ï¼Œå…¨çƒæœ‰167ä¸ªç«™ç‚¹ï¼Œå…¶ä¸­åŒ—äº¬2ä¸ªï¼Œä¸Šæµ·1ä¸ªã€‚</p>\n </blockquote>\n <p>åœ¨root-serversç½‘ç«™ä¸Š_ï¼ˆ5ï¼‰_ï¼Œå¯ä»¥æŸ¥åˆ°æ‰€æœ‰è¿™äº›æ ¹æœåŠ¡å™¨çš„åˆ†å¸ƒï¼Œä»ç½‘ç«™å±•ç¤ºçš„æ ¹é•œåƒæœåŠ¡å™¨åœ°å›¾ä¸Šçœ‹ï¼ˆ2020å¹´8æœˆ12æ—¥ï¼‰ï¼ŒåŒ—äº¬æœ‰ 5 ä¸ªæ ¹é•œåƒæœåŠ¡å™¨ï¼Œä¸Šæµ· 1 ä¸ªï¼Œæ­å· 2 ä¸ªï¼Œæ­¦æ±‰1ä¸ªã€éƒ‘å·1ä¸ªã€è¥¿å®1ä¸ªã€è´µé˜³1ä¸ªã€å¹¿å·1ä¸ªã€é¦™æ¸¯ 9 ä¸ªï¼Œå°åŒ— 6 ä¸ªã€‚</p>\n <p>åŒ…å«æ¸¯æ¾³å°éƒ¨åˆ†ï¼Œæˆ‘å›½ä¸€å…±æœ‰28ä¸ªæ ¹é•œåƒã€‚</p>\n <p>æˆ‘å›½å¢ƒå†…å‘å‡ºçš„å¯¹æ ¹DNSçš„è¯·æ±‚ï¼Œå…¶å®éƒ½ç”±é•œåƒå®Œæˆäº†ã€‚è¿™ä¸€ç‚¹åé¢ä¼šè§£é‡Šã€‚</p>\n <p>ç°åœ¨ï¼Œä¸ºäº†å¢é•¿çŸ¥è¯†ï¼Œä½ è¯¥ç¡¬ç€å¤´çš®çœ‹ä¸€äº›DNSç»†èŠ‚äº†ã€‚</p>\n <h2><strong>DNSåˆ°åº•æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ</strong></h2>\n <p>å¯¹äºITä»ä¸šè€…ï¼Œå¸Œæœ›ä½ èƒ½ç†è§£å¹¶ç‰¢ç‰¢è®°ä½æœ¬èŠ‚çš„å†…å®¹ã€‚</p>\n <p>å› ä¸ºä½ è¿Ÿæ—©ä¼šé‡åˆ°æœ‰å…³DNSçš„å›°æƒ‘ã€‚</p>\n <p>å…ˆä»‹ç»ä¸€ä¸‹åŸŸåçš„çº§åˆ«ï¼š</p>\n <p>.ä»£è¡¨æ ¹åŸŸåï¼Œ .comè¿™ç§æ˜¯é¡¶çº§åŸŸåï¼Œä¹Ÿå«ä¸€çº§åŸŸåï¼Œbaidu.comè¿™ç§å«äºŒçº§åŸŸåï¼Œ www.baidu.comè¿™ç§å«ä¸‰çº§åŸŸåï¼Œä¾æ¬¡ç±»æ¨ã€‚</p>\n <p>æ³¨ï¼šä¹Ÿæœ‰å…¶ä»–å«æ³•çš„ï¼Œåæ­£ä½ çŸ¥é“è¿™ä¸ªæ„æ€å°±å¯ä»¥äº†ã€‚</p>\n <p>å†ä»‹ç»ä¸€ä¸‹æœ€å¸¸è§çš„ä¸¤ç§åŸŸåæœåŠ¡å™¨ï¼š</p>\n <p>æƒå¨DNSï¼šè´Ÿè´£å¯¹è¯·æ±‚ä½œå‡ºæƒå¨çš„å›ç­”ã€‚æƒå¨DNSä¸­å­˜å‚¨ç€è®°å½•ï¼Œæœ€å¸¸è§çš„3ç§ï¼šAè®°å½•ï¼ˆè®°å½•æŸåŸŸåå’Œå…¶IPçš„å¯¹åº”ï¼‰ï¼ŒNSè®°å½•ï¼ˆè®°å½•æŸåŸŸåå’Œè´Ÿè´£è§£æè¯¥åŸŸçš„æƒå¨DNSï¼‰ï¼ŒCNAMEè®°å½•ï¼ˆè´Ÿè´£è®°å½•æŸåŸŸååŠå…¶åˆ«åï¼‰ã€‚æƒå¨èƒ½ç›´æ¥å›ç­”çš„ï¼Œå°±å›Aè®°å½•ï¼›éœ€è¦å…¶ä»–æƒå¨DNSå›ç­”çš„ï¼Œå°±å›NSè®°å½•ï¼Œç„¶åLDNSå†å»æ‰¾å…¶ä»–æƒå¨DNSé—®ï¼›å¦‚æœè¯¥è®°å½•æ˜¯åˆ«åç±»å‹çš„ï¼Œå°±å›CNAMEï¼ŒLDNSå°±ä¼šå†å»è§£æåˆ«åã€‚</p>\n <p>é€’å½’DNSï¼šé€šå¸¸å°±æ˜¯LDNSï¼Œå®ƒæ¥å—ç»ˆç«¯çš„åŸŸåæŸ¥è¯¢è¯·æ±‚ï¼Œè´Ÿè´£åœ¨ç½‘ä¸Šé—®ä¸€åœˆåï¼Œå°†ç­”æ¡ˆè¿”å›ç»ˆç«¯ã€‚</p>\n <p>ç°åœ¨ä¸¾ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼šæ¯”å¦‚ç»ˆç«¯è¯·æ±‚www.baidu.comè¿™ä¸ªåŸŸåçš„IPã€‚</p>\n <p>åœ¨æ²¡æœ‰ç¼“å­˜æ—¶ï¼ŒLDNSä¼šä»æ ¹DNSé—®èµ·ï¼š</p>\n <p>1ã€LDNSé—®æ ¹DNSè¯´ï¼šâ€œwww.baidu.comçš„IPæ˜¯å¤šå°‘å•Šï¼Ÿâ€ã€‚</p>\n <p>2ã€æ ¹DNSè¯´ï¼šâ€œæˆ‘å“ªæœ‰æ—¶é—´ç®¡ä½ è¿™ä¹ˆç»†çš„é—®é¢˜ï¼Œä½ å»é—®comé¡¶çº§åŸŸçš„DNSå§ï¼Œæˆ‘åªç®¡åˆ°é¡¶çº§åŸŸï¼Œå–ï¼Œè¿™äº›æ˜¯comé¡¶çº§åŸŸDNSçš„åå­—å’ŒIPï¼Œä½ å»é—®å®ƒä»¬å§â€ã€‚ï¼ˆä»¥NSè®°å½•å›åº”ï¼‰</p>\n <p>3ã€LDNSåˆå¿™é—®comçš„æƒå¨DNSï¼Œcomæƒå¨DNSè¯´ï¼šâ€œä½ é—®çš„è¿™æ˜¯ä¸‰çº§åŸŸåï¼Œæˆ‘ä¸ç®¡è¿™ä¹ˆå¤šï¼Œä½ å»é—®baidu.comçš„æƒå¨DNSå§ï¼Œå®ƒçš„åå­—æ˜¯ns.baidu.comï¼Œä»–çš„IPæ˜¯XXXï¼ˆè¿™é‡Œå¯èƒ½ç»™å‡ºå¤šä¸ªæƒå¨DNSï¼‰â€ã€‚</p>\n <p>4ã€LDNSç»§ç»­é—®baidu.comçš„æƒå¨DNSï¼Œè¿™æ¬¡ç—›å¿«ï¼Œå› ä¸ºwww.baidu.comæ­£æ˜¯å®ƒç®¡çš„ï¼Œå®ƒå¯èƒ½ç›´æ¥ç»™å‡ºAè®°å½•ï¼Œä¹Ÿå¯èƒ½ç»™å‡ºCNAMEè®°å½•ï¼Œå¦‚æœæ˜¯å‰è€…ï¼Œå°±ç›´æ¥å¾—åˆ°IPï¼Œå¦‚æœæ˜¯åè€…ï¼Œå°±éœ€è¦å¯¹åˆ«åå†åšæŸ¥è¯¢ã€‚</p>\n <p>5ã€æœ€ç»ˆï¼ŒLDNSå¾—åˆ°www.baidu.comçš„IPï¼Œå¹¶å°†å…¶è¿”å›ç»™ç»ˆç«¯ã€‚</p>\n <p><img src=\"https://segmentfault.com/img/bVbLAK3\" alt=\"ç¾å›½å¦‚æœæŠŠæ ¹åŸŸåæœåŠ¡å™¨å°äº†ï¼Œä¸­å›½ä¼šä»ç½‘ç»œä¸Šæ¶ˆå¤±ï¼Ÿ\" title=\"ç¾å›½å¦‚æœæŠŠæ ¹åŸŸåæœåŠ¡å™¨å°äº†ï¼Œä¸­å›½ä¼šä»ç½‘ç»œä¸Šæ¶ˆå¤±ï¼Ÿ\" /></p>\n <p>ç»†å¿ƒçš„äººä¼šé—®ï¼Œåœ¨ç¬¬1æ­¥ä¸­ï¼ŒLDNSé—®æ ¹DNSçš„æ—¶å€™ï¼Œä»–æ˜¯æ€ä¹ˆçŸ¥é“æ ¹DNSçš„IPçš„ï¼Ÿ</p>\n <p>è¿™13ä¸ªIPé€šå¸¸æ˜¯é¢„å…ˆé…ç½®åœ¨LDNSé‡Œé¢çš„ã€‚åœ¨LDNSåˆå§‹åŒ–DNSç¼“å­˜æˆ–è€…ç¼“å­˜å¤±æ•ˆçš„æ—¶å€™ï¼ŒLDNSå‘è‡ªå·±è¢«é¢„å…ˆé…ç½®çš„è¿™äº›IPä¸­çš„ä¸€ä¸ªï¼Œå‘èµ·å¯¹æ ¹çš„æŸ¥è¯¢ï¼ˆä¹Ÿå³è¯¢é—®.çš„NSè®°å½•ï¼‰ï¼Œè·å¾—æœ€æ–°çš„æ ¹DNSçš„ä¿¡æ¯_ï¼ˆ6ï¼‰_ã€‚</p>\n <blockquote>\n  å¯¹äºDNSæœåŠ¡å™¨è½¯ä»¶è€Œè¨€ï¼Œè¿™13ä¸ªIPï¼Œé…ç½®åœ¨æ ¹æç¤ºæ–‡ä»¶ï¼ˆroot hints fileï¼‰ä¸­ï¼Œå¯èƒ½æ˜¯named.cacheæˆ–root.caæˆ–root.hintsç­‰ç­‰ä¹‹ç±»çš„æ–‡ä»¶ã€‚\n </blockquote>\n <p>ä¸Šé¢å°±æ˜¯å„ç§æ•™ç§‘ä¹¦ä¸­éƒ½ä¼šè®²åˆ°çš„DNSæŸ¥è¯¢è¿‡ç¨‹ï¼Œä½†å®é™…ä¸Šï¼Œæ²¡æœ‰è¿™ä¹ˆéº»çƒ¦ï¼Œå› ä¸ºå„ä¸ªå±‚é¢éƒ½æ˜¯æœ‰ç¼“å­˜çš„ã€‚</p>\n <p>å®é™…DNSæŸ¥è¯¢çš„è¿‡ç¨‹ï¼Œæ˜¯è¿™æ ·çš„ï¼š</p>\n <p>ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­è¾“å…¥è¿™ä¸ªåŸŸåï¼š123.abc.qq.com.cn</p>\n <p>1ã€æµè§ˆå™¨ä¼šå…ˆçœ‹è‡ªèº«æœ‰æ²¡æœ‰å¯¹è¿™ä¸ªåŸŸåçš„ç¼“å­˜ï¼Œå¦‚æœæœ‰ï¼Œå°±ç›´æ¥è¿”å›ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±å»é—®æ“ä½œç³»ç»Ÿï¼Œæ“ä½œç³»ç»Ÿä¹Ÿä¼šå»çœ‹è‡ªå·±çš„ç¼“å­˜ï¼Œå¦‚æœæœ‰ï¼Œå°±ç›´æ¥è¿”å›ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå†å»hostsæ–‡ä»¶çœ‹ï¼Œä¹Ÿæ²¡æœ‰ï¼Œæ‰ä¼šå»é—®LDNSã€‚</p>\n <p>2ã€LDNSä¼šå»å…ˆçœ‹çœ‹è‡ªå·±æœ‰æ²¡æœ‰123.abc.qq.com.cnçš„Aè®°å½•ï¼Œè¦æœ‰å°±ç›´æ¥è¿”å›ï¼Œè¦æ²¡æœ‰ï¼Œå°±å»çœ‹æœ‰æ²¡æœ‰abc.qq.com.cnçš„NSè®°å½•ï¼Œå¦‚æœæœ‰ï¼Œå°±å»é—®å®ƒè¦ç­”æ¡ˆï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±å»çœ‹æœ‰æ— qq.com.cnçš„NSçš„è®°å½•ï¼Œå¦‚æœæœ‰ï¼Œå°±å»é—®å®ƒï¼Œæ²¡æœ‰å°±å»çœ‹æœ‰æ— com.cnçš„DNSï¼Œè¿˜æ²¡æœ‰å°±å»çœ‹æœ‰æ— cnçš„DNSï¼Œå¦‚æœè¿cnçš„NSè®°å½•éƒ½æ²¡æœ‰ï¼Œæ‰å»é—®æ ¹ã€‚</p>\n <p>æ‰€ä»¥ï¼Œæœ‰äº†ç¼“å­˜ä»¥åï¼Œæ•™ç§‘ä¹¦ä¸Šé‚£ç§ä»æ ¹é—®èµ·çš„æƒ…å†µï¼Œå®é™…ä¸Šå¾ˆå°‘å‘ç”Ÿã€‚</p>\n <p>åªæœ‰åœ¨å„å¤„éƒ½æ²¡æœ‰ç¼“å­˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ‰ä¼šé—®æ ¹ã€‚</p>\n <h2><strong>æ ¹é•œåƒèµ·ä»€ä¹ˆä½œç”¨ï¼Ÿ</strong></h2>\n <p>æ ¹é•œåƒæ‰¿æ‹…èµ·å’Œæ ¹ä¸€æ ·çš„åŠŸèƒ½ã€‚</p>\n <p>æ ¹DNSä¸­ï¼Œæœ€é‡è¦çš„æ–‡ä»¶å°±æ˜¯æ ¹åŒºæ–‡ä»¶ï¼ˆRoot Zone fileï¼‰ã€‚æ‰€æœ‰é¡¶çº§åŸŸåè®°å½•éƒ½å­˜åœ¨æ ¹åŒºæ–‡ä»¶ä¸­ã€‚</p>\n <p>è¾…æ ¹ä»ä¸»æ ¹åŒæ­¥æ•°æ®ï¼Œæ ¹é•œåƒä»æ ¹åŒæ­¥æ•°æ®ã€‚æœ€ç»ˆï¼Œæ‰€æœ‰æ ¹å’Œé•œåƒéƒ½æœ‰ç€åŒæ ·çš„æ ¹åŒºæ–‡ä»¶ã€‚</p>\n <p>è€Œä¸”æœ€æœ‰æ„æ€çš„æ˜¯ï¼Œæ ¹é•œåƒå’Œæ ¹æœ‰ç€åŒæ ·çš„IPã€‚</p>\n <p>æˆ‘ä»¬çŸ¥é“ï¼Œå…¨çƒæœ‰ä¸€åƒå¤šä¸ªæ ¹é•œåƒï¼Œä½†æ˜¯å¤§å¤šæ•°äººä¸çŸ¥é“ï¼Œå®ƒä»¬ä¸€èµ·å…±äº«13ä¸ªIPï¼&nbsp; å¯¹çš„ã€‚å› ä¸ºåªæœ‰13ä¸ªæ ¹ã€‚</p>\n <p>è¿™æ˜¯å¦‚ä½•åšåˆ°çš„ï¼Ÿç­”æ¡ˆæ˜¯ä»»æ’­ï¼ˆAnycastï¼Œåˆè¯‘æ³›æ’­ï¼‰æŠ€æœ¯ã€‚</p>\n <p>ä¸å…³å¿ƒæŠ€æœ¯ç»†èŠ‚çš„ï¼Œè¯·ç›´æ¥çœ‹æœ¬èŠ‚çš„æœ€åä¸€å¥ã€‚</p>\n <p>ä»»æ’­æœ€åˆç”±RFC1546æå‡ºï¼Œä¸»è¦ç”¨åœ¨DNSæ ¹æœåŠ¡å™¨ä¸Šã€‚</p>\n <blockquote>\n  ä»»æ’­æ˜¯æŒ‡åœ¨IPç½‘ç»œä¸Šé€šè¿‡ä¸€ä¸ªIPåœ°å€æ ‡è¯†ä¸€ç»„æä¾›ç‰¹å®šæœåŠ¡çš„ä¸»æœºï¼ŒæœåŠ¡è®¿é—®æ–¹å¹¶ä¸å…³å¿ƒæä¾›æœåŠ¡å…·ä½“æ˜¯å“ªä¸€å°ä¸»æœºæä¾›çš„ï¼Œè®¿é—®è¯¥åœ°å€çš„æŠ¥æ–‡å¯ä»¥è¢«IPç½‘ç»œè·¯ç”±åˆ°â€œæœ€è¿‘â€çš„ä¸€ä¸ªï¼ˆæœ€å¥½ä¹Ÿåªæ˜¯ä¸€ä¸ªï¼Œåˆ«é€åˆ°å¤šä¸ªï¼‰æœåŠ¡å™¨ä¸Šã€‚è¿™é‡Œâ€œæœ€è¿‘â€å¯ä»¥æ˜¯æŒ‡è·¯ç”±å™¨è·³æ•°ã€æœåŠ¡å™¨è´Ÿè½½ã€æœåŠ¡å™¨ååé‡ã€å®¢æˆ·å’ŒæœåŠ¡å™¨ä¹‹é—´çš„å¾€è¿”æ—¶é—´ï¼ˆ RTTï¼Œround trip time ï¼‰ã€é“¾è·¯çš„å¯ç”¨å¸¦å®½ç­‰ç‰¹å¾å€¼ã€‚\n </blockquote>\n <p>è¿™æ ·ï¼Œä¸€æ–¹é¢ï¼Œç”¨æˆ·å¯ä»¥å°±è¿‘è®¿é—®ï¼›å¦ä¸€æ–¹é¢ï¼Œå³ä¾¿éƒ¨åˆ†æ ¹å‡ºç°æ•…éšœä¹Ÿæ²¡äº‹ã€‚</p>\n <p>æœ‰äº›åŒå­¦å¯èƒ½è”æƒ³åˆ°è´Ÿè½½å‡è¡¡ï¼Œæ²¡é”™ï¼Œå¤§è‡´ä¸Šå°±æ˜¯è¿™ä¸ªæ„æ€ã€‚</p>\n <p>å¯¹äºä¸­å›½ç”¨æˆ·æ¥è¯´ï¼Œå¯¹æ ¹çš„è¯·æ±‚ï¼Œä¸€èˆ¬ä¸ä¼šè·‘åˆ°ç¾å›½å»ï¼Œè€Œæ˜¯é€šè¿‡ä»»æ’­æŠ€æœ¯è·¯ç”±åˆ°ä¸­å›½å¢ƒå†…çš„æ ¹é•œåƒä¸Šã€‚</p>\n <h2>æ ¹DNSæ˜¯æ€ä¹ˆç®¡ç†çš„ï¼Ÿ</h2>\n <p>æ ¹DNSç›®å‰ç”±12å®¶æœºæ„ç®¡ç†ã€‚Aæ ¹æ˜¯ä¸»æ ¹ï¼Œç”±ç¾å›½å…¬å¸Verisignç®¡ç†ã€‚</p>\n <p>æ ¹DNSä¸­æœ€é‡è¦çš„æ–‡ä»¶ï¼Œæ ¹åŒºæ–‡ä»¶ï¼Œç”±ICANNç®¡ç†ã€‚</p>\n <p>ICANNï¼ˆThe Internet Corporation for Assigned Names and Numbersï¼Œäº’è”ç½‘åç§°ä¸æ•°å­—åœ°å€åˆ†é…æœºæ„ï¼‰æ˜¯æˆç«‹äº1998å¹´çš„ä¸€å®¶æ³¨å†Œåœ¨ç¾å›½çš„éè¥åˆ©æ€§ç»„ç»‡ã€‚</p>\n <p>æ ¹DNSç®¡ç†çš„å†å²å˜è¿è¿‡ç¨‹è¿˜æ˜¯æ¯”è¾ƒå¤æ‚çš„ã€‚è¿™é‡Œç®€è¦è¯´ä¸€ä¸‹ã€‚</p>\n <p>DNSæœ€åˆçš„æŠ€æœ¯å¼€å‘è€…ä¸ç®¡ç†è€…æ˜¯ç¾å›½å—åŠ å·å¤§å­¦çš„Jon Postelåšå£«ï¼Œä»–æŒç®¡äº’è”ç½‘åˆæœŸæ ¹DNSçš„ç®¡ç†å’Œåˆ†é…ã€‚</p>\n <p>1988å¹´ï¼Œç¾å›½æ”¿åºœè¦æ±‚Jon Postelé‡‡å–æ›´å®‰å…¨å’Œæ›´åˆç†çš„æªæ–½æ¥ä¿è¯äº’è”ç½‘æ ¸å¿ƒèµ„æºçš„åˆ†é…å’Œç®¡ç†_ï¼ˆ7ï¼‰_ã€‚äºæ˜¯ï¼Œå¤§åé¼é¼çš„IANAï¼ˆThe Internet Assigned Numbers Authorityï¼Œäº’è”ç½‘æ•°å­—åˆ†é…æœºæ„ï¼‰è¢«ç»„å»ºï¼Œå¹¶åœ¨DARPAå’Œå—åŠ å·å¤§å­¦ä¿¡æ¯ç§‘å­¦ç ”ç©¶æ‰€ï¼ˆISIï¼‰çš„åˆåŒä¸‹ç®¡ç†ã€‚</p>\n <blockquote>\n  IANAè´Ÿè´£äº’è”ç½‘å…¨å±€ç¼–å·å’Œç¼–ç çš„ç®¡ç†ä¸åè°ƒï¼Œä¹‹æ‰€ä»¥éœ€è¦è¿™ä¹ˆä¸ªæœºæ„ï¼Œæ˜¯å› ä¸ºäº’è”ç½‘åè®®çš„å€¼æˆ–å‚æ•°ï¼Œå¿…é¡»æ˜¯å…¨çƒå”¯ä¸€çš„ï¼Œå¦åˆ™æ— æ³•äº’è”äº’é€šï¼Œæ¯”å¦‚HTTPåè®®é»˜è®¤éƒ½åœ¨80ç«¯å£ç­‰å¾…ç”¨æˆ·è¯·æ±‚ï¼Œè€Œ404ç¼–ç åˆ™ä¸€è‡´ä»£è¡¨\"æœªæ‰¾åˆ°é¡µé¢â€ã€‚IANAä¸»è¦èŒè´£åŒ…æ‹¬IPåœ°å€æ®µçš„åˆ†é…ã€åè®®ä»£ç å’Œç¼–å·çš„åˆ†é…ï¼ˆå¦‚åè®®å·ã€ç«¯å£å·ï¼‰ã€è‡ªæ²»ç³»ç»Ÿç¼–å· (ASN) åˆ†é…ã€DNSæ ¹åŒºç®¡ç†ï¼ˆåŒ…æ‹¬é€šç”¨é¡¶çº§åŸŸågTLDä»¥åŠå›½å®¶å’Œåœ°åŒºé¡¶çº§åŸŸåccTLDç®¡ç†ï¼‰ç­‰ã€‚_ï¼ˆ8ï¼‰_\n </blockquote>\n <p>1998å¹´ICANNæˆç«‹ä¹‹åï¼Œç¾å›½å•†åŠ¡éƒ¨ä»¥åˆåŒå½¢å¼ï¼Œå§”æ‰˜ICANNæ‰¿æ‹…IANAæ—¥å¸¸è¿è¡Œï¼ŒIANAä»ISIè½¬ç§»åˆ°ICANNä¹‹ä¸‹ã€‚</p>\n <p>å¯¹äºé¡¶çº§åŸŸåçš„ç®¡ç†ï¼ŒICANNçš„æ”¿ç­–æ˜¯ï¼Œæ¯ä¸ªé¡¶çº§åŸŸåï¼ˆåƒcomã€cnã€orgè¿™ç§é¡¶çº§åŸŸåï¼Œç›®å‰æœ‰1000å¤šä¸ªï¼‰éƒ½æ‰¾ä¸€ä¸ªæ‰˜ç®¡å•†ï¼Œè¯¥åŸŸåçš„æ‰€æœ‰äº‹é¡¹éƒ½ç”±æ‰˜ç®¡å•†è´Ÿè´£ã€‚</p>\n <p>.cnåŸŸåçš„æ‰˜ç®¡å•†æ˜¯ä¸­å›½äº’è”ç½‘ç»œä¿¡æ¯ä¸­å¿ƒï¼ˆCNNICï¼‰ï¼Œå®ƒå†³å®š.cnåŸŸåçš„å„ç§æ”¿ç­–ã€‚</p>\n <p>.comã€.net ã€.nameã€.govè¿™å››ä¸ªé¡¶çº§åŸŸåéƒ½ç”±Verisignå…¬å¸æ‰˜ç®¡ã€‚</p>\n <p>Verisignå’ŒICANNè¿˜æ˜¯é—¹è¿‡å‡ æ¬¡ä¸æ„‰å¿«çš„ã€‚_ï¼ˆ9ï¼‰_</p>\n <blockquote>\n  2003å¹´ï¼ŒVerisign æ¨å‡ºäº†ä¸€é¡¹æ–°ä¸šåŠ¡ Site Finderï¼Œç”¨æˆ·è®¿é—®æ²¡æœ‰æ³¨å†Œè¿‡çš„.comæˆ–.netåŸŸåï¼Œéƒ½ä¼šè¢«å¯¼å‘ Verisign çš„ç½‘ç«™ã€‚è¿™æ„å‘³ç€ï¼Œå®ƒäº‹å®ä¸Šæ‹¥æœ‰äº†æ‰€æœ‰æ²¡æœ‰æ³¨å†Œè¿‡çš„.comå’Œ.netåŸŸåã€‚å‡ å¤©ä¹‹å†…ï¼ŒVerisign å°±æŒ¤å…¥äº†å…¨ä¸–ç•Œçš„å‰10å¤§ç½‘ç«™ã€‚\n  <p>ICANN è¦æ±‚ Verisign ç«‹åˆ»åœæ­¢è¯¥ä¸šåŠ¡ï¼Œå¦åˆ™å°†ç»ˆæ­¢åŸŸåæ‰˜ç®¡åˆåŒã€‚Verisign å±ˆæœäº†ï¼Œåœæ­¢äº†è¿™é¡¹ä¸šåŠ¡ï¼Œä½†æ˜¯æ¥ç€å°±æŠŠ ICANN å‘Šä¸Šäº†æ³•åº­ï¼Œè¦æ±‚æ³•åº­å˜è¯·ä¸¤è€…ä¹‹é—´çš„åˆåŒï¼ŒICANN åˆ°åº•æœ‰æ²¡æœ‰æƒåŠ›å¹²æ¶‰å®ƒçš„ä¸šåŠ¡ã€‚</p>\n  <p>2006å¹´åº•ï¼Œä»–ä»¬è¾¾æˆäº†åº­å¤–å’Œè§£ã€‚ICANN åŒæ„å»¶é•¿ Verisign çš„é¡¶çº§åŸŸåæ‰˜ç®¡åˆåŒï¼Œå¹¶ä¸”åŒæ„ Verisign å‘æ¶ˆè´¹è€…æ”¶å–çš„å•ä¸ªåŸŸåæ³¨å†Œè´¹çš„ä¸Šé™ï¼Œä»6ç¾å…ƒæé«˜åˆ°äº†7.85ç¾å…ƒã€‚è¿™ä¸ªè´¹ç”¨æ ‡å‡†ï¼Œä¸€ç›´æ²¿ç”¨åˆ°äº†ä»Šå¤©ï¼Œä½ å»æ³¨å†Œä¸€ä¸ª.comæˆ–.netåŸŸåï¼Œæ‰€äº¤çš„é’±æœ‰0.18ç¾å…ƒæ˜¯ ICANN æ”¶å–çš„ç®¡ç†è´¹ï¼Œ7.85ç¾å…ƒæ˜¯ Verisign æ”¶å–çš„æ‰˜ç®¡è´¹ï¼Œå…¶ä½™çš„é’±å°±æ˜¯åŸŸåé›¶å”®å•†çš„è´¹ç”¨ã€‚</p>\n </blockquote>\n <p>è™½ç„¶æ˜¯ICANNè¿è¥ç€IANAï¼Œä½†æ¯•ç«Ÿæ˜¯åœ¨ç¾å›½æ”¿åºœçš„åˆåŒç®¡ç†ä¹‹ä¸‹ï¼Œå…¨çƒå„å›½ä»¥åŠæ°‘é—´äººå£«é¢‡æœ‰å¾®è¯ï¼Œä¸€è‡´è®¤ä¸ºç¾å›½æ”¿åºœåº”è¯¥å½»åº•é€€å‡ºã€‚</p>\n <p>2014å¹´3æœˆ14æ—¥ï¼Œç¾å›½å•†åŠ¡éƒ¨å›½å®¶é€šè®¯ä¸ä¿¡æ¯ç®¡ç†å±€ï¼ˆNTIAï¼‰å®£å¸ƒæ„¿æ„å°†IANAçš„ç®¡ç†æƒå®Œå…¨ç§»äº¤ç»™ICANNï¼Œå¹¶è¦æ±‚ICANNåˆ¶å®šç§»äº¤è®¡åˆ’ã€‚NTIAå°¤å…¶å¼ºè°ƒï¼Œç§»äº¤è®¡åˆ’è¦å¼ºåŒ–å¤šåˆ©ç›Šç›¸å…³æ–¹æ¨¡å¼ï¼Œä¸èƒ½ä»¥æ”¿åºœé—´ç»„ç»‡æˆ–æ”¿åºœé¢†å¯¼çš„ç»„ç»‡å–ä»£å½“å‰NTIAæ‰®æ¼”çš„è§’è‰²ã€‚</p>\n <p>2016å¹´3æœˆ17æ—¥ï¼ŒICANNå‘NTIAæäº¤äº†ç§»äº¤è®¡åˆ’ã€‚2016å¹´6æœˆ9æ—¥ï¼ŒNTIAå…¬å¸ƒå®¡æ ¸æ„è§ï¼Œè¡¨ç¤ºICANNæäº¤çš„ç§»äº¤è®¡åˆ’æ»¡è¶³äº†æ­¤å‰è®¾å®šçš„æ¡ä»¶ã€‚</p>\n <p>2016å¹´8æœˆ16æ—¥ï¼ŒNTIAå®£å¸ƒä¸å†å»¶æœŸç°æœ‰åˆåŒã€‚</p>\n <p>è™½ç„¶é‡åˆ°ä¸€äº›é˜»æŒ _ï¼ˆ10ï¼‰_ï¼Œæœ€ç»ˆï¼Œ2016å¹´10æœˆ1æ—¥ï¼ŒICANNå’Œç¾å›½å•†åŠ¡éƒ¨ä¹‹é—´å…³äºIANAèŒèƒ½çš„åˆåŒåˆ°æœŸä¸”ä¸å†ç»­çº¦ï¼ŒICANNå½»åº•æˆä¸ºç‹¬ç«‹çš„éè¥åˆ©æœºæ„ã€‚IANAéƒ¨é—¨çš„å‘˜å·¥å’Œå…¶ä»–çš„ç›¸å…³èµ„æºéƒ½è¢«è½¬ç§»åˆ°ICANNæ–°è®¾ç«‹çš„é™„å±æœºæ„PTIï¼ˆPublic Technical Identifiersï¼Œå…¬å…±æŠ€æœ¯æ ‡è¯†ç¬¦ï¼‰ä¸­ã€‚</p>\n <p>ICANNä½¿ç”¨å…¨çƒå¤šåˆ©ç›Šç›¸å…³æ–¹æ²»ç†æ¨¡å‹ï¼ˆglobal multistakeholder governance modelï¼‰è¿›è¡Œç®¡ç†ã€‚PTIè‘£äº‹ä¼šå…±5å¸­ï¼Œ3å¸­ç”±ICANNå§”æ´¾ï¼Œ2å¸­ç”±å…¨çƒäº’è”ç½‘ç¤¾ç¾¤ä»£è¡¨ç»„æˆæåå§”å‘˜ä¼šäº§ç”Ÿã€‚2017å¹´2æœˆï¼ŒICANNå‘å¸ƒPTIè‘£äº‹ç«é€‰å…¬å‘Šï¼Œç»åŠå¹´å¤šè½®é¢è¯•åŠèƒŒæ™¯è°ƒæŸ¥ï¼Œæåå§”å‘˜ä¼šäº2017å¹´10æœˆ26æ—¥å®£å¸ƒæˆ‘å›½åŒ—é¾™ä¸­ç½‘çš„ç‹ä¼Ÿä¸å¦ä¸€æ¬§æ´²ä»£è¡¨ä¸­é€‰ã€‚åˆç»ä¸€ä¸ªåŠæœˆçš„åˆ©ç›Šå†²çªå®¡æŸ¥ï¼Œ2017å¹´12æœˆ13æ—¥ICANNè‘£äº‹ä¼šæ­£å¼ç¡®è®¤ç‹ä¼Ÿå½“é€‰ã€‚_ï¼ˆ11ï¼‰_</p>\n <h2><strong>æˆ‘å›½çš„æ ¹é•œåƒç”±è°ç®¡ç†ï¼Ÿ</strong></h2>\n <p>ä»ç›®å‰æˆ‘æ‰€æ‰¾åˆ°çš„èµ„æ–™çœ‹ï¼Œè‡ª2003å¹´ä»¥æ¥ï¼Œæˆ‘å›½åœ¨ä¸æ–­å¼•è¿›æ ¹é•œåƒï¼Œå°¤å…¶æ˜¯å»å¹´ï¼Œæ ¹é•œåƒä¸ªæ•°å¢é€Ÿå¾ˆå¿«ã€‚</p>\n <p>2003å¹´ï¼Œä¸­å›½ç”µä¿¡å¼•å…¥äº†å›½å†…ç¬¬ä¸€ä¸ªæ ¹é•œåƒèŠ‚ç‚¹ï¼ˆFæ ¹ï¼‰ã€‚</p>\n <p>2005å¹´ï¼ŒIæ ¹æœåŠ¡å™¨è¿è¡Œæœºæ„åœ¨ CNNIC è®¾ç«‹äº†ä¸­å›½ç¬¬äºŒä¸ªæ ¹é•œåƒï¼ˆIæ ¹ï¼‰ã€‚</p>\n <p>2006å¹´ï¼Œä¸­å›½è”é€š(åŸä¸­å›½ç½‘é€š)ä¸ç¾å›½ VeriSign å…¬å¸åˆä½œï¼Œ åœ¨å›½å†…æ­£å¼å¼€é€šJæ ¹é•œåƒæœåŠ¡å™¨ï¼ŒåŒæ—¶å¼•å…¥äº†å…¨çƒæœ€å¤§çš„ä¸¤ä¸ªé¡¶çº§åŸŸå â€œ.COMâ€å’Œâ€œ.NETâ€é•œåƒèŠ‚ç‚¹ï¼›å¼•è¿›è¿™äº›é•œåƒçš„ä¸»è¦ç›®çš„æ˜¯æé«˜æ ¹åŸŸåå’Œé¡¶çº§åŸŸåçš„è§£ææ€§èƒ½ã€‚</p>\n <p>2014å¹´ï¼Œä¸–çºªäº’è”ä¸ICANNåˆä½œåœ¨ä¸­å›½å¢è®¾Læ ¹åŸŸåæœåŠ¡å™¨é•œåƒã€‚</p>\n <p>2019å¹´6æœˆ24æ—¥ï¼Œå·¥ä¿¡éƒ¨æ‰¹å‡†CNNICè®¾ç«‹å…­å°åŸŸåæ ¹é•œåƒæœåŠ¡å™¨ï¼ˆFã€Iã€Kã€Lï¼‰ã€‚è¿™å…­å°åŸŸåæ ¹æœåŠ¡å™¨ç¼–å·ä¸º JX0001Fã€JX0002Fã€JX0003Iã€JX0004Kã€JX0005L å’Œ JX0006L_ï¼ˆ12ï¼‰_ï¼Œå¹¶æ‰¹å‡†äº’è”ç½‘åŸŸåç³»ç»ŸåŒ—äº¬å¸‚å·¥ç¨‹ç ”ç©¶ä¸­å¿ƒï¼ˆZDNSï¼‰è®¾ç«‹Læ ¹é•œåƒæœåŠ¡å™¨JX0007L_ï¼ˆ13ï¼‰_ã€‚</p>\n <p>2019å¹´11æœˆ6æ—¥ï¼Œå·¥ä¿¡éƒ¨æ‰¹å¤åŒæ„ä¸­å›½ä¿¡æ¯é€šä¿¡ç ”ç©¶é™¢è®¾ç«‹Læ ¹é•œåƒæœåŠ¡å™¨ï¼Œç¼–å·åˆ†åˆ«ä¸ºJX0008Lã€JX0009Lã€‚</p>\n <p>2019å¹´12æœˆ5æ—¥ï¼Œå·¥ä¿¡éƒ¨æ‰¹å¤åŒæ„ä¸­å›½ä¿¡æ¯é€šä¿¡ç ”ç©¶é™¢è®¾ç«‹åŸŸåæ ¹æœåŠ¡å™¨ï¼ˆKæ ¹é•œåƒæœåŠ¡å™¨ï¼‰ï¼Œç¼–å·ä¸ºJX0010Kã€‚</p>\n <p>2019å¹´12æœˆ9æ—¥ï¼Œå·¥ä¿¡éƒ¨æ‰¹å¤åŒæ„CNNICè®¾ç«‹åŸŸåæ ¹æœåŠ¡å™¨ï¼ˆJã€Kæ ¹é•œåƒæœåŠ¡å™¨ï¼‰ï¼Œç¼–å·åˆ†åˆ«ä¸ºJX0011Jã€JX0012Kã€‚</p>\n <p>ä»å·¥ä¿¡éƒ¨çš„æ‰¹æ–‡ä¸­å¯ä»¥äº†è§£åˆ°ï¼Œç›¸å…³å•ä½è´Ÿè´£æ ¹é•œåƒçš„è¿è¡Œã€ç»´æŠ¤å’Œç®¡ç†å·¥ä½œï¼Œç»´æŠ¤å›½å®¶åˆ©ç›Šå’Œç”¨æˆ·æƒç›Šï¼Œå¹¶æ¥å—å·¥ä¿¡éƒ¨çš„ç®¡ç†å’Œç›‘ç£æ£€æŸ¥ã€‚</p>\n <blockquote>\n  å·¥ä¿¡éƒ¨åœ¨ç»™CNNICçš„æ‰¹æ–‡ä¸­å†™é“ï¼šâ€œä½ ä¸­å¿ƒåº”ä¸¥æ ¼éµå®ˆã€Šäº’è”ç½‘åŸŸåç®¡ç†åŠæ³•ã€‹ã€Šé€šä¿¡ç½‘ç»œå®‰å…¨é˜²æŠ¤ç®¡ç†åŠæ³•ã€‹åŠç›¸å…³æ³•å¾‹æ³•è§„ã€è¡Œæ”¿è§„ç« åŠè¡Œä¸šç®¡ç†è§„å®šï¼Œæ¥å—æˆ‘éƒ¨çš„ç®¡ç†å’Œç›‘ç£æ£€æŸ¥ï¼Œå»ºç«‹ç¬¦åˆæˆ‘éƒ¨è¦æ±‚çš„ä¿¡æ¯ç®¡ç†ç³»ç»Ÿå¹¶ä¸æˆ‘éƒ¨æŒ‡å®šçš„ç®¡ç†ç³»ç»Ÿå¯¹æ¥ï¼Œä¿è¯åŸŸåæ ¹æœåŠ¡å™¨å®‰å…¨ã€å¯é è¿è¡Œï¼Œä¸ºç”¨æˆ·æä¾›å®‰å…¨ã€æ–¹ä¾¿çš„åŸŸåæœåŠ¡ï¼Œä¿éšœæœåŠ¡è´¨é‡ï¼Œä¿æŠ¤ç”¨æˆ·ä¸ªäººä¿¡æ¯å®‰å…¨ï¼Œç»´æŠ¤å›½å®¶åˆ©ç›Šå’Œç”¨æˆ·æƒç›Šã€‚â€\n </blockquote>\n <h2><strong>ç¾å›½èƒ½å¯¹æ ¹DNSåšä»€ä¹ˆæ‰‹è„šï¼Ÿ</strong></h2>\n <p>è™½ç„¶ICANNæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„éè¥åˆ©æ€§æœºæ„ï¼Œä½†å¦‚æœç¾å›½æ”¿åºœåŠ¨ç”¨å¼ºåˆ¶åŠ›é‡ï¼ŒAæ ¹ï¼ˆä¸»æ ¹ï¼‰çš„å†…å®¹ä»ç„¶å­˜åœ¨è¢«ç¯¡æ”¹çš„å¯èƒ½ã€‚</p>\n <p>ä¹Ÿå°±æ˜¯æ ¹åŒºæ–‡ä»¶å¯ä»¥è¢«ç¯¡æ”¹ã€‚</p>\n <p>ä¼šæ€ä¹ˆç¯¡æ”¹ï¼Ÿ</p>\n <p>æˆ‘ä»¬å…ˆçœ‹çœ‹æ ¹åŒºæ–‡ä»¶é•¿ä»€ä¹ˆæ ·ã€‚</p>\n <p>ä»ICANNå®˜ç½‘ä¸Šå¯ä»¥ä¸‹è½½æ ¹åŒºæ–‡ä»¶ï¼š</p>\n <p><a href=\"https://www.iana.org/domains/root/files\" rel=\"nofollow noreferrer\">https://www.iana.org/domains/...</a></p>\n <blockquote>\n  è¯¥æ–‡ä»¶ä¿å­˜æ‰€æœ‰é¡¶çº§åŸŸåçš„ä¿¡æ¯ï¼Œç›®å‰å¤§å°ä¸º2.2Mï¼Œ2ä¸‡ä½™è¡Œã€‚\n  <p>æ¯å½“æœ‰é¡¶çº§åŸŸåçš„å˜åŠ¨æ—¶ï¼Œè¯¥æ–‡ä»¶å°±ä¼šæ›´æ–°ã€‚</p>\n </blockquote>\n <p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå’ŒcnåŸŸåè§£æç›¸å…³çš„è®°å½•ä¹Ÿå°±é‚£ä¹ˆå‡ åè¡Œã€‚</p>\n <p><img src=\"https://segmentfault.com/img/bVbLALn\" alt=\"ç¾å›½å¦‚æœæŠŠæ ¹åŸŸåæœåŠ¡å™¨å°äº†ï¼Œä¸­å›½ä¼šä»ç½‘ç»œä¸Šæ¶ˆå¤±ï¼Ÿ\" title=\"ç¾å›½å¦‚æœæŠŠæ ¹åŸŸåæœåŠ¡å™¨å°äº†ï¼Œä¸­å›½ä¼šä»ç½‘ç»œä¸Šæ¶ˆå¤±ï¼Ÿ\" /></p>\n <p>å¦‚æœåˆ é™¤å’Œcnç›¸å…³çš„é‚£äº›è¡Œï¼Œå¾ˆå¿«ï¼Œå°±ä¼šåŒæ­¥åˆ°æ‰€æœ‰çš„æ ¹ä¸­ã€‚</p>\n <p>ç„¶åï¼Œåœ¨æ‰€æœ‰çš„ç¼“å­˜éƒ½è¿‡æœŸä¹‹åï¼Œå…¨çƒæ‰€æœ‰äººéƒ½è®¿é—®ä¸äº†.cnåç¼€çš„ç½‘ç«™ã€‚</p>\n <h2><strong>å¦‚ä½•åº”å¯¹ï¼Ÿ</strong></h2>\n <p>å› ä¸ºæˆ‘ä»¬ç»´æŠ¤ç€æ ¹é•œåƒï¼Œæ‰€ä»¥æˆ‘ä»¬æ§åˆ¶ç€é•œåƒä¸­çš„å†…å®¹ã€‚</p>\n <p>è€Œä¸­å›½å¢ƒå†…çš„å¯¹æ ¹çš„è®¿é—®ï¼Œé€šè¿‡æˆ‘ä»¬çš„è¿è¥å•†ï¼Œéƒ½ä¼šè½åˆ°å¯¹æˆ‘å›½æ ¹é•œåƒçš„è®¿é—®ä¸Šã€‚</p>\n <p>æˆ‘ä»¬å¯ä»¥ä¸åŒæ­¥å…³äºcnçš„ä¿®æ”¹ã€‚</p>\n <p>å°±è¿™ä¹ˆç®€å•ã€‚</p>\n <p>å¯ä»¥ç®€å•å†™ä¸ªç¨‹åºï¼Œæ¯æ¬¡åŒæ­¥å®Œç«‹åˆ»åŠ ä¸Šcnè®°å½•ã€‚</p>\n <p>ä¹Ÿå¯ä»¥è‡ªå·±æ­ä¸ªä¸»æ ¹ï¼Œå®Œå…¨ä¸å’Œç¾å›½çš„æ ¹åŒæ­¥ã€‚ï¼ˆç›¸å½“äºå¦ç«‹ä¸­å¤®äº†ï¼‰</p>\n <p>å½“ç„¶ï¼Œä¸–ç•Œå„åœ°ä¸åœ¨æˆ‘ä»¬ç®¡ç†ä¹‹ä¸‹çš„æ ¹å’Œæ ¹é•œåƒï¼Œå¦‚æœä¸åŠ è¡ŒåŠ¨ï¼Œä»ç„¶ä¼šåŒæ­¥è¿™äº›åˆ é™¤ã€‚</p>\n <p>é‚£ä¹ˆï¼Œé™¤äº†ä¸­å›½è‡ªå·±ï¼Œå…¶ä»–å›½å®¶çš„äººéƒ½æ— æ³•è®¿é—®.cnç½‘ç«™ã€‚</p>\n <p>ä½†æ˜¯ï¼Œè¿™äº›å›½å®¶å¾ˆå¿«å°±ä¼šæœ‰å“åº”ï¼Œå‡¡æ˜¯æƒ³è®¿é—®.cnç½‘ç«™çš„å›½å®¶ï¼Œéƒ½ä¼šæŠŠcnè®°å½•åŠ å›å»ï¼Œå¹¶æ‹’ç»åŒæ­¥ç¾å›½åˆ å»çš„è¿™å‡ è¡Œã€‚</p>\n <p>æœ€ç»ˆï¼Œåªæœ‰ç¾å›½äººï¼Œè®¿é—®ä¸äº†.cnç½‘ç«™ã€‚</p>\n <p>ç»¼ä¸Šåˆ†æï¼Œæˆ‘è®¤ä¸ºç¾å›½è¿™ä¹ˆåšçš„å¯èƒ½æ€§ä¸å¤§ï¼Œå› ä¸ºè¿™ä¸€æ‹›è¿‡äºä½åŠ£ï¼Œå°†ä¼šè®©ç¾å›½æ”¿åºœå®Œå…¨é¢œé¢æ‰«åœ°ï¼Œå¹¶å¤±å»ä»Šååœ¨äº’è”ç½‘é¢†åŸŸçš„ä»»ä½•è¯è¯­æƒã€‚è€ŒICANNä¹Ÿå°†å¤±å»å…¬ä¿¡åŠ›ï¼Œæ•´ä¸ªäº’è”ç½‘ä¸–ç•Œï¼Œä¼šæ¨é€‰ä½¿ç”¨æ–°çš„æœºæ„å’Œæ–°çš„ä¸»æ ¹ã€‚</p>\n <p>å› ä¸ºäº’è”ç½‘ä¸–ç•Œçš„ä¸€è´¯å‡†åˆ™å°±æ˜¯ï¼šå¦‚æœ‰å°ç¦ï¼Œå°±ç»•è¿‡å®ƒã€‚</p>\n <h2><strong>åè®°</strong></h2>\n <p>æœ€åï¼Œæˆ‘ä»¬çœ‹çœ‹æœ¬æ–‡å¼€å¤´æ‰€æçš„ä¸¤ä¸ªæ–­ç½‘äº‹ä»¶æ˜¯æ€ä¹ˆå›äº‹ï¼š</p>\n <p>å…³äºä¼Šæ‹‰å…‹åŸŸåäº‹ä»¶ï¼Œå¯ä»¥çœ‹çœ‹æ¸…åå¤§å­¦æ®µæµ·æ–°æ•™æˆçš„æ–‡ç« ï¼š<a href=\"https://mp.weixin.qq.com/s?__biz=MzUzMDA1MTEzMg==&amp;mid=2247483726&amp;idx=1&amp;sn=cb268f1ac87b5a564637f2c74c28e37f&amp;scene=21#wechat_redirect\" rel=\"nofollow noreferrer\">â€œä¼Šæ‹‰å…‹åŸŸå.IQè¢«ç¾å›½åˆ é™¤çš„èƒŒåä»¥åŠæ—©æœŸçš„æ ¹åŸŸåç®¡ç†â€</a>ï¼Œé‡Œé¢æŠŠæ•´ä¸ªäº‹ä»¶çš„æ¥é¾™å»è„‰è¯´çš„å¾ˆæ¸…æ¥šã€‚ä¸»è¦åŸå› æ˜¯.iqåŸŸåçš„å‰ä»»ç®¡ç†è€…äº2002å¹´è¢«å…³è¿›ç›‘ç‹±ï¼Œæ–°ä»»ç®¡ç†è€…ï¼ˆNCMCï¼‰äº2005å¹´æ‰æå‡ºç”³è¯·ï¼Œè€ŒIANAå½“æ—¶è¿˜è€ƒè™‘å¾æ±‚æ–°æ—§ä»£ç†åŒæ–¹å¯¹æ–°æˆæƒçš„ä¸€è‡´è®¤å¯ï¼Œæ‰€ä»¥æ‰å‡ºç°äº†æ‰€è°“çš„â€œç”³è¯·å’Œè§£æå·¥ä½œè¢«ç»ˆæ­¢â€ã€‚</p>\n <p>å…³äºåˆ©æ¯”äºšåŸŸåäº‹ä»¶ï¼Œå¯ä»¥çœ‹çœ‹æ­¤æ–‡ï¼š<a href=\"https://mp.weixin.qq.com/s?__biz=MzUzMDA1MTEzMg==&amp;mid=2247483728&amp;idx=1&amp;sn=729702e672b8cfc4d1f53c91b8d8eae4&amp;scene=21#wechat_redirect\" rel=\"nofollow noreferrer\">â€œåˆ©æ¯”äºšå›½å®¶é¡¶çº§åŸŸåï¼ˆ.LYï¼‰ä¸­æ­¢æœåŠ¡å§‹æœ«â€</a>ï¼Œäº‹å®æƒ…å†µæ˜¯å‚ä¸è¿è¥.LYçš„ä¸¤å®¶æœºæ„å› äº‰å¤ºå½’å±æƒè€Œå†…æ–—çš„ç»“æœï¼ˆå…¶ä¸­ä¸€æ–¹å…³é—­äº†.LYåŸŸåæœåŠ¡å™¨çš„è§£æï¼‰ã€‚ç»è¿‡è¿™ç•ªå˜ä¹±ï¼Œ2004å¹´10æœˆï¼ŒICANNæ‰¹å‡†å°†.LYæˆäºˆåˆ©æ¯”äºšé‚®ç”µæ€»å…¬å¸ï¼Œ.LYäº‹ä»¶ç®—æ˜¯å°˜åŸƒè½å®šã€‚</p>\n <p><strong>æœ¬æ–‡ä¸­æåˆ°çš„é£é™©å’Œåº”å¯¹ï¼Œä¸»è¦æ˜¯æˆ‘ä¸ªäººçš„åˆ†æï¼Œä¸‹é¢çœ‹çœ‹ä¸šå†…ä¸“å®¶çš„è¯´æ³•ã€‚</strong></p>\n <p>ä¸­å›½å·¥ç¨‹é™¢é™¢å£«ã€æ¸…åå¤§å­¦è®¡ç®—æœºç³»ä¸»ä»»å´å»ºå¹³åœ¨2019å¹´çš„ä¸€æ¬¡è®¿è°ˆ_ï¼ˆ14ï¼‰_ä¸­è¡¨ç¤ºï¼ŒDNSæ ¹åŸŸåæœåŠ¡å™¨ä¸æ˜¯äº’è”ç½‘çš„â€œæ ¸æŒ‰é’®â€ã€‚å…¨çƒäº’è”ç½‘æ ¹åŸŸåæœåŠ¡å™¨è¿è¡Œè€…ï¼Œä¸å¯èƒ½åŒæ—¶å…³é—­æ‰€æœ‰çš„æ ¹æœåŠ¡å™¨ï¼ŒåŒ…æ‹¬å½±å­æœåŠ¡å™¨ã€‚</p>\n <p>äº’è”ç½‘åŸŸåç³»ç»ŸåŒ—äº¬å¸‚å·¥ç¨‹ç ”ç©¶ä¸­å¿ƒï¼ˆZDNSï¼‰ä¸»ä»»æ¯›ä¼Ÿè¡¨ç¤º_ï¼ˆ15ï¼‰_ï¼šäº’è”ç½‘ä¸“å®¶ä¸€ç›´éƒ½åœ¨ä¸æ–­å®Œå–„åŸŸåæ ¹ç³»ç»Ÿå®‰å…¨ä¿éšœæœºåˆ¶ï¼Œå°±ç®—çœŸçš„æ–­â€œæ ¹â€äº†ï¼Œä¹Ÿæœ‰åº”æ€¥æ–¹æ³•æ¥è§£å†³ã€‚åœ¨å¢ƒå†…ï¼Œå¯ä»¥é‡‡ç”¨æ ¹åŒºæ•°æ®å¤‡ä»½å¹¶æ­å»ºåº”æ€¥æ ¹æœåŠ¡å™¨æ¥è§£å†³ï¼›åœ¨å…¨çƒå±‚é¢ï¼Œå¯ä»¥ç”¨æ ¹é•œåƒã€IPv6ç¯å¢ƒä¸‹çš„æ ¹æœåŠ¡å™¨æ•°é‡æ‰©å±•ã€æ ¹æœåŠ¡å™¨è¿è¡Œæœºæ„å¤‡é€‰æœºåˆ¶ç­‰æ–¹æ³•æ¥è§£å†³ã€‚</p>\n <p><strong>ç°åœ¨ï¼Œäº†è§£äº†è¿™ä¹ˆå¤šï¼Œå…³äºæ ¹åŸŸåæœåŠ¡å™¨ï¼Œä½ æ˜¯ä¸æ˜¯æ”¾å¿ƒäº†å¾ˆå¤šã€‚</strong></p>\n <hr>\n  <p>å‚è€ƒæ–‡çŒ®ï¼š</p>\n  <ol>\n   <li>ä»ç½‘ç»œå¤§å›½èµ°å‘ç½‘ç»œå¼ºå›½(<a href=\"http://opinion.people.com.cn/n/2014/0624/c1003-25189448.html)\" rel=\"nofollow noreferrer\">http://opinion.people.com.cn/...</a></li>\n   <li>ç¾å›½ç½‘ç»œéœ¸æƒæµ…æ(<a href=\"http://www.wanfangdata.com.cn/details/detail.do?\" rel=\"nofollow noreferrer\">http://www.wanfangdata.com.cn...</a>_type=perio&amp;id=xxaqytxbm201410030)</li>\n   <li>ä¸ºä»€ä¹ˆåŸŸåæ ¹æœåŠ¡å™¨åªèƒ½æœ‰13å°å‘¢ï¼Ÿ(<a href=\"https://www.zhihu.com/question/22587247)\" rel=\"nofollow noreferrer\">https://www.zhihu.com/questio...</a></li>\n   <li>Why 13 DNS root servers?(<a href=\"https://miek.nl/2013/november/10/why-13-dns-root-servers/)\" rel=\"nofollow noreferrer\">https://miek.nl/2013/november...</a></li>\n   <li><a href=\"https://root-servers.org\" rel=\"nofollow noreferrer\">https://root-servers.org</a></li>\n   <li>Initializing a DNS Resolver with Priming Queries(<a href=\"https://tools.ietf.org/html/draft-ietf-dnsop-resolver-priming-11)\" rel=\"nofollow noreferrer\">https://tools.ietf.org/html/d...</a></li>\n   <li>è–›è™¹ï¼šäº’è”ç½‘å…¨çƒæ²»ç†çš„æ–°ç¯‡ç« (<a href=\"https://zhuanlan.zhihu.com/p/23042167)\" rel=\"nofollow noreferrer\">https://zhuanlan.zhihu.com/p/...</a></li>\n   <li>ICANN: IANAèŒèƒ½(<a href=\"https://www.icann.org/zh/system/files/files/iana-functions-18dec15-zh.pdf)\" rel=\"nofollow noreferrer\">https://www.icann.org/zh/syst...</a></li>\n   <li>é˜®ä¸€å³°ï¼šæ ¹åŸŸåçš„çŸ¥è¯†</li>\n   <li><a href=\"https://mp.weixin.qq.com/s?__biz=MjM5Mzg0NTU0NQ==&amp;mid=2649564853&amp;idx=2&amp;sn=6b9e6efc2a96600456a71836dcead62b&amp;scene=21#wechat_redirect\" rel=\"nofollow noreferrer\">å¾åŸ¹å–œï¼šIANAèŒèƒ½ç®¡ç†æƒç§»äº¤è°æ˜¯èµ¢å®¶</a></li>\n   <li>åŒ—é¾™ä¸­ç½‘ç‹ä¼Ÿä»»èŒPTIè‘£äº‹ æˆ‘å›½ä¸“å®¶å°±ä»»å›½é™…äº’è”ç½‘æ²»ç†å…³é”®å²—ä½(<a href=\"http://news.sina.com.cn/c/2017-12-25/doc-ifypwzxq6350205.shtml)\" rel=\"nofollow noreferrer\">http://news.sina.com.cn/c/201...</a></li>\n   <li>å·¥ä¸šå’Œä¿¡æ¯åŒ–éƒ¨å…³äºåŒæ„ä¸­å›½äº’è”ç½‘ç»œä¿¡æ¯ä¸­å¿ƒè®¾ç«‹åŸŸåæ ¹æœåŠ¡å™¨ï¼ˆFã€Iã€Kã€Læ ¹é•œåƒæœåŠ¡å™¨ï¼‰åŠåŸŸåæ ¹æœåŠ¡å™¨è¿è¡Œæœºæ„çš„æ‰¹å¤(<a href=\"http://www.miit.gov.cn/n1146285/n1146352/n3054355/n3057709/n4704651/c7015545/content.html)\" rel=\"nofollow noreferrer\">http://www.miit.gov.cn/n11462...</a></li>\n   <li>å·¥ä¸šå’Œä¿¡æ¯åŒ–éƒ¨å…³äºåŒæ„äº’è”ç½‘åŸŸåç³»ç»ŸåŒ—äº¬å¸‚å·¥ç¨‹ç ”ç©¶ä¸­å¿ƒæœ‰é™å…¬å¸è®¾ç«‹åŸŸåæ ¹æœåŠ¡å™¨ï¼ˆLæ ¹é•œåƒæœåŠ¡å™¨ï¼‰åŠåŸŸåæ ¹æœåŠ¡å™¨è¿è¡Œæœºæ„çš„æ‰¹å¤(<a href=\"http://www.miit.gov.cn/n1146285/n1146352/n3054355/n3057709/n4704651/c7015527/content.html)\" rel=\"nofollow noreferrer\">http://www.miit.gov.cn/n11462...</a></li>\n   <li><a href=\"https://mp.weixin.qq.com/s?__biz=MjM5MTgzNDk4Mw==&amp;mid=2652359881&amp;idx=1&amp;sn=ed8710ae67a57c7dc064c8cff659febf&amp;scene=21#wechat_redirect\" rel=\"nofollow noreferrer\">ä¸­å›½å·¥ç¨‹é™¢é™¢å£«å´å»ºå¹³ï¼šDNSæ ¹æœåŠ¡å™¨ä¸æ˜¯äº’è”ç½‘çš„æ ¸æŒ‰é’®ï¼</a></li>\n   <li><a href=\"https://mp.weixin.qq.com/s?__biz=MjM5NzAxNjk2OQ==&amp;mid=2649539902&amp;idx=1&amp;sn=3282d2d6dfab2ef6d01e0a01ffcf8933&amp;scene=21#wechat_redirect\" rel=\"nofollow noreferrer\">ZDNSæ¯›ä¼Ÿï¼šäº’è”ç½‘æ ¹å¹¶ä¸èƒ½è®©ä¸­å›½æ–­ç½‘ï¼Œæ›´åº”é‡è§†ä¼ä¸šåŸŸåæœåŠ¡é£é™©</a></li>\n  </ol>\n  <p><a href=\"https://mp.weixin.qq.com/s?__biz=MzAxMDc4NDc5OA==&amp;mid=2649431767&amp;idx=1&amp;sn=9747fb03cfd1de684ae9833355cd113d&amp;chksm=8354a7a6b4232eb05ccc55b31dcd82dc85757ef5799bba7db25d5c71934382793e866234c927&amp;mpshare=1&amp;scene=1&amp;srcid=0819bvibQdz6rOQL6fIJIfQ1&amp;sharer_sharetime=1597812690707&amp;sharer_shareid=3e4dff698aa001b9d1bbc8d5c5ee79ac&amp;rd2werd=1#wechat_redirect\" rel=\"nofollow noreferrer\">åŸæ–‡é“¾æ¥</a></p>\n  <p><img src=\"https://segmentfault.com/img/bVbJgYT\" alt=\"segmentfault å…¬ä¼—å·\" title=\"segmentfault å…¬ä¼—å·\" /></p>\n </hr>\n</hr>","descriptionType":"html","publishedDate":"Thu, 20 Aug 2020 03:23:00 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/bVbLAIE","linkMd5":"6077149de366230a75fc5ccb09f8bad7","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn46@2020_4/2020/08/24/23-08-23-218_dae355b894bbb09e.webp","destWidth":800,"destHeight":355,"sourceBytes":54090,"destBytes":17642,"author":"å®—æ©","articleImgCdnMap":{"https://segmentfault.com/img/bVbLAIE":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn46@2020_4/2020/08/24/23-08-23-218_dae355b894bbb09e.webp","https://segmentfault.com/img/remote/1460000023696740":"https://cdn.jsdelivr.net/gh/myreaderx23/cdn50@2020_4/2020/08/24/23-08-31-193_c69cd228aa5900d5.webp","https://segmentfault.com/img/bVbLAK3":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn39@2020_5/2020/08/24/23-08-40-208_0326fce0462089d5.webp","https://segmentfault.com/img/bVbLALn":"https://cdn.jsdelivr.net/gh/myreaderx25/cdn56@2020_4/2020/08/24/23-08-40-100_b74d346d8a6ba7ce.webp","https://segmentfault.com/img/bVbJgYT":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn92@2020_2/2020/08/24/23-08-40-881_7f8323e1c3c7e5a5.webp"},"publishedOrCreatedDate":1598310388570},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"TypeScript ç±»å‹ç³»ç»Ÿ","link":"https://segmentfault.com/a/1190000023647609","description":"<p>TypeScript çš„å­¦ä¹ èµ„æ–™éå¸¸å¤šï¼Œå…¶ä¸­ä¹Ÿä¸ä¹å¾ˆå¤šä¼˜ç§€çš„æ–‡ç« å’Œæ•™ç¨‹ã€‚ä½†æ˜¯ç›®å‰ä¸ºæ­¢æ²¡æœ‰ä¸€ä¸ªæˆ‘ç‰¹åˆ«æ»¡æ„çš„ã€‚åŸå› æœ‰ï¼š</p>\n<ul>\n <li>å®ƒä»¬å¤§å¤šæ•°æ²¡æœ‰ä¸€ä¸ªæ¸…æ™°çš„ä¸»çº¿ï¼Œè€Œæ˜¯æŒ‰ç…§ API ç»„ç»‡ç« èŠ‚çš„ï¼Œå†…å®¹åœ¨<strong>é€»è¾‘ä¸Š</strong>æ¯”è¾ƒé›¶æ•£ã€‚</li>\n <li>å¤§å¤šæ˜¯â€œè®²æ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆç”¨â€œï¼Œè€Œä¸æ˜¯â€è®²ä¸ºä»€ä¹ˆï¼Œè®²åŸç†â€œã€‚</li>\n <li>å¤§å¤šæ•°å†…å®¹æ¯”è¾ƒæ¯ç‡¥ï¼Œè¶£å‘³æ€§æ¯”è¾ƒä½ã€‚éƒ½æ˜¯å¹²å·´å·´çš„æ–‡å­—ï¼Œæ²¡æœ‰å›¾ç‰‡ï¼Œç¼ºä¹èƒ½å¤Ÿå¼•èµ·å¼ºçƒˆå…±é¸£çš„ä¾‹å­ã€‚</li>\n</ul>\n<p>å› æ­¤æˆ‘çš„æƒ³æ³•æ˜¯åšä¸€å¥—ä¸åŒå¸‚é¢ä¸Šå¤§å¤šæ•°çš„ TypeScript å­¦ä¹ æ•™ç¨‹ã€‚ä»¥äººç±»è®¤çŸ¥çš„è§’åº¦æ€è€ƒé—®é¢˜ï¼Œå­¦ä¹  TypeScriptï¼Œé€šè¿‡é€šä¿—æ˜“æ‡‚çš„ä¾‹å­å’Œå›¾ç‰‡æ¥å¸®åŠ©å¤§å®¶å»ºç«‹ TypeScript ä¸–ç•Œè§‚ã€‚ è€Œæœ¬ç¯‡æ–‡ç« åˆ™æ˜¯è¿™ä¸ªç³»åˆ—çš„å¼€ç¯‡ã€‚</p>\n<p>ç³»åˆ—å®‰æ’ï¼š</p>\n<ul>\n <li><a href=\"https://lucifer.ren/blog/2020/08/04/ts-internal/\" rel=\"nofollow noreferrer\">ä¸Šå¸è§†è§’çœ‹ TypeScript</a>ï¼ˆå·²å‘å¸ƒï¼‰</li>\n <li>TypeScript ç±»å‹ç³»ç»Ÿï¼ˆå°±æ˜¯æœ¬æ–‡ï¼‰</li>\n <li>types å’Œ @types æ˜¯ä»€ä¹ˆï¼Ÿ</li>\n <li><a href=\"https://lucifer.ren/blog/2020/06/16/ts-generics/\" rel=\"nofollow noreferrer\">ä½ ä¸çŸ¥é“çš„ TypeScript æ³›å‹ï¼ˆä¸‡å­—é•¿æ–‡ï¼Œå»ºè®®æ”¶è—ï¼‰</a>ï¼ˆå·²å‘å¸ƒï¼‰</li>\n <li>TypeScript é…ç½®æ–‡ä»¶è¯¥æ€ä¹ˆå†™ï¼Ÿ</li>\n <li>TypeScript æ˜¯å¦‚ä½•ä¸ Reactï¼ŒVueï¼ŒWebpack é›†æˆçš„ï¼Ÿ</li>\n <li>TypeScript ç»ƒä¹ é¢˜</li>\n</ul>\n<blockquote>\n ç›®å½•å°†æ¥å¯èƒ½ä¼šæœ‰æ‰€è°ƒæ•´ã€‚\n</blockquote>\n<p>æ³¨æ„ï¼Œæˆ‘çš„ç³»åˆ—æ–‡ç« åŸºæœ¬ä¸ä¼šè®² APIï¼Œå› æ­¤éœ€è¦ä½ æœ‰ä¸€å®šçš„ TypeScript ä½¿ç”¨åŸºç¡€ï¼Œæ¨èä¸¤ä¸ªå­¦ä¹ èµ„æ–™ã€‚</p>\n<ul>\n <li><a href=\"https://jkchao.github.io/typescript-book-chinese/\" rel=\"nofollow noreferrer\">æ·±å…¥ç†è§£ TypeScript</a></li>\n <li><a href=\"https://www.typescriptlang.org/docs/home\" rel=\"nofollow noreferrer\">å®˜æ–¹æ–‡æ¡£</a></li>\n</ul>\n<p>ç»“åˆè¿™ä¸¤ä¸ªèµ„æ–™å’Œæˆ‘çš„ç³»åˆ—æ•™ç¨‹ï¼ŒæŒæ¡ TypeScript æŒ‡æ—¥å¯å¾…ã€‚</p>\n<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡å‡ ä¸ªæ–¹é¢æ¥ä»å®è§‚çš„è§’åº¦æ¥çœ‹ä¸€ä¸‹ TypeScriptã€‚</p>\n<p>&lt;!-- more --&gt;</p>\n<h2>å‰è¨€</h2>\n<p>ä¸Šä¸€èŠ‚çš„<a href=\"https://lucifer.ren/blog/2020/08/04/ts-internal/\" rel=\"nofollow noreferrer\">ä¸Šå¸è§†è§’çœ‹ TypeScript</a>ï¼Œæˆ‘ä»¬ä»å®è§‚çš„è§’åº¦æ¥å¯¹ Typescript è¿›è¡Œäº†ä¸€ä¸ªå±•æœ›ã€‚ä¹‹æ‰€ä»¥æŠŠé‚£ä¸ªæ”¾åˆ°å¼€å¤´è®²æ˜¯è®©å¤§å®¶æœ‰ä¸€ä¸ªå¤§ä½“çš„è®¤è¯†ï¼Œä¸æƒ³è®©å¤§å®¶ä¸€å¶éšœç›®ã€‚å½“ä½ å¯¹æ•´ä¸ªå®è§‚å±‚é¢æœ‰äº†ä¸€å®šçš„äº†è§£ï¼Œé‚£ä¹ˆå¯¹ Typescript çš„ç†è§£å°±ä¸ä¼šé”™å¤ªå¤šã€‚ç›¸åï¼Œä¸€å¼€å§‹å°±æ˜¯å…·ä½“çš„æ¦‚å¿µå’Œ APIï¼Œåˆ™å¾ˆå¯èƒ½ä¼šè®©ä½ ä¸§å¤±éƒ½æ•´ä½“çš„åŸºæœ¬åˆ¤æ–­ã€‚</p>\n<p>å®é™…ä¸Šï¼Œ Typescript ä¸€ç›´åœ¨ä¸æ–­æ›´æ–°è¿­ä»£ã€‚ä¸€æ–¹é¢æ˜¯å› ä¸ºå½“åˆè®¸ä¸‹çš„è¯ºè¨€â€Typescript æ˜¯ JavaScript çš„è¶…é›†â€œï¼ˆJavaScript çš„ç‰¹æ€§ä½ è¦åŒæ­¥æ”¯æŒï¼ŒåŒæ—¶ä¹Ÿè¦å¤„ç†å„ç§æ–°è¯­æ³•å¸¦æ¥çš„ä¸å…¼å®¹æƒ…å†µï¼‰ã€‚ä¸å•æ˜¯ ECMAï¼Œç¤¾åŒºçš„å…¶ä»–å‘å±•å¯èƒ½ä¹Ÿä¼šè®© Typescript å¾ˆéš¾å—ã€‚ æ¯”å¦‚ JSX çš„å¹¿æ³›ä½¿ç”¨å°±ç»™ Typescript æ³›å‹çš„ä½¿ç”¨å¸¦æ¥äº†å½±å“ã€‚</p>\n<p>TypeScript ä¸€ç›´å¤„äºé«˜é€Ÿçš„è¿­ä»£ã€‚é™¤äº†ä¿®å¤æ—¥å¸¸çš„ bug ä¹‹å¤–ï¼ŒTypeScript ä¹Ÿåœ¨ä¸æ–­å‘å¸ƒæ–°çš„åŠŸèƒ½ï¼Œæ¯”å¦‚æœ€æ–° <a href=\"https://devblogs.microsoft.com/typescript/announcing-typescript-4-0-rc/#labeled-tuple-elements\" rel=\"nofollow noreferrer\">4.0.0 beta ç‰ˆæœ¬çš„<strong>æ ‡ç­¾å…ƒç¥–</strong></a> çš„åŠŸèƒ½å°±å¯¹æ™ºèƒ½æç¤ºè¿™å—å¾ˆæœ‰ç”¨ã€‚Typescript åœ¨ç¤¾åŒºå‘å±•æ–¹é¢ä¹Ÿåšçš„æ ¼å¤–å¥½ï¼Œä»¥è‡³äºå®ƒçš„ç«äº‰å¯¹æ‰‹ Flow è¢« Typescript å®Œç¾å‡»è´¥ï¼Œè¿™åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå°±æ˜¯å› ä¸º Typescript æ²¡æœ‰çƒ‚å°¾ã€‚å¦‚ä»Šå¾®è½¯åœ¨å¼€æºæ–¹å‘çš„å‘åŠ›æ˜¯è¶Šæ¥è¶Šæ˜¾è‘—äº†ï¼Œæˆ‘å¾ˆæœŸå¾…å¾®è½¯æ¥ä¸‹æ¥çš„è¡¨ç°ï¼Œè®©æˆ‘ä»¬æ‹­ç›®ä»¥å¾…ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023647613\" alt=\"\" title=\"\" /></p>\n<h2>å˜é‡ç±»å‹å’Œå€¼ç±»å‹</h2>\n<p>æœ‰çš„åŒå­¦å¯èƒ½æœ‰ç–‘é—®ï¼Œ JavaScript ä¸æ˜¯ä¹Ÿæœ‰ç±»å‹ä¹ˆï¼Ÿ å®ƒå’Œ Typescript çš„ç±»å‹æ˜¯ä¸€å›äº‹ä¹ˆï¼ŸJavaScript ä¸æ˜¯åŠ¨æ€è¯­è¨€ä¹ˆï¼Œé‚£ä¹ˆç»è¿‡ Typescript çš„é™å®šä¼šä¸ä¼šä¸§å¤±åŠ¨æ€è¯­è¨€çš„åŠ¨æ€æ€§å‘¢ï¼Ÿæˆ‘ä»¬ç»§ç»­å¾€ä¸‹çœ‹ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023647612\" alt=\"\" title=\"\" /></p>\n<ul>\n <li>JavaScript ä¸­çš„ç±»å‹å…¶å®æ˜¯å€¼çš„ç±»å‹ã€‚å®é™…ä¸Šä¸ä»…ä»…æ˜¯ JavaScriptï¼Œä»»ä½•åŠ¨æ€ç±»å‹è¯­è¨€éƒ½æ˜¯å¦‚æ­¤ï¼Œè¿™ä¹Ÿæ˜¯åŠ¨æ€ç±»å‹è¯­è¨€çš„æœ¬è´¨ã€‚</li>\n <li>Typescript ä¸­çš„ç±»å‹å…¶å®æ˜¯å˜é‡çš„ç±»å‹ã€‚å®é™…ä¸Šä¸ä»…ä»…æ˜¯ Typescriptï¼Œä»»ä½•é™æ€ç±»å‹è¯­è¨€éƒ½æ˜¯å¦‚æ­¤ï¼Œè¿™ä¹Ÿæ˜¯é™æ€ç±»å‹è¯­è¨€çš„æœ¬è´¨ã€‚</li>\n</ul>\n<p>è®°ä½è¿™ä¸¤å¥è¯ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥è§£é‡Šä¸€ä¸‹è¿™ä¸¤å¥è¯ã€‚</p>\n<p>å¯¹äº JavaScript æ¥è¯´ï¼Œä¸€ä¸ªå˜é‡å¯ä»¥æ˜¯ä»»æ„ç±»å‹ã€‚</p>\n<pre><code class=\"js\">var a = 1;\na = \"lucifer\";\na = {};\na = [];</code></pre>\n<p>ä¸Šé¢çš„å€¼æ˜¯æœ‰ç±»å‹çš„ã€‚æ¯”å¦‚ 1 æ˜¯ number ç±»å‹ï¼Œ\"lucifer\" æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œ {} æ˜¯å¯¹è±¡ç±»å‹ï¼Œ [] æ˜¯æ•°ç»„ç±»å‹ã€‚è€Œå˜é‡ a æ˜¯æ²¡æœ‰å›ºå®šç±»å‹çš„ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023647615\" alt=\"\" title=\"\" /></p>\n<p>å¯¹äº Typescript æ¥è¯´ï¼Œ ä¸€ä¸ªå˜é‡åªèƒ½æ¥å—å’Œå®ƒç±»å‹å…¼å®¹çš„ç±»å‹çš„å€¼ã€‚è¯´èµ·æ¥æ¯”è¾ƒæ‹—å£ï¼Œ çœ‹ä¸ªä¾‹å­å°±æ˜ç™½äº†ã€‚</p>\n<pre><code class=\"ts\">var a: number = 1;\na = \"lucifer\"; // error\nvar b: any = 1;\na = \"lucifer\"; // ok\na = {}; // ok\na = []; // ok</code></pre>\n<p>æˆ‘ä»¬ä¸èƒ½å°† string ç±»å‹çš„å€¼èµ‹å€¼ç»™å˜é‡ aï¼Œ å› ä¸º string å’Œ number ç±»å‹ä¸å…¼å®¹ã€‚è€Œæˆ‘ä»¬å¯ä»¥å°† string,Object,Array ç±»å‹çš„å€¼èµ‹å€¼ç»™ bï¼Œå› æ­¤ å®ƒä»¬å’Œ any ç±»å‹å…¼å®¹ã€‚ç®€å•æ¥è¯´å°±æ˜¯ï¼Œä¸€æ—¦ä¸€ä¸ªå˜é‡è¢«æ ‡æ³¨äº†æŸç§ç±»å‹ï¼Œé‚£ä¹ˆå…¶å°±åªèƒ½æ¥å—è¿™ä¸ªç±»å‹ä»¥åŠå®ƒçš„å­ç±»å‹ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023647614\" alt=\"\" title=\"\" /></p>\n<h2>ç±»å‹ç©ºé—´å’Œå€¼ç©ºé—´</h2>\n<p>ç±»å‹å’Œå€¼å±…ä½åœ¨ä¸åŒçš„ç©ºé—´ï¼Œä¸€ä¸ªåœ¨é˜³é—´ä¸€ä¸ªåœ¨é˜´é—´ã€‚ä»–ä»¬ä¹‹é—´äº’ç›¸ä¸èƒ½è®¿é—®ï¼Œç”šè‡³ä¸çŸ¥é“å½¼æ­¤çš„å­˜åœ¨ã€‚ç±»å‹ä¸èƒ½å½“åšå€¼æ¥ç”¨ï¼Œåä¹‹äº¦ç„¶ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023647617\" alt=\"\" title=\"\" /></p>\n<h3>ç±»å‹ç©ºé—´</h3>\n<p>å¦‚ä¸‹ä»£ç ä¼šæŠ¥ç±»å‹æ‰¾ä¸åˆ°çš„é”™ï¼š</p>\n<pre><code class=\"ts\">const aa: User = { name: \"lucifer\", age: 17 };</code></pre>\n<p>è¿™ä¸ªæ¯”è¾ƒå¥½ç†è§£ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨ interface å£°æ˜ä¸€ä¸‹ User å°±è¡Œã€‚</p>\n<pre><code class=\"ts\">interface User {\n  name: string;\n  age: number;\n}\n\nconst aa: User = { name: \"lucifer\", age: 17 };</code></pre>\n<p>ä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨ interface å¯ä»¥åœ¨ç±»å‹ç©ºé—´å£°æ˜ä¸€ä¸ªç±»å‹ï¼Œè¿™ä¸ªæ˜¯ Typescript çš„ç±»å‹æ£€æŸ¥çš„åŸºç¡€ä¹‹ä¸€ã€‚</p>\n<p>å®é™…ä¸Šç±»å‹ç©ºé—´å†…éƒ¨ä¹Ÿä¼šæœ‰å­ç©ºé—´ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ namespaceï¼ˆè€ï¼‰å’Œ moduleï¼ˆæ–°ï¼‰ æ¥åˆ›å»ºæ–°çš„å­ç©ºé—´ã€‚å­ç©ºé—´ä¹‹é—´ä¸èƒ½ç›´æ¥æ¥è§¦ï¼Œéœ€è¦ä¾èµ–å¯¼å…¥å¯¼å‡ºæ¥äº¤äº’ã€‚</p>\n<h3>å€¼ç©ºé—´</h3>\n<p>æ¯”å¦‚ï¼Œæˆ‘ç”¨ Typescript å†™å‡ºå¦‚ä¸‹çš„ä»£ç ï¼š</p>\n<pre><code class=\"ts\">const a = window.lucifer();</code></pre>\n<p>Typescript ä¼šæŠ¥å‘Šä¸€ä¸ªç±»ä¼¼<code>Property 'lucifer' does not exist on type 'Window &amp; typeof globalThis'.</code> çš„é”™è¯¯ã€‚</p>\n<p>å®é™…ä¸Šï¼Œè¿™ç§é”™è¯¯å¹¶ä¸æ˜¯ç±»å‹é”™è¯¯ï¼Œè€Œæ˜¯æ‰¾ä¸åˆ°æˆå‘˜å˜é‡çš„é”™è¯¯ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·è§£å†³ï¼š</p>\n<pre><code class=\"ts\">declare var lucifer: () =&gt; any;</code></pre>\n<p>ä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨ declare å¯ä»¥åœ¨å€¼ç©ºé—´å£°æ˜ä¸€ä¸ªå˜é‡ã€‚è¿™ä¸ªæ˜¯ Typescript çš„å˜é‡æ£€æŸ¥çš„åŸºç¡€ï¼Œä¸æ˜¯æœ¬æ–‡è¦è®²çš„ä¸»è¦å†…å®¹ï¼Œå¤§å®¶çŸ¥é“å°±è¡Œã€‚</p>\n<p>æ˜ç™½äº† JavaScript å’Œ TypeScript ç±»å‹çš„åŒºåˆ«å’Œè”ç³»ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¥è¿›å…¥æˆ‘ä»¬æœ¬æ–‡çš„ä¸»é¢˜äº†ï¼š<strong>ç±»å‹ç³»ç»Ÿ</strong>ã€‚</p>\n<h2>ç±»å‹ç³»ç»Ÿæ˜¯ TypeScript æœ€ä¸»è¦çš„åŠŸèƒ½</h2>\n<p>TypeScript å®˜æ–¹æè¿°ä¸­æœ‰ä¸€å¥ï¼š<strong>TypeScript adds optional types to JavaScript that support tools for large-scale JavaScript applications</strong>ã€‚å®é™…ä¸Šè¿™ä¹Ÿæ­£æ˜¯ Typescript çš„ä¸»è¦åŠŸèƒ½ï¼Œå³ç»™ JavaScript æ·»åŠ é™æ€ç±»å‹æ£€æŸ¥ã€‚è¦æƒ³å®ç°é™æ€ç±»å‹æ£€æŸ¥ï¼Œé¦–å…ˆå°±è¦æœ‰ç±»å‹ç³»ç»Ÿã€‚æ€»ä¹‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ Typescript çš„ä¸»è¦ç›®çš„ä»ç„¶æ˜¯è¦å®ƒçš„é™æ€ç±»å‹æ£€æŸ¥ï¼Œå¸®åŠ©æˆ‘ä»¬æä¾›ä»£ç çš„æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚å› æ­¤ Typescript éœ€è¦ç»´æŠ¤ä¸€å¥—å®Œæ•´çš„ç±»å‹ç³»ç»Ÿã€‚</p>\n<p><strong>ç±»å‹ç³»ç»ŸåŒ…æ‹¬ 1. ç±»å‹ å’Œ 2.å¯¹ç±»å‹çš„ä½¿ç”¨å’Œæ“ä½œ</strong>ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ç±»å‹ã€‚</p>\n<h3>ç±»å‹</h3>\n<p>TypeScript æ”¯æŒ JavaScript ä¸­æ‰€æœ‰çš„ç±»å‹ï¼Œå¹¶ä¸”è¿˜æ”¯æŒä¸€äº› JavaScript ä¸­æ²¡æœ‰çš„ç±»å‹ï¼ˆæ¯•ç«Ÿæ˜¯è¶…é›†å˜›ï¼‰ã€‚æ²¡æœ‰çš„ç±»å‹å¯ä»¥ç›´æ¥æä¾›ï¼Œä¹Ÿå¯ä»¥æä¾›è‡ªå®šä¹‰èƒ½åŠ›è®©ç”¨æˆ·æ¥è‡ªå·±åˆ›é€ ã€‚ é‚£ä¸ºä»€ä¹ˆè¦å¢åŠ  JavaScript ä¸­æ²¡æœ‰çš„ç±»å‹å‘¢ï¼Ÿæˆ‘ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚å¦‚ä¸‹ç»™ä¸€ä¸ªå˜é‡å£°æ˜ç±»å‹ä¸º Objectï¼ŒArray çš„ä»£ç ã€‚</p>\n<pre><code class=\"ts\">const a: Object = {};\nconst b: Array = [];</code></pre>\n<p>å…¶ä¸­ï¼š</p>\n<ul>\n <li>ç¬¬ä¸€è¡Œä»£ç  Typescript å…è®¸ï¼Œä½†æ˜¯å¤ªå®½æ³›äº†ï¼Œæˆ‘ä»¬å¾ˆéš¾å¾—åˆ°æœ‰ç”¨çš„ä¿¡æ¯ï¼Œæ¨èçš„åšæ³•æ˜¯ä½¿ç”¨ interface æ¥æè¿°ï¼Œè¿™ä¸ªåé¢ä¼šè®²åˆ°ã€‚</li>\n <li>ç¬¬äºŒè¡Œ Typescript åˆ™ä¼šç›´æ¥æŠ¥é”™ï¼ŒåŸå› çš„æœ¬è´¨ä¹Ÿæ˜¯å¤ªå®½æ³›ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ³›å‹æ¥è¿›ä¸€æ­¥çº¦æŸã€‚</li>\n</ul>\n<h3>å¯¹ç±»å‹çš„ä½¿ç”¨å’Œæ“ä½œ</h3>\n<p>ä¸Šé¢è¯´äº†<strong>ç±»å‹å’Œå€¼å±…ä½åœ¨ä¸åŒçš„ç©ºé—´ï¼Œä¸€ä¸ªåœ¨é˜³é—´ä¸€ä¸ªåœ¨é˜´é—´ã€‚ä»–ä»¬ä¹‹é—´äº’ç›¸ä¸èƒ½è®¿é—®ï¼Œç”šè‡³ä¸çŸ¥é“å½¼æ­¤çš„å­˜åœ¨ã€‚</strong></p>\n<p>ä½¿ç”¨ declare å’Œ interface or type å°±æ˜¯åˆ†åˆ«åœ¨ä¸¤ä¸ªç©ºé—´ç¼–ç¨‹ã€‚æ¯”å¦‚ Typescript çš„æ³›å‹å°±æ˜¯åœ¨ç±»å‹ç©ºé—´ç¼–ç¨‹ï¼Œå«åšç±»å‹ç¼–ç¨‹ã€‚é™¤äº†æ³›å‹ï¼Œè¿˜æœ‰é›†åˆè¿ç®—ï¼Œä¸€äº›æ“ä½œç¬¦æ¯”å¦‚ keyof ç­‰ã€‚å€¼çš„ç¼–ç¨‹åœ¨ Typescript ä¸­æ›´å¤šçš„ä½“ç°æ˜¯åœ¨ç±»ä¼¼ lib.d.ts è¿™æ ·çš„åº“ã€‚å½“ç„¶ lib.d.ts ä¹Ÿä¼šåœ¨ç±»å‹ç©ºé—´å®šä¹‰å„ç§å†…ç½®ç±»å‹ã€‚æˆ‘ä»¬æ²¡æœ‰å¿…è¦å»æ­»æ‰£è¿™ä¸ªï¼Œåªéœ€è¦äº†è§£å³å¯ã€‚</p>\n<p>lib.d.ts çš„å†…å®¹ä¸»è¦æ˜¯ä¸€äº›å˜é‡å£°æ˜ï¼ˆå¦‚ï¼šwindowã€documentã€mathï¼‰å’Œä¸€äº›ç±»ä¼¼çš„æ¥å£å£°æ˜ï¼ˆå¦‚ï¼šWindowã€Documentã€Mathï¼‰ã€‚å¯»æ‰¾ä»£ç ç±»å‹ï¼ˆå¦‚ï¼šMath.floorï¼‰çš„æœ€ç®€å•æ–¹å¼æ˜¯ä½¿ç”¨ IDE çš„ F12ï¼ˆè·³è½¬åˆ°å®šä¹‰ï¼‰ã€‚</p>\n<h2>ç±»å‹æ˜¯å¦‚ä½•åšåˆ°é™æ€ç±»å‹æ£€æŸ¥çš„ï¼Ÿ</h2>\n<p>TypeScript è¦æƒ³è§£å†³ JavaScript åŠ¨æ€è¯­è¨€ç±»å‹å¤ªå®½æ¾çš„é—®é¢˜ï¼Œå°±éœ€è¦ï¼š</p>\n<ol>\n <li>æä¾›ç»™<strong>å˜é‡</strong>è®¾å®šç±»å‹çš„èƒ½åŠ›</li>\n</ol>\n<blockquote>\n æ³¨æ„æ˜¯å˜é‡ï¼Œä¸æ˜¯å€¼ã€‚\n</blockquote>\n<ol>\n <li>æä¾›å¸¸ç”¨ç±»å‹ï¼ˆä¸å¿…é¡»ï¼Œä½†æ˜¯æ²¡æœ‰ç”¨æˆ·ä½“éªŒä¼šæå·®ï¼‰å¹¶å¯ä»¥æ‰©å±•å‡ºè‡ªå®šä¹‰ç±»å‹ï¼ˆå¿…é¡»ï¼‰ã€‚</li>\n <li>æ ¹æ®ç¬¬ä¸€æ­¥ç»™å˜é‡è®¾å®šçš„ç±»å‹è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œå³ä¸å…è®¸ç±»å‹ä¸å…¼å®¹çš„èµ‹å€¼ï¼Œ ä¸å…è®¸ä½¿ç”¨å€¼ç©ºé—´å’Œç±»å‹ç©ºé—´ä¸å­˜åœ¨çš„å˜é‡å’Œç±»å‹ç­‰ã€‚</li>\n</ol>\n<p>ç¬¬ä¸€ä¸ªç‚¹æ˜¯é€šè¿‡ç±»å‹æ³¨è§£çš„è¯­æ³•æ¥å®Œæˆã€‚å³ç±»ä¼¼è¿™æ ·ï¼š</p>\n<pre><code class=\"ts\">const a: number = 1;</code></pre>\n<blockquote>\n Typescript çš„ç±»å‹æ³¨è§£æ˜¯è¿™æ ·ï¼Œ Java çš„ç±»å‹æ³¨è§£æ˜¯å¦ä¸€ä¸ªæ ·å­ï¼ŒJava ç±»ä¼¼ int a = 1ã€‚ è¿™ä¸ªåªæ˜¯è¯­æ³•å·®å¼‚è€Œå·²ï¼Œä½œç”¨æ˜¯ä¸€æ ·çš„ã€‚\n</blockquote>\n<p>ç¬¬äºŒä¸ªé—®é¢˜ï¼Œ Typescript æä¾›äº†è¯¸å¦‚ lib.d.ts ç­‰ç±»å‹åº“æ–‡ä»¶ã€‚éšç€ ES çš„ä¸æ–­æ›´æ–°ï¼Œ JavaScript ç±»å‹å’Œå…¨å±€å˜é‡ä¼šé€æ¸å˜å¤šã€‚Typescript ä¹Ÿæ˜¯é‡‡ç”¨è¿™ç§ lib çš„æ–¹å¼æ¥è§£å†³çš„ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023647616\" alt=\"\" title=\"\" /></p>\n<p>ï¼ˆTypeScript æä¾›çš„éƒ¨åˆ† libï¼‰</p>\n<p>ç¬¬ä¸‰ä¸ªé—®é¢˜ï¼ŒTypescript ä¸»è¦æ˜¯é€šè¿‡ interfaceï¼Œtypeï¼Œå‡½æ•°ç±»å‹ç­‰æ‰“é€š<strong>ç±»å‹ç©ºé—´</strong>ï¼Œé€šè¿‡ declare ç­‰æ‰“é€š<strong>å€¼ç©ºé—´</strong>ï¼Œå¹¶ç»“åˆ binder æ¥è¿›è¡Œç±»å‹è¯Šæ–­ã€‚å…³äº checker ï¼Œbinder æ˜¯å¦‚ä½•è¿ä½œçš„ï¼Œå¯ä»¥å‚è€ƒæˆ‘ç¬¬ä¸€ç¯‡çš„ä»‹ç»ã€‚</p>\n<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»‹ç»ç±»å‹ç³»ç»Ÿçš„åŠŸèƒ½ï¼Œå³å®ƒèƒ½ä¸ºæˆ‘ä»¬å¸¦æ¥ä»€ä¹ˆã€‚å¦‚æœä¸Šé¢çš„å†…å®¹ä½ å·²ç»æ‡‚äº†ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥çš„å†…å®¹ä¼šè®©ä½ æ„Ÿåˆ°â€ä½ ä¹Ÿä¸è¿‡å¦‚æ­¤å˜›â€œã€‚</p>\n<h2>ç±»å‹ç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½</h2>\n<ol>\n <li>å®šä¹‰ç±»å‹ä»¥åŠå…¶ä¸Šçš„å±æ€§å’Œæ–¹æ³•ã€‚</li>\n</ol>\n<p>æ¯”å¦‚å®šä¹‰ String ç±»å‹ï¼Œ ä»¥åŠå…¶åŸå‹ä¸Šçš„æ–¹æ³•å’Œå±æ€§ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023647618\" alt=\"\" title=\"\" /></p>\n<p>lengthï¼Œ includes ä»¥åŠ toString æ˜¯ String çš„<strong>æˆå‘˜å˜é‡</strong>ï¼Œ ç”Ÿæ´»åœ¨å€¼ç©ºé—´ï¼Œ å€¼ç©ºé—´è™½ç„¶ä¸èƒ½ç›´æ¥å’Œç±»å‹ç©ºé—´æ¥è§¦ï¼Œä½†æ˜¯ç±»å‹ç©ºé—´å¯ä»¥ä½œç”¨åœ¨å€¼ç©ºé—´ï¼Œä»è€Œç»™å…¶æ·»åŠ ç±»å‹ï¼ˆå¦‚ä¸Šå›¾é»„è‰²éƒ¨åˆ†ï¼‰ã€‚</p>\n<ol>\n <li>æä¾›è‡ªå®šä¹‰ç±»å‹çš„èƒ½åŠ›</li>\n</ol>\n<pre><code class=\"ts\">interface User {\n  name: string;\n  age: number;\n  say(name: string): string;\n}</code></pre>\n<p>è¿™ä¸ªæ˜¯æˆ‘è‡ªå®šä¹‰çš„ç±»å‹ Userï¼Œè¿™æ˜¯ Typescript å¿…é¡»æä¾›çš„èƒ½åŠ›ã€‚</p>\n<ol>\n <li>ç±»å‹å…¼å®¹ä½“ç³»ã€‚</li>\n</ol>\n<p>è¿™ä¸ªä¸»è¦æ˜¯ç”¨æ¥åˆ¤æ–­ç±»å‹æ˜¯å¦æ­£ç¡®çš„ï¼Œä¸Šé¢æˆ‘å·²ç»æè¿‡äº†ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚</p>\n<ol>\n <li>ç±»å‹æ¨å¯¼</li>\n</ol>\n<p>æœ‰æ—¶å€™ä½ ä¸éœ€è¦æ˜¾å¼è¯´æ˜ç±»å‹ï¼ˆç±»å‹æ³¨è§£ï¼‰ï¼ŒTypescript ä¹Ÿèƒ½çŸ¥é“ä»–çš„ç±»å‹ï¼Œè¿™å°±æ˜¯ç±»å‹æ¨å¯¼ç»“æœã€‚</p>\n<pre><code class=\"ts\">const a = 1;</code></pre>\n<p>å¦‚ä¸Šä»£ç ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ¨å¯¼å‡º a çš„ç±»å‹ ä¸º numberã€‚è¿˜å¯ä»¥æœ‰è¿é”æ¨å¯¼ï¼Œæ³›å‹çš„å…¥å‚ï¼ˆæ³›å‹çš„å…¥å‚æ˜¯ç±»å‹ï¼‰æ¨å¯¼ç­‰ã€‚ç±»å‹æ¨å¯¼è¿˜æœ‰ä¸€ä¸ªç‰¹åˆ«æœ‰ç”¨çš„åœ°æ–¹ï¼Œå°±æ˜¯ç”¨åˆ°ç±»å‹æ”¶æ•›ã€‚</p>\n<p>æ¥ä¸‹æ¥æˆ‘ä»¬è¯¦ç»†äº†è§£ä¸‹ç±»å‹æ¨å¯¼å’Œç±»å‹æ”¶æ•›ã€‚</p>\n<h2>ç±»å‹æ¨å¯¼å’Œç±»å‹æ”¶æ•›</h2>\n<pre><code class=\"ts\">let a = 1;</code></pre>\n<p>å¦‚ä¸Šä»£ç ã€‚ Typescript ä¼šæ¨å¯¼å‡º a çš„ç±»å‹ä¸º numberã€‚</p>\n<p>å¦‚æœåªä¼šä½ è¿™ä¹ˆå†™å°±ä¼šæŠ¥é”™ï¼š</p>\n<pre><code class=\"ts\">a = \"1\";</code></pre>\n<p>å› æ­¤ string ç±»å‹çš„å€¼ä¸èƒ½èµ‹å€¼ç»™ number ç±»å‹çš„å˜é‡ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Typescript å†…ç½®çš„ typeof å…³é”®å­—æ¥è¯æ˜ä¸€ä¸‹ã€‚</p>\n<pre><code class=\"ts\">let a = 1;\ntype A = typeof a;</code></pre>\n<p>æ­¤æ—¶ A çš„ç±»å‹å°±æ˜¯ numberï¼Œè¯æ˜äº†å˜é‡ a çš„ç±»å‹ç¡®å®è¢«éšå¼æ¨å¯¼æˆäº† number ç±»å‹ã€‚</p>\n<p>æœ‰æ„æ€çš„æ˜¯å¦‚æœ a ä½¿ç”¨ const å£°æ˜ï¼Œé‚£ä¹ˆ a ä¸ä¼šè¢«æ¨å¯¼ä¸º numberï¼Œè€Œæ˜¯æ¨å¯¼ä¸ºç±»å‹ 1ã€‚å³<strong>å€¼åªèƒ½ä¸º 1 çš„ç±»å‹</strong>ï¼Œè¿™å°±æ˜¯ç±»å‹æ”¶æ•›ã€‚</p>\n<pre><code class=\"ts\">const a = 1;\ntype A = typeof a;</code></pre>\n<blockquote>\n é€šè¿‡ const ï¼Œæˆ‘ä»¬å°† number ç±»å‹æ”¶ç¼©åˆ°äº† \n <strong>å€¼åªèƒ½ä¸º 1 çš„ç±»å‹</strong>ã€‚\n</blockquote>\n<p>å®é™…æƒ…å†µçš„ç±»å‹æ¨å¯¼å’Œç±»å‹æ”¶æ•›è¦è¿œæ¯”è¿™ä¸ªå¤æ‚ï¼Œ ä½†æ˜¯åšçš„äº‹æƒ…éƒ½æ˜¯ä¸€è‡´çš„ã€‚</p>\n<p>æ¯”å¦‚è¿™ä¸ªï¼š</p>\n<pre><code class=\"ts\">function test(a: number, b: number) {\n  return a + b;\n}\ntype A = ReturnType&lt;typeof test&gt;;</code></pre>\n<p>A å°±æ˜¯ number ç±»å‹ã€‚ ä¹Ÿå°±æ˜¯ Typescript çŸ¥é“ä¸¤ä¸ª number ç›¸åŠ ç»“æœä¹Ÿæ˜¯ä¸€ä¸ª numberã€‚å› æ­¤å³ä½¿ä½ ä¸æ˜¾ç¤ºåœ°æ³¨æ˜è¿”å›å€¼æ˜¯ numberï¼Œ Typescript ä¹Ÿèƒ½çŒœåˆ°ã€‚<strong>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ JavaScript é¡¹ç›®ä¸æ¥å…¥ Typescript ä¹Ÿå¯ä»¥è·å¾—ç±»å‹æç¤ºçš„åŸå› ä¹‹ä¸€</strong>ã€‚</p>\n<p>é™¤äº† const å¯ä»¥æ”¶ç¼©ç±»å‹ï¼Œ typeofï¼Œ instanceof éƒ½ä¹Ÿå¯ä»¥ã€‚ åŸå› å¾ˆç®€å•ï¼Œå°±æ˜¯<strong>Typescript åœ¨è¿™ä¸ªæ—¶å€™å¯ä»¥ 100% ç¡®å®šä½ çš„ç±»å‹äº†</strong>ã€‚ æˆ‘æ¥è§£é‡Šä¸€ä¸‹ï¼š</p>\n<p>æ¯”å¦‚ä¸Šé¢çš„ const ï¼Œç”±äºä½ æ˜¯ç”¨ const å£°æ˜çš„ï¼Œå› æ­¤ 100% ä¸ä¼šå˜ï¼Œä¸€å®šæ°¸è¿œæ˜¯ 1ï¼Œå› æ­¤ç±»å‹å¯ä»¥æ”¶ç¼©ä¸º 1ã€‚ å†æ¯”å¦‚ï¼š</p>\n<pre><code class=\"ts\">let a: number | string = 1;\na = \"1\";\nif (typeof a === \"string\") {\n  a.includes;\n}</code></pre>\n<p>if è¯­å¥å†… a 100% æ˜¯ string ï¼Œä¸èƒ½æ˜¯ numberã€‚å› æ­¤ if è¯­å¥å†…ç±»å‹ä¼šè¢«æ”¶ç¼©ä¸º stringã€‚instanceof ä¹Ÿæ˜¯ç±»ä¼¼ï¼ŒåŸç†ä¸€æ¨¡ä¸€æ ·ã€‚å¤§å®¶åªè¦è®°ä½<strong>Typescript å¦‚æœå¯ä»¥ 100% ç¡®å®šä½ çš„ç±»å‹ï¼Œå¹¶ä¸”è¿™ä¸ªç±»å‹è¦æ¯”ä½ å®šä¹‰çš„æˆ–è€… Typescript è‡ªåŠ¨æ¨å¯¼çš„èŒƒå›´æ›´å°ï¼Œé‚£ä¹ˆå°±ä¼šå‘ç”Ÿç±»å‹æ”¶ç¼©</strong>å°±è¡Œäº†ã€‚</p>\n<h2>æ€»ç»“</h2>\n<p>æœ¬æ–‡ä¸»è¦è®²äº† Typescript çš„ç±»å‹ç³»ç»Ÿã€‚ Typescript å’Œ JavaScript çš„ç±»å‹æ˜¯å¾ˆä¸ä¸€æ ·çš„ã€‚ä»è¡¨é¢ä¸Šæ¥çœ‹ï¼Œ TypeScript çš„ç±»å‹æ˜¯ JavaScript ç±»å‹çš„è¶…é›†ã€‚ä½†æ˜¯ä»æ›´æ·±å±‚æ¬¡ä¸Šæ¥è¯´ï¼Œä¸¤è€…çš„æœ¬è´¨æ˜¯ä¸ä¸€æ ·çš„ï¼Œä¸€ä¸ªæ˜¯å€¼çš„ç±»å‹ï¼Œä¸€ä¸ªæ˜¯å˜é‡çš„ç±»å‹ã€‚</p>\n<p>Typescript ç©ºé—´åˆ†ä¸ºå€¼ç©ºé—´å’Œç±»å‹ç©ºé—´ã€‚ä¸¤ä¸ªç©ºé—´ä¸äº’é€šï¼Œå› æ­¤å€¼ä¸èƒ½å½“æˆç±»å‹ï¼Œç±»å‹ä¸èƒ½å½“æˆå€¼ï¼Œå¹¶ä¸”å€¼å’Œç±»å‹ä¸èƒ½åšè¿ç®—ç­‰ã€‚ä¸è¿‡ TypeScript å¯ä»¥å°†ä¸¤è€…ç»“åˆèµ·æ¥ç”¨ï¼Œè¿™ä¸ªèƒ½åŠ›åªæœ‰ TypeScript æœ‰ï¼Œ ä½œä¸º TypeScript çš„å¼€å‘è€…çš„ä½ æ²¡æœ‰è¿™ä¸ªèƒ½åŠ›ï¼Œè¿™ä¸ªæˆ‘åœ¨ç¬¬ä¸€èŠ‚ä¹Ÿç®€å•ä»‹ç»äº†ã€‚</p>\n<p>TypeScript æ—¢ä¼šå¯¹å˜é‡å­˜åœ¨ä¸å¦è¿›è¡Œæ£€æŸ¥ï¼Œä¹Ÿä¼šå¯¹å˜é‡ç±»å‹è¿›è¡Œå…¼å®¹æ£€æŸ¥ã€‚å› æ­¤ TypeScript å°±éœ€è¦å®šä¹‰ä¸€ç³»åˆ—çš„ç±»å‹ï¼Œä»¥åŠç±»å‹ä¹‹é—´çš„å…¼å®¹å…³ç³»ã€‚é»˜è®¤æƒ…å†µï¼ŒTypeScript æ˜¯æ²¡æœ‰ä»»ä½•ç±»å‹å’Œå˜é‡çš„ï¼Œå› æ­¤ä½ ä½¿ç”¨ String ç­‰éƒ½ä¼šæŠ¥é”™ã€‚TypeScript ä½¿ç”¨åº“æ–‡ä»¶æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ€ç»å…¸çš„å°±æ˜¯ lib.d.tsã€‚</p>\n<p>TypeScript å·²ç»åšåˆ°äº†è¶³å¤Ÿæ™ºèƒ½äº†ï¼Œä»¥è‡³äºä½ ä¸éœ€è¦å†™ç±»å‹ï¼Œå®ƒä¹Ÿèƒ½çŒœå‡ºæ¥ï¼Œè¿™å°±æ˜¯ç±»å‹æ¨å¯¼å’Œç±»å‹æ”¶ç¼©ã€‚å½“ç„¶ TypeScript ä¹Ÿæœ‰ä¸€äº›åŠŸèƒ½ï¼Œæˆ‘ä»¬è§‰å¾—åº”è¯¥æœ‰ï¼Œå¹¶ä¸”ä¹Ÿæ˜¯å¯ä»¥åšåˆ°çš„åŠŸèƒ½ç©ºç¼ºã€‚ä½†æ˜¯æˆ‘ç›¸ä¿¡éšç€ TypeScript çš„é€æ­¥è¿­ä»£ï¼ˆæˆªæ­¢æœ¬æ–‡å‘å¸ƒï¼ŒTypeScript åˆšåˆšå‘å¸ƒäº† 4.0.0 çš„ beta ç‰ˆæœ¬ï¼‰ï¼Œä¸€å®šä¼šè¶Šæ¥è¶Šå®Œå–„ï¼Œç”¨ç€è¶Šæ¥è¶Šèˆ’æœçš„ã€‚</p>\n<p>æˆ‘ä»¬æ¯ä¸ªé¡¹ç›®çš„éœ€è¦æ˜¯ä¸ä¸€æ ·çš„ï¼Œ ç®€å•çš„åŸºæœ¬ç±»å‹è‚¯å®šæ— æ³•æ»¡è¶³å¤šæ ·çš„é¡¹ç›®éœ€æ±‚ï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»æ”¯æŒè‡ªå®šä¹‰ç±»å‹ï¼Œæ¯”å¦‚ interfaceï¼Œ type ä»¥åŠå¤æ‚ä¸€ç‚¹çš„æ³›å‹ã€‚å½“ç„¶æ³›å‹å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯ä¸ºäº†å‡å°‘æ ·æ¿ä»£ç è€Œç”Ÿçš„ï¼Œå’Œ interface ï¼Œ type è¿™ç§åˆšéœ€ä¸å¤ªä¸€æ ·ã€‚</p>\n<p>æœ‰äº†å„ç§å„æ ·çš„ç±»å‹ä»¥åŠç±»å‹ä¸Šçš„æˆå‘˜å˜é‡ï¼Œä»¥åŠæˆå‘˜å˜é‡çš„ç±»å‹ï¼Œå†å°±åŠ ä¸Šç±»å‹çš„å…¼å®¹å…³ç³»ï¼Œæˆ‘ä»¬å°±å¯ä»¥åšç±»å‹æ£€æŸ¥äº†ï¼Œè¿™å°±æ˜¯ TypeScript ç±»å‹æ£€æŸ¥çš„åŸºç¡€ã€‚TypeScript å†…éƒ¨éœ€è¦ç»´æŠ¤è¿™æ ·çš„ä¸€ä¸ªå…³ç³»ï¼Œå¹¶å¯¹å˜é‡è¿›è¡Œç±»å‹ç»‘å®šï¼Œä»è€Œç»™å¼€å‘è€…æä¾›<strong>ç±»å‹åˆ†æ</strong>æœåŠ¡ã€‚</p>\n<h2>å…³æ³¨æˆ‘</h2>\n<p>å¤§å®¶ä¹Ÿå¯ä»¥å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Šè„‘æ´å‰ç«¯ã€‹è·å–æ›´å¤šæ›´æ–°é²œçš„å‰ç«¯ç¡¬æ ¸æ–‡ç« ï¼Œå¸¦ä½ è®¤è¯†ä½ ä¸çŸ¥é“çš„å‰ç«¯ã€‚</p>\n<p>å…¬ä¼—å·ã€ <a href=\"https://tva1.sinaimg.cn/large/007S8ZIlly1gfcuzagjalj30p00dwabs.jpg\" rel=\"nofollow noreferrer\">åŠ›æ‰£åŠ åŠ </a>ã€‘<br>çŸ¥ä¹ä¸“æ ã€ <a href=\"https://www.zhihu.com/people/lu-xiao-13-70\" rel=\"nofollow noreferrer\">Lucifer - çŸ¥ä¹</a>ã€‘</br></p>\n<p>ç‚¹å…³æ³¨ï¼Œä¸è¿·è·¯ï¼</p>","descriptionType":"html","publishedDate":"Sun, 16 Aug 2020 08:47:31 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/remote/1460000023647613","linkMd5":"bd58cfa67f4f5a8296c3cadfd7f5f584","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx25/cdn74@2020_6/2020/08/24/23-08-22-906_d94bb8e812bfe91b.webp","destWidth":800,"destHeight":267,"sourceBytes":14509,"destBytes":7928,"author":"lucifer","articleImgCdnMap":{"https://segmentfault.com/img/remote/1460000023647613":"https://cdn.jsdelivr.net/gh/myreaderx25/cdn74@2020_6/2020/08/24/23-08-22-906_d94bb8e812bfe91b.webp","https://segmentfault.com/img/remote/1460000023647612":"https://cdn.jsdelivr.net/gh/myreaderx14/cdn24@2020_6/2020/08/24/23-08-41-735_107915944ae8e8f0.webp","https://segmentfault.com/img/remote/1460000023647615":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn36@2020_3/2020/08/24/23-08-42-134_aa11cbe09197e23f.webp","https://segmentfault.com/img/remote/1460000023647614":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn28@2020_2/2020/08/24/23-08-43-039_31d9dc656eb69c0c.webp","https://segmentfault.com/img/remote/1460000023647617":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn65@2020_2/2020/08/24/23-08-42-437_c0f9fa580c29ad2c.webp","https://segmentfault.com/img/remote/1460000023647616":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn31@2020_4/2020/08/24/23-08-41-339_dae97fa38554c9f9.webp","https://segmentfault.com/img/remote/1460000023647618":"https://cdn.jsdelivr.net/gh/myreaderx13/cdn61@2020_5/2020/08/24/23-08-42-563_0092cc3deacdf28c.webp"},"publishedOrCreatedDate":1598310388570},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"æ‚„å’ªå’ªæé«˜å›¢é˜Ÿå¹¸ç¦æ„Ÿ &amp; Surpriseï¼","link":"https://segmentfault.com/a/1190000023601927","description":"<h2>å‰è¨€</h2>\n<p>æœ¬æ–‡çš„çµæ„Ÿæ˜¯åœ¨å‡ ä¸ªæœˆä»¥å‰å·¥ä½œä¸å¿™ï¼ˆæ‘¸é±¼ï¼‰æ—¶æƒ³åˆ°çš„ï¼Œè€æ˜¯è‡ªå·±ä¸€ä¸ªäººå¾€å‰å†²å†²å†²ä¹Ÿæ²¡å•¥æ„æ€ï¼Œéœ€è¦æƒ³ä¸€ç‚¹åŠæ³•ï¼Œæ¥æé«˜å›¢é˜Ÿçš„æ•ˆç‡ï¼Œæé«˜å›¢é˜Ÿçš„å¹¸ç¦æ„Ÿï¼ˆæ•ˆç‡èµ·æ¥äº†ï¼Œå•ä½æ—¶é—´å†…ä»£ç å†™çš„æ›´å¤šï¼Œé‚£ä¸å°±å¹¸ç¦å•¦ ğŸ˜œï¼‰ï¼Œç»è¿‡å‡ ä¸ªæœˆçš„æ‘¸ç´¢ï¼Œæ€»ç»“å‡ºäº†å‡ ä¸ªå°ç‚¹ï¼Œå¦‚æœå¤§å®¶æœ‰æ›´å¥½çš„æ–¹å¼ï¼Œæ¬¢è¿ä¸€èµ·è®¨è®º~</p>\n<p>&lt;br/&gt;</p>\n<h2>æ°¸ä¹…è§£å†³ä¸çŸ¥é“æ˜¯ä»€ä¹ˆç‰ˆæœ¬</h2>\n<p>æˆ‘å¸çš„äº§å“ä¸»è¦åˆ†ä¸ºSaasç«¯å’Œç§æœ‰å¹³å°ï¼Œåˆ†åˆ«éƒ¨ç½²åœ¨å…¬ç½‘å’Œå®¢æˆ·çš„ç§æœ‰ç¯å¢ƒï¼Œå…ˆæ¥è¯´è¯´ç§æœ‰ç¯å¢ƒçš„é—®é¢˜ï¼š<strong>ä¸çŸ¥é“çœŸæ­£éƒ¨ç½²çš„é¡¹ç›®ç‰ˆæœ¬</strong>ï¼Œè¯´æ¥å¾ˆå¯ç¬‘ï¼Œè¿ç»´åŒå­¦åœ¨éƒ¨ç½²çš„æ—¶å€™è‚¯å®šæ˜¯è®°å½•è¿‡å„ä¸ªå®¢æˆ·çš„ä»£ç ç‰ˆæœ¬çš„ï¼Œä½†ä¹Ÿå°±æ˜¯è¿™ä¹ˆå¯ç¬‘ï¼Œæœ‰æ—¶å€™å°±æ˜¯ä¼šå¼„é”™ï¼Œå¯èƒ½æ˜¯ç”±äºå‡çº§æµç¨‹ä¸å¤Ÿå®Œå–„ï¼Œæˆ–è€…å·¥ä½œå¤±è¯¯ç­‰ç­‰ï¼Œæ€»ä¹‹ï¼Œæƒ³ä¸ªåŠæ³•è§£å†³ã€‚</p>\n<p>&lt;br/&gt;</p>\n<p>äººé ä¸ä½ï¼Œä½†è¿˜æœ‰ä»£ç ã€‚<strong>Git</strong>å·²ç»æˆä¸ºä»£ç ç®¡ç†çš„äº‹å®æ ‡å‡†ï¼Œè¿™å°±ä¸å¤šè¯´äº†ï¼Œå³ç„¶äººç®¡ç†ä¸å¥½ç‰ˆæœ¬ï¼Œé‚£è¿˜æ˜¯ä»<strong>Git</strong>æœ¬èº«å…¥æ‰‹å§ï¼Œæ‚„å’ªå’ªçš„ç»™æ‰€æœ‰é¡¹ç›®ä¾èµ–ï¼ˆ<strong>POM.XML</strong>ï¼‰å¢åŠ ä¸€ä¸ªæ’ä»¶ï¼š</p>\n<pre><code class=\"xml\">&lt;!-- Git Versionæ’ä»¶ --&gt;\n&lt;plugin&gt;\n    &lt;groupId&gt;pl.project13.maven&lt;/groupId&gt;\n    &lt;artifactId&gt;git-commit-id-plugin&lt;/artifactId&gt;\n    &lt;version&gt;4.0.0&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;get-the-git-infos&lt;/id&gt;\n            &lt;phase&gt;initialize&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;revision&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n    &lt;configuration&gt;\n        &lt;dotGitDirectory&gt;${project.basedir}/.git&lt;/dotGitDirectory&gt;\n        &lt;verbose&gt;false&lt;/verbose&gt;\n        &lt;dateFormat&gt;yyyy-MM-dd HH:mm:ss&lt;/dateFormat&gt;\n        &lt;prefix&gt;git&lt;/prefix&gt;\n        &lt;generateGitPropertiesFile&gt;true&lt;/generateGitPropertiesFile&gt;\n        &lt;generateGitPropertiesFilename&gt;${project.build.outputDirectory}/${project.name}.build.json&lt;/generateGitPropertiesFilename&gt;\n        &lt;format&gt;json&lt;/format&gt;\n        &lt;gitDescribe&gt;\n            &lt;skip&gt;false&lt;/skip&gt;\n            &lt;always&gt;false&lt;/always&gt;\n            &lt;dirty&gt;-dirty&lt;/dirty&gt;\n        &lt;/gitDescribe&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;</code></pre>\n<p>æ’ä»¶å°†ä¼šåœ¨æ¯æ¬¡æ„å»ºæ—¶ç”Ÿæˆä¸€ä¸ªç‰ˆæœ¬ç›¸å…³æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"json\">{\n  \"git.branch\" : \"master\",\n  \"git.build.host\" : \"Kerwin\",\n  \"git.build.time\" : \"2020-08-12 23:24:59\",\n  \"git.build.user.email\" : \"34807944+kkzhilu@users.noreply.github.com\",\n  \"git.build.user.name\" : \"kkzhilu\",\n  \"git.build.version\" : \"1.0.0-SNAPSHOT\",\n  \"git.closest.tag.commit.count\" : \"\",\n  \"git.closest.tag.name\" : \"\",\n  \"git.commit.id\" : \"4981afb5dfeee6f835dcf9a7a135083d8e973090\",\n  \"git.commit.id.abbrev\" : \"4981afb\",\n  \"git.commit.id.describe\" : \"4981afb\",\n  \"git.commit.id.describe-short\" : \"4981afb\",\n  \"git.commit.message.full\" : \"Commit git-version\",\n  \"git.commit.message.short\" : \"Commit git-version\",\n  \"git.commit.time\" : \"2020-08-04 18:18:47\",\n  \"git.commit.user.email\" : \"34807944+kkzhilu@users.noreply.github.com\",\n  \"git.commit.user.name\" : \"kexianming\",\n  \"git.dirty\" : \"false\",\n  \"git.local.branch.ahead\" : \"0\",\n  \"git.local.branch.behind\" : \"0\",\n  \"git.remote.origin.url\" : \"https://github.com/kkzhilu/KerwinBoots.git\",\n  \"git.tags\" : \"\",\n  \"git.total.commit.count\" : \"9\"\n}</code></pre>\n<p>æ’ä»¶åå­—å«ï¼š<strong>git-commit-id-plugin</strong>ï¼Œè‡³äºç»†èŠ‚ä½¿ç”¨å°±è‡ªå·±å»æœç´¢å•¦ï¼Œå®ƒå¯ä»¥å®ç°çš„æ•ˆæœå³åœ¨æ¯æ¬¡æ‰“åŒ…æ—¶ç”Ÿæˆç›¸åº”çš„Gitç›¸å…³ä¿¡æ¯ï¼Œè¿™æ ·æ— è®ºè¿ç»´åŒå­¦æ˜¯å¦æŠŠä»£ç å‡é”™ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥çŸ¥é“<strong>ä»£ç åˆ°åº•æ˜¯ä»€ä¹ˆç‰ˆæœ¬</strong></p>\n<p>ä»¥åç»ˆäºå¬ä¸åˆ°åŒäº‹ä¹‹é—´å› ä¸ºä»£ç ç‰ˆæœ¬æ‰¯çš®çš„äº‹æƒ…äº†ğŸ¤ª</p>\n<p>&lt;br/&gt;</p>\n<h2>æ°¸ä¹…è§£å†³æ²¡æ‰“æ—¥å¿—æ€ä¹ˆåŠçš„é—®é¢˜</h2>\n<p>å›åˆ°åˆšåˆšè¯´çš„Saasç«¯ç”Ÿäº§ç¯å¢ƒï¼Œç”±äºå„ç§åŸå› ï¼Œæˆ‘ä»¬å›¢é˜Ÿç»å¸¸éœ€è¦ç»´æŠ¤ä¸æ˜¯è‡ªå·±å†™çš„é¡¹ç›®ï¼Œå¾ˆå¤šæ—¶å€™ä¸€äº›ç»†èŠ‚é€»è¾‘å®Œå…¨æ‘¸ä¸ç€å¤´è„‘ï¼Œè€Œä¸”æ²¡æœ‰æ—¥å¿—ï¼Œæœ€è¦å‘½çš„æ˜¯åœ¨æµ‹è¯•ç¯å¢ƒè¿˜ä¸å¤ç°ï¼Œè‚¿ä¹ˆåŠï¼Ÿ</p>\n<p>&lt;br/&gt;</p>\n<p>ä»¥å‰çš„è§£å†³æ–¹æ¡ˆæ˜¯å„ç§å–Šäººï¼Œç„¶åç¡¬çœ‹ä»£ç å¯»æ‰¾ä¸Šä¸‹æ–‡ï¼Œå°½å¯èƒ½çš„æ‰¾åˆ°è››ä¸é©¬è¿¹ï¼Œæ€»ä¹‹æ•ˆç‡éå¸¸æ„Ÿäººï¼Œå¤„ç†çš„æ…¢äº†å°±æ˜¯ä¸€ä¸ªäº‹æ•…ï¼Œå…¨å‘˜æŒ¨æ‰¹è¯„ï¼Œå’‹åŠå‘¢ï¼Ÿæˆ‘å°±ä¸€ç›´åœ¨å¯»æ‰¾è¿™ç§é—®é¢˜çš„è§£å†³åŠæ³•ï¼Œç»ˆäºæˆ‘å‘ç°äº†ä¸€ä¸ªç¥å™¨ï¼š<strong>Arthas</strong></p>\n<p>&lt;br/&gt;</p>\n<p>ç”¨è¿‡è¿™ä¸ªå·¥å…·çš„äººå°±çŸ¥é“å®ƒæœ‰å¤šå¼ºå¤§ï¼Œé˜¿é‡Œå‡ºå“ï¼Œå®˜æ–¹æ–‡æ¡£é“¾æ¥ï¼š<a href=\"https://arthas.gitee.io/commands.html\" rel=\"nofollow noreferrer\">https://arthas.gitee.io/comma...</a></p>\n<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å…¶æä¾›çš„éƒ¨åˆ†å‘½ä»¤ï¼Œå¦‚ï¼š<code>tt</code>ï¼Œ<strong>è·å–æ–¹æ³•æ‰§è¡Œæ•°æ®çš„æ—¶ç©ºéš§é“ï¼Œå®ƒå¯ä»¥è®°å½•ä¸‹æŒ‡å®šæ–¹æ³•æ¯æ¬¡è°ƒç”¨çš„å…¥å‚å’Œè¿”å›ä¿¡æ¯</strong>ï¼Œæƒ³æƒ³å®ƒçš„å¸®åŠ©æœ‰å¤šå¤§ï¼Œ<strong>è®°å½•æ¯ä¸€ä¸ªæ–¹æ³•çš„å…¥å‚å’Œå‡ºå‚</strong>ï¼Œå¦‚æœçœŸé‡ä¸Šæ²¡æ—¥å¿—çš„æƒ…å†µï¼ŒçŸ¥é“è¿™äº›ä¿¡æ¯å…¶å®é…åˆä»£ç å°±å¯ä»¥å¾ˆå¿«å®šä½é—®é¢˜äº†ï¼Œæ‰€ä»¥ï¼Œå¬è¿‡æ²¡ç”¨è¿‡çš„æœ‹å‹ï¼Œéƒ½å»è¯•è¯•å§ï¼ŒçœŸçš„å¾ˆæ— æ•Œã€‚</p>\n<p>ä¸‹æ¬¡åŒäº‹æœ‰éš¾æ—¶ï¼Œä½ å°±ç”¨è¿™ä¸ªå·¥å…·å»å¸®ä»–ï¼Œä»–è¯´ä¸å®šä¼šè¯·ä½ åƒé¡¿é¥­ğŸ—</p>\n<p>&lt;br/&gt;</p>\n<h2>æ°¸ä¹…è§£å†³å“ªé‡Œè€—æ—¶è¿™ä¹ˆé•¿çš„é—®é¢˜</h2>\n<p>è¿™ä¸ªé—®é¢˜æ˜¯ç”±äºä¹‹å‰åŒäº‹é‡å†™äº†ä¸€å—ä¸šåŠ¡é€»è¾‘ï¼Œç»“æœçº¿ä¸Šå±•ç°å±‚è€—æ—¶å¤§æ¦‚30sï¼Œohï¼Œå¤©å“ªï¼åœ¨æµ‹è¯•ç¯å¢ƒæ˜æ˜æ˜¯ä¸€ç¬é—´çš„ï¼Œå’‹åŠï¼Ÿ</p>\n<p>é€ æˆè¿™ç§é—®é¢˜çš„åŸå› ï¼Œè‚¯å®šæ˜¯SQLå†™çš„ä¸å¥½ï¼Œæˆ–è€…ä¸šåŠ¡å¤„ç†å“ªé‡Œåšäº†å¾ˆå¤šä¸å¿…è¦çš„åŠ¨ä½œï¼ˆæˆ‘ä»¬æ²¡æœ‰ç°åº¦æµ‹è¯•ï¼‰ï¼Œä½†æ˜¯ç”Ÿäº§ç¯å¢ƒåˆä¸èƒ½éšä¾¿åŠ¨ï¼Œä¹Ÿä¸èƒ½æ–­ç‚¹è°ƒè¯•ï¼Œä»æ—¥å¿—ä¹Ÿåªèƒ½çœ‹åˆ°è€—æ—¶å¾ˆé•¿ï¼Œä½†æ˜¯æ…¢åœ¨å“ªé‡Œä¸çŸ¥é“ã€‚</p>\n<p>&lt;br/&gt;</p>\n<p>å½“ä¸€ä¸ªæ–¹æ³•é‡Œé¢ç»è¿‡äº†Nä¸ªå†…éƒ¨æ–¹æ³•åï¼Œä½ ä¸çŸ¥é“åˆ°åº•æ˜¯å“ªä¸€ä¸ªå¯¼è‡´è¿™ä¹ˆé•¿çš„è€—æ—¶ï¼Œå½“æ— æ³•å¤ç°çš„æ—¶å€™æ€ä¹ˆåŠå‘¢ï¼Ÿå…¶å®è¿˜æ˜¯åˆ©ç”¨ä¸Šé¢çš„é‚£ä¸ªå·¥å…·<strong>Arthas</strong>ï¼Œè¿˜æ˜¯ä¸€æ ·çš„å‘½ä»¤<strong>tt</strong>ï¼Œå®ƒä¸ä»…å¯ä»¥è®°å½•å…¥å‚å’Œå‡ºå‚ä¿¡æ¯ï¼Œ<strong>è¿˜å¯ä»¥è®°å½•æ¯ä¸€ä¸ªæ–¹æ³•çš„è€—æ—¶</strong>ï¼Œå¤šä¹ˆçš„å¼ºå¤§ã€‚</p>\n<p>&lt;br/&gt;</p>\n<p>æ‰€ä»¥æˆ‘æ˜¯ä¸ºäº†å†æ¬¡æé†’ï¼Œè¿™äº›åŠŸèƒ½åªæ˜¯<strong>Arthas</strong>çš„ä¸€ç‚¹çš®æ¯›ï¼Œå’±ä»¬è¦å­¦ä¼šåˆç†ä½¿ç”¨å¼€æºå·¥å…·</p>\n<p>&lt;br/&gt;</p>\n<h2>æ³¨é‡Šæ— æ³•è¡¨è¾¾æµç¨‹å›¾æ•ˆæœçš„è§£å†³æ–¹æ¡ˆ</h2>\n<p>æ³¨é‡Šæ˜¯æ–‡å­—ï¼Œéš¾ä»¥è¡¨è¾¾å¦‚æµç¨‹å›¾ä¸€èˆ¬çš„æ•ˆæœï¼Œæ‰€ä»¥è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘æ‰¾åˆ°äº†ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼Œç›®å‰åœ¨é¡¹ç›®ä¸­ä½¿ç”¨æ•ˆæœéå¸¸ä¹‹å¥½ï¼Œç¬¬ä¸€é’Ÿæ˜¯åˆ©ç”¨<strong>ASCIIæ³¨é‡Šå·¥å…·</strong>ï¼Œè¯¥å·¥å…·çš„åœ°å€ï¼š<a href=\"http://asciiflow.com/\" rel=\"nofollow noreferrer\">http://asciiflow.com/</a></p>\n<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023601930\" alt=\"\" title=\"\" /></p>\n<p>æ³¨é‡Šå¦‚ä¸‹ï¼š</p>\n<pre><code class=\"bash\">+-------------------------------+\n|                               |\n|  +-------------------------+  |\n|  |                         |  |\n|  |           Demo          |  |\n|  |                         |  |\n|  |                         |  |\n|  +------------+------------+  |\n|               |               |\n|               |               |\n|               |               |\n|               |               |\n|               |               |\n|               |               |\n|               |               |\n|               |               |\n|               |               |\n|               +------&gt; False  |\n|               |               |\n|               |               |\n|    True   &lt;---+               |\n|                               |\n+-------------------------------+\n</code></pre>\n<p>è¿™ç©æ„ç”»å‡ºæ¥çš„å›¾æ˜¯å¯ä»¥ç›´æ¥å¤åˆ¶æˆæ–‡æœ¬çš„ï¼Œæ§åˆ¶å¥½å°ºå¯¸å°±å¯ä»¥è§£å†³å¤§éƒ¨åˆ†æƒ…å†µï¼Œä¹Ÿå¯ä»¥æƒ³è±¡ä¹‹å‰ç½‘ä¸Šæœ‰ä¸€äº›å¾ˆå¥‡è‘©çš„æ³¨é‡Šæ˜¯ä¸æ˜¯å°±æ˜¯ç”¨è¿™ä¸ªå·¥å…·æˆ–è€…åŒæ ·çš„åŸç†ç”»å‡ºæ¥çš„ï¼Œé™„ä¸Šä¸€å‰¯ä¹‹å‰æ–‡ç« ç¼ºçš„ä¸€å¼ å›¾ï¼š</p>\n<p><strong>ä¸Šäº¿æ•°æ®æ€ä¹ˆç©æ·±åº¦åˆ†é¡µï¼Ÿå…¼å®¹MySQL + ES + MongoDBï¼š</strong><a href=\"https://juejin.im/post/6850037275456339975\" rel=\"nofollow noreferrer\">https://juejin.im/post/685003...</a></p>\n<p>è¿™ç¯‡æ–‡ç« å†™å®Œçš„æ—¶å€™ï¼Œæˆ‘è‡ªå·±æ–¹æ¡ˆçš„å›¾è¿˜æ²¡ç”»å¥½ï¼Œæ‰€ä»¥å¾ˆå¤šæœ‹å‹é—®æˆ‘ç”¨idå®ç°ä¸äº†ä»€ä¹ˆçš„ï¼Œè¿™æ¬¡å°±é¡ºä¾¿å±•ç¤ºä¸€ä¸‹æˆ‘çš„æ–¹æ¡ˆ</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023601931\" alt=\"\" title=\"\" /></p>\n<p>è§£å†³æ–¹æ¡ˆä¹‹äºŒï¼Œåˆ©ç”¨<strong>MarkDown</strong>çš„åŸç”Ÿç”»å›¾åŠŸèƒ½ï¼Œæˆ‘ä¸çŸ¥é“è¦å‘å¸ƒæ–‡ç« çš„å¹³å°æ”¯ä¸æ”¯æŒï¼Œæ‰€ä»¥ç”¨æˆªå›¾æ¥ä»£æ›¿äº†ï¼ˆ<strong>Typoraæ”¯æŒ</strong>ï¼‰</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023601932\" alt=\"\" title=\"\" /></p>\n<p>ä¸çŸ¥é“çš„åŒå­¦æœä¸€ä¸‹ï¼Œ<strong>MarkDown</strong>ç»˜å›¾è¯­æ³•ï¼Œæ‹¿ä¸€ä¸ªé€‚åˆçš„æ”¹å°±å¥½äº†ï¼Œæ²¡å¿…è¦ä¸“é—¨å»å­¦ï¼Œæ”¾åˆ°ä»£ç é‡Œçœ‹çœ‹æ•ˆæœï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023601934\" alt=\"\" title=\"\" /></p>\n<p>æœ‰ä¸€ä¸ªå°<strong>Tips</strong>ï¼Œä½¿ç”¨IDEAçš„æ—¶å€™ï¼Œ<strong>åˆ©ç”¨é¼ æ ‡æ»šåŠ¨é”®å¯ä»¥æŒ‰å—å¤åˆ¶ï¼Œè¿™æ ·ä¸€æ¥å¯ä»¥ç›´æ¥å¤åˆ¶åˆ°æŒ‡å®šçš„æ³¨é‡Šå†…å®¹</strong>ï¼Œç„¶åæŠŠå®ƒå¤åˆ¶åˆ°ä»»ä½•ä¸€ä¸ªæ­£å¸¸çš„<strong>MarkDown</strong>å·¥å…·é‡Œï¼Œå°±å¯ä»¥å±•ç¤ºæµç¨‹å›¾äº†ï¼Œç®€ç›´ä¸è¦å¤ªå®Œç¾ï¼Œæƒ³æµ‹è¯•çš„æœ‹å‹å¯ä»¥å¤åˆ¶ä»¥ä¸‹ä»£ç å»ä¸€äº›å·¥å…·é‡Œè¯•è¯•ï¼Œéœ€è¦è®¾ç½®ä»£ç ç§ç±»ä¸ºï¼š<strong>mermaid</strong></p>\n<pre><code class=\"bash\"> sequenceDiagram\n    Note over Boot: å¯åŠ¨ç±»\n    Note over PDFThread: çº¿ç¨‹ç±»\n    Note over PDFWorker: æ‰§è¡Œç±»\n      Boot-&gt;&gt;PDFThread: Bootç±»å¯åŠ¨çº¿ç¨‹\n    PDFThread-&gt;&gt;PDFWorker: çº¿ç¨‹ç±»è°ƒç”¨çœŸæ­£å·¥ä½œWorker\n    loop é˜Ÿåˆ—å¤„ç†\n        PDFThread-&gt;PDFThread: è€ƒè™‘æˆåŠŸä¸å¤±è´¥æƒ…å†µå¤„ç†æ–¹æ¡ˆ\n    end\n    \n    PDFWorker--&gt;&gt;PDFThread: Workerå“åº”æ‰§è¡Œç»“æœ\n    Note right of PDFWorker: æ³¨æ„å‚æ•°æ ¡éªŒ &lt;br/&gt;æ–‡ä»¶æ ¼å¼æ ¡éªŒ</code></pre>\n<p>ä½ æœªæ¥çš„åŒäº‹ç»´æŠ¤ä»£ç çš„æ—¶å€™ä¼šçˆ±ä¸Šä½ ï¼Œå¦‚æœæ˜¯å¥³ç”Ÿï¼Œå¯èƒ½è¿˜ä¼šå«ç»™ä½ ğŸ§¡</p>\n<p>å¹»æƒ³æœ‰ä¸€å¤©ä½ è€å¤§è·‘è¿‡æ¥é—®ä½ ï¼Œä½ è¿™å†™çš„æ³¨é‡Šéƒ½æ˜¯äº›ä»€ä¹ˆç©æ„ï¼Œç„¶åä½ ä¸€å¤åˆ¶ä¸€ç²˜è´´ï¼Œä¸€å¼ å›¾å°±å‡ºæ¥äº†ï¼ä¸‹æ¬¡æ¶¨è–ªä¼šæ²¡æœ‰ä½ ï¼Ÿ</p>\n<p>ï¼ˆåæ­£æˆ‘æ¶¨äº†ï¼Œè¿˜ä¸å°‘ğŸ˜ï¼‰</p>\n<p>&lt;br/&gt;</p>\n<p>PSï¼šæˆ‘è€ƒè™‘å†™ä¸€ä¸ªæ”¯æŒç›´æ¥å¤åˆ¶ç„¶åæ¸²æŸ“æˆæµç¨‹å›¾çš„<strong>IDEAæ’ä»¶</strong>ï¼Œå¦‚æœæœ‰ç°æˆçš„è¯·è”ç³»æˆ‘ï¼Œå°±çœçš„æˆ‘å»å†™äº†ï¼Œå˜¿å˜¿âœŒ</p>\n<p>&lt;br/&gt;</p>\n<h2>åƒåœ¾SQLçš„è§£å†³æ–¹æ¡ˆ</h2>\n<p>æˆ‘ä»¬å…¬å¸æ²¡æœ‰ä¸“é—¨çš„<code>DBA</code>ï¼Œæ‰€ä»¥<code>SQL</code>è¯­å¥çš„è´¨é‡åªæŒæ¡åœ¨å¼€å‘å’Œå¼€å‘ç»„é•¿çš„æ‰‹ä¸Šï¼Œæœ‰æ—¶å€™äº‹æƒ…å¤šï¼Œæˆ–è€…ä¸ç»†å¿ƒï¼Œæˆ–è€…æ¨¡å—ä¸æ˜¯å¾ˆé‡è¦å°±å®¹æ˜“ç²—å¿ƒï¼Œåˆ°äº†ç”Ÿäº§ç¯å¢ƒå‡ºå¤§é—®é¢˜ï¼Œé’ˆå¯¹è¿™ç§æƒ…å†µçš„è§£å†³æ–¹æ¡ˆä¾ç„¶æ˜¯å¯»æ‰¾å·¥å…·ï¼Œæ¯”å¦‚ï¼Œæˆ‘ç›¯ä¸Šäº†<strong>å°ç±³çš„`Soar</strong></p>\n<p>é¡¹ç›®åœ°å€ï¼š<a href=\"https://github.com/XiaoMi/soar\" rel=\"nofollow noreferrer\">https://github.com/XiaoMi/soar</a></p>\n<p>å®˜æ–¹çš„ä»‹ç»ï¼š</p>\n<ul>\n <li>è·¨å¹³å°æ”¯æŒ</li>\n <li>ç›®å‰åªæ”¯æŒ MySQL è¯­æ³•æ—åè®®çš„ SQL ä¼˜åŒ–</li>\n <li>æ”¯æŒåŸºäºå¯å‘å¼ç®—æ³•çš„è¯­å¥ä¼˜åŒ–</li>\n <li>æ”¯æŒå¤æ‚æŸ¥è¯¢çš„å¤šåˆ—ç´¢å¼•ä¼˜åŒ–ï¼ˆUPDATEã€INSERTã€DELETEã€SELECTï¼‰</li>\n</ul>\n<p>è´´ä¸ªå›¾ç‰‡å±•ç¤ºä¸€ä¸‹æ•ˆæœï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023601933\" alt=\"\" title=\"\" /></p>\n<p>è¿™æ¬¾å·¥å…·å¯ä»¥è¿›è¡Œå¯¹<strong>SQL</strong>è¿›è¡Œæ‰“åˆ†ï¼ŒåŒæ—¶æä¾›ä¸€äº›å»ºè®®ï¼Œå®ƒçš„èƒ½åŠ›ä¸Šé™æˆ‘ä»¬è¿˜æ²¡æœ‰æ‘¸ç´¢å‡ºæ¥ï¼Œä½†æ˜¯ä¸‹é™è¿˜æ˜¯å¯ä»¥è‚¯å®šçš„ï¼Œå› æ­¤ä¹‹ååªéœ€è¦å…³æ³¨<strong>ç´¢å¼•</strong>æ˜¯å¦æ­£ç¡®ä½¿ç”¨ï¼Œå…¶ä»–çš„å°±äº¤ç»™è¿™ä¸ªå·¥å…·å§ï¼Œä½äº90åˆ†ï¼Œå°±æ”¹ï¼</p>\n<p>PSï¼šè¿™ä¸ªå¼€æºé¡¹ç›®æ¨èä½¿ç”¨<strong>docker</strong>å®‰è£…ï¼Œç®€å•ç²—æš´æ— è„‘çœæ—¶é—´ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"bash\"># å®‰è£…é•œåƒ\ndocker pull becivells/soar-web\n\n# è¿è¡Œ\ndocker run -d --name Soar-web -p 5077:5077 becivells/soar-web</code></pre>\n<p>æƒ³ç€æœ‰ä¸ªå·¥å…·ä¼šæ£€æŸ¥SQLè´¨é‡äº†ï¼Œæ˜¯ä¸æ˜¯å†™çš„æ—¶å€™ä¹Ÿè®¤çœŸå¤šå•¦ï¼Œå¹¸ç¦æ„Ÿæç¤ºæ»¡æ»¡ï¼Œå“ˆå“ˆ~ğŸ˜</p>\n<p>&lt;br/&gt;</p>\n<h2>æ‡’å¾—å†™æ–‡æ¡£çš„è§£å†³æ–¹æ¡ˆ</h2>\n<p>æ–¹æ¡ˆè®¾è®¡çš„æ–‡æ¡£ä¸å¯èƒ½ç”±å·¥å…·å»å†™ï¼Œä½†æ˜¯ç®€å•çš„æ•°æ®åº“å­—æ®µæ˜ å°„ï¼Œæˆ–è€…æ¥å£æ–‡æ¡£æ€»ä¸éœ€è¦å¼€å‘å»å†™å§ï¼Ÿä¹Ÿæ˜¯ä¸€æ ·æ‘¸ç´¢æ‘¸ç´¢ï¼Œæ‰¾åˆ°äº†å‡ ä¸ªä¸å¤ªé€‚åˆä½†æ˜¯é è¾¹çš„å¼€æºé¡¹ç›®ï¼Œå¦‚ï¼š</p>\n<p><strong>apidocï¼š</strong><a href=\"https://github.com/apidoc/apidoc\" rel=\"nofollow noreferrer\">https://github.com/apidoc/apidoc</a></p>\n<blockquote>\n RESTful web API Documentation Generator.\n</blockquote>\n<p>&lt;br/&gt;</p>\n<p><strong>JApiDocsï¼š</strong><a href=\"https://github.com/YeDaxia/JApiDocs\" rel=\"nofollow noreferrer\">https://github.com/YeDaxia/JA...</a></p>\n<blockquote>\n A magical api documentation generator without annotation for springboot.\n</blockquote>\n<p>&lt;br/&gt;</p>\n<p><strong>APIAutoï¼š</strong><a href=\"https://github.com/TommyLemon/APIAuto\" rel=\"nofollow noreferrer\">https://github.com/TommyLemon...</a></p>\n<blockquote>\n æœºå™¨å­¦ä¹ æµ‹è¯•ã€è‡ªåŠ¨ç”Ÿæˆä»£ç ã€è‡ªåŠ¨é™æ€æ£€æŸ¥ã€è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£ä¸æ³¨é‡Šç­‰ï¼Œåšæœ€å…ˆè¿›çš„æ¥å£ç®¡ç†å·¥å…·\n</blockquote>\n<p>&lt;br/&gt;</p>\n<p>å› ä¸ºæ¯ä¸ªé¡¹ç›®çš„æƒ…å†µä¸åŒï¼Œä½†æ˜¯æˆ‘åˆä¸æƒ³åšå¤§çš„æ”¹åŠ¨ï¼Œæ‰€ä»¥åªèƒ½è¯´æ˜¯é è¾¹ï¼Œä¸èƒ½ç™¾åˆ†ç™¾é€‚åˆï¼Œä½†æœ‰äº†è¿™äº›å¼€æºé¡¹ç›®ï¼Œæˆ‘å°±å¯ä»¥æ”¹å†™å…¶ä¸­çš„ä»£ç ï¼Œè®©å®ƒé€‚åº”å½“å‰é¡¹ç›®çš„æ³¨é‡Šæ–¹æ¡ˆç­‰ç­‰ï¼Œæ€»æ˜¯ï¼Œèƒ½èŠ‚çœç›¸å½“ä¸€éƒ¨åˆ†çš„ç¼–å†™æ–‡æ¡£çš„æ—¶é—´</p>\n<p>&lt;br/&gt;</p>\n<h2>é‡å¤æ€§ä»£ç çš„è§£å†³æ–¹æ¡ˆ</h2>\n<p>è¿™ä¸ªçš„ç¡®æ˜¯ä¸ªå¤§å‘ï¼Œè°è®©å’±ä»¬æ˜¯CRUDç¨‹åºå‘˜å‘¢ï¼Œç»å¸¸éœ€è¦å†™é‡å¤æ€§ç›¸å½“é«˜ï¼Œä½†æ˜¯åˆæœ‰ä¸€ç‚¹ä¸åŒçš„ä»£ç ï¼Œè¿™é‡Œæˆ‘çš„è§£å†³æ–¹æ¡ˆæ˜¯åˆ©ç”¨æ¨¡æ¿ + æ›´åˆé€‚çš„å·¥å…·è§£å†³ï¼Œå¦‚æœåªæ˜¯æ•°æ®åº“æ“ä½œå±‚é‡å¤ä»£ç å¤šï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥åˆ©ç”¨<strong>mybatis-plus</strong>å·¥å…·å‡å°‘é‡å¤ä»£ç ï¼Œåˆæˆ–è€…å†™å‡º<strong>å…¬å…±çš„æ“ä½œå±‚</strong>å‡å°‘é‡å¤ä»£ç ã€‚</p>\n<p>&lt;br/&gt;</p>\n<p>å½“ç”¨å·¥å…·å®Œä¸æˆçš„æ—¶å€™ï¼Œæˆ‘å°±ä¼šç”¨ä¸Šæ¨¡æ¿äº†ï¼Œæ¯”å¦‚ç›´æ¥æˆ‘å†™è¿‡ä¸€ä¸ªç®€å•çš„å¼€æºé¡¹ç›®ï¼š</p>\n<p><strong>å¥½åƒå¾ˆå‰å®³çš„ç”Ÿæˆå™¨ï¼ä¸€ç§’é’Ÿæå®šä¸€ä¸ªé¡¹ç›®ï¼š</strong><a href=\"https://juejin.im/post/6844904148417118215\" rel=\"nofollow noreferrer\">https://juejin.im/post/684490...</a></p>\n<p>æ ¸å¿ƒæ€è·¯å’Œè¦æ±‚å¦‚ä¸‹ï¼š</p>\n<ul>\n <li>åŸºäºæ•°æ®åº“è·å–åŸå§‹æ•°æ®</li>\n <li>åŸºäºæ¨¡æ¿ + åŸå§‹æ•°æ®ç”Ÿæˆå¯è¿è¡Œçš„SpringBooté¡¹ç›®ï¼Œæ”¯æŒç•Œé¢ + åŸºæœ¬å¢åˆ æ”¹æŸ¥</li>\n <li>æä¾›æ‹“å±•å¼æ¥å£ï¼Œå¯ä»¥å®ç°ä¸ä¿®æ”¹ä»£ç ç”Ÿæˆå…¨æ–°çš„æ–‡ä»¶</li>\n</ul>\n<p>&lt;br/&gt;</p>\n<p>é‚£åˆ©ç”¨è¿™ç§æ€è·¯ï¼Œå…¶å®å®Œå…¨å¯ä»¥å†™ä¸€å¥—æ›´å¼€æ”¾çš„ä»£ç ç”Ÿæˆæ¨¡æ¿ï¼Œæ¯”å¦‚æ ¹æ®ä¼ é€’çš„<code>JSON</code>æŠ¥æ–‡å»è§£ææ•°æ®ï¼Œæ ¹æ®ä¼ é€’çš„<code>æ¨¡æ¿</code>å»ç”Ÿæˆæ•°æ®ï¼Œè¿™æ ·çš„è¯åˆå¯ä»¥è§£å†³ç›¸å½“å¤§ä¸€éƒ¨åˆ†çš„é‡å¤å·¥å…·ï¼Œä½ ï¼Œå€¼å¾—æ‹¥æœ‰ã€‚</p>\n<p>PSï¼šåŒç†ï¼Œå…¶å®æ•°æ®åº“å­—æ®µæ˜ å°„æ–‡æ¡£ä¹Ÿå¯ä»¥ç”¨è¿™ç§æ–¹å¼ï¼Œåªéœ€è¦ä¸€ç§’é’Ÿï¼Œç®€ç›´ä¸è¦å¤ªèˆ’æœğŸ¤·â€â™‚ï¸</p>\n<p>&lt;br/&gt;</p>\n<h2>é‡å¤æ€§çš„æ“ä½œç”¨è„šæœ¬ä»£ç </h2>\n<p>è¿™ä¸ªå…¶å®å¤§å®¶éƒ½æœ‰æ„è¯†ï¼Œä½†æ˜¯æœ‰æ—¶å€™å°±æ˜¯æ„Ÿè§‰å¯èƒ½ç”¨çš„ä¸å¤šï¼ŒçœŸè¦ç”¨èµ·æ¥çš„æ—¶å€™åˆæ²¡åŠŸå¤«å»å†™è„šæœ¬ï¼Œæ¯”å¦‚è¿›å…¥ä¸€ä¸ª<strong>docker</strong>å®¹å™¨ï¼Œå¦‚æœç”¨å‘½ä»¤è¡Œçš„è¯ï¼Œè‡³å°‘è¦ç»å†ä¸¤æ­¥ä»£ç ï¼Œåå‡ ç§’çš„æ—¶é—´ï¼Œå¦‚æœå†™ä¸€ä¸ªè„šæœ¬å‘¢ï¼Œä»¥åè¿›å…¥å®¹å™¨åªéœ€è¦ä¸€ç§’é’Ÿï¼Œæ‰€ä»¥æˆ‘ç»™å›¢é˜Ÿå†™äº†ä¸å°‘è¿™ç§è„šæœ¬ï¼Œå…¶å®æˆ‘ä¸€å¼€å§‹ä¹Ÿä¸ä¼šï¼Œåæ­£å°±å¤åˆ¶æ¥ä¸€ä¸ªæ”¹ä¸€æ”¹å°±è¡Œï¼Œå¦‚ä¸‹æ˜¯è¿›å…¥<strong>dockerå®¹å™¨</strong>çš„</p>\n<pre><code class=\"bash\">#ä½¿ç”¨è¯´æ˜ï¼Œç”¨æ¥æç¤ºè¾“å…¥å‚æ•°\nusage() {\n    echo \"Usage: sh æ‰§è¡Œè„šæœ¬.sh [rpcapp|tomcat|nginx|mysql]\"\n    exit 1\n}\n\nrpcapp(){\n  DOCKER_ID=$(docker ps | grep \"rpcapp\" | awk '{print $1}')\n  docker exec -it $DOCKER_ID bash\n}\n\ntomcat(){\n  DOCKER_ID=$(docker ps | grep \"tomcat\" | awk '{print $1}')\n  docker exec -it $DOCKER_ID bash\n}\n\nnginx(){\n  DOCKER_ID=$(docker ps | grep \"nginx\" | awk '{print $1}')\n  docker exec -it $DOCKER_ID bash\n}\n\nmysql(){\n  DOCKER_ID=$(docker ps | grep \"mysql\" | awk '{print $1}')\n  docker exec -it $DOCKER_ID bash\n}\n\n#æ ¹æ®è¾“å…¥å‚æ•°ï¼Œé€‰æ‹©æ‰§è¡Œå¯¹åº”æ–¹æ³•ï¼Œä¸è¾“å…¥åˆ™æ‰§è¡Œä½¿ç”¨è¯´æ˜\ncase \"$1\" in\n  \"rpcapp\")\n    rpcapp\n    ;;\n  \"tomcat\")\n    tomcat\n    ;;\n  \"nginx\")\n    nginx\n    ;;\n  \"mysql\")\n    mysql\n    ;;\n  *)\n    usage\n    ;;\nesac</code></pre>\n<p>&lt;br/&gt;</p>\n<p>ä»ç½‘ä¸Šæ‰¾äº†æ‰¾ï¼Œåˆæ‰¾åˆ°ä¸€ä¸ªå¼€æºé¡¹ç›®ç”¨ä»¥è®°å½•å¸¸ç”¨çš„è„šæœ¬</p>\n<p><strong>useful-scriptsï¼š</strong><a href=\"https://github.com/oldratlee/useful-scripts\" rel=\"nofollow noreferrer\">https://github.com/oldratlee/...</a></p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023601935\" alt=\"\" title=\"\" /></p>\n<p>èƒ½è‡ªåŠ¨çš„å°±ä¸è¦æ¯æ¬¡éƒ½æ‰‹å†™å•¦ï¼ŒèŠ‚çº¦æ—¶é—´å»æ‘¸é±¼ä¸å¿«ä¹å—ğŸ‘</p>\n<p>&lt;br/&gt;</p>\n<h2>æœ€å</h2>\n<p>è¿™å¯æ˜¯æˆ‘è¿™ä¹ˆä¹…ä»¥æ¥æ€»ç»“çš„æ—¶é—´ç®¡ç†ç¥å™¨ï¼ŒèŠ‚çœçš„æ—¶é—´æ‹¿å»æ‘¸é±¼å­¦ä¹ ï¼Œå¾ªç¯ä¿ƒè¿›æ•ˆç‡å’Œèƒ½åŠ›ï¼Œå½¢æˆè‰¯æ€§æ­£åé¦ˆ</p>\n<p>è¿™è¿˜ä¸å€¼å¾—<strong>æ¥ä¸ªèµ</strong>ğŸ‘ğŸ‘ğŸ‘å—ï¼Ÿå˜¿å˜¿~</p>\n<blockquote>\n å¦å¤–å¯ä»¥æœç´¢å…¬ä¼—å·ã€Œ\n <strong>æ˜¯Kerwinå•Š</strong>ã€ï¼Œä¸€èµ·è¿›æ­¥ï¼\n <p>ä¹Ÿå¯ä»¥æŸ¥çœ‹<a href=\"https://github.com/kkzhilu\" rel=\"nofollow noreferrer\">Kerwinçš„GitHubä¸»é¡µ</a>ï¼Œå…³æ³¨ä¸€ä¸ªå°ç™½ç¨‹åºå‘˜çš„è¿›æ­¥ï¼Œè¿™è´§æœ€è¿‘åœ¨æŠ˜è…¾Go~</p>\n</blockquote>","descriptionType":"html","publishedDate":"Thu, 13 Aug 2020 01:27:00 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/remote/1460000023601930","linkMd5":"caee1d7512ed006f50fb714e278bb4f4","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn50@2020_1/2020/08/24/23-08-21-971_83bb94c2dc369fca.webp","destWidth":800,"destHeight":417,"sourceBytes":52499,"destBytes":10952,"author":"Kerwin","articleImgCdnMap":{"https://segmentfault.com/img/remote/1460000023601930":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn50@2020_1/2020/08/24/23-08-21-971_83bb94c2dc369fca.webp","https://segmentfault.com/img/remote/1460000023601931":"https://cdn.jsdelivr.net/gh/myreaderx/cdn50@2020_6/2020/08/24/23-08-33-441_5bc3d20e66a31ee9.webp","https://segmentfault.com/img/remote/1460000023601932":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn42@2020_3/2020/08/24/23-08-33-612_ecc0aceb5b22010d.webp","https://segmentfault.com/img/remote/1460000023601934":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn4@2020_6/2020/08/24/23-08-36-470_98a69215dba7edeb.webp","https://segmentfault.com/img/remote/1460000023601933":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn46@2020_3/2020/08/24/23-08-33-567_4185d7618d0af188.webp","https://segmentfault.com/img/remote/1460000023601935":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn11@2020_1/2020/08/24/23-08-37-304_1fddd172f9de192b.webp"},"publishedOrCreatedDate":1598310388569},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"å­¦ä¹ Vue3.0ï¼Œå…ˆä»æ­å»ºç¯å¢ƒå¼€å§‹","link":"https://segmentfault.com/a/1190000023737670","description":"<blockquote>\n Bugæºæµ‹è¯•ï¼Œä¸Šçº¿æ¥å‡ ä¸ªã€‚æ„¿å›å¤šä¿®æ”¹ï¼Œä»Šå¤œçœ¼éš¾åˆã€‚\n</blockquote>\n<p>è¿™æ˜¯å°ç¼–å…³äº<code>Vue3.0</code>ç³»åˆ—æ–‡ç« çš„ç¬¬äºŒç¯‡ï¼Œæœ¬æ–‡å°†å¸¦æ‚¨ä»é›¶æ­å»ºä¸€ä¸ªåŸºäº<code>Vue3.0</code>ä¸<code>vite</code>çš„<code>Vue3.0</code>å¼€å‘ç¯å¢ƒï¼Œé€šè¿‡æœ¬æ–‡çš„å­¦ä¹ ï¼Œä½ å°†å­¦ä¹ åˆ°ä»¥ä¸‹å†…å®¹ï¼š</p>\n<ol>\n <li>ä½¿ç”¨<code>vite</code>åˆå§‹åŒ–<code>Vue3.0</code>é¡¹ç›®</li>\n <li>é…ç½®<code>ts</code></li>\n <li>é…ç½®<code>vue-router</code></li>\n <li>é…ç½®<code>vuex</code></li>\n <li>ä½¿ç”¨<code>Vue3.0</code>å¼€å‘ä¸€ä¸ª<code>TodoList</code>ç¤ºä¾‹</li>\n</ol>\n<blockquote>\n åŒæ—¶æœ¬æ–‡çš„å†…å®¹å·²å½•åˆ¶ä¸ºè§†é¢‘å‘å¸ƒåˆ°äº†\n <code>Bç«™</code>ï¼Œå¯ä»¥ç‚¹å‡»é“¾æ¥è·³è½¬åˆ°è§†é¢‘åœ°å€ï¼ŒåŒæ—¶æ‚¨ä¹Ÿå¯ä»¥é€šè¿‡å¾®ä¿¡æœç´¢ã€å‰ç«¯æœ‰çš„ç©ã€‘å…³æ³¨æˆ‘çš„å…¬ä¼—å·åŠ æˆ‘å¾®ä¿¡å¥½å‹ï¼Œæ‰‹æ‘¸æ‰‹å’Œä½ ä¸€èµ·å­¦ä¹ \n <code>Vue3.0</code>\n</blockquote>\n<h3>ä½¿ç”¨<code>vite</code>åˆå§‹åŒ–é¡¹ç›®</h3>\n<h4>vite ä»‹ç»</h4>\n<p><code>vite</code>æ˜¯å°¤å¤§å¤§åœ¨ä»Šå¹´æ–°é¼“æ£å‡ºæ¥çš„ä¸€ä¸ªå·¥å…·ï¼Œå°¤å¤§å¤§å¯¹<code>vite</code>çš„æè¿°æ˜¯è¿™æ ·çš„: Vite is an opinionated web dev build tool that serves your code via native ES Module imports during dev and bundles it with <a href=\"https://rollupjs.org/\" rel=\"nofollow noreferrer\">Rollup</a> for production. ç¿»è¯‘æˆä¸­æ–‡å°±æ˜¯ï¼š<code>Vite </code>æ˜¯ä¸€ä¸ªç”±åŸç”Ÿ <code>ES Module </code>é©±åŠ¨çš„ <code>Web</code> å¼€å‘æ„å»ºå·¥å…·ã€‚åœ¨å¼€å‘ç¯å¢ƒä¸‹åŸºäºæµè§ˆå™¨åŸç”Ÿ <code>ES imports</code> å¼€å‘ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹åŸºäº<code> Rollup </code>æ‰“åŒ…ã€‚</p>\n<p>ä¸Šé¢è¿™æ®µè¯æåˆ°äº†ä¸€ä¸ªå…³é”®å­—<code>ES Module</code>,è¿™ä¸ªæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿè¯¦ç»†çš„ä»‹ç»å¤§å®¶å¯ä»¥è®¿é—® <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Modules\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Modules</a> è¿›è¡ŒæŸ¥çœ‹ã€‚æ­¤å¤„æˆ‘ä»¬é•¿è¯çŸ­è¯´ã€‚åœ¨æœ€æ—©çš„æ—¶å€™ï¼Œè¿˜æ²¡æœ‰å‰ç«¯å·¥ç¨‹åŒ–ï¼Œç„¶åæˆ‘ä»¬å†™<code>javascript</code>éƒ½æ˜¯å†™åˆ°ä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åé€šè¿‡<code>script</code>æ ‡ç­¾å»å¼•ç”¨ï¼Œåæ¥éšç€å‰ç«¯å‘å±•è¶Šæ¥è¶Šå£®å¤§ï¼Œ<code>js</code>ä¹‹é—´ä¾èµ–è¶Šæ¥è¶Šå¤æ‚ï¼Œè¿™æ—¶å€™å°±éœ€è¦æœ‰ä¸€ç§å¯ä»¥å°†<code>JavaScript ç¨‹åºæ‹†åˆ†ä¸ºå¯æŒ‰éœ€å¯¼å…¥çš„å•ç‹¬æ¨¡å—</code>çš„æœºåˆ¶æ¥ç»´æŠ¤è¿™ä¸ªä¾èµ–ï¼Œéšä¹‹å°±è¯ç”Ÿäº†<code>AMD</code>,<code>CMD</code>ç­‰ç­‰ï¼Œè€Œ<code>ES Module</code>å°±æ˜¯æµè§ˆå™¨æ”¯æŒçš„åŸç”Ÿæ¨¡å—ä¾èµ–çš„åŠŸèƒ½ã€‚</p>\n<h4>ä¸ºä»€ä¹ˆè¦ç”¨vite</h4>\n<p>ä¸ºä»€ä¹ˆå°¤å¤§å¤§è¦æ¨å‡º<code>vite</code>ï¼Œåœ¨æˆ‘ä»¬ä½¿ç”¨<code>webpack</code>çš„æ—¶å€™ï¼Œæ¯æ¬¡å¼€å‘æ—¶å€™å¯åŠ¨é¡¹ç›®éƒ½éœ€è¦å‡ åç§’ç”šè‡³è¶…è¿‡ä¸€åˆ†é’Ÿï¼Œæ¯”è¾ƒæ…¢ï¼Œè€Œä¸”çƒ­æ›´æ–°ä¹Ÿæ¯”è¾ƒæ…¢ï¼Œè€Œ<code>vite</code>çš„ä¸»è¦ç‰¹ç‚¹å°±æ˜¯å¿«ï¼Œå®˜ç½‘å¯¹äº<code>vite</code>çš„ç‰¹ç‚¹æ˜¯è¿™æ ·æè¿°çš„</p>\n<ol>\n <li>å¿«é€Ÿçš„å†·å¯åŠ¨</li>\n <li>å³æ—¶çš„æ¨¡å—çƒ­æ›´æ–°</li>\n <li>çœŸæ­£çš„æŒ‰éœ€ç¼–è¯‘</li>\n</ol>\n<p>åˆ°åº•æœ‰å¤šå¿«å‘¢ï¼Œæˆ‘ä»¬å…ˆæ–°å»ºä¸€ä¸ªé¡¹ç›®è¯•è¯•</p>\n<h4>åˆå§‹åŒ–viteé¡¹ç›®</h4>\n<ol>\n <li><p>åˆå§‹åŒ–é¡¹ç›®, åœ¨å·¥ä½œç©ºé—´æ‰“å¼€ç»ˆç«¯çª—å£ï¼Œå¯¹äº<code>window</code>ç”¨æˆ·å³<code>cmd</code>ï¼Œç„¶åæ‰§è¡Œä¸‹é¢å‘½ä»¤</p><pre><code class=\"shell\">yarn create vite-app my-vue3</code></pre><p>æ‰§è¡Œä¹‹åå°±ä¼šè¾“å‡ºä»¥ä¸‹å†…å®¹ï¼Œå¯ä»¥çœ‹åˆ°æ–°å»ºé¡¹ç›®ç‰¹åˆ«å¿«ï¼Œä»…ä»…ç”¨äº†<code>1.63s</code></p><p><img src=\"https://segmentfault.com/img/remote/1460000023737674\" alt=\"\" title=\"\" /></p></li>\n <li>åˆå§‹åŒ–å®Œé¡¹ç›®ï¼Œé€šè¿‡<code>cd my-vue3</code>è¿›è¡Œåˆ°é¡¹ç›®é‡Œé¢ï¼Œç„¶åå†æ‰§è¡Œ<code>yarn</code>å®‰è£…ä¾èµ–ï¼ˆæ­¤å¤„å»ºè®®ä½¿ç”¨æ·˜å®é•œåƒï¼Œæ¯”è¾ƒå¿«ï¼‰</li>\n <li>ä¾èµ–å®‰è£…å®Œéœ€è¦é€šè¿‡<code>yarn dev</code>å¯åŠ¨é¡¹ç›®<p><img src=\"https://segmentfault.com/img/remote/1460000023737673\" alt=\"\" title=\"\" /></p><p>æ˜¯ä¸æ˜¯ç¬é—´ä½“éªŒåˆ°äº†ç§’å¯é¡¹ç›®çš„æ„Ÿè§‰ï¼Œå¯åŠ¨ä¹‹åå°±å¯ä»¥é€šè¿‡<code>http://localhost:3000</code>æ¥è®¿é—®é¡¹ç›®äº†</p></li>\n</ol>\n<h4>æŸ¥çœ‹é¡¹ç›®ç»“æ„</h4>\n<p>ä½¿ç”¨<code>vscode</code>æ‰“å¼€é¡¹ç›®ä¹‹åï¼Œå¯ä»¥æŸ¥çœ‹åˆ°æ–°å»ºçš„é¡¹ç›®ç»“æ„ä¸<code>vue-cli4</code>åˆ›å»ºçš„é¡¹ç›®ç»“æ„åŸºæœ¬ä¸€æ ·ï¼Œéƒ½æ˜¯æˆ‘ä»¬å¾ˆç†Ÿæ‚‰çš„<code>App.vue</code>å’Œ<code>main.js</code></p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023737676\" alt=\"\" title=\"\" /></p>\n<h4>æŸ¥çœ‹main.jsæ–‡ä»¶å†…å®¹</h4>\n<p>æ‰“å¼€<code>main.js</code></p>\n<pre><code class=\"javascript\">import { createApp } from 'vue'\nimport App from './App.vue'\nimport './index.css'\n\ncreateApp(App).mount('#app')\n</code></pre>\n<p>å‘ç°åˆ›å»º<code>Vue</code>çš„æ–¹å¼å˜äº†ï¼ŒåŸæ¥æ˜¯é€šè¿‡<code>new Vue</code>çš„æ–¹æ³•æ¥åˆå§‹åŒ–<code>Vue</code>ï¼Œåœ¨<code>Vue3.0</code>ä¸­ï¼Œä¿®æ”¹ä¸ºäº†é€šè¿‡<code>createApp</code>çš„æ–¹å¼ï¼Œå…³äº<code>Vue3.0</code>çš„æ›´å¤šä½¿ç”¨æ–¹å¼ï¼Œæˆ‘ä»¬å°†åœ¨åé¢çš„ç³»åˆ—æ–‡ç« ä¸­é€æ¸ä¸ºæ‚¨å¸¦æ¥è®²è§£ã€‚</p>\n<h3>é…ç½®typescript</h3>\n<p><code>typescript</code>ç°åœ¨å·²ç»æˆä¸ºäº†å‰ç«¯å¿…å¤‡æŠ€èƒ½ä¹‹ä¸€ï¼Œå¤§é‡çš„é¡¹ç›®ä¹Ÿå¼€å§‹åŸºäº<code>typescript</code>è¿›è¡Œå¼€å‘ã€‚åœ¨ä½¿ç”¨<code>Vue2.0</code>çš„æ—¶å€™ï¼Œå› ä¸º<code>Vue2.0</code>æ²¡æœ‰å¯¹<code>typescript</code>è¿›è¡Œæ”¯æŒï¼Œæ‰€ä»¥ä½¿ç”¨<code>ts</code>å¼€å‘åŠŸèƒ½æ˜¾ç¤ºæœ‰äº›åˆ«æ‰­ã€‚ä½†åˆ°äº†<code>Vue3</code>ï¼Œå…¶è‡ªèº«æºç ä¾¿æ˜¯åŸºäº<code>ts</code>å¼€å‘çš„ï¼Œæ‰€ä»¥å¯¹<code>ts</code>å¤©ç”Ÿæœ‰ç€å¾ˆå¥½çš„æ”¯æŒã€‚ä½¿ç”¨<code>vite</code>é…ç½®<code>typescript</code>å¾ˆç®€å•ï¼Œåªéœ€è¦è¿›è¡Œä»¥ä¸‹å‡ æ­¥æ“ä½œ.</p>\n<ol>\n <li><p>å®‰è£… <code>typescript</code></p><pre><code class=\"shell\">yarn add typescript -D</code></pre></li>\n <li><p>åˆå§‹åŒ–<code>tsconfig.json</code></p><pre><code class=\"shell\"># ç„¶ååœ¨æ§åˆ¶å°æ‰§è¡Œä¸‹é¢å‘½ä»¤\nnpx tsc --init</code></pre></li>\n <li><p>å°†<code>main.js</code>ä¿®æ”¹ä¸º<code>main.ts</code>,åŒæ—¶å°†<code>index.html</code>é‡Œé¢çš„å¼•ç”¨ä¹Ÿä¿®æ”¹ä¸º<code>main.ts</code>, é€šè¿‡è¿˜éœ€è¦ä¿®æ”¹<code>App.vue</code>ä¸<code>HelloWorld.vue</code>æ–‡ä»¶ï¼Œä¿®æ”¹æ–¹å¼å¦‚ä¸‹</p><pre><code class=\"html\">&lt;!--å°† &lt;script&gt; ä¿®æ”¹ä¸º &lt;script lang=\"ts\"&gt;--&gt;\n&lt;script lang=\"ts\"&gt;\nimport HelloWorld from './components/HelloWorld.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    HelloWorld\n  }\n}\n&lt;/script&gt;\n</code></pre><p>ä¿®æ”¹å®Œä¹‹åï¼Œé‡å¯å°±å¯ä»¥è®¿é—®é¡¹ç›®äº†ã€‚è™½ç„¶è¿™æ ·é…ç½®æ˜¯å¯ä»¥äº†ï¼Œä½†æ˜¯æ‰“å¼€<code>main.ts</code>ä¼šå‘ç°<code>import App from App.vue</code>ä¼šæŠ¥é”™:<code> Cannot find module './App.vue' or its corresponding type declarations.</code>,è¿™æ˜¯å› ä¸ºç°åœ¨<code>ts</code>è¿˜æ²¡æœ‰è¯†åˆ«<code>vue</code>æ–‡ä»¶ï¼Œéœ€è¦è¿›è¡Œä¸‹é¢çš„é…ç½®:</p>\n  <ol>\n   <li>åœ¨é¡¹ç›®æ ¹ç›®å½•æ·»åŠ <code>shim.d.ts</code>æ–‡ä»¶</li>\n   <li><p>æ·»åŠ ä»¥ä¸‹å†…å®¹</p><pre><code class=\"javascript\">declare module \"*.vue\" {\n  import { Component } from \"vue\";\n  const component: Component;\n  export default component;\n}</code></pre></li>\n  </ol></li>\n</ol>\n<p>æ¥ä¸‹æ¥ä½ å°±å¯ä»¥å¼€å¼€å¿ƒå¿ƒçš„åœ¨ç»„ä»¶ä¸­ä½¿ç”¨<code>ts</code>äº†</p>\n<h3>é…ç½® <code>vue-router</code></h3>\n<p>åœ¨<code>Vue2.0</code>ä¸­æˆ‘ä»¬è·¯ç”±ä¸€èˆ¬ä¼šé€‰æ‹©ä½¿ç”¨<code>vue-router</code>,åœ¨<code>Vue3.0</code>ä¾ç„¶å¯ä»¥ä½¿ç”¨<code>vue-router</code>,ä¸è¿‡å’Œ<code>Vue3.0</code>ä¸€æ ·å½“å‰<code>vue-router</code>çš„ç‰ˆæœ¬ä¹Ÿæ˜¯<code>beta</code>ç‰ˆæœ¬ï¼Œåœ¨æœ¬æ–‡æ’°å†™çš„æ—¶å€™ï¼Œç‰ˆæœ¬æ˜¯<code>4.0.0-beta7</code></p>\n<h4>å®‰è£…<code>vue-router</code></h4>\n<p>å› ä¸ºå½“å‰<code>vue-router</code>é’ˆå¯¹<code>vue3.0</code>çš„ç‰ˆæœ¬è¿˜æ˜¯<code>beta</code>ç‰ˆæœ¬ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥é€šè¿‡<code>yarn add vue-router</code>è¿›è¡Œå®‰è£…ï¼Œè€Œæ˜¯éœ€è¦å¸¦ä¸Šç‰ˆæœ¬å·</p>\n<pre><code class=\"shell\">yarn add vue-router@4.0.0-beta.7</code></pre>\n<h4>é…ç½®vue-router</h4>\n<p>åœ¨é¡¹ç›®<code>src</code>ç›®å½•ä¸‹é¢æ–°å»º<code>router</code>ç›®å½•ï¼Œç„¶åæ·»åŠ <code>index.ts</code>æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹</p>\n<pre><code class=\"javascript\">import {createRouter, createWebHashHistory} from 'vue-router'\n\n// åœ¨ Vue-routeræ–°ç‰ˆæœ¬ä¸­ï¼Œéœ€è¦ä½¿ç”¨createRouteræ¥åˆ›å»ºè·¯ç”±\nexport default createRouter({\n  // æŒ‡å®šè·¯ç”±çš„æ¨¡å¼,æ­¤å¤„ä½¿ç”¨çš„æ˜¯hashæ¨¡å¼\n  history: createWebHashHistory(),\n  // è·¯ç”±åœ°å€\n  routes: []\n})</code></pre>\n<p>ä¸æ–°çš„<code>Vue3.0</code>åˆå§‹åŒ–æ–¹å¼å‘ç”Ÿå˜åŒ–ä¸€æ ·ï¼Œ<code>vue-router</code>çš„åˆå§‹åŒ–æ–¹å¼ä¹Ÿå‘ç”Ÿäº†å˜åŒ–ï¼Œå˜æˆäº†é€šè¿‡<code>createRouter</code>æ¥åˆå§‹åŒ–è·¯ç”±ã€‚</p>\n<h4>å°†<code>router</code>å¼•å…¥åˆ°<code>main.ts</code>ä¸­</h4>\n<p>ä¿®æ”¹<code>main.ts</code>æ–‡ä»¶å†…å®¹å¦‚ä¸‹</p>\n<pre><code class=\"javascript\">import { createApp } from 'vue'\nimport App from './App.vue'\nimport './index.css'\nimport router from './router/index'\n\nconst  app = createApp(App)\n// é€šè¿‡use å°† è·¯ç”±æ’ä»¶å®‰è£…åˆ° app ä¸­\napp.use(router)\napp.mount('#app')\n</code></pre>\n<h3>é…ç½® vuex</h3>\n<p>ä¸<code>vue-router</code>ä¸€æ ·ï¼Œæ–°çš„<code>vuex</code>å½“å‰ä¹Ÿå¤„äº<code>beta</code>ç‰ˆæœ¬ï¼Œå½“å‰ç‰ˆæœ¬æ˜¯<code>4.0.0-beta.4</code></p>\n<h4>å®‰è£…vuex</h4>\n<pre><code class=\"shell\">yarn add vuex@4.0.0-beta.4</code></pre>\n<h4>é…ç½®vuex</h4>\n<p>åœ¨é¡¹ç›®<code>src</code>ç›®å½•ä¸‹é¢æ–°å»º<code>store</code>ç›®å½•ï¼Œå¹¶æ·»åŠ <code>index.ts</code>æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹</p>\n<pre><code class=\"javascript\">import { createStore } from 'vuex'\n\ninterface State {\n  userName: string\n}\n\nexport default createStore({\n  state(): State {\n    return {\n      userName: \"å­å›\",\n    };\n  },\n});</code></pre>\n<h4>å¼•å…¥åˆ°<code>main.ts</code>ä¸­</h4>\n<pre><code class=\"javascript\">import { createApp } from 'vue'\nimport App from './App.vue'\nimport './index.css'\nimport router from './router/index'\nimport store from './store/index'\n\nconst  app = createApp(App)\napp.use(router)\napp.use(store)\napp.mount('#app')</code></pre>\n<h3>å¼€å‘TodoList</h3>\n<p>é€šè¿‡ä¸Šé¢çš„ä¸€ç³»åˆ—æ“ä½œï¼Œæˆ‘ä»¬çš„å¼€å‘ç¯å¢ƒå°±å·²ç»é…ç½®å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±é€šè¿‡æ–°çš„å¼€å‘ç¯å¢ƒå…ˆå¼€å‘ä¸€ä¸ª<code>TodoList</code>ï¼Œæ¥éªŒè¯ä¸€ä¸‹æ˜¯å¦æ­£å¸¸ã€‚</p>\n<h4>æ·»åŠ <code>todolist</code>é¡µé¢</h4>\n<ol>\n <li><p>é¦–å…ˆæˆ‘ä»¬å…ˆåœ¨<code>src</code>ç›®å½•ä¸‹é¢æ–°å»ºä¸€ä¸ª<code>views</code>ç›®å½•ï¼Œç„¶ååœ¨å…¶ä¸­æ–°å»ºæ–‡ä»¶<code>todo-list.vue</code>ï¼Œå¹¶ä¸ºæ–‡ä»¶æ·»åŠ ä»¥ä¸‹å†…å®¹</p><pre><code class=\"html\">\n&lt;template&gt;\n  &lt;div class=\"todo-list\"&gt;\n    &lt;div&gt;\n      &lt;label&gt;æ–°å¢å¾…åŠ&lt;/label&gt;\n       &lt;input v-model=\"state.todo\" @keyup.enter=\"handleAddTodo\"&gt;\n    &lt;/div&gt;\n    &lt;div&gt;\n      &lt;h3&gt;å¾…åŠåˆ—è¡¨({{todos.length}})&lt;/h3&gt;\n      &lt;ul&gt;\n        &lt;li v-for=\"item in todos\" :key=\"item.id\" @click=\"handleChangeStatus(item, true)\"&gt;\n          &lt;input type=\"checkbox\"&gt;\n          &lt;label&gt;{{item.text}}&lt;/label&gt;\n        &lt;/li&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n    &lt;div&gt;&lt;h3&gt;å·²åŠåˆ—è¡¨({{dones.length}})&lt;/h3&gt;&lt;/div&gt;\n    &lt;ul&gt;\n      &lt;li v-for=\"item in dones\" :key=\"item.id\" @click=\"handleChangeStatus(item, false)\"&gt;\n          &lt;input type=\"checkbox\" checked&gt;\n          &lt;label&gt;{{item.text}}&lt;/label&gt;\n        &lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n&lt;script lang=\"ts\"&gt;\n // åœ¨vue2ä¸­ data åœ¨vue3ä¸­ä½¿ç”¨ reactiveä»£æ›¿\nimport { reactive, computed } from 'vue'\nimport { useRouter } from 'vue-router'\nexport default {\n  // setupç›¸å½“äºvue2.0çš„ beforeCreateå’Œ createdï¼Œæ˜¯vue3æ–°å¢çš„ä¸€ä¸ªå±æ€§ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½åœ¨æ­¤å±æ€§ä¸­å®Œæˆ\n  setup(props, context) {\n    // é€šè¿‡reactive å¯ä»¥åˆå§‹åŒ–ä¸€ä¸ªå¯å“åº”çš„æ•°æ®ï¼Œä¸Vue2.0ä¸­çš„Vue.observerå¾ˆç›¸ä¼¼\n    const state = reactive({\n      todoList: [{\n        id: 1,\n        done: false,\n        text: 'åƒé¥­'\n      },{\n        id: 2,\n        done: false,\n        text: 'ç¡è§‰'\n      },{\n        id: 3,\n        done: false,\n        text: 'æ‰“è±†è±†'\n      }],\n      todo: ''\n    })\n    // ä½¿ç”¨è®¡ç®—å±æ€§ç”Ÿæˆå¾…åŠåˆ—è¡¨\n    const todos = computed(() =&gt; {\n      return state.todoList.filter(item =&gt; !item.done)\n    })\n\n    // ä½¿ç”¨è®¡ç®—å±æ€§ç”Ÿæˆå·²åŠåˆ—è¡¨\n    const dones = computed(() =&gt; {\n      return state.todoList.filter(item =&gt; item.done)\n    })\n\n    // ä¿®æ”¹å¾…åŠçŠ¶æ€\n    const handleChangeStatus = (item ,status) =&gt; {\n      item.done = status\n    }\n    \n    // æ–°å¢å¾…åŠ\n    const handleAddTodo = () =&gt; {\n      if(!state.todo) {\n        alert('è¯·è¾“å…¥å¾…åŠäº‹é¡¹')\n        return\n      }\n      state.todoList.push({\n        text: state.todo,\n        id: Date.now(),\n        done: false\n      })\n      state.todo = ''\n    }\n\n        // åœ¨Vue3.0ä¸­ï¼Œæ‰€æœ‰çš„æ•°æ®å’Œæ–¹æ³•éƒ½é€šè¿‡åœ¨setup ä¸­ return å‡ºå»ï¼Œç„¶ååœ¨templateä¸­ä½¿ç”¨\n    return {\n      state,\n      todos,\n      dones,\n      handleChangeStatus,\n      handleAddTodo\n    }\n  }\n}\n&lt;/script&gt;\n&lt;style scoped&gt;\n.todo-list{\n  text-align: center;\n}\n\n.todo-list ul li {\n  list-style: none;\n}\n&lt;/style&gt;</code></pre><h4>è°ƒæ•´è·¯ç”±</h4>\n  <ol>\n   <li><p>é¦–å…ˆå°†<code>App.vue</code>æ–‡ä»¶å†…å®¹ä¿®æ”¹ä¸º</p><pre><code class=\"vue\">&lt;template&gt;\n  &lt;router-view&gt;&lt;/router-view&gt;\n&lt;/template&gt;\n\n&lt;script lang=\"ts\"&gt;\n\nexport default {\n  name: 'App'\n}\n&lt;/script&gt;</code></pre></li>\n   <li><p>ç„¶åä¿®æ”¹ <code>router/index.ts</code>æ–‡ä»¶ï¼Œæ·»åŠ æ–°çš„è·¯ç”±</p><pre><code class=\"javascript\">import {createRouter, createWebHashHistory} from 'vue-router'\n\n// åœ¨ Vue-routeræ–°ç‰ˆæœ¬ä¸­ï¼Œéœ€è¦ä½¿ç”¨createRouteræ¥åˆ›å»ºè·¯ç”±\nexport default createRouter({\n  // æŒ‡å®šè·¯ç”±çš„æ¨¡å¼,æ­¤å¤„ä½¿ç”¨çš„æ˜¯hashæ¨¡å¼\n  history: createWebHashHistory(),\n  // è·¯ç”±åœ°å€\n  routes: [{\n    path: '/todolist',\n    // å¿…é¡»æ·»åŠ .vueåç¼€\n    component: () =&gt; import('../views/todo-list.vue')\n  }]\n})</code></pre><p>è¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡<code>http://localhost:3000/#/todolist</code>æ¥è®¿é—®<code>TodoList</code>äº†ï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src=\"https://segmentfault.com/img/remote/1460000023737675\" alt=\"\" title=\"\" /></p></li>\n  </ol></li>\n</ol>\n<h3>æ€»ç»“</h3>\n<p>åˆ°æ­¤ï¼Œæˆ‘ä»¬<code>Vue3.0</code>çš„å¼€å‘ç¯å¢ƒç®—æ˜¯æ­å»ºå®Œæˆäº†ï¼Œå½“ç„¶ç°åœ¨è¿˜æœ‰å¥½å¤šå¥½å¤šè¦å®Œå–„çš„ä¸œè¥¿ï¼Œæ¯”å¦‚æˆ‘ä»¬è¿˜éœ€è¦å»è°ƒæ•´ä¸€ä¸‹<code>typescript</code>çš„é…ç½®ï¼Œç„¶åæ·»åŠ <code>eslint</code>ç­‰ç­‰ã€‚åŒæ—¶å¦‚ä½•åœ¨ç»„ä»¶ä¸­è·³è½¬è·¯ç”±ï¼Œä½¿ç”¨<code>vuex</code>è¿˜æ²¡æœ‰å»è®²è§£ï¼Œä¸è¿‡è‡³å°‘æˆ‘ä»¬å·²ç»èµ·æ­¥äº†ï¼Œæ›´å¤šçš„å†…å®¹å°†ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­è®²åˆ°ã€‚æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ã€å‰ç«¯æœ‰çš„ç©ã€‘ï¼Œæ¬¢è¿å…³æ³¨åŠ æˆ‘å¥½å‹ï¼Œæˆ‘ä»¬ä¸€èµ·æ¢è®¨<code>Vue3.0</code></p>","descriptionType":"html","publishedDate":"Mon, 24 Aug 2020 04:16:41 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/remote/1460000023737674","linkMd5":"f6d9b255d764f38d4cfc647c5d61450c","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn78@2020_3/2020/08/24/23-08-23-064_68e17a2630a82d60.webp","destWidth":800,"destHeight":449,"sourceBytes":64842,"destBytes":31124,"author":"å­å›","articleImgCdnMap":{"https://segmentfault.com/img/remote/1460000023737674":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn78@2020_3/2020/08/24/23-08-23-064_68e17a2630a82d60.webp","https://segmentfault.com/img/remote/1460000023737673":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn1@2020_1/2020/08/24/23-08-33-510_28a02d81591a6ac2.webp","https://segmentfault.com/img/remote/1460000023737676":"https://cdn.jsdelivr.net/gh/myreaderx13/cdn9@2020_2/2020/08/24/23-08-33-492_e143eeeacb3d77c7.webp","https://segmentfault.com/img/remote/1460000023737675":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn6@2020_5/2020/08/24/23-08-33-208_54794e46f067943b.webp"},"publishedOrCreatedDate":1598310388557},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"æˆ‘åœ¨é˜¿é‡Œå†™ä»£ç å­¦ä¼šçš„å…­ä»¶äº‹","link":"https://segmentfault.com/a/1190000023655551","description":"<p><strong>ç®€ä»‹ï¼š</strong> ä»å›¢é˜Ÿçš„è§’åº¦æ¥çœ‹ï¼Œå†™å¥½ä»£ç æ˜¯ä¸€ä»¶éå¸¸æœ‰å¿…è¦çš„äº‹æƒ…ã€‚å¦‚ä½•å†™å‡ºå¹²å‡€ä¼˜é›…çš„ä»£ç æ˜¯ä¸ªå¾ˆå›°éš¾çš„è¯¾é¢˜ï¼Œæˆ‘æ²¡æœ‰æ‰¾åˆ°ä¸‡èƒ½çš„ solutionï¼Œæ›´å¤šçš„æ˜¯ä¸€äº› trade offï¼Œå¯ä»¥ç¨å¾®è®¨è®ºä¸€ä¸‹ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023655554\" alt=\"8.14å¤´å›¾.png\" title=\"8.14å¤´å›¾.png\" /></p>\n<p>å†™äº†å¤šå¹´çš„ä»£ç ï¼Œå§‹ç»ˆè§‰å¾—å¦‚ä½•å†™å‡ºå¹²å‡€ä¼˜é›…çš„ä»£ç å¹¶ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…ã€‚æŒ‰ 10000 å°æ—¶åˆ»æ„è®­ç»ƒçš„å®šç†ï¼Œå‡è®¾æ¯å¤© 8 å°æ—¶ï¼Œä¸€ä¸ªæœˆ 20 å¤©ï¼Œä¸€å¹´ 12 ä¸ªæœˆï¼Œå¤§æ¦‚ä¹Ÿéœ€è¦ 5 å¹´å·¦å³çš„æ—¶é—´æˆä¸ºå¤§å¸ˆã€‚å…¶å®æˆ‘ä»¬æ¯å¤©çš„å·¥ä½œä¸­çœŸæ­£ç”¨äºå†™ä»£ç çš„æ—¶é—´ä¸å¯èƒ½æœ‰ 8 ä¸ªå°æ—¶ï¼Œå¹¶ä¸”å¾ˆå¤šæ—¶å€™æ˜¯åœ¨å®Œæˆä»»åŠ¡ï¼Œåœ¨ä¸šåŠ¡å‹åŠ›å¾ˆå¤§çš„æ—¶å€™ï¼Œå¯èƒ½æƒ³è¦è¾¾åˆ°çš„ç›®æ ‡æ˜¯å¦‚ä½•å°½å¿«çš„ä½¿å¾—åŠŸèƒ½ work èµ·æ¥ï¼Œä»£ç æ˜¯å¦å¹²å‡€ä¼˜é›…éå¸¸å¯èƒ½æ²¡æœ‰èƒ½æ”¾åœ¨ç¬¬ä¸€ä¼˜å…ˆçº§ä¸Šï¼Œè€Œæ˜¯æ€ä¹ˆå¿«æ€ä¹ˆæ¥ã€‚</p>\n<p>åœ¨è¿™æ ·çš„æƒ…å†µä¸‹æ˜¯éå¸¸å®¹æ˜“æ¬ ä¸‹æŠ€æœ¯å€ºçš„ï¼Œæ—¶é—´é•¿äº†ï¼Œè¿™æ ·çš„ä»£ç åŸºæœ¬ä¸Šæ— æ³•ç»´æŠ¤ï¼Œåªèƒ½æ¨å€’é‡æ¥ï¼Œè¿™ä¸ªæˆæœ¬æ˜¯éå¸¸é«˜çš„ã€‚æ¬ å€ºè¦è¿˜ï¼Œåªæ˜¯è¿Ÿæ—©çš„é—®é¢˜ï¼Œå¹¶ä¸”ç­‰åˆ°è¦è¿˜çš„æ—¶å€™è¿˜è¦èµ”ä¸Šé¢å¤–çš„ä¸è²çš„åˆ©æ¯ã€‚è¿˜å€ºçš„æœ‰å¯èƒ½æ˜¯è‡ªå·±ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯åæ¥çš„ç»§ä»»è€…ï¼Œä½†éƒ½æ˜¯å›¢é˜Ÿåœ¨è¿˜å€ºã€‚æ‰€ä»¥ä»å›¢é˜Ÿçš„è§’åº¦æ¥çœ‹ï¼Œå†™å¥½ä»£ç æ˜¯ä¸€ä»¶éå¸¸æœ‰å¿…è¦çš„äº‹æƒ…ã€‚å¦‚ä½•å†™å‡ºå¹²å‡€ä¼˜é›…çš„ä»£ç æ˜¯ä¸ªå¾ˆå›°éš¾çš„è¯¾é¢˜ï¼Œæˆ‘æ²¡æœ‰æ‰¾åˆ°ä¸‡èƒ½çš„ solutionï¼Œæ›´å¤šçš„æ˜¯ä¸€äº› trade offï¼Œå¯ä»¥ç¨å¾®è®¨è®ºä¸€ä¸‹ã€‚</p>\n<h1>ä»£ç æ˜¯å†™ç»™äººçœ‹çš„è¿˜æ˜¯å†™ç»™æœºå™¨çœ‹çš„ï¼Ÿ</h1>\n<p>åœ¨å¤§éƒ¨åˆ†çš„æƒ…å†µä¸‹æˆ‘ä¼šè®¤ä¸ºä»£ç æ˜¯å†™ç»™äººçœ‹çš„ã€‚è™½ç„¶ä»£ç æœ€åçš„æ‰§è¡Œè€…æ˜¯æœºå™¨ï¼Œä½†æ˜¯å®é™…ä¸Šä»£ç æ›´å¤šçš„æ—¶å€™æ˜¯ç»™äººçœ‹çš„ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ä¸€æ®µä»£ç çš„ç”Ÿå‘½å‘¨æœŸï¼šå¼€å‘ --&gt;&nbsp;å•å…ƒæµ‹è¯• --&gt; Code Review --&gt; åŠŸèƒ½æµ‹è¯• --&gt; æ€§èƒ½æµ‹è¯• --&gt; ä¸Šçº¿ --&gt; è¿ç»´ã€Bug ä¿®å¤ --&gt; æµ‹è¯•ä¸Šçº¿ --&gt; é€€ä¼‘ä¸‹çº¿ã€‚å¼€å‘åˆ°ä¸Šçº¿çš„æ—¶é—´ä¹Ÿè®¸æ˜¯å‡ å‘¨æˆ–è€…å‡ ä¸ªæœˆï¼Œä½†æ˜¯çº¿ä¸Šè¿ç»´ã€bug ä¿®å¤çš„å‘¨æœŸå¯ä»¥æ˜¯å‡ å¹´ã€‚</p>\n<p>åœ¨è¿™å‡ å¹´çš„æ—¶é—´é‡Œé¢ï¼Œå‡ ä¹ä¸å¯èƒ½è¿˜æ˜¯åŸæ¥çš„ä½œè€…åœ¨ç»´æŠ¤äº†ã€‚ç»§ä»»è€…å¦‚ä½•èƒ½ç†è§£ä¹‹å‰çš„ä»£ç é€»è¾‘æ˜¯æå…¶å…³é”®çš„ï¼Œå¦‚æœä¸èƒ½ç»´æŠ¤ï¼Œåªèƒ½è‡ªå·±é‡æ–°åšä¸€å¥—ã€‚æ‰€ä»¥åœ¨é¡¹ç›®ä¸­æˆ‘ä»¬ç»å¸¸èƒ½è§åˆ°çš„æƒ…å†µå°±æ˜¯ï¼Œçœ‹åˆ°äº†å‰ä»»çš„ä»£ç ï¼Œéƒ½è§‰å¾—è¿™æ˜¯ä»€ä¹ˆåƒåœ¾ï¼Œå†™çš„ä¹±ä¸ƒå…«ç³Ÿï¼Œè¿˜æ˜¯æˆ‘è‡ªå·±é‡å†™ä¸€éå§ã€‚å°±ç®—æ˜¯åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦åˆ«äººæ¥ Code &nbsp;Reviewï¼Œå¦‚æœä»–ä»¬éƒ½çœ‹ä¸æ‡‚è¿™ä¸ªä»£ç ï¼Œæ€ä¹ˆæ¥åš Review å‘¢ã€‚è¿˜æœ‰ä½ ä¹Ÿä¸å¸Œæœ›åœ¨ä¼‘å‡çš„æ—¶å€™ï¼Œå› ä¸ºå…¶ä»–äººçœ‹ä¸æ‡‚ä½ çš„ä»£ç ï¼Œåªå¥½æ‰“ç”µè¯æ±‚åŠ©ä½ ã€‚è¿™ä¸ªæˆ‘å°è±¡æå…¶æ·±åˆ»ï¼Œè®°å¾—æˆ‘åœ¨å·¥ä½œä¸ä¹…çš„æ—¶å€™ï¼Œä¸€æ¬¡å›åˆ°äº†è€å®¶ä¼‘å‡ä¸­ï¼Œçªç„¶åŒäº‹æ‰“ç”µè¯æ¥äº†ï¼Œå‡ºç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œé—®æˆ‘è¯¥å¦‚ä½•è§£å†³ï¼Œå½“æ—¶ç”µè¯è¿˜è¦æ”¶æ¼«æ¸¸è´¹çš„ï¼Œéå¸¸è´µï¼Œä½†æ˜¯æˆ‘è¿˜ä¸å¾—ä¸æ”¯æŒç›´åˆ°è€—å…‰æˆ‘çš„ç”µè¯è´¹ã€‚</p>\n<p>æ‰€ä»¥<strong>ä»£ç ä¸»è¦è¿˜æ˜¯å†™ç»™äººçœ‹çš„ï¼Œæ˜¯æˆ‘ä»¬çš„äº¤æµçš„é€”å¾„</strong>ã€‚é‚£äº›éå¸¸å¥½çš„å¼€æºçš„é¡¹ç›®è™½ç„¶æœ‰æ–‡æ¡£ï¼Œä½†æ˜¯æ›´å¤šçš„æˆ‘ä»¬å…¶å®è¿˜æ˜¯çœ‹ä»–çš„æºç ï¼Œå¦‚æœå¼€æºé¡¹ç›®é‡Œé¢çš„ä»£ç å†™çš„å¾ˆéš¾è¯»ï¼Œè¿™ä¸ªé¡¹ç›®ä¹ŸåŸºæœ¬ä¸Šä¸ä¼šç«ã€‚å› ä¸ºä»£ç æ˜¯æˆ‘ä»¬å¼€å‘äººå‘˜äº¤æµçš„åŸºæœ¬é€”å¾„ï¼Œç”šè‡³å¯èƒ½å£å¤´è®¨è®ºä¸æ¸…æ¥šçš„äº‹æƒ…ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»£ç æ¥è¯´æ¸…æ¥šã€‚ä»£ç çš„å¯è¯»æ€§æˆ‘è§‰å¾—æ˜¯ç¬¬ä¸€ä½çš„ã€‚å„ä¸ªå…¬å¸ä¼°è®¡éƒ½æœ‰è‡ªå·±çš„ä»£ç è§„èŒƒï¼Œéµå¾ªç›¸å…³çš„è§„èŒƒä¿æŒä»£ç é£æ ¼çš„ç»Ÿä¸€æ˜¯ç¬¬ä¸€æ­¥ï¼ˆæ¨èè°·æ­Œä»£ç è§„èŒƒå’Œå¾®è½¯ä»£ç è§„èŒƒï¼‰ã€‚è§„èŒƒé‡Œä¸€èˆ¬éƒ½åŒ…æ‹¬äº†å¦‚ä½•è¿›è¡Œå˜é‡ã€ç±»ã€å‡½æ•°çš„å‘½åï¼Œå‡½æ•°è¦å°½é‡çŸ­å¹¶ä¸”ä¿æŒåŸå­æ€§ï¼Œä¸è¦åšå¤šä»¶äº‹æƒ…ï¼Œç±»çš„åŸºæœ¬è®¾è®¡çš„åŸåˆ™ç­‰ç­‰ã€‚å¦å¤–ä¸€ä¸ªå»ºè®®æ˜¯å¯ä»¥å¤šå‚è€ƒå­¦ä¹ ä¸€ä¸‹å¼€æºé¡¹ç›®ä¸­çš„ä»£ç ã€‚</p>\n<h1>KISS ï¼ˆKeep it simple and stupidï¼‰</h1>\n<p>ä¸€èˆ¬å¤§è„‘å·¥ä½œè®°å¿†çš„å®¹é‡å°±æ˜¯ 5-9 ä¸ªï¼Œå¦‚æœäº‹æƒ…è¿‡å¤šæˆ–è€…è¿‡äºå¤æ‚ï¼Œå¯¹äºå¤§éƒ¨åˆ†äººæ¥è¯´æ˜¯æ— æ³•ç›´æ¥ç†è§£å’Œå¤„ç†çš„ã€‚é€šå¸¸æˆ‘ä»¬éœ€è¦ä¸€äº›è¾…åŠ©æ‰‹æ®µæ¥å¤„ç†å¤æ‚çš„é—®é¢˜ï¼Œæ¯”å¦‚åšç¬”è®°ã€ç”»å›¾ï¼Œæœ‰ç‚¹ç±»ä¼¼äºåœ¨å†…å­˜ä¸å¤Ÿç”¨çš„æƒ…å†µä¸‹æˆ‘ä»¬å€Ÿç”¨äº†å¤–å­˜ã€‚</p>\n<p>å­¦ CS çš„åŒå­¦éƒ½çŸ¥é“ï¼Œå¤–å­˜çš„è®¿é—®é€Ÿåº¦è‚¯å®šä¸å¦‚å†…å­˜è®¿é—®é€Ÿåº¦ã€‚å¦å¤–ä¸€èˆ¬æ¥è¯´åœ¨é€»è¾‘å¤æ‚çš„æƒ…å†µä¸‹å‡ºé”™çš„å¯èƒ½è¦è¿œå¤§äºåœ¨ç®€å•çš„æƒ…å†µä¸‹ï¼Œåœ¨å¤æ‚çš„æƒ…å†µä¸‹ï¼Œä»£ç çš„åˆ†æ”¯å¯èƒ½æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬æ˜¯å¦èƒ½å¤Ÿå¯¹æ¯ç§æƒ…å†µéƒ½è€ƒè™‘åˆ°ä½ï¼Œè¿™äº›éƒ½æœ‰å›°éš¾ã€‚ä¸ºäº†ä½¿å¾—ä»£ç æ›´åŠ å¯é ï¼Œå¹¶ä¸”å®¹æ˜“ç†è§£ï¼Œæœ€å¥½çš„åŠæ³•è¿˜æ˜¯ä¿æŒä»£ç çš„ç®€å•ï¼Œåœ¨å¤„ç†ä¸€ä¸ªé—®é¢˜çš„æ—¶å€™å°½é‡ä½¿ç”¨ç®€å•çš„é€»è¾‘ï¼Œä¸è¦æœ‰è¿‡å¤šçš„å˜é‡ã€‚</p>\n<p>ä½†æ˜¯ç°å®çš„é—®é¢˜å¹¶ä¸ä¼šæ€»æ˜¯é‚£ä¹ˆç®€å•ï¼Œé‚£ä¹ˆå¦‚ä½•æ¥å¤„ç†å¤æ‚çš„é—®é¢˜å‘¢ï¼Ÿä¸å…¶å€Ÿç”¨å¤–å­˜ï¼Œæˆ‘æ›´åŠ å€¾å‘äºå¯¹å¤æ‚çš„é—®é¢˜è¿›è¡Œåˆ†å±‚æŠ½è±¡ã€‚ç½‘ç»œçš„é€šä¿¡æ˜¯ä¸€ä¸ªéå¸¸å¤æ‚çš„äº‹æƒ…ï¼Œä¸­é—´ä½¿ç”¨çš„è®¾å¤‡å¯ä»¥æœ‰æ— æ•°ç§ï¼ˆæ‰‹æœºï¼Œå„ç§ IOT è®¾å¤‡ï¼Œå°å¼æœºï¼Œlaptopï¼Œè·¯ç”±å™¨ï¼Œäº¤æ¢æœº...), OSI åè®®å¯¹å„å±‚åšäº†æŠ½è±¡ï¼Œæ¯ä¸€å±‚éœ€è¦å¤„ç†çš„æƒ…å†µå°±éƒ½å¤§å¤§åœ°ç®€åŒ–äº†ã€‚é€šè¿‡å¯¹å¤æ‚é—®é¢˜çš„åˆ†è§£ã€æŠ½è±¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨æ¯ä¸ªå±‚æ¬¡ä¸Šè¦è§£å†³å¤„ç†çš„é—®é¢˜å°±ç®€åŒ–äº†ã€‚å…¶å®ä¹Ÿç±»ä¼¼äºç®—æ³•ä¸­çš„ divide-and-conquerï¼Œ å¤æ‚çš„é—®é¢˜ï¼Œè¦å…ˆæ‹†è§£æ‰å˜æˆå°çš„é—®é¢˜ï¼Œä»è€Œæ¥ç®€åŒ–è§£å†³çš„æ–¹æ³•ã€‚</p>\n<p>KISS è¿˜æœ‰å¦å¤–ä¸€å±‚å«ä¹‰ï¼Œâ€œå¦‚æ— å¿…è¦ï¼Œå‹¿å¢å®ä½“â€ ï¼ˆå¥¥å¡å§†å‰ƒåˆ€åŸç†ï¼‰ã€‚CS ä¸­æœ‰ä¸€å¥ \"All problems in computer science can be solved by another level of indirection\"ï¼Œ ä¸ºäº†ç³»ç»Ÿçš„æ‰©å±•æ€§ï¼Œæ”¯æŒå°†æ¥çš„ä¸€äº›å¯èƒ½å­˜åœ¨çš„å˜åŒ–ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šå¼•å…¥ä¸€å±‚é—´æ¥å±‚ï¼Œæˆ–è€…å¢åŠ ä¸­é—´çš„ interfaceã€‚åœ¨åšè¿™äº›å†³å®šçš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦å¤šè€ƒè™‘ä¸€ä¸‹æ˜¯å¦çœŸçš„æœ‰å¿…è¦ã€‚å¢åŠ é¢å¤–çš„ä¸€å±‚ç»™æˆ‘ä»¬çš„å¥½å¤„å°±æ˜¯æ˜“äºæ‰©å±•ï¼Œä½†æ˜¯åŒæ—¶ä¹Ÿå¢åŠ äº†å¤æ‚åº¦ï¼Œä½¿å¾—ç³»ç»Ÿå˜å¾—æ›´åŠ ä¸å¯ç†è§£ã€‚å¯¹äºä»£ç æ¥è¯´ï¼Œå¾ˆå¯èƒ½æ˜¯æˆ‘è¿™é‡Œè°ƒç”¨äº†ä¸€ä¸ª APIï¼Œä¸çŸ¥é“å®é™…çš„è§¦å‘åœ¨å“ªé‡Œï¼Œå¯¹äºç†è§£å’Œè°ƒè¯•éƒ½å¯èƒ½å¢åŠ å›°éš¾ã€‚</p>\n<p>KISS æœ¬èº«å°±æ˜¯ä¸€ä¸ª trade offï¼Œè¦æŠŠå¤æ‚çš„é—®é¢˜é€šè¿‡æŠ½è±¡å’Œåˆ†æ‹†æ¥ç®€å•åŒ–ï¼Œä½†æ˜¯æ˜¯å¦éœ€è¦ä¸ºäº†ä¿ç•™å˜åŒ–åšæ›´å¤šçš„ indirection çš„æŠ½è±¡ï¼Œè¿™äº›éƒ½æ˜¯éœ€è¦ä»”ç»†è€ƒè™‘çš„ã€‚</p>\n<h1>DRY ï¼ˆDon't repeat yourself)</h1>\n<p>ä¸ºäº†å¿«é€Ÿåœ°å®ç°ä¸€ä¸ªåŠŸèƒ½ï¼ŒçŸ¥é“ä¹‹å‰æœ‰ç±»ä¼¼çš„ï¼ŒæŠŠä»£ç  copy è¿‡æ¥ä¿®æ”¹ä¸€ä¸‹å°±ç”¨ï¼Œå¯èƒ½æ˜¯æœ€å¿«çš„æ–¹æ³•ã€‚ä½†æ˜¯ copy ä»£ç ç»å¸¸æ˜¯å¾ˆå¤šé—®é¢˜å’Œ bug çš„æ ¹æºã€‚æœ‰ä¸€ç±»é—®é¢˜å°±æ˜¯ copy è¿‡æ¥çš„ä»£ç åŒ…å«äº†ä¸€äº›å…¶ä»–çš„é€»è¾‘ï¼Œå¯èƒ½å¹¶ä¸æ˜¯è¿™éƒ¨åˆ†éœ€è¦çš„ï¼Œæ‰€ä»¥å¯èƒ½æœ‰å†—ä½™ç”šè‡³ä¸€äº›é¢å¤–çš„é£é™©ã€‚</p>\n<p>å¦å¤–ä¸€ç±»é—®é¢˜å°±æ˜¯åœ¨ç»´æŠ¤çš„æ—¶å€™ï¼Œæˆ‘ä»¬å…¶å®ä¸çŸ¥é“ä¿®å¤äº†ä¸€ä¸ªåœ°æ–¹ä¹‹åï¼Œè¿˜æœ‰å¤šå°‘å…¶ä»–çš„åœ°æ–¹è¿˜éœ€è¦ä¿®å¤ã€‚åœ¨æˆ‘è¿‡å»çš„é¡¹ç›®ä¸­å°±å‡ºç°è¿‡è¿™æ ·çš„é—®é¢˜ï¼Œæœ‰ä¸ªé—®é¢˜æ˜æ˜ä¹‹å‰åšäº†ä¿®å¤ï¼Œè¿‡å‡ å¤©å¦å¤–ä¸€ä¸ªå®¢æˆ·åˆæäº†ç±»ä¼¼çš„é—®é¢˜å‡ºç°çš„å¦å¤–çš„è·¯å¾„ä¸Šã€‚ç›¸åŒçš„é€»è¾‘è¦å°½é‡åªå‡ºç°åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œè¿™æ ·æœ‰é—®é¢˜çš„æ—¶å€™ä¹Ÿå°±å¯ä»¥ä¸€æ¬¡æ€§åœ°ä¿®å¤ã€‚è¿™ä¹Ÿæ˜¯ä¸€ç§æŠ½è±¡ï¼Œå¯¹äºç›¸åŒçš„é€»è¾‘ï¼ŒæŠ½è±¡åˆ°ä¸€ä¸ªç±»æˆ–è€…ä¸€ä¸ªå‡½æ•°ä¸­å»ï¼Œè¿™æ ·ä¹Ÿæœ‰åˆ©äºä»£ç çš„å¯è¯»æ€§ã€‚</p>\n<h1>æ˜¯å¦è¦å†™æ³¨é‡Š</h1>\n<p>ä¸ªäººçš„è§‚ç‚¹æ˜¯å¤§éƒ¨åˆ†çš„ä»£ç å°½é‡ä¸è¦æ³¨é‡Šã€‚ä»£ç æœ¬èº«å°±æ˜¯ä¸€ç§äº¤æµè¯­è¨€ï¼Œå¹¶ä¸”ä¸€èˆ¬æ¥è¯´ç¼–ç¨‹è¯­è¨€æ¯”æˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨çš„å£è¯­æ›´åŠ çš„ç²¾ç¡®ã€‚åœ¨ä¿æŒä»£ç é€»è¾‘ç®€å•çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨è‰¯å¥½çš„å‘½åè§„èŒƒï¼Œä»£ç æœ¬èº«å°±å¾ˆæ¸…æ™°å¹¶ä¸”å¯èƒ½è¯»èµ·æ¥å°±å·²ç»æ˜¯ä¸€ç¯‡è‰¯å¥½çš„æ–‡ç« ã€‚ç‰¹åˆ«æ˜¯ OO çš„è¯­è¨€çš„è¯ï¼Œæœ¬èº« objectï¼ˆåè¯ï¼‰åŠ  operationï¼ˆä¸€èˆ¬ç”¨åŠ¨è¯ï¼‰å°±å·²ç»å¯ä»¥è¯´æ˜æ˜¯åœ¨åšä»€ä¹ˆäº†ã€‚é‡å¤ä¸€ä¸‹æŠŠè¿™ä¸ªæ“ä½œçš„åè¯æ”¾å…¥æ³¨é‡Šå¹¶ä¸ä¼šå¢åŠ ä»£ç çš„å¯è¯»æ€§ã€‚å¹¶ä¸”åœ¨åç»­çš„ç»´æŠ¤ä¸­ï¼Œä¼šå‡ºç°ä¿®æ”¹äº†ä»£ç ï¼Œå´å¹¶ä¸ä¿®æ”¹æ³¨é‡Šçš„æƒ…å†µå‡ºç°ã€‚åœ¨æˆ‘åšçš„å¾ˆå¤š Code Review ä¸­æˆ‘éƒ½çœ‹åˆ°è¿‡è¿™æ ·çš„æƒ…å†µã€‚å°½é‡æŠŠä»£ç å†™çš„å¯ä»¥ç†è§£ï¼Œè€Œä¸æ˜¯é€šè¿‡æ³¨é‡Šæ¥ç†è§£ã€‚</p>\n<p>å½“ç„¶æˆ‘å¹¶ä¸æ˜¯åå¯¹æ‰€æœ‰çš„æ³¨é‡Šï¼Œåœ¨å…¬å¼€çš„ API ä¸Šæ˜¯éœ€è¦æ³¨é‡Šçš„ï¼Œåº”è¯¥åˆ—å‡º API çš„å‰ç½®å’Œåç½®æ¡ä»¶ï¼Œè§£é‡Šè¯¥å¦‚ä½•ä½¿ç”¨è¿™ä¸ª APIï¼Œè¿™æ ·ä¹Ÿå¯ä»¥ç”¨äºè‡ªåŠ¨äº§å“ API çš„æ–‡æ¡£ã€‚åœ¨ä¸€äº›ç‰¹æ®Šä¼˜åŒ–é€»è¾‘å’Œè´Ÿè´£ç®—æ³•çš„åœ°æ–¹åŠ ä¸Šè¿™äº›é€»è¾‘å’Œç®—æ³•çš„è§£é‡Šè¿˜æ˜¯éå¸¸æœ‰å¿…è¦çš„ã€‚</p>\n<h1>ä¸€æ¬¡åšå¯¹ï¼Œä¸è¦ç›¸ä¿¡ä»¥åä¼š Refactoring</h1>\n<p>é€šå¸¸æ¥è¯´åœ¨ä»£ç ä¸­å†™ä¸Š TODOï¼Œç­‰ç€ä»¥åå†æ¥ refactoring æˆ–è€…æ”¹è¿›ï¼ŒåŸºæœ¬ä¸Šå°±ä¸ä¼šå†æœ‰ä»¥åäº†ã€‚æˆ‘ä»¬å¯ä»¥å»æˆ‘ä»¬çš„ä»£ç åº“é‡Œé¢æœç´¢ä¸€ä¸‹ TODOï¼Œçœ‹çœ‹æœ‰å¤šå°‘ï¼Œå¹¶ä¸”æœ‰å¤šå°‘æ˜¯å¤šå°‘å¹´å‰çš„ï¼Œæˆ‘ç›¸ä¿¡è¿™ä¸ªç»“æœä¼šè®©ä½ å¾ˆæƒŠè®¶ï¼ˆæ¬¢è¿å¤§å®¶ç•™è¨€åˆ†äº«ä½ æŸ¥æ‰¾ä¹‹åçš„ç»“æœï¼‰ã€‚</p>\n<p>å°½é‡ä¸€æ¬¡å°±åšå¯¹ï¼Œä¸è¦ç›¸ä¿¡ä»¥åè¿˜ä¼šå›æ¥æŠŠä»£ç  refactoring å¥½ã€‚äººéƒ½æ˜¯æœ‰æƒ°æ€§çš„ï¼Œä¸€æ—¦å®Œæˆäº†å½“å‰çš„äº‹æƒ…ï¼Œmove on ä¹‹åå†å›æ¥å¤„ç†è¿™äº›æ¦‚ç‡å°±éå¸¸å°äº†ï¼Œé™¤éä¸‹æ¬¡çœŸçš„éœ€è¦ä¿®æ”¹è¿™äº›ä»£ç ã€‚å¦‚æœè¯´ä¸ä¼šå†å›æ¥ï¼Œé‚£ä¹ˆè¿™ä¸ª TODO ä¹Ÿæ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ã€‚å¦‚æœçœŸçš„éœ€è¦ï¼Œå°±ä¸è¦ç•™ä¸‹è¿™ä¸ªé—®é¢˜ã€‚æˆ‘è§è¿‡æœ‰çš„äººç•™ä¸‹äº†ä¸€ä¸ª TODOï¼Œthrow äº†ä¸€ä¸ª not implemented çš„ exceptionï¼Œç„¶åå‡ å¤©ä¹‹åå…¶ä»–åŒå­¦æŠŠè¿™ä¸ªä»£ç å¸¦ä¸Šçº¿äº†ï¼Œç›´æ¥æŒ‚æ‰çš„æƒ…å†µã€‚å°½é‡ä¸è¦ TODO, ä¸€æ¬¡åšå¥½ã€‚</p>\n<h1>æ˜¯å¦è¦å†™å•å…ƒæµ‹è¯•ï¼Ÿ</h1>\n<p>ä¸ªäººçš„è§‚ç‚¹æ˜¯å¿…é¡»ï¼Œé™¤éä½ åªæ˜¯åš prototype æˆ–è€…å¿«é€Ÿè¿­ä»£æ‰”æ‰çš„ä»£ç ã€‚</p>\n<blockquote>\n Unit tests are typically automated tests written and run by software developers to ensure that a section of an application (known as the \"unit\") meets its design and behaves as intended. In procedural programming, a unit could be an entire module, but it is more commonly an individual function or procedure. In object-oriented programming, a unit is often an entire interface, such as a class, but could be an individual method.&nbsp;\n <p>&nbsp;From Wikipedia</p>\n</blockquote>\n<p>å•å…ƒæµ‹è¯•æ˜¯ä¸ºäº†ä¿è¯æˆ‘ä»¬å†™å‡ºçš„ä»£ç ç¡®å®æ˜¯æˆ‘ä»¬æƒ³è¦è¡¨è¾¾çš„é€»è¾‘ã€‚å½“æˆ‘ä»¬çš„ä»£ç è¢«é›†æˆåˆ°å¤§é¡¹ç›®ä¸­çš„æ—¶å€™ï¼Œä¹‹åçš„é›†æˆæµ‹è¯•ã€åŠŸèƒ½æµ‹è¯•ç”šè‡³ e2e çš„æµ‹è¯•ï¼Œéƒ½ä¸å¯èƒ½è¦†ç›–åˆ°æ¯ä¸€è¡Œçš„ä»£ç äº†ã€‚å¦‚æœå•å…ƒæµ‹è¯•åšçš„ä¸å¤Ÿï¼Œå…¶å®å°±æ˜¯åœ¨ä»£ç é‡Œé¢ç•™ä¸‹ä¸€äº›è‡ªå·±éƒ½ä¸çŸ¥é“çš„é»‘æ´ï¼Œå“ªå¤©è°ƒç”¨æ–¹æ”¹äº†ä¸€äº›ä¸œè¥¿ï¼Œèµ°åˆ°äº†ä¸€ä¸ªä¸å¸¸ç”¨çš„åˆ†æ”¯å¯èƒ½å°±æŒ‚æ‰äº†ã€‚æˆ‘ä¹‹å‰å¸¦çš„é¡¹ç›®ä¸­å°±å‡ºç°è¿‡ç±»ä¼¼çš„æƒ…å†µï¼Œä»£ç å·²ç»ä¸Šçº¿å‡ å¹´äº†ï¼Œæœ‰ä¸€æ¬¡ç¨å¾®æ”¹äº†ä¸€ä¸‹è°ƒç”¨æ–¹çš„å‚æ•°ï¼Œè§‰å¾—æ˜¯ä¸ªå°æ”¹åŠ¨ï¼Œä½†æ˜¯ä¸Šçº¿å°±æŒ‚äº†ï¼Œå°±æ˜¯å› ä¸ºé‡åˆ°äº†ä¹‹å‰æ ¹æœ¬æ²¡æœ‰äººæµ‹è¯•è¿‡çš„åˆ†æ”¯ã€‚å•å…ƒæµ‹è¯•å°±æ˜¯è¦ä¿è¯æˆ‘ä»¬è‡ªå·±å†™çš„ä»£ç æ˜¯æŒ‰ç…§æˆ‘ä»¬å¸Œæœ›çš„é€»è¾‘å®ç°çš„ï¼Œéœ€è¦å°½é‡çš„åšåˆ°æ¯”è¾ƒé«˜çš„è¦†ç›–ï¼Œç¡®ä¿æˆ‘ä»¬è‡ªå·±çš„ä»£ç é‡Œé¢æ²¡æœ‰ç•™ä¸‹ä»€ä¹ˆé»‘æ´ã€‚å…³äºæµ‹è¯•ï¼Œæˆ‘æƒ³å•ç‹¬å¼€ä¸€ç¯‡è®¨è®ºï¼Œæ‰€ä»¥å°±å…ˆç®€å•èŠåˆ°è¿™é‡Œã€‚</p>\n<p>è¦å†™å¥½ä»£ç ç¡®å®æ˜¯å·²ç»éå¸¸ä¸å®¹æ˜“çš„äº‹æƒ…ï¼Œéœ€è¦è€ƒè™‘æ­£ç¡®æ€§ã€å¯è¯»æ€§ã€é²æ£’æ€§ã€å¯æµ‹è¯•æ€§ã€å¯ä»¥æ‰©å±•æ€§ã€å¯ä»¥ç§»æ¤æ€§ã€æ€§èƒ½ã€‚å‰é¢è®¨è®ºçš„åªæ˜¯ä¸ªäººè§‰å¾—æ¯”è¾ƒé‡è¦çš„å…¥é—¨çš„ä¸€äº›ç‚¹ï¼Œæƒ³è¦å†™å¥½ä»£ç éœ€è¦ç»è¿‡åˆ»æ„åœ°è€ƒè™‘å’Œç»ƒä¹ æ‰èƒ½çœŸæ­£è¾¾åˆ°ç›®æ ‡ï¼</p>","descriptionType":"html","publishedDate":"Mon, 17 Aug 2020 05:35:10 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/remote/1460000023655554","linkMd5":"5043732a2558bb2fe1d74251745d70bf","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn9@2020_4/2020/08/24/23-08-23-117_4774f58479cda1db.webp","destWidth":800,"destHeight":458,"sourceBytes":333627,"destBytes":23424,"author":"é˜¿é‡ŒæŠ€æœ¯","articleImgCdnMap":{"https://segmentfault.com/img/remote/1460000023655554":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn9@2020_4/2020/08/24/23-08-23-117_4774f58479cda1db.webp"},"publishedOrCreatedDate":1598310388564},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"ç¬¬å…«ä»£å°å†°å¹´åº¦å‘å¸ƒä¼šå¬å¼€ï¼Œå¼€å¯å°å†°æ™ºèƒ½ç”Ÿæ¶¯çš„ç¬¬äºŒå¹•","link":"https://segmentfault.com/a/1190000023714011","description":"<p><img src=\"https://segmentfault.com/img/bVbLFeR\" alt=\"ç¬¬å…«ä»£å°å†°å¹´åº¦å‘å¸ƒä¼šå¬å¼€ï¼Œå¼€å¯å°å†°æ™ºèƒ½ç”Ÿæ¶¯çš„ç¬¬äºŒå¹•\" title=\"ç¬¬å…«ä»£å°å†°å¹´åº¦å‘å¸ƒä¼šå¬å¼€ï¼Œå¼€å¯å°å†°æ™ºèƒ½ç”Ÿæ¶¯çš„ç¬¬äºŒå¹•\" /></p>\n<p>2020å¹´8æœˆ20æ—¥ï¼Œå°å†°å…¬å¸ã€rinnaæ ªå¼ä¼šç¤¾åŠå¾®è½¯ï¼ˆäºšæ´²ï¼‰äº’è”ç½‘å·¥ç¨‹é™¢åœ¨åŒ—äº¬è”åˆä¸¾è¡Œäº†ç¬¬å…«ä»£å°å†°å¹´åº¦å‘å¸ƒä¼šã€‚å°å†°å…¬å¸è‘£äº‹é•¿ã€åŸå¾®è½¯å…¨çƒæ‰§è¡Œå‰¯æ€»è£æ²ˆå‘æ´‹åšå£«ä¸å¾®è½¯å…¨çƒèµ„æ·±å‰¯æ€»è£ã€å¾®è½¯ï¼ˆäºšæ´²ï¼‰äº’è”ç½‘å·¥ç¨‹é™¢é™¢é•¿ç‹æ°¸ä¸œåšå£«ä¸»æŒäº†æœ¬æ¬¡å‘å¸ƒä¼šã€‚</p>\n<p>æœ¬æ¬¡å¤§ä¼šä¸»è¦å›´ç»•ä¸‰éƒ¨åˆ†å†…å®¹ï¼š</p>\n<p>ç¬¬ä¸€ï¼Œäººå·¥æ™ºèƒ½æ—¶ä»£ï¼Œæˆ‘ä»¬å¯¹æœªæ¥çš„åˆ¤æ–­å’Œæƒ³æ³•</p>\n<p>ç¬¬äºŒï¼Œå°å†°äººå·¥æ™ºèƒ½æ–¹é¢æ ¸å¿ƒæŠ€æœ¯çš„è¿›å±•</p>\n<p>ç¬¬ä¸‰ï¼Œæ–°äº§å“å‘å¸ƒ</p>\n<p>å€¼å¾—å…³æ³¨çš„æ˜¯å°å†°å·²ç»å­¦ä¼šäº†ç”»ç”»ï¼ç»è¿‡å°å†°å›¢é˜Ÿäººå·¥æ™ºèƒ½å’Œç¾é™¢è€å¸ˆçš„å…±åŒåŠªåŠ›ï¼Œå¥¹å­¦ä¼šäº†æ€ä¹ˆæ¥ç»˜ç”»ï¼Œå¹¶ä¸”å¥¹èƒ½å¤Ÿæ¯”è¾ƒé«˜è´¨é‡çš„ç”Ÿäº§ç»˜ç”»ä½œå“ï¼Œå…¶ä¸­åŒ…æ‹¬å†å²ä¸Š7ä¸ªæµæ´¾ã€‚ä¹Ÿå°±æ˜¯è¯´å°å†°å·²ç»çªç ´äº†ä¼ ç»Ÿçš„æ¡†æ¶ï¼Œå¼€å¯äº†äººå·¥æ™ºèƒ½çš„ç¬¬äºŒå¹•ã€‚</p>\n<p>å°å†°æœ‰ä¸€ä¸ªæœªæ¥äº¤æµçš„æ¡†æ¶ï¼Œå¥¹æ˜¯èƒ½å¤Ÿæ”¯æŒä¸°å¯Œå¤šå½©ã€åƒåƒä¸‡ä¸‡çš„äººå·¥æ™ºèƒ½ï¼Œæ‰€ä»¥å¥¹ä¸ä»…ä»…åªæ˜¯æˆ‘ä»¬çœ‹åˆ°çš„è¿™æ ·ä¸€ä¸ªå°å†°ï¼Œä¸€ä¸ªå°‘å¥³çš„å½¢è±¡ï¼Œè¿™ä¸ªå°‘å¥³çš„å½¢è±¡åªæ˜¯è¿™ä¸ªæ¡†æ¶æ”¯æŒçš„ä¸€ä¸ªæ ·æ¿ï¼Œå¯ä»¥è®©å¤§å®¶æ¥ä½“éªŒï¼Œæ‰€ä»¥åœ¨è¿‡å»æ¯ä¸€ä»£å°å†°ä¸Šï¼Œå°å†°å›¢é˜Ÿä¸€ç›´åŠªåŠ›è®©è¿™ä¸ªæ¡†æ¶èƒ½å¤Ÿæ›´åŠ å®Œå–„ã€‚</p>\n<h2>ä»ç¬¬ä¸€ä»£åˆ°ç¬¬å…«ä»£çš„æ²¿é©</h2>\n<p>å°å†°æ˜¯é¢å‘æ–°äº¤äº’å½¢å¼çš„å®Œæ•´äººå·¥æ™ºèƒ½æŠ€æœ¯æ¡†æ¶ï¼Œä¹Ÿæ˜¯ç›®å‰å…¨çƒèŒƒå›´å†…æ‰¿è½½äº¤äº’é‡æœ€å¤§çš„äººå·¥æ™ºèƒ½ç³»ç»Ÿï¼Œå å…¨çƒäº¤äº’æ€»é‡60%ä»¥ä¸Šã€‚è¯¥é¡¹ç›®äº2013å¹´åº•åœ¨å¾®è½¯ï¼ˆäºšæ´²ï¼‰äº’è”ç½‘å·¥ç¨‹é™¢ç«‹é¡¹ï¼Œé‡‡å–ä»£é™…æ›´æ–°çš„æ–¹å¼ï¼Œé€å¹´å®Œå–„å…¶åŸºç¡€æ¡†æ¶ç»“æ„ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/bVbLFfh\" alt=\"ç¬¬å…«ä»£å°å†°å¹´åº¦å‘å¸ƒä¼šå¬å¼€ï¼Œå¼€å¯å°å†°æ™ºèƒ½ç”Ÿæ¶¯çš„ç¬¬äºŒå¹•\" title=\"ç¬¬å…«ä»£å°å†°å¹´åº¦å‘å¸ƒä¼šå¬å¼€ï¼Œå¼€å¯å°å†°æ™ºèƒ½ç”Ÿæ¶¯çš„ç¬¬äºŒå¹•\" /></p>\n<p>2014å¹´5æœˆ29æ—¥ï¼Œå°å†°æ­£å¼æ¨å‡ºç¬¬ä¸€ä»£äº§å“ï¼Œä»¥å¯¹è¯å¼èŠå¤©æœºå™¨äººå½¢å¼è¿…é€Ÿç§¯ç´¯è®­ç»ƒæ•°æ®ã€‚å…¶åï¼Œç¬¬äºŒä»£äº§å“å®Œæˆäº†è·¨å¹³å°éƒ¨ç½²çš„äº¤äº’æ¶æ„ã€‚ç¬¬ä¸‰ä»£äº§å“å°†äº¤äº’ä»æ–‡æœ¬æ‰©å……è‡³å¤šæ¨¡æ€ï¼Œè¿›ä¸€æ­¥ç§¯ç´¯å¤šæ¨¡æ€è®­ç»ƒæ•°æ®ã€‚ä»ç¬¬å››ä»£å°å†°å¼€å§‹ï¼Œäº¤äº’æ€»é‡ç¨³å±…å…¨çƒç¬¬ä¸€å¹¶ä¿æŒè‡³ä»Šï¼ŒåŒæ—¶å‘å¸ƒäº†å…¨åŒå·¥è¯­éŸ³äº¤äº’æ„Ÿå®˜ã€‚ç¬¬äº”ä»£å°å†°é‡‡ç”¨Dual AIæˆ˜ç•¥ï¼Œå¤§å¹…åº¦æ‰©å±•è·¨å¹³å°è¦†ç›–çš„è§„æ¨¡ï¼Œè‡³20ä½™ä¸ªä¸»æµå¹³å°ï¼Œå¹¶æˆä¸ºä¸­å›½å¸‚åœºä¸Šæ¶µç›–äº†åä¸ºã€å°ç±³ã€OPPOã€vivoç­‰æ™ºèƒ½æ‰‹æœºåŠç¡¬ä»¶çš„å”¯ä¸€çš„è·¨å¹³å°äººå·¥æ™ºèƒ½ã€‚ç¬¬å…­ä»£å°å†°å®Œæˆäº†æ¡†æ¶è¿­ä»£ç›®æ ‡ï¼Œä»ç¬¬ä¸ƒä»£å¼€å§‹æ¨å‡ºå„ç±»æ¡†æ¶å·¥å…·ï¼Œä»¥å¸®åŠ©åˆ›å»ºç¬¬ä¸‰æ–¹äººå·¥æ™ºèƒ½äº§å“ï¼Œå¹¶æ‰¿è½½å…¶å„ç±»äº¤äº’ã€‚</p>\n<p>ç›®å‰ï¼Œé™¤ä¸­å›½å°å†°åŠæ—¥æœ¬å‡›èœï¼ˆRinnaï¼‰ç¬¬ä¸€æ–¹äººå·¥æ™ºèƒ½äº¤äº’ä¸»ä½“å¤–ï¼Œå°å†°æ¡†æ¶è¿˜æ”¯æ’‘äº†ä¸­å›½åŠæ—¥æœ¬100ä½™ä¸ªç¬¬ä¸‰æ–¹å“ç‰Œçš„äº¤äº’ä¸»ä½“ï¼ˆå¦‚è½¯é“¶Pepperï¼‰ã€‚åœ¨ä¸ªäººç”¨æˆ·é¢†åŸŸï¼Œç”±å°å†°æ¡†æ¶åº”ç”¨æˆ·éœ€æ±‚åˆ›é€ å¹¶æä¾›äº¤äº’çš„äººå·¥æ™ºèƒ½ä¸»ä½“ï¼ˆè™šæ‹Ÿäººç±»ï¼‰ï¼Œåœ¨å…¬æµ‹é˜¶æ®µå·²è¶…è¿‡100ä¸‡ä¸ªã€‚</p>\n<p>ä»ç¬¬ä¸ƒä»£å°å†°å¼€å§‹ï¼Œåœ¨å°šæœªç»„å»ºæ­£å¼é”€å”®å›¢é˜Ÿçš„å•†ä¸šåŒ–è¯•æ°´é˜¶æ®µï¼Œå°å†°æ”¶å…¥å·²è¶…è¿‡1äº¿å…ƒäººæ°‘å¸ã€‚ä¸ºåŠ å¿«å°å†°äº§å“çº¿çš„æœ¬åœŸåˆ›æ–°æ­¥ä¼ï¼Œä¿ƒè¿›å°å†°å•†ä¸šç”Ÿæ€ç¯å¢ƒçš„å®Œå–„ï¼Œ2020å¹´7æœˆ13æ—¥ï¼Œå¾®è½¯å®£å¸ƒå°†å°å†°ä¸šåŠ¡åˆ†æ‹†ä¸ºç‹¬ç«‹å…¬å¸è¿è¥ï¼Œå¹¶å§”ä»»åŸå¾®è½¯å…¨çƒæ‰§è¡Œå‰¯æ€»è£æ²ˆå‘æ´‹åšå£«ä¸ºè‘£äº‹é•¿ï¼ŒåŸå¾®è½¯ï¼ˆäºšæ´²ï¼‰äº’è”ç½‘å·¥ç¨‹é™¢å‰¯é™¢é•¿æç¬›ä¸ºé¦–å¸­æ‰§è¡Œå®˜ï¼Œé™ˆæ¹›ä¸ºæ—¥æœ¬åˆ†éƒ¨æ€»ç»ç†ã€‚é¢„è®¡æ‰€æœ‰ç›¸å…³å·¥ä½œå°†äºä»Šå¹´æ™šäº›æ—¶å€™å®Œæˆã€‚</p>\n<h2>å°å†°æ¡†æ¶ä¸é¢å‘æœªæ¥çš„æ–°äº¤äº’å½¢æ€</h2>\n<p>äº¤äº’æ˜¯äººç±»ç¤¾ä¼šå‘å±•çš„é‡è¦é©±åŠ¨åŠ›ã€‚æ¯å¤©éƒ½åœ¨å‘ç”Ÿçš„æ•°ä»¥åƒäº¿æ¬¡è®¡çš„äº¤äº’ï¼Œéšç§»åŠ¨äº’è”ç½‘çš„è¿…é€Ÿå‘å±•ï¼Œå·²è¿›å…¥æ˜æ˜¾ç“¶é¢ˆï¼Œè¡¨ç°ä¸ºâ€œæµé‡çº¢åˆ©æ¶ˆå¤±â€ç­‰ã€‚è€Œç°æœ‰çš„ä¸¤ç§äº¤äº’å½¢å¼ï¼šäººäººäº¤äº’ä¸äººæœºäº¤äº’ï¼Œå¯é€šè¿‡äººå·¥æ™ºèƒ½æŠ€æœ¯åŠ ä»¥èåˆï¼Œä»è€Œåœ¨å®ç°äººäººäº¤äº’ä¿¡ä»»çº½å¸¦å’Œé«˜è½¬åŒ–ç‡çš„åŒæ—¶ï¼Œä¿æœ‰äººæœºäº¤äº’çš„é«˜å¹¶å‘ç‡ç‰¹ç‚¹ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/bVbLFfq\" alt=\"ç¬¬å…«ä»£å°å†°å¹´åº¦å‘å¸ƒä¼šå¬å¼€ï¼Œå¼€å¯å°å†°æ™ºèƒ½ç”Ÿæ¶¯çš„ç¬¬äºŒå¹•\" title=\"ç¬¬å…«ä»£å°å†°å¹´åº¦å‘å¸ƒä¼šå¬å¼€ï¼Œå¼€å¯å°å†°æ™ºèƒ½ç”Ÿæ¶¯çš„ç¬¬äºŒå¹•\" /></p>\n<p>ä¸Šè¿°èåˆä¾èµ–äºå°å†°æ¡†æ¶æˆ–å…¶ä»–ç±»ä¼¼çš„å®Œæ•´äººå·¥æ™ºèƒ½æ¡†æ¶ä½“ç³»ï¼Œå¯ä»¥åœ¨å„ç§å¤æ‚çš„åœºæ™¯ä¸­å®ç°é«˜åº¦æ‹Ÿäººçš„äº¤äº’ã€‚éšç€å¯¹ç°æœ‰äº¤äº’ç“¶é¢ˆçš„ä¸æ–­çªç ´ï¼Œæ–°å½¢å¼çš„äººå·¥æ™ºèƒ½äº¤äº’å°†æ— å¤„ä¸åœ¨ï¼Œå¯¹äººç±»ç¤¾ä¼šåŠå•†ä¸šè¡Œä¸ºäº§ç”Ÿæ·±è¿œå½±å“ã€‚</p>\n<h2>æœ¬æ¬¡å‘å¸ƒä¼šä¸»è¦æŠ«éœ²çš„æ–°æŠ€æœ¯</h2>\n<p>ä¸ä¸»è¦åŒè¡Œä¸šè€…ç›¸æ¯”ï¼Œå°å†°æ¡†æ¶æœ€å¤§çš„å·®å¼‚åŒ–åœ¨äºï¼Œå®ƒæ˜¯ä¸€ä¸ªâ€œsession-orientedâ€çš„äººå·¥æ™ºèƒ½æ¡†æ¶ï¼Œæ¡†æ¶ä¸­çš„å„éƒ¨åˆ†æŠ€æœ¯å…±åŒä¸ºâ€œäº¤äº’å…¨ç¨‹â€ç›®æ ‡æœåŠ¡ï¼Œè€Œä¸ä»…ä»…å…³æ³¨å¹¶ä¼˜åŒ–å±€éƒ¨ã€‚ä¾‹å¦‚ï¼Œåœ¨æ ¸å¿ƒå¯¹è¯å¼•æ“æ–¹é¢ï¼ŒæŠ€æœ¯çš„ç ”å‘åŠè¿­ä»£æ–¹å‘æ˜¯ä¸ºæ›´æœ‰æ•ˆåœ°é¢„æµ‹ã€ä¿æŒå¹¶å¼•å¯¼å¯¹è¯ï¼Œè€Œä¸æ˜¯ä»…ä»…å®ç°å›åº”ã€‚åœ¨è¯­éŸ³æ–¹é¢ï¼Œæ¡†æ¶å…³æ³¨è¯­éŸ³äº¤äº’çš„è´¨é‡ä¸ä½“éªŒæ˜¯å¦èƒ½æ”¯æŒé•¿æ—¶é—´çš„æ··åˆäº¤æµï¼Œè€Œä¸ä»…ä»…æ˜¯å°†æ–‡æœ¬å†…å®¹è½¬ä¸ºè¯­éŸ³ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/bVbLFfE\" alt=\"ç¬¬å…«ä»£å°å†°å¹´åº¦å‘å¸ƒä¼šå¬å¼€ï¼Œå¼€å¯å°å†°æ™ºèƒ½ç”Ÿæ¶¯çš„ç¬¬äºŒå¹•\" title=\"ç¬¬å…«ä»£å°å†°å¹´åº¦å‘å¸ƒä¼šå¬å¼€ï¼Œå¼€å¯å°å†°æ™ºèƒ½ç”Ÿæ¶¯çš„ç¬¬äºŒå¹•\" /></p>\n<p>æœ¬æ¬¡å‘å¸ƒä¼šå‡çº§äº†ä¸Šä¸€ä»£å°å†°æ¡†æ¶çš„å„éƒ¨åˆ†æŠ€æœ¯ï¼Œå¹¶å°†ä¸€äº›æ–°æŠ€æœ¯çº³å…¥ç³»ç»Ÿä¹‹ä¸­ã€‚æ­¤å¤–ï¼Œæœ¬æ¬¡å‘å¸ƒä¼šè¿˜æŠ«éœ²äº†éƒ¨åˆ†ç‹¬æœ‰æ–°æŠ€æœ¯åŠå…¶äº§å“åŒ–æƒ…å†µã€‚å¦‚ç¯‡ç« å†…å®¹ä¸»åŠ¨å­¦ä¹ æŠ€æœ¯ï¼Œä½¿å¯¹äººå·¥æ™ºèƒ½ä¸»ä½“çš„å¯¹è¯è®­ç»ƒä¸å†éœ€è¦é‡‡ç”¨â€œé—®ç­”å¯¹â€çš„æ–¹å¼ï¼›åˆ†å±‚çŸ¥è¯†å›¾è°±æŠ€æœ¯ï¼Œä½¿å°å†°æ¡†æ¶ä¸­çš„äººå·¥æ™ºèƒ½ä¸»ä½“ï¼Œåœ¨å¼•å¯¼å¯¹è¯æ—¶çš„å…¨ç¨‹å®Œæˆç‡çªç ´42%ï¼Œæ¥è¿‘äºäººç±»è¡¨ç°ç­‰ã€‚ä¸Šè¿°æŠ€æœ¯å‡å·²å®ç°äº§å“åŒ–è½åœ°ã€‚</p>\n<h2>æœ¬æ¬¡å‘å¸ƒä¼šå®£å¸ƒçš„ä¸Šçº¿äº§å“</h2>\n<p>é¢å‘ä¸ªäººç”¨æˆ·çš„ç¬¬ä¸€ä¸ªè™šæ‹Ÿäººç±»äº§å“çº¿ã€‚åœ¨å…¬æµ‹é˜¶æ®µï¼Œè¯¥äº§å“çº¿åº”ç”¨æˆ·éœ€æ±‚åˆ›é€ çš„è™šæ‹Ÿäººç±»å·²è¶…è¿‡100ä¸‡åã€‚å‘å¸ƒä¼šä¸Šï¼Œå°å†°å®£å¸ƒç¬¬ä¸€ä¸ªæ­£å¼ç‰ˆæœ¬ä¸Šçº¿ã€‚ç”¨æˆ·å¯ä»¥è‡ªä¸»é€šè¿‡å°å†°æ¡†æ¶ï¼Œåˆ›é€ å¹¶è®­ç»ƒå…¶æ‹¥æœ‰çš„äººå·¥æ™ºèƒ½ä¸»ä½“ã€‚é™¤åŸºæœ¬äº¤äº’ä½“éªŒå¤–ï¼Œè¯¥äº§å“çº¿è¿˜æ¨å‡ºäº†ä»¥ä¸‹æ–°åŠŸèƒ½ï¼š</p>\n<p>è·¨å¹³å°çš„ç»Ÿä¸€è´¦å·ä½“ç³»ã€‚å¯ç†è§£ä¸ºè™šæ‹Ÿäººç±»çš„èº«ä»½è¯ï¼Œå®ç°è·¨å¹³å°ç»Ÿä¸€ã€‚ç›®å‰å·²å¼€æ”¾çš„æ”¯æŒå¹³å°ä»åä¸ºæ‹“å±•è‡³å°ç±³åŠå¾®åšã€‚</p>\n<p>æµ‹è¯•ç‰ˆçš„è®­ç»ƒå·¥å…·â€œX Evaâ€APPã€‚ç”¨æˆ·ä¹Ÿå¯åœ¨äº¤äº’è¿‡ç¨‹ä¸­è®­ç»ƒå…¶äººå·¥æ™ºèƒ½è™šæ‹Ÿäººç±»ã€‚ä¸ä¹‹ç›¸æ¯”ï¼ŒX Eva APPæä¾›æ›´ä¸°å¯Œçš„å¼ºå¤§è®­ç»ƒèƒ½åŠ›ã€‚</p>\n<p>å¤šäººäº¤äº’çš„èƒ½åŠ›ã€‚é€šè¿‡å¤šç§æ–¹å¼ï¼Œè™šæ‹Ÿäººç±»å¯ä¸å¤šäººè¿›è¡ŒæŒç»­äº¤äº’ï¼Œè€Œä¸å±€é™äºç”¨æˆ·ä¸ªä½“ã€‚</p>\n<p>å†…å®¹åˆ›é€ çš„èƒ½åŠ›ã€‚è™šæ‹Ÿäººç±»å¯è¿›è¡Œå¤šç§è‡ªä¸»çš„å†…å®¹åˆ›é€ ï¼Œå¹¶å°†ä¹‹åæ˜ åœ¨å…¶è‡ªèº«çš„â€œæœ‹å‹åœˆâ€ä¸­ã€‚ä¸Šè¿°å†…å®¹åˆ›é€ å¯åæ˜ è™šæ‹Ÿäººç±»ä¸ç”¨æˆ·äº¤æµä¸­æ‰€äº§ç”Ÿçš„å˜åŒ–ã€‚</p>\n<p>é’ˆå¯¹éœ€è¦å…·ä½“å®Œæˆç‰¹å®šä»»åŠ¡çš„è™šæ‹Ÿäººç±»ï¼Œæ¡†æ¶æä¾›ç‰¹å®šçš„è®­ç»ƒåŠæ‰˜ç®¡å¹³å°ã€‚ä¾‹å¦‚ï¼Œåœ¨æ­£å¼å‘å¸ƒå‰çš„å…¬æµ‹é˜¶æ®µï¼Œå°å†°æ¡†æ¶å·²åº”ç”¨æˆ·éœ€æ±‚ï¼Œæ´¾å‡ºè¶…è¿‡70000åäººå·¥æ™ºèƒ½å°ç¼–ï¼Œæä¾›å†…å®¹å’Œäº¤äº’æœåŠ¡ã€‚</p>\n<p>éƒ¨åˆ†æ–°å¹³å°ä¸æ–°çš„ç¬¬ä¸‰æ–¹è™šæ‹Ÿäººç±»åˆä½œäº§å“ã€‚å‘å¸ƒä¼šä¸Šå‘å¸ƒäº†ä¸‰é¡¹æ­¤ç±»æ–°åˆä½œï¼šåŒ…æ‹¬ä¸ä¼é¹…ç”µç«åˆä½œæ¨å‡ºçš„ç›´æ’­é—´äººå·¥æ™ºèƒ½äº§å“ï¼›ä¸å°ç±³åˆä½œæ¨å‡ºçš„å°å†°ç«¥è¯å±‹æ¨¡å¼ï¼Œå¯åœ¨è¯­éŸ³äº¤äº’ä¹‹å¤–é…åˆ2Dåœºæ™¯åŠè™šæ‹Ÿäººç±»å½¢è±¡äº¤äº’ï¼›ä¸QQåˆä½œæ¨å‡ºçš„QQç¾¤æ–°æœºå™¨äººè§’è‰²å–µå‰ã€‚</p>\n<p>é¢å‘ä¸ªäººç”¨æˆ·çš„â€œXå¥—ä»¶â€ç³»åˆ—åº”ç”¨è½¯ä»¶ã€‚åŒ…æ‹¬åŸºäºæ–‡æœ¬ååŒçš„X Writerï¼Œé¢å‘å£°éŸ³ååŒçš„X Studioå’Œé¢å‘è™šæ‹Ÿäººç±»3Dæ¼”ç¤ºæ–‡æ¡£é©±åŠ¨çš„X Presenterã€‚Xå¥—ä»¶æ”¯æŒç”¨æˆ·é€‰æ‹©å¹³å°æä¾›çš„è™šæ‹Ÿäººç±»ï¼Œæˆ–è‡ªå·±åˆ›é€ çš„è™šæ‹Ÿäººç±»ã€‚Xå¥—ä»¶ä¸ºå°å†°å•†ä¸šåŒ–è§£å†³æ–¹æ¡ˆç‰ˆæœ¬çš„â€œä¸ªäººç‰ˆâ€ã€‚</p>\n<p>X Writerï¼šå¯å®ç°åœ¨ç”¨æˆ·è¿›è¡Œæ–‡å­—ç¼–è¾‘æˆ–æ–‡æœ¬åˆ›ä½œæ—¶çš„äººå·¥æ™ºèƒ½ååŒï¼Œéšäº‘ç«¯æ›´æ–°ä¸æ–­æ‰©å……å„ç±»æ–‡ä½“ã€‚äº§å“å…·å¤‡æ²‰æµ¸å¼ä½“éªŒã€‚</p>\n<p>X Studioï¼šåŒ…æ‹¬é¢å‘å„ç±»å…¬ä¼—å·æ–‡ç« ã€æ¼”è®²ã€ç”µå°èŠ‚ç›®ç­‰çš„X Studioä¸»æ’­ï¼Œä»¥åŠé¢å‘äººå·¥æ™ºèƒ½æ­Œå£°åˆæˆçš„X Studioæ­Œæ‰‹æ­£å¼ç‰ˆè½¯ä»¶ã€‚å…¶ä¸­ï¼Œä¸»æ’­åº”ç”¨å·²åœ¨å•†ä¸šåŒ–é¢†åŸŸè¦†ç›–ä¸­å›½åŠæ—¥æœ¬è¶…è¿‡50å®¶ä¸»æµç”µå°ç”µè§†å°ï¼Œç´¯è®¡åˆ¶ä½œè¶…è¿‡8000å°æ—¶é«˜è´¨é‡éŸ³é¢‘èŠ‚ç›®å†…å®¹ï¼Œæ­¤æ¬¡æ¨å‡ºçš„ä¸ºå…¶ä¸ªäººç‰ˆæœ¬ï¼›æ­Œæ‰‹è½¯ä»¶æŠ€æœ¯åœ¨å…¨çƒèŒƒå›´å†…å±…äºé¢†å…ˆä½ç½®ï¼Œå¹¶ä¸”æ˜¯ç›®å‰å”¯ä¸€ä¸€ä¸ªå®Œæ•´äº§å“åŒ–çš„åŒç±»è½¯ä»¶ã€‚</p>\n<p>X Presenterï¼šé©±åŠ¨ç”¨æˆ·é€‰æ‹©æˆ–åˆ›é€ çš„äººå·¥æ™ºèƒ½å®ä½“3Dæ¨¡å‹ï¼Œé…åˆXå¥—ä»¶å…¶ä»–åº”ç”¨ï¼Œå®ç°äººå·¥æ™ºèƒ½å¯¹æ¼”ç¤ºæ–‡æ¡£çš„æ¼”è®²åŠäº¤äº’ã€‚</p>\n<p>é…åˆ â€œXå¥—ä»¶â€å‘å¸ƒï¼Œå‘å¸ƒä¼šè¿˜å®£å¸ƒäº†ä»¥ä¸‹ä¿¡æ¯ï¼š</p>\n<p>X Studioäººå·¥æ™ºèƒ½æ­Œæ‰‹å…¥ç±è®¡åˆ’å¯åŠ¨ã€‚ä»»ä½•æœºæ„æˆ–ä¸ªäººå¯ç”³è¯·å¹¶æäº¤æ•°æ®ï¼Œç”±å°å†°æ¡†æ¶è®­ç»ƒå¹¶å°†å…¶äººå·¥æ™ºèƒ½æ­Œæ‰‹ç™»å½•è¿›X Studioæ­Œæ‰‹å¹³å°ä¸­ã€‚æœºæ„æˆ–ä¸ªäººæ‹¥æœ‰è¯¥æ­Œæ‰‹çš„å®Œæ•´æ‰€æœ‰æƒï¼Œå¯é€šè¿‡å¹³å°åˆ¶ä½œå†…å®¹ï¼Œå¹¶è‡ªç”±è¿›è¡Œç›¸å…³äººå·¥æ™ºèƒ½æ­Œæ‰‹çš„é”€å”®è½¬è®©ç­‰ã€‚æ­¤è®¡åˆ’æ˜¯ä¸ºäº†è¿›ä¸€æ­¥ä¿ƒè¿›äººå·¥æ™ºèƒ½æ­Œæ‰‹å¸‚åœºå‘å±•ã€‚æ­¤å¤–ï¼ŒX Studioäººå·¥æ™ºèƒ½æ­Œæ‰‹ä½•ç•…æ¼”å”±Burberryæ–°ç³»åˆ—æ¨å¹¿å•æ›²ä¹Ÿå·²ä¸Šçº¿ã€‚é™¤ä½•ç•…æ¼”å”±å¤–ï¼Œè¯¥å¹¿å‘Šå•æ›²çš„è¯æ›²åˆ›ä½œäº¦æœ‰å°å†°å‚ä¸ã€‚</p>\n<p>X Presenterã€‚å•†ä¸šç‰ˆä¸ºæ—¥æœ¬LAWSONé©±åŠ¨çš„è‡ªä¸»èˆè¹ˆäººå·¥æ™ºèƒ½å·²ä¸Šçº¿ã€‚å¦å¤–ï¼ŒåŸºäºè‡ªæ§ç³»ç»Ÿï¼Œå°å†°ä¸å°ç±³å°çˆ±å›¢é˜Ÿè¿›è¡Œäº†éå¸¸æ·±å…¥çš„åˆä½œï¼Œä¸€èµ·æ¢ç´¢å°†å°çˆ±åŒå­¦çš„è™šæ‹Ÿå½¢è±¡è¯•éªŒæ€§åœ°å¼•å…¥åˆ°äº†èŠå¤©åœºæ™¯ä¸­ã€‚è®©ç”¨æˆ·å¯ä»¥å’Œå°çˆ±åŒå­¦çš„å½¢è±¡å®æ—¶å¯¹è¯ï¼Œé™¤äº†è¯­éŸ³ç»´åº¦ï¼Œè¿˜èƒ½çœ‹åˆ°å°çˆ±åŒå­¦çš„è¡¨æƒ…ã€åŠ¨ä½œç­‰ä¸€ç³»åˆ—è§†è§‰è¡¨è¾¾ã€‚è¯¥APPå·²äºå‘å¸ƒä¼šä¹‹æ—¥èµ·å¼€å§‹å†…æµ‹ç”¨æˆ·æ‹›å‹Ÿã€‚</p>\n<p><img src=\"https://segmentfault.com/img/bVbJgYT\" alt=\"segmentfault å…¬ä¼—å·\" title=\"segmentfault å…¬ä¼—å·\" /></p>","descriptionType":"html","publishedDate":"Fri, 21 Aug 2020 06:42:44 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/bVbLFeR","linkMd5":"317dc10a0d3fb89965600980c204116d","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn18@2020_5/2020/08/24/23-08-22-045_aea76744bd0bf3f8.webp","destWidth":800,"destHeight":532,"sourceBytes":78474,"destBytes":22338,"author":"å®—æ©","articleImgCdnMap":{"https://segmentfault.com/img/bVbLFeR":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn18@2020_5/2020/08/24/23-08-22-045_aea76744bd0bf3f8.webp","https://segmentfault.com/img/bVbLFfh":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn39@2020_4/2020/08/24/23-08-37-152_4ce085e5b8852c3c.webp","https://segmentfault.com/img/bVbLFfq":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn44@2020_1/2020/08/24/23-08-37-389_8988f99120692e64.webp","https://segmentfault.com/img/bVbLFfE":"https://cdn.jsdelivr.net/gh/myreaderx25/cdn32@2020_4/2020/08/24/23-08-37-014_df9d49603cc32ef0.webp","https://segmentfault.com/img/bVbJgYT":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn92@2020_2/2020/08/24/23-08-40-881_7f8323e1c3c7e5a5.webp"},"publishedOrCreatedDate":1598310388570},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"æ€å¦å¼€æºé¡¹ç›®æ¨ä»‹ä¸¨UUIï¼šåŠŸèƒ½ä¼˜å…ˆçš„é€šç”¨ UI ç»„ä»¶åº“","link":"https://segmentfault.com/a/1190000023608841","description":"<p><img src=\"https://segmentfault.com/img/bVbLdSk\" alt=\"clipboard.png\" title=\"clipboard.png\" /></p>\n<blockquote>\n å¼€æºé¡¹ç›®åç§°ï¼šUUI \n <br>å¼€æºé¡¹ç›®è´Ÿè´£äººï¼š@å­™æ‰£æ‰£ <br>å¼€æºé¡¹ç›®ç®€ä»‹ï¼šåŠŸèƒ½ä¼˜å…ˆçš„é€šç”¨ UI ç»„ä»¶åº“ <br>å¼€æºé¡¹ç›®ç±»å‹ï¼šå›¢é˜Ÿå¼€æºé¡¹ç›®<br>é¡¹ç›®åˆ›å»ºæ—¶é—´ï¼š2020 å¹´ <br>GitHub æ•°æ®ï¼š44 Starï¼Œ2 Fork <br>GitHub åœ°å€ï¼š<a href=\"https://github.com/HackPlan/UUI\" rel=\"nofollow noreferrer\">https://github.com/HackPlan/UUI</a></br></br></br></br></br></br>\n</blockquote>\n<h2>è´Ÿè´£äººè‡ªè</h2>\n<p>åšè¿™ä¸ªé¡¹ç›®æ˜¯å› ä¸ºæˆ‘ä»¬å‘ç°å¸‚é¢ä¸Šçš„ UI ç»„ä»¶åº“å¤§å¤šæ•°éƒ½æ˜¯æ ·å¼å’ŒåŠŸèƒ½ä¸€ä½“çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ— æ³•è½»æ¾çš„å®Œæˆæ ·å¼çš„è‡ªå®šä¹‰ï¼Œç»“æœæ˜¯å¾ˆå¤šä½¿ç”¨åŒä¸€ä¸ª UI ç»„ä»¶åº“çš„é¡¹ç›®ï¼Œçœ‹èµ·æ¥å°±åƒæ˜¯åŒä¸€ä¸ªé£æ ¼ã€‚</p>\n<p>UUI å¸Œæœ›æä¾›ä¸€ä¸ªåŠŸèƒ½ä¼˜å…ˆï¼Œæ ·å¼å¯é«˜åº¦è‡ªå®šä¹‰çš„åŸºç¡€ç»„ä»¶åº“ã€‚é€šè¿‡ä½¿ç”¨ UUIï¼Œå„ä¸ªé¡¹ç›®å¯ä»¥æ ¹æ®è‡ªå·±çš„æ ·å¼é£æ ¼ï¼Œè½»æ¾çš„å®šåˆ¶è‡ªå·±çš„ç»„ä»¶åº“ã€‚</p>\n<p>æ‹“å±•æ€§æ–¹é¢ï¼Œä¸åŒäºå…¶ä»–ç»„ä»¶åº“é«˜åº¦å°è£…çš„è®¾è®¡ï¼ŒUUI æä¾›äº†æé«˜çš„è‡ªå®šä¹‰ç©ºé—´ï¼Œå½“åŠŸèƒ½ä¸å¤Ÿç”¨çš„æ—¶å€™ï¼Œå¯ä»¥è‡ªè¡Œæ‹“å±•ã€‚</p>\n<p>UUI æœ€æ—©æ˜¯ 2019 å¹´åº•å°±å¼€å§‹å†…éƒ¨å¼€å‘ï¼Œä»Šå¹´å¹´åˆå¼€å§‹æŠ•å…¥ç”Ÿäº§é¡¹ç›®çš„ä½¿ç”¨ã€‚ç°åœ¨æ¯å‘¨éƒ½åœ¨æ´»è·ƒåœ°æ›´æ–°ã€‚</p>\n<h2><strong>é¡¹ç›®ç‰¹æ€§</strong></h2>\n<ul>\n <li>ä¸€ç»„å¼€ç®±å³ç”¨çš„æœ‰ç”¨çš„ç»„ä»¶ã€‚</li>\n <li>åŸºäº TypeScript çš„ç±»å‹å®‰å…¨æ€§ã€‚</li>\n <li>å¼ºå¤§çš„ç»„ä»¶æ ·å¼è‡ªå®šä¹‰åŠŸèƒ½ã€‚</li>\n</ul>\n<p><img src=\"https://segmentfault.com/img/bVbLdSL\" alt=\"clipboard.png\" title=\"clipboard.png\" /></p>\n<h2>é¡¹ç›®äº®ç‚¹</h2>\n<ul>\n <li><strong>ç»„ä»¶ç§ç±»ä¸°å¯Œï¼š</strong>æä¾›äº†è¾ƒå…¨é¢çš„åŸºç¡€ç»„ä»¶ã€è¦†ç›–å„ç±»åœºæ™¯ï¼Œç»„ä»¶ç‰¹æ€§ä¸°å¯Œã€æ»¡è¶³å„ç§åŠŸèƒ½éœ€æ±‚ã€‚</li>\n <li><strong>æ”¯æŒé«˜åº¦æ‹“å±•ï¼š</strong>ä¸ºäº†æ›´å¥½å®šåˆ¶è‡ªå®šä¹‰ç»„ä»¶çš„åŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶æ‰©å±•æœºåˆ¶ã€‚</li>\n <li><strong>é£æ ¼åŒ–ç»„ä»¶æ ·å¼ï¼š</strong>æ”¯æŒçµæ´»çš„æ ·å¼å®šåˆ¶ï¼Œç®€æ˜“ç”Ÿæˆå¤šç§é£æ ¼ï¼Œæ»¡è¶³ä¸ªæ€§åŒ–äº§å“éœ€æ±‚ã€‚</li>\n</ul>\n<p><img src=\"https://segmentfault.com/img/bVbLdSN\" alt=\"clipboard.png\" title=\"clipboard.png\" /></p>\n<h2>æ€å¦æ¨è</h2>\n<p>UUI æ˜¯ HackPlan å›¢é˜Ÿæ‰“é€ äº†ä¸€æ¬¾åŠŸèƒ½ä¼˜å…ˆçš„é€šç”¨ UI ç»„ä»¶åº“ï¼Œæ”¯æŒå¸¸è§çš„ Breadcrumbã€Button ç­‰29 ç§ç»„ä»¶ï¼Œå¯ä»¥æ»¡è¶³ä¸€äº›ä¸­å°å‹ä¸šåŠ¡çš„éœ€æ±‚ã€‚</p>\n<p>UUI çš„æ–‡æ¡£å±•ç¤ºæ–¹å¼è®©äººçœ¼å‰ä¸€äº®ï¼Œä¸å†æ˜¯å•çº¯çš„æ¼”ç¤º + ä»£ç ï¼Œè€Œæ˜¯èå…¥äº†Actionsã€Storyã€Knobsã€Performanceã€Accessibility ç­‰æ–¹å¼æ¥è®©ä½¿ç”¨è€…æ›´è¯¦ç»†çš„äº†è§£ä¸å­¦ä¹ ä½¿ç”¨ UUIã€‚</p>\n<hr>\n <p><img src=\"https://segmentfault.com/img/bVbHZSb\" alt=\"clipboard.png\" title=\"clipboard.png\" /></p>\n <p>è¯¥é¡¹ç›®å·²å…¥é€‰<a href=\"https://segmentfault.com/a/1190000022680721\">ã€ŒSFOSSP - æ€å¦å¼€æºé¡¹ç›®æ”¯æŒè®¡åˆ’ã€</a>ï¼Œæˆ‘ä»¬å¸Œæœ›å€ŸåŠ©ç¤¾åŒºçš„èµ„æºå¯¹å¼€æºé¡¹ç›®è¿›è¡Œç›¸å…³çš„å®£ä¼ æ¨å¹¿ï¼Œå¹¶ä½œä¸ºä¸€ä¸ªé•¿æœŸé¡¹ç›®åŠ©åŠ›å¼€æºäº‹ä¸šçš„å‘å±•ï¼Œä¸å¹¿å¤§å¼€å‘è€…å…±å»ºå¼€æºæ–°ç”Ÿæ€ã€‚</p>\n <p>æœ‰æ„å‘çš„å¼€æºé¡¹ç›®è´Ÿè´£äººæˆ–å›¢é˜Ÿæˆå‘˜ï¼Œå¯é€šè¿‡é‚®ç®±æä¾›ç›¸åº”çš„ä¿¡æ¯ï¼ˆå¼€æºé¡¹ç›®åœ°å€ã€é¡¹ç›®ä»‹ç»ã€å›¢é˜Ÿä»‹ç»ã€è”ç³»æ–¹å¼ç­‰ï¼‰ï¼Œä»¥ä¾¿æå‡äº¤æµçš„æ•ˆç‡ã€‚</p>\n <p>è”ç³»é‚®ç®±ï¼špr@segmentfault.com</p>\n <p><img src=\"https://segmentfault.com/img/bVbJgYT\" alt=\"clipboard.png\" title=\"clipboard.png\" /></p>\n</hr>","descriptionType":"html","publishedDate":"Thu, 13 Aug 2020 07:36:23 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/bVbLdSk","linkMd5":"06182f917f57c9d9612487bd563c6868","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn34@2020_5/2020/08/24/23-08-25-088_b71f870050272f58.webp","destWidth":800,"destHeight":430,"sourceBytes":4675788,"destBytes":1007754,"author":"å¾ä¹","articleImgCdnMap":{"https://segmentfault.com/img/bVbLdSk":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn34@2020_5/2020/08/24/23-08-25-088_b71f870050272f58.webp","https://segmentfault.com/img/bVbLdSL":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn62@2020_4/2020/08/24/23-08-31-078_6038012b8d24d65d.webp","https://segmentfault.com/img/bVbLdSN":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn73@2020_6/2020/08/24/23-08-30-993_8783d0846c619bb6.webp","https://segmentfault.com/img/bVbHZSb":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn68@2020_4/2020/08/24/23-08-37-572_9328baa6c41eb7d7.webp","https://segmentfault.com/img/bVbJgYT":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn92@2020_2/2020/08/24/23-08-40-881_7f8323e1c3c7e5a5.webp"},"publishedOrCreatedDate":1598310388568},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"è½¯ä»¶æ¶æ„ä¹‹å‰åç«¯åˆ†ç¦»ä¸å‰ç«¯æ¨¡å—åŒ–å‘å±•å²","link":"https://segmentfault.com/a/1190000023735006","description":"<p>åœ¨ç°è¡Œçš„è½¯ä»¶æ¶æ„ä¸­ï¼Œå‰ç«¯å’Œåç«¯æ˜¯åˆ†ç¦»çš„ï¼Œå³å‰ç«¯åªä¸“æ³¨äºé¡µé¢æ¸²æŸ“ï¼Œè€Œåå°ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œå‰ç«¯å’Œåç«¯æ˜¯ä¸¤ä¸ªä¸åŒçš„å·¥ç§ï¼Œè€Œå‰åç«¯äº¤äº’æœ€å¸¸è§çš„æ–¹å¼å°±æ˜¯é€šè¿‡æ¥å£ã€‚</p>\n<h1>å‰åç«¯åˆ†ç¦»æ¶æ„</h1>\n<p>åœ¨æ­£å¼è¯´æ˜å‰åå°æ¶æ„åˆ†ç¦»ä¹‹å‰ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¤šå¹´ä¹‹å‰ï¼Œä¼ ç»Ÿè½¯ä»¶å¼€å‘çš„æ¶æ„æ¨¡å¼ã€‚</p>\n<h2>ä¸ºä»€ä¹ˆè¦å‰åç«¯åˆ†ç¦»</h2>\n<p>è¿˜è®°å¾—é›¶å‡ å¹´æˆ‘ä¸Šå¤§å­¦çš„æ—¶å€™ï¼Œåœ¨åˆå­¦ Java Web å¼€å‘æ—¶ï¼Œè¯¾æœ¬ä¸Šä»‹ç»çš„è¿˜æ˜¯ JSP + Servlet è¿™ç§å¾ˆä¼ ç»Ÿçš„æ¶æ„æ¨¡å¼ï¼Œè¿™æ—¶å€™å‰ç«¯å’Œåç«¯ä¸šåŠ¡é€»è¾‘ä»£ç éƒ½åœ¨ä¸€ä¸ªå·¥ç¨‹é‡Œé¢ï¼Œè¿˜æ²¡æœ‰åˆ†ç¦»å¼€æ¥ï¼Œè¿™ç§å¼€å‘æ¨¡å¼å±äº Model1 æ¨¡å¼ï¼Œè™½ç„¶å®ç°äº†é€»è¾‘åŠŸèƒ½å’Œæ˜¾ç¤ºåŠŸèƒ½çš„åˆ†ç¦»ï¼Œä½†æ˜¯ç”±äºè§†å›¾å±‚å’Œæ§åˆ¶å±‚éƒ½æ˜¯ç”± JSP é¡µé¢å®ç°çš„ï¼Œå³è§†å›¾å±‚å’Œæ§åˆ¶å±‚å¹¶æ²¡æœ‰å®ç°åˆ†ç¦»ã€‚</p>\n<p>éšç€å­¦ä¹ çš„æ·±å…¥ä»¥åŠæ¸æ¸æµè¡Œçš„ä¼ä¸šåº”ç”¨å¼€å‘ï¼Œæˆ‘ä»¬æ¸æ¸çš„æ‘ˆå¼ƒè¿™ç§æŠ€æœ¯é€‰å‹ï¼Œå¹¶å¼€å§‹åœ¨é¡¹ç›®ä¸­ä½¿ç”¨äº†è‹¥å¹²å¼€æºæ¡†æ¶ï¼Œå¸¸ç”¨çš„æ¡†æ¶ç»„åˆæœ‰ Spring +Struts/Spring MVC + Hibernate/Mybatis ç­‰ç­‰ï¼Œç”±äºæ¡†æ¶çš„ä¼˜è¶Šæ€§ä»¥åŠè‰¯å¥½çš„å°è£…æ€§ä½¿å¾—è¿™å¥—å¼€å‘æ¡†æ¶ç»„åˆè¿…é€Ÿæˆä¸ºå„ä¸ªä¼ä¸šå¼€å‘ä¸­çš„ä¸äºŒä¹‹é€‰ï¼Œè¿™äº›æ¡†æ¶çš„å‡ºç°ä¹Ÿå‡å°‘äº†å¼€å‘è€…çš„é‡å¤ç¼–ç å·¥ä½œï¼Œç®€åŒ–å¼€å‘ï¼ŒåŠ å¿«å¼€å‘è¿›åº¦ï¼Œé™ä½ç»´æŠ¤éš¾åº¦ï¼Œéšä¹‹è€Œç«çƒ­çš„æ˜¯è¿™å¥—æŠ€æœ¯æ¡†æ¶èƒŒåçš„å¼€å‘æ¨¡å¼ï¼Œå³ MVC å¼€å‘æ¨¡å¼ï¼Œå®ƒæ˜¯ä¸ºäº†å…‹æœ Model1 å­˜åœ¨çš„ä¸è¶³è€Œè®¾è®¡çš„ã€‚</p>\n<p>MVC çš„å…·ä½“å«ä¹‰æ˜¯ï¼šModel + View + Controllerï¼Œå³æ¨¡å‹+è§†å›¾+æ§åˆ¶å™¨ï¼Œ</p>\n<ul>\n <li>Model æ¨¡å‹å±‚ï¼š å®ƒå¸¸å¸¸ä½¿ç”¨ JavaBean æ¥ç¼–å†™ï¼Œå®ƒæ¥å—è§†å›¾å±‚è¯·æ±‚çš„æ•°æ®ï¼Œç„¶åè¿›è¡Œç›¸åº”çš„ä¸šåŠ¡å¤„ç†å¹¶è¿”å›æœ€ç»ˆçš„å¤„ç†ç»“æœï¼Œå®ƒè´Ÿæ‹…çš„è´£ä»»æœ€ä¸ºæ ¸å¿ƒï¼Œå¹¶åˆ©ç”¨ JavaBean å…·æœ‰çš„ç‰¹æ€§å®ç°äº†ä»£ç çš„é‡ç”¨å’Œæ‰©å±•ä»¥åŠç»™ç»´æŠ¤å¸¦æ¥äº†æ–¹ä¾¿ã€‚</li>\n <li>View è§†å›¾å±‚ï¼š ä»£è¡¨å’Œç”¨æˆ·äº¤äº’çš„ç•Œé¢ï¼Œè´Ÿè´£æ•°æ®çš„é‡‡é›†å’Œå±•ç¤ºï¼Œé€šå¸¸ç”± JSP å®ç°ã€‚</li>\n <li>Controller æ§åˆ¶å±‚ï¼š æ§åˆ¶å±‚æ˜¯ä»ç”¨æˆ·ç«¯æ¥æ”¶è¯·æ±‚ï¼Œç„¶åå°†è¯·æ±‚ä¼ é€’ç»™æ¨¡å‹å±‚å¹¶å‘Šè¯‰æ¨¡å‹å±‚åº”è¯¥è°ƒç”¨ä»€ä¹ˆåŠŸèƒ½æ¨¡å—æ¥å¤„ç†è¯¥è¯·æ±‚ï¼Œå®ƒå°†åè°ƒè§†å›¾å±‚å’Œæ¨¡å‹å±‚ä¹‹é—´çš„å·¥ä½œï¼Œèµ·åˆ°ä¸­é—´æ¢çº½çš„ä½œç”¨ï¼Œå®ƒä¸€èˆ¬äº¤ç”± Servlet æ¥å®ç°ã€‚</li>\n</ul>\n<p>MVCçš„å·¥ä½œæµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023735009\" alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" title=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\"><br>åŒæ—¶ï¼Œé¡¹ç›®å¼€å‘åœ¨è¿›è¡Œæ¨¡å—åˆ†å±‚æ—¶ä¹Ÿä¼šåˆ’åˆ†ä¸ºä¸‰å±‚ï¼šæ§åˆ¶å±‚ï¼Œä¸šåŠ¡å±‚ï¼ŒæŒä¹…å±‚ã€‚æ§åˆ¶å±‚è´Ÿè´£æ¥æ”¶å‚æ•°ï¼Œè°ƒç”¨ç›¸å…³ä¸šåŠ¡å±‚ï¼Œå°è£…æ•°æ®ï¼Œä»¥åŠè·¯ç”±å¹¶å°†æ•°æ®æ¸²æŸ“åˆ° JSP é¡µé¢ï¼Œç„¶ååœ¨ JSP é¡µé¢ä¸­å°†åå°çš„æ•°æ®å±•ç°å‡ºæ¥ï¼Œç›¸ä¿¡å¤§å®¶å¯¹è¿™ç§å¼€å‘æ¨¡å¼éƒ½ååˆ†ç†Ÿæ‚‰ï¼Œä¸ç®¡æ˜¯ä¼ä¸šå¼€å‘æˆ–è€…æ˜¯ä¸ªäººé¡¹ç›®çš„æ­å»ºï¼Œè¿™ç§å¼€å‘æ¨¡å¼éƒ½æ˜¯å¤§å®¶çš„é¦–é€‰ï¼Œä¸è¿‡ï¼Œéšç€å¼€å‘å›¢é˜Ÿçš„æ‰©å¤§å’Œé¡¹ç›®æ¶æ„çš„ä¸æ–­æ¼”è¿›ï¼Œè¿™å¥—å¼€å‘æ¨¡å¼æ¸æ¸æœ‰äº›åŠ›ä¸ä»å¿ƒã€‚</br></img></p>\n<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸‹è¿™å¥—å¼€å‘æ¨¡å¼çš„ç—›ç‚¹ã€‚</p>\n<h3>ç—›ç‚¹ä¸€ï¼šJSP æ•ˆç‡é—®é¢˜</h3>\n<p>é¦–å…ˆï¼ŒJSP å¿…é¡»è¦åœ¨ Servlet å®¹å™¨ä¸­è¿è¡Œï¼ˆä¾‹å¦‚ Tomcatï¼Œjetty ç­‰ï¼‰ï¼Œåœ¨è¯·æ±‚ JSP æ—¶ä¹Ÿéœ€è¦è¿›è¡Œä¸€æ¬¡ç¼–è¯‘è¿‡ç¨‹ï¼Œæœ€åè¢«è¯‘æˆ Java ç±»å’Œ class æ–‡ä»¶ï¼Œè¿™äº›éƒ½ä¼šå ç”¨ PermGen ç©ºé—´ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦ä¸€ä¸ªæ–°çš„ç±»åŠ è½½å™¨åŠ è½½ï¼ŒJSP æŠ€æœ¯ä¸ Java è¯­è¨€å’Œ Servlet æœ‰å¼ºå…³è”ï¼Œåœ¨è§£è€¦ä¸Šæ— æ³•ä¸æ¨¡æ¿å¼•æ“æˆ–è€…çº¯ html é¡µé¢ç›¸åª²ç¾ã€‚å…¶æ¬¡æ¯æ¬¡è¯·æ±‚ JSP åå¾—åˆ°çš„å“åº”éƒ½æ˜¯ Servlet é€šè¿‡è¾“å‡ºæµè¾“å‡ºçš„ html é¡µé¢ï¼Œæ•ˆç‡ä¸Šä¹Ÿæ²¡æœ‰ç›´æ¥ä½¿ç”¨ html é«˜ã€‚ç”±äº JSP ä¸ Servlet å®¹å™¨çš„å¼ºå…³è”ï¼Œåœ¨é¡¹ç›®ä¼˜åŒ–æ—¶ä¹Ÿæ— æ³•ç›´æ¥ä½¿ç”¨ Nginx ä½œä¸º JSP çš„ web æœåŠ¡å™¨ï¼Œæ€§èƒ½æå‡ä¸é«˜ã€‚</p>\n<h3>ç—›ç‚¹äºŒï¼šäººå‘˜åˆ†å·¥ä¸æ˜</h3>\n<p>åœ¨è¿™ç§å¼€å‘æ¨¡å¼ä¸‹çš„å·¥ä½œæµç¨‹é€šå¸¸æ˜¯ï¼šè®¾è®¡äººå‘˜ç»™å‡ºé¡µé¢åŸå‹è®¾è®¡åï¼Œå‰ç«¯å·¥ç¨‹å¸ˆåªè´Ÿè´£å°†è®¾è®¡å›¾åˆ‡æˆ html é¡µé¢ï¼Œä¹‹ååˆ™éœ€è¦ç”±åç«¯å¼€å‘å·¥ç¨‹å¸ˆæ¥å°† html è½¬ä¸º JSP é¡µé¢è¿›è¡Œé€»è¾‘å¤„ç†å’Œæ•°æ®å±•ç¤ºã€‚åœ¨è¿™ç§å·¥ä½œæ¨¡å¼ä¸‹ï¼Œäººä¸ºå‡ºé”™ç‡è¾ƒé«˜ï¼Œåç«¯å¼€å‘äººå‘˜ä»»åŠ¡æ›´é‡ï¼Œä¿®æ”¹é—®é¢˜æ—¶éœ€è¦åŒæ–¹ååŒå¼€å‘ï¼Œæ•ˆç‡ä½ä¸‹ï¼Œä¸€æ—¦å‡ºç°é—®é¢˜åï¼Œå‰ç«¯å¼€å‘äººå‘˜é¢å¯¹çš„æ˜¯å……æ»¡æ ‡ç­¾å’Œè¡¨è¾¾å¼çš„ JSP é¡µé¢ï¼Œåç«¯äººå‘˜åœ¨é¢å¯¹æ ·å¼æˆ–è€…äº¤äº’çš„é—®é¢˜æ—¶æœ¬å°±é€ è¯£ä¸é«˜çš„å‰ç«¯æŠ€æœ¯ä¹Ÿä¼šæ‰è¥Ÿè§è‚˜ã€‚</p>\n<p>åœ¨æŸäº›ç´§æ€¥æƒ…å†µä¸‹ä¹Ÿä¼šå‡ºç°å‰ç«¯äººå‘˜è°ƒè¯•åç«¯ä»£ç ï¼Œåç«¯å¼€å‘äººå‘˜è°ƒè¯•å‰ç«¯ä»£ç è¿™äº›è®©äººæ§è…¹çš„ç°è±¡ï¼Œåˆ†å·¥ä¸æ˜ç¡®ï¼Œä¸”æ²Ÿé€šæˆæœ¬å¤§ï¼Œä¸€æ—¦æŸäº›åŠŸèƒ½éœ€è¦è¿”å·¥åˆ™éœ€è¦å‰åç«¯å¼€å‘äººå‘˜ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå¯¹äºå‰åç«¯äººå‘˜çš„åæœŸæŠ€æœ¯æˆé•¿ä¹Ÿä¸åˆ©ï¼Œåç«¯è¿½æ±‚çš„æ˜¯é«˜å¹¶å‘ã€é«˜å¯ç”¨ã€é«˜æ€§èƒ½ã€å®‰å…¨ã€æ¶æ„ä¼˜åŒ–ç­‰ï¼Œå‰ç«¯è¿½æ±‚çš„æ˜¯æ¨¡å—åŒ–ã€ç»„ä»¶æ•´åˆã€é€Ÿåº¦æµç•…ã€å…¼å®¹æ€§ã€ç”¨æˆ·ä½“éªŒç­‰ç­‰ï¼Œä½†æ˜¯åœ¨ MVC è¿™ç§å¼€å‘æ¨¡å¼ä¸‹æ˜¾ç„¶ä¼šå¯¹è¿™äº›æŠ€æœ¯äººå‘˜éƒ½æœ‰ä¸€å®šçš„æ£è‚˜ã€‚</p>\n<h3>ç—›ç‚¹ä¸‰ï¼šä¸åˆ©äºé¡¹ç›®è¿­ä»£</h3>\n<p>é¡¹ç›®åˆæœŸï¼Œä¸ºäº†å¿«é€Ÿä¸Šçº¿åº”ç”¨ï¼Œé€‰æ‹©ä½¿ç”¨è¿™ç§å¼€å‘æ¨¡å¼æ¥è¿›è¡Œ Java Web é¡¹ç›®çš„å¼€å‘æ˜¯éå¸¸æ­£ç¡®çš„é€‰æ‹©ï¼Œæ­¤æ—¶æµé‡ä¸å¤§ï¼Œç”¨æˆ·é‡ä¹Ÿä¸é«˜ï¼Œå¹¶ä¸ä¼šæœ‰éå¸¸è‹›åˆ»çš„æ€§èƒ½è¦æ±‚ï¼Œä½†æ˜¯éšç€é¡¹ç›®çš„ä¸æ–­æˆé•¿ï¼Œç”¨æˆ·é‡å’Œè¯·æ±‚å‹åŠ›ä¹Ÿä¼šä¸æ–­æ‰©å¤§ï¼Œå¯¹äºäº’è”ç½‘é¡¹ç›®çš„æ€§èƒ½è¦æ±‚æ˜¯è¶Šæ¥è¶Šé«˜ï¼Œå¦‚æœæ­¤æ—¶çš„å‰åç«¯æ¨¡å—ä¾æ—§è€¦åˆåœ¨ä¸€èµ·æ˜¯éå¸¸ä¸åˆ©äºåç»­æ‰©å±•çš„ã€‚ä¸¾ä¾‹è¯´æ˜ä¸€ä¸‹ï¼Œä¸ºäº†æé«˜è´Ÿè½½èƒ½åŠ›ï¼Œæˆ‘ä»¬ä¼šé€‰æ‹©åšé›†ç¾¤æ¥åˆ†æ‹…å•ä¸ªåº”ç”¨çš„å‹åŠ›ï¼Œä½†æ˜¯æ¨¡å—çš„è€¦åˆä¼šä½¿å¾—æ€§èƒ½çš„ä¼˜åŒ–ç©ºé—´è¶Šæ¥è¶Šä½ï¼Œå› ä¸ºå•ä¸ªé¡¹ç›®ä¼šè¶Šæ¥è¶Šå¤§ï¼Œä¸è¿›è¡Œåˆç†çš„æ‹†åˆ†æ— æ³•åšåˆ°æœ€å¥½çš„ä¼˜åŒ–ï¼Œåˆæˆ–è€…åœ¨å‘ç‰ˆéƒ¨ç½²ä¸Šçº¿çš„æ—¶å€™ï¼Œæ˜æ˜åªæ”¹äº†åç«¯çš„ä»£ç ï¼Œå‰ç«¯ä¹Ÿéœ€è¦é‡æ–°å‘å¸ƒï¼Œæˆ–è€…æ˜æ˜åªæ”¹äº†éƒ¨åˆ†é¡µé¢æˆ–è€…éƒ¨åˆ†æ ·å¼ï¼Œåç«¯ä»£ç ä¹Ÿéœ€è¦ä¸€èµ·å‘å¸ƒä¸Šçº¿ï¼Œè¿™äº›éƒ½æ˜¯è€¦åˆè¾ƒä¸¥é‡æ—¶å¸¸è§çš„ä¸è‰¯ç°è±¡ï¼Œå› æ­¤åŸå§‹çš„å‰åç«¯è€¦åˆåœ¨ä¸€èµ·çš„æ¶æ„æ¨¡å¼å·²ç»é€æ¸ä¸èƒ½æ»¡è¶³é¡¹ç›®çš„æ¼”è¿›æ–¹å‘ï¼Œéœ€è¦éœ€æ‰¾ä¸€ç§è§£è€¦çš„æ–¹å¼æ›¿ä»£å½“å‰çš„å¼€å‘æ¨¡å¼ã€‚</p>\n<h3>ç—›ç‚¹å››ï¼šä¸æ»¡è¶³ä¸šåŠ¡éœ€æ±‚</h3>\n<p>éšç€å…¬å¸ä¸šåŠ¡çš„ä¸æ–­å‘å±•ï¼Œä»…ä»…åªæœ‰æµè§ˆå™¨ç«¯çš„ Web åº”ç”¨å·²ç»é€æ¸æ˜¾å¾—æœ‰äº›ä¸å¤Ÿç”¨äº†ï¼Œç›®å‰åˆæ˜¯ç§»åŠ¨äº’è”ç½‘æ€¥å‰§å¢é•¿çš„æ—¶ä»£ï¼Œæ‰‹æœºç«¯çš„åŸç”Ÿ App åº”ç”¨å·²ç»éå¸¸æˆç†Ÿï¼Œéšç€ App è½¯ä»¶çš„å¤§é‡æ™®åŠè¶Šæ¥è¶Šå¤šçš„ä¼ä¸šä¹ŸåŠ å…¥åˆ° App è½¯ä»¶å¼€å‘å½“ä¸­æ¥ï¼Œä¸ºäº†å°½å¯èƒ½çš„æŠ¢å å•†æœºå’Œæå‡ç”¨æˆ·ä½“éªŒï¼Œä½ æ‰€åœ¨çš„å…¬å¸å¯èƒ½ä¹Ÿä¸ä¼šæŠŠæ‰€æœ‰çš„å¼€å‘èµ„æºéƒ½æ”¾åœ¨ web åº”ç”¨ä¸Šï¼Œè€Œæ˜¯å¤šç«¯åº”ç”¨åŒæ—¶å¼€å‘ï¼Œæ­¤æ—¶å…¬å¸çš„ä¸šåŠ¡çº¿å¯èƒ½å°±æ˜¯å¦‚ä¸‹çš„å‡ ç§æˆ–è€…å…¶ä¸­ä¸€éƒ¨åˆ†ï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023735010\" alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" title=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" /></p>\n<p>æµè§ˆå™¨ç«¯çš„ Web åº”ç”¨ã€iOS åŸç”Ÿ Appã€å®‰å“ç«¯åŸç”Ÿ Appã€å¾®ä¿¡å°ç¨‹åºç­‰ç­‰ï¼Œå¯èƒ½åªæ˜¯å¼€å‘å…¶ä¸­çš„ä¸€éƒ¨åˆ†äº§å“ï¼Œä½†æ˜¯é™¤äº† web åº”ç”¨èƒ½å¤Ÿä½¿ç”¨ä¼ ç»Ÿçš„ MVC æ¨¡å¼å¼€å‘å¤–ï¼Œå…¶ä»–çš„éƒ½æ— æ³•ä½¿ç”¨è¯¥æ¨¡å¼è¿›è¡Œå¼€å‘ï¼ŒåƒåŸç”Ÿ App æˆ–è€…å¾®ä¿¡å°ç¨‹åºéƒ½æ˜¯é€šè¿‡è°ƒç”¨ RESTful api çš„æ–¹å¼ä¸åç«¯è¿›è¡Œæ•°æ®äº¤äº’ã€‚</p>\n<p>éšç€äº’è”ç½‘æŠ€æœ¯çš„å‘å±•ï¼Œæ›´å¤šçš„æŠ€æœ¯æ¡†æ¶è¢«æäº†å‡ºæ¥ï¼Œå…¶ä¸­æœ€é©å‘½æ€§çš„å°±æ˜¯å‰åç«¯åˆ†ç¦»æ¦‚å¿µçš„æå‡ºã€‚</p>\n<h2>ä»€ä¹ˆæ˜¯å‰åç«¯åˆ†ç¦»</h2>\n<p>ä½•ä¸ºå‰åç«¯åˆ†ç¦»ï¼Œæˆ‘è®¤ä¸ºåº”è¯¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢æ¥ç†è§£ã€‚</p>\n<h3>å‰åç«¯åˆ†ç¦»æ˜¯ä¸€ç§é¡¹ç›®å¼€å‘æ¨¡å¼</h3>\n<p>å½“ä¸šåŠ¡å˜å¾—è¶Šæ¥è¶Šå¤æ‚æˆ–è€…äº§å“çº¿è¶Šæ¥è¶Šå¤šï¼ŒåŸæœ‰çš„å¼€å‘æ¨¡å¼å·²ç»æ— æ³•æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ï¼Œå½“ç«¯ä¸Šçš„äº§å“è¶Šæ¥è¶Šå¤šï¼Œå±•ç°å±‚çš„å˜åŒ–è¶Šæ¥è¶Šå¿«ã€è¶Šæ¥è¶Šå¤šï¼Œæ­¤æ—¶å°±åº”è¯¥è¿›è¡Œå‰åç«¯åˆ†ç¦»åˆ†å±‚æŠ½è±¡ï¼Œç®€åŒ–æ•°æ®è·å–è¿‡ç¨‹ï¼Œæ¯”å¦‚ç›®å‰æ¯”è¾ƒå¸¸ç”¨çš„å°±æ˜¯å‰ç«¯äººå‘˜è‡ªè¡Œå®ç°è·³è½¬é€»è¾‘å’Œé¡µé¢äº¤äº’ï¼Œåç«¯åªè´Ÿè´£æä¾›æ¥å£æ•°æ®ï¼ŒäºŒè€…ä¹‹é—´é€šè¿‡è°ƒç”¨ RESTful api çš„æ–¹å¼æ¥è¿›è¡Œæ•°æ®äº¤äº’ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023735011\" alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" title=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\"><br>æ­¤æ—¶å°±ä¸ä¼šå‡ºç° HTML ä»£ç éœ€è¦è½¬æˆ JSP è¿›è¡Œå¼€å‘çš„æƒ…å†µï¼Œå‰ç«¯é¡¹ç›®åªè´Ÿè´£å‰ç«¯éƒ¨åˆ†ï¼Œå¹¶ä¸ä¼šæºæ‚ä»»ä½•åç«¯ä»£ç ï¼Œè¿™æ ·çš„è¯ä»£ç ä¸å†è€¦åˆã€‚åŒæ—¶ï¼Œå‰ç«¯é¡¹ç›®ä¸åç«¯é¡¹ç›®ä¹Ÿä¸ä¼šå†å‡ºç°è€¦åˆä¸¥é‡çš„ç°è±¡ï¼Œåªè¦å‰åç«¯åå•†å’Œå®šä¹‰å¥½æ¥å£è§„èŒƒåŠæ•°æ®äº¤äº’è§„èŒƒï¼ŒåŒæ–¹å°±å¯ä»¥å¹¶è¡Œå¼€å‘ï¼Œäº’ä¸å¹²æ‰°ï¼Œä¸šåŠ¡ä¹Ÿä¸ä¼šè€¦åˆï¼Œä¸¤ç«¯åªé€šè¿‡æ¥å£æ¥è¿›è¡Œäº¤äº’ã€‚</br></img></p>\n<p>åœ¨ MVC æ¨¡å¼å¼€å‘é¡¹ç›®æ—¶ï¼Œå¾€å¾€åç«¯è¿‡é‡ï¼Œâ€œæ§åˆ¶æƒâ€ä¹Ÿæ¯”è¾ƒå¤§ï¼Œæ—¢è¦è´Ÿè´£å¤„ç†ä¸šåŠ¡é€»è¾‘ã€æƒé™ç®¡ç†ç­‰åç«¯æ“ä½œï¼Œä¹Ÿéœ€è¦å¤„ç†é¡µé¢è·³è½¬ç­‰é€»è¾‘ï¼Œåœ¨å‰åç«¯åˆ†ç¦»çš„æ¨¡å¼ä¸­ï¼Œåç«¯ç”±åŸæ¥çš„å¤§åŒ…å¤§æ½ä¼¼çš„ç‹¬è£è€…å˜æˆäº†æ¥å£æä¾›è€…ï¼Œè€Œå‰ç«¯ä¹Ÿä¸ä»…ä»…æ˜¯åŸæ¥é‚£æ ·ä»…å¤„ç†å°éƒ¨åˆ†ä¸šåŠ¡ï¼Œé¡µé¢è·³è½¬ä¹Ÿä¸å†ç”±åç«¯æ¥å¤„ç†å’Œå†³å®šï¼Œæ•´ä¸ªé¡¹ç›®çš„æ§åˆ¶æƒå·²ç»ç”±åç«¯è¿‡æ¸¡è‡³å‰ç«¯æ¥æŒæ§ï¼Œå‰ç«¯éœ€è¦å¤„ç†çš„æ›´å¤šã€‚</p>\n<p>å‰ç«¯é¡¹ç›®å’Œåç«¯é¡¹ç›®éš”ç¦»å¼€æ¥ã€äº’ä¸å¹²æ¶‰ï¼Œé€šè¿‡æ¥å£å’Œæ•°æ®è§„èŒƒæ¥å®Œæˆé¡¹ç›®åŠŸèƒ½éœ€æ±‚ï¼Œè¿™ä¹Ÿæ˜¯ç›®å‰æ¯”è¾ƒæµè¡Œçš„ä¸€ç§å¼€å‘æ–¹å¼ã€‚</p>\n<h3>å‰åç«¯åˆ†ç¦»æ˜¯ä¸€ç§äººå‘˜åˆ†å·¥</h3>\n<p>åœ¨å‰åç«¯åˆ†ç¦»çš„æ¶æ„æ¨¡å¼ä¸‹ï¼Œåå°è´Ÿè´£æ•°æ®æä¾›ï¼Œå‰ç«¯è´Ÿè´£æ˜¾ç¤ºäº¤äº’ï¼Œåœ¨è¿™ç§å¼€å‘æ¨¡å¼ä¸‹ï¼Œå‰ç«¯å¼€å‘äººå‘˜å’Œåç«¯å¼€å‘äººå‘˜åˆ†å·¥æ˜ç¡®ï¼ŒèŒè´£åˆ’åˆ†ååˆ†æ¸…æ™°ï¼ŒåŒæ–¹å„å¸å…¶èŒï¼Œä¸ä¼šå­˜åœ¨è¾¹ç•Œä¸æ¸…æ™°çš„åœ°æ–¹ï¼Œå¹¶ä¸”ä»ä¸šäººå‘˜ä¹Ÿå„å¸å…¶èŒã€‚</p>\n<p>å‰ç«¯å¼€å‘äººå‘˜åŒ…æ‹¬ Web å¼€å‘äººå‘˜ã€åŸç”Ÿ App å¼€å‘äººå‘˜ï¼Œåç«¯å¼€å‘åˆ™æ˜¯æŒ‡ Java å¼€å‘äººå‘˜(ä»¥ Java è¯­è¨€ä¸ºä¾‹)ï¼Œä¸åŒçš„å¼€å‘äººå‘˜åªéœ€è¦æ³¨é‡è‡ªå·±æ‰€è´Ÿè´£çš„é¡¹ç›®å³å¯ã€‚åç«¯ä¸“æ³¨äºæ§åˆ¶å±‚ï¼ˆRESTful APIï¼‰ã€æœåŠ¡å±‚ ã€æ•°æ®è®¿é—®å±‚ï¼Œå‰ç«¯ä¸“æ³¨äºå‰ç«¯æ§åˆ¶å±‚ã€ è§†å›¾å±‚ï¼Œä¸ä¼šå†å‡ºç°å‰ç«¯äººå‘˜éœ€è¦ç»´æŠ¤éƒ¨åˆ†åç«¯ä»£ç ï¼Œæˆ–è€…åç«¯å¼€å‘äººå‘˜éœ€è¦å»è°ƒè¯•æ ·å¼ç­‰ç­‰èŒè´£ä¸æ¸…å’Œå‰åç«¯è€¦åˆçš„æƒ…å†µï¼Œæˆ‘ä»¬é€šè¿‡ä¸¤å¼ é¡¹ç›®å¼€å‘æµç¨‹ç®€å›¾æ¥å¯¹æ¯”ï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023735012\" alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" title=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\"><br>æ­¤æ—¶ï¼Œå¼€å‘è¿‡ç¨‹ä¸­ä¼šå­˜åœ¨å‰åç«¯è€¦åˆçš„æƒ…å†µï¼Œå¦‚æœå‡ºç°é—®é¢˜å‰ç«¯éœ€è¦è¿”å·¥ã€åç«¯ä¹Ÿéœ€è¦è¿”å·¥ï¼Œå¼€å‘æ•ˆç‡ä¼šæœ‰æ‰€å½±å“ã€‚ç°åœ¨ï¼Œå‰åç«¯åˆ†ç¦»åæµç¨‹ç®€å›¾å¦‚ä¸‹ï¼š</br></img></p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023735013\" alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" title=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\"><br>å‰åç«¯åˆ†ç¦»åï¼ŒæœåŠ¡å™¨ç«¯å¼€å‘äººå‘˜å’Œå‰ç«¯å¼€å‘äººå‘˜å„å¹²å„çš„ï¼Œå¤§å®¶äº’ä¸å¹²æ‰°ï¼Œã€‚åœ¨è®¾è®¡å®Œæˆåï¼ŒWeb ç«¯å¼€å‘äººå‘˜ã€App ç«¯å¼€å‘äººå‘˜ã€åç«¯å¼€å‘äººå‘˜éƒ½å¯ä»¥æŠ•å…¥åˆ°å¼€å‘å·¥ä½œå½“ä¸­ï¼Œèƒ½å¤Ÿåšåˆ°å¹¶è¡Œå¼€å‘ï¼Œå‰ç«¯å¼€å‘äººå‘˜ä¸åç«¯å¼€å‘äººå‘˜èŒè´£åˆ†ç¦»ï¼Œå³ä½¿å‡ºç°é—®é¢˜ï¼Œä¹Ÿæ˜¯ä¿®å¤å„è‡ªçš„é—®é¢˜ä¸ä¼šäº’ç›¸å½±å“å’Œè€¦åˆï¼Œå¼€å‘æ•ˆç‡é«˜ä¸”æ»¡è¶³ä¼ä¸šå¯¹äºå¤šäº§å“çº¿çš„å¼€å‘éœ€æ±‚ã€‚</br></img></p>\n<h3>å‰åç«¯åˆ†ç¦»æ˜¯ä¸€ç§æ¶æ„æ¨¡å¼</h3>\n<p>å‰åç«¯åˆ†ç¦»åï¼Œå„ç«¯åº”ç”¨å¯ä»¥ç‹¬ç«‹æ‰“åŒ…éƒ¨ç½²ï¼Œå¹¶é’ˆå¯¹æ€§çš„å¯¹éƒ¨ç½²æ–¹å¼è¿›è¡Œä¼˜åŒ–ï¼Œä¸å†æ˜¯å‰åç«¯ä¸€ä¸ªç»Ÿä¸€çš„å·¥ç¨‹æœ€ç»ˆæ‰“æˆä¸€ä¸ªéƒ¨ç½²åŒ…è¿›è¡Œéƒ¨ç½²ã€‚ä»¥ Web åº”ç”¨ä¸ºä¾‹ï¼Œå‰ç«¯é¡¹ç›®éƒ¨ç½²åï¼Œä¸å†ä¾èµ–äº Servlet å®¹å™¨ï¼Œå¯ä»¥ä½¿ç”¨ååé‡æ›´å¤§çš„ Nginx æœåŠ¡å™¨ï¼Œé‡‡ç”¨åŠ¨é™åˆ†ç¦»çš„éƒ¨ç½²æ–¹å¼ï¼Œæ—¢æå‡äº†å‰ç«¯çš„è®¿é—®ä½“éªŒï¼Œä¹Ÿå‡è½»äº†åç«¯æœåŠ¡å™¨çš„å‹åŠ›ï¼Œå†è¿›ä¸€æ­¥ä¼˜åŒ–çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨é¡µé¢ç¼“å­˜ã€æµè§ˆå™¨ç¼“å­˜ç­‰è®¾ç½®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ CDN ç­‰äº§å“æå‡é™æ€èµ„æºçš„è®¿é—®æ•ˆç‡ã€‚å¯¹äºåç«¯æœåŠ¡è€Œè¨€ï¼Œå¯ä»¥è¿›è¡Œé›†ç¾¤éƒ¨ç½²æå‡æœåŠ¡çš„å“åº”æ•ˆç‡ï¼Œä¹Ÿå¯ä»¥è¿›ä¸€æ­¥çš„è¿›è¡ŒæœåŠ¡åŒ–çš„æ‹†åˆ†ç­‰ç­‰ã€‚å‰åç«¯åˆ†ç¦»åçš„ç‹¬ç«‹éƒ¨ç½²ç»´æŠ¤ä»¥åŠé’ˆå¯¹æ€§çš„ä¼˜åŒ–ï¼Œå¯ä»¥åŠ å¿«æ•´ä½“å“åº”é€Ÿåº¦å’Œååé‡ã€‚</p>\n<h1>å‰ç«¯å‘å±•å†ç¨‹</h1>\n<p>å½“æˆ‘ä»¬å»äº†è§£æŸä¸ªäº‹ç‰©çš„æ—¶å€™ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦å»äº†è§£å®ƒçš„å†å²ï¼Œæ‰èƒ½æ›´å¥½çš„æŠŠæ¡å®ƒçš„æœªæ¥ã€‚</p>\n<h2>åŸå§‹æ—¶ä»£</h2>\n<p>ä¸–ç•Œä¸Šç¬¬ä¸€æ¬¾æµè§ˆå™¨ NCSAMosaic ï¼Œæ˜¯ç½‘æ™¯å…¬å¸ï¼ˆNetscapeï¼‰åœ¨1994å¹´å¼€å‘å‡ºæ¥çš„ï¼Œå®ƒçš„åˆè¡·æ˜¯ä¸ºäº†æ–¹ä¾¿ç§‘ç ”äººå‘˜æŸ¥é˜…èµ„æ–™ã€æ–‡æ¡£ï¼ˆè¿™ä¸ªæ—¶å€™çš„æ–‡æ¡£å¤§å¤šæ˜¯å›¾ç‰‡å½¢å¼çš„ï¼‰ã€‚é‚£ä¸ªæ—¶ä»£çš„æ¯ä¸€ä¸ªäº¤äº’ï¼ŒæŒ‰é’®ç‚¹å‡»ã€è¡¨å•æäº¤ï¼Œéƒ½éœ€è¦ç­‰å¾…æµè§ˆå™¨å“åº”å¾ˆé•¿æ—¶é—´ï¼Œç„¶åé‡æ–°ä¸‹è½½ä¸€ä¸ªæ–°é¡µé¢ã€‚</p>\n<p>åŒå¹´ PHPï¼ˆè¶…æ–‡æœ¬é¢„å¤„ç†å™¨ï¼‰ è„šæœ¬è¯­è¨€è¢«å¼€å‘å‡ºæ¥ï¼Œå¼€å¯äº†æ•°æ®åµŒå…¥æ¨¡æ¿çš„ MVC æ¨¡å¼ï¼ŒåŒæ—¶æœŸæ¯”è¾ƒç±»ä¼¼çš„åšæ³•æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>\n<ul>\n <li>PHP ç›´æ¥å°†æ•°æ®å†…åµŒåˆ° HTML ä¸­ã€‚</li>\n <li>ASP çš„ ASPXï¼Œåœ¨ HTML ä¸­åµŒå…¥ C# ä»£ç ã€‚</li>\n <li>Java çš„ JSP ç›´æ¥å°†æ•°æ®åµŒå…¥åˆ°ç½‘é¡µä¸­ã€‚</li>\n</ul>\n<p>è¿™ä¸ªæ—¶æœŸï¼Œæµè§ˆå™¨çš„å¼€å‘è€…ï¼Œä»¥åå°å¼€å‘äººå‘˜å±…å¤šï¼Œå¤§éƒ¨åˆ†å‰åç«¯å¼€å‘æ˜¯ä¸€ä½“çš„ï¼Œå¤§è‡´å¼€å‘æµç¨‹æ˜¯ï¼šåç«¯æ”¶åˆ°æµè§ˆå™¨çš„è¯·æ±‚ ---&gt; å‘é€é™æ€é¡µé¢ ---&gt; å‘é€åˆ°æµè§ˆå™¨ã€‚å³ä½¿æ˜¯æœ‰ä¸“é—¨çš„å‰ç«¯å¼€å‘ï¼Œä¹Ÿåªæ˜¯ç”¨ HTML å†™å†™é¡µé¢æ¨¡æ¿ã€CSS ç»™é¡µé¢æ’ä¸ªå¥½çœ‹ç‚¹çš„ç‰ˆå¼ã€‚åœ¨è¿™ä¸€æ—¶æœŸï¼Œå‰ç«¯çš„ä½œç”¨æœ‰é™ï¼Œå¾€å¾€åªæ˜¯åˆ‡å›¾ä»”çš„è§’è‰²ã€‚</p>\n<h2>é“å™¨æ—¶ä»£</h2>\n<p>1995å¹´ï¼Œç½‘æ™¯å…¬å¸çš„ä¸€ä½å«å¸ƒå…°ç™»Â·è‰¾å¥‡çš„å¤§ä½¬ï¼Œå¸Œæœ›å¼€å‘å‡ºä¸€ä¸ªç±»ä¼¼ Java çš„è„šæœ¬è¯­è¨€ï¼Œç”¨æ¥æå‡æµè§ˆå™¨çš„å±•ç¤ºæ•ˆæœï¼Œå¢å¼ºåŠ¨æ€äº¤äº’èƒ½åŠ›ã€‚ç»“æœå¤§ä½¬å–ç€å•¤é…’æŠ½ç€çƒŸï¼Œåæ¥å¤©å°±æŠŠè¿™ä¸ªè„šæœ¬è¯­è¨€å†™å‡ºæ¥äº†ï¼ŒåŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œå°±æ˜¯è¯­æ³•ä¸€ç‚¹éƒ½ä¸åƒ Javaã€‚è¿™æ ·å°±æ¸æ¸å½¢æˆäº†å‰ç«¯çš„é›å½¢ï¼šHTML ä¸ºéª¨æ¶ï¼ŒCSS ä¸ºå¤–è²Œï¼ŒJavaScript ä¸ºäº¤äº’ã€‚</p>\n<p>åŒæ—¶æœŸå¾®è½¯ç­‰ä¸€äº›å…¬å¸ä¹Ÿé’ˆå¯¹è‡ªå®¶æµè§ˆå™¨å¼€å‘å‡ºäº†è‡ªå·±çš„è„šæœ¬è¯­è¨€ã€‚æµè§ˆå™¨äº”èŠ±å…«é—¨ï¼Œè™½ç„¶æœ‰äº†æ¯”è¾ƒç»Ÿä¸€çš„ ECMA æ ‡å‡†ï¼Œä½†æ˜¯æµè§ˆå™¨å…ˆäºæ ‡å‡†åœ¨å¸‚åœºä¸Šæµè¡Œå¼€æ¥ï¼Œæˆä¸ºäº†äº‹å®æ ‡å‡†ã€‚å¯¼è‡´ï¼Œç°åœ¨å‰ç«¯å·¥ç¨‹å¸ˆè¿˜è¦åœ¨åšä¸€äº›æ”¿åºœå¤è€é¡¹ç›®çš„æ—¶å€™ï¼Œè¿˜è¦å»å¤„ç†æµè§ˆå™¨å…¼å®¹ï¼ˆä¸‡æ¶çš„ IE ç³»åˆ—ï¼‰ã€‚</p>\n<p>ä¸ç®¡æ€ä¹ˆè¯´ï¼Œå‰ç«¯å¼€å‘ä¹Ÿç®—æ˜¯èƒ½å†™ç‚¹é€»è¾‘ä»£ç äº†ï¼Œä¸å†æ˜¯åªèƒ½ç”»ç”»é¡µé¢çš„ä½ç«¯å¼€å‘äº†ã€‚éšç€1998å¹´ AJax çš„å‡ºç°ï¼Œå‰ç«¯å¼€å‘ä» Web1.0è¿ˆå‘äº†Web2.0ï¼Œå‰ç«¯ä»çº¯å†…å®¹çš„é™æ€å±•ç¤ºï¼Œå‘å±•åˆ°äº†åŠ¨æ€ç½‘é¡µï¼Œå¯Œäº¤äº’ï¼Œå‰ç«¯æ•°æ®å¤„ç†çš„æ–°æ—¶æœŸã€‚è¿™ä¸€æ—¶æœŸï¼Œæ¯”è¾ƒçŸ¥åçš„ä¸¤ä¸ªå¯Œäº¤äº’åŠ¨æ€çš„æµè§ˆå™¨äº§å“æ˜¯ã€‚</p>\n<ul>\n <li>Gmailï¼ˆ2004å¹´ï¼‰</li>\n <li>Google åœ°å›¾ï¼ˆ2005å¹´ï¼‰</li>\n</ul>\n<p>ç”±äºåŠ¨æ€äº¤äº’ã€æ•°æ®äº¤äº’çš„éœ€æ±‚å¢å¤šï¼Œè¿˜è¡ç”Ÿå‡ºäº†jQueryï¼ˆ2006ï¼‰ è¿™æ ·ä¼˜ç§€çš„è·¨æµè§ˆå™¨çš„ js å·¥å…·åº“ï¼Œä¸»è¦ç”¨äº DOM æ“ä½œï¼Œæ•°æ®äº¤äº’ã€‚æœ‰äº›å¤è€çš„é¡¹ç›®ï¼Œç”šè‡³è¿‘å‡ å¹´å¼€å‘çš„å¤§å‹é¡¹ç›®ç°åœ¨è¿˜åœ¨ä½¿ç”¨ jQueryï¼Œä»¥è‡³äº jQuery åº“ç°åœ¨è¿˜åœ¨æ›´æ–°ï¼Œè™½ç„¶ä½“é‡ä¸Šå·²ç»è¿œè¿œä¸åŠ Reactã€Vue è¿™äº›ä¼˜ç§€çš„å‰ç«¯åº“ã€‚</p>\n<h2>ä¿¡æ¯æ—¶ä»£</h2>\n<p>è‡ª 2003 ä»¥åï¼Œå‰ç«¯å‘å±•æ¸¡è¿‡äº†ä¸€æ®µæ¯”è¾ƒå¹³ç¨³çš„æ—¶æœŸï¼Œå„å¤§æµè§ˆå™¨å‚å•†é™¤äº†æŒ‰éƒ¨å°±ç­çš„æ›´æ–°è‡ªå·±çš„æµè§ˆå™¨äº§å“ä¹‹å¤–ï¼Œæ²¡æœ‰å†ä½œå¦–æç‚¹å…¶ä»–äº‹æƒ…ã€‚ä½†æ˜¯æˆ‘ä»¬ç¨‹åºå‘˜ä»¬è€ä¸ä½å¯‚å¯å•Šï¼Œå·¥ä¸šåŒ–æ¨åŠ¨äº†ä¿¡æ¯åŒ–çš„å¿«é€Ÿåˆ°æ¥ï¼Œæµè§ˆå™¨å‘ˆç°çš„æ•°æ®é‡è¶Šæ¥è¶Šå¤§ï¼Œç½‘é¡µåŠ¨æ€äº¤äº’çš„éœ€æ±‚è¶Šæ¥è¶Šå¤šï¼ŒJavaScript é€šè¿‡æ“ä½œ DOM çš„å¼Šç«¯å’Œç“¶é¢ˆè¶Šæ¥è¶Šæ˜æ˜¾ï¼ˆé¢‘ç¹çš„äº¤äº’æ“ä½œï¼Œå¯¼è‡´é¡µé¢ä¼šå¾ˆå¡é¡¿ï¼‰ï¼Œä»…ä»…ä»ä»£ç å±‚é¢å»æå‡é¡µé¢æ€§èƒ½ï¼Œå˜å¾—è¶Šæ¥è¶Šéš¾ã€‚äºæ˜¯ä¼˜ç§€çš„å¤§ä½¬ä»¬åˆå¹²äº†ç‚¹æƒŠå¤©åŠ¨åœ°çš„å°äº‹å„¿ï¼š</p>\n<ul>\n <li>2008 å¹´ï¼Œè°·æ­Œ V8 å¼•æ“å‘å¸ƒï¼Œç»ˆç»“å¾®è½¯ IE æ—¶ä»£ã€‚</li>\n <li>2009 å¹´ AngularJS è¯ç”Ÿã€Nodeè¯ç”Ÿã€‚</li>\n <li>2011 å¹´ ReactJS è¯ç”Ÿã€‚</li>\n <li>2014 å¹´ VueJS è¯ç”Ÿã€‚</li>\n</ul>\n<p>å…¶ä¸­ï¼ŒV8 å’Œ Node.JS çš„å‡ºç°ï¼Œä½¿å‰ç«¯å¼€å‘äººå‘˜å¯ä»¥ç”¨ç†Ÿæ‚‰çš„è¯­æ³•ç³–ç¼–å†™åå°ç³»ç»Ÿï¼Œä¸ºå‰ç«¯æä¾›äº†ä½¿ç”¨åŒä¸€è¯­è¨€çš„å®ç°å…¨æ ˆå¼€å‘çš„æœºä¼šï¼ˆJavaScriptä¸å†æ˜¯ä¸€ä¸ªè¢«å˜²ç¬‘åªèƒ½å†™å†™é¡µé¢äº¤äº’çš„è„šæœ¬è¯­è¨€ï¼‰ã€‚Reactã€Angularã€Vue ç­‰ MVVM å‰ç«¯æ¡†æ¶çš„å‡ºç°ï¼Œä½¿å‰ç«¯å®ç°äº†é¡¹ç›®çœŸæ­£çš„åº”ç”¨åŒ–ï¼ˆSPAå•é¡µé¢åº”ç”¨ï¼‰ï¼Œä¸å†ä¾èµ–åå°å¼€å‘äººå‘˜å¤„ç†é¡µé¢è·¯ç”± Controllerï¼Œå®ç°é¡µé¢è·³è½¬çš„è‡ªæˆ‘ç®¡ç†ã€‚åŒæ—¶ä¹Ÿæ¨åŠ¨äº†å‰åç«¯çš„å½»åº•åˆ†ç¦»ï¼ˆå‰ç«¯é¡¹ç›®ç‹¬ç«‹éƒ¨ç½²ï¼Œä¸å†ä¾èµ–ç±»ä¼¼çš„ template æ–‡ä»¶ç›®å½•ï¼‰ã€‚</p>\n<p>è‡³äºä¸ºå•¥ MVVM æ¡†æ¶èƒ½æå‡å‰ç«¯çš„æ¸²æŸ“æ€§èƒ½ï¼Œè¿™é‡Œç®€å•çš„è¯´ä¸€ä¸‹åŸç†ï¼Œå› ä¸ºå¤§é‡çš„ DOM æ“ä½œæ˜¯æ€§èƒ½ç“¶é¢ˆçš„ç½ªé­ç¥¸é¦–ï¼Œé‚£é€šè¿‡ä¸€å®šçš„åˆ†ææ¯”è¾ƒç®—æ³•ï¼Œå®ç°åŒç­‰æ•ˆæœä¸‹çš„æœ€å° DOM å¼€é”€æ˜¯å¯è¡Œçš„ã€‚Reactã€Vue è¿™ç±»æ¡†æ¶å¤§éƒ½æ˜¯é€šè¿‡è¿™ç±»æ€æƒ³å®ç°çš„ï¼Œå…·ä½“å®ç°å¯ä»¥å»çœ‹ä¸€ä¸‹ç›¸å…³èµ„æ–™ã€‚å‰åç«¯åˆ†ç¦»ä¹Ÿå¯¼è‡´å‰ç«¯çš„åˆ†å·¥å‘ç”Ÿäº†ä¸€äº›å˜åŒ–ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023735014\" alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" title=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" /></p>\n<p>è€Œåç«¯å¼€å‘æ›´åŠ å…³æ³¨æ•°æ®æœåŠ¡ï¼Œå‰ç«¯åˆ™è´Ÿè´£å±•ç¤ºå’Œäº¤äº’ã€‚å½“ç„¶ç›¸åº”çš„å­¦ä¹ æˆæœ¬ä¹Ÿè¶Šæ¥è¶Šå¤§ï¼ŒNode.JSçš„å‡ºç°ä¹Ÿä½¿å¾—å‰ç«¯å‰åç«¯ä¸€èµ·å¼€å‘æˆä¸ºå¯èƒ½ï¼Œå¥½å¤šå¤§å…¬å¸åœ¨ 2015 å¹´å‰åå°±è¿›è¡Œäº†å°è¯•ï¼Œç”¨ Node.JS ä½œä¸ºä¸­é—´æ•°æ®è½¬æ¥å±‚ï¼Œè®©åç«¯æ›´åŠ ä¸“æ³¨äºæ•°æ®æœåŠ¡å’Œæ²»ç†ã€‚</p>\n<h1>å‰ç«¯æ¨¡å—åŒ–å‘å±•å†ç¨‹</h1>\n<p>è‡ª 2009 å¹´ 5 æœˆ Node.js å‘å¸ƒä»¥æ¥ï¼Œå‰ç«¯èƒ½å¹²çš„äº‹æƒ…è¶Šæ¥è¶Šå¤šã€‚çŸ­çŸ­ 10 æ¥å¹´çš„æ—¶é—´ï¼Œå‰ç«¯ä¾¿ä»åˆ€è€•ç«ç§çš„å¹´ä»£èµ°å‘äº†æ¨¡å—åŒ–ã€å·¥ç¨‹åŒ–çš„æ—¶ä»£ã€‚å„ç§å‰ç«¯æ¡†æ¶ç™¾å®¶äº‰é¸£ï¼Œå‰ç«¯èµ¢æ¥äº†çœŸæ­£å±äºè‡ªå·±çš„æ—¶ä»£ã€‚</p>\n<h2>åŸå§‹æ—¶ä»£</h2>\n<p>æ—¶é—´å›åˆ° 2009å¹´ï¼Œè®°å¾—é‚£æ—¶å€™è¿˜æ²¡æœ‰æµè¡Œå‰åç«¯åˆ†ç¦»ï¼Œå¾ˆå¤šé¡¹ç›®è¿˜æ˜¯æ··åœ¨ä¸€èµ·ï¼Œè€Œé‚£æ—¶å€™çš„å‰ç«¯å¼€å‘äººå‘˜å¤§å¤šæ•°ä¹Ÿéƒ½æ˜¯â€œåˆ‡å›¾ä»”â€ã€‚å‰ç«¯å®Œæˆé™æ€é¡µé¢ï¼Œç”±æœåŠ¡ç«¯åŒäº‹å®Œæˆæ•°æ®çš„åµŒå…¥ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„å¥—é¡µé¢æ“ä½œï¼Œæ¯å½“æœ‰ç±»ä¼¼çš„åŠŸèƒ½ï¼Œéƒ½ä¼šå›åˆ°ä¹‹å‰çš„é¡µé¢å»å¤åˆ¶ç²˜è´´ï¼Œç”±äºå¤„äºä¸åŒçš„é¡µé¢ï¼Œç±»åéœ€è¦æ›´æ¢ï¼Œä½†æ˜¯æ¢æ±¤ä¸æ¢è¯ã€‚</p>\n<p>ä¹…è€Œä¹…ä¹‹ï¼Œé‡å¤ä»£ç è¶Šæ¥è¶Šå¤šï¼Œä½†å‡¡æ”¹åŠ¨ä¸€ä¸ªå°çš„åœ°æ–¹ï¼Œéƒ½éœ€è¦æ”¹åŠ¨å¾ˆå¤šä»£ç ï¼Œæ˜¾å¾—æä¸æ–¹ä¾¿ï¼Œä¹Ÿä¸åˆ©äºå¤§è§„æ¨¡çš„è¿›è¡Œå·¥ç¨‹åŒ–å¼€å‘ã€‚è™½ç„¶å¸‚é¢ä¸Šä¹Ÿæ…¢æ…¢å‡ºç°äº† Angularã€ Avalon ç­‰ä¼˜ç§€çš„å‰ç«¯æ¡†æ¶ï¼Œä½†æ˜¯è€ƒè™‘åˆ° SEO å’Œç»´æŠ¤äººå‘˜å¹¶ä¸å¥½æ‹›ï¼Œå¾ˆå¤šå…¬å¸è¿˜æ˜¯é€‰æ‹©æ±‚ç¨³ï¼Œç”¨å¥—é¡µé¢çš„å½¢å¼åˆ¶ä½œç½‘é¡µï¼Œè¿™å¯¹å‰ç«¯çš„å·¥ç¨‹åŒ–ã€æ¨¡å—åŒ–æ˜¯ä¸€ä¸ªä¸å°çš„é˜»ç¢ã€‚</p>\n<h2>æ„å»ºå·¥å…·çš„å‡ºç°</h2>\n<p>ä¸è¿‡ï¼Œéšç€ Node è¢«å¤§åŠ›æ¨å´‡ï¼Œå¸‚é¢ä¸Šæ¶Œç°å‡ºå¤§é‡çš„æ„å»ºå·¥å…·ï¼Œå¦‚ Npm Scriptsã€Gruntã€Gulpã€FISã€Webpackã€Rollupã€Parcelç­‰ç­‰ã€‚æ„å»ºå·¥å…·è§£æ”¾äº†æˆ‘ä»¬çš„åŒæ‰‹ï¼Œå¸®æˆ‘ä»¬å¤„ç†ä¸€äº›é‡å¤çš„æœºæ¢°åŠ³åŠ¨ã€‚</p>\n<p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼šæˆ‘ä»¬ç”¨ ES6 å†™äº†ä¸€æ®µä»£ç ï¼Œéœ€è¦åœ¨æµè§ˆå™¨æ‰§è¡Œã€‚ä½†æ˜¯ç”±äºæµè§ˆå™¨å‚å•†å¯¹æµè§ˆå™¨çš„æ›´æ–°éå¸¸ä¿å®ˆï¼Œä½¿å¾—å¾ˆå¤š ES6 çš„ä»£ç å¹¶ä¸èƒ½ç›´æ¥åœ¨æµè§ˆå™¨ä¸Šè¿è¡Œã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬æ€»ä¸èƒ½æ‰‹åŠ¨å°† ES6 ä»£ç æ”¹æˆ ES5 çš„ä»£ç ã€‚äºæ˜¯ä¹å°±æœ‰äº†ä¸‹é¢çš„è½¬æ¢ã€‚</p>\n<pre><code>//ç¼–è¯‘å‰\n[1,2,3].map(item =&gt; console.log(item))\n//ç¼–è¯‘å\n[1, 2, 3].map(function (item) {\n  return console.log(item);\n});\n//ä»£ç å‹ç¼©å\n[1,2,3].map(function(a){return console.log(a)});</code></pre>\n<p>å°±æ˜¯åšäº†ä¸Šè¿°çš„æ“ä½œï¼Œæ‰èƒ½ä½¿å¾—æˆ‘ä»¬åœ¨å†™å‰ç«¯ä»£ç çš„æ—¶å€™ï¼Œä½¿ç”¨æœ€æ–°çš„ ECMAScript è¯­æ³•ï¼Œå¹¶ä¸”å°½å¯èƒ½çš„å‹ç¼©ä»£ç çš„ä½“ç§¯ï¼Œä½¿å¾—æµè§ˆå™¨åŠ è½½é™æ€è„šæœ¬æ—¶èƒ½æ›´åŠ å¿«é€Ÿã€‚</p>\n<h2>ä¼ ç»Ÿçš„æ¨¡å—åŒ–</h2>\n<p>éšç€ Ajax çš„æµè¡Œï¼Œå‰ç«¯å·¥ç¨‹å¸ˆèƒ½åšçš„äº‹æƒ…å°±ä¸åªæ˜¯â€œåˆ‡å›¾â€ è¿™ä¹ˆç®€å•ï¼Œç°åœ¨å‰ç«¯å·¥ç¨‹å¸ˆèƒ½åšçš„è¶Šæ¥è¶Šå¤šï¼Œå¼€å§‹å‡ºç°äº†æ˜ç¡®çš„åˆ†å·¥ï¼Œå¹¶ä¸”èƒ½å¤Ÿä¸æœåŠ¡ç«¯å·¥ç¨‹å¸ˆè¿›è¡Œæ•°æ®è”è°ƒã€‚è¿™é‡Œè¯´çš„ä¼ ç»Ÿæ¨¡å—åŒ–è¿˜ä¸æ˜¯åç°ä»£çš„æ¨¡å—åŒ–ï¼Œæ—©æœŸçš„æ¨¡å—åŒ–æ˜¯ä¸å€ŸåŠ©ä»»ä½•å·¥å…·çš„ï¼Œçº¯å±ç”± JavaScript å®Œæˆä»£ç çš„ç»“æ„åŒ–ã€‚åœ¨ä¼ ç»Ÿçš„æ¨¡å—åŒ–ä¸­æˆ‘ä»¬ä¸»è¦æ˜¯å°†ä¸€äº›èƒ½å¤Ÿå¤ç”¨çš„ä»£ç æŠ½æˆå…¬å…±æ–¹æ³•ï¼Œä»¥ä¾¿ç»Ÿä¸€ç»´æŠ¤å’Œç®¡ç†ï¼Œæ¯”å¦‚ä¸‹é¢ä»£ç ã€‚</p>\n<pre><code>function show(id) {\n  document.getElementById(id).setAttribute('style', \"display: block\")\n}\nfunction hide(id) {\n  document.getElementById(id).setAttribute('style', \"display: none\")\n}</code></pre>\n<p>ç„¶åï¼Œæˆ‘ä»¬å°†è¿™äº›å·¥å…·å‡½æ•°å°è£…åˆ°ä¸€ä¸ª JS è„šæœ¬æ–‡ä»¶é‡Œï¼Œåœ¨éœ€è¦ä½¿ç”¨å®ƒä»¬çš„åœ°æ–¹è¿›è¡Œå¼•å…¥ã€‚</p>\n<pre><code>&lt;script scr=\"./utils.js\"&gt;&lt;/script&gt;</code></pre>\n<p>ä½†æ˜¯ï¼Œè¿™ç§åšæ³•ä¼šè¡ç”Ÿå‡ºä¸¤ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼Œä¸€ä¸ªæ˜¯å…¨å±€å˜é‡çš„æ±¡æŸ“ï¼Œå¦ä¸€ä¸ªæ˜¯äººå·¥ç»´æŠ¤æ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ä¼šé€ æˆä»£ç çš„æ··ä¹±ã€‚</p>\n<p>ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬çš„é¡¹ç›®æœ‰åå‡ ä¸ªç”šè‡³å‡ åä¸ªäººç»´æŠ¤çš„æ—¶å€™ï¼Œéš¾å…ä¼šæœ‰äººåœ¨å…¬ç”¨ç»„ä»¶ä¸­æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œæ¯”å¦‚ show è¿™ä¸ªæ–¹æ³•ä¸€æ—¦è¢«è¦†ç›–äº†ï¼Œä½¿ç”¨å®ƒçš„äººä¼šå¾—åˆ°å’Œé¢„æœŸä¸åŒçš„ç»“æœï¼Œè¿™æ ·å°±é€ æˆçš„å…¨å±€å˜é‡çš„æ±¡æŸ“ã€‚å¦ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºçœŸå®é¡¹ç›®ä¸­çš„å…¬ç”¨è„šæœ¬ä¹‹é—´çš„ä¾èµ–å…³ç³»æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œæ¯”å¦‚ c è„šæœ¬ä¾èµ– b è„šæœ¬ï¼Œa è„šæœ¬ä¾èµ– b è„šæœ¬ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨å¼•å…¥çš„æ—¶å€™å°±è¦æ³¨æ„å¿…é¡»è¦è¿™æ ·å¼•å…¥ã€‚</p>\n<pre><code>&lt;script scr=\"c.js\"&gt;&lt;/script&gt;\n&lt;script scr=\"b.js\"&gt;&lt;/script&gt;\n&lt;script scr=\"a.js\"&gt;&lt;/script&gt;</code></pre>\n<p>è¦è¿™æ ·å¼•å…¥æ‰èƒ½ä¿è¯ a è„šæœ¬çš„æ­£å¸¸è¿è¡Œï¼Œå¦åˆ™å°±ä¼šæŠ¥é”™ã€‚å¯¹äºè¿™ç±»é—®é¢˜ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•è§£å†³è¿™æ ·çš„é—®é¢˜å‘¢ï¼Ÿ</p>\n<h3>å…¨å±€å˜é‡çš„æ±¡æŸ“</h3>\n<p>è§£å†³è¿™ä¸ªé—®é¢˜æœ‰ä¸¤ç§ï¼Œå…ˆè¯´è¯´æ²»æ ‡ä¸æ²»æœ¬çš„æ–¹æ³•ï¼Œæˆ‘ä»¬é€šè¿‡å›¢é˜Ÿè§„èŒƒå¼€å‘æ–‡æ¡£ï¼Œæ¯”å¦‚è¯´æˆ‘æœ‰ä¸ªæ–¹æ³•ï¼Œæ˜¯åœ¨è´­ç‰©è½¦æ¨¡å—ä¸­ä½¿ç”¨çš„ï¼Œå¯ä»¥å¦‚ä¸‹ä¹¦å†™ã€‚</p>\n<pre><code>var shop.cart.utils = {\n  show: function(id) {\n    document.getElementById(id).setAttribute('style', \"display: block\")\n  },\n  hide: function(id) {\n    document.getElementById(id).setAttribute('style', \"display: none\")\n  }\n}</code></pre>\n<p>è¿™æ ·å°±èƒ½æ¯”è¾ƒæœ‰æ•ˆçš„é¿å¼€å…¨å±€å˜é‡çš„æ±¡æŸ“ï¼ŒæŠŠæ–¹æ³•å†™åˆ°å¯¹è±¡é‡Œï¼Œå†é€šè¿‡å¯¹è±¡å»è°ƒç”¨ã€‚ä¸“ä¸šæœ¯è¯­ä¸Šè¿™å«å‘½åç©ºé—´çš„è§„èŒƒï¼Œä½†æ˜¯è¿™æ ·æ¨¡å—å¤šäº†å˜é‡åä¼šæ¯”è¾ƒç´¯èµ˜ï¼Œä¸€å†™å°±æ˜¯ä¸€é•¿ä¸²ï¼Œæ‰€ä»¥æˆ‘å«å®ƒæ²»æ ‡ä¸æ²»æœ¬ã€‚</p>\n<p>è¿˜æœ‰ä¸€ç§æ¯”è¾ƒä¸“ä¸šçš„æ–¹æ³•æŠ€æœ¯é€šè¿‡ç«‹å³æ‰§è¡Œå‡½æ•°å®Œæˆé—­åŒ…å°è£…ï¼Œä¸ºäº†è§£å†³å°è£…å†…å˜é‡çš„é—®é¢˜ï¼Œç«‹å³æ‰§è¡Œå‡½æ•°æ˜¯ä¸ªå¾ˆå¥½çš„åŠæ³•ï¼Œè¿™ä¹Ÿæ˜¯æ—©æœŸå¾ˆå¤šå¼€å‘æ­£åœ¨ä½¿ç”¨çš„æ–¹å¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p>\n<pre><code>(function() { \n   var Cart = Cart || {};\n   function show (id) {\n     document.getElementById(id).setAttribute('style', \"display: block\")\n   }\n   function hide (id) {\n     document.getElementById(id).setAttribute('style', \"display: none\")\n   }\n   Cart.Util = {\n     show: show,\n     hide: hide\n   }\n})();</code></pre>\n<p>ä¸Šè¿°ä»£ç ï¼Œé€šè¿‡ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œç»™äºˆäº†æ¨¡å—çš„ç‹¬ç«‹ä½œç”¨åŸŸï¼ŒåŒæ—¶é€šè¿‡å…¨å±€å˜é‡é…ç½®äº†æˆ‘ä»¬çš„æ¨¡å—ï¼Œè¾¾åˆ°äº†æ¨¡å—åŒ–çš„ç›®çš„ã€‚</p>\n<h2>å½“å‰çš„æ¨¡å—åŒ–æ–¹æ¡ˆ</h2>\n<p>å…ˆæ¥è¯´è¯´ CommonJS è§„èŒƒï¼Œåœ¨ Node.JS å‘å¸ƒä¹‹åï¼ŒCommonJS æ¨¡å—åŒ–è§„èŒƒå°±è¢«ç”¨åœ¨äº†é¡¹ç›®å¼€å‘ä¸­ï¼Œå®ƒæœ‰å‡ ä¸ªæ¦‚å¿µç»™å¤§å®¶è§£é‡Šä¸€ä¸‹ã€‚</p>\n<ul>\n <li>æ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œå®ƒéƒ½æœ‰å±äºè‡ªå·±çš„ä½œç”¨åŸŸï¼Œå†…éƒ¨å®šä¹‰çš„å˜é‡ã€å‡½æ•°éƒ½æ˜¯ç§æœ‰çš„ï¼Œå¯¹å¤–æ˜¯ä¸å¯è§çš„ï¼›</li>\n <li>æ¯ä¸ªæ¨¡å—å†…éƒ¨çš„ module å˜é‡ä»£è¡¨å½“å‰æ¨¡å—ï¼Œè¿™ä¸ªå˜é‡æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼›</li>\n <li>module çš„ exports å±æ€§æ˜¯å¯¹å¤–çš„æ¥å£ï¼ŒåŠ è½½æŸä¸ªæ¨¡å—å…¶å®å°±æ˜¯åœ¨åŠ è½½æ¨¡å—çš„ module.exports å±æ€§ï¼›</li>\n <li>ä½¿ç”¨ require å…³é”®å­—åŠ è½½å¯¹åº”çš„æ¨¡å—ï¼Œrequire çš„åŸºæœ¬åŠŸèƒ½å°±æ˜¯è¯»å…¥å¹¶æ‰§è¡Œä¸€ä¸ª JavaScript æ–‡ä»¶ï¼Œç„¶åè¿”å›æ”¹æ¨¡å—çš„ exports å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰çš„è¯ä¼šæŠ¥é”™çš„ï¼›</li>\n</ul>\n<p>ä¸‹é¢æ¥çœ‹ä¸€ä¸‹ç¤ºä¾‹ï¼Œæˆ‘ä»¬å°±å°†ä¸Šé¢æåˆ°è¿‡çš„ä»£ç é€šè¿‡ CommonJS æ¨¡å—åŒ–ã€‚</p>\n<pre><code>module.exports = {\n  show: function (id) {\n    document.getElementById(id).setAttribute('style', \"display: block\")\n  },\n  hide: function (id) {\n    document.getElementById(id).setAttribute('style', \"display: none\")\n  }\n}\n// ä¹Ÿå¯ä»¥è¾“å‡ºå•ä¸ªæ–¹æ³•\nmodule.exports.show = function (id) {\n  document.getElementById(id).setAttribute('style', \"display: block\")\n}\n\n// å¼•å…¥çš„æ–¹å¼\nvar utils = require('./utils')\n// ä½¿ç”¨å®ƒ\nutils.show(\"body\")</code></pre>\n<p>é™¤äº† CommonJS è§„èŒƒå¤–ï¼Œè¿˜æœ‰å‡ ä¸ªç°åœ¨åªèƒ½åœ¨è€é¡¹ç›®é‡Œæ‰èƒ½çœ‹åˆ°çš„æ¨¡å—åŒ–æ¨¡å¼ï¼Œæ¯”å¦‚ä»¥ require.js ä¸ºä»£è¡¨çš„ AMDï¼ˆAsynchronous Module Definitionï¼‰ è§„èŒƒ å’Œ ç‰ä¼¯å›¢é˜Ÿå†™çš„ sea.js ä¸ºä»£è¡¨çš„ CMDï¼ˆCommon Module Definitionï¼‰ è§„èŒƒã€‚<br>AMD çš„ç‰¹ç‚¹ï¼šæ˜¯ä¸€æ­¥åŠ è½½æ¨¡å—ï¼Œä½†æ˜¯å‰ææ˜¯ä¸€å¼€å§‹å°±è¦å°†æ‰€æœ‰çš„ä¾èµ–é¡¹åŠ è½½å®Œå…¨ã€‚CMD çš„ç‰¹ç‚¹æ˜¯ï¼šä¾èµ–å»¶è¿Ÿï¼Œåœ¨éœ€è¦çš„æ—¶å€™æ‰å»åŠ è½½ã€‚</br></p>\n<h3>AMD</h3>\n<p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•é€šè¿‡ AMD è§„èŒƒçš„ require.js ä¹¦å†™ä¸Šè¿°æ¨¡å—åŒ–ä»£ç ã€‚</p>\n<pre><code>define(['home'], function(){\n  function show(id) {\n    document.getElementById(id).setAttribute('style', \"display: block\")\n  }\n    function hide(id) {\n    document.getElementById(id).setAttribute('style', \"display: none\")\n  }\n  return {\n    show: show,\n    hide: hide\n  };\n});\n\n// åŠ è½½æ¨¡å—\nrequire(['utils'], function (cart){\nã€€ cart.show('body');\n});</code></pre>\n<p>require.js å®šä¹‰äº†ä¸€ä¸ªå‡½æ•° defineï¼Œå®ƒæ˜¯å…¨å±€å˜é‡ï¼Œç”¨æ¥å®šä¹‰æ¨¡å—ï¼Œå®ƒçš„è¯­æ³•è§„èŒƒå¦‚ä¸‹ï¼š </p>\n<p><strong>define(id, dependencies, factory)</strong></p>\n<ul>\n <li>idï¼šå®ƒæ˜¯å¯é€‰å‚æ•°ï¼Œç”¨äºæ ‡è¯†æ¨¡å—ï¼›</li>\n <li>dependenciesï¼šå½“å‰æ¨¡å—æ‰€ä¾èµ–çš„æ¨¡å—åç§°æ•°ç»„ï¼Œå¦‚ä¸Šè¿°æ¨¡å—ä¾èµ– home æ¨¡å—ï¼Œè¿™å°±è§£å†³äº†ä¹‹å‰è¯´çš„æ¨¡å—ä¹‹é—´ä¾èµ–å…³ç³»æ¢ä¹±çš„é—®é¢˜ï¼Œé€šè¿‡è¿™ä¸ªå‚æ•°å¯ä»¥å°†å‰ç½®ä¾èµ–æ¨¡å—åŠ è½½è¿›æ¥ï¼›</li>\n <li>factoryï¼šæ¨¡å—åˆå§‹åŒ–è¦æ‰§è¡Œçš„å‡½æ•°æˆ–å¯¹è±¡ã€‚</li>\n</ul>\n<p><strong>require([dependencies], function(){})</strong></p>\n<p>ç„¶åï¼Œåœ¨å…¶ä»–æ–‡ä»¶ä¸­ä½¿ç”¨ require è¿›è¡Œå¼•å…¥ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºéœ€è¦ä¾èµ–çš„æ¨¡å—æ•°ç»„ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå½“å‰é¢çš„ä¾èµ–æ¨¡å—è¢«åŠ è½½æˆåŠŸä¹‹åï¼Œå›è°ƒå‡½æ•°ä¼šè¢«æ‰§è¡Œï¼ŒåŠ è½½è¿›æ¥çš„æ¨¡å—å°†ä¼šä»¥å‚æ•°çš„å½¢å¼ä¼ å…¥å‡½æ•°å†…ï¼Œä»¥ä¾¿è¿›è¡Œå…¶ä»–æ“ä½œã€‚</p>\n<h3>CMD</h3>\n<p>sea.js å’Œ require.js è§£å†³çš„é—®é¢˜å…¶å®æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯è¿è¡Œçš„æœºåˆ¶ä¸åŒï¼Œéµå¾ªçš„æ˜¯å°±è¿‘ä¾èµ–ï¼Œæ¥çœ‹ä¸‹ä½¿ç”¨CMDæ–¹å¼å®ç°çš„æ¨¡å—åŒ–ä»£ç ã€‚</p>\n<pre><code>define(function(require, exports, module) {\n  function show(id) {\n    document.getElementById(id).setAttribute('style', \"display: block\")\n  }\n  exports.show = show\n});\n\n&lt;script type=\"text/javascript\" src=\"sea.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n  // å¼•å…¥æ¨¡å—é€šè¿‡seajs.useï¼Œç„¶åå¯ä»¥åœ¨å›è°ƒå‡½æ•°å†…ä½¿ç”¨ä¸Šé¢æ¨¡å—å¯¼å‡ºçš„æ–¹æ³•\n  seajs.use('./utils.js',function (show) {\n        show('#box');\n  }); \n&lt;/script&gt;</code></pre>\n<p>é¦–å…ˆæ˜¯å¼•å…¥ sea.js åº“ï¼Œå®šä¹‰å’Œå¯¼å‡ºæ¨¡å—åˆ†åˆ«æ˜¯ define() å’Œ exportsï¼Œå¯ä»¥åœ¨å®šä¹‰æ¨¡å—çš„æ—¶å€™é€šè¿‡ require å‚æ•°æ‰‹åŠ¨å¼•å…¥éœ€è¦ä¾èµ–çš„æ¨¡å—ï¼Œä½¿ç”¨æ¨¡å—é€šè¿‡ seajs.useã€‚</p>\n<h3>ES6</h3>\n<p>ES6 æå‡ºäº†æœ€æ–°çš„æ¨¡å—åŒ–æ–¹æ¡ˆï¼Œå¹¶ä¸”å¼•å…¥äº†ç±»çš„æœºåˆ¶ï¼Œè®© JavaScript ä»æ—©æœŸçš„è¡¨å•éªŒè¯è„šæœ¬è¯­è¨€æ‘‡èº«ä¸€å˜æˆäº†ä¸€ä¸ªé¢å‘å¯¹è±¡çš„è¯­è¨€äº†ã€‚ES6 çš„æ¨¡å—åŒ–ä½¿ç”¨çš„æ˜¯ import/export å…³é”®å­—æ¥å®ç°å¯¼å…¥å’Œå¯¼å‡ºï¼Œå¹¶ä¸”è‡ªåŠ¨é‡‡ç”¨çš„æ˜¯ä¸¥æ ¼æ¨¡å¼ï¼ˆuse strictï¼‰ï¼Œè€ƒè™‘åˆ°éƒ½æ˜¯è¿è¡Œåœ¨æ¨¡å—ä¹‹ä¸­ï¼Œæ‰€ä»¥ ES6 å®é™…ä¸ŠæŠŠæ•´ä¸ªè¯­è¨€éƒ½å‡åˆ°äº†ä¸¥æ ¼æ¨¡å¼ã€‚</p>\n<p>åœ¨ ES6 ä¸­æ¯ä¸€ä¸ªæ¨¡å—å³æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶ä¸­å®šä¹‰å˜é‡ã€å‡½æ•°ã€å¯¹è±¡åœ¨å¤–éƒ¨æ˜¯æ— æ³•è·å–çš„ã€‚å¦‚æœæƒ³è¦è·å–æ¨¡å—å†…çš„å†…å®¹ï¼Œå°±å¿…é¡»ä½¿ç”¨ export å…³é”®å­—æ¥å¯¹å…¶è¿›è¡Œæš´éœ²ã€‚æˆ‘ä»¬æŠŠä¹‹å‰çš„å…¬ç”¨è„šæœ¬ç”¨ ES6 çš„å½¢å¼å†é‡æ„ä¸€éã€‚</p>\n<pre><code>// utils.js\nconst show = () =&gt; {\n  document.getElementById(id).setAttribute('style', 'display: block');\n}\nconst hide = () =&gt; {\n  document.getElementById(id).setAttribute('style', 'display: none');\n}\n\nexport {\n    show,\n  hide\n}\n// æˆ–è€…ç›´æ¥æŠ›å‡ºæ–¹æ³•\nexport const show = (id) =&gt; {\n  document.getElementById(id).setAttribute('style', 'display: block');\n}\nexport const hide = (id) =&gt; {\n  document.getElementById(id).setAttribute('style', 'display: none');\n}\n\n// å¤–éƒ¨å¼•å…¥æ¨¡å—\nimport { show, hide } from './utils'</code></pre>\n<p>å¯ä»¥å‘ç°ï¼ŒES6 çš„å†™æ³•æ›´åŠ æ¸…æ™°ã€‚å…·å¤‡äº†é¢å‘å¯¹è±¡å’Œé¢å‘å‡½æ•°çš„ç‰¹å¾ï¼Œå¯è¯»æ€§æ›´å¼ºã€‚</p>","descriptionType":"html","publishedDate":"Mon, 24 Aug 2020 02:15:44 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/remote/1460000023735009","linkMd5":"83e2007305092901a28598ddbadd1356","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn18@2020_4/2020/08/24/23-08-23-811_c3c6f2a2a3fccaba.webp","destWidth":800,"destHeight":290,"sourceBytes":36632,"destBytes":9762,"author":"xiangzhihong","articleImgCdnMap":{"https://segmentfault.com/img/remote/1460000023735009":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn18@2020_4/2020/08/24/23-08-23-811_c3c6f2a2a3fccaba.webp","https://segmentfault.com/img/remote/1460000023735010":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn30@2020_2/2020/08/24/23-08-33-394_30a2866aebb9679b.webp","https://segmentfault.com/img/remote/1460000023735011":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn25@2020_3/2020/08/24/23-08-33-283_8449a79cab74d294.webp","https://segmentfault.com/img/remote/1460000023735012":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn22@2020_6/2020/08/24/23-08-33-580_0ee43b08f5e73b73.webp","https://segmentfault.com/img/remote/1460000023735013":"https://cdn.jsdelivr.net/gh/myreaderx25/cdn18@2020_2/2020/08/24/23-08-33-574_ca64795440519632.webp","https://segmentfault.com/img/remote/1460000023735014":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn13@2020_6/2020/08/24/23-08-33-616_a24995aea600c1a0.webp"},"publishedOrCreatedDate":1598310388562},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"å‰ç«¯å·¥ç¨‹å¸ˆä¸å¯ä¸çŸ¥çš„NginxçŸ¥è¯†","link":"https://segmentfault.com/a/1190000023730234","description":"<p><img src=\"https://segmentfault.com/img/bVbLJtP\" alt=\"image\" title=\"image\" /></p>\n<p><strong>è§‚æ„Ÿåº¦ï¼šğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</strong></p>\n<p><strong>å£å‘³ï¼šè™çš®é¸¡è›‹</strong></p>\n<p><strong>çƒ¹é¥ªæ—¶é—´ï¼š10min</strong></p>\n<blockquote>\n æœ¬æ–‡å·²æ”¶å½•åœ¨å‰ç«¯é£Ÿå ‚åŒåä»“åº“\n <code>Github</code> \n <a href=\"https://github.com/Geekhyt/front-end-canteen\" rel=\"nofollow noreferrer\">github.com/Geekhyt</a>ï¼Œæ¬¢è¿å…‰ä¸´é£Ÿå ‚ï¼Œå¦‚æœè§‰å¾—é…’èœè¿˜ç®—å¯å£ï¼Œèµä¸ª Star å¯¹é£Ÿå ‚è€æ¿æ¥è¯´æ˜¯è«å¤§çš„é¼“åŠ±ã€‚\n</blockquote>\n<h2>å†å²èƒŒæ™¯</h2>\n<p>äº’è”ç½‘çš„å…¨çƒåŒ–å¯¼è‡´äº†äº’è”ç½‘çš„æ•°æ®é‡å¿«é€Ÿå¢é•¿ï¼ŒåŠ ä¸Šåœ¨æœ¬ä¸–çºªåˆæ‘©å°”å®šå¾‹åœ¨å•æ ¸ CPU ä¸Šçš„å¤±æ•ˆï¼ŒCPU æœç€å¤šæ ¸æ–¹å‘å‘å±•ï¼Œè€Œ Apache æ˜¾ç„¶å¹¶æ²¡æœ‰åšå¥½å¤šæ ¸æ¶æ„çš„å‡†å¤‡ï¼Œå®ƒçš„ä¸€ä¸ªè¿›ç¨‹åŒä¸€æ—¶é—´åªèƒ½å¤„ç†ä¸€ä¸ªè¿æ¥ï¼Œå¤„ç†å®Œä¸€ä¸ªè¯·æ±‚åæ‰èƒ½å¤„ç†ä¸‹ä¸€ä¸ªï¼Œè¿™æ— ç–‘ä¸èƒ½åº”å¯¹å¦‚ä»Šäº’è”ç½‘ä¸Šæµ·é‡çš„ç”¨æˆ·ã€‚å†µä¸”è¿›ç¨‹é—´åˆ‡æ¢çš„æˆæœ¬æ˜¯éå¸¸é«˜çš„ã€‚åœ¨è¿™ç§èƒŒæ™¯ä¸‹ï¼ŒNginx åº”è¿è€Œç”Ÿï¼Œå¯ä»¥è½»æ¾å¤„ç†æ•°ç™¾ä¸‡ã€ä¸Šåƒä¸‡çš„è¿æ¥ã€‚</p>\n<h2>Nginx ä¼˜åŠ¿</h2>\n<ul>\n <li>é«˜å¹¶å‘é«˜æ€§èƒ½</li>\n <li>å¯æ‰©å±•æ€§å¥½</li>\n <li>é«˜å¯é æ€§</li>\n <li>çƒ­éƒ¨ç½²</li>\n <li>å¼€æºè®¸å¯è¯</li>\n</ul>\n<h2>Nginx ä¸»è¦åº”ç”¨åœºæ™¯</h2>\n<ul>\n <li>é™æ€èµ„æºæœåŠ¡ï¼Œé€šè¿‡æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿæä¾›æœåŠ¡</li>\n <li>åå‘ä»£ç†æœåŠ¡ã€è´Ÿè½½å‡è¡¡</li>\n <li>APIæœåŠ¡ã€æƒé™æ§åˆ¶ï¼Œå‡å°‘åº”ç”¨æœåŠ¡å™¨å‹åŠ›</li>\n</ul>\n<h2>Nginx é…ç½®æ–‡ä»¶å’Œç›®å½•</h2>\n<p>é€šè¿‡ <code>rpm -ql nginx</code> å¯ä»¥æŸ¥çœ‹ Nginx å®‰è£…çš„é…ç½®æ–‡ä»¶å’Œç›®å½•ã€‚</p>\n<p>å¦‚å›¾æ˜¯æˆ‘åœ¨æŸæŸäº‘ä¸Šå®‰è£…çš„æœ€æ–°ç¨³å®šç‰ˆæœ¬çš„Nginxçš„é…ç½®æ–‡ä»¶åŠç›®å½•ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023730237\" alt=\"\" title=\"\" /></p>\n<ul>\n <li>/etc/nginx/nginx.conf æ ¸å¿ƒé…ç½®æ–‡ä»¶</li>\n <li>/etc/nginx/conf.d/default.conf é»˜è®¤httpæœåŠ¡å™¨é…ç½®æ–‡ä»¶</li>\n <li>/etc/nginx/fastcgi_params fastcgié…ç½®</li>\n <li>/etc/nginx/scgi_params scgié…ç½®</li>\n <li>/etc/nginx/uwsgi_params uwsgié…ç½®</li>\n <li>/etc/nginx/koi-utf</li>\n <li>/etc/nginx/koi-win</li>\n <li>/etc/nginx/win-utf è¿™ä¸‰ä¸ªæ–‡ä»¶æ˜¯ç¼–ç æ˜ å°„æ–‡ä»¶ï¼Œå› ä¸ºä½œè€…æ˜¯ä¿„å›½äºº</li>\n <li>/etc/nginx/mime.types è®¾ç½®HTTPåè®®çš„Content-Typeä¸æ‰©å±•åå¯¹åº”å…³ç³»çš„æ–‡ä»¶</li>\n <li>/usr/lib/systemd/system/nginx-debug.service</li>\n <li>/usr/lib/systemd/system/nginx.service</li>\n <li>/etc/sysconfig/nginx</li>\n <li>/etc/sysconfig/nginx-debug è¿™å››ä¸ªæ–‡ä»¶æ˜¯ç”¨æ¥é…ç½®å®ˆæŠ¤è¿›ç¨‹ç®¡ç†çš„</li>\n <li>/etc/nginx/modules åŸºæœ¬å…±äº«åº“å’Œå†…æ ¸æ¨¡å—</li>\n <li>/usr/share/doc/nginx-1.18.0 å¸®åŠ©æ–‡æ¡£</li>\n <li>/usr/share/doc/nginx-1.18.0/COPYRIGHT ç‰ˆæƒå£°æ˜</li>\n <li>/usr/share/man/man8/nginx.8.gz æ‰‹å†Œ</li>\n <li>/var/cache/nginx Nginxçš„ç¼“å­˜ç›®å½•</li>\n <li>/var/log/nginx Nginxçš„æ—¥å¿—ç›®å½•</li>\n <li>/usr/sbin/nginx å¯æ‰§è¡Œå‘½ä»¤</li>\n <li>/usr/sbin/nginx-debug è°ƒè¯•æ‰§è¡Œå¯æ‰§è¡Œå‘½ä»¤</li>\n</ul>\n<p>å…³äº Nginx çš„å¸¸ç”¨å‘½ä»¤ä»¥åŠé…ç½®æ–‡ä»¶è¯­æ³•å¾ˆå®¹æ˜“å°±å¯ä»¥æœåˆ°ï¼Œæœ¬æ–‡ä¸ä½œèµ˜è¿°ï¼Œä¸‹é¢ä» Nginx çš„åŠŸèƒ½ä»¥åŠå®é™…åœºæ™¯å‡ºå‘çœ‹ä¸€çœ‹å„ä¸ªåœºæ™¯ä¸‹ Nginx å¯ä»¥æä¾›ç»™æˆ‘ä»¬å“ªäº›é…ç½®é¡¹ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥æ˜ç¡®ä¸¤ä¸ªæ¦‚å¿µï¼š</p>\n<h2>æ­£å‘ä»£ç† Forward proxy</h2>\n<p>ä¸€å¥è¯è§£é‡Šæ­£å‘ä»£ç†ï¼Œæ­£å‘ä»£ç†çš„å¯¹è±¡æ˜¯å®¢æˆ·ç«¯ï¼ŒæœåŠ¡å™¨ç«¯çœ‹ä¸åˆ°çœŸæ­£çš„å®¢æˆ·ç«¯ã€‚<br><img src=\"https://segmentfault.com/img/remote/1460000023730238\" alt=\"\" title=\"\" /></br></p>\n<pre><code>resolver 8.8.8.8 # è°·æ­Œçš„åŸŸåè§£æåœ°å€\nserver {\n    location / {\n      # å½“å®¢æˆ·ç«¯è¯·æ±‚æˆ‘çš„æ—¶å€™ï¼Œæˆ‘ä¼šæŠŠè¯·æ±‚è½¬å‘ç»™å®ƒ\n      # $http_host è¦è®¿é—®çš„ä¸»æœºå $request_uri è¯·æ±‚è·¯å¾„\n      proxy_pass http://$http_host$request_uri;\n    }\n}</code></pre>\n<h2>åå‘ä»£ç† Reverse proxy</h2>\n<p>ä¸€å¥è¯è§£é‡Šåå‘ä»£ç†ï¼Œåå‘ä»£ç†çš„å¯¹è±¡æ˜¯æœåŠ¡ç«¯ï¼Œå®¢æˆ·ç«¯çœ‹ä¸åˆ°çœŸæ­£çš„æœåŠ¡ç«¯ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023730240\" alt=\"\" title=\"\" /></p>\n<h2>è·¨åŸŸ</h2>\n<p>è·¨åŸŸæ˜¯å‰ç«¯å·¥ç¨‹å¸ˆéƒ½ä¼šé¢ä¸´çš„åœºæ™¯ï¼Œè·¨åŸŸçš„è§£å†³æ–¹æ¡ˆæœ‰å¾ˆå¤šã€‚ä¸è¿‡è¦çŸ¥é“åœ¨ç”Ÿäº§ä¸­ï¼Œè¦ä¹ˆä½¿ç”¨ CORS ã€è¦ä¹ˆä½¿ç”¨ Nginx åå‘ä»£ç†æ¥è§£å†³è·¨åŸŸã€‚åœ¨ Nginx çš„é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œå¦‚ä¸‹é…ç½®å³å¯ï¼š</p>\n<pre><code>server {\n    listen   80;\n    server_name   localhost; # ç”¨æˆ·è®¿é—® localhostï¼Œåå‘ä»£ç†åˆ° http://webcanteen.com\n    location / {\n        proxy_pass http://webcanteen.com\n    }\n}</code></pre>\n<h2>Gzip</h2>\n<p>Gzip æ˜¯äº’è”ç½‘ä¸Šéå¸¸æ™®éçš„ä¸€ç§æ•°æ®å‹ç¼©æ ¼å¼ï¼Œå¯¹äºçº¯æ–‡æœ¬æ¥è¯´å¯ä»¥å‹ç¼©åˆ°åŸå¤§å°çš„ 40%ï¼Œå¯ä»¥èŠ‚çœå¤§é‡çš„å¸¦å®½ã€‚ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯ç”¨ Gzip æ‰€éœ€çš„ HTTP æœ€ä½ç‰ˆæœ¬æ˜¯ 1.1ã€‚</p>\n<pre><code>location ~ .*\\. (jpg|png|gif)$ {\n    gzip off; #å…³é—­å‹ç¼©\n    root /data/www/images;\n}\nlocation ~ .*\\. (html|js|css)$ {\n    gzip on; #å¯ç”¨å‹ç¼©\n    gzip_min_length 1k; # è¶…è¿‡1Kçš„æ–‡ä»¶æ‰å‹ç¼©\n    gzip_http_version 1.1; # å¯ç”¨gzipå‹ç¼©æ‰€éœ€çš„HTTPæœ€ä½ç‰ˆæœ¬\n    gzip_comp_level 9; # å‹ç¼©çº§åˆ«ï¼Œå‹ç¼©æ¯”ç‡è¶Šé«˜ï¼Œæ–‡ä»¶è¢«å‹ç¼©çš„ä½“ç§¯è¶Šå°\n    gzip_types text/css application/javascript; # è¿›è¡Œå‹ç¼©çš„æ–‡ä»¶ç±»å‹\n    root /data/www/html;\n}</code></pre>\n<h2>è¯·æ±‚é™åˆ¶</h2>\n<p>å¯¹äºå¤§æµé‡æ¶æ„çš„è®¿é—®ï¼Œä¼šé€ æˆå¸¦å®½çš„æµªè´¹ï¼Œç»™æœåŠ¡å™¨å¢åŠ å‹åŠ›ã€‚å¾€å¾€å¯¹äºåŒä¸€ IP çš„è¿æ¥æ•°ä»¥åŠå¹¶å‘æ•°è¿›è¡Œé™åˆ¶ã€‚</p>\n<p>å…³äºè¯·æ±‚é™åˆ¶ä¸»è¦æœ‰ä¸¤ç§ç±»å‹ï¼š</p>\n<ul>\n <li>limit_conn_module è¿æ¥é¢‘ç‡é™åˆ¶</li>\n <li>limit_req_module è¯·æ±‚é¢‘ç‡é™åˆ¶</li>\n</ul>\n<pre><code># $binary_remote_addr è¿œç¨‹IPåœ°å€ zone åŒºåŸŸåç§° 10må†…å­˜åŒºåŸŸå¤§å°\nlimit_conn_zone $binary_remote_addr zone=coon_zone:10m;\nserver {\n    # conn_zone è®¾ç½®å¯¹åº”çš„å…±äº«å†…å­˜åŒºåŸŸ 1æ˜¯é™åˆ¶çš„æ•°é‡\n    limit_conn conn_zone 1;\n}</code></pre>\n<pre><code># $binary_remote_addr è¿œç¨‹IPåœ°å€ zone åŒºåŸŸåç§° 10må†…å­˜åŒºåŸŸå¤§å° rate ä¸ºè¯·æ±‚é¢‘ç‡ 1s ä¸€æ¬¡\nlimit_req_zone $binary_remote_addr zone=req_zone:10m rate=1r/s;\nserver {\n    location / {\n        # è®¾ç½®å¯¹åº”çš„å…±äº«å†…å­˜åŒºåŸŸ burstæœ€å¤§è¯·æ±‚æ•°é˜ˆå€¼ nodelayä¸å¸Œæœ›è¶…è¿‡çš„è¯·æ±‚è¢«å»¶è¿Ÿ\n        limit_req zone=req_zone burst=5 nodelay;\n    }\n}</code></pre>\n<h2>è®¿é—®æ§åˆ¶</h2>\n<p>å…³äºè®¿é—®æ§åˆ¶ä¸»è¦æœ‰ä¸¤ç§ç±»å‹ï¼š</p>\n<ul>\n <li>-http_access_module åŸºäº IP çš„è®¿é—®æ§åˆ¶</li>\n <li>-http_auth_basic_module åŸºäºç”¨æˆ·çš„ä¿¡ä»»ç™»é™†</li>\n</ul>\n<p>(åŸºäºç”¨æˆ·çš„ä¿¡ä»»ç™»é™†ä¸æ˜¯å¾ˆå®‰å…¨ï¼Œæœ¬æ–‡ä¸åšé…ç½®ä»‹ç»)</p>\n<p>ä»¥ä¸‹æ˜¯åŸºäº IP çš„è®¿é—®æ§åˆ¶ï¼š</p>\n<pre><code>server {\n    location ~ ^/index.html {\n        # åŒ¹é… index.html é¡µé¢ é™¤äº† 127.0.0.1 ä»¥å¤–éƒ½å¯ä»¥è®¿é—®\n        deny 127.0.0.1;\n        allow all;\n    }\n}</code></pre>\n<h2>abå‘½ä»¤</h2>\n<p>abå‘½ä»¤å…¨ç§°ä¸ºï¼šApache benchï¼Œæ˜¯ Apache è‡ªå¸¦çš„å‹åŠ›æµ‹è¯•å·¥å…·ï¼Œä¹Ÿå¯ä»¥æµ‹è¯• Nginxã€IIS ç­‰å…¶ä»– Web æœåŠ¡å™¨ã€‚</p>\n<ul>\n <li>-n æ€»å…±çš„è¯·æ±‚æ•°</li>\n <li>-c å¹¶å‘çš„è¯·æ±‚æ•°</li>\n</ul>\n<pre><code>ab -n 1000 -c 5000 http://127.0.0.1/</code></pre>\n<h2>é˜²ç›—é“¾</h2>\n<p>é˜²ç›—é“¾çš„åŸç†å°±æ˜¯æ ¹æ®è¯·æ±‚å¤´ä¸­ referer å¾—åˆ°ç½‘é¡µæ¥æºï¼Œä»è€Œå®ç°è®¿é—®æ§åˆ¶ã€‚è¿™æ ·å¯ä»¥é˜²æ­¢ç½‘ç«™èµ„æºè¢«éæ³•ç›—ç”¨ï¼Œä»è€Œä¿è¯ä¿¡æ¯å®‰å…¨ï¼Œå‡å°‘å¸¦å®½æŸè€—ï¼Œå‡è½»æœåŠ¡å™¨å‹åŠ›ã€‚</p>\n<pre><code>location ~ .*\\.(jpg|png|gif)$ { # åŒ¹é…é˜²ç›—é“¾èµ„æºçš„æ–‡ä»¶ç±»å‹\n    # é€šè¿‡ valid_referers å®šä¹‰åˆæ³•çš„åœ°å€ç™½åå• $invalid_referer ä¸åˆæ³•çš„è¿”å›403  \n    valid_referers none blocked 127.0.0.1;\n    if ($invalid_referer) {\n        return 403;\n    }\n}</code></pre>\n<h2>è´Ÿè½½å‡è¡¡ Load Balance</h2>\n<p>å½“æˆ‘ä»¬çš„ç½‘ç«™éœ€è¦è§£å†³é«˜å¹¶å‘ã€æµ·é‡æ•°æ®é—®é¢˜æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨è´Ÿè½½å‡è¡¡æ¥è°ƒåº¦æœåŠ¡å™¨ã€‚å°†è¯·æ±‚åˆç†çš„åˆ†å‘åˆ°åº”ç”¨æœåŠ¡å™¨é›†ç¾¤ä¸­çš„ä¸€å°å°æœåŠ¡å™¨ä¸Šã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023730239\" alt=\"\" title=\"\" /></p>\n<p>Nginx å¯ä»¥ä¸ºæˆ‘ä»¬æä¾›è´Ÿè½½å‡è¡¡çš„èƒ½åŠ›ï¼Œå…·ä½“é…ç½®å¦‚ä¸‹ï¼š</p>\n<pre><code># upstream æŒ‡å®šåç«¯æœåŠ¡å™¨åœ°å€\n# weight è®¾ç½®æƒé‡\n# server ä¸­ä¼šå°† http://webcanteen çš„è¯·æ±‚è½¬å‘åˆ° upstream æ± ä¸­\nupstream webcanteen {\n    server 127.0.0.1:66 weight=10;\n    server 127.0.0.1:77 weight=1;\n    server 127.0.0.1:88 weight=1;\n}\nserver {\n    location / {\n        proxy_pass http://webcanteen\n    }\n}</code></pre>\n<h3>åç«¯æœåŠ¡å™¨çŠ¶æ€</h3>\n<p>åç«¯æœåŠ¡å™¨æ”¯æŒä»¥ä¸‹çš„çŠ¶æ€é…ç½®ï¼š</p>\n<ul>\n <li>downï¼šå½“å‰æœåŠ¡å™¨ä¸å‚ä¸è´Ÿè½½å‡è¡¡</li>\n <li>backupï¼šå½“å…¶ä»–èŠ‚ç‚¹éƒ½æ— æ³•ä½¿ç”¨æ—¶çš„å¤‡ç”¨æœåŠ¡å™¨</li>\n <li>max_failsï¼šå…è®¸è¯·æ±‚å¤±è´¥çš„æ¬¡æ•°ï¼Œè‹¥åˆ°è¾¾å°±ä¼šä¼‘çœ </li>\n <li>fail_timeoutï¼šç»è¿‡max_failsæ¬¡å¤±è´¥åï¼ŒæœåŠ¡å™¨çš„æš‚åœæ—¶é—´ï¼Œé»˜è®¤ä¸º10s</li>\n <li>max_connsï¼šé™åˆ¶æ¯ä¸ªæœåŠ¡å™¨çš„æœ€å¤§æ¥æ”¶è¿æ¥æ•°</li>\n</ul>\n<pre><code>upstream webcanteen {\n    server 127.0.0.1:66 down;\n    server 127.0.0.1:77 backup;\n    server 127.0.0.1:88  max_fails=3 fail_timeout=10s;\n    server 127.0.0.1:99 max_conns=1000;\n}</code></pre>\n<h3>åˆ†é…æ–¹å¼</h3>\n<ul>\n <li>è½®è¯¢(é»˜è®¤ï¼‰ï¼Œæ¯ä¸ªè¯·æ±‚æŒ‰ç…§æ—¶é—´é¡ºåºè½®æµåˆ†é…åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨ï¼Œå¦‚æœæŸå°åç«¯æœåŠ¡å™¨å®•æœºï¼ŒNginx è½®è¯¢åˆ—è¡¨ä¼šè‡ªåŠ¨å°†å®ƒå»é™¤æ‰ã€‚</li>\n <li>weight(åŠ æƒè½®è¯¢)ï¼Œè½®è¯¢çš„åŠ å¼ºç‰ˆï¼Œweight å’Œè®¿é—®å‡ ç‡æˆæ­£æ¯”ï¼Œä¸»è¦ç”¨äºåç«¯æœåŠ¡å™¨æ€§èƒ½ä¸å‡çš„åœºæ™¯ã€‚</li>\n <li>ip_hashï¼Œæ¯ä¸ªè¯·æ±‚æŒ‰ç…§è®¿é—® IP çš„ hash ç»“æœåˆ†é…ï¼Œè¿™æ ·æ¯ä¸ªè®¿é—®å¯ä»¥å›ºå®šè®¿é—®ä¸€ä¸ªåç«¯æœåŠ¡å™¨ã€‚</li>\n <li>url_hashï¼ŒæŒ‰ç…§è®¿é—® URL çš„ hash ç»“æœæ¥åˆ†é…è¯·æ±‚ï¼Œä½¿å¾—æ¯ä¸ªURLå®šå‘åˆ°åŒä¸€ä¸ªåç«¯æœåŠ¡å™¨ä¸Šï¼Œä¸»è¦åº”ç”¨äºåç«¯æœåŠ¡å™¨ä¸ºç¼“å­˜æ—¶çš„åœºæ™¯ã€‚</li>\n <li>è‡ªå®šä¹‰hashï¼ŒåŸºäºä»»æ„å…³é”®å­—ä½œä¸º hash key å®ç° hash ç®—æ³•çš„è´Ÿè½½å‡è¡¡</li>\n <li>fairï¼ŒæŒ‰ç…§åç«¯æœåŠ¡å™¨çš„å“åº”æ—¶é—´æ¥åˆ†é…è¯·æ±‚ï¼Œå“åº”æ—¶é—´çŸ­åˆ™ä¼˜å…ˆåˆ†é…ã€‚</li>\n</ul>","descriptionType":"html","publishedDate":"Sun, 23 Aug 2020 08:21:43 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/bVbLJtP","linkMd5":"3c5ab7837e45f9183c9783494075346a","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn86@2020_1/2020/08/24/23-08-23-023_4f776d9d8dfa05aa.webp","destWidth":800,"destHeight":340,"sourceBytes":93089,"destBytes":25484,"author":"ç«¥æ¬§å·´","articleImgCdnMap":{"https://segmentfault.com/img/bVbLJtP":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn86@2020_1/2020/08/24/23-08-23-023_4f776d9d8dfa05aa.webp","https://segmentfault.com/img/remote/1460000023730237":null,"https://segmentfault.com/img/remote/1460000023730238":null,"https://segmentfault.com/img/remote/1460000023730240":null,"https://segmentfault.com/img/remote/1460000023730239":null},"publishedOrCreatedDate":1598310388570},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"åˆ©ç”¨ React é«˜é˜¶ç»„ä»¶å®ç°ä¸€ä¸ªé¢åŒ…å±‘å¯¼èˆª","link":"https://segmentfault.com/a/1190000023711464","description":"<h2>ä»€ä¹ˆæ˜¯ React é«˜é˜¶ç»„ä»¶</h2>\n<p>React é«˜é˜¶ç»„ä»¶å°±æ˜¯ä»¥é«˜é˜¶å‡½æ•°çš„æ–¹å¼åŒ…è£¹éœ€è¦ä¿®é¥°çš„ React ç»„ä»¶ï¼Œå¹¶è¿”å›å¤„ç†å®Œæˆåçš„ React ç»„ä»¶ã€‚React é«˜é˜¶ç»„ä»¶åœ¨ React ç”Ÿæ€ä¸­ä½¿ç”¨çš„éå¸¸é¢‘ç¹ï¼Œæ¯”å¦‚<code>react-router</code> ä¸­çš„ <code>withRouter</code> ä»¥åŠ <code>react-redux</code> ä¸­ <code>connect</code> ç­‰è®¸å¤š API éƒ½æ˜¯ä»¥è¿™æ ·çš„æ–¹å¼æ¥å®ç°çš„ã€‚</p>\n<p>&lt;!-- more --&gt;</p>\n<h2>ä½¿ç”¨ React é«˜é˜¶ç»„ä»¶çš„å¥½å¤„</h2>\n<p>åœ¨å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šæœ‰å¾ˆå¤šåŠŸèƒ½ç›¸ä¼¼ï¼Œç»„ä»¶ä»£ç é‡å¤çš„é¡µé¢éœ€æ±‚ï¼Œé€šå¸¸æˆ‘ä»¬å¯ä»¥é€šè¿‡å®Œå…¨å¤åˆ¶ä¸€éä»£ç çš„æ–¹å¼å®ç°åŠŸèƒ½ï¼Œä½†æ˜¯è¿™æ ·é¡µé¢çš„ç»´æŠ¤å¯ç»´æŠ¤æ€§å°±ä¼šå˜å¾—æå·®ï¼Œéœ€è¦å¯¹æ¯ä¸€ä¸ªé¡µé¢é‡Œçš„ç›¸åŒç»„ä»¶å»åšæ›´æ”¹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶ä¸­å…±åŒçš„éƒ¨åˆ†ï¼Œæ¯”å¦‚æ¥å—ç›¸åŒçš„æŸ¥è¯¢æ“ä½œç»“æœã€ç»„ä»¶å¤–åŒä¸€çš„æ ‡ç­¾åŒ…è£¹ç­‰æŠ½ç¦»å‡ºæ¥ï¼Œåšä¸€ä¸ªå•ç‹¬çš„å‡½æ•°ï¼Œå¹¶ä¼ å…¥ä¸åŒçš„ä¸šåŠ¡ç»„ä»¶ä½œä¸ºå­ç»„ä»¶å‚æ•°ï¼Œè€Œè¿™ä¸ªå‡½æ•°ä¸ä¼šä¿®æ”¹å­ç»„ä»¶ï¼Œåªæ˜¯é€šè¿‡ç»„åˆçš„æ–¹å¼å°†å­ç»„ä»¶åŒ…è£…åœ¨å®¹å™¨ç»„ä»¶ä¸­ï¼Œæ˜¯ä¸€ä¸ªæ— å‰¯ä½œç”¨çš„çº¯å‡½æ•°ï¼Œä»è€Œæˆ‘ä»¬èƒ½å¤Ÿåœ¨ä¸æ”¹å˜è¿™äº›ç»„ä»¶é€»è¾‘çš„æƒ…å†µä¸‹å°†è¿™éƒ¨åˆ†ä»£ç è§£è€¦ï¼Œæå‡ä»£ç å¯ç»´æŠ¤æ€§ã€‚</p>\n<h2>è‡ªå·±åŠ¨æ‰‹å®ç°ä¸€ä¸ªé«˜é˜¶ç»„ä»¶</h2>\n<p>å‰ç«¯é¡¹ç›®é‡Œï¼Œå¸¦é“¾æ¥æŒ‡å‘çš„é¢åŒ…å±‘å¯¼èˆªååˆ†å¸¸ç”¨ï¼Œä½†ç”±äºé¢åŒ…å±‘å¯¼èˆªéœ€è¦æ‰‹åŠ¨ç»´æŠ¤ä¸€ä¸ªæ‰€æœ‰ç›®å½•è·¯å¾„ä¸ç›®å½•åæ˜ å°„çš„æ•°ç»„ï¼Œè€Œè¿™é‡Œæ‰€æœ‰çš„æ•°æ®æˆ‘ä»¬éƒ½èƒ½ä» <code>react-router</code> çš„è·¯ç”±è¡¨ä¸­å–å¾—ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä»è¿™é‡Œå…¥æ‰‹ï¼Œå®ç°ä¸€ä¸ªé¢åŒ…å±‘å¯¼èˆªçš„é«˜é˜¶ç»„ä»¶ã€‚</p>\n<p>é¦–å…ˆæˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬çš„è·¯ç”±è¡¨æä¾›çš„æ•°æ®ä»¥åŠç›®æ ‡é¢åŒ…å±‘ç»„ä»¶æ‰€éœ€è¦çš„æ•°æ®ï¼š</p>\n<pre><code class=\"js\">// è¿™é‡Œå±•ç¤ºçš„æ˜¯ react-router4 çš„routeç¤ºä¾‹\nlet routes = [\n  {\n    breadcrumb: 'ä¸€çº§ç›®å½•',\n    path: '/a',\n    component: require('../a/index.js').default,\n    items: [\n      {\n        breadcrumb: 'äºŒçº§ç›®å½•',\n        path: '/a/b',\n        component: require('../a/b/index.js').default,\n        items: [\n          {\n            breadcrumb: 'ä¸‰çº§ç›®å½•1',\n            path: '/a/b/c1',\n            component: require('../a/b/c1/index.js').default,\n            exact: true,\n          },\n          {\n            breadcrumb: 'ä¸‰çº§ç›®å½•2',\n            path: '/a/b/c2',\n            component: require('../a/b/c2/index.js').default,\n            exact: true,\n          },\n      }\n    ]\n  }\n]\n\n// ç†æƒ³ä¸­çš„é¢åŒ…å±‘ç»„ä»¶\n// å±•ç¤ºæ ¼å¼ä¸º a / b / c1 å¹¶éƒ½é™„ä¸Šé“¾æ¥\nconst BreadcrumbsComponent = ({ breadcrumbs }) =&gt; (\n  &lt;div&gt;\n    {breadcrumbs.map((breadcrumb, index) =&gt; (\n      &lt;span key={breadcrumb.props.path}&gt;\n        &lt;link to={breadcrumb.props.path}&gt;{breadcrumb}&lt;/link&gt;\n        {index &lt; breadcrumbs.length - 1 &amp;&amp; &lt;i&gt; / &lt;/i&gt;}\n      &lt;/span&gt;\n    ))}\n  &lt;/div&gt;\n);</code></pre>\n<p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œé¢åŒ…å±‘ç»„ä»¶éœ€è¦æä¾›çš„æ•°æ®ä¸€å…±æœ‰ä¸‰ç§ï¼Œä¸€ç§æ˜¯å½“å‰é¡µé¢çš„è·¯å¾„ï¼Œä¸€ç§æ˜¯é¢åŒ…å±‘æ‰€å¸¦çš„æ–‡å­—ï¼Œä¸€ç§æ˜¯è¯¥é¢åŒ…å±‘çš„å¯¼èˆªé“¾æ¥æŒ‡å‘ã€‚</p>\n<p>å…¶ä¸­ç¬¬ä¸€ç§æˆ‘ä»¬å¯ä»¥é€šè¿‡ react-router æä¾›çš„ withRouter é«˜é˜¶ç»„ä»¶åŒ…è£¹ï¼Œå¯ä½¿å­ç»„ä»¶è·å–åˆ°å½“å‰é¡µé¢çš„ location å±æ€§ï¼Œä»è€Œè·å–é¡µé¢è·¯å¾„ã€‚</p>\n<p>åä¸¤ç§éœ€è¦æˆ‘ä»¬å¯¹ routes è¿›è¡Œæ“ä½œï¼Œé¦–å…ˆå°† routes æä¾›çš„æ•°æ®æ‰å¹³åŒ–æˆé¢åŒ…å±‘å¯¼èˆªéœ€è¦çš„æ ¼å¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå‡½æ•°æ¥å®ç°å®ƒã€‚</p>\n<pre><code class=\"js\">/**\n * ä»¥é€’å½’çš„æ–¹å¼å±•å¹³react routeræ•°ç»„\n */\nconst flattenRoutes = arr =&gt;\n  arr.reduce(function(prev, item) {\n    prev.push(item);\n    return prev.concat(\n      Array.isArray(item.items) ? flattenRoutes(item.items) : item\n    );\n  }, []);</code></pre>\n<p>ä¹‹åå°†å±•å¹³çš„ç›®å½•è·¯å¾„æ˜ å°„ä¸å½“å‰é¡µé¢è·¯å¾„ä¸€åŒæ”¾å…¥å¤„ç†å‡½æ•°ï¼Œç”Ÿæˆé¢åŒ…å±‘å¯¼èˆªç»“æ„ã€‚</p>\n<pre><code class=\"js\">export const getBreadcrumbs = ({ flattenRoutes, location }) =&gt; {\n  // åˆå§‹åŒ–åŒ¹é…æ•°ç»„match\n  let matches = [];\n\n  location.pathname\n    // å–å¾—è·¯å¾„åï¼Œç„¶åå°†è·¯å¾„åˆ†å‰²æˆæ¯ä¸€è·¯ç”±éƒ¨åˆ†.\n    .split('?')[0]\n    .split('/')\n    // å¯¹æ¯ä¸€éƒ¨åˆ†æ‰§è¡Œä¸€æ¬¡è°ƒç”¨`getBreadcrumb()`çš„reduce.\n    .reduce((prev, curSection) =&gt; {\n      // å°†æœ€åä¸€ä¸ªè·¯ç”±éƒ¨åˆ†ä¸å½“å‰éƒ¨åˆ†åˆå¹¶ï¼Œæ¯”å¦‚å½“è·¯å¾„ä¸º `/x/xx/xxx` æ—¶ï¼ŒpathSectionåˆ†åˆ«æ£€æŸ¥ `/x` `/x/xx` `/x/xx/xxx` çš„åŒ¹é…ï¼Œå¹¶åˆ†åˆ«ç”Ÿæˆé¢åŒ…å±‘\n      const pathSection = `${prev}/${curSection}`;\n      const breadcrumb = getBreadcrumb({\n        flattenRoutes,\n        curSection,\n        pathSection,\n      });\n\n      // å°†é¢åŒ…å±‘å¯¼å…¥åˆ°matchesæ•°ç»„ä¸­\n      matches.push(breadcrumb);\n\n      // ä¼ é€’ç»™ä¸‹ä¸€æ¬¡reduceçš„è·¯å¾„éƒ¨åˆ†\n      return pathSection;\n    });\n  return matches;\n};</code></pre>\n<p>ç„¶åå¯¹äºæ¯ä¸€ä¸ªé¢åŒ…å±‘è·¯å¾„éƒ¨åˆ†ï¼Œç”Ÿæˆç›®å½•åç§°å¹¶é™„ä¸ŠæŒ‡å‘å¯¹åº”è·¯ç”±ä½ç½®çš„é“¾æ¥å±æ€§ã€‚</p>\n<pre><code class=\"js\">const getBreadcrumb = ({ flattenRoutes, curSection, pathSection }) =&gt; {\n  const matchRoute = flattenRoutes.find(ele =&gt; {\n    const { breadcrumb, path } = ele;\n    if (!breadcrumb || !path) {\n      throw new Error(\n        'Routerä¸­çš„æ¯ä¸€ä¸ªrouteå¿…é¡»åŒ…å« `path` ä»¥åŠ `breadcrumb` å±æ€§'\n      );\n    }\n    // æŸ¥æ‰¾æ˜¯å¦æœ‰åŒ¹é…\n    // exact ä¸º react router4 çš„å±æ€§ï¼Œç”¨äºç²¾ç¡®åŒ¹é…è·¯ç”±\n    return matchPath(pathSection, { path, exact: true });\n  });\n\n  // è¿”å›breadcrumbçš„å€¼ï¼Œæ²¡æœ‰å°±è¿”å›åŸåŒ¹é…å­è·¯å¾„å\n  if (matchRoute) {\n    return render({\n      content: matchRoute.breadcrumb || curSection,\n      path: matchRoute.path,\n    });\n  }\n\n  // å¯¹äºroutesè¡¨ä¸­ä¸å­˜åœ¨çš„è·¯å¾„\n  // æ ¹ç›®å½•é»˜è®¤åç§°ä¸ºé¦–é¡µ.\n  return render({\n    content: pathSection === '/' ? 'é¦–é¡µ' : curSection,\n    path: pathSection,\n  });\n};</code></pre>\n<p>ä¹‹åç”± render å‡½æ•°ç”Ÿæˆæœ€åçš„å•ä¸ªé¢åŒ…å±‘å¯¼èˆªæ ·å¼ã€‚å•ä¸ªé¢åŒ…å±‘ç»„ä»¶éœ€è¦ä¸º render å‡½æ•°æä¾›è¯¥é¢åŒ…å±‘æŒ‡å‘çš„è·¯å¾„ <code>path</code>, ä»¥åŠè¯¥é¢åŒ…å±‘å†…å®¹æ˜ å°„<code>content</code> è¿™ä¸¤ä¸ª propsã€‚</p>\n<pre><code class=\"js\">/**\n *\n */\nconst render = ({ content, path }) =&gt; {\n  const componentProps = { path };\n  if (typeof content === 'function') {\n    return &lt;content {...componentProps} /&gt;;\n  }\n  return &lt;span {...componentProps}&gt;{content}&lt;/span&gt;;\n};</code></pre>\n<p>æœ‰äº†è¿™äº›åŠŸèƒ½å‡½æ•°ï¼Œæˆ‘ä»¬å°±èƒ½å®ç°ä¸€ä¸ªèƒ½ä¸ºåŒ…è£¹ç»„ä»¶ä¼ å…¥å½“å‰æ‰€åœ¨è·¯å¾„ä»¥åŠè·¯ç”±å±æ€§çš„ React é«˜é˜¶ç»„ä»¶äº†ã€‚ä¼ å…¥ä¸€ä¸ªç»„ä»¶ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ç›¸åŒçš„ç»„ä»¶ç»“æ„ï¼Œè¿™æ ·ä¾¿ä¸ä¼šå¯¹ç»„ä»¶å¤–çš„ä»»ä½•åŠŸèƒ½ä¸æ“ä½œé€ æˆç ´åã€‚</p>\n<pre><code class=\"js\">const BreadcrumbsHoc = (\n  location = window.location,\n  routes = []\n) =&gt; Component =&gt; {\n  const BreadComponent = (\n    &lt;Component\n      breadcrumbs={getBreadcrumbs({\n        flattenRoutes: flattenRoutes(routes),\n        location,\n      })}\n    /&gt;\n  );\n  return BreadComponent;\n};\nexport default BreadcrumbsHoc;</code></pre>\n<p>è°ƒç”¨è¿™ä¸ªé«˜é˜¶ç»„ä»¶çš„æ–¹æ³•ä¹Ÿéå¸¸ç®€å•ï¼Œåªéœ€è¦ä¼ å…¥å½“å‰æ‰€åœ¨è·¯å¾„ä»¥åŠæ•´ä¸ª <code>react router</code> ç”Ÿæˆçš„ <code>routes</code> å±æ€§å³å¯ã€‚<br>è‡³äºå¦‚ä½•å–å¾—å½“å‰æ‰€åœ¨è·¯å¾„ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ <code>react router</code> æä¾›çš„ <code>withRouter</code> å‡½æ•°ï¼Œå¦‚ä½•ä½¿ç”¨è¯·è‡ªè¡ŒæŸ¥é˜…ç›¸å…³æ–‡æ¡£ã€‚<br>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œ<code>withRouter</code> æœ¬èº«å°±æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œèƒ½ä¸ºåŒ…è£¹ç»„ä»¶æä¾›åŒ…æ‹¬ <code>location</code> å±æ€§åœ¨å†…çš„è‹¥å¹²è·¯ç”±å±æ€§ã€‚æ‰€ä»¥è¿™ä¸ª API ä¹Ÿèƒ½ä½œä¸ºå­¦ä¹ é«˜é˜¶ç»„ä»¶ä¸€ä¸ªå¾ˆå¥½çš„å‚è€ƒã€‚</br></br></p>\n<pre><code class=\"js\">withRouter(({ location }) =&gt;\n  BreadcrumbsHoc(location, routes)(BreadcrumbsComponent)\n);</code></pre>\n<h2>Q&amp;A</h2>\n<p>å¦‚æœ<code>react router</code> ç”Ÿæˆçš„ <code>routes</code> ä¸æ˜¯ç”±è‡ªå·±æ‰‹åŠ¨ç»´æŠ¤çš„ï¼Œç”šè‡³éƒ½æ²¡æœ‰å­˜åœ¨æœ¬åœ°ï¼Œè€Œæ˜¯é€šè¿‡è¯·æ±‚æ‹‰å–åˆ°çš„ï¼Œå­˜å‚¨åœ¨ redux é‡Œï¼Œé€šè¿‡ <code>react-redux</code> æä¾›çš„ <code>connect</code> é«˜é˜¶å‡½æ•°åŒ…è£¹æ—¶ï¼Œè·¯ç”±å‘ç”Ÿå˜åŒ–æ—¶å¹¶ä¸ä¼šå¯¼è‡´è¯¥é¢åŒ…å±‘ç»„ä»¶æ›´æ–°ã€‚ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"js\">function mapStateToProps(state) {\n  return {\n    routes: state.routes,\n  };\n}\n\nconnect(mapStateToProps)(\n  withRouter(({ location }) =&gt;\n    BreadcrumbsHoc(location, routes)(BreadcrumbsComponent)\n  )\n);</code></pre>\n<hr>\n <p>è¿™å…¶å®æ˜¯ <code>connect</code> å‡½æ•°çš„ä¸€ä¸ª<strong>bug</strong>ã€‚å› ä¸º react-redux çš„ connect é«˜é˜¶ç»„ä»¶ä¼šä¸ºä¼ å…¥çš„å‚æ•°ç»„ä»¶å®ç° shouldComponentUpdate è¿™ä¸ªé’©å­å‡½æ•°ï¼Œå¯¼è‡´<strong>åªæœ‰ prop å‘ç”Ÿå˜åŒ–æ—¶æ‰è§¦å‘æ›´æ–°ç›¸å…³çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°(å« render)</strong>ï¼Œè€Œå¾ˆæ˜¾ç„¶ï¼Œæˆ‘ä»¬çš„ location å¯¹è±¡å¹¶æ²¡æœ‰ä½œä¸º prop ä¼ å…¥è¯¥å‚æ•°ç»„ä»¶ã€‚</p>\n <p>å®˜æ–¹æ¨èçš„åšæ³•æ˜¯ä½¿ç”¨ <code>withRouter</code> æ¥åŒ…è£¹ <code>connect</code> çš„ <code>return value</code>ï¼Œå³</p>\n <pre><code class=\"js\">withRouter(\n  connect(mapStateToProps)(({ location, routes }) =&gt;\n    BreadcrumbsHoc(location, routes)(BreadcrumbsComponent)\n  )\n);</code></pre>\n <p>å…¶å®æˆ‘ä»¬ä»è¿™é‡Œä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œé«˜é˜¶ç»„ä»¶åŒé«˜é˜¶å‡½æ•°ä¸€æ ·ï¼Œä¸ä¼šå¯¹ç»„ä»¶çš„ç±»å‹é€ æˆä»»ä½•æ›´æ”¹ï¼Œå› æ­¤é«˜é˜¶ç»„ä»¶å°±å¦‚åŒé“¾å¼è°ƒç”¨ä¸€æ ·ï¼Œå¯ä»¥ä»»æ„å¤šå±‚åŒ…è£¹æ¥ç»™ç»„ä»¶ä¼ å…¥ä¸åŒçš„å±æ€§ï¼Œåœ¨æ­£å¸¸æƒ…å†µä¸‹ä¹Ÿå¯ä»¥éšæ„è°ƒæ¢ä½ç½®ï¼Œåœ¨ä½¿ç”¨ä¸Šéå¸¸çš„çµæ´»ã€‚è¿™ç§å¯æ’æ‹”ç‰¹æ€§ä½¿å¾—é«˜é˜¶ç»„ä»¶éå¸¸å— React ç”Ÿæ€çš„é’çï¼Œå¾ˆå¤šå¼€æºåº“é‡Œéƒ½èƒ½çœ‹åˆ°è¿™ç§ç‰¹æ€§çš„å½±å­ï¼Œæœ‰ç©ºä¹Ÿå¯ä»¥éƒ½æ‹¿å‡ºæ¥åˆ†æä¸€ä¸‹ã€‚</p>\n</hr>","descriptionType":"html","publishedDate":"Fri, 21 Aug 2020 04:01:27 +0000","feedId":6615,"bgimg":"","linkMd5":"e6a36f891c6a4db5ca1ed8ca47403e3f","bgimgJsdelivr":"","metaImg":"","author":"Duang","publishedOrCreatedDate":1598310388559},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"è°åŠ¨äº†æˆ‘çš„ DOMï¼Ÿ","link":"https://segmentfault.com/a/1190000023707760","description":"<p>åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½ç›‘è§† DOM æ ‘çš„å˜åŠ¨ï¼Œç„¶ååšä¸€äº›ç›¸å…³çš„æ“ä½œã€‚æ¯”å¦‚ç›‘å¬å…ƒç´ è¢«æ’å…¥ DOM æˆ–ä» DOM æ ‘ä¸­ç§»é™¤ï¼Œç„¶åæ·»åŠ ç›¸åº”çš„åŠ¨ç”»æ•ˆæœã€‚æˆ–è€…åœ¨å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ä¸­è¾“å…¥ç‰¹æ®Šçš„ç¬¦å·ï¼Œå¦‚ <code>#</code> æˆ– <code>@</code> ç¬¦å·æ—¶è‡ªåŠ¨é«˜äº®åé¢çš„å†…å®¹ç­‰ã€‚è¦å®ç°è¿™äº›åŠŸèƒ½ï¼Œæˆ‘ä»¬å°±å¯ä»¥è€ƒè™‘ä½¿ç”¨ MutationObserver APIï¼Œæ¥ä¸‹æ¥é˜¿å®å“¥å°†å¸¦å¤§å®¶ä¸€èµ·æ¥æ¢ç´¢ MutationObserver API æ‰€æä¾›çš„å¼ºå¤§èƒ½åŠ›ã€‚</p>\n<p>é˜…è¯»å®Œæœ¬æ–‡ï¼Œä½ å°†äº†è§£ä»¥ä¸‹å†…å®¹ï¼š</p>\n<ul>\n <li>MutationObserver æ˜¯ä»€ä¹ˆï¼›</li>\n <li>MutationObserver API çš„åŸºæœ¬ä½¿ç”¨åŠ MutationRecord å¯¹è±¡ï¼›</li>\n <li>MutationObserver API å¸¸è§çš„ä½¿ç”¨åœºæ™¯ï¼›</li>\n <li>ä»€ä¹ˆæ˜¯è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼åŠå¦‚ä½•ä½¿ç”¨ TS å®ç°è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼ã€‚</li>\n</ul>\n<h3>ä¸€ã€MutationObserver æ˜¯ä»€ä¹ˆ</h3>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/MutationObserver\" rel=\"nofollow noreferrer\">MutationObserver</a> æ¥å£æä¾›äº†ç›‘è§†å¯¹ DOM æ ‘æ‰€åšæ›´æ”¹çš„èƒ½åŠ›ã€‚å®ƒè¢«è®¾è®¡ä¸ºæ—§çš„ Mutation Events åŠŸèƒ½çš„æ›¿ä»£å“ï¼Œè¯¥åŠŸèƒ½æ˜¯ DOM3 Events è§„èŒƒçš„ä¸€éƒ¨åˆ†ã€‚</p>\n<p>åˆ©ç”¨ MutationObserver API æˆ‘ä»¬å¯ä»¥ç›‘è§† DOM çš„å˜åŒ–ã€‚DOM çš„ä»»ä½•å˜åŒ–ï¼Œæ¯”å¦‚èŠ‚ç‚¹çš„å¢åŠ ã€å‡å°‘ã€å±æ€§çš„å˜åŠ¨ã€æ–‡æœ¬å†…å®¹çš„å˜åŠ¨ï¼Œé€šè¿‡è¿™ä¸ª API æˆ‘ä»¬éƒ½å¯ä»¥å¾—åˆ°é€šçŸ¥ã€‚</p>\n<p>MutationObserver æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>\n<ul>\n <li>å®ƒç­‰å¾…æ‰€æœ‰è„šæœ¬ä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼Œæ‰ä¼šè¿è¡Œï¼Œå®ƒæ˜¯å¼‚æ­¥è§¦å‘çš„ã€‚å³ä¼šç­‰å¾…å½“å‰æ‰€æœ‰ DOM æ“ä½œéƒ½ç»“æŸæ‰è§¦å‘ï¼Œè¿™æ ·è®¾è®¡æ˜¯ä¸ºäº†åº”å¯¹ DOM é¢‘ç¹å˜åŠ¨çš„é—®é¢˜ã€‚</li>\n <li>å®ƒæŠŠ DOM å˜åŠ¨è®°å½•å°è£…æˆä¸€ä¸ªæ•°ç»„è¿›è¡Œç»Ÿä¸€å¤„ç†ï¼Œè€Œä¸æ˜¯ä¸€æ¡ä¸€æ¡è¿›è¡Œå¤„ç†ã€‚</li>\n <li>å®ƒæ—¢å¯ä»¥è§‚å¯Ÿ DOM çš„æ‰€æœ‰ç±»å‹å˜åŠ¨ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šåªè§‚å¯ŸæŸä¸€ç±»å˜åŠ¨ã€‚</li>\n</ul>\n<h3>äºŒã€MutationObserver API ç®€ä»‹</h3>\n<p>åœ¨ä»‹ç» MutationObserver API ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹å®ƒçš„å…¼å®¹æ€§ï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023707764\" alt=\"\" title=\"\" /></p>\n<p>ï¼ˆå›¾ç‰‡æ¥æºï¼š<a href=\"https://caniuse.com/#search=MutationObserver\" rel=\"nofollow noreferrer\">https://caniuse.com/#search=M...</a>ï¼‰</p>\n<p>ä»ä¸Šå›¾å¯çŸ¥ï¼Œç›®å‰ä¸»æµçš„ Web æµè§ˆå™¨åŸºæœ¬éƒ½æ”¯æŒ MutationObserver APIï¼Œè€Œå¯¹äº IE æµè§ˆå™¨åªæœ‰ IE 11 æ‰æ”¯æŒã€‚åœ¨é¡¹ç›®ä¸­ï¼Œå¦‚éœ€è¦ä½¿ç”¨ MutationObserver APIï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦åˆ›å»º MutationObserver å¯¹è±¡ï¼Œå› æ­¤æ¥ä¸‹æ¥æˆ‘ä»¬æ¥ä»‹ç» MutationObserver æ„é€ å‡½æ•°ã€‚</p>\n<p>DOM è§„èŒƒä¸­çš„ MutationObserver æ„é€ å‡½æ•°ï¼Œç”¨äºåˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªæ–°çš„è§‚å¯Ÿå™¨ï¼Œå®ƒä¼šåœ¨è§¦å‘æŒ‡å®š DOM äº‹ä»¶æ—¶ï¼Œè°ƒç”¨æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚MutationObserver å¯¹ DOM çš„è§‚å¯Ÿä¸ä¼šç«‹å³å¯åŠ¨ï¼Œè€Œå¿…é¡»å…ˆè°ƒç”¨ <code>observe()</code> æ–¹æ³•æ¥æŒ‡å®šæ‰€è¦è§‚å¯Ÿçš„ DOM èŠ‚ç‚¹ä»¥åŠè¦å“åº”å“ªäº›æ›´æ”¹ã€‚</p>\n<h4>2.1 æ„é€ å‡½æ•°</h4>\n<p>MutationObserver æ„é€ å‡½æ•°çš„è¯­æ³•ä¸ºï¼š</p>\n<pre><code class=\"javascript\">const observer = new MutationObserver(callback);</code></pre>\n<p>ç›¸å…³çš„å‚æ•°è¯´æ˜å¦‚ä¸‹ï¼š</p>\n<ul>\n <li>callbackï¼šä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œæ¯å½“è¢«æŒ‡å®šçš„èŠ‚ç‚¹æˆ–å­æ ‘æœ‰å‘ç”Ÿ DOM å˜åŠ¨æ—¶ä¼šè¢«è°ƒç”¨ã€‚è¯¥å›è°ƒå‡½æ•°åŒ…å«ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªæ˜¯æè¿°æ‰€æœ‰è¢«è§¦å‘æ”¹åŠ¨çš„ <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/MutationRecord\" rel=\"nofollow noreferrer\">MutationRecord</a> å¯¹è±¡æ•°ç»„ï¼Œå¦ä¸€ä¸ªæ˜¯è°ƒç”¨è¯¥å‡½æ•°çš„ MutationObserver å¯¹è±¡ã€‚</li>\n</ul>\n<p><strong>ä½¿ç”¨ç¤ºä¾‹</strong></p>\n<pre><code class=\"typescript\">const observer = new MutationObserver(function (mutations, observer) {\n  mutations.forEach(function(mutation) {\n    console.log(mutation);\n  });\n});</code></pre>\n<h4>2.2 æ–¹æ³•</h4>\n<ul>\n <li>disconnect()ï¼šé˜»æ­¢ MutationObserver å®ä¾‹ç»§ç»­æ¥æ”¶é€šçŸ¥ï¼Œé™¤éå†æ¬¡è°ƒç”¨å…¶ observe() æ–¹æ³•ï¼Œå¦åˆ™è¯¥è§‚å¯Ÿè€…å¯¹è±¡åŒ…å«çš„å›è°ƒå‡½æ•°éƒ½ä¸ä¼šå†è¢«è°ƒç”¨ã€‚</li>\n <li><p>observe(target[, options])ï¼šè¯¥æ–¹æ³•ç”¨æ¥å¯åŠ¨ç›‘å¬ï¼Œå®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œç”¨äºæŒ‡å®šæ‰€è¦è§‚å¯Ÿçš„ DOM èŠ‚ç‚¹ã€‚ç¬¬äºŒä¸ªå‚æ•°ï¼Œæ˜¯ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œç”¨äºæŒ‡å®šæ‰€è¦è§‚å¯Ÿçš„ç‰¹å®šå˜åŠ¨ã€‚</p><pre><code class=\"javascript\">const editor = document.querySelector('#editor');\n\nconst options = {\n  childList: true, // ç›‘è§†nodeç›´æ¥å­èŠ‚ç‚¹çš„å˜åŠ¨\n  subtree: true, // ç›‘è§†nodeæ‰€æœ‰åä»£çš„å˜åŠ¨\n  attributes: true, // ç›‘è§†nodeå±æ€§çš„å˜åŠ¨\n  characterData: true, // ç›‘è§†æŒ‡å®šç›®æ ‡èŠ‚ç‚¹æˆ–å­èŠ‚ç‚¹æ ‘ä¸­èŠ‚ç‚¹æ‰€åŒ…å«çš„å­—ç¬¦æ•°æ®çš„å˜åŒ–ã€‚\n  attributeOldValue: true // è®°å½•ä»»ä½•æœ‰æ”¹åŠ¨çš„å±æ€§çš„æ—§å€¼\n};\n\nobserver.observe(article, options);</code></pre></li>\n <li>takeRecords()ï¼šè¿”å›å·²æ£€æµ‹åˆ°ä½†å°šæœªç”±è§‚å¯Ÿè€…çš„å›è°ƒå‡½æ•°å¤„ç†çš„æ‰€æœ‰åŒ¹é… DOM æ›´æ”¹çš„åˆ—è¡¨ï¼Œä½¿å˜æ›´é˜Ÿåˆ—ä¿æŒä¸ºç©ºã€‚æ­¤æ–¹æ³•æœ€å¸¸è§çš„ä½¿ç”¨åœºæ™¯æ˜¯ <strong>åœ¨æ–­å¼€è§‚å¯Ÿè€…ä¹‹å‰ç«‹å³è·å–æ‰€æœ‰æœªå¤„ç†çš„æ›´æ”¹è®°å½•ï¼Œä»¥ä¾¿åœ¨åœæ­¢è§‚å¯Ÿè€…æ—¶å¯ä»¥å¤„ç†ä»»ä½•æœªå¤„ç†çš„æ›´æ”¹</strong>ã€‚</li>\n</ul>\n<h4>2.3 MutationRecord å¯¹è±¡</h4>\n<p>DOM æ¯æ¬¡å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šç”Ÿæˆä¸€æ¡å˜åŠ¨è®°å½•ï¼Œå³ MutationRecord å®ä¾‹ã€‚è¯¥å®ä¾‹åŒ…å«äº†ä¸å˜åŠ¨ç›¸å…³çš„æ‰€æœ‰ä¿¡æ¯ã€‚Mutation Observer å¯¹è±¡å¤„ç†çš„å°±æ˜¯ä¸€ä¸ªä¸ª <strong>MutationRecord</strong> å®ä¾‹æ‰€ç»„æˆçš„æ•°ç»„ã€‚</p>\n<p>MutationRecord å®ä¾‹åŒ…å«äº†å˜åŠ¨ç›¸å…³çš„ä¿¡æ¯ï¼Œå«æœ‰ä»¥ä¸‹å±æ€§ï¼š</p>\n<ul>\n <li>typeï¼šå˜åŠ¨çš„ç±»å‹ï¼Œå€¼å¯ä»¥æ˜¯ attributesã€characterData æˆ– childListï¼›</li>\n <li>targetï¼šå‘ç”Ÿå˜åŠ¨çš„ DOM èŠ‚ç‚¹ï¼›</li>\n <li>addedNodesï¼šè¿”å›æ–°å¢çš„ DOM èŠ‚ç‚¹ï¼Œå¦‚æœæ²¡æœ‰èŠ‚ç‚¹è¢«æ·»åŠ ï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºçš„ <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/NodeList\" rel=\"nofollow noreferrer\">NodeList</a>ï¼›</li>\n <li>removedNodesï¼šè¿”å›ç§»é™¤çš„ DOM èŠ‚ç‚¹ï¼Œå¦‚æœæ²¡æœ‰èŠ‚ç‚¹è¢«ç§»é™¤ï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºçš„ <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/NodeList\" rel=\"nofollow noreferrer\">NodeList</a>ï¼›</li>\n <li>previousSiblingï¼šè¿”å›è¢«æ·»åŠ æˆ–ç§»é™¤çš„èŠ‚ç‚¹ä¹‹å‰çš„å…„å¼ŸèŠ‚ç‚¹ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿”å› <code>null</code>ï¼›</li>\n <li>nextSiblingï¼šè¿”å›è¢«æ·»åŠ æˆ–ç§»é™¤çš„èŠ‚ç‚¹ä¹‹åçš„å…„å¼ŸèŠ‚ç‚¹ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿”å› <code>null</code>ï¼›</li>\n <li>attributeNameï¼šè¿”å›è¢«ä¿®æ”¹çš„å±æ€§çš„å±æ€§åï¼Œå¦‚æœè®¾ç½®äº† <code>attributeFilter</code>ï¼Œåˆ™åªè¿”å›é¢„å…ˆæŒ‡å®šçš„å±æ€§ï¼›</li>\n <li>attributeNamespaceï¼šè¿”å›è¢«ä¿®æ”¹å±æ€§çš„å‘½åç©ºé—´ï¼›</li>\n <li>oldValueï¼šå˜åŠ¨å‰çš„å€¼ã€‚è¿™ä¸ªå±æ€§åªå¯¹ <code>attribute</code> å’Œ <code>characterData</code> å˜åŠ¨æœ‰æ•ˆï¼Œå¦‚æœå‘ç”Ÿ <code>childList</code> å˜åŠ¨ï¼Œåˆ™è¿”å› <code>null</code>ã€‚</li>\n</ul>\n<h4>2.4 MutationObserver ä½¿ç”¨ç¤ºä¾‹</h4>\n<pre><code class=\"html\">&lt;!DOCTYPE html&gt;\n&lt;html lang=\"zh-CN\"&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"UTF-8\" /&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /&gt;\n    &lt;title&gt;DOM å˜åŠ¨è§‚å¯Ÿå™¨ç¤ºä¾‹&lt;/title&gt;\n    &lt;style&gt;\n      .editor {border: 1px dashed grey; width: 400px; height: 300px;}\n    &lt;/style&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;h3&gt;é˜¿å®å“¥ï¼šDOM å˜åŠ¨è§‚å¯Ÿå™¨ï¼ˆMutation observerï¼‰&lt;/h3&gt;\n    &lt;div contenteditable id=\"container\" class=\"editor\"&gt;å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯é˜¿å®å“¥ï¼&lt;/div&gt;\n\n    &lt;script&gt;\n      const containerEle = document.querySelector(\"#container\");\n\n      let observer = new MutationObserver((mutationRecords) =&gt; {\n        console.log(mutationRecords); // è¾“å‡ºå˜åŠ¨è®°å½•\n      });\n\n      observer.observe(containerEle, {\n        subtree: true, // ç›‘è§†nodeæ‰€æœ‰åä»£çš„å˜åŠ¨\n        characterDataOldValue: true, // è®°å½•ä»»ä½•æœ‰å˜åŠ¨çš„å±æ€§çš„æ—§å€¼\n      });\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;</code></pre>\n<p>ä»¥ä¸Šä»£ç æˆåŠŸè¿è¡Œä¹‹åï¼Œé˜¿å®å“¥å¯¹ id ä¸º <strong>container</strong> çš„ div å®¹å™¨ä¸­åŸå§‹å†…å®¹è¿›è¡Œä¿®æ”¹ï¼Œå³æŠŠ <strong>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯é˜¿å®å“¥ï¼</strong> ä¿®æ”¹ä¸º <strong>å¤§å®¶å¥½ï¼Œæˆ‘</strong>ã€‚å¯¹äºä¸Šè¿°çš„ä¿®æ”¹ï¼Œæ§åˆ¶å°å°†ä¼šè¾“å‡º 5 æ¡å˜åŠ¨è®°å½•ï¼Œè¿™é‡Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æœ€åä¸€æ¡å˜åŠ¨è®°å½•ï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023707763\" alt=\"\" title=\"\" /></p>\n<p>MutationObserver å¯¹è±¡çš„ <code>observe(target [, options])</code> æ–¹æ³•æ”¯æŒå¾ˆå¤šé…ç½®é¡¹ï¼Œè¿™é‡Œé˜¿å®å“¥å°±ä¸è¯¦ç»†å±•å¼€ä»‹ç»äº†ã€‚</p>\n<p>ä½†æ˜¯ä¸ºäº†è®©åˆšæ¥è§¦ MutationObserver API çš„å°ä¼™ä¼´èƒ½æ›´ç›´è§‚çš„æ„Ÿå—æ¯ä¸ªé…ç½®é¡¹çš„ä½œç”¨ï¼Œé˜¿å®å“¥æŠŠ <a href=\"https://www.smashingmagazine.com/2019/04/mutationobserver-api-guide/\" rel=\"nofollow noreferrer\">mutationobserver-api-guide</a> è¿™ç¯‡æ–‡ç« ä¸­ä½¿ç”¨çš„åœ¨çº¿ç¤ºä¾‹ç»Ÿä¸€æå–å‡ºæ¥ï¼Œåšäº†ä¸€ä¸‹æ±‡æ€»ä¸åˆ†ç±»ï¼š</p>\n<blockquote>\n 1ã€\n <a href=\"https://codepen.io/impressivewebs/pen/aXVVjg\" rel=\"nofollow noreferrer\">MutationObserver Example - childList</a>ï¼š\n <a href=\"https://codepen.io/impressivewebs/pen/aXVVjg\" rel=\"nofollow noreferrer\">https://codepen.io/impressive...</a>\n <p>2ã€<a href=\"https://codepen.io/impressivewebs/pen/PVgyLa\" rel=\"nofollow noreferrer\">MutationObserver Example - childList with subtree</a>ï¼š<a href=\"https://codepen.io/impressivewebs/pen/PVgyLa\" rel=\"nofollow noreferrer\">https://codepen.io/impressive...</a></p>\n <p>3ã€<a href=\"https://codepen.io/impressivewebs/pen/XOzaWv\" rel=\"nofollow noreferrer\">MutationObserver Example - Attributes</a>ï¼š<a href=\"https://codepen.io/impressivewebs/pen/XOzaWv\" rel=\"nofollow noreferrer\">https://codepen.io/impressive...</a></p>\n <p>4ã€<a href=\"https://codepen.io/impressivewebs/pen/pGGdVr\" rel=\"nofollow noreferrer\">MutationObserver Example - Attribute Filter</a>ï¼š<a href=\"https://codepen.io/impressivewebs/pen/pGGdVr\" rel=\"nofollow noreferrer\">https://codepen.io/impressive...</a></p>\n <p>5ã€<a href=\"https://codepen.io/impressivewebs/pen/ywYaYv\" rel=\"nofollow noreferrer\">MutationObserver Example - attributeFilter with subtree</a>ï¼š<a href=\"https://codepen.io/impressivewebs/pen/ywYaYv\" rel=\"nofollow noreferrer\">https://codepen.io/impressive...</a></p>\n <p>6ã€<a href=\"https://codepen.io/impressivewebs/pen/pGdpvq\" rel=\"nofollow noreferrer\">MutationObserver Example - characterData</a>ï¼š<a href=\"https://codepen.io/impressivewebs/pen/pGdpvq\" rel=\"nofollow noreferrer\">https://codepen.io/impressive...</a></p>\n <p>7ã€<a href=\"https://codepen.io/impressivewebs/pen/bZVpMZ\" rel=\"nofollow noreferrer\">MutationObserver Example - characterData with subtree</a>ï¼š<a href=\"https://codepen.io/impressivewebs/pen/bZVpMZ\" rel=\"nofollow noreferrer\">https://codepen.io/impressive...</a></p>\n <p>8ã€<a href=\"https://codepen.io/impressivewebs/pen/wNNjrP\" rel=\"nofollow noreferrer\">MutationObserver Example - Recording an Old Attribute Value</a>ï¼š<a href=\"https://codepen.io/impressivewebs/pen/wNNjrP\" rel=\"nofollow noreferrer\">https://codepen.io/impressive...</a></p>\n <p>9ã€<a href=\"https://codepen.io/impressivewebs/pen/aXrzex\" rel=\"nofollow noreferrer\">MutationObserver Example - Recording old characterData</a>ï¼š<a href=\"https://codepen.io/impressivewebs/pen/aXrzex\" rel=\"nofollow noreferrer\">https://codepen.io/impressive...</a></p>\n <p>10ã€<a href=\"https://codepen.io/impressivewebs/pen/OqJMeG\" rel=\"nofollow noreferrer\">MutationObserver Example - Multiple Changes for a Single Observer</a>ï¼š<a href=\"https://codepen.io/impressivewebs/pen/OqJMeG\" rel=\"nofollow noreferrer\">https://codepen.io/impressive...</a></p>\n <p>11ã€<a href=\"https://codepen.io/impressivewebs/pen/GeRWPX\" rel=\"nofollow noreferrer\">MutationObserver Example - Moving a Node Tree</a>ï¼š<a href=\"https://codepen.io/impressivewebs/pen/GeRWPX\" rel=\"nofollow noreferrer\">https://codepen.io/impressive...</a></p>\n</blockquote>\n<h3>ä¸‰ã€MutationObserver ä½¿ç”¨åœºæ™¯</h3>\n<h4>3.1 è¯­æ³•é«˜äº®</h4>\n<p>ç›¸ä¿¡å¤§å®¶å¯¹è¯­æ³•é«˜äº®éƒ½ä¸ä¼šé™Œç”Ÿï¼Œå¹³æ—¶åœ¨é˜…è¯»å„ç±»æŠ€æœ¯æ–‡ç« æ—¶ï¼Œéƒ½ä¼šé‡åˆ°å®ƒã€‚æ¥ä¸‹æ¥ï¼Œé˜¿å®å“¥å°†è·Ÿå¤§å®¶ä»‹ç»å¦‚ä½•ä½¿ç”¨ MutationObserver API å’Œ <a href=\"https://prismjs.com/\" rel=\"nofollow noreferrer\">Prism.js</a> è¿™ä¸ªåº“å®ç° JavaScript å’Œ CSS è¯­æ³•é«˜äº®ã€‚</p>\n<p>åœ¨çœ‹å…·ä½“çš„å®ç°ä»£ç å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ä»¥ä¸‹ HTML ä»£ç æ®µæœªè¯­æ³•é«˜äº®å’Œè¯­æ³•é«˜äº®çš„åŒºåˆ«ï¼š</p>\n<pre><code class=\"javascript\">let htmlSnippet = `ä¸‹é¢æ˜¯ä¸€ä¸ªJavaScriptä»£ç æ®µï¼š\n    &lt;pre class=\"language-javascript\"&gt;\n       &lt;code&gt; let greeting = \"å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯é˜¿å®å“¥\"; &lt;/code&gt;\n    &lt;/pre&gt;\n    &lt;div&gt;å¦ä¸€ä¸ªCSSä»£ç æ®µï¼š&lt;/div&gt;\n       &lt;div&gt;\n         &lt;pre class=\"language-css\"&gt;\n            &lt;code&gt;#code-container { border: 1px dashed grey; padding: 5px; } &lt;/code&gt;\n         &lt;/pre&gt;\n    &lt;/div&gt;\n`</code></pre>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023707766\" alt=\"\" title=\"\" /></p>\n<p>é€šè¿‡è§‚å¯Ÿä¸Šå›¾ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆç›´è§‚åœ°å‘ç°ï¼Œæœ‰è¿›è¡Œè¯­æ³•é«˜äº®çš„ä»£ç å—é˜…è¯»èµ·æ¥æ›´åŠ æ¸…æ™°æ˜“æ‡‚ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å®ç°è¯­æ³•é«˜äº®çš„åŠŸèƒ½ä»£ç ï¼š</p>\n<pre><code class=\"html\">&lt;!DOCTYPE html&gt;\n&lt;html lang=\"zh-CN\"&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"UTF-8\" /&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /&gt;\n    &lt;title&gt;MutationObserver å®æˆ˜ä¹‹è¯­æ³•é«˜äº®&lt;/title&gt;\n    &lt;style&gt;\n      #code-container {\n        border: 1px dashed grey;\n        padding: 5px;\n        width: 550px;\n        height: 200px;\n      }\n    &lt;/style&gt;\n    &lt;link href=\"https://cdn.bootcdn.net/ajax/libs/prism/9000.0.1/themes/prism.min.css\" rel=\"stylesheet\"&gt;\n    &lt;script src=\"https://cdn.bootcdn.net/ajax/libs/prism/9000.0.1/prism.min.js\" data-manual&gt;&lt;/script&gt;\n    &lt;script src=\"https://cdn.bootcdn.net/ajax/libs/prism/9000.0.1/components/prism-javascript.min.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"https://cdn.bootcdn.net/ajax/libs/prism/9000.0.1/components/prism-css.min.js\"&gt;&lt;/script&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;h3&gt;é˜¿å®å“¥ï¼šMutationObserver å®æˆ˜ä¹‹è¯­æ³•é«˜äº®&lt;/h3&gt;\n    &lt;div id=\"code-container\"&gt;&lt;/div&gt;\n    &lt;script&gt;\n      let observer = new MutationObserver((mutations) =&gt; {\n        for (let mutation of mutations) {\n          // è·å–æ–°å¢çš„DOMèŠ‚ç‚¹\n          for (let node of mutation.addedNodes) {\n            // åªå¤„ç†HTMLå…ƒç´ ï¼Œè·³è¿‡å…¶ä»–èŠ‚ç‚¹ï¼Œæ¯”å¦‚æ–‡æœ¬èŠ‚ç‚¹\n            if (!(node instanceof HTMLElement)) continue;\n\n            // æ£€æŸ¥æ’å…¥çš„èŠ‚ç‚¹æ˜¯å¦ä¸ºä»£ç æ®µ\n            if (node.matches('pre[class*=\"language-\"]')) {\n              Prism.highlightElement(node);\n            }\n\n            // æ£€æŸ¥æ’å…¥èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ˜¯å¦ä¸ºä»£ç æ®µ\n            for (let elem of node.querySelectorAll('pre[class*=\"language-\"]')) {\n              Prism.highlightElement(elem);\n            }\n          }\n        }\n      });\n\n      let codeContainer = document.querySelector(\"#code-container\");\n\n      observer.observe(codeContainer, { childList: true, subtree: true });\n      // åŠ¨æ€æ’å…¥å¸¦æœ‰ä»£ç æ®µçš„å†…å®¹\n      codeContainer.innerHTML = `ä¸‹é¢æ˜¯ä¸€ä¸ªJavaScriptä»£ç æ®µï¼š\n        &lt;pre class=\"language-javascript\"&gt;&lt;code&gt; let greeting = \"å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯é˜¿å®å“¥\"; &lt;/code&gt;&lt;/pre&gt;\n        &lt;div&gt;å¦ä¸€ä¸ªCSSä»£ç æ®µï¼š&lt;/div&gt;\n        &lt;div&gt;\n          &lt;pre class=\"language-css\"&gt;\n             &lt;code&gt;#code-container { border: 1px dashed grey; padding: 5px; } &lt;/code&gt;\n          &lt;/pre&gt;\n        &lt;/div&gt;\n        `;\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;</code></pre>\n<p>åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œé¦–å…ˆæˆ‘ä»¬åœ¨å¼•å…¥ <strong>prism.min.js</strong> çš„ script æ ‡ç­¾ä¸Šè®¾ç½® <code>data-manual</code> å±æ€§ï¼Œç”¨äºå‘Šè¯‰ <a href=\"https://prismjs.com/\" rel=\"nofollow noreferrer\">Prism.js</a> æˆ‘ä»¬å°†ä½¿ç”¨æ‰‹åŠ¨æ¨¡å¼æ¥å¤„ç†è¯­æ³•é«˜äº®ã€‚æ¥ç€æˆ‘ä»¬åœ¨å›è°ƒå‡½æ•°ä¸­é€šè¿‡è·å– mutation å¯¹è±¡çš„ <code>addedNodes</code> å±æ€§æ¥è¿›ä¸€æ­¥è·å–æ–°å¢çš„ DOM èŠ‚ç‚¹ã€‚ç„¶åæˆ‘ä»¬éå†æ–°å¢çš„ DOM èŠ‚ç‚¹ï¼Œåˆ¤æ–­æ–°å¢çš„ DOM èŠ‚ç‚¹æ˜¯å¦ä¸ºä»£ç æ®µï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶çš„è¯åˆ™è¿›è¡Œé«˜äº®æ“ä½œã€‚</p>\n<p>æ­¤å¤–ï¼Œé™¤äº†åˆ¤æ–­å½“å‰èŠ‚ç‚¹ä¹‹å¤–ï¼Œæˆ‘ä»¬ä¹Ÿä¼šåˆ¤æ–­æ’å…¥èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ˜¯å¦ä¸ºä»£ç æ®µï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶çš„è¯ï¼Œä¹Ÿä¼šè¿›è¡Œé«˜äº®æ“ä½œã€‚</p>\n<h4>3.2 ç›‘å¬å…ƒç´ çš„ load æˆ– unload äº‹ä»¶</h4>\n<p>å¯¹ Web å¼€å‘è€…æ¥è¯´ï¼Œç›¸ä¿¡å¾ˆå¤šäººå¯¹ <code>load</code> äº‹ä»¶éƒ½ä¸ä¼šé™Œç”Ÿã€‚å½“æ•´ä¸ªé¡µé¢åŠæ‰€æœ‰ä¾èµ–èµ„æºå¦‚æ ·å¼è¡¨å’Œå›¾ç‰‡éƒ½å·²å®ŒæˆåŠ è½½æ—¶ï¼Œå°†ä¼šè§¦å‘ <code>load</code> äº‹ä»¶ã€‚è€Œå½“æ–‡æ¡£æˆ–ä¸€ä¸ªå­èµ„æºæ­£åœ¨è¢«å¸è½½æ—¶ï¼Œä¼šè§¦å‘ <code>unload</code> äº‹ä»¶ã€‚</p>\n<p>åœ¨æ—¥å¸¸å¼€å‘è¿‡ç¨‹ä¸­ï¼Œé™¤äº†ç›‘å¬é¡µé¢çš„åŠ è½½å’Œå¸è½½äº‹ä»¶ä¹‹å¤–ï¼Œæˆ‘ä»¬ç»å¸¸è¿˜éœ€è¦ç›‘å¬ DOM èŠ‚ç‚¹çš„æ’å…¥å’Œç§»é™¤äº‹ä»¶ã€‚æ¯”å¦‚å½“ DOM èŠ‚ç‚¹æ’å…¥ DOM æ ‘ä¸­äº§ç”Ÿæ’å…¥åŠ¨ç”»ï¼Œè€Œå½“èŠ‚ç‚¹ä» DOM æ ‘ä¸­è¢«ç§»é™¤æ—¶äº§ç”Ÿç§»é™¤åŠ¨ç”»ã€‚é’ˆå¯¹è¿™ç§åœºæ™¯æˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨ MutationObserver API æ¥ç›‘å¬å…ƒç´ çš„æ·»åŠ ä¸ç§»é™¤ã€‚</p>\n<p>åŒæ ·ï¼Œåœ¨çœ‹å…·ä½“çš„å®ç°ä»£ç å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹å®é™…çš„æ•ˆæœï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023707765\" alt=\"\" title=\"\" /></p>\n<p>åœ¨ä»¥ä¸Šç¤ºä¾‹ä¸­ï¼Œå½“ç‚¹å‡» <strong>è·Ÿè¸ªå…ƒç´ ç”Ÿå‘½å‘¨æœŸ</strong> æŒ‰é’®æ—¶ï¼Œä¸€ä¸ªæ–°çš„ <strong>DIV</strong> å…ƒç´ ä¼šè¢«æ’å…¥åˆ° body ä¸­ï¼ŒæˆåŠŸæ’å…¥åï¼Œä¼šåœ¨æ¶ˆæ¯æ¡†æ˜¾ç¤ºç›¸å…³çš„ä¿¡æ¯ã€‚åœ¨ <strong>3S</strong> ä¹‹åï¼Œæ–°å¢çš„ <strong>DIV</strong> å…ƒç´ ä¼šä» DOM ä¸­ç§»é™¤ï¼ŒæˆåŠŸç§»é™¤åï¼Œä¼šåœ¨æ¶ˆæ¯æ¡†ä¸­æ˜¾ç¤º <strong>å…ƒç´ å·²ä»DOMä¸­ç§»é™¤äº†</strong> çš„ä¿¡æ¯ã€‚</p>\n<p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å…·ä½“å®ç°ï¼š</p>\n<p><strong>index.html</strong></p>\n<pre><code class=\"html\">&lt;!DOCTYPE html&gt;\n&lt;html lang=\"zh-CN\"&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"UTF-8\" /&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /&gt;\n    &lt;title&gt;MutationObserver load/unload äº‹ä»¶&lt;/title&gt;\n    &lt;link\n      rel=\"stylesheet\"\n      href=\"https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.0.0/animate.min.css\"\n    /&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;h3&gt;é˜¿å®å“¥ï¼šMutationObserver load/unload äº‹ä»¶&lt;/h3&gt;\n    &lt;div class=\"block\"&gt;\n      &lt;p&gt;\n        &lt;button onclick=\"trackElementLifecycle()\"&gt;è·Ÿè¸ªå…ƒç´ ç”Ÿå‘½å‘¨æœŸ&lt;/button&gt;\n      &lt;/p&gt;\n      &lt;textarea id=\"messageContainer\" rows=\"5\" cols=\"50\"&gt;&lt;/textarea&gt;\n    &lt;/div&gt;\n    &lt;script src=\"./on-load.js\"&gt;&lt;/script&gt;\n    &lt;script&gt;\n      const busy = false;\n      const messageContainer = document.querySelector(\"#messageContainer\");\n\n      function trackElementLifecycle() {\n        if (busy) return;\n        const div = document.createElement(\"div\");\n        div.innerText = \"æˆ‘æ˜¯æ–°å¢çš„DIVå…ƒç´ \";\n        div.classList.add(\"animate__animated\", \"animate__bounceInDown\");\n        watchElement(div);\n        document.body.appendChild(div);\n      }\n\n      function watchElement(element) {\n        onload(\n          element,\n          function (el) {\n            messageContainer.value = \"å…ƒç´ å·²è¢«æ·»åŠ åˆ°DOMä¸­, 3såå°†è¢«ç§»é™¤\";\n            setTimeout(() =&gt; document.body.removeChild(el), 3000);\n          },\n          function (el) {\n            messageContainer.value = \"å…ƒç´ å·²ä»DOMä¸­ç§»é™¤äº†\";\n          }\n        );\n      }\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;</code></pre>\n<p><strong>on-load.js</strong></p>\n<pre><code class=\"javascript\">// åªåŒ…å«éƒ¨åˆ†ä»£ç \nconst watch = Object.create(null);\nconst KEY_ID = \"onloadid\" + Math.random().toString(36).slice(2);\nconst KEY_ATTR = \"data-\" + KEY_ID;\nlet INDEX = 0;\n\nif (window &amp;&amp; window.MutationObserver) {\n  const observer = new MutationObserver(function (mutations) {\n    if (Object.keys(watch).length &lt; 1) return;\n    for (let i = 0; i &lt; mutations.length; i++) {\n      if (mutations[i].attributeName === KEY_ATTR) {\n        eachAttr(mutations[i], turnon, turnoff);\n        continue;\n      }\n      eachMutation(mutations[i].removedNodes, function (index, el) {\n        if (!document.documentElement.contains(el)) turnoff(index, el);\n      });\n      eachMutation(mutations[i].addedNodes, function (index, el) {\n        if (document.documentElement.contains(el)) turnon(index, el);\n      });\n    }\n  });\n\n  observer.observe(document.documentElement, {\n    childList: true,\n    subtree: true,\n    attributes: true,\n    attributeOldValue: true,\n    attributeFilter: [KEY_ATTR],\n  });\n}\n\nfunction onload(el, on, off, caller) {\n  on = on || function () {};\n  off = off || function () {};\n  el.setAttribute(KEY_ATTR, \"o\" + INDEX);\n  watch[\"o\" + INDEX] = [on, off, 0, caller || onload.caller];\n  INDEX += 1;\n  return el;\n}</code></pre>\n<blockquote>\n on-load.js çš„å®Œæ•´ä»£ç ï¼š\n <a href=\"https://gist.github.com/semlinker/a149763bf033d7f2dff2d32d60c27865\" rel=\"nofollow noreferrer\">https://gist.github.com/semli...</a>\n</blockquote>\n<h4>3.3 å¯Œæ–‡æœ¬ç¼–è¾‘å™¨</h4>\n<p>é™¤äº†å‰é¢ä¸¤ä¸ªåº”ç”¨åœºæ™¯ï¼Œåœ¨å¯Œæ–‡æœ¬ç¼–è¾‘å™¨çš„åœºæ™¯ï¼ŒMutationObserver API ä¹Ÿæœ‰å®ƒçš„ç”¨æ­¦ä¹‹åœ°ã€‚æ¯”å¦‚æˆ‘ä»¬å¸Œæœ›åœ¨å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ä¸­é«˜äº® <code>#</code> ç¬¦å·åçš„å†…å®¹ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ MutationObserver API æ¥ç›‘å¬ç”¨æˆ·è¾“å…¥çš„å†…å®¹ï¼Œå‘ç°ç”¨æˆ·è¾“å…¥ <code>#</code> æ—¶è‡ªåŠ¨å¯¹è¾“å…¥çš„å†…å®¹è¿›è¡Œé«˜äº®å¤„ç†ã€‚</p>\n<p>è¿™é‡Œé˜¿å®å“¥åŸºäº <a href=\"https://github.com/mitsuyacider/vue-hashtag-textarea\" rel=\"nofollow noreferrer\">vue-hashtag-textarea</a> è¿™ä¸ªé¡¹ç›®æ¥æ¼”ç¤ºä¸€ä¸‹ä¸Šè¿°çš„æ•ˆæœï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023707768\" alt=\"\" title=\"\" /></p>\n<p>æ­¤å¤–ï¼ŒMutationObserver API åœ¨ Github ä¸Šçš„ä¸€ä¸ªåä¸º <a href=\"https://github.com/codex-team/editor.js\" rel=\"nofollow noreferrer\">Editor.js</a> çš„é¡¹ç›®ä¸­ä¹Ÿæœ‰åº”ç”¨ã€‚Editor.js æ˜¯ä¸€ä¸ª <strong>Block-Styled</strong> ç¼–è¾‘å™¨ï¼Œä»¥ JSON æ ¼å¼è¾“å‡ºæ•°æ®çš„å¯Œæ–‡æœ¬å’Œåª’ä½“ç¼–è¾‘å™¨ã€‚å®ƒæ˜¯å®Œå…¨æ¨¡å—åŒ–çš„ï¼Œç”± â€œå—â€ ç»„æˆï¼Œè¿™æ„å‘³ç€æ¯ä¸ªç»“æ„å•å…ƒéƒ½æ˜¯å®ƒè‡ªå·±çš„å—ï¼ˆä¾‹å¦‚æ®µè½ã€æ ‡é¢˜ã€å›¾åƒéƒ½æ˜¯å—ï¼‰ï¼Œç”¨æˆ·å¯ä»¥è½»æ¾åœ°ç¼–å†™è‡ªå·±çš„æ’ä»¶æ¥è¿›ä¸€æ­¥æ‰©å±•ç¼–è¾‘å™¨ã€‚ </p>\n<p>åœ¨ Editor.js ç¼–è¾‘å™¨å†…éƒ¨ï¼Œå®ƒé€šè¿‡ MutationObserver API æ¥ç›‘å¬å¯Œæ–‡æœ¬æ¡†çš„å†…å®¹å¼‚åŠ¨ï¼Œç„¶åè§¦å‘ change äº‹ä»¶ï¼Œä½¿å¾—å¤–éƒ¨å¯ä»¥å¯¹å˜åŠ¨è¿›è¡Œå“åº”å’Œå¤„ç†ã€‚ä¸Šè¿°çš„åŠŸèƒ½è¢«å°è£…åˆ°å†…éƒ¨çš„ <a href=\"https://github.com/codex-team/editor.js/blob/63eeec0f3b3e05025c6f2875a1eb2a4c03a24c8c/src/components/modules/modificationsObserver.ts\" rel=\"nofollow noreferrer\">modificationsObserver.ts</a> æ¨¡å—ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥é˜…è¯» <a href=\"https://github.com/codex-team/editor.js/blob/63eeec0f3b3e05025c6f2875a1eb2a4c03a24c8c/src/components/modules/modificationsObserver.ts\" rel=\"nofollow noreferrer\">modificationsObserver.ts</a> æ¨¡å—çš„ä»£ç ã€‚</p>\n<p>å½“ç„¶åˆ©ç”¨ MutationObserver API æä¾›çš„å¼ºå¤§èƒ½åŠ›ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æœ‰å…¶ä»–çš„åº”ç”¨åœºæ™¯ï¼Œæ¯”å¦‚é˜²æ­¢é¡µé¢çš„æ°´å°å…ƒç´ è¢«åˆ é™¤ï¼Œä»è€Œé¿å…æ— æ³•è·Ÿè¸ªåˆ° â€œæ³„å¯†â€ è€…ï¼Œå½“ç„¶è¿™å¹¶ä¸æ˜¯ç»å¯¹çš„å®‰å…¨ï¼Œåªæ˜¯å¤šåŠ äº†ä¸€å±‚é˜²æŠ¤æªæ–½ã€‚å…·ä½“å¦‚ä½•å®ç°æ°´å°å…ƒç´ è¢«åˆ é™¤ï¼Œç¯‡å¹…æœ‰é™ã€‚è¿™é‡Œé˜¿å®å“¥ä¸ç»§ç»­å±•å¼€ä»‹ç»äº†ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒæ˜é‡‘ä¸Š <a href=\"https://juejin.im/post/6844904167618641927\" rel=\"nofollow noreferrer\">â€œæ‰“å¼€æ§åˆ¶å°ä¹Ÿåˆ ä¸æ‰çš„å…ƒç´ ï¼Œå‰ç«¯éƒ½å“å°¿äº†â€</a> è¿™ä¸€ç¯‡æ–‡ç« ã€‚</p>\n<p>è‡³æ­¤ MutationObserver å˜åŠ¨è§‚å¯Ÿè€…ç›¸å…³å†…å®¹å·²ç»ä»‹ç»å®Œäº†ï¼Œæ—¢ç„¶è®²åˆ°è§‚å¯Ÿè€…ï¼Œé˜¿å®å“¥æƒ…ä¸è‡ªç¦æƒ³å†ä»‹ç»ä¸€ä¸‹è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼ã€‚</p>\n<h3>å››ã€è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼</h3>\n<h4>4.1 ç®€ä»‹</h4>\n<p><strong>è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå®ƒå®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªä¸»é¢˜å¯¹è±¡ï¼Œè¿™ä¸ªä¸»é¢˜å¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶å°±ä¼šé€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€…å¯¹è±¡ï¼Œä½¿å¾—å®ƒä»¬èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°è‡ªå·±ã€‚</strong></p>\n<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼ŒæœŸåˆŠè®¢é˜…çš„ä¾‹å­æ¥å½¢è±¡åœ°è§£é‡Šä¸€ä¸‹ä¸Šé¢çš„æ¦‚å¿µã€‚æœŸåˆŠè®¢é˜…åŒ…å«ä¸¤ä¸ªä¸»è¦çš„è§’è‰²ï¼šæœŸåˆŠå‡ºç‰ˆæ–¹å’Œè®¢é˜…è€…ï¼Œä»–ä»¬ä¹‹é—´çš„å…³ç³»å¦‚ä¸‹ï¼š</p>\n<ul>\n <li>æœŸåˆŠå‡ºç‰ˆæ–¹ â€”â€” è´Ÿè´£æœŸåˆŠçš„å‡ºç‰ˆå’Œå‘è¡Œå·¥ä½œã€‚</li>\n <li>è®¢é˜…è€… â€”â€” åªéœ€æ‰§è¡Œè®¢é˜…æ“ä½œï¼Œæ–°ç‰ˆçš„æœŸåˆŠå‘å¸ƒåï¼Œå°±ä¼šä¸»åŠ¨æ”¶åˆ°é€šçŸ¥ï¼Œå¦‚æœå–æ¶ˆè®¢é˜…ï¼Œä»¥åå°±ä¸ä¼šå†æ”¶åˆ°é€šçŸ¥ã€‚</li>\n</ul>\n<p>åœ¨è§‚å¯Ÿè€…æ¨¡å¼ä¸­ä¹Ÿæœ‰ä¸¤ä¸ªä¸»è¦è§’è‰²ï¼šSubjectï¼ˆä¸»é¢˜ï¼‰å’Œ Observerï¼ˆè§‚å¯Ÿè€…ï¼‰ï¼Œå®ƒä»¬åˆ†åˆ«å¯¹åº”ä¾‹å­ä¸­çš„æœŸåˆŠå‡ºç‰ˆæ–¹å’Œè®¢é˜…è€…ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹å¼ å›¾ï¼Œè¿›ä¸€æ­¥åŠ æ·±å¯¹ä»¥ä¸Šæ¦‚å¿µçš„ç†è§£ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023707767\" alt=\"\" title=\"\" /></p>\n<h4>4.2 æ¨¡å¼ç»“æ„</h4>\n<p>è§‚å¯Ÿè€…æ¨¡å¼åŒ…å«ä»¥ä¸‹è§’è‰²ï¼š</p>\n<ul>\n <li>Subjectï¼šä¸»é¢˜ç±»</li>\n <li>Observerï¼šè§‚å¯Ÿè€…</li>\n</ul>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023707769\" alt=\"\" title=\"\" /></p>\n<h4>4.3 è§‚å¯Ÿè€…æ¨¡å¼å®æˆ˜</h4>\n<h5>4.3.1 å®šä¹‰ Observer æ¥å£</h5>\n<pre><code class=\"typescript\">interface Observer {\n  notify: Function;\n}</code></pre>\n<h5>4.3.2 åˆ›å»º ConcreteObserver è§‚å¯Ÿè€…å®ç°ç±»</h5>\n<pre><code class=\"typescript\">class ConcreteObserver implements Observer{\n    constructor(private name: string) {}\n\n    notify() {\n      console.log(`${this.name} has been notified.`);\n    }\n}</code></pre>\n<h5>4.3.3 åˆ›å»º Subject ç±»</h5>\n<pre><code class=\"typescript\">class Subject { \n    private observers: Observer[] = [];\n\n    public addObserver(observer: Observer): void {\n      console.log(observer, \"is pushed!\");\n      this.observers.push(observer);\n    }\n\n    public deleteObserver(observer: Observer): void {\n      console.log(\"remove\", observer);\n      const n: number = this.observers.indexOf(observer);\n      n != -1 &amp;&amp; this.observers.splice(n, 1);\n    }\n\n    public notifyObservers(): void {\n      console.log(\"notify all the observers\", this.observers);\n      this.observers.forEach(observer =&gt; observer.notify());\n    }\n}</code></pre>\n<h5>4.3.4 ä½¿ç”¨ç¤ºä¾‹</h5>\n<pre><code class=\"typescript\">const subject: Subject = new Subject();\nconst semlinker = new ConcreteObserver(\"semlinker\");\nconst kaquqo = new ConcreteObserver(\"kakuqo\");\nsubject.addObserver(semlinker);\nsubject.addObserver(kaquqo);\nsubject.notifyObservers();\n\nsubject.deleteObserver(kaquqo);\nsubject.notifyObservers();</code></pre>\n<p>ä»¥ä¸Šä»£ç æˆåŠŸè¿è¡Œåï¼Œæ§åˆ¶å°ä¼šè¾“å‡ºä»¥ä¸‹ç»“æœï¼š</p>\n<pre><code>[LOG]: { \"name\": \"semlinker\" },  is pushed! \n[LOG]: { \"name\": \"kakuqo\" },  is pushed! \n[LOG]: notify all the observers,  [ { \"name\": \"semlinker\" }, { \"name\": \"kakuqo\" } ] \n[LOG]: semlinker has been notified. \n[LOG]: kakuqo has been notified. \n[LOG]: remove,  { \"name\": \"kakuqo\" } \n[LOG]: notify all the observers,  [ { \"name\": \"semlinker\" } ] \n[LOG]: semlinker has been notified. </code></pre>\n<p>é€šè¿‡è§‚å¯Ÿä»¥ä¸Šçš„è¾“å‡ºç»“æœï¼Œå½“è§‚å¯Ÿè€…è¢«ç§»é™¤ä»¥åï¼Œåç»­çš„é€šçŸ¥å°±æ¥æ”¶ä¸åˆ°äº†ã€‚è§‚å¯Ÿè€…æ¨¡å¼æ”¯æŒç®€å•çš„å¹¿æ’­é€šä¿¡ï¼Œèƒ½å¤Ÿè‡ªåŠ¨é€šçŸ¥æ‰€æœ‰å·²ç»è®¢é˜…è¿‡çš„å¯¹è±¡ã€‚<strong>ä½†å¦‚æœä¸€ä¸ªè¢«è§‚å¯Ÿè€…å¯¹è±¡æœ‰å¾ˆå¤šçš„è§‚å¯Ÿè€…çš„è¯ï¼Œå°†æ‰€æœ‰çš„è§‚å¯Ÿè€…éƒ½é€šçŸ¥åˆ°ä¼šèŠ±è´¹å¾ˆå¤šæ—¶é—´ã€‚</strong> æ‰€ä»¥åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨çš„è¯ï¼Œå¤§å®¶éœ€è¦æ³¨æ„ä»¥ä¸Šçš„é—®é¢˜ã€‚</p>\n<h3>äº”ã€å‚è€ƒèµ„æº</h3>\n<ul>\n <li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/MutationObserver\" rel=\"nofollow noreferrer\">MDN - MutationObserver</a></li>\n <li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/MutationRecord\" rel=\"nofollow noreferrer\">MDN - MutationRecord</a></li>\n <li><a href=\"https://javascript.ruanyifeng.com/dom/mutationobserver.html\" rel=\"nofollow noreferrer\">JavaScript æ ‡å‡†å‚è€ƒæ•™ç¨‹ - MutationObserver</a></li>\n <li><a href=\"https://www.smashingmagazine.com/2019/04/mutationobserver-api-guide/\" rel=\"nofollow noreferrer\">mutationobserver-api-guide</a></li>\n <li><a href=\"https://zh.javascript.info/mutation-observer\" rel=\"nofollow noreferrer\">javascript.info-mutation-observer</a></li>\n</ul>\n<h3>å…­ã€æ¨èé˜…è¯»</h3>\n<ul>\n <li><a href=\"http://www.semlinker.com/ts-quickstart-2020/\" rel=\"nofollow noreferrer\">äº†ä¸èµ·çš„ TypeScript å…¥é—¨æ•™ç¨‹</a></li>\n <li><a href=\"http://www.semlinker.com/deno-quickstart/\" rel=\"nofollow noreferrer\">äº†ä¸èµ·çš„ Deno å…¥é—¨ç¯‡</a></li>\n <li><a href=\"http://www.semlinker.com/deno-in-action/\" rel=\"nofollow noreferrer\">äº†ä¸èµ·çš„ Deno å®æˆ˜æ•™ç¨‹</a></li>\n <li><a href=\"http://www.semlinker.com/you-dont-know-blob/\" rel=\"nofollow noreferrer\">ä½ ä¸çŸ¥é“çš„ Blob</a></li>\n <li><a href=\"http://www.semlinker.com/you-dont-know-weakmap/\" rel=\"nofollow noreferrer\">ä½ ä¸çŸ¥é“çš„ WeakMap</a></li>\n</ul>","descriptionType":"html","publishedDate":"Fri, 21 Aug 2020 00:56:51 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/remote/1460000023707764","linkMd5":"0efc7a62efcc894fd0f116660993cd89","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn37@2020_5/2020/08/24/23-08-22-393_74b3a8806a1a5203.webp","destWidth":800,"destHeight":139,"sourceBytes":63134,"destBytes":18322,"author":"é˜¿å®å“¥","articleImgCdnMap":{"https://segmentfault.com/img/remote/1460000023707764":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn37@2020_5/2020/08/24/23-08-22-393_74b3a8806a1a5203.webp","https://segmentfault.com/img/remote/1460000023707763":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn2@2020_4/2020/08/24/23-08-28-672_28796882d7b84489.webp","https://segmentfault.com/img/remote/1460000023707766":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn98@2020_5/2020/08/24/23-08-28-778_597d7f470508ef42.webp","https://segmentfault.com/img/remote/1460000023707765":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn81@2020_4/2020/08/24/23-08-28-749_fbb1b3d44d3ddb63.webp","https://segmentfault.com/img/remote/1460000023707768":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn45@2020_2/2020/08/24/23-08-28-692_d2d8d27bbfe59f0d.webp","https://segmentfault.com/img/remote/1460000023707767":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn90@2020_5/2020/08/24/23-08-28-638_bfa3d2edabd96c89.webp","https://segmentfault.com/img/remote/1460000023707769":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn33@2020_5/2020/08/24/23-08-28-835_72ecbead9d15c7c3.webp"},"publishedOrCreatedDate":1598310388570},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"Tomcat é«˜å¹¶å‘ä¹‹é“ä¸æ€§èƒ½è°ƒä¼˜","link":"https://segmentfault.com/a/1190000023657729","description":"<blockquote>\n ä¸Šå¸è§†è§’æ‹†è§£ Tomcat æ¶æ„è®¾è®¡ï¼Œåœ¨äº†è§£æ•´ä¸ªç»„ä»¶è®¾è®¡æ€è·¯ä¹‹åã€‚æˆ‘ä»¬éœ€è¦ä¸‹å‡¡æ·±å…¥äº†è§£æ¯ä¸ªç»„ä»¶çš„ç»†èŠ‚å®ç°ã€‚ä»è¿œåˆ°è¿‘ï¼Œæ¶æ„ç»™äººä»¥å®è§‚æ€ç»´ï¼Œç»†èŠ‚å±•ç°é¥±æ»¡çš„ç¾ã€‚å…³æ³¨ã€Œç å“¥å­—èŠ‚ã€è·å–æ›´å¤šç¡¬æ ¸ï¼Œä½ ï¼Œå‡†å¤‡å¥½äº†ä¹ˆï¼Ÿ\n</blockquote>\n<p>ä¸Šå›ã€Œç å“¥å­—èŠ‚ã€ç«™åœ¨ä¸Šå¸è§†è§’ç»™å¤§å®¶æ‹†è§£äº† Tomcat æ¶æ„è®¾è®¡ï¼Œåˆ†æ Tomcat å¦‚ä½•å®ç°å¯åŠ¨ã€åœæ­¢ï¼Œé€šè¿‡è®¾è®¡è¿æ¥æ± ä¸å®¹å™¨ä¸¤å¤§ç»„ä»¶å®Œæˆäº†ä¸€ä¸ªè¯·æ±‚çš„æ¥å—ä¸å“åº”ã€‚<strong>è¿æ¥å™¨è´Ÿè´£å¯¹å¤–äº¤æµï¼Œå¤„ç† socket è¿æ¥ï¼Œå®¹å™¨å¯¹å†…è´Ÿè´£ï¼ŒåŠ è½½ Servlet ä»¥åŠå¤„ç†å…·ä½“ Request è¯·æ±‚ä¸å“åº”</strong>ã€‚<a href=\"https://mp.weixin.qq.com/s/fU5Jj9tQvNTjRiT9grm6RA\" rel=\"nofollow noreferrer\">è¯¦æƒ…ç‚¹æˆ‘è¿›å…¥ä¼ è¾“é—¨ï¼šTomcat æ¶æ„è§£æåˆ°å·¥ä½œå€Ÿé‰´</a>ã€‚</p>\n<h2>é«˜å¹¶å‘æ‹†è§£æ ¸å¿ƒå‡†å¤‡</h2>\n<p>è¿™å›ï¼Œå†æ¬¡æ‹†è§£ï¼Œ<strong>ä¸“æ³¨ Tomcat é«˜å¹¶å‘è®¾è®¡ä¹‹é“ä¸æ€§èƒ½è°ƒä¼˜</strong>ï¼Œè®©å¤§å®¶å¯¹æ•´ä¸ªæ¶æ„æœ‰æ›´é«˜å±‚æ¬¡çš„äº†è§£ä¸æ„Ÿæ‚Ÿã€‚å…¶ä¸­è®¾è®¡çš„æ¯ä¸ªç»„ä»¶æ€è·¯éƒ½æ˜¯å°† Java é¢å‘å¯¹è±¡ã€é¢å‘æ¥å£ã€å¦‚ä½•å°è£…å˜ä¸ä¸å˜ï¼Œå¦‚ä½•æ ¹æ®å®é™…éœ€æ±‚æŠ½è±¡ä¸åŒç»„ä»¶åˆ†å·¥åˆä½œï¼Œå¦‚ä½•è®¾è®¡ç±»å®ç°å•ä¸€èŒè´£ï¼Œæ€ä¹ˆåšåˆ°å°†ç›¸ä¼¼åŠŸèƒ½é«˜å†…èšä½è€¦åˆï¼Œè®¾è®¡æ¨¡å¼è¿ç”¨åˆ°æè‡´çš„å­¦ä¹ å€Ÿé‰´ã€‚</p>\n<p>è¿™æ¬¡ä¸»è¦æ¶‰åŠåˆ°çš„æ˜¯ I/O æ¨¡å‹ï¼Œä»¥åŠçº¿ç¨‹æ± çš„åŸºç¡€å†…å®¹ã€‚</p>\n<p>åœ¨å­¦ä¹ ä¹‹å‰ï¼Œå¸Œæœ›å¤§å®¶ç§¯ç´¯ä»¥ä¸‹ä¸€äº›æŠ€æœ¯å†…å®¹ï¼Œå¾ˆå¤šå†…å®¹ã€Œç å“¥å­—èŠ‚ã€ä¹Ÿåœ¨å†å²æ–‡ç« ä¸­åˆ†äº«è¿‡ã€‚å¤§å®¶å¯çˆ¬æ¥¼å›é¡¾â€¦â€¦ã€‚<strong>å¸Œæœ›å¤§å®¶é‡è§†å¦‚ä¸‹å‡ ä¸ªçŸ¥è¯†ç‚¹ï¼Œåœ¨æŒæ¡ä»¥ä¸‹çŸ¥è¯†ç‚¹å†æ¥æ‹†è§£ Tomcatï¼Œå°±ä¼šäº‹åŠåŠŸå€ï¼Œå¦åˆ™å¾ˆå®¹æ˜“è¿·å¤±æ–¹å‘ä¸å¾—å…¶æ³•</strong>ã€‚</p>\n<p>ä¸€èµ·æ¥çœ‹ Tomcat å¦‚ä½•å®ç°å¹¶å‘è¿æ¥å¤„ç†ä»¥åŠä»»åŠ¡å¤„ç†ï¼Œæ€§èƒ½çš„ä¼˜åŒ–æ˜¯æ¯ä¸€ä¸ªç»„ä»¶éƒ½èµ·åˆ°å¯¹åº”çš„ä½œç”¨ï¼Œå¦‚ä½•ä½¿ç”¨æœ€å°‘çš„å†…å­˜ï¼Œæœ€å¿«çš„é€Ÿåº¦æ‰§è¡Œæ˜¯æˆ‘ä»¬çš„ç›®æ ‡ã€‚</p>\n<h3>è®¾è®¡æ¨¡å¼</h3>\n<p><a href=\"https://mp.weixin.qq.com/s/AVfEy9fMRHhESKnfRERynw\" rel=\"nofollow noreferrer\">æ¨¡æ¿æ–¹æ³•æ¨¡å¼</a>ï¼š æŠ½è±¡ç®—æ³•æµç¨‹åœ¨æŠ½è±¡ç±»ä¸­ï¼Œå°è£…æµç¨‹ä¸­çš„å˜åŒ–ä¸ä¸å˜ç‚¹ã€‚å°†å˜åŒ–ç‚¹å»¶è¿Ÿåˆ°å­ç±»å®ç°ï¼Œè¾¾åˆ°ä»£ç å¤ç”¨ï¼Œå¼€é—­åŸåˆ™ã€‚</p>\n<p><a href=\"https://mp.weixin.qq.com/s/7FL-m75fOctUVAMI_YgIww\" rel=\"nofollow noreferrer\">è§‚å¯Ÿè€…æ¨¡å¼</a>ï¼šé’ˆå¯¹äº‹ä»¶ä¸åŒç»„ä»¶æœ‰ä¸åŒå“åº”æœºåˆ¶çš„éœ€æ±‚åœºæ™¯ï¼Œè¾¾åˆ°è§£è€¦çµæ´»é€šçŸ¥ä¸‹æ¸¸ã€‚</p>\n<p><a href=\"https://mp.weixin.qq.com/s/Ar_FZ6ck_WEjr9ia9bjmcQ\" rel=\"nofollow noreferrer\">è´£ä»»é“¾æ¨¡å¼</a>ï¼šå°†å¯¹è±¡è¿æ¥æˆä¸€æ¡é“¾ï¼Œå°†æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯·æ±‚ã€‚åœ¨ Tomcat ä¸­çš„ Valve å°±æ˜¯è¯¥è®¾è®¡æ¨¡å¼çš„è¿ç”¨ã€‚</p>\n<p>æ›´å¤šè®¾è®¡æ¨¡å¼å¯æŸ¥çœ‹ã€Œç å“¥å­—èŠ‚ã€ä¹‹å‰çš„è®¾è®¡æ¨¡å¼ä¸“è¾‘ï¼Œè¿™é‡Œæ˜¯<a href=\"https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzU3NDkwMjAyOQ==&amp;action=getalbum&amp;album_id=1351452628844363777&amp;subscene=159&amp;subscene=&amp;scenenote=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FAr_FZ6ck_WEjr9ia9bjmcQ#wechat_redirect\" rel=\"nofollow noreferrer\">ä¼ é€é—¨</a>ã€‚</p>\n<h3>I/O æ¨¡å‹</h3>\n<p>Tomcat å®ç°é«˜å¹¶å‘æ¥æ”¶è¿æ¥ï¼Œå¿…ç„¶æ¶‰åŠåˆ° I/O æ¨¡å‹çš„è¿ç”¨ï¼Œäº†è§£åŒæ­¥é˜»å¡ã€å¼‚æ­¥é˜»å¡ã€I/O å¤šè·¯å¤ç”¨ï¼Œå¼‚æ­¥éé˜»å¡ç›¸å…³æ¦‚å¿µä»¥åŠ Java NIO åŒ…çš„è¿ç”¨å¾ˆæœ‰å¿…è¦ã€‚æœ¬æ–‡ä¹Ÿä¼šå¸¦å¤§å®¶ç€é‡è¯´æ˜ I/O æ˜¯å¦‚ä½•åœ¨ Tomcat è¿ç”¨å®ç°é«˜å¹¶å‘è¿æ¥ã€‚å¤§å®¶é€šè¿‡æœ¬æ–‡æˆ‘ç›¸ä¿¡å¯¹ I/O æ¨¡å‹ä¹Ÿä¼šæœ‰ä¸€ä¸ªæ·±åˆ»è®¤è¯†ã€‚</p>\n<h3>Java å¹¶å‘ç¼–ç¨‹</h3>\n<p>å®ç°é«˜å¹¶å‘ï¼Œé™¤äº†æ•´ä½“æ¯ä¸ªç»„ä»¶çš„ä¼˜é›…è®¾è®¡ã€è®¾è®¡æ¨¡å¼çš„åˆç†ã€I/O çš„è¿ç”¨ï¼Œè¿˜éœ€è¦çº¿ç¨‹æ¨¡å‹ï¼Œå¦‚ä½•é«˜æ•ˆçš„å¹¶å‘ç¼–ç¨‹æŠ€å·§ã€‚åœ¨é«˜å¹¶å‘è¿‡ç¨‹ä¸­ï¼Œä¸å¯é¿å…çš„ä¼šå‡ºç°å¤šä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„è®¿é—®ï¼Œéœ€è¦åŠ é”å®ç°ï¼Œå¦‚ä½•é«˜æ•ˆçš„é™ä½é”å†²çªã€‚å› æ­¤ä½œä¸ºç¨‹åºå‘˜ï¼Œè¦æœ‰æ„è¯†çš„å°½é‡é¿å…é”çš„ä½¿ç”¨ï¼Œæ¯”å¦‚å¯ä»¥ä½¿ç”¨åŸå­ç±» CAS æˆ–è€…å¹¶å‘é›†åˆæ¥ä»£æ›¿ã€‚å¦‚æœä¸‡ä¸å¾—å·²éœ€è¦ç”¨åˆ°é”ï¼Œä¹Ÿè¦å°½é‡ç¼©å°é”çš„èŒƒå›´å’Œé”çš„å¼ºåº¦ã€‚</p>\n<p>å¯¹äºå¹¶å‘ç›¸å…³çš„åŸºç¡€çŸ¥è¯†ï¼Œå¦‚æœè¯»è€…æ„Ÿå…´è¶£ã€Œç å“¥å­—èŠ‚ã€åé¢ä¹Ÿç»™å¤§å®¶å®‰æ’ä¸Šï¼Œç›®å‰ä¹Ÿå†™äº†éƒ¨åˆ†å¹¶å‘ä¸“è¾‘ï¼Œå¤§å®¶å¯ç§»æ­¥åˆ°å†å²æ–‡ç« æˆ–è€…ä¸“è¾‘ç¿»é˜…ï¼Œè¿™é‡Œæ˜¯<a href=\"http://mp.weixin.qq.com/mp/homepage?__biz=MzU3NDkwMjAyOQ==&amp;hid=7&amp;sn=660e8728f9eb24248cc7953796dbe773&amp;scene=18#wechat_redirect\" rel=\"nofollow noreferrer\">ä¼ é€é—¨</a>ï¼Œä¸»è¦è®²è§£äº†å¹¶å‘å®ç°çš„åŸç†ã€ä»€ä¹ˆæ˜¯å†…å­˜å¯è§æ€§ï¼ŒJMM å†…å­˜æ¨¡æ¨¡å‹ã€è¯»å†™é”ç­‰å¹¶å‘çŸ¥è¯†ç‚¹ã€‚</p>\n<h2>Tomcat æ€»ä½“æ¶æ„</h2>\n<p>å†æ¬¡å›é¡¾ä¸‹ Tomcat æ•´ä½“æ¶æ„è®¾è®¡ï¼Œä¸»è¦è®¾è®¡äº† <strong>connector è¿æ¥å™¨</strong>å¤„ç† TCP/IP è¿æ¥ï¼Œ<strong>container å®¹å™¨</strong>ä½œä¸º Servlet å®¹å™¨ï¼Œå¤„ç†å…·ä½“çš„ä¸šåŠ¡è¯·æ±‚ã€‚å¯¹å¤–å¯¹å†…åˆ†åˆ«æŠ½è±¡ä¸¤ä¸ªç»„ä»¶å®ç°æ‹“å±•ã€‚</p>\n<ul>\n <li>ä¸€ä¸ª Tomcat å®ä¾‹é»˜è®¤ä¼šæœ‰ä¸€ä¸ª Serviceï¼Œè€Œä¸€ä¸ª Service å¯ä»¥åŒ…å«å¤šä¸ªè¿æ¥å™¨ã€‚è¿æ¥å™¨ä¸»è¦æœ‰ ProtocalHandler å’Œ Adapter ä¸¤ä¸ªç»„ä»¶å…±åŒå®Œæˆè¿æ¥å™¨æ ¸å¿ƒåŠŸèƒ½ã€‚</li>\n <li><code>ProtocolHandler</code> ä¸»è¦ç”± <code>Acceptor</code> ä»¥åŠ <code>SocketProcessor</code> æ„æˆï¼Œå®ç°äº† TCP/IP å±‚ çš„ Socket è¯»å–å¹¶è½¬æ¢æˆ <code>TomcatRequest</code> å’Œ <code>TomcatResponse</code>ï¼Œæœ€åæ ¹æ® http æˆ–è€… ajp åè®®è·å–åˆé€‚çš„ <code>Processor</code> è§£æä¸ºåº”ç”¨å±‚åè®®ï¼Œå¹¶é€šè¿‡ Adapter å°† TomcatRequestã€TomcatResponse è½¬åŒ–æˆ æ ‡å‡†çš„ ServletRequestã€ServletResponseã€‚é€šè¿‡ <code>getAdapter().service(request, response);</code>å°†è¯·æ±‚ä¼ é€’åˆ° Container å®¹å™¨ã€‚</li>\n <li>adapter.service()å®ç°å°†è¯·æ±‚è½¬å‘åˆ°å®¹å™¨ <code>org.apache.catalina.connector.CoyoteAdapter</code></li>\n</ul>\n<pre><code class=\"java\">// Calling the container\nconnector.getService().getContainer().getPipeline().getFirst().invoke(\n                        request, response);</code></pre>\n<p>è¿™ä¸ªè°ƒç”¨ä¼šè§¦å‘ getPipeline æ„æˆçš„è´£ä»»é“¾æ¨¡å¼å°†è¯·æ±‚ä¸€æ­¥æ­¥èµ°å…¥å®¹å™¨å†…éƒ¨ï¼Œæ¯ä¸ªå®¹å™¨éƒ½æœ‰ä¸€æ¡ Pipelineï¼Œé€šè¿‡ First å¼€å§‹åˆ° Basic ç»“æŸå¹¶è¿›å…¥å®¹å™¨å†…éƒ¨æŒæœ‰çš„å­ç±»å®¹å™¨ï¼Œæœ€ååˆ° Servletï¼Œè¿™é‡Œå°±æ˜¯è´£ä»»é“¾æ¨¡å¼çš„ç»å…¸è¿ç”¨ã€‚å…·ä½“çš„æºç ç»„ä»¶æ˜¯ Pipeline æ„æˆä¸€æ¡è¯·æ±‚é“¾ï¼Œæ¯ä¸€ä¸ªé“¾ç‚¹ç”± Valve ç»„æˆã€‚ã€Œç å“¥å­—èŠ‚ã€åœ¨ä¸Šä¸€ç¯‡<a href=\"https://mp.weixin.qq.com/s/fU5Jj9tQvNTjRiT9grm6RA\" rel=\"nofollow noreferrer\">Tomcat æ¶æ„è§£æåˆ°å·¥ä½œå€Ÿé‰´</a> å·²ç»è¯¦ç»†è®²è§£ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ•´ä¸ª Tomcat çš„æ¶æ„è®¾è®¡é‡è¦ç»„ä»¶æ¸…æ™°å¯è§ï¼Œå¸Œæœ›å¤§å®¶å°†è¿™ä¸ªå…¨å±€æ¶æ„å›¾æ·±æ·±å°åœ¨è„‘æµ·é‡Œï¼ŒæŒæ¡å…¨å±€æ€è·¯æ‰èƒ½æ›´å¥½åœ°åˆ†æç»†èŠ‚ä¹‹ç¾ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023657732\" alt=\"Tomcat æ¶æ„\" title=\"Tomcat æ¶æ„\" /></p>\n<h3>å¯åŠ¨æµç¨‹ï¼šstartup.sh è„šæœ¬åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆ</h3>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023657733\" alt=\"Tomcat å¯åŠ¨æµç¨‹\" title=\"Tomcat å¯åŠ¨æµç¨‹\" /></p>\n<ul>\n <li>Tomcat æœ¬ç”Ÿå°±æ˜¯ä¸€ä¸ª Java ç¨‹åºï¼Œæ‰€ä»¥ startup.sh è„šæœ¬å°±æ˜¯å¯åŠ¨ä¸€ä¸ª JVM æ¥è¿è¡Œ Tomcat çš„å¯åŠ¨ç±» Bootstrapã€‚</li>\n <li>Bootstrap ä¸»è¦å°±æ˜¯å®ä¾‹åŒ– Catalina å’Œåˆå§‹åŒ– Tomcat è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨ã€‚çƒ­åŠ è½½ä¸çƒ­éƒ¨ç½²å°±æ˜¯é ä»–å®ç°ã€‚</li>\n <li>Catalina: è§£æ server.xml åˆ›å»º Server ç»„ä»¶ï¼Œå¹¶ä¸”è°ƒç”¨ Server.start() æ–¹æ³•ã€‚</li>\n <li>Serverï¼šç®¡ç† Service ç»„ä»¶ï¼Œè°ƒç”¨ Server çš„ start() æ–¹æ³•ã€‚</li>\n <li>Serviceï¼šä¸»è¦èŒè´£å°±æ˜¯ç®¡ç†ç®€ä»‹å™¨çš„é¡¶å±‚å®¹å™¨ Engineï¼Œåˆ†åˆ«è°ƒç”¨ <code>Connector</code> å’Œ <code>Engine</code> çš„ <code>start</code> æ–¹æ³•ã€‚</li>\n</ul>\n<p>Engine å®¹å™¨ä¸»è¦å°±æ˜¯ç»„åˆæ¨¡å¼å°†å„ä¸ªå®¹å™¨æ ¹æ®çˆ¶å­å…³ç³»å…³è”ï¼Œå¹¶ä¸” Container å®¹å™¨ç»§æ‰¿äº† Lifecycle å®ç°å„ä¸ªå®¹å™¨çš„åˆå§‹åŒ–ä¸å¯åŠ¨ã€‚Lifecycle å®šä¹‰äº† <code>init()ã€start()ã€stop()</code> æ§åˆ¶æ•´ä¸ªå®¹å™¨ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå®ç°ä¸€é”®å¯åœã€‚</p>\n<p><strong>è¿™é‡Œå°±æ˜¯ä¸€ä¸ªé¢å‘æ¥å£ã€å•ä¸€èŒè´£çš„è®¾è®¡æ€æƒ³</strong> ï¼ŒContainer åˆ©ç”¨ç»„åˆæ¨¡å¼ç®¡ç†å®¹å™¨ï¼ŒLifecycleBase æŠ½è±¡ç±»ç»§æ‰¿ Lifecycle å°†å„å¤§å®¹å™¨ç”Ÿå‘½å‘¨æœŸç»Ÿä¸€ç®¡ç†è¿™é‡Œä¾¿æ˜¯ï¼Œè€Œå®ç°åˆå§‹åŒ–ä¸å¯åŠ¨çš„è¿‡ç¨‹åˆ LifecycleBase è¿ç”¨äº†<a href=\"https://mp.weixin.qq.com/s/AVfEy9fMRHhESKnfRERynw\" rel=\"nofollow noreferrer\">æ¨¡æ¿æ–¹æ³•</a>è®¾è®¡æ¨¡å¼æŠ½è±¡å‡ºç»„ä»¶å˜åŒ–ä¸ä¸å˜çš„ç‚¹ï¼Œå°†ä¸åŒç»„ä»¶çš„åˆå§‹åŒ–å»¶è¿Ÿåˆ°å…·ä½“å­ç±»å®ç°ã€‚å¹¶ä¸”åˆ©ç”¨è§‚å¯Ÿè€…æ¨¡å¼å‘å¸ƒå¯åŠ¨äº‹ä»¶è§£è€¦ã€‚</p>\n<p>å…·ä½“çš„ init ä¸ start æµç¨‹å¦‚ä¸‹æ³³é“å›¾æ‰€ç¤ºï¼šè¿™æ˜¯æˆ‘åœ¨é˜…è¯»æºç  debug æ‰€åšçš„ç¬”è®°ï¼Œè¯»è€…æœ‹å‹ä»¬<strong>ä¸è¦æ€•ç¬”è®°èŠ±è´¹æ—¶é—´é•¿ï¼Œè‡ªå·±è·Ÿç€ debug æ…¢æ…¢è®°å½•ï¼Œç›¸ä¿¡ä¼šæœ‰æ›´æ·±çš„æ„Ÿæ‚Ÿ</strong>ã€‚</p>\n<p><strong>init æµç¨‹</strong></p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023657734\" alt=\"Tomcat Init\" title=\"Tomcat Init\" /></p>\n<p><strong>start æµç¨‹</strong></p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023657735\" alt=\"Tomcat start\" title=\"Tomcat start\" /></p>\n<p>è¯»è€…æœ‹å‹æ ¹æ®æˆ‘çš„ä¸¤ç¯‡å†…å®¹ï¼ŒæŠ“ä½ä¸»çº¿ç»„ä»¶å» debugï¼Œç„¶åè·Ÿç€è¯¥æ³³é“å›¾é˜…è¯»æºç ï¼Œæˆ‘ç›¸ä¿¡éƒ½ä¼šæœ‰æ‰€æ”¶è·ï¼Œå¹¶ä¸”äº‹åŠåŠŸå€ã€‚åœ¨è¯»æºç çš„è¿‡ç¨‹ä¸­ï¼Œåˆ‡å‹¿è¿›å…¥æŸä¸ªç»†èŠ‚ï¼Œä¸€å®šè¦å…ˆæŠŠå„ä¸ªç»„ä»¶æŠ½è±¡å‡ºæ¥ï¼Œäº†è§£æ¯ä¸ªç»„ä»¶çš„èŒè´£å³å¯ã€‚æœ€ååœ¨äº†è§£æ¯ä¸ªç»„ä»¶çš„èŒè´£ä¸è®¾è®¡å“²å­¦ä¹‹åå†æ·±å…¥ç†è§£æ¯ä¸ªç»„ä»¶çš„å®ç°ç»†èŠ‚ï¼Œåƒä¸‡ä¸è¦ä¸€å¼€å§‹å°±æƒ³ç€æ·±å…¥ç†è§£å…·ä½“ä¸€ç¯‡å¶å­ã€‚</p>\n<p>æ¯ä¸ªæ ¸å¿ƒç±»æˆ‘åœ¨æ¶æ„è®¾è®¡å›¾ä»¥åŠæ³³é“å›¾éƒ½æ ‡è¯†å‡ºæ¥äº†ï¼Œã€Œç å“¥å­—èŠ‚ã€ç»™å¤§å®¶åˆ†äº«ä¸‹å¦‚ä½•é«˜æ•ˆé˜…è¯»æºç ï¼Œä»¥åŠä¿æŒå­¦ä¹ å…´è¶£çš„å¿ƒå¾—ä½“ä¼šã€‚</p>\n<h3>å¦‚ä½•æ­£ç¡®é˜…è¯»æºç </h3>\n<p>åˆ‡å‹¿é™·å…¥ç»†èŠ‚ï¼Œä¸çœ‹å…¨å±€ï¼š<strong>æˆ‘è¿˜æ²¡å¼„æ¸…æ¥šæ£®æ—é•¿å•¥æ ·ï¼Œå°±ç›¯ç€å¶å­çœ‹</strong> ï¼Œçœ‹ä¸åˆ°å…¨è²Œå’Œæ•´ä½“è®¾è®¡æ€è·¯ã€‚æ‰€ä»¥é˜…è¯»æºç å­¦ä¹ çš„æ—¶å€™ä¸è¦ä¸€å¼€å§‹å°±è¿›å…¥ç»†èŠ‚ï¼Œè€Œæ˜¯å®è§‚çœ‹å¾…æ•´ä½“æ¶æ„è®¾è®¡æ€æƒ³ï¼Œæ¨¡å—ä¹‹é—´çš„å…³ç³»ã€‚</p>\n<p><strong>1.é˜…è¯»æºç ä¹‹å‰ï¼Œéœ€è¦æœ‰ä¸€å®šçš„æŠ€æœ¯å‚¨å¤‡</strong></p>\n<p>æ¯”å¦‚å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œè¿™ä¸ªå¿…é¡»æŒæ¡ï¼Œå°¤å…¶æ˜¯ï¼š<strong>æ¨¡æ¿æ–¹æ³•ã€ç­–ç•¥æ¨¡å¼ã€å•ä¾‹ã€å·¥å‚ã€è§‚å¯Ÿè€…ã€åŠ¨æ€ä»£ç†ã€é€‚é…å™¨ã€è´£ä»»é“¾ã€è£…é¥°å™¨ã€‚</strong>å¤§å®¶å¯ä»¥çœ‹ ã€Œç å“¥å­—èŠ‚ã€å…³äºè®¾è®¡æ¨¡å¼çš„å†å²æ–‡ç« ï¼Œæ‰“é€ å¥½çš„åŸºç¡€ã€‚</p>\n<p><strong>2.å¿…é¡»ä¼šä½¿ç”¨è¿™ä¸ªæ¡†æ¶/ç±»åº“ï¼Œç²¾é€šå„ç§å˜é€šç”¨æ³•</strong></p>\n<p>é­”é¬¼éƒ½åœ¨ç»†èŠ‚ä¸­ï¼Œå¦‚æœæœ‰äº›ç”¨æ³•æ ¹æœ¬ä¸çŸ¥é“ï¼Œå¯èƒ½ä½ èƒ½çœ‹æ˜ç™½ä»£ç æ˜¯ä»€ä¹ˆæ„æ€ï¼Œä½†æ˜¯ä¸çŸ¥é“å®ƒä¸ºä»€ä¹ˆè¿™äº›å†™ã€‚</p>\n<p><strong>3.å…ˆå»æ‰¾ä¹¦ï¼Œæ‰¾èµ„æ–™ï¼Œäº†è§£è¿™ä¸ªè½¯ä»¶çš„æ•´ä½“è®¾è®¡ã€‚</strong></p>\n<p>ä»å…¨å±€çš„è§†è§’å»çœ‹å¾…ï¼Œä¸Šå¸è§†è§’ç†å‡ºä¸»è¦æ ¸å¿ƒæ¶æ„è®¾è®¡ï¼Œå…ˆæ£®æ—åæ ‘å¶ã€‚éƒ½æœ‰å“ªäº›æ¨¡å—ï¼Ÿ æ¨¡å—ä¹‹é—´æ˜¯æ€ä¹ˆå…³è”çš„ï¼Ÿæ€ä¹ˆå…³è”çš„ï¼Ÿ</p>\n<p>å¯èƒ½ä¸€ä¸‹å­ç†è§£ä¸äº†ï¼Œä½†æ˜¯è¦å»ºç«‹ä¸€ä¸ªæ•´ä½“çš„æ¦‚å¿µï¼Œå°±åƒä¸€ä¸ªåœ°å›¾ï¼Œé˜²æ­¢ä½ è¿·èˆªã€‚</p>\n<p>åœ¨è¯»æºç çš„æ—¶å€™å¯ä»¥æ—¶ä¸æ—¶çœ‹çœ‹è‡ªå·±åœ¨ä»€ä¹ˆåœ°æ–¹ã€‚å°±åƒã€Œç å“¥å­—èŠ‚ã€ç»™å¤§å®¶æ¢³ç†å¥½äº† Tomcat ç›¸å…³æ¶æ„è®¾è®¡ï¼Œç„¶åè‡ªå·±å†å°è¯•è·Ÿç€ debugï¼Œè¿™æ ·çš„æ•ˆç‡å¦‚è™æ·»ç¿¼ã€‚</p>\n<p><strong>4. æ­å»ºç³»ç»Ÿï¼ŒæŠŠæºä»£ç è·‘èµ·æ¥ï¼</strong></p>\n<p>Debug æ˜¯éå¸¸éå¸¸é‡è¦çš„æ‰‹æ®µï¼Œ ä½ æƒ³é€šè¿‡åªçœ‹è€Œä¸è¿è¡Œå°±æŠŠç³»ç»Ÿææ¸…æ¥šï¼Œé‚£æ˜¯æ ¹æœ¬ä¸å¯èƒ½çš„ï¼åˆç†è¿ç”¨è°ƒç”¨æ ˆï¼ˆè§‚å¯Ÿè°ƒç”¨è¿‡ç¨‹ä¸Šä¸‹æ–‡ï¼‰ã€‚</p>\n<p><strong>5.ç¬”è®°</strong></p>\n<p>ä¸€ä¸ªéå¸¸é‡è¦çš„å·¥ä½œå°±æ˜¯è®°ç¬”è®°ï¼ˆåˆæ˜¯å†™ä½œï¼ï¼‰ï¼Œç”»å‡ºç³»ç»Ÿçš„ç±»å›¾ï¼ˆä¸è¦ä¾é  IDE ç»™ä½ ç”Ÿæˆçš„ï¼‰ï¼Œ è®°å½•ä¸‹ä¸»è¦çš„å‡½æ•°è°ƒç”¨ï¼Œ æ–¹ä¾¿åç»­æŸ¥çœ‹ã€‚</p>\n<p><strong>æ–‡æ¡£å·¥ä½œæä¸ºé‡è¦</strong>ï¼Œå› ä¸ºä»£ç å¤ªå¤æ‚ï¼Œäººçš„å¤§è„‘å®¹é‡ä¹Ÿæœ‰é™ï¼Œè®°ä¸ä½æ‰€æœ‰çš„ç»†èŠ‚ã€‚ æ–‡æ¡£å¯ä»¥å¸®åŠ©ä½ è®°ä½å…³é”®ç‚¹ï¼Œ åˆ°æ—¶å€™å¯ä»¥å›æƒ³èµ·æ¥ï¼Œè¿…é€Ÿåœ°æ¥ç€å¾€ä¸‹çœ‹ã€‚</p>\n<p>è¦ä¸ç„¶ï¼Œä½ ä»Šå¤©çœ‹çš„ï¼Œå¯èƒ½åˆ°æ˜å¤©å°±å¿˜ä¸ªå·®ä¸å¤šäº†ã€‚æ‰€ä»¥æœ‹å‹ä»¬è®°å¾—æ”¶è—åå¤šç¿»æ¥çœ‹çœ‹ï¼Œå°è¯•æŠŠæºç ä¸‹è½½ä¸‹æ¥åå¤è°ƒè¯•ã€‚</p>\n<h4>é”™è¯¯æ–¹å¼</h4>\n<ul>\n <li>é™·å…¥ç»†èŠ‚ï¼Œä¸çœ‹å…¨å±€ï¼š<strong>æˆ‘è¿˜æ²¡å¼„æ¸…æ¥šæ£®æ—é•¿å•¥æ ·ï¼Œå°±ç›¯ç€å¶å­çœ‹</strong> ï¼Œçœ‹ä¸åˆ°å…¨è²Œå’Œæ•´ä½“è®¾è®¡æ€è·¯ã€‚æ‰€ä»¥é˜…è¯»æºç å­¦ä¹ çš„æ—¶å€™ä¸è¦ä¸€å¼€å§‹å°±è¿›å…¥ç»†èŠ‚ï¼Œè€Œæ˜¯å®è§‚çœ‹å¾…æ•´ä½“æ¶æ„è®¾è®¡æ€æƒ³ï¼Œæ¨¡å—ä¹‹é—´çš„å…³ç³»ã€‚</li>\n <li>è¿˜æ²¡å­¦ä¼šç”¨å°±ç ”ç©¶å¦‚ä½•è®¾è®¡ï¼šé¦–å…ˆåŸºæœ¬ä¸Šæ¡†æ¶éƒ½è¿ç”¨äº†è®¾è®¡æ¨¡å¼ï¼Œæˆ‘ä»¬æœ€èµ·ç ä¹Ÿè¦äº†è§£å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå³ä½¿æ˜¯â€œèƒŒâ€ï¼Œä¹Ÿå¾—äº†ç„¶äºèƒ¸ã€‚åœ¨å­¦ä¹ ä¸€é—¨æŠ€æœ¯ï¼Œæˆ‘æ¨èå…ˆçœ‹å®˜æ–¹æ–‡æ¡£ï¼Œçœ‹çœ‹æœ‰å“ªäº›æ¨¡å—ã€æ•´ä½“è®¾è®¡æ€æƒ³ã€‚ç„¶åä¸‹è½½ç¤ºä¾‹è·‘ä¸€éï¼Œæœ€åæ‰æ˜¯çœ‹æºç ã€‚</li>\n <li>çœ‹æºç æ·±ç©¶ç»†èŠ‚ï¼šåˆ°äº†çœ‹å…·ä½“æŸä¸ªæ¨¡å—æºç çš„æ—¶å€™ä¹Ÿè¦ä¸‹æ„è¯†çš„ä¸è¦å»æ·±å…¥ç»†èŠ‚ï¼Œé‡è¦çš„æ˜¯å­¦ä¹ è®¾è®¡æ€è·¯ï¼Œè€Œä¸æ˜¯å…·ä½“ä¸€ä¸ªæ–¹æ³•å®ç°é€»è¾‘ã€‚é™¤éè‡ªå·±è¦åŸºäºæºç åšäºŒæ¬¡å¼€å‘ï¼Œè€Œä¸”äºŒæ¬¡å¼€å‘ä¹Ÿæ˜¯åŸºäºåœ¨äº†è§£æ‰é¥ä¸ªæ¶æ„çš„æƒ…å†µä¸‹æ‰èƒ½æ·±å…¥ç»†èŠ‚ã€‚</li>\n</ul>\n<h2>ç»„ä»¶è®¾è®¡-è½å®å•ä¸€èŒè´£ã€é¢å‘æ¥å£æ€æƒ³</h2>\n<p>å½“æˆ‘ä»¬æ¥åˆ°ä¸€ä¸ªåŠŸèƒ½éœ€æ±‚çš„æ—¶å€™ï¼Œæœ€é‡è¦çš„å°±æ˜¯æŠ½è±¡è®¾è®¡ï¼Œå°†åŠŸèƒ½æ‹†è§£ä¸»è¦æ ¸å¿ƒç»„ä»¶ï¼Œç„¶åæ‰¾åˆ°éœ€æ±‚çš„å˜åŒ–ä¸ä¸å˜ç‚¹ï¼Œå°†ç›¸ä¼¼åŠŸèƒ½å†…èšï¼ŒåŠŸèƒ½ä¹‹é—´è‹¥è€¦åˆï¼ŒåŒæ—¶å¯¹å¤–æ”¯æŒå¯æ‹“å±•ï¼Œå¯¹å†…å…³é—­ä¿®æ”¹ã€‚åŠªåŠ›åšåˆ°ä¸€ä¸ªéœ€æ±‚ä¸‹æ¥çš„æ—¶å€™æˆ‘ä»¬éœ€è¦åˆç†çš„æŠ½è±¡èƒ½åŠ›æŠ½è±¡å‡ºä¸åŒç»„ä»¶ï¼Œè€Œä¸æ˜¯ä¸€é”…ç«¯å°†æ‰€æœ‰åŠŸèƒ½ç³…åˆåœ¨ä¸€ä¸ªç±»ç”šè‡³ä¸€ä¸ªæ–¹æ³•ä¹‹ä¸­ï¼Œè¿™æ ·çš„ä»£ç ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ï¼Œæ— æ³•æ‹“å±•ï¼Œéš¾ä»¥ç»´æŠ¤å’Œé˜…è¯»ã€‚</p>\n<p>å¸¦ç€é—®é¢˜æˆ‘ä»¬æ¥åˆ†æ Tomcat å¦‚ä½•è®¾è®¡ç»„ä»¶å®Œæˆè¿æ¥ä¸å®¹å™¨ç®¡ç†ã€‚</p>\n<p>çœ‹çœ‹ Tomcat å¦‚ä½•å®ç°å°† Tomcat å¯åŠ¨ï¼Œå¹¶ä¸”åˆæ˜¯å¦‚ä½•æ¥å—è¯·æ±‚ï¼Œå°†è¯·æ±‚è½¬å‘åˆ°æˆ‘ä»¬çš„ Servlet ä¸­ã€‚</p>\n<h3>Catalina</h3>\n<p>ä¸»è¦ä»»åŠ¡å°±æ˜¯åˆ›å»º Serverï¼Œå¹¶ä¸æ˜¯ç®€å•åˆ›å»ºï¼Œè€Œæ˜¯è§£æ server.xml æ–‡ä»¶æŠŠæ–‡ä»¶é…ç½®çš„å„ä¸ªç»„ä»¶æ„ä¹‰åˆ›å»ºå‡ºæ¥ï¼Œæ¥ç€è°ƒç”¨ Server çš„ init() å’Œ start() æ–¹æ³•ï¼Œå¯åŠ¨ä¹‹æ—…ä»è¿™é‡Œå¼€å§‹â€¦ï¼ŒåŒæ—¶è¿˜è¦å…¼é¡¾å¼‚å¸¸ï¼Œæ¯”å¦‚å…³é—­ Tomcat è¿˜éœ€è¦åšåˆ°ä¼˜é›…å…³é—­å¯åŠ¨è¿‡ç¨‹åˆ›å»ºçš„èµ„æºéœ€è¦é‡Šæ”¾ï¼ŒTomcat åˆ™æ˜¯åœ¨ JVM æ³¨å†Œä¸€ä¸ªã€Œå…³é—­é’©å­ã€ï¼Œæºç æˆ‘éƒ½åŠ äº†æ³¨é‡Šï¼Œçœç•¥äº†éƒ¨åˆ†æ— å…³ä»£ç ã€‚åŒæ—¶é€šè¿‡ <code>await()</code> ç›‘å¬åœæ­¢æŒ‡ä»¤å…³é—­ Tomcatã€‚</p>\n<pre><code class=\"java\">    /**\n     * Start a new server instance.\n     */\n    public void start() {\n                // è‹¥ server ä¸ºç©ºï¼Œåˆ™è§£æ server.xml åˆ›å»º\n        if (getServer() == null) {\n            load();\n        }\n                // åˆ›å»ºå¤±è´¥åˆ™æŠ¥é”™å¹¶é€€å‡ºå¯åŠ¨\n        if (getServer() == null) {\n            log.fatal(\"Cannot start server. Server instance is not configured.\");\n            return;\n        }\n\n        // å¼€å§‹å¯åŠ¨ server\n        try {\n            getServer().start();\n        } catch (LifecycleException e) {\n            log.fatal(sm.getString(\"catalina.serverStartFail\"), e);\n            try {\n                // å¼‚å¸¸åˆ™æ‰§è¡Œ destroy é”€æ¯èµ„æº\n                getServer().destroy();\n            } catch (LifecycleException e1) {\n                log.debug(\"destroy() failed for failed Server \", e1);\n            }\n            return;\n        }\n\n        // åˆ›å»ºå¹¶æ³¨å†Œ JVM å…³é—­é’©å­\n        if (useShutdownHook) {\n            if (shutdownHook == null) {\n                shutdownHook = new CatalinaShutdownHook();\n            }\n            Runtime.getRuntime().addShutdownHook(shutdownHook);\n        }\n                // é€šè¿‡ await æ–¹æ³•ç›‘å¬åœæ­¢è¯·æ±‚\n        if (await) {\n            await();\n            stop();\n        }\n    }</code></pre>\n<p>é€šè¿‡ã€Œå…³é—­é’©å­ã€ï¼Œå°±æ˜¯å½“ JVM å…³é—­çš„æ—¶å€™åšä¸€äº›æ¸…ç†å·¥ä½œï¼Œæ¯”å¦‚è¯´é‡Šæ”¾çº¿ç¨‹æ± ï¼Œæ¸…ç†ä¸€äº›é›¶æ—¶æ–‡ä»¶ï¼Œåˆ·æ–°å†…å­˜æ•°æ®åˆ°ç£ç›˜ä¸­â€¦...</p>\n<p>ã€Œå…³é—­é’©å­ã€æœ¬è´¨å°±æ˜¯ä¸€ä¸ªçº¿ç¨‹ï¼ŒJVM åœ¨åœæ­¢ä¹‹å‰ä¼šå°è¯•æ‰§è¡Œè¿™ä¸ªçº¿ç¨‹ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹ CatalinaShutdownHook è¿™ä¸ªé’©å­åˆ°åº•åšäº†ä»€ä¹ˆã€‚</p>\n<pre><code class=\"java\">    /**\n     * Shutdown hook which will perform a clean shutdown of Catalina if needed.\n     */\n    protected class CatalinaShutdownHook extends Thread {\n\n        @Override\n        public void run() {\n            try {\n                if (getServer() != null) {\n                    Catalina.this.stop();\n                }\n            } catch (Throwable ex) {\n               ...\n        }\n    }\n\n    /**\n     * å…³é—­å·²ç»åˆ›å»ºçš„ Server å®ä¾‹\n     */\n    public void stop() {\n\n        try {\n            // Remove the ShutdownHook first so that server.stop()\n            // doesn't get invoked twice\n            if (useShutdownHook) {\n                Runtime.getRuntime().removeShutdownHook(shutdownHook);\n            }\n        } catch (Throwable t) {\n            ......\n        }\n\n        // å…³é—­ Server\n        try {\n            Server s = getServer();\n            LifecycleState state = s.getState();\n           // åˆ¤æ–­æ˜¯å¦å·²ç»å…³é—­ï¼Œè‹¥æ˜¯åœ¨å…³é—­ä¸­ï¼Œåˆ™ä¸æ‰§è¡Œä»»ä½•æ“ä½œ\n            if (LifecycleState.STOPPING_PREP.compareTo(state) &lt;= 0\n                    &amp;&amp; LifecycleState.DESTROYED.compareTo(state) &gt;= 0) {\n                // Nothing to do. stop() was already called\n            } else {\n                s.stop();\n                s.destroy();\n            }\n        } catch (LifecycleException e) {\n            log.error(\"Catalina.stop\", e);\n        }\n\n    }\n</code></pre>\n<p>å®é™…ä¸Šå°±æ˜¯æ‰§è¡Œäº† Server çš„ stop æ–¹æ³•ï¼ŒServer çš„ stop æ–¹æ³•ä¼šé‡Šæ”¾å’Œæ¸…ç†æ‰€æœ‰çš„èµ„æºã€‚</p>\n<h3>Server ç»„ä»¶</h3>\n<p>æ¥ä½“ä¼šä¸‹é¢å‘æ¥å£è®¾è®¡ç¾ï¼Œçœ‹ Tomcat å¦‚ä½•è®¾è®¡ç»„ä»¶ä¸æ¥å£ï¼ŒæŠ½è±¡ Server ç»„ä»¶ï¼ŒServer ç»„ä»¶éœ€è¦ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œæ‰€ä»¥ç»§æ‰¿ Lifecycle å®ç°ä¸€é”®å¯åœã€‚</p>\n<p>å®ƒçš„å…·ä½“å®ç°ç±»æ˜¯ StandardServerï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬çŸ¥é“ Lifecycle ä¸»è¦çš„æ–¹æ³•æ˜¯ç»„ä»¶çš„ åˆå§‹åŒ–ã€å¯åŠ¨ã€åœæ­¢ã€é”€æ¯ï¼Œå’Œ ç›‘å¬å™¨çš„ç®¡ç†ç»´æŠ¤ï¼Œå…¶å®å°±æ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„è®¾è®¡ï¼Œå½“è§¦å‘ä¸åŒäº‹ä»¶çš„æ—¶å€™å‘å¸ƒäº‹ä»¶ç»™ç›‘å¬å™¨æ‰§è¡Œä¸åŒä¸šåŠ¡å¤„ç†ï¼Œè¿™é‡Œå°±æ˜¯å¦‚ä½•è§£è€¦çš„è®¾è®¡å“²å­¦ä½“ç°ã€‚</p>\n<p>è€Œ Server è‡ªç”Ÿåˆ™æ˜¯è´Ÿè´£ç®¡ç† Service ç»„ä»¶ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023657737\" alt=\"\" title=\"\" /></p>\n<p>æ¥ç€ï¼Œæˆ‘ä»¬å†çœ‹ Server ç»„ä»¶çš„å…·ä½“å®ç°ç±»æ˜¯ StandardServer æœ‰å“ªäº›åŠŸèƒ½ï¼Œåˆè·Ÿå“ªäº›ç±»å…³è”ï¼Ÿ</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023657736\" alt=\"StandardServer\" title=\"StandardServer\" /></p>\n<p>åœ¨é˜…è¯»æºç çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸€å®šè¦å¤šå…³æ³¨æ¥å£ä¸æŠ½è±¡ç±»ï¼Œæ¥å£æ˜¯ç»„ä»¶å…¨å±€è®¾è®¡çš„æŠ½è±¡ï¼›è€ŒæŠ½è±¡ç±»åŸºæœ¬ä¸Šæ˜¯æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„è¿ç”¨ï¼Œä¸»è¦ç›®çš„å°±æ˜¯æŠ½è±¡æ•´ä¸ªç®—æ³•æµç¨‹ï¼Œå°†å˜åŒ–ç‚¹äº¤ç»™å­ç±»ï¼Œå°†ä¸å˜ç‚¹å®ç°ä»£ç å¤ç”¨ã€‚</p>\n<p>StandardServer ç»§æ‰¿äº† LifeCycleBaseï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸè¢«ç»Ÿä¸€ç®¡ç†ï¼Œå¹¶ä¸”å®ƒçš„å­ç»„ä»¶æ˜¯ Serviceï¼Œå› æ­¤å®ƒè¿˜éœ€è¦ç®¡ç† Service çš„ç”Ÿå‘½å‘¨æœŸï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨å¯åŠ¨æ—¶è°ƒç”¨ Service ç»„ä»¶çš„å¯åŠ¨æ–¹æ³•ï¼Œåœ¨åœæ­¢æ—¶è°ƒç”¨å®ƒä»¬çš„åœæ­¢æ–¹æ³•ã€‚Server åœ¨å†…éƒ¨ç»´æŠ¤äº†è‹¥å¹² Service ç»„ä»¶ï¼Œå®ƒæ˜¯ä»¥æ•°ç»„æ¥ä¿å­˜çš„ï¼Œé‚£ Server æ˜¯å¦‚ä½•æ·»åŠ ä¸€ä¸ª Service åˆ°æ•°ç»„ä¸­çš„å‘¢ï¼Ÿ</p>\n<pre><code class=\"java\">    /**\n     * æ·»åŠ  Service åˆ°å®šä¹‰çš„æ•°ç»„ä¸­\n     *\n     * @param service The Service to be added\n     */\n    @Override\n    public void addService(Service service) {\n\n        service.setServer(this);\n\n        synchronized (servicesLock) {\n           // åˆ›å»ºä¸€ä¸ª services.length + 1 é•¿åº¦çš„ results æ•°ç»„\n            Service results[] = new Service[services.length + 1];\n           // å°†è€çš„æ•°æ®å¤åˆ¶åˆ° results æ•°ç»„\n            System.arraycopy(services, 0, results, 0, services.length);\n            results[services.length] = service;\n            services = results;\n                        // å¯åŠ¨ Service ç»„ä»¶\n            if (getState().isAvailable()) {\n                try {\n                    service.start();\n                } catch (LifecycleException e) {\n                    // Ignore\n                }\n            }\n\n            // è§‚å¯Ÿè€…æ¨¡å¼è¿ç”¨ï¼Œè§¦å‘ç›‘å¬äº‹ä»¶\n            support.firePropertyChange(\"service\", null, service);\n        }\n\n    }</code></pre>\n<p>ä»ä¸Šé¢çš„ä»£ç å¯ä»¥çŸ¥é“ï¼Œå¹¶ä¸æ˜¯ä¸€å¼€å§‹å°±åˆ†é…ä¸€ä¸ªå¾ˆé•¿çš„æ•°ç»„ï¼Œè€Œæ˜¯åœ¨æ–°å¢è¿‡ç¨‹ä¸­åŠ¨æ€æ‹“å±•é•¿åº¦ï¼Œè¿™é‡Œå°±æ˜¯ä¸ºäº†èŠ‚çœç©ºé—´ï¼Œå¯¹äºæˆ‘ä»¬å¹³æ—¶å¼€å‘æ˜¯ä¸æ˜¯ä¹Ÿè¦ä¸»è¦ç©ºé—´å¤æ‚åº¦å¸¦æ¥çš„å†…å­˜æŸè€—ï¼Œè¿½æ±‚çš„å°±æ˜¯æè‡´çš„ç¾ã€‚</p>\n<p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªé‡è¦åŠŸèƒ½ï¼Œä¸Šé¢ Caralina çš„å¯åŠ¨æ–¹æ³•çš„æœ€åä¸€è¡Œä»£ç å°±æ˜¯è°ƒç”¨äº† Server çš„ await æ–¹æ³•ã€‚</p>\n<p>è¿™ä¸ªæ–¹æ³•ä¸»è¦å°±æ˜¯ç›‘å¬åœæ­¢ç«¯å£ï¼Œåœ¨ <strong>await</strong> æ–¹æ³•é‡Œä¼šåˆ›å»ºä¸€ä¸ª Socket ç›‘å¬ 8005 ç«¯å£ï¼Œå¹¶åœ¨ä¸€ä¸ªæ­»å¾ªç¯é‡Œæ¥æ”¶ Socket ä¸Šçš„è¿æ¥è¯·æ±‚ï¼Œå¦‚æœæœ‰æ–°çš„è¿æ¥åˆ°æ¥å°±å»ºç«‹è¿æ¥ï¼Œç„¶åä» Socket ä¸­è¯»å–æ•°æ®ï¼›å¦‚æœè¯»åˆ°çš„æ•°æ®æ˜¯åœæ­¢å‘½ä»¤â€œSHUTDOWNâ€ï¼Œå°±é€€å‡ºå¾ªç¯ï¼Œè¿›å…¥ stop æµç¨‹ã€‚</p>\n<h3>Service</h3>\n<p>åŒæ ·æ˜¯é¢å‘æ¥å£è®¾è®¡ï¼ŒService ç»„ä»¶çš„å…·ä½“å®ç°ç±»æ˜¯ StandardServiceï¼ŒService ç»„ä»¶ä¾ç„¶æ˜¯ç»§æ‰¿ Lifecycle ç®¡ç†ç”Ÿå‘½å‘¨æœŸï¼Œè¿™é‡Œä¸å†ç´¯èµ˜å±•ç¤ºå›¾ç‰‡å…³ç³»å›¾ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ Service æ¥å£ä¸»è¦å®šä¹‰çš„æ–¹æ³•ä»¥åŠæˆå‘˜å˜é‡ã€‚é€šè¿‡æ¥å£æˆ‘ä»¬æ‰èƒ½çŸ¥é“æ ¸å¿ƒåŠŸèƒ½ï¼Œåœ¨é˜…è¯»æºç çš„æ—¶å€™ä¸€å®šè¦å¤šå…³æ³¨æ¯ä¸ªæ¥å£ä¹‹é—´çš„å…³ç³»ï¼Œä¸è¦æ€¥ç€è¿›å…¥å®ç°ç±»ã€‚</p>\n<pre><code class=\"java\">public interface Service extends Lifecycle {\n\n  // ----------ä¸»è¦æˆå‘˜å˜é‡\n\n    //Service ç»„ä»¶åŒ…å«çš„é¡¶å±‚å®¹å™¨ Engine\n    public Engine getContainer();\n\n    // è®¾ç½® Service çš„ Engine å®¹å™¨\n    public void setContainer(Engine engine);\n\n    // è¯¥ Service æ‰€å±çš„ Server ç»„ä»¶\n    public Server getServer();\n\n    // --------------------------------------------------------- Public Methods\n\n   // æ·»åŠ  Service å…³è”çš„è¿æ¥å™¨\n    public void addConnector(Connector connector);\n\n    public Connector[] findConnectors();\n\n   // è‡ªå®šä¹‰çº¿ç¨‹æ± \n    public void addExecutor(Executor ex);\n\n   // ä¸»è¦ä½œç”¨å°±æ˜¯æ ¹æ® url å®šä½åˆ° Serviceï¼ŒMapper çš„ä¸»è¦ä½œç”¨å°±æ˜¯ç”¨äºå®šä½ä¸€ä¸ªè¯·æ±‚æ‰€åœ¨çš„ç»„ä»¶å¤„ç†\n    Mapper getMapper();\n}\n</code></pre>\n<p>æ¥ç€å†æ¥ç»†çœ‹ Service çš„å®ç°ç±»ï¼š</p>\n<pre><code class=\"java\">public class StandardService extends LifecycleBase implements Service {\n    // åå­—\n    private String name = null;\n\n    //Server å®ä¾‹\n    private Server server = null;\n\n    // è¿æ¥å™¨æ•°ç»„\n    protected Connector connectors[] = new Connector[0];\n    private final Object connectorsLock = new Object();\n\n    // å¯¹åº”çš„ Engine å®¹å™¨\n    private Engine engine = null;\n\n    // æ˜ å°„å™¨åŠå…¶ç›‘å¬å™¨ï¼Œåˆæ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„è¿ç”¨\n    protected final Mapper mapper = new Mapper();\n    protected final MapperListener mapperListener = new MapperListener(this);\n}</code></pre>\n<p>StandardService ç»§æ‰¿äº† LifecycleBase æŠ½è±¡ç±»ï¼ŒæŠ½è±¡ç±»å®šä¹‰äº† ä¸‰ä¸ª final æ¨¡æ¿æ–¹æ³•å®šä¹‰ç”Ÿå‘½å‘¨æœŸï¼Œæ¯ä¸ªæ–¹æ³•å°†å˜åŒ–ç‚¹å®šä¹‰æŠ½è±¡æ–¹æ³•è®©ä¸åŒç»„ä»¶æ—¶é—´è‡ªå·±çš„æµç¨‹ã€‚è¿™é‡Œä¹Ÿæ˜¯æˆ‘ä»¬å­¦ä¹ çš„åœ°æ–¹ï¼Œåˆ©ç”¨æ¨¡æ¿æ–¹æ³•æŠ½è±¡å˜ä¸ä¸å˜ã€‚</p>\n<p>æ­¤å¤– StandardService ä¸­è¿˜æœ‰ä¸€äº›æˆ‘ä»¬ç†Ÿæ‚‰çš„ç»„ä»¶ï¼Œæ¯”å¦‚ Serverã€Connectorã€Engine å’Œ Mapperã€‚</p>\n<p>é‚£ä¸ºä»€ä¹ˆè¿˜æœ‰ä¸€ä¸ª MapperListenerï¼Ÿè¿™æ˜¯å› ä¸º Tomcat æ”¯æŒçƒ­éƒ¨ç½²ï¼Œå½“ Web åº”ç”¨çš„éƒ¨ç½²å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒMapper ä¸­çš„æ˜ å°„ä¿¡æ¯ä¹Ÿè¦è·Ÿç€å˜åŒ–ï¼ŒMapperListener å°±æ˜¯ä¸€ä¸ªç›‘å¬å™¨ï¼Œå®ƒç›‘å¬å®¹å™¨çš„å˜åŒ–ï¼Œå¹¶æŠŠä¿¡æ¯æ›´æ–°åˆ° Mapper ä¸­ï¼Œè¿™æ˜¯å…¸å‹çš„è§‚å¯Ÿè€…æ¨¡å¼ã€‚ä¸‹æ¸¸æœåŠ¡æ ¹æ®å¤šä¸Šæ¸¸æœåŠ¡çš„åŠ¨ä½œåšå‡ºä¸åŒå¤„ç†ï¼Œè¿™å°±æ˜¯<a href=\"https://mp.weixin.qq.com/s/7FL-m75fOctUVAMI_YgIww\" rel=\"nofollow noreferrer\">è§‚å¯Ÿè€…æ¨¡å¼</a>çš„è¿ç”¨åœºæ™¯ï¼Œå®ç°ä¸€ä¸ªäº‹ä»¶å¤šä¸ªç›‘å¬å™¨è§¦å‘ï¼Œäº‹ä»¶å‘å¸ƒè€…ä¸ç”¨è°ƒç”¨æ‰€æœ‰ä¸‹æ¸¸ï¼Œè€Œæ˜¯é€šè¿‡è§‚å¯Ÿè€…æ¨¡å¼è§¦å‘è¾¾åˆ°è§£è€¦ã€‚</p>\n<p>Service ç®¡ç†äº† è¿æ¥å™¨ä»¥åŠ Engine é¡¶å±‚å®¹å™¨ï¼Œæ‰€ä»¥ç»§ç»­è¿›å…¥å®ƒçš„ startInternal æ–¹æ³•ï¼Œå…¶å®å°±æ˜¯ LifecycleBase æ¨¡æ¿å®šä¹‰çš„ æŠ½è±¡æ–¹æ³•ã€‚çœ‹çœ‹ä»–æ˜¯æ€ä¹ˆå¯åŠ¨æ¯ä¸ªç»„ä»¶é¡ºåºã€‚</p>\n<pre><code class=\"java\">protected void startInternal() throws LifecycleException {\n\n    //1. è§¦å‘å¯åŠ¨ç›‘å¬å™¨\n    setState(LifecycleState.STARTING);\n\n    //2. å…ˆå¯åŠ¨ Engineï¼ŒEngine ä¼šå¯åŠ¨å®ƒå­å®¹å™¨ï¼Œå› ä¸ºè¿ç”¨äº†ç»„åˆæ¨¡å¼ï¼Œæ‰€ä»¥æ¯ä¸€å±‚å®¹å™¨åœ¨ä¼šå…ˆå¯åŠ¨è‡ªå·±çš„å­å®¹å™¨ã€‚\n    if (engine != null) {\n        synchronized (engine) {\n            engine.start();\n        }\n    }\n\n    //3. å†å¯åŠ¨ Mapper ç›‘å¬å™¨\n    mapperListener.start();\n\n    //4. æœ€åå¯åŠ¨è¿æ¥å™¨ï¼Œè¿æ¥å™¨ä¼šå¯åŠ¨å®ƒå­ç»„ä»¶ï¼Œæ¯”å¦‚ Endpoint\n    synchronized (connectorsLock) {\n        for (Connector connector: connectors) {\n            if (connector.getState() != LifecycleState.FAILED) {\n                connector.start();\n            }\n        }\n    }\n}</code></pre>\n<p>Service å…ˆå¯åŠ¨äº† Engine ç»„ä»¶ï¼Œå†å¯åŠ¨ Mapper ç›‘å¬å™¨ï¼Œæœ€åæ‰æ˜¯å¯åŠ¨è¿æ¥å™¨ã€‚è¿™å¾ˆå¥½ç†è§£ï¼Œå› ä¸ºå†…å±‚ç»„ä»¶å¯åŠ¨å¥½äº†æ‰èƒ½å¯¹å¤–æä¾›æœåŠ¡ï¼Œæ‰èƒ½å¯åŠ¨å¤–å±‚çš„è¿æ¥å™¨ç»„ä»¶ã€‚è€Œ Mapper ä¹Ÿä¾èµ–å®¹å™¨ç»„ä»¶ï¼Œå®¹å™¨ç»„ä»¶å¯åŠ¨å¥½äº†æ‰èƒ½ç›‘å¬å®ƒä»¬çš„å˜åŒ–ï¼Œå› æ­¤ Mapper å’Œ MapperListener åœ¨å®¹å™¨ç»„ä»¶ä¹‹åå¯åŠ¨ã€‚ç»„ä»¶åœæ­¢çš„é¡ºåºè·Ÿå¯åŠ¨é¡ºåºæ­£å¥½ç›¸åçš„ï¼Œä¹Ÿæ˜¯åŸºäºå®ƒä»¬çš„ä¾èµ–å…³ç³»ã€‚</p>\n<h3>Engine</h3>\n<p>ä½œä¸º Container çš„é¡¶å±‚ç»„ä»¶ï¼Œæ‰€ä»¥ Engine æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œç»§æ‰¿äº† ContainerBase ï¼Œçœ‹åˆ°æŠ½è±¡ç±»å†æ¬¡è¿ç”¨äº†æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼ã€‚ContainerBase ä½¿ç”¨ä¸€ä¸ª <code>HashMap&lt;String, Container&gt; children = new HashMap&lt;&gt;();</code> æˆå‘˜å˜é‡ä¿å­˜æ¯ä¸ªç»„ä»¶çš„å­å®¹å™¨ã€‚åŒæ—¶ä½¿ç”¨ <code>protected final Pipeline pipeline = new StandardPipeline(this);</code> Pipeline ç»„æˆä¸€ä¸ªç®¡é“ç”¨äºå¤„ç†è¿æ¥å™¨ä¼ è¿‡æ¥çš„è¯·æ±‚ï¼Œè´£ä»»é“¾æ¨¡å¼æ„å»ºç®¡é“ã€‚</p>\n<pre><code class=\"java\"> public class StandardEngine extends ContainerBase implements Engine {\n }</code></pre>\n<p>Engine çš„å­å®¹å™¨æ˜¯ Hostï¼Œæ‰€ä»¥ children ä¿å­˜çš„å°±æ˜¯ Hostã€‚</p>\n<p>æˆ‘ä»¬æ¥çœ‹çœ‹ ContainerBase åšäº†ä»€ä¹ˆ...</p>\n<ul>\n <li>initInternal å®šä¹‰äº†å®¹å™¨åˆå§‹åŒ–ï¼ŒåŒæ—¶åˆ›å»ºäº†ä¸“é—¨ç”¨äºå¯åŠ¨åœæ­¢å®¹å™¨çš„çº¿ç¨‹æ± ã€‚</li>\n <li>startInternalï¼šå®¹å™¨å¯åŠ¨é»˜è®¤å®ç°ï¼Œé€šè¿‡ç»„åˆæ¨¡å¼æ„å»ºå®¹å™¨çˆ¶å­å…³ç³»ï¼Œé¦–å…ˆè·å–è‡ªå·±çš„å­å®¹å™¨ï¼Œä½¿ç”¨ startStopExecutor å¯åŠ¨å­å®¹å™¨ã€‚</li>\n</ul>\n<pre><code class=\"java\">public abstract class ContainerBase extends LifecycleMBeanBase\n        implements Container {\n\n   // æä¾›äº†é»˜è®¤åˆå§‹åŒ–é€»è¾‘\n    @Override\n    protected void initInternal() throws LifecycleException {\n        BlockingQueue&lt;Runnable&gt; startStopQueue = new LinkedBlockingQueue&lt;&gt;();\n       // åˆ›å»ºçº¿ç¨‹æ± ç”¨äºå¯åŠ¨æˆ–è€…åœæ­¢å®¹å™¨\n        startStopExecutor = new ThreadPoolExecutor(\n                getStartStopThreadsInternal(),\n                getStartStopThreadsInternal(), 10, TimeUnit.SECONDS,\n                startStopQueue,\n                new StartStopThreadFactory(getName() + \"-startStop-\"));\n        startStopExecutor.allowCoreThreadTimeOut(true);\n        super.initInternal();\n    }\n\n  // å®¹å™¨å¯åŠ¨\n    @Override\n    protected synchronized void startInternal() throws LifecycleException {\n\n        // è·å–å­å®¹å™¨å¹¶æäº¤åˆ°çº¿ç¨‹æ± å¯åŠ¨\n        Container children[] = findChildren();\n        List&lt;Future&lt;Void&gt;&gt; results = new ArrayList&lt;&gt;();\n        for (Container child : children) {\n            results.add(startStopExecutor.submit(new StartChild(child)));\n        }\n        MultiThrowable multiThrowable = null;\n        // è·å–å¯åŠ¨ç»“æœ\n        for (Future&lt;Void&gt; result : results) {\n            try {\n                result.get();\n            } catch (Throwable e) {\n                log.error(sm.getString(\"containerBase.threadedStartFailed\"), e);\n                if (multiThrowable == null) {\n                    multiThrowable = new MultiThrowable();\n                }\n                multiThrowable.add(e);\n            }\n\n        }\n       ......\n\n        // å¯åŠ¨ pipeline ç®¡é“ï¼Œç”¨äºå¤„ç†è¿æ¥å™¨ä¼ é€’è¿‡æ¥çš„è¯·æ±‚\n        if (pipeline instanceof Lifecycle) {\n            ((Lifecycle) pipeline).start();\n        }\n                 // å‘å¸ƒå¯åŠ¨äº‹ä»¶\n        setState(LifecycleState.STARTING);\n        // Start our thread\n        threadStart();\n    }\n\n\n}</code></pre>\n<p>ç»§æ‰¿äº† LifecycleMBeanBase ä¹Ÿå°±æ˜¯è¿˜å®ç°äº†ç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†ï¼Œæä¾›äº†å­å®¹å™¨é»˜è®¤çš„å¯åŠ¨æ–¹å¼ï¼ŒåŒæ—¶æä¾›äº†å¯¹å­å®¹å™¨çš„ CRUD åŠŸèƒ½ã€‚</p>\n<p>Engine åœ¨å¯åŠ¨ Host å®¹å™¨å°±æ˜¯ ä½¿ç”¨äº† ContainerBase çš„ startInternal æ–¹æ³•ã€‚Engine è‡ªå·±è¿˜åšäº†ä»€ä¹ˆå‘¢ï¼Ÿ</p>\n<p>æˆ‘ä»¬çœ‹ä¸‹ æ„é€ æ–¹æ³•ï¼Œpipeline è®¾ç½®äº† setBasicï¼Œåˆ›å»ºäº† StandardEngineValveã€‚</p>\n<pre><code class=\"java\">/**\n     * Create a new StandardEngine component with the default basic Valve.\n     */\n    public StandardEngine() {\n\n        super();\n        pipeline.setBasic(new StandardEngineValve());\n        .....\n\n    }</code></pre>\n<p>å®¹å™¨ä¸»è¦çš„åŠŸèƒ½å°±æ˜¯å¤„ç†è¯·æ±‚ï¼ŒæŠŠè¯·æ±‚è½¬å‘ç»™æŸä¸€ä¸ª Host å­å®¹å™¨æ¥å¤„ç†ï¼Œå…·ä½“æ˜¯é€šè¿‡ Valve æ¥å®ç°çš„ã€‚æ¯ä¸ªå®¹å™¨ç»„ä»¶éƒ½æœ‰ä¸€ä¸ª Pipeline ç”¨äºç»„æˆä¸€ä¸ªè´£ä»»é“¾ä¼ é€’è¯·æ±‚ã€‚è€Œ Pipeline ä¸­æœ‰ä¸€ä¸ªåŸºç¡€é˜€ï¼ˆBasic Valveï¼‰ï¼Œè€Œ Engine å®¹å™¨çš„åŸºç¡€é˜€å®šä¹‰å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"java\">final class StandardEngineValve extends ValveBase {\n    @Override\n    public final void invoke(Request request, Response response)\n        throws IOException, ServletException {\n\n        // é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„ Host å¤„ç†è¯·æ±‚ï¼Œé€šè¿‡ Mapper ç»„ä»¶è·å–åˆ°åˆé€‚çš„ Host\n        Host host = request.getHost();\n        if (host == null) {\n            response.sendError\n                (HttpServletResponse.SC_BAD_REQUEST,\n                 sm.getString(\"standardEngine.noHost\",\n                              request.getServerName()));\n            return;\n        }\n        if (request.isAsyncSupported()) {\n            request.setAsyncSupported(host.getPipeline().isAsyncSupported());\n        }\n\n        // è·å– Host å®¹å™¨çš„ Pipeline first Valve ,å°†è¯·æ±‚è½¬å‘åˆ° Host\n        host.getPipeline().getFirst().invoke(request, response);\n}</code></pre>\n<p>è¿™ä¸ªåŸºç¡€é˜€å®ç°éå¸¸ç®€å•ï¼Œå°±æ˜¯æŠŠè¯·æ±‚è½¬å‘åˆ° Host å®¹å™¨ã€‚å¤„ç†è¯·æ±‚çš„ Host å®¹å™¨å¯¹è±¡æ˜¯ä»è¯·æ±‚ä¸­æ‹¿åˆ°çš„ï¼Œè¯·æ±‚å¯¹è±¡ä¸­æ€ä¹ˆä¼šæœ‰ Host å®¹å™¨å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºè¯·æ±‚åˆ°è¾¾ Engine å®¹å™¨ä¸­ä¹‹å‰ï¼ŒMapper ç»„ä»¶å·²ç»å¯¹è¯·æ±‚è¿›è¡Œäº†è·¯ç”±å¤„ç†ï¼ŒMapper ç»„ä»¶é€šè¿‡è¯·æ±‚çš„ URL å®šä½äº†ç›¸åº”çš„å®¹å™¨ï¼Œå¹¶ä¸”æŠŠå®¹å™¨å¯¹è±¡ä¿å­˜åˆ°äº†è¯·æ±‚å¯¹è±¡ä¸­ã€‚</p>\n<h3>ç»„ä»¶è®¾è®¡æ€»ç»“</h3>\n<p>å¤§å®¶æœ‰æ²¡æœ‰å‘ç°ï¼ŒTomcat çš„è®¾è®¡å‡ ä¹éƒ½æ˜¯é¢å‘æ¥å£è®¾è®¡ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡æ¥å£éš”ç¦»åŠŸèƒ½è®¾è®¡å…¶å®å°±æ˜¯å•ä¸€èŒè´£çš„ä½“ç°ï¼Œæ¯ä¸ªæ¥å£æŠ½è±¡å¯¹è±¡ä¸åŒçš„ç»„ä»¶ï¼Œé€šè¿‡æŠ½è±¡ç±»å®šä¹‰ç»„ä»¶çš„å…±åŒæ‰§è¡Œæµç¨‹ã€‚å•ä¸€èŒè´£å››ä¸ªå­—çš„å«ä¹‰å…¶å®å°±æ˜¯åœ¨è¿™é‡Œä½“ç°å‡ºæ¥äº†ã€‚åœ¨åˆ†æè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†è§‚å¯Ÿè€…æ¨¡å¼ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€ç»„åˆæ¨¡å¼ã€è´£ä»»é“¾æ¨¡å¼ä»¥åŠå¦‚ä½•æŠ½è±¡ç»„ä»¶é¢å‘æ¥å£è®¾è®¡çš„è®¾è®¡å“²å­¦ã€‚</p>\n<h2>è¿æ¥å™¨ä¹‹ I/O æ¨¡å‹ä¸çº¿ç¨‹æ± è®¾è®¡</h2>\n<p>è¿æ¥å™¨ä¸»è¦åŠŸèƒ½å°±æ˜¯æ¥å— TCP/IP è¿æ¥ï¼Œé™åˆ¶è¿æ¥æ•°ç„¶åè¯»å–æ•°æ®ï¼Œæœ€åå°†è¯·æ±‚è½¬å‘åˆ° <code>Container</code> å®¹å™¨ã€‚æ‰€ä»¥è¿™é‡Œå¿…ç„¶æ¶‰åŠåˆ° I/O ç¼–ç¨‹ï¼Œä»Šå¤©å¸¦å¤§å®¶ä¸€èµ·åˆ†æ Tomcat å¦‚ä½•è¿ç”¨ I/O æ¨¡å‹å®ç°é«˜å¹¶å‘çš„ï¼Œä¸€èµ·è¿›å…¥ I/O çš„ä¸–ç•Œã€‚</p>\n<p>I/O æ¨¡å‹ä¸»è¦æœ‰ 5 ç§ï¼š<strong>åŒæ­¥é˜»å¡ã€åŒæ­¥éé˜»å¡ã€I/O å¤šè·¯å¤ç”¨ã€ä¿¡å·é©±åŠ¨ã€å¼‚æ­¥ I/O</strong>ã€‚æ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰ä½†æ˜¯åˆå‚»å‚»åˆ†ä¸æ¸…ä»–ä»¬æœ‰ä½•åŒºåˆ«ï¼Ÿ</p>\n<p>æ‰€è°“çš„<strong>I/O å°±æ˜¯è®¡ç®—æœºå†…å­˜ä¸å¤–éƒ¨è®¾å¤‡ä¹‹é—´æ‹·è´æ•°æ®çš„è¿‡ç¨‹</strong>ã€‚</p>\n<p>CPU æ˜¯å…ˆæŠŠå¤–éƒ¨è®¾å¤‡çš„æ•°æ®è¯»åˆ°å†…å­˜é‡Œï¼Œç„¶åå†è¿›è¡Œå¤„ç†ã€‚è¯·è€ƒè™‘ä¸€ä¸‹è¿™ä¸ªåœºæ™¯ï¼Œå½“ç¨‹åºé€šè¿‡ CPU å‘å¤–éƒ¨è®¾å¤‡å‘å‡ºä¸€ä¸ªè¯»æŒ‡ä»¤æ—¶ï¼Œæ•°æ®ä»å¤–éƒ¨è®¾å¤‡æ‹·è´åˆ°å†…å­˜å¾€å¾€éœ€è¦ä¸€æ®µæ—¶é—´ï¼Œè¿™ä¸ªæ—¶å€™ CPU æ²¡äº‹å¹²äº†ï¼Œç¨‹åºæ˜¯ä¸»åŠ¨æŠŠ CPU è®©ç»™åˆ«äººï¼Ÿè¿˜æ˜¯è®© CPU ä¸åœåœ°æŸ¥ï¼šæ•°æ®åˆ°äº†å—ï¼Œæ•°æ®åˆ°äº†å—â€¦â€¦</p>\n<p>è¿™å°±æ˜¯ I/O æ¨¡å‹è¦è§£å†³çš„é—®é¢˜ã€‚ä»Šå¤©æˆ‘ä¼šå…ˆè¯´è¯´å„ç§ I/O æ¨¡å‹çš„åŒºåˆ«ï¼Œç„¶åé‡ç‚¹åˆ†æ Tomcat çš„ NioEndpoint ç»„ä»¶æ˜¯å¦‚ä½•å®ç°éé˜»å¡ I/O æ¨¡å‹çš„ã€‚</p>\n<h3>I/O æ¨¡å‹</h3>\n<p>ä¸€ä¸ªç½‘ç»œ I/O é€šä¿¡è¿‡ç¨‹ï¼Œæ¯”å¦‚ç½‘ç»œæ•°æ®è¯»å–ï¼Œä¼šæ¶‰åŠåˆ°ä¸¤ä¸ªå¯¹è±¡ï¼Œåˆ†åˆ«æ˜¯è°ƒç”¨è¿™ä¸ª I/O æ“ä½œçš„ç”¨æˆ·çº¿ç¨‹å’Œæ“ä½œç³»ç»Ÿå†…æ ¸ã€‚ä¸€ä¸ªè¿›ç¨‹çš„åœ°å€ç©ºé—´åˆ†ä¸ºç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´ï¼Œç”¨æˆ·çº¿ç¨‹ä¸èƒ½ç›´æ¥è®¿é—®å†…æ ¸ç©ºé—´ã€‚</p>\n<p>ç½‘ç»œè¯»å–ä¸»è¦æœ‰ä¸¤ä¸ªæ­¥éª¤ï¼š</p>\n<ul>\n <li>ç”¨æˆ·çº¿ç¨‹ç­‰å¾…å†…æ ¸å°†æ•°æ®ä»ç½‘å¡å¤åˆ¶åˆ°å†…æ ¸ç©ºé—´ã€‚</li>\n <li>å†…æ ¸å°†æ•°æ®ä»å†…æ ¸ç©ºé—´å¤åˆ¶åˆ°ç”¨æˆ·ç©ºé—´ã€‚</li>\n</ul>\n<p>åŒç†ï¼Œå°†æ•°æ®å‘é€åˆ°ç½‘ç»œä¹Ÿæ˜¯ä¸€æ ·çš„æµç¨‹ï¼Œå°†æ•°æ®ä»ç”¨æˆ·çº¿ç¨‹å¤åˆ¶åˆ°å†…æ ¸ç©ºé—´ï¼Œå†…æ ¸ç©ºé—´å°†æ•°æ®å¤åˆ¶åˆ°ç½‘å¡å‘é€ã€‚</p>\n<p>ä¸åŒ I/O æ¨¡å‹çš„åŒºåˆ«ï¼šå®ç°è¿™ä¸¤ä¸ªæ­¥éª¤çš„æ–¹å¼ä¸ä¸€æ ·ã€‚</p>\n<ul>\n <li>å¯¹äºåŒæ­¥ï¼Œåˆ™æŒ‡çš„åº”ç”¨ç¨‹åºè°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ˜¯å¦ç«‹é©¬è¿”å›ï¼Œè€Œä¸éœ€è¦ç­‰å¾…ã€‚</li>\n <li>å¯¹äºé˜»å¡ä¸éé˜»å¡ï¼šä¸»è¦å°±æ˜¯æ•°æ®ä»å†…æ ¸å¤åˆ¶åˆ°ç”¨æˆ·ç©ºé—´çš„è¯»å†™æ“ä½œæ˜¯å¦æ˜¯é˜»å¡ç­‰å¾…çš„ã€‚</li>\n</ul>\n<h4>åŒæ­¥é˜»å¡ I/O</h4>\n<p>ç”¨æˆ·çº¿ç¨‹å‘èµ·<code>read</code>è°ƒç”¨çš„æ—¶å€™ï¼Œçº¿ç¨‹å°±é˜»å¡äº†ï¼Œåªèƒ½è®©å‡º CPUï¼Œè€Œå†…æ ¸åˆ™ç­‰å¾…ç½‘å¡æ•°æ®åˆ°æ¥ï¼Œå¹¶æŠŠæ•°æ®ä»ç½‘å¡æ‹·è´åˆ°å†…æ ¸ç©ºé—´ï¼Œå½“å†…æ ¸æŠŠæ•°æ®æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ï¼Œå†æŠŠåˆšåˆšé˜»å¡çš„è¯»å–ç”¨æˆ·çº¿ç¨‹å”¤é†’ï¼Œä¸¤ä¸ªæ­¥éª¤çš„çº¿ç¨‹éƒ½æ˜¯é˜»å¡çš„ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023657739\" alt=\"åŒæ­¥é˜»å¡ I/O\" title=\"åŒæ­¥é˜»å¡ I/O\" /></p>\n<h4>åŒæ­¥éé˜»å¡</h4>\n<p>ç”¨æˆ·çº¿ç¨‹ä¸€ç›´ä¸åœçš„è°ƒç”¨<code>read</code>æ–¹æ³•ï¼Œå¦‚æœæ•°æ®è¿˜æ²¡æœ‰å¤åˆ¶åˆ°å†…æ ¸ç©ºé—´åˆ™è¿”å›å¤±è´¥ï¼Œç›´åˆ°æ•°æ®åˆ°è¾¾å†…æ ¸ç©ºé—´ã€‚ç”¨æˆ·çº¿ç¨‹åœ¨ç­‰å¾…æ•°æ®ä»å†…æ ¸ç©ºé—´å¤åˆ¶åˆ°ç”¨æˆ·ç©ºé—´çš„æ—¶é—´é‡Œä¸€ç›´æ˜¯é˜»å¡çš„ï¼Œç­‰æ•°æ®åˆ°è¾¾ç”¨æˆ·ç©ºé—´æ‰è¢«å”¤é†’ã€‚å¾ªç¯è°ƒç”¨<code>read</code>æ–¹æ³•çš„æ—¶å€™ä¸é˜»å¡ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023657738\" alt=\"åŒæ­¥éé˜»å¡\" title=\"åŒæ­¥éé˜»å¡\" /></p>\n<h4>I/O å¤šè·¯å¤ç”¨</h4>\n<p>ç”¨æˆ·çº¿ç¨‹çš„è¯»å–æ“ä½œè¢«åˆ’åˆ†ä¸ºä¸¤æ­¥ï¼š</p>\n<ol>\n <li>ç”¨æˆ·çº¿ç¨‹å…ˆå‘èµ· <code>select</code> è°ƒç”¨ï¼Œä¸»è¦å°±æ˜¯è¯¢é—®å†…æ ¸æ•°æ®è½¬å¤‡å¥½äº†æ²¡ï¼Ÿå½“å†…æ ¸æŠŠæ•°æ®å‡†å¤‡å¥½äº†å°±æ‰§è¡Œç¬¬äºŒæ­¥ã€‚</li>\n <li>ç”¨æˆ·çº¿ç¨‹å†å‘èµ· <code>read</code> è°ƒç”¨ï¼Œåœ¨ç­‰å¾…å†…æ ¸æŠŠæ•°æ®ä»å†…æ ¸ç©ºé—´å¤åˆ¶åˆ°ç”¨æˆ·ç©ºé—´çš„æ—¶é—´é‡Œï¼Œå‘èµ· read çº¿ç¨‹æ˜¯é˜»å¡çš„ã€‚</li>\n</ol>\n<p>ä¸ºä½•å« I/O å¤šè·¯å¤ç”¨ï¼Œæ ¸å¿ƒä¸»è¦å°±æ˜¯ï¼šä¸€æ¬¡ <code>select</code> è°ƒç”¨å¯ä»¥å‘å†…æ ¸æŸ¥è¯¢å¤šä¸ª<strong>æ•°æ®é€šé“(Channel)</strong>çš„çŠ¶æ€ï¼Œå› æ­¤å«å¤šè·¯å¤ç”¨ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023657740\" alt=\"I/O å¤šè·¯å¤ç”¨\" title=\"I/O å¤šè·¯å¤ç”¨\" /></p>\n<h4>å¼‚æ­¥ I/O</h4>\n<p>ç”¨æˆ·çº¿ç¨‹æ‰§è¡Œ read è°ƒç”¨çš„æ—¶å€™ä¼šæ³¨å†Œä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œ read è°ƒç”¨ç«‹å³è¿”å›ï¼Œä¸ä¼šé˜»å¡çº¿ç¨‹ï¼Œåœ¨ç­‰å¾…å†…æ ¸å°†æ•°æ®å‡†å¤‡å¥½ä»¥åï¼Œå†è°ƒç”¨åˆšåˆšæ³¨å†Œçš„å›è°ƒå‡½æ•°å¤„ç†æ•°æ®ï¼Œåœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ç”¨æˆ·çº¿ç¨‹ä¸€ç›´æ²¡æœ‰é˜»å¡ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023657741\" alt=\"å¼‚æ­¥ I/O\" title=\"å¼‚æ­¥ I/O\" /></p>\n<h3>Tomcat NioEndpoint</h3>\n<p>Tomcat çš„ NioEndpoit ç»„ä»¶å®é™…ä¸Šå°±æ˜¯å®ç°äº† I/O å¤šè·¯å¤ç”¨æ¨¡å‹ï¼Œæ­£å¼å› ä¸ºè¿™ä¸ªå¹¶å‘èƒ½åŠ›æ‰è¶³å¤Ÿä¼˜ç§€ã€‚è®©æˆ‘ä»¬ä¸€èµ·çª¥æ¢ä¸‹ Tomcat NioEndpoint çš„è®¾è®¡åŸç†ã€‚</p>\n<p>å¯¹äº Java çš„å¤šè·¯å¤ç”¨å™¨çš„ä½¿ç”¨ï¼Œæ— éæ˜¯ä¸¤æ­¥ï¼š</p>\n<ol>\n <li>åˆ›å»ºä¸€ä¸ª Seletorï¼Œåœ¨å®ƒèº«ä¸Šæ³¨å†Œå„ç§æ„Ÿå…´è¶£çš„äº‹ä»¶ï¼Œç„¶åè°ƒç”¨ select æ–¹æ³•ï¼Œç­‰å¾…æ„Ÿå…´è¶£çš„äº‹æƒ…å‘ç”Ÿã€‚</li>\n <li>æ„Ÿå…´è¶£çš„äº‹æƒ…å‘ç”Ÿäº†ï¼Œæ¯”å¦‚å¯ä»¥è¯»äº†ï¼Œè¿™æ—¶ä¾¿åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ä» Channel ä¸­è¯»æ•°æ®ã€‚</li>\n</ol>\n<p>Tomcat çš„ NioEndpoint ç»„ä»¶è™½ç„¶å®ç°æ¯”è¾ƒå¤æ‚ï¼Œä½†åŸºæœ¬åŸç†å°±æ˜¯ä¸Šé¢ä¸¤æ­¥ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å®ƒæœ‰å“ªäº›ç»„ä»¶ï¼Œå®ƒä¸€å…±åŒ…å« LimitLatchã€Acceptorã€Pollerã€SocketProcessor å’Œ Executor å…± 5 ä¸ªç»„ä»¶ï¼Œå®ƒä»¬çš„å·¥ä½œè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023465591\" alt=\"NioEndPoint\" title=\"NioEndPoint\" /></p>\n<p>æ­£æ˜¯ç”±äºä½¿ç”¨äº† I/O å¤šè·¯å¤ç”¨ï¼ŒPoller å†…éƒ¨æœ¬è´¨å°±æ˜¯æŒæœ‰ Java Selector æ£€æµ‹ channel çš„ I/O æ—¶é—´ï¼Œå½“æ•°æ®å¯è¯»å†™çš„æ—¶å€™åˆ›å»º SocketProcessor ä»»åŠ¡ä¸¢åˆ°çº¿ç¨‹æ± æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯å°‘é‡çº¿ç¨‹ç›‘å¬è¯»å†™äº‹ä»¶ï¼Œæ¥ç€ä¸“å±çš„çº¿ç¨‹æ± æ‰§è¡Œè¯»å†™ï¼Œæé«˜æ€§èƒ½ã€‚</p>\n<h3>è‡ªå®šä¹‰çº¿ç¨‹æ± æ¨¡å‹</h3>\n<p>ä¸ºäº†æé«˜å¤„ç†èƒ½åŠ›å’Œå¹¶å‘åº¦ï¼Œ Web å®¹å™¨é€šå¸¸ä¼šæŠŠå¤„ç†è¯·æ±‚çš„å·¥ä½œæ”¾åœ¨çº¿ç¨‹æ± æ¥å¤„ç†ï¼Œ Tomcat æ‹“å±•äº† Java åŸç”Ÿçš„çº¿ç¨‹æ± æ¥æå‡å¹¶å‘éœ€æ±‚ï¼Œåœ¨è¿›å…¥ Tomcat çº¿ç¨‹æ± åŸç†ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå›é¡¾ä¸‹ Java çº¿ç¨‹æ± åŸç†ã€‚</p>\n<h4>Java çº¿ç¨‹æ± </h4>\n<p>ç®€å•çš„è¯´ï¼ŒJava çº¿ç¨‹æ± é‡Œå†…éƒ¨ç»´æŠ¤ä¸€ä¸ªçº¿ç¨‹æ•°ç»„å’Œä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼Œå½“ä»»åŠ¡å¤„ç†ä¸è¿‡æ¥çš„æ—¶ï¼Œå°±æŠŠä»»åŠ¡æ”¾åˆ°é˜Ÿåˆ—é‡Œæ…¢æ…¢å¤„ç†ã€‚</p>\n<h5>ThreadPoolExecutor</h5>\n<p>æ¥çª¥æ¢çº¿ç¨‹æ± æ ¸å¿ƒç±»çš„æ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦ç†è§£æ¯ä¸€ä¸ªå‚æ•°çš„ä½œç”¨ï¼Œæ‰èƒ½ç†è§£çº¿ç¨‹æ± çš„å·¥ä½œåŸç†ã€‚</p>\n<pre><code class=\"java\">    public ThreadPoolExecutor(int corePoolSize,\n                              int maximumPoolSize,\n                              long keepAliveTime,\n                              TimeUnit unit,\n                              BlockingQueue&lt;Runnable&gt; workQueue,\n                              ThreadFactory threadFactory,\n                              RejectedExecutionHandler handler) {\n        ......\n    }</code></pre>\n<ul>\n <li>corePoolSizeï¼šä¿ç•™åœ¨æ± ä¸­çš„çº¿ç¨‹æ•°ï¼Œå³ä½¿å®ƒä»¬ç©ºé—²ï¼Œé™¤éè®¾ç½®äº† allowCoreThreadTimeOutï¼Œä¸ç„¶ä¸ä¼šå…³é—­ã€‚</li>\n <li>maximumPoolSizeï¼šé˜Ÿåˆ—æ»¡åæ± ä¸­å…è®¸çš„æœ€å¤§çº¿ç¨‹æ•°ã€‚</li>\n <li>keepAliveTimeã€TimeUnitï¼šå¦‚æœçº¿ç¨‹æ•°å¤§äºæ ¸å¿ƒæ•°ï¼Œå¤šä½™çš„ç©ºé—²çº¿ç¨‹çš„ä¿æŒçš„æœ€é•¿æ—¶é—´ä¼šè¢«é”€æ¯ã€‚unit æ˜¯ keepAliveTime å‚æ•°çš„æ—¶é—´å•ä½ã€‚å½“è®¾ç½® <code>allowCoreThreadTimeOut(true)</code> æ—¶ï¼Œçº¿ç¨‹æ± ä¸­ corePoolSize èŒƒå›´å†…çš„çº¿ç¨‹ç©ºé—²æ—¶é—´è¾¾åˆ° keepAliveTime ä¹Ÿå°†å›æ”¶ã€‚</li>\n <li>workQueueï¼šå½“çº¿ç¨‹æ•°è¾¾åˆ° <strong>corePoolSize</strong> åï¼Œæ–°å¢çš„ä»»åŠ¡å°±æ”¾åˆ°å·¥ä½œé˜Ÿåˆ— <strong>workQueue</strong> é‡Œï¼Œè€Œçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹åˆ™åŠªåŠ›åœ°ä» <strong>workQueue</strong> é‡Œæ‹‰æ´»æ¥å¹²ï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨ poll æ–¹æ³•æ¥è·å–ä»»åŠ¡ã€‚</li>\n <li>ThreadFactoryï¼šåˆ›å»ºçº¿ç¨‹çš„å·¥å‚ï¼Œæ¯”å¦‚è®¾ç½®æ˜¯å¦æ˜¯åå°çº¿ç¨‹ã€çº¿ç¨‹åç­‰ã€‚</li>\n <li>RejectedExecutionHandlerï¼šæ‹’ç»ç­–ç•¥ï¼Œå¤„ç†ç¨‹åºå› ä¸ºè¾¾åˆ°äº†çº¿ç¨‹ç•Œé™å’Œé˜Ÿåˆ—å®¹é‡æ‰§è¡Œæ‹’ç»ç­–ç•¥ã€‚ä¹Ÿå¯ä»¥è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥ï¼Œåªè¦å®ç° <code>RejectedExecutionHandler</code> å³å¯ã€‚é»˜è®¤çš„æ‹’ç»ç­–ç•¥ï¼š<code>AbortPolicy</code> æ‹’ç»ä»»åŠ¡å¹¶æŠ›å‡º <code>RejectedExecutionException</code> å¼‚å¸¸ï¼›<code>CallerRunsPolicy</code> æäº¤è¯¥ä»»åŠ¡çš„çº¿ç¨‹æ‰§è¡Œï¼›``</li>\n</ul>\n<p>æ¥åˆ†æä¸‹æ¯ä¸ªå‚æ•°ä¹‹é—´çš„å…³ç³»ï¼š</p>\n<p>æäº¤æ–°ä»»åŠ¡çš„æ—¶å€™ï¼Œå¦‚æœçº¿ç¨‹æ± æ•° &lt; corePoolSizeï¼Œåˆ™åˆ›å»ºæ–°çš„çº¿ç¨‹æ± æ‰§è¡Œä»»åŠ¡ï¼Œå½“çº¿ç¨‹æ•° = corePoolSize æ—¶ï¼Œæ–°çš„ä»»åŠ¡å°±ä¼šè¢«æ”¾åˆ°å·¥ä½œé˜Ÿåˆ— workQueue ä¸­ï¼Œçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹å°½é‡ä»é˜Ÿåˆ—é‡Œå–ä»»åŠ¡æ¥æ‰§è¡Œã€‚</p>\n<p>å¦‚æœä»»åŠ¡å¾ˆå¤šï¼ŒworkQueue æ»¡äº†ï¼Œä¸” å½“å‰çº¿ç¨‹æ•° &lt; maximumPoolSize æ—¶åˆ™ä¸´æ—¶åˆ›å»ºçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œå¦‚æœæ€»çº¿ç¨‹æ•°é‡è¶…è¿‡ maximumPoolSizeï¼Œåˆ™ä¸å†åˆ›å»ºçº¿ç¨‹ï¼Œè€Œæ˜¯æ‰§è¡Œæ‹’ç»ç­–ç•¥ã€‚<code>DiscardPolicy</code> ä»€ä¹ˆéƒ½ä¸åšç›´æ¥ä¸¢å¼ƒä»»åŠ¡ï¼›<code>DiscardOldestPolicy</code> ä¸¢å¼ƒæœ€æ—§çš„æœªå¤„ç†ç¨‹åº;</p>\n<p>å…·ä½“æ‰§è¡Œæµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023657742\" alt=\"çº¿ç¨‹æ± æ‰§è¡Œæµç¨‹\" title=\"çº¿ç¨‹æ± æ‰§è¡Œæµç¨‹\" /></p>\n<h4>Tomcat çº¿ç¨‹æ± </h4>\n<p>å®šåˆ¶ç‰ˆçš„ ThreadPoolExecutorï¼Œç»§æ‰¿äº† java.util.concurrent.ThreadPoolExecutorã€‚ å¯¹äºçº¿ç¨‹æ± æœ‰ä¸¤ä¸ªå¾ˆå…³é”®çš„å‚æ•°ï¼š</p>\n<ul>\n <li>çº¿ç¨‹ä¸ªæ•°ã€‚</li>\n <li>é˜Ÿåˆ—é•¿åº¦ã€‚</li>\n</ul>\n<p>Tomcat å¿…ç„¶éœ€è¦é™å®šæƒ³ç€ä¸¤ä¸ªå‚æ•°ä¸ç„¶åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹å¯èƒ½å¯¼è‡´ CPU å’Œå†…å­˜æœ‰èµ„æºè€—å°½çš„é£é™©ã€‚ç»§æ‰¿äº† ä¸ java.util.concurrent.ThreadPoolExecutor ç›¸åŒï¼Œä½†å®ç°çš„æ•ˆç‡æ›´é«˜ã€‚</p>\n<p>å…¶æ„é€ æ–¹æ³•å¦‚ä¸‹ï¼Œè·Ÿ Java å®˜æ–¹çš„å¦‚å‡ºä¸€è¾™</p>\n<pre><code class=\"java\">public ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue&lt;Runnable&gt; workQueue, RejectedExecutionHandler handler) {\n        super(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue, handler);\n        prestartAllCoreThreads();\n    }</code></pre>\n<p>åœ¨ Tomcat ä¸­æ§åˆ¶çº¿ç¨‹æ± çš„ç»„ä»¶æ˜¯ <code>StandardThreadExecutor</code> , ä¹Ÿæ˜¯å®ç°äº†ç”Ÿå‘½å‘¨æœŸæ¥å£ï¼Œä¸‹é¢æ˜¯å¯åŠ¨çº¿ç¨‹æ± çš„ä»£ç </p>\n<pre><code class=\"java\">    @Override\n    protected void startInternal() throws LifecycleException {\n        // è‡ªå®šä¹‰ä»»åŠ¡é˜Ÿåˆ—\n        taskqueue = new TaskQueue(maxQueueSize);\n        // è‡ªå®šä¹‰çº¿ç¨‹å·¥å‚\n        TaskThreadFactory tf = new TaskThreadFactory(namePrefix,daemon,getThreadPriority());\n       // åˆ›å»ºå®šåˆ¶ç‰ˆçº¿ç¨‹æ± \n        executor = new ThreadPoolExecutor(getMinSpareThreads(), getMaxThreads(), maxIdleTime, TimeUnit.MILLISECONDS,taskqueue, tf);\n        executor.setThreadRenewalDelay(threadRenewalDelay);\n        if (prestartminSpareThreads) {\n            executor.prestartAllCoreThreads();\n        }\n        taskqueue.setParent(executor);\n        // è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå‘å¸ƒå¯åŠ¨äº‹ä»¶\n        setState(LifecycleState.STARTING);\n    }</code></pre>\n<p>å…¶ä¸­çš„å…³é”®ç‚¹åœ¨äºï¼š</p>\n<ol>\n <li>Tomcat æœ‰è‡ªå·±çš„å®šåˆ¶ç‰ˆä»»åŠ¡é˜Ÿåˆ—å’Œçº¿ç¨‹å·¥å‚ï¼Œå¹¶ä¸”å¯ä»¥é™åˆ¶ä»»åŠ¡é˜Ÿåˆ—çš„é•¿åº¦ï¼Œå®ƒçš„æœ€å¤§é•¿åº¦æ˜¯ maxQueueSizeã€‚</li>\n <li>Tomcat å¯¹çº¿ç¨‹æ•°ä¹Ÿæœ‰é™åˆ¶ï¼Œè®¾ç½®äº†æ ¸å¿ƒçº¿ç¨‹æ•°ï¼ˆminSpareThreadsï¼‰å’Œæœ€å¤§çº¿ç¨‹æ± æ•°ï¼ˆmaxThreadsï¼‰ã€‚</li>\n</ol>\n<p>é™¤æ­¤ä¹‹å¤–ï¼Œ Tomcat åœ¨å®˜æ–¹åŸæœ‰åŸºç¡€ä¸Šé‡æ–°å®šä¹‰äº†è‡ªå·±çš„çº¿ç¨‹æ± å¤„ç†æµç¨‹ï¼ŒåŸç”Ÿçš„å¤„ç†æµç¨‹ä¸Šæ–‡å·²ç»è¯´è¿‡ã€‚</p>\n<ul>\n <li>å‰ corePoolSize ä¸ªä»»åŠ¡æ—¶ï¼Œæ¥ä¸€ä¸ªä»»åŠ¡å°±åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹ã€‚</li>\n <li>è¿˜æœ‰ä»»åŠ¡æäº¤ï¼Œç›´æ¥æ”¾åˆ°é˜Ÿåˆ—ï¼Œé˜Ÿåˆ—æ»¡äº†ï¼Œä½†æ˜¯æ²¡æœ‰è¾¾åˆ°æœ€å¤§çº¿ç¨‹æ± æ•°åˆ™åˆ›å»ºä¸´æ—¶çº¿ç¨‹æ•‘ç«ã€‚</li>\n <li>çº¿ç¨‹æ€»çº¿æ•°è¾¾åˆ° maximumPoolSize ï¼Œç›´æ¥æ‰§è¡Œæ‹’ç»ç­–ç•¥ã€‚</li>\n</ul>\n<p>Tomcat çº¿ç¨‹æ± æ‰©å±•äº†åŸç”Ÿçš„ ThreadPoolExecutorï¼Œé€šè¿‡é‡å†™ execute æ–¹æ³•å®ç°äº†è‡ªå·±çš„ä»»åŠ¡å¤„ç†é€»è¾‘ï¼š</p>\n<ul>\n <li>å‰ corePoolSize ä¸ªä»»åŠ¡æ—¶ï¼Œæ¥ä¸€ä¸ªä»»åŠ¡å°±åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹ã€‚</li>\n <li>è¿˜æœ‰ä»»åŠ¡æäº¤ï¼Œç›´æ¥æ”¾åˆ°é˜Ÿåˆ—ï¼Œé˜Ÿåˆ—æ»¡äº†ï¼Œä½†æ˜¯æ²¡æœ‰è¾¾åˆ°æœ€å¤§çº¿ç¨‹æ± æ•°åˆ™åˆ›å»ºä¸´æ—¶çº¿ç¨‹æ•‘ç«ã€‚</li>\n <li><strong>çº¿ç¨‹æ€»çº¿æ•°è¾¾åˆ° maximumPoolSize ï¼Œç»§ç»­å°è¯•æŠŠä»»åŠ¡æ”¾åˆ°é˜Ÿåˆ—ä¸­ã€‚å¦‚æœé˜Ÿåˆ—ä¹Ÿæ»¡äº†ï¼Œæ’å…¥ä»»åŠ¡å¤±è´¥ï¼Œæ‰æ‰§è¡Œæ‹’ç»ç­–ç•¥ã€‚</strong></li>\n</ul>\n<p><strong>æœ€å¤§çš„å·®åˆ«åœ¨äº Tomcat åœ¨çº¿ç¨‹æ€»æ•°è¾¾åˆ°æœ€å¤§æ•°æ—¶ï¼Œä¸æ˜¯ç«‹å³æ‰§è¡Œæ‹’ç»ç­–ç•¥ï¼Œè€Œæ˜¯å†å°è¯•å‘ä»»åŠ¡é˜Ÿåˆ—æ·»åŠ ä»»åŠ¡ï¼Œæ·»åŠ å¤±è´¥åå†æ‰§è¡Œæ‹’ç»ç­–ç•¥ã€‚</strong></p>\n<p>ä»£ç å¦‚ä¸‹æ‰€ç¤º:</p>\n<pre><code class=\"java\">    public void execute(Runnable command, long timeout, TimeUnit unit) {\n       // è®°å½•æäº¤ä»»åŠ¡æ•° +1\n        submittedCount.incrementAndGet();\n        try {\n            // è°ƒç”¨ java åŸç”Ÿçº¿ç¨‹æ± æ¥æ‰§è¡Œä»»åŠ¡ï¼Œå½“åŸç”ŸæŠ›å‡ºæ‹’ç»ç­–ç•¥\n            super.execute(command);\n        } catch (RejectedExecutionException rx) {\n          //æ€»çº¿ç¨‹æ•°è¾¾åˆ° maximumPoolSizeï¼ŒJava åŸç”Ÿä¼šæ‰§è¡Œæ‹’ç»ç­–ç•¥\n            if (super.getQueue() instanceof TaskQueue) {\n                final TaskQueue queue = (TaskQueue)super.getQueue();\n                try {\n                    // å°è¯•æŠŠä»»åŠ¡æ”¾å…¥é˜Ÿåˆ—ä¸­\n                    if (!queue.force(command, timeout, unit)) {\n                        submittedCount.decrementAndGet();\n                      // é˜Ÿåˆ—è¿˜æ˜¯æ»¡çš„ï¼Œæ’å…¥å¤±è´¥åˆ™æ‰§è¡Œæ‹’ç»ç­–ç•¥\n                        throw new RejectedExecutionException(\"Queue capacity is full.\");\n                    }\n                } catch (InterruptedException x) {\n                    submittedCount.decrementAndGet();\n                    throw new RejectedExecutionException(x);\n                }\n            } else {\n              // æäº¤ä»»åŠ¡ä¹¦ -1\n                submittedCount.decrementAndGet();\n                throw rx;\n            }\n\n        }\n    }</code></pre>\n<p>Tomcat çº¿ç¨‹æ± æ˜¯ç”¨ submittedCount æ¥ç»´æŠ¤å·²ç»æäº¤åˆ°äº†çº¿ç¨‹æ± ï¼Œè¿™è·Ÿ Tomcat çš„å®šåˆ¶ç‰ˆçš„ä»»åŠ¡é˜Ÿåˆ—æœ‰å…³ã€‚Tomcat çš„ä»»åŠ¡é˜Ÿåˆ— TaskQueue æ‰©å±•äº† Java ä¸­çš„ LinkedBlockingQueueï¼Œæˆ‘ä»¬çŸ¥é“ LinkedBlockingQueue é»˜è®¤æƒ…å†µä¸‹é•¿åº¦æ˜¯æ²¡æœ‰é™åˆ¶çš„ï¼Œé™¤éç»™å®ƒä¸€ä¸ª capacityã€‚å› æ­¤ Tomcat ç»™äº†å®ƒä¸€ä¸ª capacityï¼ŒTaskQueue çš„æ„é€ å‡½æ•°ä¸­æœ‰ä¸ªæ•´å‹çš„å‚æ•° capacityï¼ŒTaskQueue å°† capacity ä¼ ç»™çˆ¶ç±» LinkedBlockingQueue çš„æ„é€ å‡½æ•°ï¼Œé˜²æ­¢æ— é™æ·»åŠ ä»»åŠ¡å¯¼è‡´å†…å­˜æº¢å‡ºã€‚è€Œä¸”é»˜è®¤æ˜¯æ— é™åˆ¶ï¼Œå°±ä¼šå¯¼è‡´å½“å‰çº¿ç¨‹æ•°è¾¾åˆ°æ ¸å¿ƒçº¿ç¨‹æ•°ä¹‹åï¼Œå†æ¥ä»»åŠ¡çš„è¯çº¿ç¨‹æ± ä¼šæŠŠä»»åŠ¡æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¹¶ä¸”æ€»æ˜¯ä¼šæˆåŠŸï¼Œè¿™æ ·æ°¸è¿œä¸ä¼šæœ‰æœºä¼šåˆ›å»ºæ–°çº¿ç¨‹äº†ã€‚</p>\n<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒTaskQueue é‡å†™äº† LinkedBlockingQueue çš„ offer æ–¹æ³•ï¼Œåœ¨åˆé€‚çš„æ—¶æœºè¿”å› falseï¼Œè¿”å› false è¡¨ç¤ºä»»åŠ¡æ·»åŠ å¤±è´¥ï¼Œè¿™æ—¶çº¿ç¨‹æ± ä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹ã€‚</p>\n<pre><code class=\"java\">public class TaskQueue extends LinkedBlockingQueue&lt;Runnable&gt; {\n\n  ...\n   @Override\n  // çº¿ç¨‹æ± è°ƒç”¨ä»»åŠ¡é˜Ÿåˆ—çš„æ–¹æ³•æ—¶ï¼Œå½“å‰çº¿ç¨‹æ•°è‚¯å®šå·²ç»å¤§äºæ ¸å¿ƒçº¿ç¨‹æ•°äº†\n  public boolean offer(Runnable o) {\n\n      // å¦‚æœçº¿ç¨‹æ•°å·²ç»åˆ°äº†æœ€å¤§å€¼ï¼Œä¸èƒ½åˆ›å»ºæ–°çº¿ç¨‹äº†ï¼Œåªèƒ½æŠŠä»»åŠ¡æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ã€‚\n      if (parent.getPoolSize() == parent.getMaximumPoolSize())\n          return super.offer(o);\n\n      // æ‰§è¡Œåˆ°è¿™é‡Œï¼Œè¡¨æ˜å½“å‰çº¿ç¨‹æ•°å¤§äºæ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œå¹¶ä¸”å°äºæœ€å¤§çº¿ç¨‹æ•°ã€‚\n      // è¡¨æ˜æ˜¯å¯ä»¥åˆ›å»ºæ–°çº¿ç¨‹çš„ï¼Œé‚£åˆ°åº•è¦ä¸è¦åˆ›å»ºå‘¢ï¼Ÿåˆ†ä¸¤ç§æƒ…å†µï¼š\n\n      //1. å¦‚æœå·²æäº¤çš„ä»»åŠ¡æ•°å°äºå½“å‰çº¿ç¨‹æ•°ï¼Œè¡¨ç¤ºè¿˜æœ‰ç©ºé—²çº¿ç¨‹ï¼Œæ— éœ€åˆ›å»ºæ–°çº¿ç¨‹\n      if (parent.getSubmittedCount()&lt;=(parent.getPoolSize()))\n          return super.offer(o);\n\n      //2. å¦‚æœå·²æäº¤çš„ä»»åŠ¡æ•°å¤§äºå½“å‰çº¿ç¨‹æ•°ï¼Œçº¿ç¨‹ä¸å¤Ÿç”¨äº†ï¼Œè¿”å› false å»åˆ›å»ºæ–°çº¿ç¨‹\n      if (parent.getPoolSize()&lt;parent.getMaximumPoolSize())\n          return false;\n\n      // é»˜è®¤æƒ…å†µä¸‹æ€»æ˜¯æŠŠä»»åŠ¡æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—\n      return super.offer(o);\n  }\n\n}</code></pre>\n<p>åªæœ‰å½“å‰çº¿ç¨‹æ•°å¤§äºæ ¸å¿ƒçº¿ç¨‹æ•°ã€å°äºæœ€å¤§çº¿ç¨‹æ•°ï¼Œå¹¶ä¸”å·²æäº¤çš„ä»»åŠ¡ä¸ªæ•°å¤§äºå½“å‰çº¿ç¨‹æ•°æ—¶ï¼Œä¹Ÿå°±æ˜¯è¯´çº¿ç¨‹ä¸å¤Ÿç”¨äº†ï¼Œä½†æ˜¯çº¿ç¨‹æ•°åˆæ²¡è¾¾åˆ°æé™ï¼Œæ‰ä¼šå»åˆ›å»ºæ–°çš„çº¿ç¨‹ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Tomcat éœ€è¦ç»´æŠ¤å·²æäº¤ä»»åŠ¡æ•°è¿™ä¸ªå˜é‡ï¼Œå®ƒçš„ç›®çš„å°±æ˜¯<strong>åœ¨ä»»åŠ¡é˜Ÿåˆ—çš„é•¿åº¦æ— é™åˆ¶çš„æƒ…å†µä¸‹ï¼Œè®©çº¿ç¨‹æ± æœ‰æœºä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹</strong>ã€‚å¯ä»¥é€šè¿‡è®¾ç½® maxQueueSize å‚æ•°æ¥é™åˆ¶ä»»åŠ¡é˜Ÿåˆ—çš„é•¿åº¦ã€‚</p>\n<h2>æ€§èƒ½ä¼˜åŒ–</h2>\n<h3>çº¿ç¨‹æ± è°ƒä¼˜</h3>\n<p>è·Ÿ I/O æ¨¡å‹ç´§å¯†ç›¸å…³çš„æ˜¯çº¿ç¨‹æ± ï¼Œçº¿ç¨‹æ± çš„è°ƒä¼˜å°±æ˜¯è®¾ç½®åˆç†çš„çº¿ç¨‹æ± å‚æ•°ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ Tomcat çº¿ç¨‹æ± ä¸­æœ‰å“ªäº›å…³é”®å‚æ•°ï¼š</p>\n<table>\n <thead>\n  <tr>\n   <th>å‚æ•°</th>\n   <th>è¯¦æƒ…</th>\n  </tr>\n </thead>\n <tbody>\n  <tr>\n   <td>threadPriority</td>\n   <td>çº¿ç¨‹ä¼˜å…ˆçº§ï¼Œé»˜è®¤æ˜¯ 5</td>\n  </tr>\n  <tr>\n   <td>daemon</td>\n   <td>æ˜¯å¦æ˜¯ åå°çº¿ç¨‹ï¼Œé»˜è®¤ true</td>\n  </tr>\n  <tr>\n   <td>namePrefix</td>\n   <td>çº¿ç¨‹åå‰ç¼€</td>\n  </tr>\n  <tr>\n   <td>maxThreads</td>\n   <td>æœ€å¤§çº¿ç¨‹æ•°ï¼Œé»˜è®¤ 200</td>\n  </tr>\n  <tr>\n   <td>minSpareThreads</td>\n   <td>æœ€å°çº¿ç¨‹æ•°ï¼ˆç©ºé—²è¶…è¿‡ä¸€å®šæ—¶é—´ä¼šè¢«å›æ”¶ï¼‰ï¼Œé»˜è®¤ 25</td>\n  </tr>\n  <tr>\n   <td>maxIdleTime</td>\n   <td>çº¿ç¨‹æœ€å¤§ç©ºé—²æ—¶é—´ï¼Œè¶…è¿‡è¯¥æ—¶é—´çš„ä¼šè¢«å›æ”¶ï¼Œç›´åˆ°åªæœ‰ minSpareThreads ä¸ªã€‚é»˜è®¤æ˜¯ 1 åˆ†é’Ÿ</td>\n  </tr>\n  <tr>\n   <td>maxQueueSize</td>\n   <td>ä»»åŠ¡é˜Ÿåˆ—æœ€å¤§é•¿åº¦</td>\n  </tr>\n  <tr>\n   <td>prestartAllCoreThreads</td>\n   <td>æ˜¯å¦åœ¨çº¿ç¨‹æ± å¯åŠ¨çš„æ—¶å€™å°±åˆ›å»º minSpareThreads ä¸ªçº¿ç¨‹ï¼Œé»˜è®¤æ˜¯ fasle</td>\n  </tr>\n </tbody>\n</table>\n<p>è¿™é‡Œé¢æœ€æ ¸å¿ƒçš„å°±æ˜¯å¦‚ä½•ç¡®å®š maxThreads çš„å€¼ï¼Œå¦‚æœè¿™ä¸ªå‚æ•°è®¾ç½®å°äº†ï¼ŒTomcat ä¼šå‘ç”Ÿçº¿ç¨‹é¥¥é¥¿ï¼Œå¹¶ä¸”è¯·æ±‚çš„å¤„ç†ä¼šåœ¨é˜Ÿåˆ—ä¸­æ’é˜Ÿç­‰å¾…ï¼Œå¯¼è‡´å“åº”æ—¶é—´å˜é•¿ï¼›å¦‚æœ maxThreads å‚æ•°å€¼è¿‡å¤§ï¼ŒåŒæ ·ä¹Ÿä¼šæœ‰é—®é¢˜ï¼Œå› ä¸ºæœåŠ¡å™¨çš„ CPU çš„æ ¸æ•°æœ‰é™ï¼Œçº¿ç¨‹æ•°å¤ªå¤šä¼šå¯¼è‡´çº¿ç¨‹åœ¨ CPU ä¸Šæ¥å›åˆ‡æ¢ï¼Œè€—è´¹å¤§é‡çš„åˆ‡æ¢å¼€é”€ã€‚</p>\n<p><strong>çº¿ç¨‹ I/O æ—¶é—´ä¸ CPU æ—¶é—´</strong></p>\n<p>è‡³æ­¤æˆ‘ä»¬åˆå¾—åˆ°ä¸€ä¸ªçº¿ç¨‹æ± ä¸ªæ•°çš„è®¡ç®—å…¬å¼ï¼Œå‡è®¾æœåŠ¡å™¨æ˜¯å•æ ¸çš„ï¼š</p>\n<p><strong>çº¿ç¨‹æ± å¤§å° = ï¼ˆçº¿ç¨‹ I/O é˜»å¡æ—¶é—´ + çº¿ç¨‹ CPU æ—¶é—´ ï¼‰/ çº¿ç¨‹ CPU æ—¶é—´</strong></p>\n<p>å…¶ä¸­ï¼šçº¿ç¨‹ I/O é˜»å¡æ—¶é—´ + çº¿ç¨‹ CPU æ—¶é—´ = å¹³å‡è¯·æ±‚å¤„ç†æ—¶é—´ã€‚</p>\n<h3>Tomcat å†…å­˜æº¢å‡ºçš„åŸå› åˆ†æåŠè°ƒä¼˜</h3>\n<p>JVM åœ¨æŠ›å‡º java.lang.OutOfMemoryError æ—¶ï¼Œé™¤äº†ä¼šæ‰“å°å‡ºä¸€è¡Œæè¿°ä¿¡æ¯ï¼Œè¿˜ä¼šæ‰“å°å †æ ˆè·Ÿè¸ªï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™äº›ä¿¡æ¯æ¥æ‰¾åˆ°å¯¼è‡´å¼‚å¸¸çš„åŸå› ã€‚åœ¨å¯»æ‰¾åŸå› å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æœ‰å“ªäº›å› ç´ ä¼šå¯¼è‡´ OutOfMemoryErrorï¼Œå…¶ä¸­å†…å­˜æ³„æ¼æ˜¯å¯¼è‡´ OutOfMemoryError çš„ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„åŸå› ã€‚</p>\n<p>å…¶å®è°ƒä¼˜å¾ˆå¤šæ—¶å€™éƒ½æ˜¯åœ¨æ‰¾ç³»ç»Ÿç“¶é¢ˆï¼Œå‡å¦‚æœ‰ä¸ªçŠ¶å†µï¼šç³»ç»Ÿå“åº”æ¯”è¾ƒæ…¢ï¼Œä½† CPU çš„ç”¨ç‡ä¸é«˜ï¼Œå†…å­˜æœ‰æ‰€å¢åŠ ï¼Œé€šè¿‡åˆ†æ Heap Dump å‘ç°å¤§é‡è¯·æ±‚å †ç§¯åœ¨çº¿ç¨‹æ± çš„é˜Ÿåˆ—ä¸­ï¼Œè¯·é—®è¿™ç§æƒ…å†µä¸‹åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿå¯èƒ½æ˜¯è¯·æ±‚å¤„ç†æ—¶é—´å¤ªé•¿ï¼Œå»æ’æŸ¥æ˜¯ä¸æ˜¯è®¿é—®æ•°æ®åº“æˆ–è€…å¤–éƒ¨åº”ç”¨é‡åˆ°äº†å»¶è¿Ÿã€‚</p>\n<h4>java.lang.OutOfMemoryError: Java heap space</h4>\n<p>å½“ JVM æ— æ³•åœ¨å †ä¸­åˆ†é…å¯¹è±¡çš„ä¼šæŠ›å‡ºæ­¤å¼‚å¸¸ï¼Œä¸€èˆ¬æœ‰ä»¥ä¸‹åŸå› ï¼š</p>\n<ol>\n <li>å†…å­˜æ³„æ¼ï¼šæœ¬è¯¥å›æ”¶çš„å¯¹è±¡å‘—ç¨‹åºä¸€ç›´æŒæœ‰å¼•ç”¨å¯¼è‡´å¯¹è±¡æ— æ³•è¢«å›æ”¶ï¼Œæ¯”å¦‚åœ¨çº¿ç¨‹æ± ä¸­ä½¿ç”¨ ThreadLocalã€å¯¹è±¡æ± ã€å†…å­˜æ± ã€‚ä¸ºäº†æ‰¾åˆ°å†…å­˜æ³„æ¼ç‚¹ï¼Œæˆ‘ä»¬é€šè¿‡ jmap å·¥å…·ç”Ÿæˆ Heap Dumpï¼Œå†åˆ©ç”¨ MAT åˆ†ææ‰¾åˆ°å†…å­˜æ³„æ¼ç‚¹ã€‚<code>jmap -dump:live,format=b,file=filename.bin pid</code></li>\n <li>å†…å­˜ä¸è¶³ï¼šæˆ‘ä»¬è®¾ç½®çš„å †å¤§å°å¯¹äºåº”ç”¨ç¨‹åºæ¥è¯´ä¸å¤Ÿï¼Œä¿®æ”¹ JVM å‚æ•°è°ƒæ•´å †å¤§å°ï¼Œæ¯”å¦‚ -Xms256m -Xmx2048mã€‚</li>\n <li>finalize æ–¹æ³•çš„è¿‡åº¦ä½¿ç”¨ã€‚å¦‚æœæˆ‘ä»¬æƒ³åœ¨ Java ç±»å®ä¾‹è¢« GC ä¹‹å‰æ‰§è¡Œä¸€äº›é€»è¾‘ï¼Œæ¯”å¦‚æ¸…ç†å¯¹è±¡æŒæœ‰çš„èµ„æºï¼Œå¯ä»¥åœ¨ Java ç±»ä¸­å®šä¹‰ finalize æ–¹æ³•ï¼Œè¿™æ · JVM GC ä¸ä¼šç«‹å³å›æ”¶è¿™äº›å¯¹è±¡å®ä¾‹ï¼Œè€Œæ˜¯å°†å¯¹è±¡å®ä¾‹æ·»åŠ åˆ°ä¸€ä¸ªå«â€œjava.lang.ref.Finalizer.ReferenceQueueâ€çš„é˜Ÿåˆ—ä¸­ï¼Œæ‰§è¡Œå¯¹è±¡çš„ finalize æ–¹æ³•ï¼Œä¹‹åæ‰ä¼šå›æ”¶è¿™äº›å¯¹è±¡ã€‚Finalizer çº¿ç¨‹ä¼šå’Œä¸»çº¿ç¨‹ç«äº‰ CPU èµ„æºï¼Œä½†ç”±äºä¼˜å…ˆçº§ä½ï¼Œæ‰€ä»¥å¤„ç†é€Ÿåº¦è·Ÿä¸ä¸Šä¸»çº¿ç¨‹åˆ›å»ºå¯¹è±¡çš„é€Ÿåº¦ï¼Œå› æ­¤ ReferenceQueue é˜Ÿåˆ—ä¸­çš„å¯¹è±¡å°±è¶Šæ¥è¶Šå¤šï¼Œæœ€ç»ˆä¼šæŠ›å‡º OutOfMemoryErrorã€‚è§£å†³åŠæ³•æ˜¯å°½é‡ä¸è¦ç»™ Java ç±»å®šä¹‰ finalize æ–¹æ³•ã€‚</li>\n</ol>\n<h4>java.lang.OutOfMemoryError: GC overhead limit exceeded</h4>\n<p>åƒåœ¾æ”¶é›†å™¨æŒç»­è¿è¡Œï¼Œä½†æ˜¯æ•ˆç‡å¾ˆä½å‡ ä¹æ²¡æœ‰å›æ”¶å†…å­˜ã€‚æ¯”å¦‚ Java è¿›ç¨‹èŠ±è´¹è¶…è¿‡ 96ï¼…çš„ CPU æ—¶é—´æ¥è¿›è¡Œä¸€æ¬¡ GCï¼Œä½†æ˜¯å›æ”¶çš„å†…å­˜å°‘äº 3ï¼…çš„ JVM å †ï¼Œå¹¶ä¸”è¿ç»­ 5 æ¬¡ GC éƒ½æ˜¯è¿™ç§æƒ…å†µï¼Œå°±ä¼šæŠ›å‡º OutOfMemoryErrorã€‚</p>\n<p>è¿™ä¸ªé—®é¢˜ IDE è§£å†³æ–¹æ³•å°±æ˜¯æŸ¥çœ‹ GC æ—¥å¿—æˆ–è€…ç”Ÿæˆ Heap Dumpï¼Œå…ˆç¡®è®¤æ˜¯å¦æ˜¯å†…å­˜æº¢å‡ºï¼Œä¸æ˜¯çš„è¯å¯ä»¥å°è¯•å¢åŠ å †å¤§å°ã€‚å¯ä»¥é€šè¿‡å¦‚ä¸‹ JVM å¯åŠ¨å‚æ•°æ‰“å° GC æ—¥å¿—:</p>\n<pre><code class=\"shell\">-verbose:gc //åœ¨æ§åˆ¶å°è¾“å‡ºGCæƒ…å†µ\n-XX:+PrintGCDetails  //åœ¨æ§åˆ¶å°è¾“å‡ºè¯¦ç»†çš„GCæƒ…å†µ\n-Xloggc: filepath  //å°†GCæ—¥å¿—è¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶ä¸­</code></pre>\n<p>æ¯”å¦‚ å¯ä»¥ä½¿ç”¨ <code>java -verbose:gc -Xloggc:gc.log -XX:+PrintGCDetails -jar xxx.jar</code> è®°å½• GC æ—¥å¿—ï¼Œé€šè¿‡ GCViewer å·¥å…·æŸ¥çœ‹ GC æ—¥å¿—ï¼Œç”¨ GCViewer æ‰“å¼€äº§ç”Ÿçš„ gc.log åˆ†æåƒåœ¾å›æ”¶æƒ…å†µã€‚</p>\n<h4>java.lang.OutOfMemoryError: Requested array size exceeds VM limit</h4>\n<p>æŠ›å‡ºè¿™ç§å¼‚å¸¸çš„åŸå› æ˜¯â€œè¯·æ±‚çš„æ•°ç»„å¤§å°è¶…è¿‡ JVM é™åˆ¶â€ï¼Œåº”ç”¨ç¨‹åºå°è¯•åˆ†é…ä¸€ä¸ªè¶…å¤§çš„æ•°ç»„ã€‚æ¯”å¦‚ç¨‹åºå°è¯•åˆ†é… 128M çš„æ•°ç»„ï¼Œä½†æ˜¯å †æœ€å¤§ 100Mï¼Œä¸€èˆ¬è¿™ä¸ªä¹Ÿæ˜¯é…ç½®é—®é¢˜ï¼Œæœ‰å¯èƒ½ JVM å †è®¾ç½®å¤ªå°ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ç¨‹åºçš„ bugï¼Œæ˜¯ä¸æ˜¯åˆ›å»ºäº†è¶…å¤§æ•°ç»„ã€‚</p>\n<h4>java.lang.OutOfMemoryError: MetaSpace</h4>\n<p>JVM å…ƒç©ºé—´çš„å†…å­˜åœ¨æœ¬åœ°å†…å­˜ä¸­åˆ†é…ï¼Œä½†æ˜¯å®ƒçš„å¤§å°å—å‚æ•° MaxMetaSpaceSize çš„é™åˆ¶ã€‚å½“å…ƒç©ºé—´å¤§å°è¶…è¿‡ MaxMetaSpaceSize æ—¶ï¼ŒJVM å°†æŠ›å‡ºå¸¦æœ‰ MetaSpace å­—æ ·çš„ OutOfMemoryErrorã€‚è§£å†³åŠæ³•æ˜¯åŠ å¤§ MaxMetaSpaceSize å‚æ•°çš„å€¼ã€‚</p>\n<h4>java.lang.OutOfMemoryError: Request size bytes for reason. Out of swap space</h4>\n<p>å½“æœ¬åœ°å †å†…å­˜åˆ†é…å¤±è´¥æˆ–è€…æœ¬åœ°å†…å­˜å¿«è¦è€—å°½æ—¶ï¼ŒJava HotSpot VM ä»£ç ä¼šæŠ›å‡ºè¿™ä¸ªå¼‚å¸¸ï¼ŒVM ä¼šè§¦å‘â€œè‡´å‘½é”™è¯¯å¤„ç†æœºåˆ¶â€ï¼Œå®ƒä¼šç”Ÿæˆâ€œè‡´å‘½é”™è¯¯â€æ—¥å¿—æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«å´©æºƒæ—¶çº¿ç¨‹ã€è¿›ç¨‹å’Œæ“ä½œç³»ç»Ÿçš„æœ‰ç”¨ä¿¡æ¯ã€‚å¦‚æœç¢°åˆ°æ­¤ç±»å‹çš„ OutOfMemoryErrorï¼Œä½ éœ€è¦æ ¹æ® JVM æŠ›å‡ºçš„é”™è¯¯ä¿¡æ¯æ¥è¿›è¡Œè¯Šæ–­ï¼›æˆ–è€…ä½¿ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„ DTrace å·¥å…·æ¥è·Ÿè¸ªç³»ç»Ÿè°ƒç”¨ï¼Œçœ‹çœ‹æ˜¯ä»€ä¹ˆæ ·çš„ç¨‹åºä»£ç åœ¨ä¸æ–­åœ°åˆ†é…æœ¬åœ°å†…å­˜ã€‚</p>\n<h4>java.lang.OutOfMemoryError: Unable to create native threads</h4>\n<ol>\n <li>Java ç¨‹åºå‘ JVM è¯·æ±‚åˆ›å»ºä¸€ä¸ªæ–°çš„ Java çº¿ç¨‹ã€‚</li>\n <li>JVM æœ¬åœ°ä»£ç ï¼ˆNative Codeï¼‰ä»£ç†è¯¥è¯·æ±‚ï¼Œé€šè¿‡è°ƒç”¨æ“ä½œç³»ç»Ÿ API å»åˆ›å»ºä¸€ä¸ªæ“ä½œç³»ç»Ÿçº§åˆ«çš„çº¿ç¨‹ Native Threadã€‚</li>\n <li>æ“ä½œç³»ç»Ÿå°è¯•åˆ›å»ºä¸€ä¸ªæ–°çš„ Native Threadï¼Œéœ€è¦åŒæ—¶åˆ†é…ä¸€äº›å†…å­˜ç»™è¯¥çº¿ç¨‹ï¼Œæ¯ä¸€ä¸ª Native Thread éƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ ˆï¼Œçº¿ç¨‹æ ˆçš„å¤§å°ç”± JVM å‚æ•°<code>-Xss</code>å†³å®šã€‚</li>\n <li>ç”±äºå„ç§åŸå› ï¼Œæ“ä½œç³»ç»Ÿåˆ›å»ºæ–°çš„çº¿ç¨‹å¯èƒ½ä¼šå¤±è´¥ï¼Œä¸‹é¢ä¼šè¯¦ç»†è°ˆåˆ°ã€‚</li>\n <li>JVM æŠ›å‡ºâ€œjava.lang.OutOfMemoryError: Unable to create new native threadâ€é”™è¯¯ã€‚</li>\n</ol>\n<p>è¿™é‡Œåªæ˜¯æ¦‚è¿°åœºæ™¯ï¼Œå¯¹äºç”Ÿäº§åœ¨çº¿æ’æŸ¥åç»­ä¼šé™†ç»­æ¨å‡ºï¼Œå—é™äºç¯‡å¹…ä¸å†å±•å¼€ã€‚<strong>å…³æ³¨ã€Œç å“¥å­—èŠ‚ã€ç»™ä½ ç¡¬è´§æ¥å•ƒï¼</strong></p>\n<h2>æ€»ç»“</h2>\n<p>å›é¡¾ Tomcat æ€»ç»“æ¶æ„è®¾è®¡ï¼Œè¯¦ç»†æ‹†è§£ Tomcat å¦‚ä½•å¤„ç†é«˜å¹¶å‘è¿æ¥è®¾è®¡ã€‚å¹¶ä¸”åˆ†äº«äº†å¦‚ä½•é«˜æ•ˆé˜…è¯»å¼€æºæ¡†æ¶æºç æ€è·¯ï¼Œè®¾è®¡æ¨¡å¼ã€å¹¶å‘ç¼–ç¨‹åŸºç¡€æ˜¯é‡ä¸­ä¹‹é‡ï¼Œè¯»è€…æœ‹å‹å¯ä»¥ç¿»é˜…å†å²ã€Œç å“¥å­—èŠ‚ã€çš„å†å²æ–‡ç« å­¦ä¹ ã€‚</p>\n<h3>æ¨èé˜…è¯»</h3>\n<p><a href=\"https://mp.weixin.qq.com/s/fU5Jj9tQvNTjRiT9grm6RA\" rel=\"nofollow noreferrer\">Tomcat æ¶æ„è§£æåˆ°å·¥ä½œå€Ÿé‰´</a></p>\n<p><a href=\"https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzU3NDkwMjAyOQ==&amp;action=getalbum&amp;album_id=1351452628844363777&amp;subscene=159&amp;subscene=&amp;scenenote=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FAr_FZ6ck_WEjr9ia9bjmcQ#wechat_redirect\" rel=\"nofollow noreferrer\">è®¾è®¡æ¨¡å¼ä¸“è¾‘</a></p>\n<p><a href=\"http://mp.weixin.qq.com/mp/homepage?__biz=MzU3NDkwMjAyOQ==&amp;hid=7&amp;sn=660e8728f9eb24248cc7953796dbe773&amp;scene=18#wechat_redirect\" rel=\"nofollow noreferrer\">å¹¶å‘ç¼–ç¨‹å®æˆ˜</a></p>\n<p>æ‹†è§£ Tomcat æ ¸å¿ƒç»„ä»¶ï¼Œå»ä½“ä¼š Tomcat å¦‚ä½•é¢å‘æ¥å£è®¾è®¡ã€è½å®å•ä¸€èŒè´£çš„è®¾è®¡å“²å­¦æ€æƒ³ã€‚æ¥ç€æ¦‚æ‹¬äº† è¿æ¥å™¨æ¶‰åŠåˆ°çš„ I/O æ¨¡å‹ï¼Œå¹¶å¯¹ä¸åŒçš„ I/O æ¨¡å‹è¿›è¡Œäº†è¯¦è§£ï¼Œæ¥ç€çœ‹ Tomcat å¦‚ä½•å®ç° NIOï¼Œå¦‚ä½•è‡ªå®šä¹‰çº¿ç¨‹æ± ä»¥åŠé˜Ÿåˆ—å®ç°é«˜å¹¶å‘è®¾è®¡ï¼Œæœ€åç®€å•åˆ†äº«å¸¸è§çš„ OOM åœºæ™¯ä»¥åŠè§£å†³æ€è·¯ï¼Œé™äºç¯‡å¹…ä¸å†è¯¦ç»†å±•å¼€ï¼Œå…³æ³¨ã€Œç å“¥å­—èŠ‚ã€åç»­ä¼šåˆ†äº«å„ç§çº¿ä¸Šæ•…éšœæ’æŸ¥è°ƒä¼˜æ€è·¯ï¼Œæ•¬è¯·æœŸå¾…â€¦...</p>\n<p>æœ‰ä»»ä½•ç–‘é—®æˆ–è€…è®¡æ•°æ¢è®¨å¯ä»¥<strong>åŠ ä¸ªäººå¾®ä¿¡ï¼šMageByte1024</strong>ï¼Œä¸€èµ·å­¦ä¹ è¿›æ­¥ã€‚</p>\n<p>ä¹Ÿå¯ä»¥é€šè¿‡å…¬ä¼—å·èœå•åŠ å…¥æŠ€æœ¯ç¾¤ï¼Œé‡Œé¢æœ‰<strong>é˜¿é‡Œã€è…¾è®¯</strong>çš„å¤§ä½¬ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000022678951\" alt=\"ç å“¥å­—èŠ‚\" title=\"ç å“¥å­—èŠ‚\" /></p>\n<p><strong>ç¼–å†™æ–‡ç« ä¸æ˜“ï¼Œå¦‚æœé˜…è¯»åè§‰å¾—æœ‰ç”¨ï¼Œå¸Œæœ›å…³æ³¨ã€Œç å“¥å­—èŠ‚ã€å…¬ä¼—å·ï¼Œç‚¹å‡»ã€Œåˆ†äº«ã€ã€ã€Œç‚¹èµã€ã€ã€Œåœ¨çœ‹ã€æ˜¯æœ€å¤§çš„é¼“åŠ±ã€‚</strong></p>","descriptionType":"html","publishedDate":"Mon, 17 Aug 2020 07:22:08 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/remote/1460000023657732","linkMd5":"9569faa8acc0e079a1c10828ff9a417e","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn6@2020_3/2020/08/24/23-08-23-128_3e079a22ca630726.webp","destWidth":800,"destHeight":406,"sourceBytes":111116,"destBytes":30308,"author":"ç å“¥å­—èŠ‚","articleImgCdnMap":{"https://segmentfault.com/img/remote/1460000023657732":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn6@2020_3/2020/08/24/23-08-23-128_3e079a22ca630726.webp","https://segmentfault.com/img/remote/1460000023657733":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn83@2020_5/2020/08/24/23-08-37-631_8c8436a6031ce5b2.webp","https://segmentfault.com/img/remote/1460000023657734":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn80@2020_6/2020/08/24/23-08-37-888_0219a4c09525c3f3.webp","https://segmentfault.com/img/remote/1460000023657735":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn76@2020_4/2020/08/24/23-08-35-718_de19cb27823856b5.webp","https://segmentfault.com/img/remote/1460000023657737":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn7@2020_6/2020/08/24/23-08-38-067_37c2c4464d2306d7.webp","https://segmentfault.com/img/remote/1460000023657736":"https://cdn.jsdelivr.net/gh/myreaderx32/cdn71@2020_1/2020/08/24/23-08-36-091_0b3e500f3a14db18.webp","https://segmentfault.com/img/remote/1460000023657739":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn100@2020_1/2020/08/24/23-08-36-884_490e6b9cc76ef541.webp","https://segmentfault.com/img/remote/1460000023657738":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn4@2020_1/2020/08/24/23-08-37-700_47af21c1d8fe1b43.webp","https://segmentfault.com/img/remote/1460000023657740":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn95@2020_2/2020/08/24/23-08-37-201_1d04b2d366acdb5c.webp","https://segmentfault.com/img/remote/1460000023657741":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn92@2020_4/2020/08/24/23-08-36-207_577394f1b53dd12a.webp","https://segmentfault.com/img/remote/1460000023465591":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn42@2020_4/2020/08/24/23-08-31-138_5d24db7b7f08f9c8.webp","https://segmentfault.com/img/remote/1460000023657742":"https://cdn.jsdelivr.net/gh/myreaderx23/cdn88@2020_6/2020/08/24/23-08-37-616_aaa501e20ba9eee8.webp","https://segmentfault.com/img/remote/1460000022678951":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn74@2020_4/2020/08/24/23-08-42-545_437227b461a5c9c8.webp"},"publishedOrCreatedDate":1598310388564},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"å¦‚ä½•å¿«é€Ÿæ„å»ºReactç»„ä»¶åº“","link":"https://segmentfault.com/a/1190000023676547","description":"<h3>å‰è¨€</h3>\n<blockquote>\n ä¿—è¯è¯´ï¼šâ€œéº»é›€è™½å°ï¼Œäº”è„ä¿±å…¨â€ï¼Œæ­å»ºä¸€ä¸ªç»„ä»¶åº“ï¼ŒçŸ¥ä¹‹ééš¾ï¼Œè¡Œä¹‹ä¸æ˜“ï¼Œæ¶‰åŠåˆ°çš„æŠ€æœ¯æ–¹æ–¹é¢é¢ï¼ŒçŠ¹å¦‚æµ·é¢é£å¹³æµªé™ï¼Œå®åˆ™æš—ç¤é™©æ»©ï¼Œå¤„å¤„æƒŠé™©ï½\n</blockquote>\n<p>ç›®å‰å›¢é˜Ÿå†…å·²ç»æœ‰è¾ƒä¸ºæˆç†Ÿçš„ Vue æŠ€æœ¯æ ˆçš„ <a href=\"http://nutui.jd.com/#/index\" rel=\"nofollow noreferrer\">NutUI ç»„ä»¶åº“</a>[1] å’Œ React æŠ€æœ¯æ ˆçš„ <a href=\"http://yep-react.jd.com/#/\" rel=\"nofollow noreferrer\">yep-react ç»„ä»¶åº“</a>[2]ã€‚ç„¶è€Œè¿™äº›ç»„ä»¶åº“å¤§éƒ½ä»é›¶å¼€å§‹æ­å»ºï¼ŒåŒ…æ‹¬ Webpack çš„ç¹æ‚é…ç½®ï¼ŒMarkdown æ–‡ä»¶è½¬ Vue æ–‡ä»¶åŠŸèƒ½çš„å¼€å‘ï¼Œå•å…ƒæµ‹è¯•åŠŸèƒ½çš„å¼€å‘ã€æŒ‰éœ€åŠ è½½çš„ Babel æ’ä»¶å¼€å‘ç­‰ç­‰ï¼Œå®Œæˆæ•´ä¸ªç»„ä»¶åº“é¡¹ç›®å®å±ä¸æ˜“ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæµ©å¤§çš„å·¥ç¨‹ã€‚å¦‚æœæˆ‘ä»¬æƒ³å¿«é€Ÿæ­å»ºä¸€ä¸ªç»„ä»¶åº“ï¼Œå¤§å¯ä¸å¿…å¦‚æ­¤è€—è´¹ç²¾åŠ›ï¼Œå¯ä»¥å€ŸåŠ©ä¸šå†…ä¸“ä¸šçš„ç›¸å…³åº“ï¼Œç»è¿‡æ‹¼è£…è°ƒè¯•ï¼Œå¿«é€Ÿå®ç°ä¸€ä¸ªç»„ä»¶åº“ã€‚<br>æœ¬ç¯‡æ–‡ç« å°±æ¥ç»™å¤§å®¶ä»‹ç»ä¸€ä¸‹ä½¿ç”¨ create-react-app è„šæ‰‹æ¶ã€docz æ–‡æ¡£ç”Ÿæˆå™¨ã€node-sassã€ç»“åˆ Netlify éƒ¨ç½²é¡¹ç›®çš„æ•´ä¸ªå¼€å‘ç»„ä»¶åº“çš„æµç¨‹ï¼Œæœ¬ç€åŒ…æ•™åŒ…ä¼šï¼Œä¸ä¼šæ²¡æœ‰é€€è´¹çš„åŸåˆ™ï¼Œæ¥ä¸€åœºæ‰‹æ‘¸æ‰‹å¼æ•™å­¦ï¼Œè¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬è¿›å…¥æ­£é¢˜ï¼š</br></p>\n<p>é¦–å…ˆçœ‹ä¸€ä¸‹ç»„ä»¶åº“çš„æœ€ç»ˆæ•ˆæœï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023676550\" alt=\"ç»„ä»¶åº“ç•Œé¢\" title=\"ç»„ä»¶åº“ç•Œé¢\" /></p>\n<p>æœ¬æ–‡å°†ä»ä»¥ä¸‹æ­¥éª¤ä»‹ç»å¦‚ä½•æ­å»ºä¸€ä¸ª React ç»„ä»¶åº“ï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023676551\" alt=\"æ–‡ç« ç»“æ„\" title=\"æ–‡ç« ç»“æ„\" /></p>\n<h3>ä¸€ã€æ„å»ºæœ¬åœ°å¼€å‘ç¯å¢ƒ</h3>\n<p>å¼€å‘ä¸€ä¸ªç»„ä»¶åº“çš„é¦–è¦æ­¥éª¤å°±æ˜¯è°ƒè¯•æœ¬åœ° React ç¯å¢ƒï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨ React å®˜æ–¹è„šæ‰‹æ¶ <code>create-react-app</code>ï¼Œå¯ä»¥çœå»ä»åº•å±‚é…ç½® Webpack+TypeScript+React çš„æ‘§æ®‹ï¼š</p>\n<p><strong>1ã€ä½¿ç”¨ create-react-app åˆå§‹åŒ–è„šæ‰‹æ¶ï¼Œå¹¶ä¸”å®‰è£… TypeScript</strong></p>\n<p><code>npx create-react-app myapp --typescript</code></p>\n<p>æ³¨æ„ä½¿ç”¨ node ä¸ºè¾ƒé«˜ç‰ˆæœ¬ &gt;10.15.0</p>\n<p><strong>2ã€é…ç½® eslint è¿›è¡Œæ ¼å¼åŒ–</strong></p>\n<p>ç”±äºå®‰è£…æœ€æ–°çš„ create-react-app ç»“åˆ VScode ç¼–è¾‘å™¨å³å¯æ”¯æŒ eslitï¼Œä½†æ˜¯éœ€è¦åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­è¦æ·»åŠ  .env è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œè®¾ç½® <code>EXTEND_ESLINT=true</code> è¿™æ ·æ‰ä¼šå¯ç”¨ eslint æ£€æµ‹ï¼Œæ³¨æ„è¦ <strong>é‡å¯ vscode</strong></p>\n<p><strong>3ã€ç»„ä»¶åº“ç³»ç»Ÿæ–‡ä»¶ç»“æ„</strong></p>\n<p>æ–°å»º styles æ–‡ä»¶å¤¹ï¼ŒåŒ…å«äº†åŸºæœ¬æ ·å¼æ–‡ä»¶ï¼Œç»“æ„å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"js\">|-styles\n| |-variables.scss // å„ç§å˜é‡ä»¥åŠå¯é…ç½®è®¾ç½®\n| |-mixins.scss    // å…¨å±€ mixins\n| |-index.scss    // å¼•å…¥å…¨éƒ¨çš„ scss æ–‡ä»¶ï¼Œå‘å¤–æŠ›å‡ºæ ·å¼å…¥å£\n|-components\n| |-Button\n|   |-button.scss // ç»„ä»¶çš„å•ç‹¬æ ·å¼\n|   |-button.mdx // ç»„ä»¶çš„æ–‡æ¡£\n|   |-button.tsx // ç»„ä»¶çš„æ ¸å¿ƒä»£ç \n|   |-button.test.tsx // ç»„ä»¶çš„å•å…ƒæµ‹è¯•æ–‡ä»¶\n|  |-index.tsx  // ç»„ä»¶å¯¹å¤–å…¥å£</code></pre>\n<p><strong>4ã€å®‰è£… node-sass å¤„ç†å™¨</strong> </p>\n<p>å®‰è£… node-sass ç”¨æ¥ç¼–è¯‘ SCSS æ ·å¼æ–‡ä»¶ï¼š<code>npm i node-sass -D</code></p>\n<p>è¿™æ ·æœ€åŸºæœ¬çš„ react å¼€å‘ç¯å¢ƒå°±å®Œæˆäº†ï¼Œå¯ä»¥å¼€å¿ƒçš„å¼€å‘ç»„ä»¶äº†ã€‚</p>\n<h3>äºŒã€ç»„ä»¶åº“æ‰“åŒ…ç¼–è¯‘</h3>\n<p>æœ¬åœ°è°ƒè¯•å®Œç»„ä»¶åº“ä¹‹åï¼Œéœ€è¦æ‰“åŒ…å‹ç¼©ç¼–è¯‘ä»£ç ï¼Œä¾›å…¶ä»–ç”¨æˆ·ä½¿ç”¨ï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨çš„ TypeScript ç¼–å†™çš„ä»£ç ï¼Œæ‰€ä»¥ä½¿ç”¨ Typescript æ¥ç¼–è¯‘é¡¹ç›®ï¼š<br>é¦–å…ˆåœ¨æ¯ä¸ªç»„ä»¶ä¸­æ–°å»º index.tsx æ–‡ä»¶ï¼š</br></p>\n<pre><code class=\"js\">import Button from './button'\nexport default Button </code></pre>\n<p>ä¿®æ”¹ index.tsx æ–‡ä»¶ï¼Œå¯¼å…¥å¯¼å‡ºå„ä¸ªæ¨¡å—</p>\n<pre><code class=\"js\">export { default as Button } from './components/Button'</code></pre>\n<p>åœ¨æ ¹ç›®å½•æ–°å»º tsconfig.build.jsonï¼Œå¯¹ .tsx æ–‡ä»¶è¿›è¡Œç¼–è¯‘ï¼š</p>\n<pre><code class=\"js\">{\n  \"compilerOptions\": {\n    \"outDir\": \"dist\",// ç”Ÿæˆç›®å½•\n    \"module\": \"esnext\",// æ ¼å¼\n    \"target\": \"es5\",// ç‰ˆæœ¬\n    \"declaration\": true,// ä¸ºæ¯ä¸€ä¸ª ts æ–‡ä»¶ç”Ÿæˆ .d.ts æ–‡ä»¶\n    \"jsx\": \"react\",\n    \"moduleResolution\":\"Node\",// è§„å®šå¯»æ‰¾å¼•å…¥æ–‡ä»¶çš„è·¯å¾„ä¸º node æ ‡å‡†\n    \"allowSyntheticDefaultImports\": true,\n  },\n  \"include\": [// è¦ç¼–è¯‘å“ªäº›æ–‡ä»¶\n    \"src\"\n  ],\n  \"exclude\": [// æ’é™¤ä¸éœ€è¦ç¼–è¯‘çš„æ–‡ä»¶\n    \"src/**/*.test.tsx\",\n    \"src/**/*.stories.tsx\",\n    \"src/setupTests.ts\",\n  ]\n}</code></pre>\n<p>å¯¹äºæ ·å¼æ–‡ä»¶ï¼Œä½¿ç”¨ node-sass ç¼–è¯‘ SCSSï¼ŒæŠ½å–æ‰€æœ‰ SCSS æ–‡ä»¶ç”Ÿæˆ CSS æ–‡ä»¶ï¼š</p>\n<pre><code class=\"js\">\"script\":{\n    \"build-css\": \"node-sass ./src/styles/index.scss ./dist/index.css\",\n}</code></pre>\n<p>å¹¶ä¸”ä¿®æ”¹ build å‘½ä»¤ï¼š</p>\n<pre><code class=\"js\">\"script\":{\n    \"clean\": \"rimraf ./dist\",// è·¨å¹³å°çš„å…¼å®¹\n    \"build\": \"npm run clean &amp;&amp; npm run build-ts &amp;&amp; npm run build-css\",\n}</code></pre>\n<p>è¿™æ ·ï¼Œæ‰§è¡Œ <code>npm run build</code> ä¹‹åï¼Œå°±å¯ä»¥ç”Ÿæˆå¯¹åº”çš„ç»„ä»¶ JS å’Œ CSS æ–‡ä»¶ï¼Œä¸ºåé¢ä½¿ç”¨è€…æŒ‰éœ€åŠ è½½å’Œéƒ¨ç½²åˆ° npm ä¸Šæä¾›å‡†å¤‡ã€‚</p>\n<h3>ä¸‰ã€æœ¬åœ°è°ƒè¯•ç»„ä»¶åº“</h3>\n<p>æœ¬åœ°å®Œæˆç»„ä»¶åº“çš„å¼€å‘ä¹‹åï¼Œåœ¨å‘å¸ƒåˆ° npm å‰ï¼Œéœ€è¦å…ˆåœ¨æœ¬åœ°è°ƒè¯•ï¼Œé¿å…å¸¦ç€é—®é¢˜ä¸Šä¼ åˆ° npm ä¸Šã€‚è¿™æ—¶å°±éœ€è¦ä½¿ç”¨ npm link å‡ºé©¬äº†ã€‚</p>\n<p><strong>ä»€ä¹ˆæ˜¯ npm link</strong></p>\n<p>åœ¨æœ¬åœ°å¼€å‘ npm æ¨¡å—çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ npm link å‘½ä»¤ï¼Œå°† npm æ¨¡å—é“¾æ¥åˆ°å¯¹åº”çš„è¿è¡Œé¡¹ç›®ä¸­å»ï¼Œæ–¹ä¾¿åœ°å¯¹æ¨¡å—è¿›è¡Œè°ƒè¯•å’Œæµ‹è¯•ã€‚</p>\n<p><strong>ä½¿ç”¨æ–¹æ³•</strong></p>\n<p>å‡è®¾ç»„ä»¶åº“æ˜¯ reactui æ–‡ä»¶å¤¹ï¼Œè¦åœ¨æœ¬åœ°çš„ demo é¡¹ç›®ä¸­ä½¿ç”¨ç»„ä»¶ã€‚åˆ™åœ¨ç»„ä»¶åº“ä¸­ï¼ˆè¦è¢« link çš„åœ°æ–¹ï¼‰æ‰§è¡Œ <code>npm link</code>ï¼Œåˆ™ç”Ÿæˆä»æœ¬æœºçš„ <code>node_modules/reactui</code> åˆ° <code> ç»„ä»¶åº“çš„è·¯å¾„ / reactui</code> ä¸­çš„æ˜ å°„å…³ç³»ã€‚<br>ç„¶ååœ¨è¦ä½¿ç”¨ç»„ä»¶åº“çš„æ–‡ä»¶å¤¹ demo ä¸­æ‰§è¡Œ <code>npm link reactui</code> åˆ™ç”Ÿæˆä»¥ä¸‹å¯¹åº”é“¾æ¡ï¼š</br></p>\n<p>åœ¨è¦ä½¿ç”¨ç»„ä»¶çš„æ–‡ä»¶å¤¹ demo ä¸­ -[æ˜ å°„åˆ°]â€”&gt; æœ¬æœºçš„ <code>node_modules/reactui</code> â€”[æ˜ å°„åˆ°]-&gt; å¼€å‘ç»„ä»¶åº“ reactui çš„æ–‡ä»¶å¤¹ /reactui</p>\n<p>éœ€è¦ä¿®æ”¹ç»„ä»¶åº“çš„ package.json æ–‡ä»¶æ¥è®¾ç½®å…¥å£ï¼š</p>\n<pre><code class=\"js\">{\n  \"name\": \"reactui\",\n  \"main\": \"dist/index.js\",\n  \"module\": \"dist/index.js\",\n  \"types\": \"dist/index.d.ts\",\n}</code></pre>\n<p>ç„¶ååœ¨è¦ä½¿ç”¨ç»„ä»¶çš„ demo é¡¹ç›®çš„ä¾èµ–ä¸­æ·»åŠ ï¼š</p>\n<pre><code class=\"js\">\"dependencies\":{\n  \"reactui\":\"0.0.1\"\n}</code></pre>\n<p>æ³¨æ„ï¼Œæ­¤æ—¶å¹¶ä¸ç”¨å®‰è£…ä¾èµ–ï¼Œä¹‹æ‰€ä»¥å†™ä¸Šè¯¥ä¾èµ–ï¼Œæ˜¯ä¸ºäº†æ–¹ä¾¿åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„æ—¶å€™å¯ä»¥æœ‰ä»£ç æç¤ºåŠŸèƒ½ã€‚<br>ç„¶ååœ¨ demo é¡¹ç›®ä¸­ä½¿ç”¨ï¼š</br></p>\n<pre><code class=\"js\">import { Button } from 'reactui'</code></pre>\n<p>åœ¨ index.tsx ä¸­å¼•å…¥ CSS æ–‡ä»¶</p>\n<pre><code class=\"js\">import 'reactui/build/index.css'</code></pre>\n<p>æ­£å½“ä»¥ä¸ºå¤§åŠŸå‘Šæˆçš„æ—¶å€™ï¼Œä¸‹é¢è¿™ä¸ªæŠ¥é”™çŠ¹å¦‚ä¸€ç›†å†·æ°´ä»å¤©è€Œé™ï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023676552\" alt=\"é”™è¯¯æç¤º\" title=\"é”™è¯¯æç¤º\" /></p>\n<p>ç»è¿‡å„ç§é—®é¢˜æ’æŸ¥ï¼Œåœ¨ <a href=\"https://reactjs.org/warnings/invalid-hook-call-warning.html\" rel=\"nofollow noreferrer\">react å®˜æ–¹ç½‘ç«™</a>[3] ä¸ŠæŸ¥åˆ°ä»¥ä¸‹è¯´æ³•ï¼š</p>\n<blockquote>\n ğŸ”´ Do not call Hooks in class components.\n <br>ğŸ”´ Do not call in event handlers.<br>ğŸ”´ Do not call Hooks inside functions passed to useMemo, useReducer, or useEffect.</br></br>\n</blockquote>\n<p>è¯´çš„å¾ˆæ˜ç™½ï¼š</p>\n<p>åŸå›  1: React å’Œ React DOM çš„ç‰ˆæœ¬ä¸ä¸€æ ·çš„é—®é¢˜<br>åŸå›  2: å¯èƒ½æ‰“ç ´äº† Hooks çš„è§„åˆ™<br>åŸå›  3: åœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨äº†å¤šä¸ªç‰ˆæœ¬çš„ React</br></br></p>\n<p>å®˜ç½‘å¾ˆè´´å¿ƒï¼Œç»™å‡ºäº†è§£å†³æ–¹æ³•ï¼š</p>\n<blockquote>\n This problem can also come up when you use npm link or an equivalent. In that case, your bundler might â€œseeâ€ two Reacts â€” one in application folder and one in your library folder. Assuming myapp and mylib are sibling folders, one possible fix is to run npm link ../myapp/node_modules/react from mylib. This should make the library use the applicationâ€™s React copy.\n</blockquote>\n<p>æ ¸å¿ƒæ€æƒ³åœ¨ç»„ä»¶åº“ä¸­ä½¿ç”¨ <code>npm link</code> æ–¹å¼ï¼Œå¼•åˆ° demo é¡¹ç›®ä¸­çš„ reactï¼› æ‰€ä»¥åœ¨ç»„ä»¶åº“ä¸­æ‰§è¡Œï¼š <code>npm link ../demo/node_modules/react</code></p>\n<p>å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p>\n<ol>\n <li>åœ¨ä»£ç åº“ reactui ä¸­æ‰§è¡Œ <code>npm link</code></li>\n <li>åœ¨ä»£ç åº“ reactui ä¸­æ‰§è¡Œ <code>npm link ../../demo/node_modules/react</code></li>\n <li>åœ¨é¡¹ç›® demo ä¸­æ‰§è¡Œ <code>npm link reactui</code></li>\n</ol>\n<p>å¦‚æ­¤å¯ä»¥è§£å†³ä¸Šé¢ react å†²çªé—®é¢˜ï¼›äºæ˜¯å¯ä»¥åœ¨æœ¬åœ°ä¸€è¾¹å¿«ä¹çš„è°ƒè¯•ç»„ä»¶åº“ï¼Œä¸€è¾¹å¿«ä¹çš„åœ¨ä½¿ç”¨ç»„ä»¶çš„é¡¹ç›®ä¸­çœ‹åˆ°æœ€ç»ˆæ•ˆæœäº†ã€‚</p>\n<h3>å››ã€ç»„ä»¶åº“å‘å¸ƒåˆ° npm</h3>\n<p><strong>è¯¥è¿‡ç¨‹ä¸€å®šè¦æ³¨æ„ä½¿ç”¨çš„æ˜¯ npm æºï¼ï¼[éå¸¸é‡è¦]</strong></p>\n<p>é¦–å…ˆç¡®å®šè‡ªå·±æ˜¯å¦å·²ç»ç™»å½•äº† npmï¼š</p>\n<pre><code class=\"js\">npm adduser\n// å¡«å…¥ç”¨æˆ·åï¼›å¯†ç ï¼›email\nnpm whoami // æŸ¥çœ‹å½“å‰ç™»å½•å</code></pre>\n<p>ä¿®æ”¹ç»„ä»¶åº“çš„ package.json ï¼Œæ³¨æ„ files é…ç½®ï¼›ä»¥åŠ dependencies æ–‡ä»¶çš„åŒ–ç®€:<br>react ä¾èµ–åŸæœ¬æ˜¯è¦æ”¾åœ¨ dependencies ä¸­çš„ï¼Œä½†æ˜¯å¯èƒ½ä¼šå’Œç”¨æˆ·å®‰è£…çš„ react ç‰ˆæœ¬å†²çªï¼Œæ‰€ä»¥æ”¾åœ¨äº† devDependencies ä¸­ï¼Œä½†æ˜¯è¿™æ ·è¯ç”¨æˆ·å¦‚æœæ²¡æœ‰å®‰è£… react åˆ™æ— æ³•ä½¿ç”¨ç»„ä»¶åº“ï¼Œæ‰€ä»¥è¦åœ¨ peerDependencies ä¸­å®šä¹‰å‰ç½®ä¾èµ– peerDependenciesï¼Œå‘Šè¯‰ç”¨æˆ· react å’Œ react-dom æ˜¯å¿…è¦çš„å‰ç½®ä¾èµ–:</br></p>\n<pre><code class=\"js\">\"main\": \"dist/index.js\",\n\"module\": \"dist/index.js\",\n\"types\": \"dist/index.d.ts\",\n\"files\": [ // æŠŠå“ªäº›æ–‡ä»¶ä¸Šä¼ åˆ° npm\n  \"dist\"\n],\n\"dependencies\": {  // æ‰§è¡Œ npm i çš„æ—¶å€™ä¼šå®‰è£…è¿™äº›ä¾èµ–åˆ° node_modules ä¸­\n  \"axios\": \"^0.19.1\",// å‘é€è¯·æ±‚\n  \"classnames\": \"^2.2.6\",//\n  \"react-transition-group\": \"^4.3.0\"\n},\n\"peerDependencies\": { // é‡è¦ï¼ï¼ï¼Œæé†’ä½¿ç”¨è€…ï¼Œç»„ä»¶åº“çš„æ ¸å¿ƒä¾èµ–ï¼Œå¿…é¡»å…ˆå®‰è£…è¿™äº›ä¾èµ–æ‰èƒ½ä½¿ç”¨\n  \"react\": \"&gt;=16.8.0\",  // åœ¨ 16.8 ä¹‹å æ‰å¼•å…¥äº† hooks\n  \"react-dom\": \"&gt;=16.8.0\"\n}</code></pre>\n<p>å¥½äº†ï¼Œæ•´ä¸ªç»„ä»¶åº“ç»è¿‡ä¸Šè¿°è¿‡ç¨‹ï¼ŒåŸºæœ¬ä¸Šå„ä¸ªåŠŸèƒ½å·²ç»æœ‰äº†ï¼ŒæåŠä¸€å¥ï¼šç”±äºç»„ä»¶åº“ä½¿ç”¨çš„æ˜¯ create-react-app è„šæ‰‹æ¶ï¼Œæœ€æ–°çš„ç‰ˆæœ¬å·²ç»é›†æˆäº†å•å…ƒæµ‹è¯•åŠŸèƒ½ã€‚è¿˜æœ‰é…ç½® husky ç­‰è§„èŒƒä»£ç æäº¤ï¼Œåœ¨è¿™é‡Œä¸åœ¨åšèµ˜è¿°ï¼Œè¯»è€…å¯ä»¥è‡ªè¡Œé…ç½®ã€‚</p>\n<h3>äº”ã€ç”Ÿæˆè¯´æ˜æ–‡æ¡£</h3>\n<p>ç›®å‰ç”Ÿæˆè¯´æ˜æ–‡æ¡£è¾ƒå¥½çš„å·¥å…·æœ‰ <a href=\"https://storybook.js.org/\" rel=\"nofollow noreferrer\">storybook</a>[4]ã€<a href=\"https://www.docz.site/\" rel=\"nofollow noreferrer\">docz</a>[5] ç­‰å·¥å…·ï¼Œä¸¤è€…éƒ½æ˜¯å¾ˆä¼˜ç§€çš„æ–‡æ¡£ç”Ÿæˆå·¥å…·ï¼Œä½†æ˜¯å°ºæœ‰æ‰€çŸ­ï¼Œå¯¸æœ‰æ‰€é•¿ï¼Œç»è¿‡è®¤çœŸè°ƒç ”æ¯”è¾ƒï¼Œæœ€ç»ˆé€‰æ‹©äº† doczã€‚</p>\n<table>\n <thead>\n  <tr>\n   <th>å·¥å…·åç§°</th>\n   <th>åŒºåˆ«ä¸€</th>\n   <th>åŒºåˆ«äºŒ</th>\n  </tr>\n </thead>\n <tbody>\n  <tr>\n   <td>storybook</td>\n   <td>ä½¿ç”¨ç‰¹æœ‰çš„APIå¼€å‘æ–‡æ¡£è¯´æ˜ï¼Œå¯ä»¥å¼•å…¥markdownæ–‡ä»¶</td>\n   <td>ç”Ÿæˆæ–‡æ¡£çš„ç•Œé¢å¸¦æœ‰storybookçš„ç—•è¿¹è¾ƒå¤šä¸€äº›</td>\n  </tr>\n  <tr>\n   <td>docz</td>\n   <td>å®Œç¾çš„ç»“åˆäº†reactå’Œmarkdownè¯­æ³•å¼€å‘æ–‡æ¡£</td>\n   <td>ç”Ÿæˆçš„æ–‡æ¡£ç•Œé¢æ˜¯å¸¸è§„çš„æ–‡æ¡£ç•Œé¢</td>\n  </tr>\n </tbody>\n</table>\n<p><strong>1ã€ç¡®å®šé€‰å‹</strong></p>\n<p>1ï¼‰storybook çš„å¸¸ç”¨ç¼–è¯‘æ–‡æ¡£è§„èŒƒç›¸å¯¹ docz è€Œè¨€ï¼Œç•¥æœ‰ç¹ç</p>\n<p>storybook çš„ç¼–è¯‘æ–‡æ¡£è§„èŒƒå¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<pre><code class=\"js\">//çœç•¥ import å¼•å…¥çš„ä»£ç \nstoriesOf('Buttons', module)\n.addDecorator(storyFn =&gt; &lt;div style={{ textAlign: 'center' }}&gt;{storyFn()}&lt;/div&gt;)\n.add('with text', () =&gt; (\n&lt;Button onClick={action('clicked')}&gt;Hello Button111&lt;/Button&gt;\n),{\nnotes:{markdown}   // å°†ä¼šæ¸²æŸ“ markdown å†…å®¹\n}) </code></pre>\n<p>å¯¹æ¯” docz çš„å¼€å‘æ–‡æ¡£ï¼š</p>\n<pre><code class=\"markdown\"># Button ç»„ä»¶\n\nä½¿ç”¨æ–¹å¼å¦‚ä¸‹æ‰€ç¤ºï¼š\nimport { Playground, Props } from 'docz';\nimport Button from './index.tsx';\n\n## æŒ‰é’®ç»„ä»¶\n\n&lt;Playground&gt;\n    &lt;Button btnWidth=\"100\"&gt;æˆ‘æ˜¯æŒ‰é’®&lt;/Button&gt;\n&lt;/Playground&gt;\n\n** åŸºæœ¬å±æ€§ **\n\n| å±æ€§åç§° | è¯´æ˜ | é»˜è®¤å€¼ |\n|--|--|--|\n|btnType | æŒ‰é’®ç±»å‹ |--|</code></pre>\n<p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒMarkdown æ˜¯ä¸€ç§è½»é‡çº§æ ‡è®°è¯­è¨€ï¼Œå®ƒå…è®¸äººä»¬ä½¿ç”¨æ˜“è¯»æ˜“å†™çš„çº¯æ–‡æœ¬æ ¼å¼ç¼–å†™æ–‡æ¡£ã€‚å›¢é˜Ÿæˆå‘˜åœ¨å¼€å‘æ–‡æ¡£æ—¶ï¼Œç†Ÿç»ƒä½¿ç”¨ markdown è¯­æ³•ï¼Œå¼€å‘ docz æ–‡æ¡£çš„ mdx æ–‡ä»¶ï¼Œç»“åˆäº† Markdown å’Œ React è¯­æ³•ï¼Œç›¸æ¯” storybook è¦ä½¿ç”¨å¾ˆå¤šçš„ API æ¥ç¼–å†™æ–‡æ¡£çš„æ–¹å¼ï¼Œæ— ç–‘å‡å°‘äº†å¾ˆå¤šçš„å­¦ä¹  storybook è¯­æ³•çš„æˆæœ¬ã€‚</p>\n<p>2ï¼‰docz ç”Ÿæˆçš„æ–‡æ¡£æ ·å¼æ›´åŠ ç¬¦åˆä¸ªäººå®¡ç¾</p>\n<p>storybook ç”Ÿæˆçš„æ–‡æ¡£æ ·å¼ï¼Œå¸¦æœ‰ storybook çš„ç—•è¿¹æ›´ä¸ºä¸¥é‡ä¸€äº›ï¼Œ å…¶ç”Ÿæˆæ–‡æ¡£ç•Œé¢å¦‚ä¸‹æ‰€ç¤ºï¼š </p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023676555\" alt=\"storybookç”Ÿæˆç•Œé¢\" title=\"storybookç”Ÿæˆç•Œé¢\" /></p>\n<p>docz ç”Ÿæˆçš„æ–‡æ¡£å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023676553\" alt=\"doczç”Ÿæˆç•Œé¢\" title=\"doczç”Ÿæˆç•Œé¢\" /></p>\n<p>ç”±ä¸Šå›¾å¯¹æ¯”å¯ä»¥çœ‹å‡ºï¼Œdocz ç”Ÿæˆçš„ç•Œé¢æ›´åŠ ç®€ä»‹ï¼Œè¾ƒä¸ºå¸¸è§„ã€‚<br>ç»¼ä¸Šï¼Œç»“åˆé»˜è®¤æ–‡æ¡£å¼€å‘ä¹ æƒ¯å’Œç•Œé¢é£æ ¼ï¼Œæˆ‘é€‰æ‹©äº†doczï¼Œå½“ç„¶ä»è€…è§ä»ã€æ™ºè€…è§æ™ºï¼Œè¯»è€…ä¹Ÿå¯ä»¥ä½¿ç”¨åŒä¸ºä¼˜ç§€çš„ storybook å°è¯•ï¼Œè¿™éƒ½ä¸æ˜¯äº‹å„¿ï½</br></p>\n<p><strong>2ã€ä½¿ç”¨ docz å¼€å‘</strong></p>\n<p>ç¡®å®šäº† docz è¿›è¡Œå¼€å‘åï¼Œæ ¹æ®å®˜ç½‘ä»‹ç»ï¼Œåœ¨ create-react-app ç”Ÿæˆçš„ç»„ä»¶åº“ä¸­è¿›è¡Œäº†å®‰è£…é…ç½®ï¼š</p>\n<p><code>npm install docz</code></p>\n<p>å®‰è£…æˆåŠŸåï¼Œå°±ä¼šå‘ package.json æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®</p>\n<pre><code class=\"js\">{\n  \"scripts\": {\n    \"docz:dev\": \"docz dev\",\n    \"docz:build\": \"docz build\",\n    \"docz:serve\": \"docz build &amp;&amp; docz serve\"\n  }\n}</code></pre>\n<p>è¿™æ—¶è¿˜éœ€è¦åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ–°å»º doczrc.js æ–‡ä»¶ï¼Œå¯¹ docz è¿›è¡Œé…ç½®ï¼š</p>\n<pre><code class=\"js\">export default {\n  files: ['./src/components/**/*.mdx','./src/*.mdx'], \n  dest: 'docsite', // æ‰“åŒ… docz æ–‡æ¡£åˆ°å“ªä¸ªæ–‡ä»¶å¤¹ä¸‹\n  title: 'ç»„ä»¶åº“å·¦ä¸Šè§’æ ‡é¢˜',  // è®¾ç½®æ–‡æ¡£çš„æ ‡é¢˜\n  typescript: true, // æ”¯æŒ typescript è¯­æ³•\n  themesDir: 'theme', // ä¸»é¢˜æ ·å¼æ”¾åœ¨å“ªä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œåé¢ä¼šè®²\n  menu: ['å¿«é€Ÿä¸Šæ‰‹', 'ä¸šåŠ¡ç»„ä»¶'] // ç”Ÿæˆæ–‡æ¡£çš„å·¦ä¾§èœå•åˆ†ç±»\n}</code></pre>\n<p>å…¶ä¸­ files è§„å®šäº† docz å»å¯¹å“ªäº›æ–‡ä»¶è¿›è¡Œç¼–è¯‘ç”Ÿæˆæ–‡æ¡£ï¼Œå¦‚æœä¸åšé™åˆ¶ï¼Œä¼šæœç´¢é¡¹ç›®ä¸­æ‰€æœ‰çš„ mdã€mdx ä¸ºåç¼€çš„æ–‡ä»¶ç”Ÿæˆæ–‡æ¡£ï¼Œå› æ­¤æˆ‘åœ¨è¯¥æ–‡ä»¶ä¸­åšäº†èŒƒå›´é™åˆ¶ï¼Œé¿å…ä¸€äº› <code>README.md</code> æ–‡ä»¶ä¹Ÿè¢«ç”Ÿæˆåˆ°æ–‡æ¡£ä¸­ã€‚</p>\n<p>æ­¤å¤–è¿˜éœ€è¦æ³¨æ„åˆ°ä¸¤ç‚¹ï¼š</p>\n<p>1ã€<code>menu: ['å¿«é€Ÿä¸Šæ‰‹', 'ä¸šåŠ¡ç»„ä»¶']</code> å¯¹åº”ç€ç»„ä»¶åº“å·¦ä¾§çš„èœå•æ åˆ†ç±»ï¼Œæ¯”å¦‚åœ¨ mdx æ–‡æ¡£ä¸­åœ¨æœ€ä¸Šé¢è®¾ç½®ç»„ä»¶æ‰€å±çš„èœå• <code>menu: ä¸šåŠ¡ç»„ä»¶ </code>, åˆ™ Button ç»„ä»¶å±äº \"ä¸šåŠ¡ç»„ä»¶\" çš„åˆ†ç±»ï¼š</p>\n<pre><code class=\"markdown\">---\nname: Button\nroute: /button\nmenu: ä¸šåŠ¡ç»„ä»¶\n---</code></pre>\n<p>åœ¨ src ä¸­æ–°å»ºæ¬¢è¿é¡µï¼Œè·¯ç”±ä¸ºè·Ÿè·¯å¾„ï¼Œæ‰€å±èœå•ä¸ºâ€œå¿«é€Ÿä¸Šæ‰‹â€ï¼›</p>\n<pre><code class=\"markdown\">---\nname: å¿«é€Ÿä¸Šæ‰‹\nroute: /\n---</code></pre>\n<p>æ‰§è¡Œ <code>npm run docz:dev</code>ï¼Œå°±å¯ä»¥æ‰“å¼€</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023676554\" alt=\"è·¯ç”±é…ç½®\" title=\"è·¯ç”±é…ç½®\" /></p>\n<p>ä»‹ç»åˆ°è¿™é‡Œï¼Œä¼°è®¡æœ‰å°ä¼™ä¼´ä¼šæœ‰ç–‘é—®äº†ï¼Œè¿™æ ·ç”Ÿæˆçš„ç½‘ç«™åƒç¯‡ä¸€å¾‹ï¼Œèƒ½å¦éšå¿ƒæ‰€æ¬²çš„è‡ªå®šä¹‰ç½‘ç«™çš„æ ·å¼å’ŒåŠŸèƒ½å‘¢ï¼Ÿå½“åˆæˆ‘ä¹Ÿæœ‰è¿™ç§ç–‘é—®ï¼Œç»è¿‡å¤šæ¬¡å°è¯•ï¼Œçš‡å¤©ä¸è´Ÿè‹¦å¿ƒäººï¼Œç»ˆäºæ‘¸ç´¢å‡ºå¦‚ä¸‹æ–¹æ³•ï¼š</p>\n<p><strong>1ã€ä¿®æ”¹ docz æ–‡æ¡£æœ¬èº«çš„æ ·å¼</strong></p>\n<p>æ ¹æ® docz å®˜æ–¹æ–‡æ¡£ä¸­<a href=\"https://www.docz.site/docs/gatsby-theme\" rel=\"nofollow noreferrer\">å¢åŠ  logo çš„æ–¹æ³•</a>[6]ï¼Œå¯ä»¥é€šè¿‡è‡ªå®šä¹‰ç»„ä»¶è¦†ç›–åŸæœ‰ç»„ä»¶çš„å½¢å¼ï¼š</p>\n<blockquote>\n Example: If you're using our gatsby-theme-docz which has a Header component located at src/components/Header/index.js you can override the component by creating src/gatsby-theme-docz/components/Header/index.js. Cool right?\n</blockquote>\n<p>æ‰€ä»¥æ ¹æ® docz æºä»£ç ä¸»é¢˜éƒ¨åˆ†ä»£ç ï¼š <code>https://github.com/doczjs/docz/tree/master/core/gatsby-theme-docz/src</code>ï¼Œæ‰¾åˆ°å¯¹åº”çš„æ–‡æ¡£ç»„ä»¶çš„ä»£ç ç»“æ„ï¼Œåœ¨ç»„ä»¶åº“é¡¹ç›®æ ¹ç›®å½•æ–°å»ºåŒåç§°çš„æ–‡ä»¶å¤¹ï¼š</p>\n<pre><code class=\"js\">|-theme\n|  |-gatsby-theme-docz\n|     |-components\n|     |-Header\n|       |-index.js // åœ¨è¿™é‡Œä¿®æ”¹è‡ªå®šä¹‰çš„æ–‡æ¡£ç»„ä»¶\n|       |-styles.js // åœ¨è¿™é‡Œä¿®æ”¹ç”Ÿæˆçš„æ ·å¼æ–‡ä»¶</code></pre>\n<p>è¿™æ ·åœ¨æ‰§è¡Œ <code>npm run docz:dev</code> çš„æ—¶å€™ï¼Œå°±ä¼šæŠŠè‡ªå®šä¹‰çš„ä»£ç è¦†ç›–åŸæœ‰æ ·å¼ï¼Œå®ç°æ–‡æ¡£çš„å¤šæ ·åŒ–ã€‚</p>\n<p><strong>2ã€ä¿®æ”¹ markdown æ–‡æ¡£æ ·å¼</strong></p>\n<p>äº‹æƒ…åˆ°è¿™é‡Œå°±ç»“æŸäº†å—ï¼Ÿä¸ï¼æˆ‘ä»¬çš„ç›®æ ‡ä¸ä»…å¦‚æ­¤ï¼Œå› ä¸ºæˆ‘å‘ç°è‡ªåŠ¨ç”Ÿæˆçš„ markdown æ ¼å¼ï¼Œå¹¶ä¸ç¬¦åˆæˆ‘çš„å®¡ç¾ï¼Œæ¯”å¦‚ç”Ÿæˆçš„è¡¨æ ¼æ–‡å­—å±…å·¦å¯¹é½ï¼Œå¹¶ä¸”æ•´ä¸ªè¡¨æ ¼æ ·å¼å•ä¸€ï¼Œä½†æ˜¯è¿™é‡Œå±äº markdown æ ·å¼çš„èŒƒç•´ï¼Œä¿®æ”¹ä¸Šè¿°æ–‡æ¡£ç»„ä»¶ä¸­å¹¶ä¸åŒ…æ‹¬è¿™é‡Œçš„ä»£ç ï¼Œé‚£ä¹ˆå¦‚ä½•ä¿®æ”¹ markdown ç”Ÿæˆæ–‡æ¡£çš„æ ·å¼å‘¢ï¼Ÿ</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023676556\" alt=\"doczé»˜è®¤ç”Ÿæˆè¡¨æ ¼æ ·å¼\" title=\"doczé»˜è®¤ç”Ÿæˆè¡¨æ ¼æ ·å¼\" /></p>\n<p>ç»è¿‡æˆ‘çµæœºä¸€åŠ¨åˆä¸€åŠ¨ï¼Œå‘ç°æ—¢ç„¶åœ¨ä¸Šé¢ä¿®æ”¹æ–‡æ¡£ç»„ä»¶æ ·å¼çš„æ—¶å€™ï¼Œé‡å†™äº† component/Header/styles.js æ–‡ä»¶ï¼Œæ˜¯å¦å¯ä»¥åœ¨è¯¥æ–‡ä»¶ä¸­å¼•å…¥è‡ªå®šä¹‰çš„æ ·å¼å‘¢ï¼Ÿæ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"js\">|-theme\n|  |-gatsby-theme-docz\n|     |-components\n|     |-Header\n|       |-index.js // åœ¨è¿™é‡Œä¿®æ”¹è‡ªå®šä¹‰çš„æ–‡æ¡£ç»„ä»¶\n|       |-styles.js // åœ¨è¿™é‡Œä¿®æ”¹ç”Ÿæˆçš„æ ·å¼æ–‡ä»¶\n|       |-base.css  // è¿™é‡Œä¿®æ”¹ markdown ç”Ÿæˆæ–‡æ¡£çš„æ ·å¼</code></pre>\n<p>è¿™æ ·ä¿®æ”¹åçš„è¡¨æ ¼æ ·å¼å¦‚ä¸‹ï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023676558\" alt=\"ä¿®æ”¹doczè¡¨æ ¼æ ·å¼\" title=\"ä¿®æ”¹doczè¡¨æ ¼æ ·å¼\" /></p>\n<p>æ¥ä¸‹æ¥å„ä½å°ä¸»å¯ä»¥æ ¹æ®è‡ªå·±çš„å®¡ç¾æˆ–è€…è§†è§‰è®¾è®¡çš„è¦æ±‚è‡ªå®šä¹‰æ–‡æ¡£çš„æ ·å¼äº†ã€‚</p>\n<h3>å…­ã€éƒ¨ç½²æ–‡æ¡£åˆ°æœåŠ¡å™¨</h3>\n<p>ç”Ÿæˆçš„ç»„ä»¶åº“æ–‡æ¡£åªåœ¨æœ¬åœ°æ˜¾ç¤ºæ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œæ‰€ä»¥éœ€è¦éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šï¼Œäºæ˜¯ç¬¬ä¸€æ—¶é—´æƒ³åˆ°çš„æ˜¯æ”¾åœ¨ github è¿›è¡Œæ‰˜ç®¡ï¼Œæ‰“å¼€ github ä¸­çš„ setting è®¾ç½®é€‰é¡¹ï¼ŒGitHub Pages è®¾ç½®é…ç½®çš„åˆ†æ”¯ï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023676557\" alt=\"è®¾ç½®åˆ†æ”¯\" title=\"è®¾ç½®åˆ†æ”¯\" /></p>\n<p>è¿™æ—¶é»˜è®¤æ‰“å¼€çš„é¦–é¡µè·¯å¾„ä¸ºï¼š</p>\n<p><code>https://plusui.github.io/plusReact/</code></p>\n<p>ä½†å®é™…ä¸Šé¡µé¢æœ‰æ•ˆçš„è®¿é—®åœ°å€æ˜¯å¸¦æœ‰æ–‡ä»¶å¤¹ docsite è·¯å¾„çš„ï¼š</p>\n<p><code>https://plusui.github.io/plusReact/docsite/button/index.html</code></p>\n<p>æ­¤å¤–ï¼Œé¡µé¢å¼•å…¥çš„å…¶ä»–èµ„æºè·¯å¾„ï¼Œéƒ½æ˜¯ç»å¯¹è·¯å¾„ï¼Œå¦‚ä¸‹å›¾èµ„æºè·¯å¾„æ‰€ç¤ºï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023676559\" alt=\"å¼•å…¥èµ„æºè·¯å¾„\" title=\"å¼•å…¥èµ„æºè·¯å¾„\" /></p>\n<p>æ‰€ä»¥ç›´æ¥æŠŠæ‰“åŒ…åçš„èµ„æºæ”¾åœ¨ github ä¸Šæ˜¯æ— æ³•è®¿é—®å„ç§èµ„æºçš„ã€‚<br>è¿™æ—¶æˆ‘ä»¬åªå¥½æŠŠç½‘ç«™éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ä¸Šäº†ï¼Œè€ƒè™‘åˆ°æœåŠ¡å™¨é…ç½®çš„ç¹çï¼Œè¿™é‡Œç»™å¤§å®¶æä¾›ä¸€ä¸ªç®€ä¾¿çš„éƒ¨ç½²ç½‘ç«™ï¼š<a href=\"https://app.netlify.com/teams/zhenyulei/sites\" rel=\"nofollow noreferrer\">Netlify</a>[7]</br></p>\n<p>Netlify æ˜¯ä¸€ä¸ªæä¾›é™æ€ç½‘ç«™æ‰˜ç®¡çš„æœåŠ¡ï¼Œæä¾› CI æœåŠ¡ï¼Œèƒ½å¤Ÿå°†æ‰˜ç®¡ GitHubï¼ŒGitLab ç­‰ç½‘ç«™ä¸Šçš„ Jekyllï¼ŒHexoï¼ŒHugo ç­‰é™æ€ç½‘ç«™ã€‚</p>\n<p>éƒ¨ç½²é¡¹ç›®çš„è¿‡ç¨‹ä¹Ÿå¾ˆç®€å•ï¼Œå‚»ç“œå¼çš„ç‚¹å‡»é€‰æ‹© github ç½‘ç«™ä¸­ä»£ç è·¯å¾„ï¼Œä»¥åŠé…ç½®æ–‡ä»¶å¤¹è·Ÿè·¯å¾„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023676560\" alt=\"é…ç½®æ–‡ä»¶å¤¹è·¯å¾„\" title=\"é…ç½®æ–‡ä»¶å¤¹è·¯å¾„\" /></p>\n<p>ç„¶åå°±å¯ä»¥ç‚¹å‡»ç”Ÿæˆçš„ç½‘ç«™ urlï¼Œè®¿é—®åˆ°éƒ¨ç½²çš„ç½‘ç«™äº†ï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023676562\" alt=\"éƒ¨ç½²ç½‘ç«™\" title=\"éƒ¨ç½²ç½‘ç«™\" /></p>\n<p>è€Œä¸”å¾ˆæ–¹ä¾¿çš„æ˜¯ï¼Œä¸€æ—¦å®Œæˆéƒ¨ç½²ä¹‹åï¼Œä¹‹åå†æ¬¡å‘ä»£ç åº“ä¸­æäº¤ä»£ç ï¼ŒNetlify ä¼šè‡ªåŠ¨æ›´æ–°ç½‘ç«™ã€‚<br>æ­¤å¤–ï¼Œå¦‚æœæƒ³è‡ªå®šä¹‰ urlï¼Œé‚£ä¹ˆå°±åªèƒ½å»ç”³è¯·åŸŸåäº†ï¼Œåœ¨è‡ªå·±çš„äº‘æœåŠ¡å™¨ä¸Šï¼Œè§£æåŸŸåå³å¯ã€‚ä¸‹é¢ç®€å•è¯´ä¸€ä¸‹é…ç½®æ­¥éª¤ï¼š</br></p>\n<p>1ï¼‰é¦–å…ˆåœ¨ Netlify ç½‘ç«™ä¸Šï¼Œé€‰æ‹©ç»„ä»¶åº“å¯¹åº”çš„ Domain settings ä¸‹ Custom domainsï¼Œå¢åŠ è‡ªå·±çš„åŸŸåï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023676561\" alt=\"é…ç½®åŸŸå\" title=\"é…ç½®åŸŸå\" /></p>\n<p>2ï¼‰ç„¶åæ‰“å¼€äº‘æœåŠ¡å™¨ä¸­çš„åŸŸåè§£æä¸­çš„è§£æè®¾ç½®ï¼Œå°†è¯¥åŸŸåæŒ‡å‘ Netlifyï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023676564\" alt=\"äº‘æœåŠ¡å™¨ä¸Šå¢åŠ åŸŸå\" title=\"äº‘æœåŠ¡å™¨ä¸Šå¢åŠ åŸŸå\" /></p>\n<p>3ï¼‰æœ€åæ‰“å¼€è®¾ç½®çš„ç½‘å€ï¼Œå°±å¯ä»¥è®¿é—®åˆ°ç»„ä»¶åº“äº†ï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023676563\" alt=\"æœ€ç»ˆæ•ˆæœ\" title=\"æœ€ç»ˆæ•ˆæœ\" /></p>\n<h3>ä¸ƒã€ç»„ä»¶æŒ‰éœ€åŠ è½½</h3>\n<p>å¥½äº†ï¼Œç»è¿‡ä¸Šé¢çš„æµç¨‹ï¼Œå¯ä»¥åœ¨ demo é¡¹ç›®ä¸­ä½¿ç”¨ç»„ä»¶åº“äº†ï¼Œä½†æ˜¯åœ¨ demo é¡¹ç›®ä¸­ï¼Œæ‰§è¡Œ <code>npm run build</code> ï¼Œå°±ä¼šå‘ç°ç”Ÿæˆçš„é™æ€èµ„æºä¸­å³ä½¿åªä½¿ç”¨äº†ä¸€ä¸ªç»„ä»¶ï¼Œä¹Ÿä¼šæŠŠ reactui ç»„ä»¶åº“ä¸­æ‰€æœ‰çš„ç»„ä»¶æ‰“åŒ…è¿›æ¥ã€‚</p>\n<p><strong>æ‰€ä»¥å¦‚ä½•è¿›è¡ŒæŒ‰éœ€åŠ è½½å‘¢ï¼Ÿ</strong></p>\n<p>æŒ‰éœ€åŠ è½½é¦–å…ˆæ˜ å…¥è„‘æµ·çš„æ˜¯ä½¿ç”¨ <code>babel-plugin-import</code> æ’ä»¶, è¯¥æ’ä»¶å¯ä»¥åœ¨ Babel é…ç½®ä¸­é’ˆå¯¹ç»„ä»¶åº“è¿›è¡ŒæŒ‰éœ€åŠ è½½.</p>\n<p>ç”¨æˆ·éœ€è¦å®‰è£… <code>babel-plugin-impor</code> æ’ä»¶ï¼Œç„¶ååœ¨ plugins ä¸­åŠ å…¥é…ç½®ï¼š</p>\n<pre><code class=\"js\">\"plugins\": [\n  [\n    \"import\",\n    {\n      \"libraryName\": \"reactui\", // è½¬æ¢ç»„ä»¶åº“çš„åå­—\n      \"libraryDirectory\": \"dist/components\", // è½¬æ¢çš„è·¯å¾„\n      \"camel2DashComponentName\":false,  // è®¾ç½®ä¸º false æ¥é˜»æ­¢ç»„ä»¶åç§°çš„è½¬æ¢\n      \"style\":true\n    }\n  ]\n]</code></pre>\n<p>è¿™æ ·åœ¨ demo é¡¹ç›®ä¸­ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ï¼š</p>\n<pre><code class=\"js\">import { Button } from 'reactui';</code></pre>\n<p>å°±ä¼šåœ¨ babel ä¸­ç¼–è¯‘æˆï¼š</p>\n<pre><code class=\"js\">import { Button } from 'reactui/dist/components/Button';\nrequire('reactui/dist/components/Button/style');</code></pre>\n<p>ä½†æ˜¯è¿™æ ·è¿˜æœ‰äº›å¼Šç«¯ï¼š</p>\n<p>1ã€ ç”¨æˆ·åœ¨ä½¿ç”¨ç»„ä»¶åº“çš„æ—¶å€™è¿˜éœ€è¦å®‰è£… <code>babel-plugin-import</code>ï¼Œ å¹¶åšç›¸å…³ plugins é…ç½®ï¼›</p>\n<p>2ã€ å¼€å‘ç»„ä»¶åº“çš„æ—¶å€™ç»„ä»¶å¯¹åº”çš„æ ·å¼æ–‡ä»¶è¿˜éœ€è¦æ”¾åœ¨ style æ–‡ä»¶å¤¹ä¸‹ï¼›</p>\n<p>é‚£æœ‰æ²¡æœ‰æ›´ä¸ºç®€å•çš„æ–¹æ³•å‘¢ï¼Ÿåœ¨ ant-design ä¸­å¯»æ‰¾ç­”æ¡ˆï¼Œå‘ç°è¿™æ ·ä¸€å¥è¯ â€œantd çš„ JS ä»£ç é»˜è®¤æ”¯æŒåŸºäº ES modules çš„ tree shakingâ€ã€‚ å¯¹å‘€ï¼è¿˜å¯ä»¥ä½¿ç”¨ webpack çš„æ–°æŠ€æœ¯â€œtree shakingâ€ã€‚</p>\n<blockquote>\n ä»€ä¹ˆæ˜¯ tree shakingï¼Ÿ AST å¯¹ JS ä»£ç è¿›è¡Œè¯­æ³•åˆ†æåå¾—å‡ºçš„è¯­æ³•æ ‘ (Abstract Syntax Tree)ã€‚AST è¯­æ³•æ ‘å¯ä»¥æŠŠä¸€æ®µ JS ä»£ç çš„æ¯ä¸€ä¸ªè¯­å¥éƒ½è½¬åŒ–ä¸ºæ ‘ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚DCE Dead Code Eliminationï¼Œåœ¨ä¿æŒä»£ç è¿è¡Œç»“æœä¸å˜çš„å‰æä¸‹ï¼Œå»é™¤æ— ç”¨çš„ä»£ç ã€‚\n</blockquote>\n<p>webpack 4x ä¸­å·²ç»ä½¿ç”¨äº† tree shaking æŠ€æœ¯ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ package.json æ–‡ä»¶ä¸­é…ç½®å‚æ•° <code>\"sideEffects\": false</code>ï¼Œæ¥å‘Šè¯‰ webpack æ‰“åŒ…çš„æ—¶å€™å¯ä»¥å¤§èƒ†çš„å»æ‰æ²¡æœ‰ç”¨åˆ°çš„æ¨¡å—å³å¯ã€‚è¿™æ—¶ç”¨æˆ·åœ¨ demo é¡¹ç›®ä¸­ä½¿ç”¨ç»„ä»¶åº“çš„æ—¶å€™ä¸éœ€è¦åšä»»ä½•å¤„ç†ï¼Œå°±å¯ä»¥æŒ‰éœ€å¼•ç”¨ JS èµ„æºäº†ã€‚<br>ä¸çŸ¥é“å¤§å®¶åœ¨çœ‹åˆ°è¿™é‡Œæ—¶ï¼Œæ˜¯å¦å‘ç°è¿™æ ·é…ç½®è¿˜æ˜¯æœ‰é—®é¢˜çš„ï¼šå³ sideEffects é…ç½®æˆ false æ˜¯æœ‰é—®é¢˜çš„ã€‚<br>å› ä¸ºæŒ‰ç…§ä¸Šè¿°é…ç½®ï¼Œå°±ä¼šå‘ç°ç»„ä»¶çš„æ ·å¼ä¸è§äº†ï¼ï¼</br></br></p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023676565\" alt=\"æ ·å¼æ— æ•ˆ\" title=\"æ ·å¼æ— æ•ˆ\" /></p>\n<p>ç»è¿‡æ’æŸ¥ï¼ŒåŸå› æ˜¯å¼•å…¥ CSS æ ·å¼çš„ä»£ç ï¼š<code>import './button.scss'</code>ï¼Œå¯ä»¥çœ‹åˆ°ç›¸å½“äºåªæ˜¯å¼•å…¥äº†æ ·å¼ï¼Œå¹¶ä¸åƒå…¶ä»– JS æ¨¡å—åé¢åšäº†è°ƒç”¨ï¼Œåœ¨ tree shaking çš„æ—¶å€™ï¼Œä¼šæŠŠ css æ ·å¼å»æ‰ã€‚æ‰€ä»¥åœ¨é…ç½® sideEffects å°±è¦æŠŠ CSS æ–‡ä»¶æ’é™¤æ‰ï¼š</p>\n<pre><code class=\"js\">\"sideEffects\": [\n  \"*.scss\"\n]</code></pre>\n<p>é€šè¿‡ä¸Šè¿° tree shaking çš„æ–¹æ³•ï¼Œå¯ä»¥å®ç°ç»„ä»¶åº“çš„æŒ‰éœ€åŠ è½½åŠŸèƒ½ï¼Œæ‰“åŒ…çš„æ–‡ä»¶å»é™¤äº†æ²¡æœ‰ç”¨åˆ°çš„ç»„ä»¶ä»£ç ï¼ŒåŒæ—¶çœå»äº†ç”¨æˆ·çš„é…ç½®ã€‚</p>\n<h3>å…«ã€æ ·å¼æŒ‰éœ€åŠ è½½</h3>\n<p>é€šå¸¸æ¥è¯´ï¼Œç»„ä»¶åº“çš„ JS æ˜¯æŒ‰éœ€åŠ è½½çš„ï¼Œä½†æ˜¯æ ·å¼æ–‡ä»¶ä¸€èˆ¬åªè¾“å‡ºä¸€ä¸ªæ–‡ä»¶ï¼Œå³æŠŠç»„ä»¶åº“ä¸­çš„æ‰€æœ‰æ–‡ä»¶æ‰“åŒ…ç¼–è¯‘æˆä¸€ä¸ª index.css æ–‡ä»¶ï¼Œç”¨æˆ·åœ¨é¡¹ç›®ä¸­å¼•å…¥å³å¯ï¼›ä½†æ˜¯å¦‚æœå°±æ˜¯æƒ³åšæŒ‰éœ€åŠ è½½ç»„ä»¶çš„æ ·å¼æ–‡ä»¶ï¼Œè¯¥å¦‚ä½•å»åšå‘¢ï¼Ÿ</p>\n<p>è¿™é‡Œæˆ‘æä¾›ä¸€ç§æ€è·¯ï¼Œç”±äº .tsx æ–‡ä»¶æ˜¯ç”± TS ç¼–è¯‘å™¨æ‰“åŒ…ç¼–è¯‘çš„ï¼Œå¹¶æ²¡æœ‰å¤„ç† SCSSï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨äº† node-sass æ¥ç¼–è¯‘ SCSS æ–‡ä»¶ï¼Œå¦‚æœéœ€è¦æŒ‰éœ€åŠ è½½ SCSS æ–‡ä»¶ï¼Œåˆ™æ¯ä¸ªç»„ä»¶çš„ index.tsx æ–‡ä»¶ä¸­å°±éœ€è¦å¼•å…¥å¯¹åº”çš„ SCSS æ–‡ä»¶ï¼š</p>\n<pre><code class=\"js\">import Button from './button';\nimport './button.scss';\nexport default Button;</code></pre>\n<p>ç”Ÿæˆçš„ SCSS æ–‡ä»¶ä¹Ÿéœ€è¦æ‰“åŒ…åˆ°æ¯ä¸ªç»„ä»¶ä¸­ï¼Œè€Œä¸æ˜¯ç”Ÿæˆåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼š</p>\n<p>æ‰€ä»¥ä½¿ç”¨äº† node-sass ä¸­çš„ sass.render å‡½æ•°ï¼ŒæŠ½å–æ¯ä¸ªæ–‡ä»¶ä¸­çš„æ ·å¼æ–‡ä»¶ï¼Œå¹¶æ‰“åŒ…ç¼–è¯‘åˆ°å¯¹åº”çš„æ–‡ä»¶ä¸­ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<pre><code class=\"js\">//çœç•¥ import å¼•å…¥,æ ¸å¿ƒä»£ç å¦‚ä¸‹\nfunction createCss(name){\n    const lowerName = name.toLowerCase();\n    sass.render({ // è°ƒç”¨ node-sass å‡½æ•°æ–¹æ³•ï¼Œç¼–è¯‘æŒ‡å®šçš„ scss æ–‡ä»¶åˆ°æŒ‡å®šçš„è·¯å¾„ä¸‹\n        file: currPath(`../src/components/${name}/${lowerName}.scss`),\n        outputStyle: 'compressed', // è¿›è¡Œå‹ç¼©\n        sourceMap: true,\n    },(err,result)=&gt;{\n        if(err){\n            console.log(err);\n        }\n        const stylePath = `../dist/components/${name}/`;\n        fs.writeFile(currPath(stylePath+`/${lowerName}.scss`), result.css, function(err){\n            if(err){\n                console.log(err);\n            }\n        });\n    });\n}</code></pre>\n<p>è¿™æ ·å°±åœ¨ç”Ÿæˆçš„ dist æ–‡ä»¶ä¸­çš„æ¯ä¸ªç»„ä»¶ä¸­å¢åŠ äº† SCSS æ–‡ä»¶ï¼Œç”¨æˆ·é€šè¿‡â€œæŒ‰éœ€åŠ è½½å°èŠ‚â€ä¸­çš„æ–¹æ³•åœ¨å¼•å…¥ç»„ä»¶çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨å¯¹åº”çš„ index æ–‡ä»¶ï¼Œåœ¨ index.js æ–‡ä»¶ä¸­å°±ä¼šè°ƒç”¨å¯¹åº”çš„ SCSS æ–‡ä»¶ï¼Œä»è€Œä¹Ÿå®ç°äº†æ ·å¼æ–‡ä»¶çš„æŒ‰éœ€åŠ è½½ã€‚</p>\n<p>ä½†æ˜¯è¿™æ ·è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åœ¨å¼€å‘ç»„ä»¶åº“çš„æ—¶å€™æ¯ä¸ªç»„ä»¶ä¸­çš„ index.tsx æ–‡ä»¶ä¸­å¼•å…¥çš„æ˜¯ SCSS æ–‡ä»¶ <code>import './button.scss';</code> ï¼Œæ‰€ä»¥ node-sass ç¼–è¯‘åçš„æ–‡ä»¶éœ€è¦æ˜¯ SCSS åç¼€çš„æ–‡ä»¶ï¼ˆè™½ç„¶å·²ç»æ˜¯ CSS æ ¼å¼ï¼‰ï¼Œå¦‚æœç”Ÿæˆçš„æ˜¯ CSS æ–‡ä»¶ï¼Œåˆ™ç”¨æˆ·åœ¨ä½¿ç”¨ç»„ä»¶çš„æ—¶å€™å°±ä¼šå› æ‰¾ä¸åˆ° SCSS æ–‡ä»¶è€ŒæŠ¥é”™ï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·åœ¨ä½¿ç”¨ç»„ä»¶çš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦å®‰è£… node-sass æ’ä»¶ã€‚<br>ä¸çŸ¥å¤§å®¶æœ‰æ²¡æœ‰æ›´å¥½çš„åŠæ³•ï¼Œåœ¨ç»„ä»¶åº“å¼€å‘çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯ SCSS æ–‡ä»¶ï¼Œç¼–è¯‘åç”Ÿæˆçš„æ˜¯ CSS åç¼€çš„æ–‡ä»¶ï¼Œåœ¨ç”¨æˆ·ä½¿ç”¨ç»„ä»¶çš„ä¸­è°ƒç”¨çš„ä¹Ÿæ˜¯ CSS æ–‡ä»¶å‘¢ï¼Ÿæ¬¢è¿åœ¨æ–‡æœ«ç•™è¨€è®¨è®ºï½</br></p>\n<h3>ç»“è¯­</h3>\n<p>ä»¥ä¸Šå°±æ˜¯æ•´ä¸ªæ­å»ºç»„ä»¶åº“çš„è¿‡ç¨‹ï¼Œä»ä¸€å¼€å§‹å†³å®šä½¿ç”¨ç°æœ‰çš„ create-react-app è„šæ‰‹æ¶å’Œ docz æ¥æ„æˆæ ¸å¿ƒåŠŸèƒ½ï¼Œåˆ°æ–‡æ¡£çš„ç½‘ç«™éƒ¨ç½²å’Œ npm èµ„æºçš„å‘å¸ƒï¼Œæœ€åˆæ„Ÿè§‰åº”è¯¥èƒ½å¤Ÿå¿«é€Ÿå®Œæˆæ•´ä¸ªç»„ä»¶åº“çš„æ­å»ºï¼Œå®é™…ä¸Šå¦‚æœè¦æƒ³æ”¹åŠ¨è¿™äº›ç°æœ‰çš„åº“æ¥å®ç°è‡ªå·±æƒ³è¦çš„æ•ˆæœï¼Œè¿˜æ˜¯ç»å†äº†ä¸€äº›æ¢ç´¢ï¼Œä¸è¿‡æ•´ä¸ªæ‘¸ç´¢è¿‡ç¨‹ä¹Ÿæ˜¯ä¸€ç§æ”¶è·å’Œä¹è¶£æ‰€åœ¨ï¼Œæ„¿èµ°è¿‡è·¯è¿‡çš„å°ä¼™ä¼´èƒ½æœ‰æ‰€æ”¶è·ï½</p>\n<h3>å‚è€ƒæ–‡ç« </h3>\n<p>[1] NutUI ç»„ä»¶åº“: <a href=\"http://nutui.jd.com/#/index\" rel=\"nofollow noreferrer\">http://nutui.jd.com/#/index</a></p>\n<p>[2] yep-react ç»„ä»¶åº“: <a href=\"http://yep-react.jd.com\" rel=\"nofollow noreferrer\">http://yep-react.jd.com</a></p>\n<p>[3] react å®˜æ–¹ç½‘ç«™: <a href=\"https://reactjs.org/warnings/invalid-hook-call-warning.html\" rel=\"nofollow noreferrer\">https://reactjs.org/warnings/...</a></p>\n<p>[4] storybook: <a href=\"https://storybook.js.org/\" rel=\"nofollow noreferrer\">https://storybook.js.org/</a></p>\n<p>[5] docz: <a href=\"https://www.docz.site/\" rel=\"nofollow noreferrer\">https://www.docz.site/</a></p>\n<p>[6] docz å®˜æ–¹æ–‡æ¡£: <a href=\"https://www.docz.site/docs/gatsby-theme\" rel=\"nofollow noreferrer\">https://www.docz.site/docs/ga...</a></p>\n<p>[7] Netlify: <a href=\"https://app.netlify.com/teams/zhenyulei/sites\" rel=\"nofollow noreferrer\">https://app.netlify.com/teams...</a></p>\n<p>[8]åŸºäº Storybook 5 æ‰“é€ ç»„ä»¶åº“å¼€å‘ä¸æ–‡æ¡£ç«™å»ºè®¾å°ç»“: <a href=\"http://jelly.jd.com/article/5f06fe8505541b015b6a708a\" rel=\"nofollow noreferrer\">http://jelly.jd.com/article/5...</a></p>","descriptionType":"html","publishedDate":"Wed, 19 Aug 2020 01:00:00 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/remote/1460000023676550","linkMd5":"c737187f4a9de041a952fc2de76447f5","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn2@2020_3/2020/08/24/23-08-22-747_a6db2e4da23bc72a.webp","destWidth":800,"destHeight":323,"sourceBytes":30082,"destBytes":7094,"author":"äº¬ä¸œè®¾è®¡ä¸­å¿ƒJDC","articleImgCdnMap":{"https://segmentfault.com/img/remote/1460000023676550":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn2@2020_3/2020/08/24/23-08-22-747_a6db2e4da23bc72a.webp","https://segmentfault.com/img/remote/1460000023676551":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn14@2020_5/2020/08/24/23-08-30-685_b578e1f4a1bcc92e.webp","https://segmentfault.com/img/remote/1460000023676552":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn10@2020_2/2020/08/24/23-08-30-890_4c734adeed2c35c9.webp","https://segmentfault.com/img/remote/1460000023676555":"https://cdn.jsdelivr.net/gh/myreaderx/cdn26@2020_5/2020/08/24/23-08-31-078_44b46b0331cb728c.webp","https://segmentfault.com/img/remote/1460000023676553":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn6@2020_5/2020/08/24/23-08-30-950_7610edbe97df9755.webp","https://segmentfault.com/img/remote/1460000023676554":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn30@2020_5/2020/08/24/23-08-30-953_c58330355fbc3305.webp","https://segmentfault.com/img/remote/1460000023676556":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn22@2020_1/2020/08/24/23-08-30-886_927b33d1efd81a57.webp","https://segmentfault.com/img/remote/1460000023676558":"https://cdn.jsdelivr.net/gh/myreaderx25/cdn88@2020_6/2020/08/24/23-08-44-191_7a2abde1a113f500.webp","https://segmentfault.com/img/remote/1460000023676557":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn18@2020_6/2020/08/24/23-08-30-898_7f8fc8b01d6f5da7.webp","https://segmentfault.com/img/remote/1460000023676559":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn83@2020_4/2020/08/24/23-08-44-531_3579403f639c7f72.webp","https://segmentfault.com/img/remote/1460000023676560":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn56@2020_1/2020/08/24/23-08-43-795_6fb596722509c584.webp","https://segmentfault.com/img/remote/1460000023676562":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn71@2020_5/2020/08/24/23-08-44-474_56f279fc9b89be8a.webp","https://segmentfault.com/img/remote/1460000023676561":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn76@2020_4/2020/08/24/23-08-44-872_34e1f70a34f32d2c.webp","https://segmentfault.com/img/remote/1460000023676564":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn60@2020_5/2020/08/24/23-08-44-070_4c20e67204c9c665.webp","https://segmentfault.com/img/remote/1460000023676563":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn64@2020_6/2020/08/24/23-08-44-213_2c7c0f8d1664550e.webp","https://segmentfault.com/img/remote/1460000023676565":"https://cdn.jsdelivr.net/gh/myreaderx13/cdn79@2020_6/2020/08/24/23-08-44-563_3b2757439dfe26eb.webp"},"publishedOrCreatedDate":1598310388563},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"2020 å¹´æœ€ç‰›é€¼çš„ 10 é—¨ç¼–ç¨‹è¯­è¨€","link":"https://segmentfault.com/a/1190000023699206","description":"<blockquote>\n å…ˆçœ‹å†ç‚¹èµï¼Œç»™è‡ªå·±ä¸€ç‚¹æ€è€ƒçš„æ—¶é—´ï¼Œå¾®ä¿¡æœç´¢ã€\n <strong>æ²‰é»˜ç‹äºŒ</strong>ã€‘å…³æ³¨è¿™ä¸ªæœ‰é¢œå€¼å´å‡è£…é æ‰åè‹Ÿä¸”çš„ç¨‹åºå‘˜ã€‚\n <br>æœ¬æ–‡&nbsp;<strong>GitHub</strong>&nbsp;<a href=\"https://github.com/itwanger/itwanger.github.io\" rel=\"nofollow noreferrer\">github.com/itwanger</a>&nbsp;å·²æ”¶å½•ï¼Œé‡Œé¢è¿˜æœ‰æˆ‘ç²¾å¿ƒä¸ºä½ å‡†å¤‡çš„ä¸€çº¿å¤§å‚é¢è¯•é¢˜ã€‚</br>\n</blockquote>\n<p>å¯¹äºå¾ˆå¤šåˆå­¦ç¼–ç¨‹çš„äººæ¥è¯´ï¼Œå°¤å…¶æ˜¯é©¬ä¸Šè¦å…¥å­¦çš„å¤§ä¸€æ–°ç”Ÿæ¥è¯´ï¼Œé€‰æ‹©å“ªé—¨å­ç¼–ç¨‹è¯­è¨€å®åœ¨æ˜¯ä¸ªç—›è‹¦çš„äº‹ã€‚é€‰æ‹©å¯¹äº†ï¼Œæ¯•ä¸šåé¡ºåˆ©æ‰¾åˆ°å·¥ä½œï¼Œå®Œç¾èµ°å‘èŒåœºï¼›é€‰æ‹©é”™äº†ï¼Œæ¯•ä¸šåå—ä¼¤çš„æ‰åæ— å¤„å®‰æ”¾ï¼Œå¤§å­¦ç®—æ˜¯è™šåº¦å…‰é˜´äº†ã€‚</p>\n<p>å‰ä¸€æ®µæ—¶é—´å“ˆï¼Œæˆ‘æœ‰ä¸ªè¿œæˆ¿çš„äº²æˆšï¼Œå¥¹å®¶çš„å°å­©éè¦è®©æˆ‘æŒ‡å¯¼ä¸€ä¸‹ã€‚ç„¶åå°±å¸¦äº†ä¸€æœ¬ä¹¦æ¥è§æˆ‘ï¼Œçœ‹äº†ä¸€ä¸‹å°é¢ï¼Œæˆ‘æƒŠå‘†äº†ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023699209\" alt=\"\" title=\"\" /></p>\n<p>ã€Šæ˜“è¯­è¨€ä»å…¥é—¨åˆ°ç²¾é€šã€‹ã€‚è¿™æ˜¯å“ªé—¨å­ç¼–ç¨‹è¯­è¨€ï¼Œæˆ‘ç¬¬ä¸€æ¬¡è§åˆ°ï¼ä¸æ•¢æ€ æ…¢ï¼Œä¹Ÿæ‹…å¿ƒäº²æˆšè¯´æˆ‘å­¤é™‹å¯¡é—»ï¼Œå·å·åœ°æœäº†ä¸€ä¸‹ã€‚æ˜“è¯­è¨€çš„åˆ›å§‹äººæ˜¯å´æ¶›ï¼Œå›½å†…ä¸ºæ•°ä¸å¤šçš„æ¨å´‡ä¸­æ–‡ç¼–ç¨‹è¯­è¨€çš„ç¨‹åºå‘˜å¤§ä½¬ã€‚</p>\n<p>éƒ‘é‡å…¶äº‹åœ°è¯´ï¼Œæˆ‘æ˜¯ä¸ªä¸‰è§‚å¾ˆæ­£çš„äººï¼Œç»æ²¡æœ‰åŠç‚¹è™šæƒ…å‡æ„ã€‚ä½†æˆ‘å®åœ¨ä¸å¿å¿ƒçœ‹æˆ‘è¿™è¿œæˆ¿è¡¨å¼Ÿè¯¯å…¥æ­§é€”ï¼Œæ¯•ç«Ÿæ˜“è¯­è¨€å³ä¾¿æ˜¯å…¥é—¨äº†ï¼Œç”šè‡³æ˜¯ç²¾é€šäº†ï¼Œå°†æ¥ä¹Ÿä¸ä¸€å®šèƒ½æ‰¾åˆ°å·¥ä½œå•Šï¼</p>\n<p>å½“åšå…´è¶£çˆ±å¥½å­¦ç¼–ç¨‹å›ºç„¶å¥½ï¼Œå€¼å¾—ç§°èµã€‚æˆ‘è¿™è¡¨å¼Ÿè™½ç„¶å­¦ä¹ ä¸å’‹æ»´ï¼Œå¹´çºªè½»è½»ï¼Œåˆä¸­æ¯•ä¸šï¼Œä½†æ®äº²æˆšåé¦ˆï¼Œé…·çˆ±ç¼–ç¨‹ï¼Œé…·çˆ±è®¡ç®—æœºï¼ˆä¹Ÿä¸ç¡®å®šæ˜¯ä¸æ˜¯é…·çˆ±æ‰“æ¸¸æˆï¼‰ã€‚æ˜“è¯­è¨€è¿™æœ¬ä¹¦ä¹Ÿæ˜¯ä»–è‡ªå·±åœ¨ç½‘ä¸Šä¹°çš„ã€‚</p>\n<p>æˆ‘æœ‰ç‚¹æ‹…å¿ƒåœ°é—®ä»–ï¼šâ€œèƒ½çœ‹æ‡‚å—ï¼Ÿâ€</p>\n<p>è¡¨å¼Ÿä¸å‡æ€ç´¢ï¼Œä¿¡èª“æ—¦æ—¦åœ°å›ç­”ï¼šâ€œèƒ½å•Šï¼â€</p>\n<p>æˆ‘éšæ‰‹ç¿»äº†ç¿»è¿™è¾¹ä¹¦ï¼Œå‘ç°ä¹¦ç­¾å·²ç»å¤¹åœ¨ç¬¬ 202 é¡µï¼Œæˆ‘å¤©å‘ï¼ŒçœŸçš„æœ‰åœ¨çœ‹å•Šï¼Œçœ‹äº†å°†è¿‘ä¸€åŠäº†ã€‚</p>\n<p>å¿…é¡»å¾—è´Ÿè´£ä»»å•Šï¼Œæˆ‘å°±å¯¹äº²æˆšå’Œè¡¨å¼Ÿè¯´ï¼Œâ€œä½ çœ‹ï¼Œè¦ä¸å’±æ¢ä¸ªç¼–ç¨‹è¯­è¨€å§ï¼Œæ¯”å¦‚è¯´ Javaï¼â€</p>\n<p>äº²æˆšä¸€è„¸æƒŠæ„•ï¼Œâ€œä½ è¯´å“ˆï¼Ÿâ€</p>\n<p>æˆ‘åªå¥½æ— å¥ˆåœ°å°†è„¸è¿ˆå‘æˆ‘è¿™è¡¨å¼Ÿï¼Œåªå¬ä»–å¨“å¨“é“æ¥ï¼šâ€œJ-A-V-Aï¼â€</p>\n<p>â€œå“å‘€ï¼Œä¸é”™å•Šï¼ŒçœŸçš„ç§åº•ä¸‹æœ‰ç ”ç©¶ï¼â€æˆ‘å¿ƒä¸­æš—æš—ä½©æœèµ·æ¥äº†æˆ‘è¿™è¡¨å¼Ÿã€‚çœŸçœ‹ä¸å‡ºæ¥ï¼ŒæŒºçˆ±å­¦çš„å˜›ã€‚</p>\n<p>â€œåˆ«çœ‹è¿™æœ¬æ˜“è¯­è¨€äº†ï¼Œå½“åšå…´è¶£å­¦ç¼–ç¨‹æ²¡é—®é¢˜ï¼Œå¯å’±å­¦ä¹ æ˜¯ä¸ºäº†å•¥ï¼Œå°±æ˜¯ä¸ºäº†ä»¥åèƒ½æ‰¾ä»½å·¥ä½œï¼Œè™½ç„¶æˆ‘è¯´å¾—æ¯”è¾ƒä¿—æ°”ã€‚å¦‚æœè¯´ç¡®å®å¯¹ç¼–ç¨‹æ„Ÿå…´è¶£çš„è¯ï¼Œä¹°ç‚¹ Java æ–¹é¢çš„ä¹¦è¯»ä¸€è¯»ã€‚â€æˆ‘è¯­é‡å¿ƒé•¿åœ°å»ºè®®ã€‚</p>\n<p>è¡¨å¼Ÿæ·±ä»¥ä¸ºç„¶åœ°ç‚¹ç‚¹å¤´ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023699210\" alt=\"\" title=\"\" /></p>\n<p>ä¹‹æ‰€ä»¥è¯´è¿™ä»¶äº‹ï¼Œå°±æ˜¯æƒ³å‘Šè¯‰åŒå­¦ä»¬ï¼ŒåŠªåŠ›å›ºç„¶é‡è¦ï¼Œä½†é€‰æ‹©å¿…é¡»è¦å¯¹ï¼Œä¸€æ—¦é€‰æ‹©é”™äº†ï¼Œé‚£å¾ˆå¤šåŠªåŠ›éƒ½æ˜¯ç™½è´¹ã€‚</p>\n<p>é‚£ï¼Œè¿™ç¯‡æ–‡ç« å°±æ˜¯æ¥ç»™åŒå­¦ä»¬æä¸ªé†’ï¼Œ2020 å¹´æœ€ç‰›é€¼çš„ç¼–ç¨‹è¯­è¨€æ˜¯ä»€ä¹ˆï¼Ÿçœ‹å®Œåä½ å°±çŸ¥é“è¯¥å¦‚ä½•åœ°å»é€‰æ‹©äº†ã€‚</p>\n<p>å…ˆæ¥ä¸ªç®€è¦çš„æ¦‚æ‹¬ï¼š</p>\n<ul>\n <li>Javaï¼ŒæœåŠ¡å™¨ç«¯æœ€å¥½çš„ç¼–ç¨‹è¯­è¨€</li>\n <li>C++ï¼Œæœ€é€šç”¨çš„ç¼–ç¨‹è¯­è¨€</li>\n <li>Cï¼Œè¿„ä»Šä¸ºæ­¢ï¼Œæœ€å€¼å¾—ä¿¡ä»»çš„ç¼–ç¨‹è¯­è¨€</li>\n <li>Pythonï¼ŒAIï¼ˆäººå·¥æ™ºèƒ½ï¼‰ã€æœºå™¨å­¦ä¹ æ–¹å‘æœ€ä½³çš„ç¼–ç¨‹è¯­è¨€</li>\n <li>JavaScriptï¼Œå®¢æˆ·ç«¯æœ€å¸¸ç”¨çš„è„šæœ¬è¯­è¨€</li>\n <li>C#ï¼Œå¾®è½¯æœ€å¼ºæœ‰åŠ›çš„é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€</li>\n <li>Swiftï¼ŒIOS ç«¯æœ€é«˜æ•ˆçš„ç¼–ç¨‹è¯­è¨€</li>\n <li>GOï¼ˆGolangï¼‰ï¼Œå¯æ‰©å±•çš„ç¼–ç¨‹è¯­è¨€ï¼Œè°·æ­Œå‡ºå“</li>\n <li>PHPï¼Œä¸–ç•Œä¸Šæœ€å¥½çš„ç¼–ç¨‹è¯­è¨€ï¼Œä¸ï¼Œæœ€å¥½ç”¨çš„ Web ç¼–ç¨‹è¯­è¨€</li>\n <li>Rubyï¼Œæ•°æ®ç§‘å­¦æ–¹é¢æœ€å¯é çš„ç¼–ç¨‹è¯­è¨€</li>\n</ul>\n<p>ä¸ºä»€ä¹ˆæˆ‘ä¼šé€‰æ‹©è¿™ 10 é—¨ç¼–ç¨‹è¯­è¨€ï¼Ÿå¯ä¸æ˜¯æˆ‘æ”¶äº†è¿™äº›ç¼–ç¨‹è¯­è¨€çš„é’±ï¼Œæ•…æ„è®©å®ƒä»¬ä¸Šæ¦œçš„ï¼Œæˆ‘æ˜¯æœ‰è¶³å¤Ÿå¤šçš„ç†ç”±çš„ã€‚</p>\n<p>é¦–å…ˆæ¥çœ‹ä¸€ä¸‹ TIOBE æ’è¡Œæ¦œï¼Œéå¸¸éå¸¸æƒå¨çš„æ¦œå•ï¼Œä¸‹é¢è¿™ 14 ä¸ªæ˜¯æ´»å¾—æ¯”è¾ƒä¹…çš„ï¼Œå¯ä»¥çœ‹å¾—å‡ºï¼Œé™¤äº† SQL æ¢æˆäº† GOï¼Œå…¶ä»– 9 é—¨ç¼–ç¨‹è¯­è¨€éƒ½åœ¨ï¼Œå¹¶ä¸”é•¿æœŸéœ¸æ¦œã€‚<br><img src=\"https://segmentfault.com/img/remote/1460000023699211\" alt=\"\" title=\"\" /></br></p>\n<p>æ´»å¾—æ¯”è¾ƒä¹…ï¼Œæ„å‘³ç€è¿™é—¨ç¼–ç¨‹è¯­è¨€çš„ç”Ÿå‘½åŠ›æ¯”è¾ƒé¡½å¼ºï¼Œç”Ÿæ€ç³»ç»Ÿæ¯”è¾ƒå®Œå¤‡ï¼Œå®ƒä»¬å±äºä¸›æ—çš„ç‹è€…â€”â€”ç‰©ç«å¤©æ‹©ï¼Œé€‚è€…ç”Ÿå­˜å˜›ã€‚å®ƒä»¬æ´»å¾—ä¹…ï¼Œå¹¶ä¸”æ´»å¾—å¥½ï¼Œé‚£å°±æ„å‘³ç€è¿˜èƒ½æ´»å¾—æ›´å¥½æ›´ä¹…ï¼Œæ˜¯è¿™ä¸ªé“ç†å§ï¼Ÿå¼ºè€…æ›´å¼ºï¼</p>\n<p>åŒå­¦ä»¬å°½ç®¡æ”¾å¿ƒï¼Œæˆ‘æ˜¯è´Ÿè´£ä»»çš„â€”â€”ä¸»è¦æ˜¯è¿™äº›ç¼–ç¨‹è¯­è¨€çš„ä½œè€…æˆ–è€…å›¢é˜Ÿæ˜¯è´Ÿè´£ä»»çš„ï¼Œå°½ç®¡å¼€æº PHP çš„å®˜æ–¹å›¢é˜Ÿå·²ç»åœ¨ 2019 å¹´åº•å½»åº•è§£æ•£äº†ï¼Œä½† PHP ä¾ç„¶å¾ˆåšæŒºï¼Œå¾ˆç‰›é€¼ã€‚</p>\n<p>ä¸‹é¢è®©æˆ‘æ¥è¯¦ç»†åœ°è¯´é“è¯´é“è¿™ 10 é—¨ç¼–ç¨‹è¯­è¨€ã€‚</p>\n<h3>01ã€Java</h3>\n<p>Java å…¶å®æ˜¯ C++ çš„ä¸€ä¸ªæ›¿ä»£å“ï¼ŒSun å…¬å¸åŸæœ¬æƒ³å¼€å‘ä¸€ç§æ¯” C++ æ›´ç®€å•çš„é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼Œèµ·åˆå« Oakã€‚ç»“æœæ²¡æƒ³åˆ°ï¼Œéšç€æ—¶é—´çš„æµé€ï¼Œå› ä¸º Java æ›´å®¹æ˜“å­¦ä¹ ï¼Œè·¨å¹³å°ï¼Œå°±å¯¼è‡´ Java çš„æ™®åŠç¨‹åº¦è¿œè¿œåœ°è¶…è¿‡äº† C++ã€‚</p>\n<p>è¯´å¥ä¸é‚£ä¹ˆä¼˜é›…çš„è¯ï¼Œå°±å¥½åƒç‹—è¡€å‰§é‡Œå°ä¸‰ä¸Šä½çš„æ¡¥æ®µä¸€æ ·ã€‚</p>\n<p>åœ¨ Java è™šæ‹Ÿæœºçš„å¸®åŠ©ä¸‹ï¼ŒJava å¯ä»¥æ— éšœç¢çš„åœ¨ Linuxã€Windowsã€Mac-OS ç­‰å¤šç§æ“ä½œç³»ç»Ÿä¸‹è‡ªç”±åœ°ç©¿æ¢­ï¼Œè¿™ä½¿å¾—å®ƒåœ¨ä¼ä¸šçº§å¼€å‘ä¸­éå¸¸å—æ¬¢è¿ã€‚</p>\n<p>Java å¯ä»¥åšç½‘ç«™å¼€å‘ã€åšå®‰å“å¼€å‘ã€åšæ¡Œé¢çº§åº”ç”¨å¼€å‘ï¼ˆEclipseã€NetBeans ç­‰ç­‰ï¼‰ã€åšæ¸¸æˆå¼€å‘ï¼ˆæˆ‘çš„ä¸–ç•Œï¼‰ã€‚</p>\n<p>æ¥ä¸€å‘ Java ç‰ˆçš„ Hello World å§ï¼š</p>\n<pre><code class=\"java\">public class HelloWorld {\n public static void main(String[] args) {\n  System.out.println(\"Hello World\");\n }\n}</code></pre>\n<h3>02ã€C++</h3>\n<p>C++ï¼Œä»åå­—ä¸Šå°±å¯ä»¥çœ‹å¾—å‡ºæ¥ï¼Œå®ƒæ˜¯ C è¯­è¨€çš„äº²å„¿å­ï¼Œæ˜¯å¯¹ C è¯­è¨€çš„æ‰©å±•ï¼Œæ—¨åœ¨ä¸º C è¯­è¨€åˆ›é€ å‡ºé¢å‘å¯¹è±¡çš„åŠŸèƒ½ã€‚</p>\n<p>éšç€æ—¶é—´çš„å‘å±•ï¼ŒC++ è¿›ä¸€æ­¥å‘å±•ä¸ºå…·æœ‰æœ€ç›´æ¥çš„å†…å­˜è®¿é—®å’Œå®Œæ•´ç¡¬ä»¶æ§åˆ¶çš„é€šç”¨è¯­è¨€ã€‚æ­£å› ä¸º C++ æä¾›äº†æœ€å¹¿æ³›çš„é€šç”¨åŠŸèƒ½ï¼Œå°±å¯¼è‡´æŒæ¡èµ·æ¥æœ‰ä¸€å®šçš„éš¾åº¦ã€‚</p>\n<p>C++ å¯ä»¥åœ¨æ‰€æœ‰çš„å¹³å°ä¸Šè¿è¡Œï¼Œå¹¶ä¸”å¯ä»¥æœ‰æ•ˆåœ°åˆ©ç”¨ä»»ä½•ç±»å‹çš„ç¡¬ä»¶ï¼Œè¿™ä½¿å¾—å®ƒå¯ä»¥åœ¨èµ„æºå—åˆ°é™åˆ¶çš„å¹³å°ä¸Šå‘æŒ¥æœ€ä½³æ€§èƒ½ã€‚</p>\n<p>C++ å¯ä»¥åšæ¸¸æˆå¼€å‘ï¼ˆæ˜Ÿé™…äº‰éœ¸ã€é­”å…½äº‰éœ¸ï¼‰ï¼ŒåŠå…¬è½¯ä»¶ï¼ˆå¾®è½¯ Officeï¼‰ã€æ“ä½œç³»ç»Ÿï¼ˆWindowsï¼‰ã€å…³ç³»å‹æ•°æ®åº“ï¼ˆMySQLï¼‰ã€3D å¼•æ“ï¼ˆMicrosoft DirectXï¼‰ã€åµŒå…¥å¼å¼€å‘ã€‚</p>\n<p>æ¥ä¸€å‘ C++ ç‰ˆçš„ Hello World å§ï¼š</p>\n<pre><code class=\"c++\">#include&lt;iostream.h&gt;\nusing namespace std;\n \nvoid main() {\n    cout&lt;&lt;\"Hello World\";\n}</code></pre>\n<h3>03ã€C</h3>\n<p>C è¯­è¨€è¯ç”Ÿäº 1960 å¹´ï¼Œä½œè€…å›¢é˜Ÿå¯¹å®ƒåªæœ‰ä¸€ä¸ªè¦æ±‚ï¼šå¿…é¡»å¾—é€šç”¨ï¼Œå¹¶ä¸”èƒ½å¤Ÿæœ‰æ•ˆåœ°åˆ©ç”¨ç³»ç»Ÿèµ„æºã€‚å› ä¸ºåœ¨é‚£ä¸ªå¹´ä»£ï¼Œæ¯ä¸€ä¸ªå­—èŠ‚çš„å†…å­˜éƒ½æ˜¯æ˜‚è´µçš„ã€‚</p>\n<p>å°±åƒ C++ é‚£æ ·ï¼ŒC ä¹Ÿå¯ä»¥ç›´æ¥è®¿é—®å†…å­˜å¹¶ä¸”æ§åˆ¶ç¡¬ä»¶ã€‚C å’Œæ“ä½œç³»ç»Ÿç´§å¯†ç›¸å…³ï¼Œç¨‹åºå‘˜å¿…é¡»äº²è‡ªå¤„ç†å†…å­˜çš„åˆ†é…ç»†èŠ‚ï¼Œå› æ­¤å¾ˆéš¾æŒæ¡ã€‚å°½ç®¡ C è¯­è¨€è¯ç”Ÿçš„å¾ˆæ—©ï¼Œä½†å®ƒä»ç„¶æ˜¯ç›®å‰æœ€å¸¸ç”¨çš„ç¼–ç¨‹è¯­è¨€ä¹‹ä¸€ã€‚</p>\n<p>C è¯­è¨€çš„è®¾è®¡å½±å“äº†ä¼—å¤šåæ¥çš„ç¼–ç¨‹è¯­è¨€ï¼Œæ¯”å¦‚è¯´ C++ã€Rubyã€PHPã€Pythonã€Javaã€C# ç­‰ç­‰ã€‚</p>\n<p>C è¯­è¨€å¯ä»¥åšåµŒå…¥å¼å¼€å‘ï¼ˆå•ç‰‡æœºï¼‰ï¼ŒåŸºäºåµŒå…¥å¼æ“ä½œç³»ç»Ÿçš„åº”ç”¨è½¯ä»¶ã€é©±åŠ¨ç¨‹åºï¼Œé«˜æ€§èƒ½çš„ Web æœåŠ¡å™¨ï¼ˆNginxï¼‰ï¼Œå¸¸è§çš„ç¼“å­˜æ•°æ®åº“ï¼ˆRedisï¼‰ã€æ™ºèƒ½è®¾å¤‡æˆ–è€…ç‰©è”ç½‘è®¾å¤‡ä¸­çš„æ“ä½œç³»ç»Ÿï¼ˆè·¯ç”±å™¨ã€æ‘„åƒå¤´ï¼‰ç­‰ç­‰ã€‚æ®è¯´ï¼Œåæ­£èƒ½æƒ³åˆ°çš„ï¼Œéƒ½å¯ä»¥ç”¨ C åšï¼Œå°±çœ‹ä¼šä¸ä¼šåšã€‚</p>\n<p>æ¥ä¸€å‘ C ç‰ˆçš„ Hello World å§ï¼š</p>\n<pre><code class=\"c\">#include&lt;iostream.h&gt;\nvoid main()\n{\n    printf(\"Hello World\");\n}</code></pre>\n<h3>04ã€Python</h3>\n<p>Python è¯ç”Ÿäº 1990 å¹´ï¼Œä½œè€…å«å‰å¤šÂ·èŒƒç½—è‹å§†ï¼ˆGuido van Rossumï¼ŒPython ä¹‹çˆ¶ï¼‰ã€‚å¯ä»¥è¯´ï¼Œæ‰€æœ‰çš„ç¼–ç¨‹äººå‘˜éƒ½å–œæ¬¢ Pythonï¼Œå› ä¸ºå®ƒçš„å­¦ä¹ æˆæœ¬å¾ˆä½ï¼Œä½†åº”ç”¨çš„ç­‰çº§å¾ˆé«˜ï¼Œæ¯”å¦‚è¯´å½“ä¸‹éå¸¸æœ‰æ·±åº¦çš„äººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ ã€æ•°æ®åˆ†æã€‚</p>\n<p>Python çš„è¯­æ³•ç®€æ´è€Œä¼˜é›…ï¼Œç¤¾åŒºä¹Ÿéå¸¸æ´»è·ƒã€‚ä½†æœ‰ä¸€è¯´ä¸€ï¼Œ<a href=\"https://mp.weixin.qq.com/s/HVr0RCu0tWQkySOquJiVsA\" rel=\"nofollow noreferrer\">Python å²—ä½å¯¹å­¦å†çš„è¦æ±‚å¾ˆé«˜</a>ã€‚</p>\n<p>æ¥ä¸€å‘ Python ç‰ˆçš„ Hello World å§ï¼š</p>\n<pre><code class=\"python\">print(\"Hello World\")</code></pre>\n<h3>05ã€JavaScript</h3>\n<p>JavaScript æ˜¯ Brendan Eichï¼ˆåªç”¨äº† 10 å¤©æ—¶é—´å°±è®¾è®¡å‡ºæ¥äº†ï¼Œç‰›é€¼ï¼‰åœ¨ç¬¬ä¸€æ¬¡æµè§ˆå™¨å¤§æˆ˜æ—¶ä¸º Netscapeï¼ˆç½‘æ™¯å…¬å¸ï¼‰å¼€å‘çš„è„šæœ¬è¯­è¨€ã€‚å°½ç®¡ä¸€å¼€å§‹ JavaScript çš„è®¾è®¡ä¸å¤Ÿä¼˜è‰¯ï¼ˆæ¯•ç«Ÿæ—¶é—´çŸ­å•Šï¼‰ï¼Œä½†éšç€æ—¶é—´çš„æ¨ç§»ï¼ŒJavaScript é€æ¸å‘å±•ä¸ºä¸€ç§é«˜çº§çš„åŠ¨æ€ç¼–ç¨‹è¯­è¨€ã€‚</p>\n<blockquote>\n ä¸å…¶è¯´æˆ‘çˆ± Javascriptï¼Œä¸å¦‚è¯´æˆ‘æ¨å®ƒã€‚å®ƒæ˜¯ C è¯­è¨€å’Œ Self è¯­è¨€ä¸€å¤œæƒ…çš„äº§ç‰©ã€‚åå…«ä¸–çºªè‹±å›½æ–‡å­¦å®¶çº¦ç¿°é€Šåšå£«è¯´å¾—å¥½ï¼š'å®ƒçš„ä¼˜ç§€ä¹‹å¤„å¹¶éåŸåˆ›ï¼Œå®ƒçš„åŸåˆ›ä¹‹å¤„å¹¶ä¸ä¼˜ç§€ã€‚'\n</blockquote>\n<p>ä»¥ä¸Š Brendan Eich å¯¹ JavaScript çš„è¯„ä»·ï¼Œè¯»å®Œæ˜¯ä¸æ˜¯æ„Ÿè§‰å¥½æ°”å•Šâ€”â€”ç«Ÿç„¶çœ‹ä¸èµ·è‡ªå·±çš„äº²ç”Ÿå„¿å­ï¼Œå“ˆå“ˆã€‚</p>\n<p>æœ‰å¤§ä½¬æ›¾è¯´ï¼Œâ€œJavaScript æ˜¯äº’è”ç½‘çš„èƒ¶å¸¦ã€‚â€è¿™ä¸ªç§°èµéå¸¸é«˜ã€‚HTML è´Ÿè´£ç»“æ„ï¼Œ CSS è´Ÿè´£å±•ç¤ºï¼Œ è€Œ JavaScript è´Ÿè´£é€»è¾‘ï¼Œç½‘é¡µå‰ç«¯ç¼–ç¨‹çš„ä¸‰å‰‘å®¢å½¢æˆäº†ã€‚ </p>\n<p>ExtJSã€prototypeã€JQuery è¿™äº›åŸºäº JavaScript çš„æ¡†æ¶æ›´æ˜¯æŠŠ JavaScript æ¨å‘äº†å·…å³°ã€‚éšç€ Node.js çš„å‡ºç°ï¼ŒJavaScript è¿™ç§å®¢æˆ·ç«¯çš„è„šæœ¬è¯­è¨€ç«Ÿç„¶å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯ç«‹è¶³äº†ã€‚</p>\n<p>ç°åœ¨éå¸¸ç«çƒ­çš„å‰ç«¯æ¡†æ¶ï¼ŒVue.js å°±æ˜¯ç”¨ JavaScript ç¼–å†™çš„ï¼Œå¯ä»¥è¿™è¯´ï¼Œæƒ³ä»äº‹å‰ç«¯å¼€å‘å·¥ä½œçš„è¯ï¼ŒJavaScript æ˜¯å¿…å­¦çš„ï¼</p>\n<p>æ¥ä¸€å‘ JavaScript ç‰ˆçš„ Hello World å§ï¼š</p>\n<pre><code class=\"js\">&lt;script&gt;\n alert('Hello World');\n&lt;/script&gt;</code></pre>\n<h3>06ã€C</h3>\n<p>ä¸€çœ‹åå­—ï¼Œå°±çŸ¥é“ C# å’Œ C/C++ æœ‰ç€äº²å¯†çš„å…³ç³»ï¼Œå¾®è½¯æŠŠ C# è®¾è®¡æˆå…·æœ‰é¢å‘å¯¹è±¡çš„ï¼Œåƒ C ä¸€æ ·çš„ç¼–ç¨‹è¯­è¨€ã€‚</p>\n<p>æœ€åˆï¼ŒC# è¢«çœ‹ä½œæ˜¯ Java çš„å¤åˆ¶å“ï¼Œå®ƒä»¬ä¹‹é—´æœ‰ç€æƒŠäººçš„ç›¸ä¼¼ä¹‹å¤„ï¼Œæ¯”å¦‚è¯´ç»§æ‰¿ã€æ¥å£ï¼Œä»¥åŠä¸ Java å‡ ä¹åŒæ ·çš„è¯­æ³•ï¼ŒåŒæ ·éœ€è¦å…ˆç¼–è¯‘åè¿è¡Œã€‚éšç€æ—¶é—´çš„å‘å±•ï¼Œä»¥åŠå¾®è½¯ä¸ºä¹‹ä»˜å‡ºçš„å·¨å¤§åŠªåŠ›ï¼Œ C# æ²‰æ·€äº†ä¸°å¯Œçš„ç±»åº“å’Œæ¡†æ¶ï¼Œå¼€å‘äººå‘˜å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šå¿«é€Ÿåœ°ç¼–å†™å„ç§åŸºäº .NET å¹³å°çš„åº”ç”¨ç¨‹åºã€‚</p>\n<p>éšç€ Unity3D çš„å‡ºç°ï¼Œè·¨å¹³å°çš„ C# ç»ˆäºå¯ä»¥å¤§å±•æ‹³è„šäº†ï¼Œåœ¨å¼€å‘æ¸¸æˆæ–¹é¢çš„ä¼˜åŠ¿å·¨å¤§ï¼Œæ¯”å¦‚è¯´ç¼–è¯‘é€Ÿåº¦å¿«ã€ç±»åº“å……è¶³ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¦çŸ¥é“ C# èƒŒåçš„å¤§å±±æ˜¯è°ï¼Œå¾®è½¯å•Šï¼</p>\n<p>æ¥ä¸€å‘ C# ç‰ˆçš„ Hello World å§ï¼š</p>\n<pre><code class=\"c#\">namespace HelloWorld\n{\n    class Hello\n    {\n        static void Main(string[] args)\n        {\n            Console.WriteLine(\"Hello World\");\n        }\n    }\n}</code></pre>\n<h3>07ã€Swift</h3>\n<p>å…³äº Swiftï¼Œç›´æ¥æ¥çœ‹è‹¹æœå®˜æ–¹ç»™å‡ºçš„ä»‹ç»å§ï¼š</p>\n<blockquote>\n Swift æ˜¯ä¸€ç§å¼ºåŠ²è€Œç›´è§‚çš„ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒç”± Apple åˆ›é€ ï¼Œå¯ç”¨æ¥ä¸º iOSã€Macã€Apple TV å’Œ Apple Watch å¼€å‘ appã€‚å®ƒæ—¨åœ¨ä¸ºå¼€å‘è€…æä¾›å……åˆ†çš„è‡ªç”±ã€‚Swift æ˜“ç”¨å¹¶ä¸”å¼€æºï¼Œåªè¦æœ‰æƒ³æ³•ï¼Œè°éƒ½å¯ä»¥åˆ›é€ éå‡¡ã€‚\n</blockquote>\n<p>Swift æ˜¯ä¸€ç§å¿«é€Ÿè€Œé«˜æ•ˆçš„è¯­è¨€ï¼Œèƒ½å¤Ÿæä¾›å®æ—¶åé¦ˆï¼Œè€Œä¸”å¯ä»¥è¢«æ— ç¼é›†æˆåˆ°ç°æœ‰çš„ Objective-C ä»£ç ä¸­ï¼Œå› æ­¤ï¼Œå¼€å‘è€…èƒ½å¤Ÿç¼–å†™å®‰å…¨è€Œå¯é çš„ä»£ç ï¼Œå¹¶åœ¨èŠ‚çœæ—¶é—´çš„åŒæ—¶ï¼Œåˆ›é€ å‡ºéå¸¸ä¸°å¯Œçš„ app ä½“éªŒã€‚</p>\n<p>æ¥ä¸€å‘ Swift ç‰ˆçš„ Hello World å§ï¼š</p>\n<pre><code class=\"swift\">print(\"Hello World\")</code></pre>\n<h3>08ã€Go</h3>\n<p>Go çš„äº²çˆ¹æ˜¯ Googleï¼Œåˆæ˜¯ä¸€å®¶äº’è”ç½‘å·¨å¤´ï¼Œå¯ä»¥æƒ³è±¡å®ƒæœªæ¥çš„æ½œåŠ›ã€‚</p>\n<p>Go è¯­è¨€çš„è®¾è®¡éå¸¸ç²¾è‡´ï¼Œç”¨èµ·æ¥ä¹Ÿéå¸¸ç®€å•ï¼Œè§£å†³å¼€å‘æ‰©å±•æ–¹é¢çš„èƒ½åŠ›ä¹Ÿæ¯”è¾ƒå‡ºä¼—ã€‚å…³é”®æ˜¯å­¦ä¹ èµ·æ¥ä¹Ÿéå¸¸å®¹æ˜“ä¸Šæ‰‹ï¼Œè¿™äº›ä¼˜ç‚¹ä¿ƒä½¿ Go è¯­è¨€çš„å¢é•¿éå¸¸å¿«ã€‚</p>\n<p>å›½å¤–å¦‚ Googleã€AWSã€Cloudflareã€CoreOS ç­‰ï¼Œå›½å†…å¦‚ä¸ƒç‰›ã€é˜¿é‡Œç­‰éƒ½å·²ç»å¼€å§‹å¤§è§„æ¨¡ä½¿ç”¨ Golang å¼€å‘å…¶äº‘è®¡ç®—ç›¸å…³çš„äº§å“ã€‚ å¯ä»¥è¯´å‰é€”éå¸¸å…‰æ˜ã€‚</p>\n<p>æ¥ä¸€å‘ Go ç‰ˆçš„ Hello World å§ï¼š</p>\n<pre><code class=\"go\">package main\nimport \"fmt\"\nfunc main() \n{\n     fmt.Println(\"Hello World\")\n}</code></pre>\n<h3>09ã€PHP</h3>\n<p>PHP ç”¨æ¥å¼€å‘ Web åº”ç”¨ç¨‹åºçš„å†å²å·²ç»è¶…è¿‡ 35 å¹´äº†ï¼Œå¯ä»¥è¯´æ˜¯è€èµ„å†äº†ã€‚å°½ç®¡æœ€è¿‘æµè¡Œåº¦åœ¨ä¸‹é™ï¼Œä½†ç˜¦æ­»çš„éª†é©¼æ¯”é©¬å¤§ã€‚</p>\n<p>PHP æ˜¯æœ€å¥½çš„ç¼–ç¨‹è¯­è¨€ï¼Œè¿™ä¸ªæ¢—æ˜¯ä»å“ªé‡Œæ¥çš„å‘¢ï¼Ÿæ˜¾ç„¶ä¸æ˜¯åæ§½å¤§ä¼šï¼è€Œæ˜¯ PHP çš„å®˜æ–¹æ–‡æ¡£ï¼</p>\n<blockquote>\n PHP is the best language for web programming, but what about other languages?\n</blockquote>\n<p>ä¸‹å›¾æ˜¯ PHP æ˜¯æœ€å¥½çš„ç¼–ç¨‹è¯­è¨€çš„ç¡®å‡¿è¯æ®ã€‚<br><img src=\"https://segmentfault.com/img/remote/1460000023699212\" alt=\"\" title=\"\" /></br></p>\n<p>2010 å¹´å‰åï¼ŒPHP åœ¨ Web å¼€å‘ä¸­ä¸€ç›´å¤„äºç‹è€…çš„åœ°ä½ï¼Œå°¤å…¶æ˜¯ WordPress ç­‰å†…å®¹ç®¡ç†å¹³å°çš„æµè¡Œï¼Œå†åŠ ä¸Šâ€œæ‰ç”·â€çš„ Facebookï¼ˆPHP å¼€å‘çš„ï¼‰çš„çƒ˜æ‰˜ï¼Œæ›´åŠ å·©å›ºäº† PHP åœ¨ä¸šç•Œçš„åœ°ä½ã€‚</p>\n<p>æˆ‘åœ¨ 2013 å¹´ åº•å‡†å¤‡å›æ´›é˜³çš„æ—¶å€™ï¼Œè¿˜å­¦ä¹ äº†ä¸‰ä¸ªæœˆçš„ PHPã€‚æ—¶éš”å¤šå¹´ï¼Œä¸‹é¢è¿™æœ¬ä¹¦è¿˜èººåœ¨æˆ‘å®¶çš„ä¹¦æ¶ä¸Šç§¯ç°ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023699213\" alt=\"\" title=\"\" /></p>\n<p>å¥½äº†ï¼Œæ¥ä¸€å‘ PHP ç‰ˆçš„ Hello World å§ï¼š</p>\n<pre><code class=\"go\">&lt;?php\necho \"Hello World\";\n?&gt;</code></pre>\n<h3>10ã€Ruby</h3>\n<p>Ruby æœ€åˆæ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„è„šæœ¬ç¼–ç¨‹è¯­è¨€ï¼Œä½†æ˜¯éšç€æ—¶é—´çš„æµé€ï¼Œå®ƒé€æ¸å‘å±•æˆä¸ºä¸€ç§è§£é‡Šæ€§çš„é«˜çº§é€šç”¨ç¼–ç¨‹è¯­è¨€ã€‚å®ƒçš„å­¦ä¹ æ›²çº¿ç›¸å½“å¹³å¦ï¼Œéå¸¸æœ‰åŠ©äºæé«˜å¼€å‘äººå‘˜çš„ç”Ÿäº§åŠ›ã€‚</p>\n<p>Ruby çš„ä½œè€…æ¾æœ¬è¡Œå¼˜æ›¾è¯´è¿‡ä¸€æ®µéå¸¸ç»å…¸çš„è¯ï¼š</p>\n<blockquote>\n â€œ äººä»¬ç‰¹åˆ«æ˜¯ç”µè„‘å·¥ç¨‹å¸ˆä»¬ï¼Œå¸¸å¸¸ä»æœºå™¨ç€æƒ³ã€‚ä»–ä»¬è®¤ä¸ºï¼šâ€˜è¿™æ ·åšï¼Œæœºå™¨å°±èƒ½è¿è¡Œçš„æ›´å¿«ï¼›è¿™æ ·åšï¼Œæœºå™¨è¿è¡Œæ•ˆç‡æ›´é«˜ï¼›è¿™æ ·åšï¼Œæœºå™¨å°±ä¼šæ€æ ·æ€æ ·æ€æ ·ã€‚â€™å®é™…ä¸Šï¼Œæˆ‘ä»¬éœ€è¦ä»äººçš„è§’åº¦è€ƒè™‘é—®é¢˜ï¼Œäººä»¬æ€æ ·ç¼–å†™ç¨‹åºæˆ–è€…æ€æ ·ä½¿ç”¨æœºå™¨ä¸Šåº”ç”¨ç¨‹åºã€‚æˆ‘ä»¬æ˜¯ä¸»äººï¼Œä»–ä»¬æ˜¯ä»†äººã€‚ â€\n</blockquote>\n<p>Ruby æ­£æ˜¯åŸºäºè¿™ç§ç†å¿µäº§ç”Ÿçš„ã€‚ç½‘ä¸Šæœ‰å¥è¯æ˜¯è¿™æ ·è¯´çš„ï¼Œå­¦ä¹  Ruby on Rails èƒ½è®©ä½ çœ‹åˆ° Web æ¡†æ¶é¡¶ç«¯çš„æ™¯è‰²ã€‚å¬è¯´ï¼ŒGitHub å®˜ç½‘æ˜¯é€šè¿‡ Ruby on Rails å¼€å‘çš„ï¼ˆä¸å‡†ç¡®ï¼Œä¸çŸ¥é“æœ‰æ²¡æœ‰åŒå­¦å¯ä»¥ç¡®è®¤ä¸‹ï¼‰ã€‚</p>\n<p>JavaEye çš„åˆ›å§‹äººèŒƒå‡¯æ›¾è¯´ï¼š</p>\n<blockquote>\n åœ¨æˆ‘ä»¬å›½å†…ï¼ŒRuby æ˜¯ä¸ªå°ä¼—çš„ç¼–ç¨‹è¯­è¨€ï¼Œä½†åœ¨ç¡…è°·ï¼ŒRuby å¾ˆç«ï¼Œè¢«èª‰ä¸ºäº‘è®¡ç®—æ—¶ä»£çš„ Web ç¼–ç¨‹è¯­è¨€ã€‚\n</blockquote>\n<p>å½“ç„¶äº†ï¼Œä¹‹æ‰€ä»¥æŠŠ Ruby æ”¾åœ¨æœ€åä¸€ä½ï¼ŒåŒå­¦ä»¬ä¸€å®šæ‡‚æˆ‘çš„æ„æ€ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023699214\" alt=\"\" title=\"\"><br>æœ€åï¼Œå¸Œæœ›åŒå­¦ä»¬èƒ½å¤Ÿä»è¿™ 10 é—¨ç¼–ç¨‹è¯­è¨€ä¸­é€‰æ‹©ä¸€é—¨è‡ªå·±å–œæ¬¢çš„ï¼Œæ·±å…¥ç ”ç©¶ï¼Œæ— è®ºæ˜¯å“ªé—¨è¯­è¨€ï¼Œæˆ‘ç›¸ä¿¡ï¼Œåªè¦ä½ ç²¾é€šäº†ï¼Œå°±ä¸€å®šèƒ½å¤Ÿæ‰¾åˆ°è‡ªå·±å¿ƒä»ªçš„å·¥ä½œï¼Œå¦‚æœä½ åªæ˜¯æµ…å°è¾„æ­¢ï¼Œé‚£å°±ä¸å¥½æ„æ€å‘µå‘µäº†ã€‚</br></img></p>\n<hr>\n <p>æˆ‘æ˜¯æ²‰é»˜ç‹äºŒï¼Œä¸€æšæœ‰é¢œå€¼å´å‡è£…é æ‰åè‹Ÿä¸”çš„ç¨‹åºå‘˜ã€‚<strong>å…³æ³¨å³å¯æå‡å­¦ä¹ æ•ˆç‡ï¼Œåˆ«å¿˜äº†ä¸‰è¿å•Šï¼Œç‚¹èµã€æ”¶è—ã€ç•™è¨€ï¼Œæˆ‘ä¸æŒ‘ï¼Œå¥¥åˆ©ç»™ğŸŒ¹</strong>ã€‚</p>\n <p>æ³¨ï¼šå¦‚æœæ–‡ç« æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿æ¯«ä¸ç•™æƒ…åœ°æŒ‡æ­£ã€‚</p>\n <p>å¦‚æœä½ è§‰å¾—æ–‡ç« å¯¹ä½ æœ‰äº›å¸®åŠ©ï¼Œæ¬¢è¿å¾®ä¿¡æœç´¢ã€Œ<strong>æ²‰é»˜ç‹äºŒ</strong>ã€ç¬¬ä¸€æ—¶é—´é˜…è¯»ï¼›æœ¬æ–‡&nbsp;<strong>GitHub</strong>&nbsp;<a href=\"https://github.com/itwanger/itwanger.github.io\" rel=\"nofollow noreferrer\">github.com/itwanger</a>&nbsp;å·²æ”¶å½•ï¼Œæ¬¢è¿ starã€‚</p>\n</hr>","descriptionType":"html","publishedDate":"Thu, 20 Aug 2020 06:19:49 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/remote/1460000023699209","linkMd5":"fbe29875f9063bd2517a65d848a2914c","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn51@2020_5/2020/08/24/23-08-22-960_ae361416bba7e1ff.webp","destWidth":459,"destHeight":412,"sourceBytes":216965,"destBytes":14810,"author":"æ²‰é»˜ç‹äºŒ","articleImgCdnMap":{"https://segmentfault.com/img/remote/1460000023699209":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn51@2020_5/2020/08/24/23-08-22-960_ae361416bba7e1ff.webp","https://segmentfault.com/img/remote/1460000023699210":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn26@2020_5/2020/08/24/23-08-43-739_f76cb0b6b146d3e0.webp","https://segmentfault.com/img/remote/1460000023699211":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn29@2020_5/2020/08/24/23-08-43-675_a2f4276387b1f0d3.webp","https://segmentfault.com/img/remote/1460000023699212":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn34@2020_6/2020/08/24/23-08-43-818_9d28dfb62c6fab5b.webp","https://segmentfault.com/img/remote/1460000023699213":"https://cdn.jsdelivr.net/gh/myreaderx14/cdn38@2020_5/2020/08/24/23-08-43-614_dc0539cebd31b98e.webp","https://segmentfault.com/img/remote/1460000023699214":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn42@2020_1/2020/08/24/23-08-43-808_86b4044738c9cb37.webp"},"publishedOrCreatedDate":1598310388570},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"æµ…å…¥æµ…å‡ºDubbo","link":"https://segmentfault.com/a/1190000023668057","description":"<h1>å‰è¨€</h1>\n<p>æ¥ä¸‹æ¥ä¸€æ®µæ—¶é—´æ•–ä¸™å°†å¸¦å¤§å®¶å¼€å¯ç´§å¼ åˆºæ¿€çš„ Dubbo ä¹‹æ—…ï¼æ˜¯çš„è¦å¼€å§‹å†™ Dubbo ç³»åˆ—çš„æ–‡ç« äº†ï¼Œä¹‹å‰æˆ‘å·²ç»å†™è¿‡ä¸€ç¯‡æ¶æ„æ¼”è¿›çš„æ–‡ç« ï¼Œä¹Ÿè¯´æ˜äº†å¾®æœåŠ¡çš„æ™®åŠåŒ–ä»¥åŠé‡è¦æ€§ï¼ŒæœåŠ¡åŒ–åœºæ™¯ä¸‹éšä¹‹è€Œæ¥çš„å°±æ˜¯æœåŠ¡ä¹‹é—´çš„é€šä¿¡é—®é¢˜ï¼Œé‚£æœåŠ¡é—´çš„é€šä¿¡è„‘æµ·ä¸­æƒ³åˆ°çš„å°±æ˜¯ RPCï¼Œè¯´åˆ° RPC å°±ç¦»ä¸å¼€å’±ä»¬çš„ Dubboã€‚</p>\n<p><img src=\"https://tva1.sinaimg.cn/large/007S8ZIlly1ghu96ukhevj30h203mmxm.jpg\" alt=\"\" title=\"\" /></p>\n<p>è¿™ç¯‡æ–‡ç« æ•–ä¸™å…ˆå¸¦ç€å¤§å®¶æ¥<strong>æ€»è§ˆå…¨å±€</strong>ï¼Œä¸€èˆ¬è€Œè¨€ç†Ÿæ‚‰ä¸€ä¸ªæ¡†æ¶ä½ è¦å…ˆçŸ¥é“è¿™ç©æ„æ˜¯åšä»€ä¹ˆçš„ï¼Œèƒ½è§£å†³ä»€ä¹ˆç—›ç‚¹ï¼Œæ ¸å¿ƒçš„æ¨¡å—æ˜¯ä»€ä¹ˆï¼Œå¤§è‡´è¿è½¬æµç¨‹æ˜¯æ€æ ·çš„ã€‚</p>\n<p>ä½ è¦ä¸€æ¥å°±æ‰å…¥ç»†èŠ‚ä¹‹ä¸­æ— æ³•è‡ªæ‹”ï¼Œä¸€æ³¢ DFS ç›´æ¥è¢«åŠé€€çš„å¯èƒ½æ€§é«˜è¾¾99.99%ï¼Œæ‰€ä»¥æœ¬æš–ç”·æ•–ä¸™å°†å¸¦å¤§å®¶å…ˆè¿‡ä¸€é <strong>Dubbo çš„ç®€ä»‹ã€æ€»ä½“åˆ†å±‚ã€æ ¸å¿ƒç»„ä»¶ä»¥åŠå¤§è‡´è°ƒç”¨æµç¨‹</strong>ã€‚</p>\n<p>ä¸ä»…å¦‚æ­¤æˆ‘è¿˜ä¼šå¸¦ç€å¤§å®¶è¿‡ä¸€éå¦‚æœè¦è®©ä½ <strong>è®¾è®¡ä¸€ä¸ª RPC æ¡†æ¶ä½ çœ‹çœ‹éƒ½éœ€è¦ä»€ä¹ˆåŠŸèƒ½</strong>ï¼Ÿè¿™æ³¢æ“ä½œä¹‹åä½ ä¼šå‘ç°å˜¿å˜¿ Dubbo æ€ä¹ˆè®¾è®¡çš„å’Œæˆ‘æƒ³çš„ä¸€æ ·å‘¢ï¼ŸçœŸæ˜¯è‹±é›„æ‰€è§ç•¥åŒå•Šï¼</p>\n<p>è€Œä¸”æˆ‘è¿˜ä¼šå†™ä¸€ä¸ªç®€å•ç‰ˆ RPC æ¡†æ¶å®ç°ï¼Œè®©å¤§å®¶æ˜ç™½ RPC åˆ°åº•æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p>\n<p>å¦‚æœçœ‹äº†è¿™ç¯‡æ–‡ç« ä½ è¦è¿˜æ˜¯ä¸çŸ¥é“ Dubbo æ˜¯å•¥ï¼Œæˆ‘å¯ä»¥è¦åŠé€€äº†ã€‚</p>\n<p><img src=\"https://tva1.sinaimg.cn/large/007S8ZIlly1ghu970lp1rj30me0hq494.jpg\" alt=\"\" title=\"\" /></p>\n<p>æˆ‘ä»¬å…ˆæ¥è°ˆä¸€è°ˆä»€ä¹ˆå« RPC ï¼Œæˆ‘å‘ç°æœ‰å¾ˆå¤šåŒå­¦ä¸å¤ªäº†è§£è¿™ä¸ªæ¦‚å¿µï¼Œè¿˜æœ‰äººæŠŠ RPC å’Œ HTTP æ¥è¿›è¡Œå¯¹æ¯”ã€‚æ‰€ä»¥å’±ä»¬å…ˆæ¥è¯´è¯´ä»€ä¹ˆæ˜¯ RPCã€‚</p>\n<h1>ä»€ä¹ˆæ˜¯ RPC</h1>\n<p>RPCï¼ŒRemote Procedure Call å³è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œè¿œç¨‹è¿‡ç¨‹è°ƒç”¨å…¶å®å¯¹æ ‡çš„æ˜¯æœ¬åœ°è¿‡ç¨‹è°ƒç”¨ï¼Œæœ¬åœ°è¿‡ç¨‹è°ƒç”¨ä½ ç†Ÿæ‚‰å§ï¼Ÿ</p>\n<p>æƒ³æƒ³é‚£é’è‘±å²æœˆï¼Œä½ åœ¨å¤§å­¦èµ¶ç€æœŸæœ«å¤§ä½œä¸šï¼Œæ­£åœ¨æ”»å…‹å›¾ä¹¦ç®¡ç†ç³»ç»Ÿï¼Œä½ å¥‹ç¬”ç–¾ä¹¦ç–¯ç‹‚åœ°æ•²å‡»é”®ç›˜ï¼Œå®ç°äº†å›¾ä¹¦å€Ÿé˜…ã€å›¾ä¹¦å½’è¿˜ç­‰ç­‰æ¨¡å—ï¼Œä½ å®ç°çš„ä¸€ä¸ªä¸ªæ–¹æ³•ä¹‹é—´çš„è°ƒç”¨å°±å«æœ¬åœ°è¿‡ç¨‹è°ƒç”¨ã€‚</p>\n<p>ä½ è¦æ˜¯å’Œæˆ‘è¯´ä½ å®ç°å›¾ä¹¦é¦†é‡Œç³»ç»Ÿå·²ç»ç”¨äº†æœåŠ¡åŒ–ï¼Œæäº†è¿œç¨‹è°ƒç”¨äº†ï¼Œæˆ‘åªèƒ½å’Œä½ è¯´ä½ æœ‰ç‚¹ä¸œè¥¿ã€‚</p>\n<p><img src=\"https://tva1.sinaimg.cn/large/007S8ZIlly1ghu973myg2j3073073q3c.jpg\" alt=\"\" title=\"\" /></p>\n<p>ç®€å•çš„è¯´æœ¬æœºä¸Šå†…éƒ¨çš„æ–¹æ³•è°ƒç”¨éƒ½å¯ä»¥ç§°ä¸ºæœ¬åœ°è¿‡ç¨‹è°ƒç”¨ï¼Œè€Œè¿œç¨‹è¿‡ç¨‹è°ƒç”¨å®é™…ä¸Šå°±æŒ‡çš„æ˜¯ä½ æœ¬åœ°è°ƒç”¨äº†è¿œç¨‹æœºå­ä¸Šçš„æŸä¸ªæ–¹æ³•ï¼Œè¿™å°±æ˜¯è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ã€‚</p>\n<p><img src=\"https://tva1.sinaimg.cn/large/007S8ZIlly1ghu975kcouj30ny0c074q.jpg\" alt=\"\" title=\"\" /></p>\n<p>æ‰€ä»¥è¯´ RPC å¯¹æ ‡çš„æ˜¯æœ¬åœ°è¿‡ç¨‹è°ƒç”¨ï¼Œè‡³äº RPC è¦å¦‚ä½•è°ƒç”¨è¿œç¨‹çš„æ–¹æ³•å¯ä»¥èµ° HTTPã€ä¹Ÿå¯ä»¥æ˜¯åŸºäº TCP è‡ªå®šä¹‰åè®®ã€‚</p>\n<p>æ‰€ä»¥è¯´ä½ è®¨è®º RPC å’Œ HTTP å°±ä¸æ˜¯ä¸€ä¸ªå±‚çº§çš„ä¸œè¥¿ã€‚</p>\n<p>è€Œ <strong>RPC æ¡†æ¶å°±æ˜¯è¦å®ç°åƒé‚£å°åŠ©æ‰‹ä¸€æ ·çš„ä¸œè¥¿ï¼Œç›®çš„å°±æ˜¯è®©æˆ‘ä»¬ä½¿ç”¨è¿œç¨‹è°ƒç”¨åƒæœ¬åœ°è°ƒç”¨ä¸€æ ·ç®€å•æ–¹ä¾¿ï¼Œå¹¶ä¸”è§£å†³ä¸€äº›è¿œç¨‹è°ƒç”¨ä¼šå‘ç”Ÿçš„ä¸€äº›é—®é¢˜</strong>ï¼Œä½¿ç”¨æˆ·ç”¨çš„æ— æ„ŸçŸ¥ã€èˆ’å¿ƒã€æ”¾å¿ƒã€é¡ºå¿ƒï¼Œå®ƒå¥½æˆ‘ä¹Ÿå¥½ï¼Œå¿«ä¹æ²¡çƒ¦æ¼ã€‚</p>\n<h1>å¦‚ä½•è®¾è®¡ä¸€ä¸ª RPC æ¡†æ¶</h1>\n<p>åœ¨æ˜ç¡®äº†ä»€ä¹ˆæ˜¯ RPCï¼Œä»¥åŠ RPC æ¡†æ¶çš„ç›®çš„ä¹‹åï¼Œå’±ä»¬æƒ³æƒ³å¦‚æœè®©ä½ åšä¸€æ¬¾ RPC æ¡†æ¶ä½ è¯¥å¦‚ä½•è®¾è®¡ï¼Ÿ</p>\n<p><img src=\"https://tva1.sinaimg.cn/large/007S8ZIlly1ghu978x2kog3064064tg4.gif\" alt=\"\" title=\"\" /></p>\n<h2>æœåŠ¡æ¶ˆè´¹è€…</h2>\n<p>æˆ‘ä»¬å…ˆä»æ¶ˆè´¹è€…æ–¹(ä¹Ÿå°±æ˜¯è°ƒç”¨æ–¹)æ¥çœ‹éœ€è¦äº›ä»€ä¹ˆï¼Œé¦–å…ˆæ¶ˆè´¹è€…é¢å‘æ¥å£ç¼–ç¨‹ï¼Œæ‰€ä»¥éœ€è¦å¾—çŸ¥æœ‰å“ªäº›æ¥å£å¯ä»¥è°ƒç”¨ï¼Œå¯ä»¥é€šè¿‡<strong>å…¬ç”¨ jar åŒ…</strong>çš„æ–¹å¼æ¥ç»´æŠ¤æ¥å£ã€‚</p>\n<p>ç°åœ¨çŸ¥é“æœ‰å“ªäº›æ¥å£å¯ä»¥è°ƒç”¨äº†ï¼Œä½†æ˜¯åªæœ‰æ¥å£å•Šï¼Œå…·ä½“çš„å®ç°æ€ä¹ˆæ¥ï¼Ÿè¿™äº‹å¿…é¡»æ¡†æ¶ç»™å¤„ç†äº†ï¼æ‰€ä»¥è¿˜<strong>éœ€è¦æ¥ä¸ªä»£ç†ç±»</strong>ï¼Œè®©æ¶ˆè´¹è€…åªç®¡è°ƒï¼Œå•¥äº‹éƒ½åˆ«ç®¡äº†ï¼Œæˆ‘<strong>ä»£ç†å¸®ä½ æå®š</strong>ã€‚</p>\n<p>å¯¹äº†ï¼Œè¿˜éœ€è¦å‘Šè¯‰ä»£ç†ï¼Œä½ è°ƒç”¨çš„æ˜¯å“ªä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”å‚æ•°çš„å€¼æ˜¯ä»€ä¹ˆã€‚</p>\n<p>è™½è¯´ä»£ç†å¸®ä½ æå®šä½†æ˜¯ä»£ç†ä¹Ÿéœ€è¦çŸ¥é“å®ƒåˆ°åº•è¦è°ƒå“ªä¸ªæœºå­ä¸Šçš„è¿œç¨‹æ–¹æ³•ï¼Œæ‰€ä»¥<strong>éœ€è¦æœ‰ä¸ªæ³¨å†Œä¸­å¿ƒ</strong>ï¼Œè¿™æ ·è°ƒç”¨æ–¹ä»æ³¨å†Œä¸­å¿ƒå¯ä»¥çŸ¥æ™“å¯ä»¥è°ƒç”¨å“ªäº›æœåŠ¡æä¾›æ–¹ï¼Œä¸€èˆ¬è€Œè¨€æä¾›æ–¹ä¸æ­¢ä¸€ä¸ªï¼Œæ¯•ç«Ÿåªæœ‰ä¸€ä¸ªæŒ‚äº†é‚£ä¸å°±æ²¡äº†ã€‚</p>\n<p>æ‰€ä»¥æä¾›æ–¹ä¸€èˆ¬éƒ½æ˜¯é›†ç¾¤éƒ¨ç½²ï¼Œé‚£è°ƒç”¨æ–¹éœ€è¦é€šè¿‡<strong>è´Ÿè½½å‡è¡¡</strong>æ¥é€‰æ‹©ä¸€ä¸ªè°ƒç”¨ï¼Œå¯ä»¥é€šè¿‡<strong>æŸäº›ç­–ç•¥</strong>ä¾‹å¦‚åŒæœºæˆ¿ä¼˜å…ˆè°ƒç”¨å•Šå•¥çš„ã€‚</p>\n<p><img src=\"https://tva1.sinaimg.cn/large/007S8ZIlly1ghu97d1ky0j306g06dt9v.jpg\" alt=\"\" title=\"\" /></p>\n<p>å½“ç„¶è¿˜éœ€è¦æœ‰<strong>å®¹é”™æœºåˆ¶</strong>ï¼Œæ¯•ç«Ÿè¿™æ˜¯è¿œç¨‹è°ƒç”¨ï¼Œç½‘ç»œæ˜¯ä¸å¯é çš„ï¼Œæ‰€ä»¥å¯èƒ½éœ€è¦é‡è¯•ä»€ä¹ˆçš„ã€‚</p>\n<p>è¿˜è¦å’ŒæœåŠ¡æä¾›æ–¹<strong>çº¦å®šä¸€ä¸ªåè®®</strong>ï¼Œä¾‹å¦‚æˆ‘ä»¬å°±ç”¨ HTTP æ¥é€šä¿¡å°±å¥½å•¦ï¼Œä¹Ÿå°±æ˜¯å¤§å®¶è¦è®²ä¸€æ ·çš„è¯ï¼Œä¸ç„¶å¯èƒ½å¬ä¸æ‡‚äº†ã€‚</p>\n<p>å½“ç„¶åºåˆ—åŒ–å¿…ä¸å¯å°‘ï¼Œæ¯•ç«Ÿæˆ‘ä»¬æœ¬åœ°çš„ç»“æ„æ˜¯â€œç«‹ä½“â€çš„ï¼Œéœ€è¦åºåˆ—åŒ–ä¹‹åæ‰èƒ½ä¼ è¾“ï¼Œå› æ­¤è¿˜éœ€è¦<strong>çº¦å®šåºåˆ—åŒ–æ ¼å¼</strong>ã€‚</p>\n<p>å¹¶ä¸”è¿™è¿‡ç¨‹ä¸­é—´å¯èƒ½è¿˜éœ€è¦æºå…¥ä¸€äº› Filterï¼Œæ¥ä½œä¸€æ³¢ç»Ÿä¸€çš„å¤„ç†ï¼Œä¾‹å¦‚è°ƒç”¨è®¡æ•°å•Šç­‰ç­‰ã€‚</p>\n<p>è¿™äº›éƒ½æ˜¯æ¡†æ¶éœ€è¦åšçš„ï¼Œè®©æ¶ˆè´¹è€…åƒåœ¨è°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·ï¼Œæ— æ„ŸçŸ¥ã€‚</p>\n<h2>æœåŠ¡æä¾›è€…</h2>\n<p>æœåŠ¡æä¾›è€…è‚¯å®šè¦<strong>å®ç°å¯¹åº”çš„æ¥å£</strong>è¿™æ˜¯æ¯‹åº¸ç½®ç–‘çš„ã€‚</p>\n<p>ç„¶åéœ€è¦æŠŠè‡ªå·±çš„æ¥å£æš´éœ²å‡ºå»ï¼Œå‘<strong>æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±</strong>ï¼Œæš´éœ²è‡ªå·±æ‰€èƒ½æä¾›çš„æœåŠ¡ã€‚</p>\n<p>ç„¶åæœ‰æ¶ˆè´¹è€…è¯·æ±‚è¿‡æ¥éœ€è¦å¤„ç†ï¼Œæä¾›è€…éœ€è¦ç”¨å’Œæ¶ˆè´¹è€…<strong>åå•†å¥½çš„åè®®</strong>æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œç„¶ååš<strong>ååºåˆ—åŒ–</strong>ã€‚</p>\n<p>åºåˆ—åŒ–å®Œçš„è¯·æ±‚åº”è¯¥<strong>æ‰”åˆ°çº¿ç¨‹æ± é‡Œé¢åšå¤„ç†</strong>ï¼ŒæŸä¸ªçº¿ç¨‹æ¥å—åˆ°è¿™ä¸ªè¯·æ±‚ä¹‹åæ‰¾åˆ°å¯¹åº”çš„å®ç°è°ƒç”¨ï¼Œç„¶åå†<strong>å°†ç»“æœåŸè·¯è¿”å›</strong>ã€‚</p>\n<h2>æ³¨å†Œä¸­å¿ƒ</h2>\n<p>ä¸Šé¢å…¶å®æˆ‘ä»¬éƒ½æåˆ°äº†æ³¨å†Œä¸­å¿ƒï¼Œè¿™ä¸œè¥¿å°±ç›¸å½“äºä¸€ä¸ªå¹³å°ï¼Œå¤§å®¶åœ¨ä¸Šé¢æš´éœ²è‡ªå·±çš„æœåŠ¡ï¼Œä¹Ÿåœ¨ä¸Šé¢å¾—çŸ¥è‡ªå·±èƒ½è°ƒç”¨å“ªäº›æœåŠ¡ã€‚</p>\n<p>å½“ç„¶è¿˜èƒ½åšé…ç½®ä¸­å¿ƒï¼Œå°†é…ç½®é›†ä¸­åŒ–å¤„ç†ï¼ŒåŠ¨æ€å˜æ›´é€šçŸ¥è®¢é˜…è€…ã€‚</p>\n<h2>ç›‘æ§è¿ç»´</h2>\n<p>é¢å¯¹ä¼—å¤šçš„æœåŠ¡ï¼Œç²¾ç»†åŒ–çš„ç›‘æ§å’Œæ–¹ä¾¿çš„è¿ç»´å¿…ä¸å¯å°‘ã€‚</p>\n<p>è¿™ç‚¹å¾ˆå¤šå¼€å‘è€…åœ¨å¼€å‘çš„æ—¶å€™å¯Ÿè§‰ä¸åˆ°ï¼Œåˆ°ä½ çœŸæ­£ä¸Šçº¿å¼€å§‹è¿è¡Œç»´æŠ¤çš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰è‰¯å¥½çš„ç›‘æ§æªæ–½ï¼Œå¿«é€Ÿçš„è¿ç»´æ‰‹æ®µï¼Œåˆ°æ—¶å€™å°±æ˜¯ççœ¼çï¼æ‰‹è¶³æ— æªï¼Œç­‰ç€æŒ¨æ‰¹æŠŠï¼</p>\n<p>é‚£ç§ç—›è‹¦ä¸è¦é—®æˆ‘ä¸ºä»€ä¹ˆçŸ¥é“ï¼Œæˆ‘å°±æ˜¯çŸ¥é“ï¼</p>\n<p><img src=\"https://tva1.sinaimg.cn/large/007S8ZIlly1ghu97gshgmj306o06o0so.jpg\" alt=\"\" title=\"\" /></p>\n<h2>å°ç»“ä¸€ä¸‹</h2>\n<p>è®©æˆ‘ä»¬å°ç»“ä¸€ä¸‹ï¼Œå¤§è‡´ä¸Šä¸€ä¸ª RPC æ¡†æ¶éœ€è¦åšçš„å°±æ˜¯çº¦å®šè¦é€šä¿¡åè®®ï¼Œåºåˆ—åŒ–çš„æ ¼å¼ã€ä¸€äº›å®¹é”™æœºåˆ¶ã€è´Ÿè½½å‡è¡¡ç­–ç•¥ã€ç›‘æ§è¿ç»´å’Œä¸€ä¸ªæ³¨å†Œä¸­å¿ƒï¼</p>\n<h1>ç®€å•å®ç°ä¸€ä¸ª RPC æ¡†æ¶</h1>\n<p>æ²¡é”™å°±æ˜¯ç®€å•çš„å®ç°ï¼Œä¸Šé¢æˆ‘ä»¬åœ¨æ€è€ƒå¦‚ä½•è®¾è®¡ä¸€ä¸ª RPC æ¡†æ¶çš„æ—¶å€™æƒ³äº†å¾ˆå¤šï¼Œé‚£ç®—æ˜¯ç”Ÿäº§ç¯å¢ƒä½¿ç”¨çº§åˆ«çš„åŠŸèƒ½éœ€æ±‚äº†ï¼Œæˆ‘ä»¬è¿™æ˜¯ Demoï¼Œç›®çš„æ˜¯çªå‡º RPCæ¡†æ¶é‡ç‚¹åŠŸèƒ½ - <strong>å®ç°è¿œç¨‹è°ƒç”¨</strong>ã€‚</p>\n<p>æ‰€ä»¥å•¥ä¸ƒä¸ƒå…«å…«çš„éƒ½æ²¡ï¼Œå¹¶ä¸”æˆ‘ç”¨ä¼ªä»£ç æ¥å±•ç¤ºï¼Œå…¶å®ä¹Ÿå°±æ˜¯åˆ é™¤äº†ä¸€äº›ä¿æŠ¤æ€§å’Œçº¦æŸæ€§çš„ä»£ç ï¼Œå› ä¸ºçœ‹èµ·æ¥å¤ªå¤šäº†ä¸å¤ªç›´è§‚ï¼Œéœ€è¦ä¸€å † try-catch å•¥çš„ï¼Œå› æ­¤æˆ‘åˆ å‡äº†ä¸€äº›ï¼Œç›´å‡»é‡ç‚¹ã€‚</p>\n<p>Let's Do Itï¼</p>\n<p>é¦–å…ˆæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ¥å£å’Œä¸€ä¸ªç®€å•å®ç°ã€‚</p>\n<p>`public&nbsp;interface&nbsp;AobingService {&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;hello(String&nbsp;name);&nbsp;&nbsp; <br>}&nbsp; </br></br></p>\n<p>public&nbsp;class&nbsp;AobingServiceImpl&nbsp;implements&nbsp;AobingService {&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;hello(String&nbsp;name) {&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;\"Yo&nbsp;man&nbsp;Helloï¼ŒI&nbsp;am\"&nbsp;+&nbsp;name;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp; <br>}` </br></br></br></br></p>\n<p>ç„¶åæˆ‘ä»¬å†æ¥å®ç°æœåŠ¡æä¾›è€…æš´éœ²æœåŠ¡çš„åŠŸèƒ½ã€‚</p>\n<p>`public&nbsp;class&nbsp;AobingRpcFramework {&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;void&nbsp;export(Object&nbsp;service,&nbsp;int&nbsp;port)&nbsp;throws&nbsp;Exception {&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ServerSocket&nbsp;server&nbsp;=&nbsp;new&nbsp;ServerSocket(port); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(true)&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Socket&nbsp;socket&nbsp;=&nbsp;server.accept(); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new&nbsp;Thread(new&nbsp;Runnable()&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//ååºåˆ—åŒ– <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ObjectInputStream&nbsp;input&nbsp;=&nbsp;new&nbsp;ObjectInputStream(socket.getInputStream());&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;methodName&nbsp;=&nbsp;input.read();&nbsp;//è¯»å–æ–¹æ³•å <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Class&lt;?&gt;[]&nbsp;parameterTypes&nbsp;=&nbsp;(Class&lt;?&gt;[])&nbsp;input.readObject();&nbsp;//å‚æ•°ç±»å‹ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Object[]&nbsp;arguments&nbsp;=&nbsp;(Object[])&nbsp;input.readObject();&nbsp;//å‚æ•° <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Method&nbsp;method&nbsp;=&nbsp;service.getClass().getMethod(methodName,&nbsp;parameterTypes);&nbsp;&nbsp;//æ‰¾åˆ°æ–¹æ³• <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Object&nbsp;result&nbsp;=&nbsp;method.invoke(service,&nbsp;arguments);&nbsp;//è°ƒç”¨æ–¹æ³• <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;è¿”å›ç»“æœ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ObjectOutputStream&nbsp;output&nbsp;=&nbsp;new&nbsp;ObjectOutputStream(socket.getOutputStream()); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output.writeObject(result); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).start(); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;&lt;T&gt;&nbsp;T&nbsp;refer&nbsp;(Class&lt;T&gt;&nbsp;interfaceClass,&nbsp;String&nbsp;host,&nbsp;int&nbsp;port)&nbsp;throws&nbsp;Exception { <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;(T)&nbsp;Proxy.newProxyInstance(interfaceClass.getClassLoader(),&nbsp;new&nbsp;Class&lt;?&gt;[]&nbsp;{interfaceClass},&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new&nbsp;InvocationHandler()&nbsp;{&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;Object&nbsp;invoke(Object&nbsp;proxy,&nbsp;Method&nbsp;method,&nbsp;Object[]&nbsp;arguments)&nbsp;throws&nbsp;Throwable {&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Socket&nbsp;socket&nbsp;=&nbsp;new&nbsp;Socket(host,&nbsp;port);&nbsp;&nbsp;//æŒ‡å®š&nbsp;provider&nbsp;çš„&nbsp;ip&nbsp;å’Œç«¯å£ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ObjectOutputStream&nbsp;output&nbsp;=&nbsp;new&nbsp;ObjectOutputStream(socket.getOutputStream());&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output.write(method.getName());&nbsp;&nbsp;//ä¼ æ–¹æ³•å <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output.writeObject(method.getParameterTypes());&nbsp;&nbsp;//ä¼ å‚æ•°ç±»å‹ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output.writeObject(arguments);&nbsp;&nbsp;//ä¼ å‚æ•°å€¼ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ObjectInputStream&nbsp;input&nbsp;=&nbsp;new&nbsp;ObjectInputStream(socket.getInputStream());&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Object&nbsp;result&nbsp;=&nbsp;input.readObject();&nbsp;&nbsp;//è¯»å–ç»“æœ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;result;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp; <br>} <br>`</br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></p>\n<p>å¥½äº†ï¼Œè¿™ä¸ª RPC æ¡†æ¶å°±è¿™æ ·å¥½äº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Ÿå°±æ˜¯<strong>è°ƒç”¨è€…ä¼ é€’äº†æ–¹æ³•åã€å‚æ•°ç±»å‹å’Œå‚æ•°å€¼ï¼Œæä¾›è€…æ¥æ”¶åˆ°è¿™æ ·å‚æ•°ä¹‹åè°ƒç”¨å¯¹äºçš„æ–¹æ³•è¿”å›ç»“æœå°±å¥½äº†</strong>ï¼è¿™å°±æ˜¯è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ã€‚</p>\n<p>æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨</p>\n<p>`//æœåŠ¡æä¾›è€…åªéœ€è¦æš´éœ²å‡ºæ¥å£ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AobingService&nbsp;service&nbsp;=&nbsp;new&nbsp;AobingServiceImpl&nbsp;();&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AobingRpcFramework.export(service,&nbsp;2333);&nbsp;&nbsp; </br></br></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//æœåŠ¡è°ƒç”¨è€…åªéœ€è¦è®¾ç½®ä¾èµ– <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AobingService&nbsp;service&nbsp;=&nbsp;AobingRpcFramework.refer(AobingService.class,&nbsp;\"127.0.0.1\",&nbsp;2333);&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;service.hello();` </br></br></p>\n<p>çœ‹èµ·æ¥å¥½åƒå¥½ä¸é”™å“Ÿï¼Œä¸è¿‡è¿™å¾ˆæ˜¯ç®€é™‹ï¼Œç”¨ä½œ demo æœ‰åŠ©ç†è§£è¿˜æ˜¯æå¥½çš„ï¼</p>\n<p>æ¥ä¸‹æ¥å°±æ¥çœ‹çœ‹ Dubbo å§ï¼ä¸Šæ­£èœï¼</p>\n<h1>Dubbo ç®€ä»‹</h1>\n<p>Dubbo æ˜¯é˜¿é‡Œå·´å·´ 2011å¹´å¼€æºçš„ä¸€ä¸ªåŸºäº Java çš„ RPC æ¡†æ¶ï¼Œä¸­é—´æ²‰å¯‚äº†ä¸€æ®µæ—¶é—´ï¼Œä¸è¿‡å…¶ä»–ä¸€äº›ä¼ä¸šè¿˜åœ¨ç”¨ Dubbo å¹¶è‡ªå·±åšäº†æ‰©å±•ï¼Œæ¯”å¦‚å½“å½“ç½‘çš„ Dubboxï¼Œè¿˜æœ‰ç½‘æ˜“è€ƒæ‹‰çš„ Dubbokã€‚</p>\n<p>ä½†æ˜¯åœ¨ 2017 å¹´é˜¿é‡Œå·´å·´åˆé‡å¯äº†å¯¹ Dubbo ç»´æŠ¤ã€‚åœ¨ 2017 å¹´è£è·äº†å¼€æºä¸­å›½ 2017 æœ€å—æ¬¢è¿çš„ä¸­å›½å¼€æºè½¯ä»¶ Top 3ã€‚</p>\n<p>åœ¨ 2018 å¹´å’Œ Dubbox è¿›è¡Œäº†åˆå¹¶ï¼Œå¹¶ä¸”è¿›å…¥ Apache å­µåŒ–å™¨ï¼Œåœ¨ 2019 å¹´æ¯•ä¸šæ­£å¼æˆä¸º Apache é¡¶çº§é¡¹ç›®ã€‚</p>\n<p>ç›®å‰ Dubbo ç¤¾åŒºä¸»åŠ›ç»´æŠ¤çš„æ˜¯ 2.6.x å’Œ 2.7.x ä¸¤å¤§ç‰ˆæœ¬ï¼Œ2.6.x ç‰ˆæœ¬ä¸»è¦æ˜¯ bug ä¿®å¤å’Œå°‘é‡åŠŸèƒ½å¢å¼ºä¸ºå‡†ï¼Œæ˜¯ç¨³å®šç‰ˆæœ¬ã€‚</p>\n<p>è€Œ 2.7.x æ˜¯ä¸»è¦å¼€å‘ç‰ˆæœ¬ï¼Œæ›´æ–°å’Œæ–°å¢æ–°çš„ feature å’Œä¼˜åŒ–ï¼Œå¹¶ä¸” 2.7.5 ç‰ˆæœ¬çš„å‘å¸ƒè¢« Dubbo è®¤ä¸ºæ˜¯é‡Œç¨‹ç¢‘å¼çš„ç‰ˆæœ¬å‘å¸ƒï¼Œä¹‹åæˆ‘ä»¬å†åšåˆ†æã€‚</p>\n<p>å®ƒå®ç°äº†é¢å‘æ¥å£çš„ä»£ç† RPC è°ƒç”¨ï¼Œå¹¶ä¸”å¯ä»¥é…åˆ ZooKeeper ç­‰ç»„ä»¶å®ç°æœåŠ¡æ³¨å†Œå’Œå‘ç°åŠŸèƒ½ï¼Œå¹¶ä¸”æ‹¥æœ‰è´Ÿè½½å‡è¡¡ã€å®¹é”™æœºåˆ¶ç­‰ã€‚</p>\n<h1>Dubbo æ€»ä½“æ¶æ„</h1>\n<p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹å®˜ç½‘çš„ä¸€å¼ å›¾ã€‚</p>\n<p><img src=\"https://tva1.sinaimg.cn/large/007S8ZIlly1ghu97ntsacj30e00ak3yx.jpg\" alt=\"\" title=\"\" /></p>\n<p>æœ¬ä¸™å†æš–å¿ƒçš„ç»™ä¸Šå›¾å†…æ¯ä¸ªèŠ‚ç‚¹çš„è§’è‰²è¯´æ˜ä¸€ä¸‹ã€‚</p>\n<p>èŠ‚ç‚¹</p>\n<p>è§’è‰²è¯´æ˜</p>\n<p>Consumer</p>\n<p>éœ€è¦è°ƒç”¨è¿œç¨‹æœåŠ¡çš„æœåŠ¡æ¶ˆè´¹æ–¹</p>\n<p>Registry</p>\n<p>æ³¨å†Œä¸­å¿ƒ</p>\n<p>Provider</p>\n<p>æœåŠ¡æä¾›æ–¹</p>\n<p>Container</p>\n<p>æœåŠ¡è¿è¡Œçš„å®¹å™¨</p>\n<p>Monitor</p>\n<p>ç›‘æ§ä¸­å¿ƒ</p>\n<p>æˆ‘å†æ¥å¤§è‡´è¯´ä¸€ä¸‹æ•´ä½“çš„æµç¨‹ï¼Œé¦–å…ˆæœåŠ¡æä¾›è€… <strong>Provider å¯åŠ¨ç„¶åå‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œ</strong>è‡ªå·±æ‰€èƒ½æä¾›çš„æœåŠ¡ã€‚</p>\n<p>æœåŠ¡æ¶ˆè´¹è€… <strong>Consumer å¯åŠ¨å‘æ³¨å†Œä¸­å¿ƒè®¢é˜…</strong>è‡ªå·±æ‰€éœ€çš„æœåŠ¡ã€‚ç„¶åæ³¨å†Œä¸­å¿ƒå°†æä¾›è€…å…ƒä¿¡æ¯é€šçŸ¥ç»™ Consumerï¼Œ ä¹‹å Consumer å› ä¸ºå·²ç»ä»æ³¨å†Œä¸­å¿ƒè·å–æä¾›è€…çš„åœ°å€ï¼Œå› æ­¤å¯ä»¥<strong>é€šè¿‡è´Ÿè½½å‡è¡¡é€‰æ‹©ä¸€ä¸ª Provider ç›´æ¥è°ƒç”¨</strong> ã€‚</p>\n<p>ä¹‹åæœåŠ¡æä¾›æ–¹å…ƒæ•°æ®å˜æ›´çš„è¯<strong>æ³¨å†Œä¸­å¿ƒä¼šæŠŠå˜æ›´æ¨é€ç»™æœåŠ¡æ¶ˆè´¹è€…</strong>ã€‚</p>\n<p>æœåŠ¡æä¾›è€…å’Œæ¶ˆè´¹è€…éƒ½ä¼šåœ¨å†…å­˜ä¸­è®°å½•ç€è°ƒç”¨çš„æ¬¡æ•°å’Œæ—¶é—´ï¼Œç„¶å<strong>å®šæ—¶çš„å‘é€ç»Ÿè®¡æ•°æ®åˆ°ç›‘æ§ä¸­å¿ƒ</strong>ã€‚</p>\n<h2>ä¸€äº›æ³¨æ„ç‚¹</h2>\n<p>é¦–å…ˆ<strong>æ³¨å†Œä¸­å¿ƒå’Œç›‘æ§ä¸­å¿ƒæ˜¯å¯é€‰çš„</strong>ï¼Œä½ å¯ä»¥ä¸è¦ç›‘æ§ï¼Œä¹Ÿä¸è¦æ³¨å†Œä¸­å¿ƒï¼Œç›´æ¥åœ¨é…ç½®æ–‡ä»¶é‡Œé¢å†™ç„¶åæä¾›æ–¹å’Œæ¶ˆè´¹æ–¹ç›´è¿ã€‚</p>\n<p>ç„¶åæ³¨å†Œä¸­å¿ƒã€æä¾›æ–¹å’Œæ¶ˆè´¹æ–¹ä¹‹é—´éƒ½æ˜¯é•¿è¿æ¥ï¼Œå’Œç›‘æ§æ–¹ä¸æ˜¯é•¿è¿æ¥ï¼Œå¹¶ä¸”<strong>æ¶ˆè´¹æ–¹æ˜¯ç›´æ¥è°ƒç”¨æä¾›æ–¹ï¼Œä¸ç»è¿‡æ³¨å†Œä¸­å¿ƒ</strong>ã€‚</p>\n<p>å°±ç®—<strong>æ³¨å†Œä¸­å¿ƒå’Œç›‘æ§ä¸­å¿ƒå®•æœºäº†ä¹Ÿä¸ä¼šå½±å“åˆ°å·²ç»æ­£å¸¸è¿è¡Œçš„æä¾›è€…å’Œæ¶ˆè´¹è€…</strong>ï¼Œå› ä¸ºæ¶ˆè´¹è€…æœ‰æœ¬åœ°ç¼“å­˜æä¾›è€…çš„ä¿¡æ¯ã€‚</p>\n<h1>Dubbo åˆ†å±‚æ¶æ„</h1>\n<p>æ€»çš„è€Œè¨€ Dubbo åˆ†ä¸ºä¸‰å±‚ï¼Œå¦‚æœæ¯ä¸€å±‚å†ç»†åˆ†ä¸‹å»ï¼Œä¸€å…±æœ‰åå±‚ã€‚åˆ«æ€•ä¹Ÿå°±åå±‚ï¼Œæœ¬ä¸™å¸¦å¤§å®¶è¿‡ä¸€éï¼Œå¤§å®¶å…ˆæœ‰ä¸ªå¤§è‡´çš„å°è±¡ï¼Œä¹‹åçš„æ–‡ç« ä¸™ä¼šå¸¦ç€å¤§å®¶å†æ·±å…¥ã€‚</p>\n<p><img src=\"https://tva1.sinaimg.cn/large/007S8ZIlly1ghu97sgc39j30e20csglg.jpg\" alt=\"\" title=\"\" /></p>\n<p>å¤§çš„ä¸‰å±‚åˆ†åˆ«ä¸º Businessï¼ˆä¸šåŠ¡å±‚ï¼‰ã€RPC å±‚ã€Remotingï¼Œå¹¶ä¸”è¿˜åˆ†ä¸º API å±‚å’Œ SPI å±‚ã€‚</p>\n<p>åˆ†ä¸ºå¤§ä¸‰å±‚å…¶å®å°±æ˜¯å’Œæˆ‘ä»¬çŸ¥é“çš„ç½‘ç»œåˆ†å±‚ä¸€æ ·çš„æ„æ€ï¼Œ<strong>åªæœ‰å±‚æ¬¡åˆ†æ˜ï¼ŒèŒè´£è¾¹ç•Œæ¸…æ™°æ‰èƒ½æ›´å¥½çš„æ‰©å±•</strong>ã€‚</p>\n<p>è€Œåˆ† API å±‚å’Œ SPI å±‚è¿™æ˜¯ Dubbo æˆåŠŸçš„ä¸€ç‚¹ï¼Œ<strong>é‡‡ç”¨å¾®å†…æ ¸è®¾è®¡+SPIæ‰©å±•</strong>ï¼Œä½¿å¾—æœ‰ç‰¹æ®Šéœ€æ±‚çš„æ¥å…¥æ–¹å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ï¼Œåšå®šåˆ¶çš„äºŒæ¬¡å¼€å‘ã€‚</p>\n<p>æ¥ä¸‹æ¥å’±ä»¬å†æ¥çœ‹çœ‹æ¯ä¸€å±‚éƒ½æ˜¯å¹²å˜›çš„ã€‚</p>\n<ul>\n <li>Serviceï¼Œä¸šåŠ¡å±‚ï¼Œå°±æ˜¯å’±ä»¬å¼€å‘çš„ä¸šåŠ¡é€»è¾‘å±‚ã€‚</li>\n <li>Configï¼Œé…ç½®å±‚ï¼Œä¸»è¦å›´ç»• ServiceConfig å’Œ ReferenceConfigï¼Œåˆå§‹åŒ–é…ç½®ä¿¡æ¯ã€‚</li>\n <li>Proxyï¼Œä»£ç†å±‚ï¼ŒæœåŠ¡æä¾›è€…è¿˜æ˜¯æ¶ˆè´¹è€…éƒ½ä¼šç”Ÿæˆä¸€ä¸ªä»£ç†ç±»ï¼Œä½¿å¾—æœåŠ¡æ¥å£é€æ˜åŒ–ï¼Œä»£ç†å±‚åšè¿œç¨‹è°ƒç”¨å’Œè¿”å›ç»“æœã€‚</li>\n <li>Registerï¼Œæ³¨å†Œå±‚ï¼Œå°è£…äº†æœåŠ¡æ³¨å†Œå’Œå‘ç°ã€‚</li>\n <li>Clusterï¼Œè·¯ç”±å’Œé›†ç¾¤å®¹é”™å±‚ï¼Œè´Ÿè´£é€‰å–å…·ä½“è°ƒç”¨çš„èŠ‚ç‚¹ï¼Œå¤„ç†ç‰¹æ®Šçš„è°ƒç”¨è¦æ±‚å’Œè´Ÿè´£è¿œç¨‹è°ƒç”¨å¤±è´¥çš„å®¹é”™æªæ–½ã€‚</li>\n <li>Monitorï¼Œç›‘æ§å±‚ï¼Œè´Ÿè´£ç›‘æ§ç»Ÿè®¡è°ƒç”¨æ—¶é—´å’Œæ¬¡æ•°ã€‚</li>\n <li>Portocolï¼Œè¿œç¨‹è°ƒç”¨å±‚ï¼Œä¸»è¦æ˜¯å°è£… RPC è°ƒç”¨ï¼Œä¸»è¦è´Ÿè´£ç®¡ç† Invokerï¼ŒInvokerä»£è¡¨ä¸€ä¸ªæŠ½è±¡å°è£…äº†çš„æ‰§è¡Œä½“ï¼Œä¹‹åå†åšè¯¦è§£ã€‚</li>\n <li>Exchangeï¼Œä¿¡æ¯äº¤æ¢å±‚ï¼Œç”¨æ¥å°è£…è¯·æ±‚å“åº”æ¨¡å‹ï¼ŒåŒæ­¥è½¬å¼‚æ­¥ã€‚</li>\n <li>Transportï¼Œç½‘ç»œä¼ è¾“å±‚ï¼ŒæŠ½è±¡äº†ç½‘ç»œä¼ è¾“çš„ç»Ÿä¸€æ¥å£ï¼Œè¿™æ ·ç”¨æˆ·æƒ³ç”¨ Netty å°±ç”¨ Nettyï¼Œæƒ³ç”¨ Mina å°±ç”¨ Minaã€‚</li>\n <li>Serializeï¼Œåºåˆ—åŒ–å±‚ï¼Œå°†æ•°æ®åºåˆ—åŒ–æˆäºŒè¿›åˆ¶æµï¼Œå½“ç„¶ä¹Ÿåšååºåˆ—åŒ–ã€‚</li>\n</ul>\n<h2>SPI</h2>\n<p>æˆ‘å†ç¨å¾®æä¸€ä¸‹ SPIï¼ˆService Provider Interfaceï¼‰ï¼Œæ˜¯ JDK å†…ç½®çš„ä¸€ä¸ªæœåŠ¡å‘ç°æœºåˆ¶ï¼Œ<strong>å®ƒä½¿å¾—æ¥å£å’Œå…·ä½“å®ç°å®Œå…¨è§£è€¦</strong>ã€‚æˆ‘ä»¬åªå£°æ˜æ¥å£ï¼Œå…·ä½“çš„å®ç°ç±»åœ¨é…ç½®ä¸­é€‰æ‹©ã€‚</p>\n<p>å…·ä½“çš„å°±æ˜¯ä½ å®šä¹‰äº†ä¸€ä¸ªæ¥å£ï¼Œç„¶ååœ¨<code>META-INF/services</code>ç›®å½•ä¸‹<strong>æ”¾ç½®ä¸€ä¸ªä¸æ¥å£åŒåçš„æ–‡æœ¬æ–‡ä»¶</strong>ï¼Œæ–‡ä»¶çš„å†…å®¹ä¸º<strong>æ¥å£çš„å®ç°ç±»</strong>ï¼Œå¤šä¸ªå®ç°ç±»ç”¨æ¢è¡Œç¬¦åˆ†éš”ã€‚</p>\n<p>è¿™æ ·å°±é€šè¿‡é…ç½®æ¥å†³å®šå…·ä½“ç”¨å“ªä¸ªå®ç°ï¼</p>\n<p>è€Œ Dubbo SPI è¿˜åšäº†ä¸€äº›æ”¹è¿›ï¼Œç¯‡å¹…æœ‰é™ç•™åœ¨ä¹‹åå†è°ˆã€‚</p>\n<h1>Dubbo è°ƒç”¨è¿‡ç¨‹</h1>\n<p>ä¸Šé¢æˆ‘å·²ç»ä»‹ç»äº†æ¯ä¸ªå±‚åˆ°åº•æ˜¯å¹²å˜›çš„ï¼Œæˆ‘ä»¬ç°åœ¨å†æ¥ä¸²èµ·æ¥èµ°ä¸€éè°ƒç”¨çš„è¿‡ç¨‹ï¼ŒåŠ æ·±ä½ å¯¹ Dubbo çš„ç†è§£ï¼Œè®©çŸ¥è¯†ç‚¹ä¸²èµ·æ¥ï¼Œç”±ç‚¹åŠé¢æ¥ä¸€æ³¢è¿è¿çœ‹ã€‚</p>\n<p><img src=\"https://tva1.sinaimg.cn/large/007S8ZIlly1ghu97wrwzzj30aj08ydfv.jpg\" alt=\"\" title=\"\" /></p>\n<p>æˆ‘ä»¬å…ˆä»æœåŠ¡æä¾›è€…å¼€å§‹ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p>\n<p><img src=\"https://tva1.sinaimg.cn/large/007S8ZIlly1ghu97zzd7lj30fx0jzwed.jpg\" alt=\"\" title=\"\" /></p>\n<h2>æœåŠ¡æš´éœ²è¿‡ç¨‹</h2>\n<p>é¦–å…ˆ Provider å¯åŠ¨ï¼Œé€šè¿‡ Proxy ç»„ä»¶æ ¹æ®å…·ä½“çš„åè®® Protocol å°†éœ€è¦æš´éœ²å‡ºå»çš„æ¥å£å°è£…æˆ Invokerï¼ŒInvoker æ˜¯ Dubbo ä¸€ä¸ªå¾ˆæ ¸å¿ƒçš„ç»„ä»¶ï¼Œä»£è¡¨ä¸€ä¸ªå¯æ‰§è¡Œä½“ã€‚</p>\n<p>ç„¶åå†é€šè¿‡ Exporter åŒ…è£…ä¸€ä¸‹ï¼Œè¿™æ˜¯ä¸ºäº†åœ¨æ³¨å†Œä¸­å¿ƒæš´éœ²è‡ªå·±å¥—çš„ä¸€å±‚ï¼Œç„¶åå°† Exporter é€šè¿‡ Registry æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒã€‚ è¿™å°±æ˜¯æ•´ä½“æœåŠ¡æš´éœ²è¿‡ç¨‹ã€‚</p>\n<h2>æ¶ˆè´¹è¿‡ç¨‹</h2>\n<p>æ¥ç€æˆ‘ä»¬æ¥çœ‹æ¶ˆè´¹è€…è°ƒç”¨æµç¨‹ï¼ˆæŠŠæœåŠ¡è€…æš´éœ²çš„è¿‡ç¨‹ä¹Ÿåœ¨å›¾é‡Œå±•ç¤ºå‡ºæ¥äº†ï¼Œè¿™ä¸ªå›¾å…¶å®ç®—ä¸€ä¸ªæŒºå®Œæ•´çš„æµç¨‹å›¾äº†ï¼‰ã€‚</p>\n<p><img src=\"https://tva1.sinaimg.cn/large/007S8ZIlly1ghu983qeo1j30vj0kkjsj.jpg\" alt=\"\" title=\"\" /></p>\n<p>é¦–å…ˆæ¶ˆè´¹è€…å¯åŠ¨ä¼šå‘æ³¨å†Œä¸­å¿ƒæ‹‰å–æœåŠ¡æä¾›è€…çš„å…ƒä¿¡æ¯ï¼Œç„¶åè°ƒç”¨æµç¨‹ä¹Ÿæ˜¯ä» Proxy å¼€å§‹ï¼Œæ¯•ç«Ÿéƒ½éœ€è¦ä»£ç†æ‰èƒ½æ— æ„ŸçŸ¥ã€‚</p>\n<p>Proxy æŒæœ‰ä¸€ä¸ª Invoker å¯¹è±¡ï¼Œè°ƒç”¨ invoke ä¹‹åéœ€è¦é€šè¿‡ Cluster å…ˆä» Directory è·å–æ‰€æœ‰å¯è°ƒç”¨çš„è¿œç¨‹æœåŠ¡çš„ Invoker åˆ—è¡¨ï¼Œå¦‚æœé…ç½®äº†æŸäº›è·¯ç”±è§„åˆ™ï¼Œæ¯”å¦‚æŸä¸ªæ¥å£åªèƒ½è°ƒç”¨æŸä¸ªèŠ‚ç‚¹çš„é‚£å°±å†è¿‡æ»¤ä¸€é Invoker åˆ—è¡¨ã€‚</p>\n<p>å‰©ä¸‹çš„ Invoker å†é€šè¿‡ LoadBalance åšè´Ÿè½½å‡è¡¡é€‰å–ä¸€ä¸ªã€‚ç„¶åå†ç»è¿‡ Filter åšä¸€äº›ç»Ÿè®¡ä»€ä¹ˆçš„ï¼Œå†é€šè¿‡ Client åšæ•°æ®ä¼ è¾“ï¼Œæ¯”å¦‚ç”¨ Netty æ¥ä¼ è¾“ã€‚</p>\n<p>ä¼ è¾“éœ€è¦ç»è¿‡ Codec æ¥å£åšåè®®æ„é€ ï¼Œå†åºåˆ—åŒ–ã€‚æœ€ç»ˆå‘å¾€å¯¹åº”çš„æœåŠ¡æä¾›è€…ã€‚</p>\n<p>æœåŠ¡æä¾›è€…æ¥æ”¶åˆ°ä¹‹åä¹Ÿä¼šè¿›è¡Œ Codec åè®®å¤„ç†ï¼Œç„¶åååºåˆ—åŒ–åå°†è¯·æ±‚æ‰”åˆ°çº¿ç¨‹æ± å¤„ç†ã€‚æŸä¸ªçº¿ç¨‹ä¼šæ ¹æ®è¯·æ±‚æ‰¾åˆ°å¯¹åº”çš„ Exporter ï¼Œè€Œæ‰¾åˆ° Exporter å…¶å®å°±æ˜¯æ‰¾åˆ°äº† Invokerï¼Œä½†æ˜¯è¿˜ä¼šæœ‰ä¸€å±‚å±‚ Filterï¼Œç»è¿‡ä¸€å±‚å±‚è¿‡æ»¤é“¾ä¹‹åæœ€ç»ˆè°ƒç”¨å®ç°ç±»ç„¶ååŸè·¯è¿”å›ç»“æœã€‚</p>\n<p>å®Œæˆæ•´ä¸ªè°ƒç”¨è¿‡ç¨‹ï¼</p>\n<h1>æ€»ç»“</h1>\n<p>è¿™æ¬¡æ•–ä¸™å¸¦ç€å¤§å®¶å…ˆäº†è§£äº†ä¸‹ä»€ä¹ˆæ˜¯ RPCï¼Œç„¶åè§„åˆ’äº†ä¸€æ³¢ RPC æ¡†æ¶éœ€è¦å“ªäº›ç»„ä»¶ï¼Œç„¶åå†ç”¨ä»£ç å®ç°äº†ä¸€ä¸ªç®€å•çš„ RPC æ¡†æ¶ã€‚</p>\n<p>ç„¶åå¸¦ç€å¤§å®¶äº†è§£äº†ä¸‹ Dubbo çš„å‘å±•å†å²ã€æ€»ä½“æ¶æ„ã€åˆ†å±‚è®¾è®¡æ¶æ„ä»¥åŠæ¯ä¸ªç»„ä»¶æ˜¯å¹²å˜›çš„ï¼Œå†å¸¦ç€å¤§ä¼™èµ°äº†ä¸€éæ•´ä½“è°ƒç”¨è¿‡ç¨‹ã€‚</p>\n<p>æˆ‘çœŸçš„æ˜¯å¤ªæš–äº†å•Šï¼</p>\n<p>dubboè¿‘æœŸæˆ‘ä¼šå®‰æ’å‡ ä¸ªç« èŠ‚ç»§ç»­å±•å¼€ï¼Œæœ€åä¼šå‡ºä¸€ä¸ªé¢è¯•ç‰ˆæœ¬çš„dubboï¼Œæˆ‘ä»¬æ‹­ç›®ä»¥å¾…å§ã€‚</p>\n<p>æˆ‘æ˜¯æ•–ä¸™ï¼Œä½ çŸ¥é“çš„è¶Šå¤šï¼Œä½ ä¸çŸ¥é“çš„è¶Šå¤šï¼Œæˆ‘ä»¬ä¸‹æœŸè§ï¼</p>\n<p><strong>äººæ‰</strong>ä»¬çš„ <strong>ã€ä¸‰è¿ã€‘</strong> å°±æ˜¯æ•–ä¸™åˆ›ä½œçš„æœ€å¤§åŠ¨åŠ›ï¼Œå¦‚æœæœ¬ç¯‡åšå®¢æœ‰ä»»ä½•é”™è¯¯å’Œå»ºè®®ï¼Œæ¬¢è¿äººæ‰ä»¬ç•™è¨€ï¼</p>","descriptionType":"html","publishedDate":"Wed, 19 Aug 2020 01:00:00 +0000","feedId":6615,"bgimg":"https://tva1.sinaimg.cn/large/007S8ZIlly1ghu96ukhevj30h203mmxm.jpg","linkMd5":"dcb1ca1d6d9e74559b1305ed3b0d3469","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn98@2020_2/2020/08/24/23-08-21-517_8f13d8b07f643ac5.webp","destWidth":614,"destHeight":130,"sourceBytes":16877,"destBytes":8954,"author":"æ•–ä¸™","articleImgCdnMap":{"https://tva1.sinaimg.cn/large/007S8ZIlly1ghu96ukhevj30h203mmxm.jpg":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn98@2020_2/2020/08/24/23-08-21-517_8f13d8b07f643ac5.webp","https://tva1.sinaimg.cn/large/007S8ZIlly1ghu970lp1rj30me0hq494.jpg":"https://cdn.jsdelivr.net/gh/myreaderx23/cdn100@2020_1/2020/08/24/23-08-38-382_bd6c3dce7d6e55b1.webp","https://tva1.sinaimg.cn/large/007S8ZIlly1ghu973myg2j3073073q3c.jpg":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn38@2020_2/2020/08/24/23-08-31-068_4b19e03c9a05d1ad.webp","https://tva1.sinaimg.cn/large/007S8ZIlly1ghu975kcouj30ny0c074q.jpg":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn54@2020_5/2020/08/24/23-08-30-913_c03142b1c5b40ef9.webp","https://tva1.sinaimg.cn/large/007S8ZIlly1ghu978x2kog3064064tg4.gif":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn12@2020_2/2020/08/24/23-08-45-134_20348afea74325a7.webp","https://tva1.sinaimg.cn/large/007S8ZIlly1ghu97d1ky0j306g06dt9v.jpg":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn82@2020_4/2020/08/24/23-08-41-795_8c6bb5bc6317c8dc.webp","https://tva1.sinaimg.cn/large/007S8ZIlly1ghu97gshgmj306o06o0so.jpg":"https://cdn.jsdelivr.net/gh/myreaderx/cdn16@2020_4/2020/08/24/23-08-43-891_cf34405c50ce7960.webp","https://tva1.sinaimg.cn/large/007S8ZIlly1ghu97ntsacj30e00ak3yx.jpg":"https://cdn.jsdelivr.net/gh/myreaderx13/cdn77@2020_2/2020/08/24/23-08-28-534_9ec7e1fd07438993.webp","https://tva1.sinaimg.cn/large/007S8ZIlly1ghu97sgc39j30e20csglg.jpg":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn60@2020_1/2020/08/24/23-08-41-132_634987b590838a90.webp","https://tva1.sinaimg.cn/large/007S8ZIlly1ghu97wrwzzj30aj08ydfv.jpg":"https://cdn.jsdelivr.net/gh/myreaderx14/cdn12@2020_3/2020/08/24/23-08-40-518_f5f7dfcb6fc90747.webp","https://tva1.sinaimg.cn/large/007S8ZIlly1ghu97zzd7lj30fx0jzwed.jpg":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn35@2020_1/2020/08/24/23-08-40-294_a6171109d968ad49.webp","https://tva1.sinaimg.cn/large/007S8ZIlly1ghu983qeo1j30vj0kkjsj.jpg":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn45@2020_3/2020/08/24/23-08-30-738_7fa453e24c96970a.webp"},"publishedOrCreatedDate":1598310388562},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"æ€å¦å¼€æºé¡¹ç›®æ¨ä»‹ä¸¨Gitakoï¼šå¼€æºã€å…è´¹çš„æ–‡ä»¶æ ‘æ’ä»¶","link":"https://segmentfault.com/a/1190000023652718","description":"<p><img src=\"https://segmentfault.com/img/bVbLphW\" alt=\"clipboard.png\" title=\"clipboard.png\" /></p>\n<blockquote>\n å¼€æºé¡¹ç›®åç§°ï¼šGitako \n <br>å¼€æºé¡¹ç›®è´Ÿè´£äººï¼š@Enix <br>å¼€æºé¡¹ç›®ç®€ä»‹ï¼šå¼€æºã€å…è´¹çš„æ–‡ä»¶æ ‘æ’ä»¶ <br>å¼€æºé¡¹ç›®ç±»å‹ï¼šä¸ªäººå¼€æºé¡¹ç›®<br>é¡¹ç›®åˆ›å»ºæ—¶é—´ï¼š2019 å¹´ <br>GitHub æ•°æ®ï¼š301 Starï¼Œ27 Fork <br>GitHub åœ°å€ï¼š<a href=\"https://github.com/EnixCoda/Gitako\" rel=\"nofollow noreferrer\">https://github.com/EnixCoda/G...</a></br></br></br></br></br></br>\n</blockquote>\n<h2>é¡¹ç›®ä»‹ç»</h2>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023652721\" alt=\"wnpXiEISZ4xgh92\" title=\"wnpXiEISZ4xgh92\" /></p>\n<p>Gitako æ˜¯ä¸€æ¬¾å¼€æºã€å…è´¹çš„æ–‡ä»¶æ ‘æ’ä»¶ï¼Œä»¥å®Œå–„ GitHub åŠŸèƒ½ä¸ºç›®æ ‡ï¼Œå¯ä»¥è®©ä½ çš„ GitHub æµè§ˆä½“éªŒæ›´ä¸Šä¸€å±‚æ¥¼ã€‚</p>\n<h4>1. ç‰¹æ€§</h4>\n<ul>\n <li>ğŸ“‚ é€šè¿‡æ–‡ä»¶æ ‘å±•ç¤ºä»“åº“æˆ– Pull Request ç›¸å…³çš„æ–‡ä»¶</li>\n <li>ğŸ” æé€Ÿæœç´¢æ–‡ä»¶ï¼Œåœ¨å…¶é—´å¿«é€Ÿè·³è½¬</li>\n <li>ğŸ•¶ï¸ æ”¯æŒç§æœ‰ä»“åº“ã€ä¼ä¸šç‰ˆ GitHubã€Gitee</li>\n <li>ğŸ å³ä½¿åœ¨å·¨å‹é¡¹ç›®ä¸­ä¹Ÿæµç•…æ— æ¯”</li>\n <li>âŒ¨ï¸ å†…ç½®ç¬¦åˆç›´è§‰çš„å¿«æ·é”®</li>\n <li>ğŸ—‚ æ”¯æŒ git submodule</li>\n <li>â†”ï¸ å°ºå¯¸å¯æŒ‰éœ€è°ƒæ•´</li>\n <li>ğŸ“‹ å¤åˆ¶ä»£ç ã€æ–‡ä»¶å†…å®¹çš„æŒ‰é’®</li>\n <li>ğŸ¨ å‹å¥½çš„ç•Œé¢ã€ä¸°å¯Œçš„å›¾æ ‡</li>\n</ul>\n<h4>2. å®‰è£…&amp;æºç </h4>\n<p><a href=\"https://chrome.google.com/webstore/detail/gitako-github-file-tree/giljefjcheohhamkjphiebfjnlphnokk\" rel=\"nofollow noreferrer\">Chromeã€</a><a href=\"https://addons.mozilla.org/en-US/firefox/addon/gitako-github-file-tree/\" rel=\"nofollow noreferrer\">Firefoxã€</a><a href=\"https://github.com/EnixCoda/Gitako\" rel=\"nofollow noreferrer\">GitHub</a></p>\n<h4>3. åç§°ä¸å›¾æ ‡çš„æ¥å†ï¼Ÿ</h4>\n<p>GitHub çš„å›¾æ ‡æ˜¯ä¸€åªçŒ«å¤´ç« é±¼èº«çš„â€œç¥å…½â€ã€‚Gitako çš„å®šä½å°±åƒæ˜¯è¿™åªç¥å…½èº«ä¸Šçš„ä¸€åªè§¦æ‰‹ï¼Œå›¾æ ‡æ­£æ˜¯è¡¨ç°äº†è¿™ä¸€å¯“æ„ã€‚å…³äºåå­—ï¼Œç« é±¼åœ¨æ—¥è¯­ä¸­å«åš <code>ã‚¿ã‚³(tako)</code>ï¼Œå†å¢åŠ å‰ç¼€ <code>git</code> ï¼š</p>\n<p><code>git + tako =&gt; gitako</code></p>\n<h2>æ€å¦æ¨è</h2>\n<p>ç¨‹åºå‘˜ä»¬åœ¨ä½¿ç”¨ GitHub æµè§ˆä¸€äº›æ¯”è¾ƒå¤æ‚çš„å¼€æºé¡¹ç›®æºç æ—¶ï¼Œä¼šé‡åˆ°ç›®å½•å¤šå¯¼è‡´çš„é‡å¤ç‚¹å‡»åˆ‡æ¢é—®é¢˜ï¼Œéå¸¸æµªè´¹æ—¶é—´ã€‚å¦‚æœæœ‰ç±»ä¼¼æ–‡æ¡£é˜…è¯»çš„ä¾§è¾¹æ å¯¼èˆªå·¥å…·ï¼Œé€šè¿‡ä¾§è¾¹ç‚¹å‡»ç›®å½•ï¼Œå¿«æ·å±•å¼€è·³è½¬åˆ°å¯¹åº”çš„æºç ï¼Œé‚£çœŸçš„å°±æ–¹ä¾¿å¾ˆå¤šã€‚</p>\n<p>gitako æ’ä»¶å¯ä»¥å¸®åŠ©æˆ‘ä»¬é€šè¿‡æ–‡ä»¶æ ‘å±•ç¤ºä»“åº“æˆ– Pull Request ç›¸å…³çš„æ–‡ä»¶ï¼Œæé«˜æœç´¢æ–‡ä»¶ã€å¤åˆ¶ä»£ç å’Œç›¸å…³æ–‡ä»¶å†…å®¹çš„é€Ÿåº¦ï¼Œæ— ç–‘æ˜¯æå‡å¼€å‘è€…ä»¬æ•ˆç‡çš„ä¼˜è´¨å·¥å…·ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/bVbHZSb\" alt=\"clipboard.png\" title=\"clipboard.png\" /></p>\n<p>è¯¥é¡¹ç›®å·²å…¥é€‰<a href=\"https://segmentfault.com/a/1190000022680721\">ã€ŒSFOSSP - æ€å¦å¼€æºé¡¹ç›®æ”¯æŒè®¡åˆ’ã€</a>ï¼Œæˆ‘ä»¬å¸Œæœ›å€ŸåŠ©ç¤¾åŒºçš„èµ„æºå¯¹å¼€æºé¡¹ç›®è¿›è¡Œç›¸å…³çš„å®£ä¼ æ¨å¹¿ï¼Œå¹¶ä½œä¸ºä¸€ä¸ªé•¿æœŸé¡¹ç›®åŠ©åŠ›å¼€æºäº‹ä¸šçš„å‘å±•ï¼Œä¸å¹¿å¤§å¼€å‘è€…å…±å»ºå¼€æºæ–°ç”Ÿæ€ã€‚</p>\n<p>æœ‰æ„å‘çš„å¼€æºé¡¹ç›®è´Ÿè´£äººæˆ–å›¢é˜Ÿæˆå‘˜ï¼Œå¯é€šè¿‡é‚®ç®±æä¾›ç›¸åº”çš„ä¿¡æ¯ï¼ˆå¼€æºé¡¹ç›®åœ°å€ã€é¡¹ç›®ä»‹ç»ã€å›¢é˜Ÿä»‹ç»ã€è”ç³»æ–¹å¼ç­‰ï¼‰ï¼Œä»¥ä¾¿æå‡äº¤æµçš„æ•ˆç‡ã€‚</p>\n<p>è”ç³»é‚®ç®±ï¼špr@segmentfault.com</p>\n<p><img src=\"https://segmentfault.com/img/bVbJgYT\" alt=\"clipboard.png\" title=\"clipboard.png\" /></p>","descriptionType":"html","publishedDate":"Mon, 17 Aug 2020 02:36:38 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/bVbLphW","linkMd5":"edffa444454de4e48a3d973ca7297088","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn55@2020_5/2020/08/24/23-08-22-420_8237a8f2bc153c7c.webp","destWidth":800,"destHeight":430,"sourceBytes":25107,"destBytes":4332,"author":"å¾ä¹","articleImgCdnMap":{"https://segmentfault.com/img/bVbLphW":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn55@2020_5/2020/08/24/23-08-22-420_8237a8f2bc153c7c.webp","https://segmentfault.com/img/remote/1460000023652721":null,"https://segmentfault.com/img/bVbHZSb":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn68@2020_4/2020/08/24/23-08-37-572_9328baa6c41eb7d7.webp","https://segmentfault.com/img/bVbJgYT":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn92@2020_2/2020/08/24/23-08-40-881_7f8323e1c3c7e5a5.webp"},"publishedOrCreatedDate":1598310388565},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"ã€è¯‘ã€‘ä½¿ç”¨Kotlinä»é›¶å¼€å§‹å†™ä¸€ä¸ªç°ä»£Android é¡¹ç›®-Part1","link":"https://segmentfault.com/a/1190000023708775","description":"<h3>å‰è¨€</h3>\n<p>ç»å¸¸åœ¨medium.comä¸Šçœ‹åˆ°ä¸€äº›é«˜è´¨é‡çš„æŠ€æœ¯å¸–å­ï¼Œä½†æ˜¯ç”±äºå›½å†…çš„ä¸Šç½‘ç¯å¢ƒæˆ–è€…æœ‰çš„åŒå­¦å¯¹äºçœ‹è‹±æ–‡æ¯”è¾ƒæ’æ–¥ï¼Œé”™è¿‡äº†ä¸å°‘å¥½æ–‡ç« ã€‚å› æ­¤ï¼Œè¥¿å“¥å†³å®šå¼„ä¸€ä¸ªã€Šä¼˜è´¨è¯‘æ–‡ä¸“æ ã€‹ï¼ŒèŠ±ä¸€äº›æ—¶é—´ç¿»è¯‘ä¸€äº›ä¼˜è´¨æŠ€æœ¯æ–‡ç»™å¤§å®¶ã€‚è¿™ç¯‡æ–‡ç« æ˜¯ä¸€ä¸ªå°ç³»åˆ—ï¼Œç”¨Kotlinå¼€å‘ç°ä»£Android APP,æ€»å…±å››ç¯‡ï¼Œåé¢çš„ä¼šé™†ç»­ç¿»è¯‘ï¼ä»¥ä¸‹æ˜¯æ­£æ–‡ã€‚</p>\n<p>ç°åœ¨ï¼ŒçœŸçš„å¾ˆéš¾æ‰¾åˆ°ä¸€ä¸ªæ¶µç›–æ‰€æœ‰Androidæ–°æŠ€æœ¯çš„é¡¹ç›®ï¼Œå› æ­¤æˆ‘å†³å®šè‡ªå·±æ¥å†™ä¸€ä¸ªï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ç”¨åˆ°å¦‚ä¸‹æŠ€æœ¯ï¼š</p>\n<ul>\n <li>0 ã€Android Studio</li>\n <li>1ã€Kotlin è¯­è¨€</li>\n <li>2ã€æ„å»ºå˜ä½“</li>\n <li>3ã€ConstraintLayout</li>\n <li>4ã€DataBindingåº“</li>\n <li>5ã€MVVM+repository+Android Manageræ¶æ„æ¨¡å¼</li>\n <li>6ã€RxJava2åŠå…¶å¯¹æ¶æ„çš„å¸®åŠ©</li>\n <li>7ã€Dagger 2.11ï¼Œä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒï¼Ÿ</li>\n <li>8ã€Retrofit + RxJava2 å®ç°ç½‘ç»œè¯·æ±‚</li>\n <li>9ã€RooM + RxJava2 å®ç°å‚¨å­˜</li>\n</ul>\n<h5>æˆ‘ä»¬çš„APPæœ€ç»ˆæ˜¯ä»€ä¹ˆæ ·å­ï¼Ÿ</h5>\n<p>æˆ‘ä»¬çš„APPæ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„åº”ç”¨ç¨‹åºï¼Œå®ƒæ¶µç›–äº†ä¸Šé¢æåˆ°çš„æ‰€æœ‰æŠ€æœ¯ã€‚åªæœ‰ä¸€ä¸ªç®€å•çš„åŠŸèƒ½ï¼šä»Github è·å–<code>googlesamples</code>ç”¨æˆ·ä¸‹çš„æ‰€æœ‰ä»“åº“ï¼Œå°†æ•°æ®å‚¨å­˜åˆ°æœ¬åœ°æ•°æ®åº“ï¼Œç„¶ååœ¨ç•Œé¢å±•ç¤ºå®ƒã€‚</p>\n<p>æˆ‘å°†å°è¯•è§£é‡Šæ›´å¤šçš„ä»£ç ï¼Œä½ ä¹Ÿå¯ä»¥çœ‹çœ‹ä½ Githubä¸Šçš„ä»£ç æäº¤ã€‚</p>\n<p>Github:<a href=\"https://github.com/mladenrakonjac/ModernAndroidApp/tags\" rel=\"nofollow noreferrer\">https://github.com/mladenrako...</a></p>\n<p>è®©æˆ‘ä»¬å¼€å§‹å§ã€‚</p>\n<h3>0ã€Android Studio</h3>\n<p>é¦–å…ˆå®‰å“Android Studio 3 beta 1(æ³¨ï¼šç°åœ¨æœ€æ–°ç‰ˆä¸ºAndroid Studio 4.0),Android Studio å·²ç»æ”¯æŒKotlinï¼Œå»åˆ°<code>Create Android Project</code>ç•Œé¢ï¼Œä½ å°†åœ¨æ­¤å¤„çœ‹åˆ°æ–°çš„å†…å®¹ï¼šå¸¦æœ‰æ ‡ç­¾çš„å¤é€‰æ¡†<code>include Kotlin support</code>ã€‚é»˜è®¤æƒ…å†µä¸‹é€‰ä¸­ã€‚æŒ‰ä¸¤æ¬¡ä¸‹ä¸€æ­¥ï¼Œç„¶åé€‰æ‹©<code>EmptyActivity</code>ï¼Œç„¶åå®Œæˆäº†ã€‚ æ­å–œï¼ä½ ç”¨Kotlinå¼€å‘äº†ç¬¬ä¸€ä¸ªAndroid app)</p>\n<h3>1ã€Kotlin</h3>\n<p>åœ¨åˆšæ‰æ–°å»ºçš„é¡¹ç›®ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°ä¸€ä¸ª<code>MainActivity.kt</code>:</p>\n<pre><code class=\"kotlin\">package me.mladenrakonjac.modernandroidapp\n\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\n\nclass MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n    }\n}</code></pre>\n<p><code>.kt</code>åç¼€ä»£è¡¨äº†è¿™æ˜¯ä¸€ä¸ªKotlinæ–‡ä»¶</p>\n<p><code>MainActivity : AppCompatActivity() </code>è¡¨ç¤ºæˆ‘ä»¬çš„<code>MainActivity</code>ç»§æ‰¿è‡ª<code>AppCompatActivity</code> ã€‚</p>\n<p>æ­¤å¤–ï¼Œæ‰€æœ‰çš„æ–¹æ³•éƒ½å¿…é¡»æœ‰ä¸€ä¸ªå…³é”®å­—<code>fun</code>,åœ¨Kotlin ä¸­ï¼Œä½ ä¸èƒ½ä½¿ç”¨<code>@override</code>æ³¨è§£ï¼Œå¦‚æœä½ è¦è¡¨æ˜æ–¹æ³•æ˜¯å¤å†™çˆ¶ç±»æˆ–è€…æ¥å£çš„æ–¹æ³•çš„è¯ï¼Œç›´æ¥ä½¿ç”¨<code>override</code>å…³é”®å­—ï¼Œæ³¨æ„ï¼šå®ƒå’ŒJavaä¸ä¸€æ ·ï¼Œä¸æ˜¯ä¸€ä¸ªæ³¨è§£äº†ã€‚</p>\n<p>ç„¶åï¼Œ<code>savedInstanceState: Bundle?</code> ä¸­çš„<code>?</code>ä»£è¡¨ä»€ä¹ˆå‘¢ï¼Ÿå®ƒä»£è¡¨äº†<code>savedInstanceState</code>è¿™ä¸ªå‚æ•°å¯ä»¥æ˜¯<code>Bundle</code>æˆ–è€…nullã€‚Kotlinæ˜¯ä¸€é—¨null å®‰å…¨è¯­è¨€ï¼Œå¦‚æœä½ åƒä¸‹é¢è¿™æ ·å†™ï¼š</p>\n<pre><code class=\"kotlin\">var a : String</code></pre>\n<p>ä½ å°†ä¼šå¾—åˆ°ä¸€ä¸ªç¼–è¯‘é”™è¯¯ã€‚å› ä¸º<code>a</code>å˜é‡å¿…é¡»è¢«åˆå§‹åŒ–ï¼Œå¹¶ä¸”ä¸èƒ½ä¸ºnullï¼Œå› æ­¤ä½ è¦åƒè¿™æ ·å†™ï¼š</p>\n<pre><code class=\"kotlin\">var a : String = \"Init value\"</code></pre>\n<p>å¹¶ä¸”ï¼Œå¦‚æœä½ æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼Œä¹Ÿä¼šæŠ¥ç¼–è¯‘é”™è¯¯ï¼š</p>\n<pre><code class=\"kotlin\">a = null</code></pre>\n<p>è¦æƒ³ä½¿<code>a</code>å˜é‡ä¸ºnull ,ä½ å¿…é¡»è¿™æ ·å†™ï¼š</p>\n<pre><code class=\"kotlin\">var a : String?</code></pre>\n<p>ä¸ºä»€ä¹ˆè¿™æ˜¯Kotlinè¯­è¨€çš„ä¸€ä¸ªé‡è¦åŠŸèƒ½å‘¢ï¼Ÿå› ä¸ºå®ƒå¸®æˆ‘ä»¬é¿å…äº†NPE,Androdå¼€å‘è€…å·²ç»å¯¹NPEæ„Ÿåˆ°åŒå€¦äº†ï¼Œç”šè‡³æ˜¯nullçš„å‘æ˜è€…-<code>Tony Hoare</code>å…ˆç”Ÿï¼Œä¹Ÿä¸ºå‘æ˜å®ƒè€Œé“æ­‰ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå¯ä»¥ä¸ºç©ºçš„<code>nameTextView</code>ã€‚å¦‚æœä¸ºnullï¼Œä»¥ä¸‹ä»£ç å°†ä¼šå‘ç”ŸNPEï¼š</p>\n<pre><code class=\"kotlin\">nameTextView.setEnabled(true)</code></pre>\n<p>ä½†å®é™…ä¸Šï¼ŒKotlinåšå¾—å¾ˆå¥½ï¼Œå®ƒç”šè‡³ä¸å…è®¸æˆ‘ä»¬åšè¿™æ ·çš„äº‹æƒ…ã€‚å®ƒä¼šå¼ºåˆ¶æˆ‘ä»¬ä½¿ç”¨<code>?</code>æˆ–è€…<code>!!</code>æ“ä½œç¬¦ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨<code>?</code>æ“ä½œç¬¦ï¼š</p>\n<pre><code class=\"kotlin\">nameTextView?.setEnabled(true)</code></pre>\n<p>ä»…å½“<code>nameTextView</code>ä¸ä¸ºnullæ—¶ï¼Œè¿™è¡Œä»£ç æ‰ä¼šç»§ç»­æ‰§è¡Œã€‚å¦ä¸€ç§æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨<code>!!</code>æ“ä½œç¬¦ï¼š</p>\n<pre><code class=\"kotlin\">nameTextView!!.setEnabled(true)</code></pre>\n<p>å¦‚æœ<code>nameTextView</code>ä¸ºnullï¼Œå®ƒå°†ä¸ºæˆ‘ä»¬æä¾›NPEã€‚å®ƒåªé€‚åˆå–œæ¬¢å†’é™©çš„å®¶ä¼™)</p>\n<p>è¿™æ˜¯å¯¹Kotlinçš„ä¸€äº›ä»‹ç»ã€‚æˆ‘ä»¬ç»§ç»­è¿›è¡Œï¼Œæˆ‘å°†åœæ­¢æè¿°å…¶ä»–Kotlinç‰¹å®šä»£ç ã€‚</p>\n<h3>2ã€æ„å»ºå˜ä½“</h3>\n<p>é€šå¸¸ï¼Œåœ¨å¼€å‘ä¸­ï¼Œå¦‚æœä½ æœ‰ä¸¤å¥—ç¯å¢ƒï¼Œæœ€å¸¸è§çš„æ˜¯æµ‹è¯•ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒã€‚è¿™äº›ç¯å¢ƒåœ¨æœåŠ¡å™¨<code>URL</code>ï¼Œ<code>å›¾æ ‡</code>ï¼Œ<code>åç§°</code>ï¼Œ<code>ç›®æ ‡api</code>ç­‰æ–¹é¢å¯èƒ½æœ‰æ‰€ä¸åŒã€‚é€šå¸¸ï¼Œåœ¨å¼€å§‹çš„æ¯ä¸ªé¡¹ç›®ä¸­æˆ‘éƒ½æœ‰ä»¥ä¸‹å†…å®¹ï¼š</p>\n<ul>\n <li><code>finalProduction</code>: ä¸Šä¼ Google Play ä½¿ç”¨</li>\n <li><code>demoProduction</code>:è¯¥ç‰ˆæœ¬ä½¿ç”¨ç”Ÿäº§ç¯å¢ƒæœåŠ¡å™¨Url,å¹¶ä¸”å®ƒæœ‰ç€GPä¸Šçš„ç‰ˆæœ¬æ²¡æœ‰çš„æ–°åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥åœ¨Google play æ—è¾¹å®‰è£…ï¼Œç„¶åå¯ä»¥è¿›è¡Œæ–°åŠŸèƒ½æµ‹è¯•å’Œæä¾›åé¦ˆã€‚</li>\n <li><code>demoTesting</code>:å’ŒdemoProductionä¸€æ ·ï¼Œåªä¸è¿‡å®ƒç”¨çš„æ˜¯æµ‹è¯•åœ°å€</li>\n <li><code>mock</code>: å¯¹äºæˆ‘æ¥è¯´ï¼Œä½œä¸ºå¼€å‘äººå‘˜å’Œè®¾è®¡å¸ˆè€Œè¨€éƒ½æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚æœ‰æ—¶æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½è®¾è®¡ï¼Œè€Œæˆ‘ä»¬çš„APIä»æœªå‡†å¤‡å¥½ã€‚ç­‰å¾…APIå‡†å¤‡å°±ç»ªåå†å¼€å§‹å¼€å‘å¯ä¸æ˜¯å¥½çš„è§£å†³æ–¹æ¡ˆã€‚æ­¤æ„å»ºå˜ä½“ä¸ºæä¾›æœ‰mockæ•°æ®ï¼Œå› æ­¤è®¾è®¡å›¢é˜Ÿå¯ä»¥å¯¹å…¶è¿›è¡Œæµ‹è¯•å¹¶æä¾›åé¦ˆã€‚å¯¹äºä¿è¯é¡¹ç›®è¿›åº¦çœŸçš„å¾ˆæœ‰å¸®åŠ©,ä¸€æ—¦APIå‡†å¤‡å°±ç»ªï¼Œæˆ‘ä»¬ä¾¿å°†å¼€å‘è½¬ç§»åˆ°demoTestingç¯å¢ƒã€‚</li>\n</ul>\n<p>åœ¨æ­¤åº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å°†æ‹¥æœ‰æ‰€æœ‰è¿™äº›å˜ä½“ã€‚å®ƒä»¬çš„applicationIdå’Œåç§°ä¸åŒã€‚ gradle 3.0.0 <code>flavourDimension</code>ä¸­æœ‰ä¸€ä¸ªæ–°çš„<code>api</code>ï¼Œå¯è®©æ‚¨æ··åˆä¸åŒçš„äº§å“é£å‘³ï¼Œå› æ­¤æ‚¨å¯ä»¥æ··åˆ<code>demo</code>å’Œ<code>minApi23</code>é£å‘³ã€‚åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å°†ä»…ä½¿ç”¨â€œé»˜è®¤â€ çš„<code>flavorDimension</code>ã€‚æ—©appçš„<code>build.gradle</code>ä¸­ï¼Œå°†æ­¤ä»£ç æ’å…¥<code>android {}</code>ä¸‹ï¼š</p>\n<pre><code>flavorDimensions \"default\"\n    \nproductFlavors {\n\n    finalProduction {\n        dimension \"default\"\n        applicationId \"me.mladenrakonjac.modernandroidapp\"\n        resValue \"string\", \"app_name\", \"Modern App\"\n    }\n\n    demoProduction {\n        dimension \"default\"\n        applicationId \"me.mladenrakonjac.modernandroidapp.demoproduction\"\n        resValue \"string\", \"app_name\", \"Modern App Demo P\"\n    }\n\n    demoTesting {\n        dimension \"default\"\n        applicationId \"me.mladenrakonjac.modernandroidapp.demotesting\"\n        resValue \"string\", \"app_name\", \"Modern App Demo T\"\n    }\n\n\n    mock {\n        dimension \"default\"\n        applicationId \"me.mladenrakonjac.modernandroidapp.mock\"\n        resValue \"string\", \"app_name\", \"Modern App Mock\"\n    }\n}</code></pre>\n<p>æ‰“å¼€<code>string.xml</code>æ–‡ä»¶ï¼Œåˆ æ‰<code>app_name</code>stringèµ„æºï¼Œå› æ­¤ï¼Œæˆ‘ä»¬æ‰ä¸ä¼šå‘ç”Ÿèµ„æºå†²çªï¼Œç„¶åç‚¹å‡»<code>Sync Now</code>,å¦‚æœè½¬åˆ°å±å¹•å·¦ä¾§çš„<code>â€œæ„å»ºå˜ä½“â€</code>ï¼Œåˆ™å¯ä»¥çœ‹åˆ°4ä¸ªä¸åŒçš„æ„å»ºå˜ä½“ï¼Œå…¶ä¸­æ¯ä¸ªéƒ½æœ‰ä¸¤ç§æ„å»ºç±»å‹ï¼šâ€œDebugâ€å’Œâ€œReleaseâ€,åˆ‡æ¢åˆ°<code>demoProduction</code>æ„å»ºå˜ä½“å¹¶è¿è¡Œå®ƒã€‚ç„¶ååˆ‡æ¢åˆ°å¦ä¸€ä¸ªå¹¶è¿è¡Œå®ƒã€‚æ‚¨å°±å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªåç§°ä¸åŒçš„åº”ç”¨ç¨‹åºã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023708779\" alt=\"\" title=\"\" /></p>\n<h3>3ã€ConstraintLayout</h3>\n<p>å¦‚æœä½ æ‰“å¼€<code>activity_main.xml </code>,ä½ å¯ä»¥çœ‹åˆ°è·Ÿå¸ƒå±€æ˜¯<code>ConstraintLayout</code>,å¦‚æœä½ å¼€å‘è¿‡iOSåº”ç”¨ç¨‹åºï¼Œä½ å¯èƒ½çŸ¥é“<code>AutoLayout</code>ï¼Œ<code>ConstraintLayout</code>å’Œå®ƒéå¸¸çš„ç›¸ä¼¼ï¼Œä»–ä»¬ç”šè‡³ç”¨äº†ç›¸åŒçš„<code> Cassowary </code>ç®—æ³•ã€‚</p>\n<pre><code class=\"kotlin\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\"me.mladenrakonjac.modernandroidapp.MainActivity\"&gt;\n\n    &lt;TextView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"Hello World!\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintLeft_toLeftOf=\"parent\"\n        app:layout_constraintRight_toRightOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" /&gt;</code></pre>\n<p>Constraintså¯ä»¥å¸®æˆ‘ä»¬æè¿°Viewä¹‹é—´çš„å…³ç³»ã€‚å¯¹äºæ¯ä¸€ä¸ªViewæ¥è¯´ï¼Œåº”è¯¥æœ‰4ä¸ªçº¦æŸï¼Œæ¯ä¸€è¾¹ä¸€ä¸ªçº¦æŸï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„Viewå°±è¢«çº¦æŸåœ¨äº†çˆ¶è§†å›¾çš„æ¯ä¸€è¾¹äº†ã€‚</p>\n<p>åœ¨Design Tabä¸­ï¼Œå¦‚æœä½ å°†<code>Hello World</code>æ–‡æœ¬ç¨å¾®å‘ä¸Šç§»åŠ¨ï¼Œåˆ™åœ¨<code>Text</code>Tabä¸­å°†å¢åŠ ä¸‹é¢è¿™è¡Œä»£ç ï¼š</p>\n<pre><code class=\"kotlin\">app:layout_constraintVertical_bias=\"0.28\"</code></pre>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023708778\" alt=\"\" title=\"\" /></p>\n<p><code>Design</code> tab å’Œ <code>Text</code> tabæ˜¯åŒæ­¥çš„ï¼Œæˆ‘ä»¬åœ¨Designä¸­ç§»åŠ¨è§†å›¾ï¼Œåˆ™ä¼šå½±å“Textä¸­çš„<code>xml</code>ï¼Œåä¹‹äº¦ç„¶ã€‚å‚ç›´åå·®æè¿°äº†è§†å›¾å¯¹å…¶çº¦æŸçš„å‚ç›´è¶‹åŠ¿ã€‚å¦‚æœè¦ä½¿è§†å›¾å‚ç›´å±…ä¸­ï¼Œåˆ™åº”ä½¿ç”¨ï¼š</p>\n<pre><code>app:layout_constraintVertical_bias=\"0.28\"</code></pre>\n<p>æˆ‘ä»¬è®©<code>Activity</code>åªæ˜¾ç¤ºä¸€ä¸ªä»“åº“ï¼Œå®ƒæœ‰ä»“åº“çš„åå­—ï¼Œstarçš„æ•°é‡ï¼Œä½œè€…ï¼Œå¹¶ä¸”è¿˜ä¼šæ˜¾ç¤ºæ˜¯å¦æœ‰issue</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023708781\" alt=\"\" title=\"\" /></p>\n<p>è¦å¾—åˆ°ä¸Šé¢çš„å¸ƒå±€è®¾è®¡ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<pre><code class=\"xml\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\"me.mladenrakonjac.modernandroidapp.MainActivity\"&gt;\n\n    &lt;TextView\n        android:id=\"@+id/repository_name\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginEnd=\"16dp\"\n        android:layout_marginStart=\"16dp\"\n        android:textSize=\"20sp\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintHorizontal_bias=\"0.0\"\n        app:layout_constraintLeft_toLeftOf=\"parent\"\n        app:layout_constraintRight_toRightOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:layout_constraintVertical_bias=\"0.083\"\n        tools:text=\"Modern Android app\" /&gt;\n\n    &lt;TextView\n        android:id=\"@+id/repository_has_issues\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginEnd=\"16dp\"\n        android:layout_marginStart=\"16dp\"\n        android:layout_marginTop=\"8dp\"\n        android:text=\"@string/has_issues\"\n        android:textStyle=\"bold\"\n        app:layout_constraintBottom_toBottomOf=\"@+id/repository_name\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintHorizontal_bias=\"1.0\"\n        app:layout_constraintStart_toEndOf=\"@+id/repository_name\"\n        app:layout_constraintTop_toTopOf=\"@+id/repository_name\"\n        app:layout_constraintVertical_bias=\"1.0\" /&gt;\n\n    &lt;TextView\n        android:id=\"@+id/repository_owner\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginBottom=\"8dp\"\n        android:layout_marginEnd=\"16dp\"\n        android:layout_marginStart=\"16dp\"\n        android:layout_marginTop=\"8dp\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toBottomOf=\"@+id/repository_name\"\n        app:layout_constraintVertical_bias=\"0.0\"\n        tools:text=\"Mladen Rakonjac\" /&gt;\n\n    &lt;TextView\n        android:id=\"@+id/number_of_starts\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginBottom=\"8dp\"\n        android:layout_marginEnd=\"16dp\"\n        android:layout_marginStart=\"16dp\"\n        android:layout_marginTop=\"8dp\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintHorizontal_bias=\"1\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toBottomOf=\"@+id/repository_owner\"\n        app:layout_constraintVertical_bias=\"0.0\"\n        tools:text=\"0 stars\" /&gt;\n\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n<p>ä¸è¦è¢«<code>tools:text</code>æè¿·æƒ‘äº†ï¼Œå®ƒçš„ä½œç”¨ä»…ä»…æ˜¯è®©æˆ‘ä»¬å¯ä»¥é¢„è§ˆæˆ‘ä»¬çš„å¸ƒå±€ã€‚</p>\n<p>æˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°ï¼Œæˆ‘ä»¬çš„å¸ƒå±€æ˜¯æ‰å¹³çš„ï¼Œæ²¡æœ‰ä»»ä½•åµŒå¥—ï¼Œä½ åº”è¯¥å°½é‡å°‘çš„ä½¿ç”¨å¸ƒå±€åµŒå¥—ï¼Œå› ä¸ºå®ƒä¼šå½±å“æˆ‘ä»¬çš„æ€§èƒ½ã€‚ConstraintLayoutä¹Ÿå¯ä»¥åœ¨ä¸åŒçš„å±å¹•å°ºå¯¸ä¸‹æ­£å¸¸å·¥ä½œã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023708780\" alt=\"\" title=\"\" /></p>\n<p>æˆ‘æœ‰ç§é¢„æ„Ÿï¼Œå¾ˆå¿«å°±èƒ½è¾¾åˆ°æˆ‘ä»¬æƒ³è¦çš„å¸ƒå±€æ•ˆæœäº†ã€‚</p>\n<p>ä¸Šé¢åªæ˜¯ä¸€äº›å…³äº<code>ConstraintLayout</code>çš„å°‘éƒ¨åˆ†ä»‹ç»ï¼Œä½ ä¹Ÿå¯ä»¥çœ‹ä¸€ä¸‹å…³äº<code>ConstraintLayout</code>ä½¿ç”¨çš„google code lab: <a href=\"https://codelabs.developers.google.com/codelabs/constraint-layout/index.html?index=..%2F..%2Findex#0\" rel=\"nofollow noreferrer\">https://codelabs.developers.g...</a></p>\n<h3>4. Data binding library</h3>\n<p>å½“æˆ‘å¬åˆ°Data binding åº“çš„æ—¶å€™ï¼Œæˆ‘çš„ç¬¬ä¸€ååº”æ˜¯ï¼šButterknifeå·²ç»å¾ˆå¥½äº†ï¼Œå†åŠ ä¸Šï¼Œæˆ‘ç°åœ¨ä½¿ç”¨ä¸€ä¸ªæ’ä»¶æ¥ä»xmlä¸­è·å–View,æˆ‘ä¸ºå•¥è¦æ”¹å˜ï¼Œæ¥ä½¿ç”¨Data bindingå‘¢ï¼Ÿä½†å½“æˆ‘å¯¹Data bindingæœ‰äº†æ›´å¤šçš„äº†è§£ä¹‹åï¼Œæˆ‘çš„å®ƒçš„æ„Ÿè§‰å°±åƒæˆ‘ç¬¬ä¸€æ¬¡è§åˆ°Butterknifeä¸€æ ·ï¼Œæ— æ³•è‡ªæ‹”ã€‚</p>\n<h5>Butterknifeèƒ½å¸®æˆ‘ä»¬åšå•¥ï¼Ÿ</h5>\n<p>ButterKnifeå¸®åŠ©æˆ‘ä»¬æ‘†è„±æ— èŠçš„<code>findViewById</code>ã€‚å› æ­¤ï¼Œå¦‚æœæ‚¨æœ‰5ä¸ªè§†å›¾ï¼Œè€Œæ²¡æœ‰Butterknifeï¼Œåˆ™ä½ æœ‰5 + 5è¡Œä»£ç æ¥ç»‘å®šæ‚¨çš„è§†å›¾ã€‚ä½¿ç”¨ButterKnifeï¼Œæ‚¨åªæœ‰æˆ‘è¡Œä»£ç å°±æå®šã€‚å°±æ˜¯è¿™æ ·ã€‚</p>\n<h5>Butterknifeçš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</h5>\n<p>Butterknifeä»ç„¶æ²¡æœ‰è§£å†³ä»£ç å¯ç»´æŠ¤é—®é¢˜ï¼Œä½¿ç”¨ButterKnifeæ—¶ï¼Œæˆ‘ç»å¸¸å‘ç°è‡ªå·±é‡åˆ°è¿è¡Œæ—¶å¼‚å¸¸ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘åˆ é™¤äº†xmlä¸­çš„è§†å›¾ï¼Œè€Œæ²¡æœ‰åˆ é™¤Activity/Fragmentç±»ä¸­çš„ç»‘å®šä»£ç ã€‚å¦å¤–ï¼Œå¦‚æœè¦åœ¨xmlä¸­æ·»åŠ è§†å›¾ï¼Œåˆ™å¿…é¡»å†æ¬¡è¿›è¡Œç»‘å®šã€‚çœŸçš„å¾ˆä¸å¥½ç»´æŠ¤ã€‚ä½ å°†æµªè´¹å¤§é‡æ—¶é—´æ¥ç»´æŠ¤Viewç»‘å®šã€‚</p>\n<h5>é‚£ä¸ä¹‹ç›¸æ¯”ï¼ŒData Binding æ€ä¹ˆæ ·å‘¢ï¼Ÿ</h5>\n<p>æœ‰å¾ˆå¤šå¥½å¤„ï¼Œä½¿ç”¨Data Bindingï¼Œä½ å¯ä»¥åªç”¨ä¸€è¡Œä»£ç å°±æå®šViewçš„ç»‘å®šï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œé¦–å…ˆï¼Œå…ˆå°†Data Binding æ·»åŠ åˆ°é¡¹ç›®ï¼š</p>\n<pre><code>// at the top of file \napply plugin: 'kotlin-kapt'\n\n\nandroid {\n    //other things that we already used\n    dataBinding.enabled = true\n}\ndependencies {\n    //other dependencies that we used\n    kapt \"com.android.databinding:compiler:3.0.0-beta1\"\n}</code></pre>\n<p>è¯·æ³¨æ„ï¼Œæ•°æ®ç»‘å®šç¼–è¯‘å™¨çš„ç‰ˆæœ¬ä¸é¡¹ç›®<code>build.gradle</code>æ–‡ä»¶ä¸­çš„gradleç‰ˆæœ¬ç›¸åŒï¼š</p>\n<pre><code>classpath 'com.android.tools.build:gradle:3.0.0-beta1'</code></pre>\n<p>ç„¶åï¼Œç‚¹å‡»<code>Sync Now</code>,æ‰“å¼€<code>activity_main.xml</code>,å°†<code>Constraint Layout </code>ç”¨layoutæ ‡ç­¾åŒ…è£¹</p>\n<pre><code class=\"kotlin\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"&gt;\n\n    &lt;android.support.constraint.ConstraintLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        tools:context=\"me.mladenrakonjac.modernandroidapp.MainActivity\"&gt;\n\n        &lt;TextView\n            android:id=\"@+id/repository_name\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginEnd=\"16dp\"\n            android:layout_marginStart=\"16dp\"\n            android:textSize=\"20sp\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            app:layout_constraintHorizontal_bias=\"0.0\"\n            app:layout_constraintLeft_toLeftOf=\"parent\"\n            app:layout_constraintRight_toRightOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:layout_constraintVertical_bias=\"0.083\"\n            tools:text=\"Modern Android app\" /&gt;\n\n        &lt;TextView\n            android:id=\"@+id/repository_has_issues\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginEnd=\"16dp\"\n            android:layout_marginStart=\"16dp\"\n            android:layout_marginTop=\"8dp\"\n            android:text=\"@string/has_issues\"\n            android:textStyle=\"bold\"\n            app:layout_constraintBottom_toBottomOf=\"@+id/repository_name\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintHorizontal_bias=\"1.0\"\n            app:layout_constraintStart_toEndOf=\"@+id/repository_name\"\n            app:layout_constraintTop_toTopOf=\"@+id/repository_name\"\n            app:layout_constraintVertical_bias=\"1.0\" /&gt;\n\n        &lt;TextView\n            android:id=\"@+id/repository_owner\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginBottom=\"8dp\"\n            android:layout_marginEnd=\"16dp\"\n            android:layout_marginStart=\"16dp\"\n            android:layout_marginTop=\"8dp\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintTop_toBottomOf=\"@+id/repository_name\"\n            app:layout_constraintVertical_bias=\"0.0\"\n            tools:text=\"Mladen Rakonjac\" /&gt;\n\n        &lt;TextView\n            android:id=\"@+id/number_of_starts\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginBottom=\"8dp\"\n            android:layout_marginEnd=\"16dp\"\n            android:layout_marginStart=\"16dp\"\n            android:layout_marginTop=\"8dp\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintHorizontal_bias=\"1\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintTop_toBottomOf=\"@+id/repository_owner\"\n            app:layout_constraintVertical_bias=\"0.0\"\n            tools:text=\"0 stars\" /&gt;\n\n    &lt;/android.support.constraint.ConstraintLayout&gt;\n\n&lt;/layout&gt;\n</code></pre>\n<p>æ³¨æ„ï¼Œä½ éœ€è¦å°†æ‰€æœ‰çš„xmlç§»åŠ¨åˆ°layout æ ‡ç­¾ä¸‹é¢ï¼Œç„¶åç‚¹å‡»<code>Build</code>å›¾æ ‡æˆ–è€…ä½¿ç”¨å¿«æ·é”®<code>Cmd + F9</code>,æˆ‘ä»¬éœ€è¦æ„å»ºé¡¹ç›®æ¥ä½¿Data Bindingåº“ä¸ºæˆ‘ä»¬ç”Ÿæˆ<code>ActivityMainBinding</code>ç±»ï¼Œåé¢åœ¨MainActivityä¸­å°†ç”¨åˆ°å®ƒã€‚</p>\n<p>å¦‚æœæ²¡æœ‰é‡æ–°ç¼–è¯‘é¡¹ç›®ï¼Œä½ æ˜¯çœ‹ä¸åˆ°<code>ActivityMainBinding</code>çš„ï¼Œå› ä¸ºå®ƒåœ¨ç¼–è¯‘æ—¶ç”Ÿæˆã€‚</p>\n<p>æˆ‘ä»¬è¿˜æ²¡æœ‰å®Œæˆç»‘å®šï¼Œæˆ‘ä»¬åªæ˜¯å®šä¹‰äº†ä¸€ä¸ªéç©ºçš„ ActivityMainBinding ç±»å‹çš„å˜é‡ã€‚ä½ ä¼šæ³¨æ„åˆ°æˆ‘æ²¡æœ‰æŠŠ<code>?</code> æ”¾åœ¨ ActivityMainBinding çš„åé¢ï¼Œè€Œä¸”ä¹Ÿæ²¡æœ‰åˆå§‹åŒ–å®ƒã€‚è¿™æ€ä¹ˆå¯èƒ½å‘¢ï¼Ÿ<code>lateinit</code> å…³é”®å­—å…è®¸æˆ‘ä»¬ä½¿ç”¨éç©ºçš„å»¶è¿Ÿè¢«åˆå§‹åŒ–çš„å˜é‡ã€‚å’Œ ButterKnife ç±»ä¼¼ï¼Œåœ¨æˆ‘ä»¬çš„å¸ƒå±€å‡†å¤‡å®Œæˆåï¼Œåˆå§‹åŒ–ç»‘å®šéœ€è¦åœ¨ onCreate æ–¹æ³•ä¸­è¿›è¡Œã€‚æ­¤å¤–ï¼Œä½ ä¸åº”è¯¥åœ¨ onCreate æ–¹æ³•ä¸­å£°æ˜ç»‘å®šï¼Œå› ä¸ºä½ å¾ˆæœ‰å¯èƒ½åœ¨ onCreate æ–¹æ³•å¤–ä½¿ç”¨å®ƒã€‚æˆ‘ä»¬çš„ binding ä¸èƒ½ä¸ºç©ºï¼Œæ‰€ä»¥è¿™å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨ lateinit çš„åŸå› ã€‚ä½¿ç”¨ lateinit ä¿®é¥°ï¼Œæˆ‘ä»¬ä¸éœ€è¦åœ¨æ¯æ¬¡è®¿é—®å®ƒçš„æ—¶å€™æ£€æŸ¥ binding å˜é‡æ˜¯å¦ä¸ºç©ºã€‚</p>\n<p>æˆ‘ä»¬åˆå§‹åŒ–bindingå˜é‡ï¼Œä½ éœ€è¦æ›¿æ¢:</p>\n<pre><code class=\"kotin\">setContentView(R.layout.activity_main)</code></pre>\n<p>ä¸ºï¼š</p>\n<pre><code class=\"kotlin\">binding = DataBindingUtil.setContentView(this, R.layout.activity_main)</code></pre>\n<p>å°±æ˜¯è¿™æ ·ï¼Œä½ æˆåŠŸçš„ç»‘å®šäº†æ‰€æœ‰View,ç°åœ¨ä½ å¯ä»¥è®¿é—®å®ƒå¹¶ä¸”åšä¸€äº›æ›´æ”¹ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬å°†ä»“åº“åå­—æ”¹ä¸º<code>Modern Android Medium Article</code>:</p>\n<pre><code class=\"kotlin\">binding.repositoryName.text = \"Modern Android Medium Article\"</code></pre>\n<p>å¦‚ä½ æ‰€è§ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>bingding</code>å˜é‡æ¥è®¿é—®<code>main_activity.xml</code>çš„æ‰€æœ‰Viewäº†ï¼ˆå‰ææ˜¯å®ƒä»¬æœ‰idï¼‰,è¿™å°±æ˜¯Data Binding æ¯”ButterKnife å¥½ç”¨çš„åŸå› ã€‚</p>\n<h5>kotlinçš„ Getters å’Œ setters</h5>\n<p>å¤§æ¦‚ï¼Œä½ å·²ç»æ³¨æ„åˆ°äº†ï¼Œæˆ‘ä»¬æ²¡æœ‰åƒJavaé‚£æ ·ä½¿ç”¨<code>.setText()</code>ï¼Œæˆ‘æƒ³åœ¨è¿™é‡Œæš‚åœä¸€ä¸‹ï¼Œä»¥è¯´æ˜ä¸Javaç›¸æ¯”ï¼ŒKotlinä¸­çš„getterå’Œsetteræ–¹æ³•å¦‚ä½•å·¥ä½œçš„ã€‚</p>\n<p>é¦–å…ˆï¼Œä½ éœ€è¦çŸ¥é“ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ä½¿ç”¨getterså’Œsettersï¼Œæˆ‘ä»¬ç”¨å®ƒæ¥éšè—ç±»ä¸­çš„å˜é‡ï¼Œä»…å…è®¸ä½¿ç”¨æ–¹æ³•æ¥è®¿é—®è¿™äº›å˜é‡ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å‘ç”¨æˆ·éšè—ç±»ä¸­çš„ç»†èŠ‚ï¼Œå¹¶ç¦æ­¢ç”¨æˆ·ç›´æ¥ä¿®æ”¹æˆ‘ä»¬çš„ç±»ã€‚å‡è®¾æˆ‘ä»¬ç”¨ Java å†™äº†ä¸€ä¸ª Square ç±»ï¼š</p>\n<pre><code class=\"java\">public class Square {\n  private int a;\n  \n  Square(){\n    a = 1;\n  }\n\n  public void setA(int a){\n    this.a = Math.abs(a);\n  }\n  \n  public int getA(){\n    return this.a;\n  }\n  \n}</code></pre>\n<p>ä½¿ç”¨<code>setA()</code>æ–¹æ³•ï¼Œæˆ‘ä»¬ç¦æ­¢äº†ç”¨æˆ·å‘<code>Square</code>ç±»çš„<code>a</code>å˜é‡è®¾ç½®ä¸€ä¸ªè´Ÿæ•°,å› ä¸ºæ­£æ–¹å½¢çš„è¾¹é•¿ä¸€å®šæ˜¯æ­£æ•°ï¼Œè¦ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œæˆ‘ä»¬å¿…é¡»å°†å…¶è®¾ä¸ºç§æœ‰ï¼Œå› æ­¤ä¸èƒ½ç›´æ¥è®¾ç½®å®ƒã€‚è¿™ä¹Ÿæ„å‘³ç€æˆ‘ä»¬ä¸èƒ½ç›´æ¥è·å¾—<code>a</code>ï¼Œéœ€è¦ç»™å®ƒå®šä¸€ä¸ªgetæ–¹æ³•æ¥è¿”å›<code>a</code>ï¼Œå¦‚æœæœ‰10ä¸ªå˜é‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¾—å®šä¹‰10ä¸ªç›¸ä¼¼çš„getæ–¹æ³•ï¼Œå†™è¿™æ ·æ— èŠçš„æ ·æ¿ä»£ç ï¼Œé€šå¸¸ä¼šå½±å“æˆ‘ä»¬çš„å¿ƒæƒ…ã€‚</p>\n<p>Kotlingä½¿æˆ‘ä»¬çš„å¼€å‘äººå‘˜æ›´è½»æ¾äº†ã€‚å¦‚æœä½ è°ƒç”¨ä¸‹é¢çš„ä»£ç ï¼š</p>\n<pre><code class=\"kotlin\">var side: Int = square.a</code></pre>\n<p>è¿™å¹¶ä¸æ„å‘³ç€ä½ æ˜¯åœ¨ç›´æ¥è®¿é—®aå˜é‡ï¼Œå®ƒå’ŒJavaä¸­è°ƒç”¨<code>getA()</code>æ˜¯ç›¸åŒçš„</p>\n<pre><code class=\"java\">int side = square.getA();</code></pre>\n<p>å› ä¸ºKotlinè‡ªåŠ¨ç”Ÿæˆé»˜è®¤çš„getterå’Œsetterã€‚åœ¨Kotlinä¸­ï¼Œåªæœ‰å½“æ‚¨æœ‰ç‰¹æ®Šçš„setteræˆ–getteræ—¶ï¼Œæ‰åº”æŒ‡å®šå®ƒã€‚å¦åˆ™ï¼ŒKotlinä¼šä¸ºæ‚¨è‡ªåŠ¨ç”Ÿæˆï¼š</p>\n<pre><code class=\"kotlin\">var a = 1\n   set(value) { field = Math.abs(value) }</code></pre>\n<p><code>field</code> ? è¿™åˆæ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Ÿä¸ºäº†æ›´æ¸…æ¥šæ˜ç™½ï¼Œè¯·çœ‹ä¸‹é¢ä»£ç ï¼š</p>\n<pre><code class=\"kotlin\">var a = 1\n   set(value) { a = Math.abs(value) }</code></pre>\n<p>è¿™è¡¨æ˜ä½ åœ¨è°ƒç”¨setæ–¹æ³•ä¸­çš„<code>set(value){}</code>ï¼Œå› ä¸ºKotlinçš„ä¸–ç•Œä¸­ï¼Œæ²¡æœ‰ç›´æ¥è®¿é—®å±æ€§ï¼Œè¿™å°±ä¼šé€ æˆæ— é™é€’å½’ï¼Œå½“ä½ è°ƒç”¨<code>a = something</code>,ä¼šè‡ªåŠ¨è°ƒç”¨setæ–¹æ³•ã€‚ä½¿ç”¨filedå°±èƒ½é¿å…æ— é™é€’å½’ï¼Œæˆ‘å¸Œæœ›è¿™èƒ½è®©ä½ æ˜ç™½ä¸ºä»€ä¹ˆè¦ç”¨filedå…³é”®å­—ï¼Œå¹¶ä¸”äº†è§£getterså’Œsettersæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p>\n<p>å›åˆ°ä»£ç ä¸­ç»§ç»­ï¼Œæˆ‘å°†å‘ä½ ä»‹ç»Kotlinè¯­è¨€çš„å¦ä¸€ä¸ªé‡è¦åŠŸèƒ½:applyå‡½æ•°ï¼š</p>\n<pre><code class=\"kotlin\">class MainActivity : AppCompatActivity() {\n\n    lateinit var binding: ActivityMainBinding\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n        binding = DataBindingUtil.setContentView(this, R.layout.activity_main)\n        binding.apply {\n            repositoryName.text = \"Medium Android Repository Article\"\n            repositoryOwner.text = \"Mladen Rakonjac\"\n            numberOfStarts.text = \"1000 stars\"\n            \n        }\n    }\n}</code></pre>\n<p>apply å…è®¸ä½ åœ¨ä¸€ä¸ªå®ä¾‹ä¸Šè°ƒç”¨å¤šä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬ä»ç„¶è¿˜æ²¡æœ‰å®Œæˆæ•°æ®ç»‘å®šï¼Œè¿˜æœ‰æ›´æ£’çš„äº‹å„¿ï¼Œè®©æˆ‘ä»¬ä¸ºä»“åº“å®šä¹‰ä¸€ä¸ªUIæ¨¡å‹ï¼ˆè¿™ä¸ªæ˜¯githubä»“åº“çš„æ•°æ®æ¨¡å‹Repository,å®ƒæŒæœ‰è¦å±•ç¤ºçš„æ•°æ®ï¼Œè¯·ä¸è¦å’ŒRepositoryæ¨¡å¼çš„ä¸­çš„Repositoryææ··æ·†äº†å“ˆï¼‰ï¼Œè¦åˆ›å»ºä¸€ä¸ªKotlin classï¼Œç‚¹å‡»<code>New -&gt; Kotlin File/Class :</code></p>\n<pre><code class=\"kotlin\">class Repository(var repositoryName: String?,var repositoryOwner: String?,var numberOfStars: Int? ,var hasIssues: Boolean = false)</code></pre>\n<p>åœ¨Kotlinä¸­ï¼Œä¸»æ„é€ å‡½æ•°æ˜¯ç±»å¤´çš„ä¸€éƒ¨åˆ†ï¼Œå¦‚æœä½ ä¸æƒ³å®šä¹‰æ¬¡æ„é€ å‡½æ•°ï¼Œé‚£å°±æ˜¯è¿™æ ·äº†ï¼Œæ•°æ®ç±»åˆ°æ­¤å°±å®Œæˆäº†ï¼Œæ„é€ å‡½æ•°æ²¡æœ‰å‚æ•°åˆ†é…ç»™å­—æ®µï¼Œæ²¡æœ‰setterså’Œgetters,æ•´ä¸ªç±»å°±ä¸€è¡Œä»£ç ã€‚</p>\n<p>å›åˆ°<code>MainActivity.kt</code>ï¼Œä¸º<code>Repository</code>åˆ›å»ºä¸€ä¸ªå®ä¾‹ã€‚</p>\n<pre><code class=\"kotlin\">var repository = Repository(\"Medium Android Repository Article\",\n        \"Mladen Rakonjac\", 1000, true)</code></pre>\n<p>ä½ åº”è¯¥æ³¨æ„åˆ°äº†ï¼Œåˆ›å»ºç±»å®ä¾‹ï¼Œæ²¡æœ‰ç”¨<code>new</code></p>\n<p>ç°åœ¨ï¼Œæˆ‘ä»¬åœ¨<code>activity_main.xml </code>ä¸­æ·»åŠ dataæ ‡ç­¾ã€‚</p>\n<pre><code class=\"kotlin\">&lt;data&gt;\n      &lt;variable\n        name=\"repository\"\n        type=\"me.mladenrakonjac.modernandroidapp.uimodels.Repository\"\n        /&gt;\n&lt;/data&gt;</code></pre>\n<p>æˆ‘ä»¬å¯ä»¥åœ¨å¸ƒå±€ä¸­è®¿é—®å­˜å‚¨çš„å˜é‡<code>repository</code>,ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å¦‚ä¸‹ä½¿ç”¨idæ˜¯<code>repository_name</code>çš„TextView,å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"kotlin\">android:text=\"@{repository.repositoryName}\"</code></pre>\n<p>repository_nameæ–‡æœ¬è§†å›¾å°†æ˜¾ç¤ºä»repositoryå˜é‡çš„å±æ€§<code>repositoryName</code>è·å–çš„æ–‡æœ¬ã€‚å‰©ä¸‹çš„å”¯ä¸€äº‹æƒ…å°±æ˜¯å°†<code>repository</code>å˜é‡ä»xmlç»‘å®šåˆ°<code>MainActivity.kt</code>ä¸­çš„repositoryã€‚</p>\n<p>ç‚¹å‡»Buildä½¿DataBinding ä¸ºæˆ‘ä»¬ç”Ÿæˆç±»ï¼Œç„¶ååœ¨MainActivityä¸­æ·»åŠ ä¸¤è¡Œä»£ç ï¼š</p>\n<pre><code class=\"kotlin\">binding.repository = repository\nbinding.executePendingBindings()</code></pre>\n<p>å¦‚æœä½ è¿è¡ŒAPP,ä½ ä¼šçœ‹åˆ°TextViewä¸Šæ˜¾ç¤ºçš„æ˜¯ï¼š<code>â€œMedium Android Repository Articleâ€</code>,éå¸¸æ£’çš„åŠŸèƒ½ï¼Œæ˜¯å§ï¼Ÿ</p>\n<p>ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬åƒä¸‹é¢è¿™æ ·æ”¹ä¸€ä¸‹å‘¢ï¼Ÿ</p>\n<pre><code class=\"kotlin\">Handler().postDelayed({repository.repositoryName=\"New Name\"}, 2000)</code></pre>\n<p>æ–°çš„æ–‡æœ¬å°†ä¼šåœ¨2000msåæ˜¾ç¤ºå—ï¼Ÿä¸ä¼šçš„ï¼Œä½ å¿…é¡»é‡æ–°è®¾ç½®ä¸€æ¬¡<code>repository</code>,åƒè¿™æ ·ï¼š</p>\n<pre><code class=\"kotlin\">Handler().postDelayed({repository.repositoryName=\"New Name\"\n    binding.repository = repository\n    binding.executePendingBindings()}, 2000)</code></pre>\n<p>ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æ¯æ¬¡æ›´æ”¹ä¸€ä¸ªå±æ€§éƒ½è¦è¿™ä¹ˆå†™çš„è¯ï¼Œé‚£å°±éå¸¸è›‹ç–¼äº†ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªæ›´å¥½çš„æ–¹æ¡ˆå«åš<code>Property Observer</code>ã€‚</p>\n<p>è®©æˆ‘ä»¬é¦–å…ˆè§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå› ä¸ºåœ¨rxJavaéƒ¨åˆ†ä¸­æˆ‘ä»¬ä¹Ÿå°†éœ€è¦å®ƒï¼š</p>\n<p>å¯èƒ½ä½ å·²ç»å¬è¯´è¿‡<code> http://androidweekly.net/</code>,è¿™æ˜¯ä¸€ä¸ªå…³äºAndroidå¼€å‘çš„å‘¨åˆŠã€‚å¦‚æœæ‚¨æƒ³æ¥æ”¶å®ƒï¼Œåˆ™å¿…é¡»è®¢é˜…å®ƒå¹¶æä¾›æ‚¨çš„ç”µå­é‚®ä»¶åœ°å€ã€‚è¿‡äº†ä¸€æ®µæ—¶é—´ï¼Œå¦‚æœä½ ä¸æƒ³çœ‹äº†ï¼Œä½ å¯ä»¥å»ç½‘ç«™ä¸Šå–æ¶ˆè®¢é˜…ã€‚</p>\n<p>è¿™å°±æ˜¯ä¸€ä¸ª<code>è§‚å¯Ÿè€…/è¢«è§‚å¯Ÿè€…</code>çš„æ¨¡å¼,åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ Android å‘¨åˆŠæ˜¯<code>è¢«è§‚å¯Ÿè€…</code>,å®ƒæ¯å‘¨éƒ½ä¼šå‘å¸ƒæ–°é—»é€šè®¯ã€‚è¯»è€…æ˜¯<code>è§‚å¯Ÿè€…</code>ï¼Œå› ä¸ºä»–ä»¬è®¢é˜…äº†å®ƒï¼Œä¸€æ—¦è®¢é˜…å°±ä¼šæ”¶åˆ°æ•°æ®ï¼Œå¦‚æœä¸æƒ³è¯»äº†ï¼Œåˆ™å¯ä»¥åœæ­¢è®¢é˜…ã€‚</p>\n<p><code>Property Observer</code>åœ¨è¿™ä¸ªä¾‹å­ä¸­å°±æ˜¯ xml layout,å®ƒå°†ä¼šç›‘å¬<code>Repository</code>å®ä¾‹çš„å˜åŒ–ã€‚å› æ­¤ï¼Œ<code>Repository</code>æ˜¯<code>è¢«è§‚å¯Ÿè€…</code>,ä¾‹å¦‚ï¼Œä¸€æ—¦åœ¨Repositoryç±»çš„å®ä¾‹ä¸­æ›´æ”¹äº†repository nane å±æ€§åï¼Œxmlä¸è°ƒç”¨ä¸‹é¢çš„ä»£ç ä¹Ÿä¼šæ›´æ–°ï¼š</p>\n<pre><code class=\"kotlin\">binding.repository = repository\nbinding.executePendingBindings()</code></pre>\n<p>å¦‚ä½•è®©å®ƒä½¿ç”¨Data Binding åº“å‘¢ï¼Ÿï¼ŒData Bindingåº“æä¾›äº†ä¸€ä¸ª<code>BaseObservable</code>ç±»ï¼Œæˆ‘ä»¬çš„Repostoryç±»å¿…é¡»ç»§æ‰¿å®ƒã€‚</p>\n<pre><code class=\"kotlin\">class Repository(repositoryName : String, var repositoryOwner: String?, var numberOfStars: Int?\n                 , var hasIssues: Boolean = false) : BaseObservable(){\n\n    @get:Bindable\n    var repositoryName : String = \"\"\n    set(value) {\n        field = value\n        notifyPropertyChanged(BR.repositoryName)\n    }\n\n}</code></pre>\n<p>å½“æˆ‘ä»¬ä½¿ç”¨äº† Bindable æ³¨è§£æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨ç”Ÿæˆ BR ç±»ã€‚ä½ ä¼šçœ‹åˆ°ï¼Œä¸€æ—¦è®¾ç½®æ–°å€¼ï¼Œå°±ä¼šé€šçŸ¥å®ƒæ›´æ–°ã€‚ç°åœ¨è¿è¡Œ app ä½ å°†çœ‹åˆ°ä»“åº“çš„åå­—åœ¨ 2 ç§’åæ”¹å˜è€Œä¸å¿…å†æ¬¡è°ƒç”¨ <code>executePendingBindings()</code>ã€‚</p>\n<p>ä»¥ä¸Šå°±æ˜¯è¿™ä¸€èŠ‚çš„æ‰€æœ‰å†…å®¹ï¼Œä¸‹ä¸€èŠ‚å°†ä¼šè®²MVVM+Repository æ¨¡å¼çš„ä½¿ç”¨ã€‚æ•¬è¯·æœŸå¾…ï¼æ„Ÿè°¢é˜…è¯»ã€‚</p>\n<blockquote>\n ä½œè€… | Mladen Rakoajc\n <br>è¯‘è€… | ä¾ç„¶èŒƒç‰¹ç¨€è¥¿<br>ç¼–è¾‘ | ä¾ç„¶èŒƒç‰¹ç¨€è¥¿</br></br>\n</blockquote>\n<p>åŸæ–‡åœ°å€ï¼š<a href=\"https://proandroiddev.com/modern-android-development-with-kotlin-september-2017-part-1-f976483f7bd6\" rel=\"nofollow noreferrer\">https://proandroiddev.com/mod...</a></p>\n<p>æœ¬ç³»åˆ—å·²æ›´æ–°å®Œæ¯•ï¼š</p>\n<p><a href=\"https://juejin.im/post/6844904185633177608\" rel=\"nofollow noreferrer\">ã€è¯‘ã€‘ä½¿ç”¨Kotlinä»é›¶å¼€å§‹å†™ä¸€ä¸ªç°ä»£Android é¡¹ç›®-Part1</a></p>\n<p><a href=\"https://juejin.im/post/6844904193275215880\" rel=\"nofollow noreferrer\">ã€è¯‘ã€‘ä½¿ç”¨Kotlinä»é›¶å¼€å§‹å†™ä¸€ä¸ªç°ä»£Android é¡¹ç›®-Part2</a></p>\n<p><a href=\"https://juejin.im/post/6844904197507268622\" rel=\"nofollow noreferrer\">ã€è¯‘ã€‘ä½¿ç”¨Kotlinä»é›¶å¼€å§‹å†™ä¸€ä¸ªç°ä»£Android é¡¹ç›®-Part3</a></p>\n<p><a href=\"https://juejin.im/post/6844904177408147463\" rel=\"nofollow noreferrer\">ã€è¯‘ã€‘ä½¿ç”¨Kotlinä»é›¶å¼€å§‹å†™ä¸€ä¸ªç°ä»£Android é¡¹ç›®-Part4</a></p>\n<blockquote>\n æ–‡ç« é¦–å‘äºå…¬ä¼—å·ï¼š\n <code>ã€Œ æŠ€æœ¯æœ€TOP ã€</code>ï¼Œæ¯å¤©éƒ½æœ‰å¹²è´§æ–‡ç« æŒç»­æ›´æ–°ï¼Œå¯ä»¥å¾®ä¿¡æœç´¢\n <code>ã€Œ æŠ€æœ¯æœ€TOP ã€</code>ç¬¬ä¸€æ—¶é—´é˜…è¯»ï¼Œå›å¤ã€æ€ç»´å¯¼å›¾ã€‘ã€é¢è¯•ã€‘ã€ç®€å†ã€‘æœ‰æˆ‘å‡†å¤‡ä¸€äº›Androidè¿›é˜¶è·¯çº¿ã€é¢è¯•æŒ‡å¯¼å’Œç®€å†æ¨¡æ¿é€ç»™ä½ \n</blockquote>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023708782\" alt=\"\" title=\"\" /></p>","descriptionType":"html","publishedDate":"Fri, 21 Aug 2020 01:53:54 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/remote/1460000023708779","linkMd5":"b4d24379ce31382e9336abd377405f85","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn42@2020_5/2020/08/24/23-08-23-053_b410fb298e7c2e62.webp","destWidth":754,"destHeight":488,"sourceBytes":38573,"destBytes":14822,"author":"ä¾ç„¶é¥­ç‰¹ç¨€è¥¿","articleImgCdnMap":{"https://segmentfault.com/img/remote/1460000023708779":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn42@2020_5/2020/08/24/23-08-23-053_b410fb298e7c2e62.webp","https://segmentfault.com/img/remote/1460000023708778":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn23@2020_2/2020/08/24/23-08-38-329_bf5033b02384e3e7.webp","https://segmentfault.com/img/remote/1460000023708781":"https://cdn.jsdelivr.net/gh/myreaderx13/cdn35@2020_2/2020/08/24/23-08-38-260_1b98c2cb4699745d.webp","https://segmentfault.com/img/remote/1460000023708780":"https://cdn.jsdelivr.net/gh/myreaderx25/cdn44@2020_6/2020/08/24/23-08-40-620_dfc9c678416ce7f2.webp","https://segmentfault.com/img/remote/1460000023708782":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn39@2020_5/2020/08/24/23-08-38-804_234d06daf8751ef2.webp"},"publishedOrCreatedDate":1598310388570},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"è¿è‚4å¤©ï¼Œè¿™ç¬é—´æˆ³ä¸­é¢è¯•å®˜å°å¿ƒå¿ƒçš„AQSå¤§é¤ï¼Œç»™å¤§å®¶å®‰æ’ä¸Šï¼ ","link":"https://segmentfault.com/a/1190000023709787","description":"<blockquote>\n ç‚¹èµçš„é“ä»”ï¼Œä½ æ—¶äººç¾¤ä¸­æœ€é—ªè€€çš„å…‰èŠ’\n</blockquote>\n<h3>å‰è¨€</h3>\n<p>AQSï¼Œè‹±æ–‡å…¨ç§°AbstractQueuedSynchronizerï¼Œç›´æ¥ç¿»è¯‘ä¸ºæŠ½è±¡çš„é˜Ÿåˆ—åŒæ­¥å™¨ã€‚æ˜¯JDK1.5å‡ºç°çš„ä¸€ä¸ªç”¨äºè§£å†³å¹¶å‘é—®é¢˜çš„å·¥å…·ç±»ï¼Œç”±å¤§åé¼é¼çš„Doug Leaæ‰“é€ ï¼Œä¸synchornizedå…³é”®å­—ä¸åŒçš„æ˜¯ï¼ŒAQSæ˜¯é€šè¿‡ä»£ç è§£å†³å¹¶å‘é—®é¢˜ã€‚</p>\n<h3>å›é¡¾å¹¶å‘é—®é¢˜</h3>\n<p>å¹¶å‘é—®é¢˜æ˜¯æŒ‡åœ¨å¤šçº¿ç¨‹è¿è¡Œç¯å¢ƒä¸‹ï¼Œå…±äº«èµ„æºå®‰å…¨çš„é—®é¢˜ã€‚<br>ç°åœ¨çš„é“¶è¡Œè´¦æˆ·ï¼Œé€šè¿‡é“¶è¡Œå¡å’Œæ‰‹æœºé“¶è¡Œéƒ½å¯ä»¥æ“ä½œè´¦æˆ·ï¼Œ å¦‚æœæˆ‘ä»¬åŒæ—¶æ‹¿ç€é“¶è¡Œå¡å’Œå­˜æŠ˜å»é“¶è¡Œæäº‹æƒ…ï¼Œä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿ</br></p>\n<pre><code class=\"java\">package demo.pattren.aqs;\n\npublic class Money {\n    /**\n     * å‡è®¾ç°åœ¨è´¦æˆ·æœ‰1000å—é’±\n     */\n    private int money = 1000;\n    /**\n     * å–é’±\n     */\n    public void drawMoney(){\n        this.money--;\n    }\n    public static void main(String[] args) throws InterruptedException {\n        Money money = new Money();\n        for(int i=0; i&lt;1000; i++){\n            new Thread(() -&gt; {\n                try {\n                    Thread.sleep(1);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                money.drawMoney();\n            },i + \"\").start();\n        }\n        Thread.sleep(2000);\n        System.out.println(\"å½“å‰è´¦æˆ·ä½™é¢ï¼š\" + money.money);\n    }\n}</code></pre>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023709792\" alt=\"\" title=\"\"><br>è¿™æ ·æƒ³ç€æ˜¯ä¸æ˜¯é©¬ä¸Šå¯ä»¥å»é“¶è¡Œæä¸€æ³¢äº‹æƒ…ï¼Ÿ å“ˆå“ˆï¼Œä½ æƒ³å¤ªå¤šäº†ï¼Œå¦‚æœèƒ½è¿™æ ·æï¼Œé“¶è¡Œæ—©ç ´äº§äº†ã€‚æˆ‘ä»¬ä¸»è¦æ˜¯æ¥åˆ†æä¸€ä¸‹å‡ºç°è¿™ä¸ªé—®é¢˜çš„åŸå› ,JVMå†…å­˜æ˜¯JMMç»“æ„çš„ï¼Œæ¯ä¸ªçº¿ç¨‹æ“ä½œçš„æ•°æ®æ˜¯ä»ä¸»å†…å­˜ä¸­å¤åˆ¶çš„ä¸€ä¸ªå’Œå¤‡ä»½ï¼Œè€Œå¤šä¸ªçº¿ç¨‹å°±ä¼šå­˜åœ¨å¤šä¸ªå¤‡ä»½ï¼Œå½“çº¿ç¨‹ä¸­çš„å¤‡ä»½æ•°æ®è¢«ä¿®æ”¹æ—¶ï¼Œä¼šå°†å€¼åˆ·æ–°åˆ°ä¸»å†…å­˜ï¼Œæ¯”å¦‚å¤šä¸ªçº¿ç¨‹åŒæ—¶è·å–åˆ°äº†è´¦æˆ·çš„ä½™é¢ä¸º500å…ƒï¼ŒAçº¿ç¨‹å­˜é’±100ï¼Œçº¿ç¨‹Aå°†600åˆ·æ–°åˆ°ä¸»å†…å­˜ï¼Œ$\\color{red}{ä¸»å†…å­˜å¹¶ä¸ä¼šä¸»åŠ¨é€šçŸ¥å…¶ä»–çº¿ç¨‹æ­¤æ—¶å€¼å·²ç»è¢«ä¿®æ”¹}$ï¼Œæ‰€ä»¥ä¸»å†…å­˜çš„å€¼æ­¤æ—¶ä¸å…¶ä»–çº¿ç¨‹çš„å€¼æ˜¯ä¸åŒçš„ï¼Œå¦‚æœå…¶ä»–çº¿ç¨‹å†æ“ä½œè´¦æˆ·ä½™é¢ï¼Œæ˜¯åœ¨500çš„åŸºç¡€ä¸Šè¿›è¡Œçš„ï¼Œè¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚<br><img src=\"https://segmentfault.com/img/remote/1460000023709790\" alt=\"\" title=\"\" /></br></br></img></p>\n<h3>è§£å†³å¹¶å‘é—®é¢˜</h3>\n<p>JDKæä¾›äº†å¤šç§è§£å†³å¤šçº¿ç¨‹å®‰å…¨çš„æ–¹å¼ã€‚</p>\n<h4>volatileå…³é”®å­—</h4>\n<p>volatileæ˜¯JDKæä¾›çš„å…³é”®å­—ï¼Œç”¨æ¥ä¿®é¥°å˜é‡ï¼Œvolatileä¿®é¥°çš„å˜é‡èƒ½å¤Ÿä¿è¯å¤šä¸ªçº¿ç¨‹ä¸‹çš„å¯è§æ€§ï¼Œå¦‚ä¸Šä¸ªæ¡ˆä¾‹ï¼ŒAä¿®æ”¹äº†è´¦æˆ·çš„ä½™é¢ï¼Œç„¶åå°†æœ€æ–°çš„å€¼åˆ·æ–°åˆ°ä¸»å†…å­˜ï¼Œæ­¤æ—¶ä¸»å†…å­˜ä¼šå°†æœ€æ–°çš„å€¼åŒæ­¥åˆ°å…¶ä»–çº¿ç¨‹ã€‚<br><img src=\"https://segmentfault.com/img/remote/1460000023709791\" alt=\"\" title=\"\"><br>volatileè§£å†³äº†å¤šçº¿ç¨‹ä¸‹æ•°æ®è¯»å–ä¸€è‡´çš„é—®é¢˜ï¼Œ$\\color{red}{å³ä¿è¯å¯è§æ€§ï¼Œä½†æ˜¯å…¶å¹¶ä¸èƒ½ä¿è¯å†™æ“ä½œçš„åŸå­æ€§}$,<br><img src=\"https://segmentfault.com/img/remote/1460000023709793\" alt=\"\" title=\"\"><br>å½“å¤šä¸ªçº¿ç¨‹åŒæ—¶å†™æ“ä½œçš„æ—¶å€™ï¼Œå³å¤šä¸ªçº¿ç¨‹åŒæ—¶å»å°†çº¿ç¨‹ä¸­æœ€æ–°çš„å€¼åˆ·æ–°åˆ°ä¸»å†…å­˜ï¼Œå°†ä¼šå‡ºç°é—®é¢˜ã€‚<br><img src=\"https://segmentfault.com/img/remote/1460000023709794\" alt=\"\" title=\"\"><br>é€šè¿‡volatileå…³é”®å­—ä¿®é¥°moneyå˜é‡ï¼Œå‘ä¸‹å¹¶ä¸èƒ½è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</br></img></br></br></img></br></br></img></br></p>\n<h4>åŸå­æ“ä½œç±»</h4>\n<p>åŸå­æ“ä½œç±»æ˜¯JDKæä¾›çš„ä¸€ç³»åˆ—ä¿è¯åŸå­æ“ä½œçš„å·¥å…·ç±»ï¼ŒåŸå­ç±»å¯ä»¥ä¿è¯å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¯¹å…¶å€¼çš„æ“ä½œæ˜¯å®‰å…¨çš„ã€‚</p>\n<pre><code class=\"java\">package demo.pattren.aqs;\n\nimport java.util.concurrent.atomic.AtomicInteger;\n\npublic class AtomicMoney {\n    /**\n     * å‡è®¾ç°åœ¨è´¦æˆ·æœ‰1000å—é’±\n     */\n    private AtomicInteger money = new AtomicInteger(1000);\n    /**\n     * å–é’±\n     */\n    public void drawMoney(){\n        //AtomicIntegerçš„è‡ªå‡æ“ä½œ\n        this.money.getAndDecrement();\n    }\n    public static void main(String[] args) throws InterruptedException {\n        AtomicMoney money = new AtomicMoney();\n        for(int i=0; i&lt;1000; i++){\n            new Thread(() -&gt; {\n                try {\n                    Thread.sleep(1);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                money.drawMoney();\n            },i + \"\").start();\n        }\n        Thread.sleep(2000);\n        System.out.println(\"å½“å‰è´¦æˆ·ä½™é¢ï¼š\" + money.money);\n    }\n}</code></pre>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023709795\" alt=\"\" title=\"\"><br>å¤šæ¬¡æµ‹è¯•ç»“æœéƒ½æ˜¯0ï¼Œä¸é¢„æœŸä¸€è‡´ã€‚åŸå­æ“ä½œç±»æ˜¯ä½¿ç”¨CAS(Compare and swap æ¯”è¾ƒå¹¶æ›¿æ¢)çš„æœºåˆ¶æ¥ä¿è¯æ“ä½œçš„åŸå­æ€§ï¼Œç›¸å¯¹äºé”ï¼Œä»–çš„å¹¶å‘æ€§æ›´é«˜ã€‚</br></img></p>\n<h4>synchronizedå…³é”®å­—</h4>\n<p>synchronizedå…³é”®å­—æ˜¯jvmå±‚é¢æ¥ä¿è¯çº¿ç¨‹å®‰å…¨çš„ï¼Œé€šè¿‡åœ¨ä»£ç å—å‰åæ·»åŠ monitorenterä¸monitorexitå‘½ä»¤æ¥ä¿è¯çº¿ç¨‹çš„å®‰å…¨ï¼Œè€Œä¸”åœ¨JDK1.6å¯¹synchronizedå…³é”®å­—åšäº†è¾ƒå¤§çš„ä¼˜åŒ–ï¼Œæ€§èƒ½æœ‰äº†è¾ƒå¤§çš„æå‡ã€‚å¯ä»¥ç¡®å®šçš„æ˜¯ï¼Œé€šè¿‡synchronizedè‚¯å®šå¯ä»¥ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œæ‰€ä»¥ä½¿ç”¨synchronizedä¹Ÿæ˜¯å¾ˆå¥½çš„é€‰æ‹©ï¼Œå½“ç„¶synchronizedé”çš„å‡çº§ä¸å¯é€†ç‰¹å¾ï¼Œå¯¼è‡´åœ¨é«˜å¹¶å‘ä¸‹æ€§èƒ½æ˜¯ä¸èƒ½å¾ˆå¥½çš„ä¿è¯ã€‚</p>\n<h4>Locké”</h4>\n<p>ç»ˆäºè¿æ¥äº†æœ¬ç¯‡æ–‡ç« çš„ä¸»è§’ï¼Œå‰é¢çš„å†…å®¹ï¼Œå…¶å®ä¸æ–‡ç« çš„ä¸»é¢˜AQSå¹¶æ²¡æœ‰ç›´æ¥çš„å…³è”ï¼Œå°±ç®€å•å¸¦è¿‡ã€‚å‰é¢å¾ˆå¤šéƒ½æ˜¯JVMå±‚é¢æ¥ä¿è¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè€ŒAQSåˆ™æ˜¯å®Œå…¨é€šè¿‡ä»£ç å±‚é¢æ¥å¤„ç†çº¿ç¨‹å®‰å…¨çš„ã€‚<br>(PSï¼šå°èŠ‚æ ‡é¢˜æ˜æ˜æ˜¯Locké”ï¼Œæ€ä¹ˆå†™AQSäº†ï¼Œéª—æˆ‘è¯»ä¹¦å°‘)<br><img src=\"https://segmentfault.com/img/remote/1460000023709797\" alt=\"\" title=\"\" /></br></br></p>\n<p>åšä¸»æ€•æŒ¨æ‰“ï¼Œæ­£åœ¨å…¨åŠ›è§£é‡Šä¸­<del>~</del>ã€‚å…ˆä¸Šç±»å›¾å‹åœºï¼<br><img src=\"https://segmentfault.com/img/remote/1460000023709796\" alt=\"\" title=\"\"><br>å¦‚ä¸Šå›¾ï¼Œå·¦è¾¹æ˜¯æŠ½è±¡é˜Ÿåˆ—åŒæ­¥å™¨ï¼Œè€Œå³è¾¹åˆ™æ˜¯ä½¿ç”¨é˜Ÿåˆ—åŒæ­¥å™¨å®ç°çš„åŠŸèƒ½â€”â€”é”ã€ä¿¡å·é‡ã€å‘ä»¤æªç­‰ã€‚<br>å¯ä»¥å…ˆä¸çœ‹æºç ï¼Œå’±ä»¬è‡ªå·±æ€è€ƒï¼Œè¦ä»¥çº¯ä»£ç çš„æ–¹å¼å®ç°åº”å½“è€ƒè™‘å“ªäº›é—®é¢˜ï¼Ÿ</br></br></img></br></p>\n<ol>\n <li>çº¿ç¨‹äº’æ–¥ï¼šå¯ä»¥ä½¿ç”¨stateçŠ¶æ€è¿›è¡Œåˆ¤æ–­ï¼Œstate=0ï¼Œåˆ™å¯ä»¥è·å–åˆ°é”ï¼Œstate&gt;0,åˆ™ä¸èƒ½è·å–ã€‚</li>\n <li>æ’é˜Ÿç­‰å€™ï¼šä¸èƒ½è·å–é”çš„çº¿ç¨‹åº”å½“å­˜å‚¨èµ·æ¥ï¼Œå½“é”é‡Šæ”¾åå¯ä»¥ç»§ç»­è·å–é”æ‰§è¡Œã€‚</li>\n <li>çº¿ç¨‹å”¤é†’ï¼šå½“é”é‡Šæ”¾åï¼Œå¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹åº”å½“è¢«å”¤é†’ã€‚</li>\n <li>é”é‡å…¥ ï¼š å¦‚ä½•è§£å†³åŒä¸€ä¸ªè¿›å…¥å¤šä¸ªåŠ é”çš„æ–¹æ³•(ä¸è§£å†³çš„è¯åˆ†åˆ†é’Ÿæ­»é”ç»™ä½ çœ‹)ã€‚</li>\n</ol>\n<p>å¯¹äº1ã€2ä¸¤ç‚¹ï¼Œéš¾åº¦åº”å¸¦ä¸å¤§ï¼Œè€Œ3ã€4ä¸¤ç‚¹å¦‚ä½•å»è®¾è®¡å‘¢ï¼Ÿæˆ‘ä»¬é€šè¿‡ä¼ªä»£ç é¢„æ¼”æ“ä½œæµç¨‹ã€‚</p>\n<p>åœ¨ä¸šåŠ¡ç«¯ï¼Œæ˜¯è¿™æ ·æ“ä½œçš„ã€‚</p>\n<pre><code>  åŠ é”\n  {éœ€è¦è¢«é”ä½çš„ä»£ç }\n  é‡Šæ”¾é”</code></pre>\n<p>åŠ é”ä¸é‡Šæ”¾é”çš„é€»è¾‘</p>\n<pre><code class=\"java\">    if(state == 0)\n      è·å–åˆ°é”\n      set(state == 1)\n    else\n      ç»§ç»­ç­‰å¾…\n      while(true){\n           if(state == 0)\n             å†æ¬¡å°è¯•è·å–é”\n      }</code></pre>\n<p>è¿™æ ·è®¾è®¡ä¹‹åï¼Œæ•´ä¸ªæ“ä½œæµç¨‹å†æ¬¡å˜æˆäº†ä¸²è¡Œæ“ä½œã€‚<br><img src=\"https://segmentfault.com/img/remote/1460000023709798\" alt=\"\" title=\"\" /></br></p>\n<p>è¿™å’Œæˆ‘ä»¬å»é£Ÿå ‚æ’é˜Ÿæ‰“é¥­æ˜¯ä¸€æ ·çš„ï¼Œé£Ÿå ‚ä¸å¯èƒ½ä¸ºæ¯ä¸ªå­¦ç”Ÿéƒ½å¼€æ”¾ä¸€ä¸ªçª—å£ï¼Œæ‰€ä»¥å¤šä¸ªå­¦ç”Ÿå°±ä¼šäº‰æŠ¢æœ‰é™çš„çª—å£ï¼Œå¦‚æœæ²¡æœ‰ä¸€å®šçš„æ§åˆ¶ï¼Œé‚£ä¹ˆé£Ÿå ‚æ¯åˆ°åƒé¥­çš„æ—¶å€™éƒ½æ˜¯ä¹±å¥—çš„ï¼Œä¸€ç¾¤å­¦ç”Ÿå›´ç€çª—å£åŒæ—¶å»æ‰“é¥­ï¼Œæƒ³æƒ³éƒ½æ˜¯å¤šä¹ˆçš„ææ€–ã€‚è€Œç”±æ­¤å‡ºç°äº†æ’é˜Ÿçš„æœºåˆ¶ï¼Œä¸€ä¸ªçª—å£åŒä¸€æ—¶é—´æ‰“é¥­çš„äººåªèƒ½æœ‰ä¸€ä¸ªï¼Œå½“å‰ä¸€ä¸ªäººç¦»å¼€çª—å£åï¼Œåé¢æ’é˜Ÿçš„å­¦ç”Ÿæ‰èƒ½å»æ‰“é¥­ã€‚<br><img src=\"https://segmentfault.com/img/remote/1460000023709801\" alt=\"\" title=\"\" /></br></p>\n<h3>æºç è§£è¯»</h3>\n<p>ä¸‹é¢æˆ‘ä»¬æ·±å…¥JDKæºç ï¼Œé¢†ç•¥å¤§å¸ˆçº§çš„ä»£ç è®¾è®¡ã€‚<br>ä¸šåŠ¡è°ƒç”¨ä»£ç :</br></p>\n<pre><code class=\"java\">package demo.aqs;\n\nimport java.util.concurrent.locks.Lock;\nimport java.util.concurrent.locks.ReentrantLock;\n\npublic class LockMoney {\n    Lock lock = new ReentrantLock();\n    /**\n     * å‡è®¾ç°åœ¨è´¦æˆ·æœ‰1000å—é’±\n     */\n    private int money = 1000;\n    //private int money = 1000;\n    /**\n     * å–é’±\n     */\n    public void drawMoney(){\n        lock.lock();\n        this.money--;\n        lock.unlock();\n    }\n    public static void main(String[] args) throws InterruptedException {\n        LockMoney money = new LockMoney();\n        for(int i=0; i&lt;1000; i++){\n            new Thread(() -&gt; {\n                try {\n                    Thread.sleep(1);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                money.drawMoney();\n            },i + \"\").start();\n        }\n        Thread.sleep(2000);\n        System.out.println(\"å½“å‰è´¦æˆ·ä½™é¢ï¼š\" + money.money);\n    }\n}</code></pre>\n<p>è¿½è¸ªLockæ–¹æ³•ï¼š<br>ç›´æ¥çœ‹æºç åŸºæœ¬ä¸€ä¼šå„¿å°±æ™•è½¦ï¼Œæˆ‘å°è¯•ç»˜åˆ¶å‡ºlockæ–¹æ³•çš„è°ƒç”¨é“¾è·¯ã€‚ç„¶åç»“åˆæºç è§£é‡Šã€‚<br><img src=\"https://segmentfault.com/img/remote/1460000023709799\" alt=\"\" title=\"\" /></br></br></p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023709796\" alt=\"\" title=\"\"><br>å¤§å®¶è·Ÿç€ç®­å¤´èµ°ä¸€éæºç ï¼Œå¤šå¤šå°‘å°‘èƒ½å¤Ÿä½“ä¼šåˆ°AQSçš„å®ç°æœºåˆ¶ã€‚</br></img></p>\n<h4>NonfairSync.lock</h4>\n<pre><code class=\"java\">final void lock() {\n    //CASå°è¯•å°†stateä»0æ›´æ–°ä¸º1ï¼Œæ›´æ–°æˆåŠŸåˆ™æ‰§è¡Œifä¸‹é¢çš„ä»£ç ã€‚\n    if (compareAndSetState(0, 1))\n        //è·å–é”æˆåŠŸï¼Œæ‰§è¡Œçº¿ç¨‹æ‰§è¡Œ\n        setExclusiveOwnerThread(Thread.currentThread());\n    else\n        //è·å–é”å¤±è´¥ï¼Œçº¿ç¨‹å…¥é˜Ÿåˆ—\n        acquire(1);\n}</code></pre>\n<p>çœ‹åˆ°è¿™æ®µä»£ç ï¼Œæ˜¯ä¸æ˜¯ç¬é—´æ˜ç™½å‰é¢æåˆ°çš„1ã€2ä¸¤ç‚¹é—®é¢˜ã€‚é¦–å…ˆcompareAndSetStateæ–¹æ³•æ˜¯ä½¿ç”¨Unsafeç›´æ¥æ“ä½œå†…å­˜å¹¶ä¸”ä½¿ç”¨ä¹è§‚é”çš„æ–¹å¼ï¼Œèƒ½å¤Ÿä¿è¯æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿæ“ä½œæˆåŠŸï¼Œæ˜¯å¤šçº¿ç¨‹å®‰å…¨çš„ã€‚å³è®¾ç½®å°†stateè®¾ç½®ä¸º1æˆåŠŸçš„çº¿ç¨‹èƒ½å¤ŸæŠ¢å åˆ°é”(<strong><em>çº¿ç¨‹äº’æ–¥</em></strong>)ï¼Œè€Œæ²¡æœ‰è®¾ç½®æˆåŠŸçš„çº¿ç¨‹å°†è¿›è¡Œå…¥é˜Ÿæ“ä½œ(<strong><em>æ’é˜Ÿç­‰å€™</em></strong>)ï¼Œè¿™æ ·æ„Ÿè§‰ç¬é—´æ˜æœ—äº†è®¸å¤šï¼Œé‚£æˆ‘ä»¬æ¥ç€å¾€ä¸‹çœ‹ã€‚</p>\n<h4>AbstractQueuedSynchronizor.acquire</h4>\n<pre><code class=\"java\"> public final void acquire(int arg) {\n    //tryAcquireå¤±è´¥å¹¶ä¸”acquireQueuedæˆåŠŸï¼Œåˆ™è°ƒç”¨selfInterrupt\n    if (!tryAcquire(arg) &amp;&amp; acquireQueued(addWaiter(Node.EXCLUSIVE), arg))\n        //å½“çº¿ç¨‹è·å–é”å¤±è´¥å¹¶ä¸”çº¿ç¨‹é˜»å¡å¤±è´¥ä¼šä¸­æ–­çº¿ç¨‹\n        selfInterrupt();\n}</code></pre>\n<p>AbstractQueuedSynchronizorçš„tryAcquireæ–¹æ³•,å…¶æœ€ç»ˆè°ƒç”¨åˆ°äº†Syncçš„nonfairTryAcquire</p>\n<pre><code class=\"java\"> final boolean nonfairTryAcquire(int acquires) {\n    final Thread current = Thread.currentThread();\n    //è·å–å½“å‰é”çš„çŠ¶æ€å€¼\n    int c = getState();\n    // state = 0,è¡¨ç¤ºå½“å‰é”ä¸ºç©ºé—²çŠ¶æ€ï¼Œå…¶å®è¿™ä¸€æ®µä»£ç å’Œå‰é¢lockçš„æ–¹æ³•æ˜¯ä¸€æ ·çš„\n    if (c == 0) {\n        if (compareAndSetState(0, acquires)) {\n            setExclusiveOwnerThread(current);\n            return true;\n        }\n    }\n    //ä¸ç­‰äº0 åˆ™åˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦ä¸ºæŒæœ‰é”çš„çº¿ç¨‹ï¼Œå¦‚æœæ˜¯åˆ™æ‰§è¡Œä»£ç ï¼Œè¿™é‡Œè§£å†³äº†é‡å…¥é”é—®é¢˜\n    else if (current == getExclusiveOwnerThread()) {\n        //å½“å‰çŠ¶æ€å€¼ + 1(å¯ä»¥çœ‹å‰é¢çš„ä¼ å‚)\n        int nextc = c + acquires;\n        // å›§ï¼Œ è¿™é‡Œæ˜¯è¶…å‡ºäº†intçš„æœ€å¤§å€¼æ‰ä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µ\n        if (nextc &lt; 0) // overflow\n            throw new Error(\"Maximum lock count exceeded\");\n        //æ›´æ–°stateçš„å€¼\n        setState(nextc);\n        return true;\n    }\n    return false;\n}</code></pre>\n<p>é€šè¿‡é˜…è¯»æºç ï¼Œå¯ä»¥å‘ç°ï¼ŒtryAcquireæ–¹æ³•åœ¨å½“å‰çº¿ç¨‹è·å–é”æˆåŠŸæˆ–è€…æ˜¯é‡å…¥é”çš„æƒ…å†µä¸‹è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚è€ŒåŒæ—¶è¿™ä¸ªæ–¹æ³•è§£å†³äº†ä¸Šé¢æåˆ°çš„ç¬¬4ç‚¹é”é‡å…¥çš„é—®é¢˜ã€‚okï¼Œæ„Ÿè§‰è¶Šæ¥è¶Šæ¥è¿‘çœŸç›¸äº†ï¼Œæ¥ç€çœ‹addWaiteræ–¹æ³•ã€‚<br>ç†è§£addWaiteræ–¹æ³•çš„ä»£ç ï¼Œå…ˆçœ‹æ–¹æ³•ä¸­ç”¨çš„å¾—Nodeå¯¹è±¡ã€‚ Nodeå¯¹è±¡æ˜¯å¯¹Threadå¯¹è±¡çš„å°è£…ï¼Œä½¿å…¶å…·æœ‰çº¿ç¨‹çš„åŠŸèƒ½ï¼ŒåŒæ—¶ä»–è¿˜æœ‰prevã€nextç­‰å±æ€§ã€‚é‚£ä¹ˆå¾ˆæ˜äº†ï¼ŒNodeæ˜¯ä¸€ä¸ªé“¾è¡¨ç»“æ„çš„å¯¹è±¡</br></p>\n<pre><code class=\"java\">   //å‰ä¸€ä¸ªç»“ç‚¹\n   volatile Node prev;\n   //ä¸‹ä¸€ä¸ªç»“ç‚¹\n   volatile Node next;\n</code></pre>\n<p>åŒæ—¶AbstractQueuedSynchronizorä¸­åŒ…å«headã€tailå±æ€§</p>\n<pre><code class=\"java\"> //Nodeé“¾è¡¨çš„å¤´ç»“ç‚¹\n private transient volatile Node head;\n //Nodeé“¾è¡¨çš„å°¾ç»“ç‚¹\n private transient volatile Node tail;</code></pre>\n<pre><code class=\"java\">private Node addWaiter(Node mode) {\n    //å°†å½“å‰çº¿ç¨‹åŒ…è£…ä¸ºNodeå¯¹è±¡\n    Node node = new Node(Thread.currentThread(), mode);\n    //è·å–å°¾èŠ‚ç‚¹ï¼Œå½“è¿™æ®µä»£ç ç¬¬ä¸€æ¬¡è¿è¡Œçš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰å°¾ç»“ç‚¹\n    //æ‰€ä»¥è‚¯å®šå€¼ä¸ºnullï¼Œé‚£ä¹ˆä¼šæ‰§è¡Œä¸‹é¢çš„enqæ–¹æ³•\n    Node pred = tail;\n    //å½“å†æ¬¡è¿è¡Œä»£ç çš„æ—¶å€™ï¼Œå°¾ç»“ç‚¹ä¸å†ä¸ºnull(enqæ–¹æ³•åˆå§‹åŒ–äº†å°¾ç»“ç‚¹,å¯ä»¥å…ˆå¾€ä¸‹çœ‹enqæ–¹æ³•æºç )\n    if (pred != null) {\n        //å½“å‰ç»“ç‚¹çš„å‰ç½®ç»“ç‚¹æŒ‡å‘ä¹‹å‰çš„å°¾ç»“ç‚¹\n        node.prev = pred;\n        //CASå°è¯•å°†å°¾ç»“ç‚¹ä»predè®¾ç½®ä¸ºnode\n        if (compareAndSetTail(pred, node)) {\n            //è®¾ç½®æˆåŠŸåˆ™å°†predçš„nextç»“ç‚¹æ‰§è¡Œnode\n            pred.next = node;\n            return node;\n        }\n    }\n    enq(node);\n    return node;\n}</code></pre>\n<p>ä¸Šé¢çš„è§£é‡Šå¬ç€æœ‰ç‚¹ç»•è„‘è¢‹ã€‚<br><img src=\"https://segmentfault.com/img/remote/1460000023709803\" alt=\"\" title=\"\"><br>ä¸ç€æ€¥ï¼Œæˆ‘ä»¬å…ˆçœ‹enqæ–¹æ³•</br></img></br></p>\n<pre><code class=\"java\">private Node enq(final Node node) {\n    //æ­»å¾ªç¯\n    for (;;) {\n        //è·å–å°¾ç»“ç‚¹\n        Node t = tail;\n        //å°¾ç»“ç‚¹ä¸ºç©ºï¼Œåˆ™åˆå§‹åŒ–å°¾ç»“ç‚¹å’Œå¤´ç»“ç‚¹ä¸ºåŒä¸€ä¸ªæ–°åˆ›å»ºçš„Nodeå¯¹è±¡\n        if (t == null) { // Must initialize\n            if (compareAndSetHead(new Node()))\n                tail = head;\n        } else {\n            //å°†å½“å‰ç»“ç‚¹è®¾ä¸ºä¸ºå°¾ç»“ç‚¹ï¼Œå¹¶å°†å‰ä¸€ä¸ªå°¾ç»“ç‚¹çš„nextæŒ‡å‘å½“å‰ç»“ç‚¹\n            node.prev = t;\n            if (compareAndSetTail(t, node)) {\n                t.next = node;\n                //é€€å‡ºå¾ªç¯\n                return t;\n            }\n        }\n    }\n}</code></pre>\n<p>enqå…·ä½“åšäº†ä»€ä¹ˆäº‹æƒ…å‘¢ï¼š</p>\n<ol>\n <li>ç¬¬ä¸€æ¬¡å¾ªç¯ï¼Œåˆå§‹åŒ–å¤´ç»“ç‚¹ä¸å°¾ç»“ç‚¹ new Node()</li>\n <li>ç¬¬äºŒæ¬¡å¾ªç¯ï¼Œå°†å½“å‰çº¿ç¨‹å°è£…çš„Nodeå¯¹è±¡è®¾ç½®ä¸ºå°¾ç»“ç‚¹ï¼Œå¹¶å°†å‰ä¸€ä¸ªå°¾ç»“ç‚¹çš„nextæŒ‡å‘æ­¤Node</li>\n</ol>\n<p>è¿™é‡Œéœ€è¦ä¸€äº›æ—¶é—´ + ç©ºé—´çš„æƒ³è±¡åŠ›ï¼Œä½†å¦‚æœå¯¹é“¾è¡¨ç»“æ„æ¯”è¾ƒç†Ÿæ‚‰çš„è¯ï¼Œè¿™é‡Œç†è§£ä¹Ÿæ˜¯ä¸å¤ªå›°éš¾çš„ã€‚<br>æˆ‘ä»¬åŠ¨æ€çš„æƒ³ä¸€æƒ³æ‰§è¡Œè¿‡ç¨‹ï¼š</br></p>\n<ol>\n <li>ç¬¬ä¸€ä¸ªçº¿ç¨‹è¿›å…¥lockæ–¹æ³•ï¼Œæ­¤æ—¶æ˜¯è‚¯å®šå¯ä»¥è·å–åˆ°é”ï¼Œç›´æ¥æ‰§è¡Œï¼Œä¸ä¼šè¿›å…¥åˆ°addWaiteræ–¹æ³•</li>\n <li>ç¬¬äºŒä¸ªçº¿ç¨‹è¿›å…¥lockæ–¹æ³•ï¼Œæˆ‘ä»¬å‡è®¾ç¬¬ä¸€ä¸ªçº¿ç¨‹è¿˜æ²¡æœ‰é‡Šæ”¾é”ï¼Œæ­¤æ—¶è¿›å…¥æ‰§è¡Œenqæ–¹æ³•ï¼Œenqè¿›è¡Œé“¾è¡¨çš„åˆå§‹åŒ–ã€‚</li>\n</ol>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023709802\" alt=\"\" title=\"\" /></p>\n<ol>\n <li>ç¬¬ä¸‰ä¸ªçº¿ç¨‹ä»¥åŠæ›´å¤šçš„çº¿ç¨‹è¿›å…¥lockæ–¹æ³•ï¼Œæ­¤æ—¶ä¸å†æ‰§è¡Œenqæ–¹æ³•ï¼Œè€Œæ˜¯åœ¨åˆå§‹åŒ–ä¹‹åçš„é“¾è¡¨è¿›è¡Œé“¾æ¥ã€‚</li>\n</ol>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023709804\" alt=\"\" title=\"\" /></p>\n<h4>acquireQueued</h4>\n<pre><code>final boolean acquireQueued(final Node node, int arg) {\n  //å±€éƒ¨å˜é‡\n  boolean failed = true;\n  try {\n      //å±€éƒ¨å˜é‡\n      boolean interrupted = false;\n      //æ­»å¾ªç¯\n      for (;;) {\n          //è·å–å‰ç½®ç»“ç‚¹\n          final Node p = node.predecessor();\n          //å‰ç½®ç»“ç‚¹ä¸ºheadå¹¶ä¸”å°è¯•è·å–é”æˆåŠŸï¼Œåˆ™ä¸é˜»å¡\n          if (p == head &amp;&amp; tryAcquire(arg)) {\n              setHead(node);\n              p.next = null; // help GC\n              failed = false;\n              return interrupted;\n          }\n          //é˜»å¡æ“ä½œ ï¼Œ åˆ¤æ–­æ˜¯å¦åº”è¯¥é˜»å¡ å¹¶ä¸” é˜»å¡æ˜¯å¦æˆåŠŸ\n          if (\n                //æ˜¯å¦åœ¨æŠ¢å é”å¤±è´¥åé˜»å¡\n              shouldParkAfterFailedAcquire(p, node) &amp;&amp;\n              //Unsafeæ“ä½œä½¿çº¿ç¨‹é˜»å¡\n              parkAndCheckInterrupt())\n              interrupted = true;\n      }\n  } finally {\n      if (failed)\n          cancelAcquire(node);\n  }\n}</code></pre>\n<h4>shouldParkAfterFailedAcquireåˆ†æ</h4>\n<pre><code>//Node pred å‰ç½®ç»“ç‚¹, Node node å½“å‰ç»“ç‚¹\nprivate static boolean shouldParkAfterFailedAcquire(Node pred, Node node) {\n    //è·å–å‰ç½®ç»“ç‚¹çš„ç­‰å¾…çŠ¶æ€\n    int ws = pred.waitStatus;\n    if (ws == Node.SIGNAL)\n        /*\n         * å”¤é†’ä¿¡å·ï¼Œå³å‰ç»“ç‚¹æ­£å¸¸ï¼Œå°±è®¾ç½®waitStatusä¸ºSIGNALï¼Œè¡¨ç¤ºå‰ç½®ç»“ç‚¹å¯ä»¥å”¤é†’å½“å‰ç»“ç‚¹ï¼Œé‚£          * ä¹ˆå½“å‰ç»“ç‚¹æ‰ä¼šå®‰å¿ƒçš„è¢«é˜»å¡(å¦‚æœå‰ç½®ç»“ç‚¹ä¸æ­£å¸¸ï¼Œå¯èƒ½å°±ä¼šå¯¼è‡´è‡ªå·±ä¸èƒ½è¢«å”¤é†’ï¼Œé‚£è‚¯å®šä¸          * èƒ½å®‰å¿ƒç¡è§‰çš„)\n         */\n        return true;\n    if (ws &gt; 0) {\n        /*\n         * æ‰¾åˆ°å‰ç½®ç»“ç‚¹ä¸­waitStatus &lt;= 0 çš„Nodeç»“ç‚¹å¹¶è®¾ç½®ä¸ºå½“å‰ç»“ç‚¹çš„å‰ç½®ç»“ç‚¹\n         * æ­¤çŠ¶æ€è¡¨ç¤ºç»“ç‚¹ä¸æ˜¯å¤„äºæ­£å¸¸çŠ¶æ€ï¼Œé‚£ä¹ˆå°†ä»–ä»é“¾è¡¨ä¸­åˆ é™¤ï¼Œç›´åˆ°æ‰¾åˆ°çŠ¶æ€æ­£å¸¸çš„ç»“ç‚¹\n         */\n        do {\n            node.prev = pred = pred.prev;\n        } while (pred.waitStatus &gt; 0);\n        pred.next = node;\n    } else {\n        /*\n         * å½“waitStatus = 0 æˆ–è€… PROPAGATE(-3) æ—¶ï¼ŒCASè®¾ç½®å€¼ä¸ºSIGNAL(-1)\n         * æ­¤çŠ¶æ€è¡¨ç¤ºçº¿ç¨‹æ­£å¸¸ï¼Œä½†æ²¡æœ‰è®¾ç½®å”¤é†’ï¼Œä¸€èˆ¬ä¸ºtailçš„å‰ä¸€ä¸ªç»“ç‚¹ï¼Œé‚£ä¹ˆéœ€è¦å°†å…¶è®¾ç½®ä¸ºå¯å”¤é†’          * çŠ¶æ€(SIGNAL)\n         */\n        compareAndSetWaitStatus(pred, ws, Node.SIGNAL);\n    }\n    return false;\n}</code></pre>\n<p>å›¾è§£å¦‚ä¸‹ã€‚<br><img src=\"https://segmentfault.com/img/remote/1460000023709805\" alt=\"\" title=\"\" /></br></p>\n<p>è‡³æ­¤ï¼Œæˆ‘ä»¬äº†è§£äº†AQSå¯¹éœ€è¦ç­‰å¾…çš„çº¿ç¨‹å­˜å‚¨çš„è¿‡ç¨‹ã€‚<br>è€ŒAQSçš„è§£é”ä»¥åŠå…¬å¹³é”ã€éå…¬å¹³é”ï¼Œå…±äº«é”ã€ç‹¬äº«é”ç­‰åç»­è·Ÿä¸Šã€‚</br></p>\n<p>å‚è€ƒèµ„æ–™ï¼š</p>\n<p><a href=\"https://www.cnblogs.com/waterystone/p/4920797.html\" rel=\"nofollow noreferrer\">https://www.cnblogs.com/water...</a><br><a href=\"https://www.jianshu.com/p/d61f025ad836\" rel=\"nofollow noreferrer\">https://www.jianshu.com/p/d61...</a></br></p>","descriptionType":"html","publishedDate":"Fri, 21 Aug 2020 02:39:45 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/remote/1460000023709792","linkMd5":"ac9425a1dc212f5c19afed90d55afc0d","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx32/cdn9@2020_2/2020/08/24/23-08-23-053_139a4be2af02dca5.webp","destWidth":678,"destHeight":64,"sourceBytes":3107,"destBytes":2152,"author":"FishCode","articleImgCdnMap":{"https://segmentfault.com/img/remote/1460000023709792":"https://cdn.jsdelivr.net/gh/myreaderx32/cdn9@2020_2/2020/08/24/23-08-23-053_139a4be2af02dca5.webp","https://segmentfault.com/img/remote/1460000023709790":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn66@2020_1/2020/08/24/23-08-33-212_466a91e430815709.webp","https://segmentfault.com/img/remote/1460000023709791":"https://cdn.jsdelivr.net/gh/myreaderx23/cdn62@2020_2/2020/08/24/23-08-33-065_aca834d1f78506e1.webp","https://segmentfault.com/img/remote/1460000023709793":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn54@2020_1/2020/08/24/23-08-33-326_296fe34c1d67332e.webp","https://segmentfault.com/img/remote/1460000023709794":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn57@2020_2/2020/08/24/23-08-33-158_ea591013ed81ca92.webp","https://segmentfault.com/img/remote/1460000023709795":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn90@2020_4/2020/08/24/23-08-33-301_d3cdfa771a80fd89.webp","https://segmentfault.com/img/remote/1460000023709797":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn74@2020_4/2020/08/24/23-08-33-616_c5d493b3e367e934.webp","https://segmentfault.com/img/remote/1460000023709796":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn94@2020_1/2020/08/24/23-08-33-609_05d4dc7dacd0d54d.webp","https://segmentfault.com/img/remote/1460000023709798":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn85@2020_2/2020/08/24/23-08-33-136_31a2ac49b076af15.webp","https://segmentfault.com/img/remote/1460000023709801":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn48@2020_1/2020/08/24/23-08-37-123_d94dd4f33dfc2b9f.webp","https://segmentfault.com/img/remote/1460000023709799":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn69@2020_3/2020/08/24/23-08-33-492_971c0824e4b34173.webp","https://segmentfault.com/img/remote/1460000023709803":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn60@2020_2/2020/08/24/23-08-37-310_d2a8b739b73e75b1.webp","https://segmentfault.com/img/remote/1460000023709802":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn52@2020_2/2020/08/24/23-08-36-907_f10a55c3175000a3.webp","https://segmentfault.com/img/remote/1460000023709804":"https://cdn.jsdelivr.net/gh/myreaderx/cdn64@2020_4/2020/08/24/23-08-37-435_4af65fb32a269cbc.webp","https://segmentfault.com/img/remote/1460000023709805":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn56@2020_6/2020/08/24/23-08-35-625_7a194b4bce014c56.webp"},"publishedOrCreatedDate":1598310388570},{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","title":"ä»Generatorå…¥æ‰‹è¯»æ‡‚coæ¨¡å—æºç ","link":"https://segmentfault.com/a/1190000023652879","description":"<p>è¿™ç¯‡æ–‡ç« æ˜¯è®²JSå¼‚æ­¥åŸç†å’Œå®ç°æ–¹å¼çš„ç¬¬å››ç¯‡æ–‡ç« ï¼Œå‰é¢ä¸‰ç¯‡æ˜¯ï¼š</p>\n<p><a href=\"https://segmentfault.com/a/1190000023315304\">setTimeoutå’ŒsetImmediateåˆ°åº•è°å…ˆæ‰§è¡Œï¼Œæœ¬æ–‡è®©ä½ å½»åº•ç†è§£Event Loop</a></p>\n<p><a href=\"https://segmentfault.com/a/1190000023385521\">ä»å‘å¸ƒè®¢é˜…æ¨¡å¼å…¥æ‰‹è¯»æ‡‚Node.jsçš„EventEmitteræºç </a></p>\n<p><a href=\"https://segmentfault.com/a/1190000023157856\">æ‰‹å†™ä¸€ä¸ªPromise/A+,å®Œç¾é€šè¿‡å®˜æ–¹872ä¸ªæµ‹è¯•ç”¨ä¾‹</a></p>\n<p>æœ¬æ–‡ä¸»è¦ä¼šè®²Generatorçš„è¿ç”¨å’Œå®ç°åŸç†ï¼Œç„¶åæˆ‘ä»¬ä¼šå»è¯»ä¸€ä¸‹coæ¨¡å—çš„æºç ï¼Œæœ€åè¿˜ä¼šæä¸€ä¸‹async/awaitã€‚</p>\n<p>æœ¬æ–‡å…¨éƒ¨ä¾‹å­éƒ½åœ¨GitHubä¸Šï¼š<a href=\"https://github.com/dennis-jiang/Front-End-Knowledges/tree/master/Examples/JavaScript/Generator\" rel=\"nofollow noreferrer\">https://github.com/dennis-jiang/Front-End-Knowledges/tree/master/Examples/JavaScript/Generator</a></p>\n<h2>Generator</h2>\n<p>å¼‚æ­¥ç¼–ç¨‹ä¸€ç›´æ˜¯JSçš„æ ¸å¿ƒä¹‹ä¸€ï¼Œä¸šç•Œä¹Ÿæ˜¯ä¸€ç›´åœ¨æ¢ç´¢ä¸åŒçš„è§£å†³æ–¹æ³•ï¼Œä»â€œå›è°ƒåœ°ç‹±â€åˆ°å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œå†åˆ°Promiseï¼Œéƒ½æ˜¯åœ¨ä¼˜åŒ–å¼‚æ­¥ç¼–ç¨‹ã€‚å°½ç®¡Promiseå·²ç»å¾ˆä¼˜ç§€äº†ï¼Œä¹Ÿä¸ä¼šé™·å…¥â€œå›è°ƒåœ°ç‹±â€ï¼Œä½†æ˜¯åµŒå¥—å±‚æ•°å¤šäº†ä¹Ÿä¼šæœ‰ä¸€è¿ä¸²çš„<code>then</code>ï¼Œå§‹ç»ˆä¸èƒ½åƒåŒæ­¥ä»£ç é‚£æ ·ç›´æ¥å¾€ä¸‹å†™å°±è¡Œäº†ã€‚Generatoræ˜¯ES6å¼•å…¥çš„è¿›ä¸€æ­¥æ”¹å–„å¼‚æ­¥ç¼–ç¨‹çš„æ–¹æ¡ˆï¼Œä¸‹é¢æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹åŸºæœ¬ç”¨æ³•ã€‚</p>\n<h3>åŸºæœ¬ç”¨æ³•</h3>\n<p>Generatorçš„ä¸­æ–‡ç¿»è¯‘æ˜¯â€œç”Ÿæˆå™¨â€ï¼Œå…¶å®ä»–è¦å¹²çš„äº‹æƒ…ä¹Ÿæ˜¯ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œä¸€ä¸ªå‡½æ•°å¦‚æœåŠ äº†<code>*</code>ï¼Œä»–å°±ä¼šå˜æˆä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ï¼Œä»–çš„è¿è¡Œç»“æœä¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p>\n<pre><code class=\"javascript\">// genæ˜¯ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°\nfunction* gen() {\n  let a = yield 1;\n  let b = yield a + 2;\n  yield b + 3;\n}\n\nlet itor = gen();   // ç”Ÿæˆå™¨å‡½æ•°è¿è¡Œåä¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ï¼Œå³itorã€‚</code></pre>\n<h4>next</h4>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Iteration_protocols#%E8%BF%AD%E4%BB%A3%E5%99%A8%E5%8D%8F%E8%AE%AE\" rel=\"nofollow noreferrer\">ES6è§„èŒƒä¸­è§„å®š</a>è¿­ä»£å™¨å¿…é¡»æœ‰ä¸€ä¸ª<code>next</code>æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å…·æœ‰<code>done</code>å’Œ<code>value</code>ä¸¤ä¸ªå±æ€§ï¼Œ<code>done</code>è¡¨ç¤ºå½“å‰è¿­ä»£å™¨å†…å®¹æ˜¯å¦å·²ç»æ‰§è¡Œå®Œï¼Œæ‰§è¡Œå®Œä¸º<code>true</code>ï¼Œå¦åˆ™ä¸º<code>false</code>ï¼Œ<code>value</code>è¡¨ç¤ºå½“å‰æ­¥éª¤è¿”å›çš„å€¼ã€‚åœ¨<code>generator</code>å…·ä½“è¿ç”¨ä¸­ï¼Œæ¯æ¬¡é‡åˆ°<code>yield</code>å…³é”®å­—éƒ½ä¼šæš‚åœæ‰§è¡Œï¼Œå½“è°ƒç”¨è¿­ä»£å™¨çš„<code>next</code>æ—¶ï¼Œä¼šå°†<code>yield</code>åé¢è¡¨è¾¾å¼çš„å€¼ä½œä¸ºè¿”å›å¯¹è±¡çš„<code>value</code>ï¼Œæ¯”å¦‚ä¸Šé¢ç”Ÿæˆå™¨çš„æ‰§è¡Œç»“æœå¦‚ä¸‹:</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023652882\" alt=\"image-20200419153257750\" title=\"image-20200419153257750\" /></p>\n<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç¬¬ä¸€æ¬¡è°ƒ<code>next</code>è¿”å›çš„å°±æ˜¯ç¬¬ä¸€ä¸ª<code>yeild</code>åé¢è¡¨è¾¾å¼çš„å€¼ï¼Œä¹Ÿå°±æ˜¯1ã€‚<strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ•´ä¸ªè¿­ä»£å™¨ç›®å‰æš‚åœåœ¨äº†ç¬¬ä¸€ä¸ª<code>yield</code>è¿™é‡Œï¼Œç»™å˜é‡<code>a</code>èµ‹å€¼éƒ½æ²¡æ‰§è¡Œï¼Œè¦è°ƒç”¨ä¸‹ä¸€ä¸ª<code>next</code>çš„æ—¶å€™æ‰ä¼šç»™å˜é‡<code>a</code>èµ‹å€¼ï¼Œç„¶åä¸€ç›´æ‰§è¡Œåˆ°ç¬¬äºŒä¸ª<code>yield</code></strong>ã€‚é‚£åº”è¯¥ç»™<code>a</code>èµ‹ä»€ä¹ˆå€¼å‘¢ï¼Ÿä»ä»£ç æ¥çœ‹ï¼Œ<code>a</code>çš„å€¼åº”è¯¥æ˜¯<code>yield</code>è¯­å¥çš„è¿”å›å€¼ï¼Œä½†æ˜¯<code>yield</code>æœ¬èº«æ˜¯æ²¡æœ‰è¿”å›å€¼çš„ï¼Œæˆ–è€…è¯´è¿”å›å€¼æ˜¯<code>undefined</code>ï¼Œå¦‚æœè¦ç»™<code>a</code>èµ‹å€¼éœ€è¦ä¸‹æ¬¡è°ƒ<code>next</code>çš„æ—¶å€™æ‰‹åŠ¨ä¼ è¿›å»ï¼Œæˆ‘ä»¬è¿™é‡Œä¼ ä¸€ä¸ª4ï¼Œ4å°±ä¼šä½œä¸ºä¸Šæ¬¡<code>yield</code>çš„è¿”å›å€¼èµ‹ç»™<code>a</code>:</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023652883\" alt=\"image-20200419154159553\" title=\"image-20200419154159553\" /></p>\n<p>å¯ä»¥çœ‹åˆ°ç¬¬äºŒä¸ª<code>yield</code>åé¢çš„è¡¨è¾¾å¼<code>a + 2</code>çš„å€¼æ˜¯6ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬ä¼ è¿›å»çš„4è¢«ä½œä¸ºä¸Šä¸€ä¸ª<code>yield</code>çš„è¿”å›å€¼äº†ï¼Œç„¶åè®¡ç®—<code>a + 2</code>è‡ªç„¶å°±æ˜¯6äº†ã€‚</p>\n<p>æˆ‘ä»¬ç»§ç»­<code>next</code>ï¼ŒæŠŠè¿™ä¸ªè¿­ä»£å™¨èµ°å®Œï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023652885\" alt=\"image-20200419155225702\" title=\"image-20200419155225702\" /></p>\n<p>ä¸Šå›¾æ˜¯æ¥ç€å‰é¢è¿è¡Œçš„ï¼Œå›¾ä¸­ç¬¬ä¸€ä¸ª<code>next</code>è¿”å›çš„<code>value</code>æ˜¯<code>NaN</code>æ˜¯å› ä¸ºæˆ‘ä»¬è°ƒ<code>next</code>çš„æ—¶å€™æ²¡æœ‰ä¼ å‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´<code>b</code>ä¸º<code>undefined</code>ï¼Œ<code>undefined + 3</code>å°±ä¸º<code>NaN</code>äº† ã€‚æœ€åä¸€ä¸ª<code>next</code>å…¶å®æ˜¯æŠŠå‡½æ•°ä½“æ‰§è¡Œå®Œäº†ï¼Œè¿™æ—¶å€™çš„<code>value</code>åº”è¯¥æ˜¯è¿™ä¸ªå‡½æ•°<code>return</code>çš„å€¼ï¼Œä½†æ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰å†™<code>return</code>ï¼Œé»˜è®¤å°±æ˜¯<code>return undefined</code>äº†ï¼Œæ‰§è¡Œå®Œå<code>done</code>ä¼šè¢«ç½®ä¸º<code>true</code>ã€‚</p>\n<h4>throw</h4>\n<p>è¿­ä»£å™¨è¿˜æœ‰ä¸ªæ–¹æ³•æ˜¯<code>throw</code>ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥åœ¨å‡½æ•°ä½“å¤–éƒ¨æŠ›å‡ºé”™è¯¯ï¼Œç„¶ååœ¨å‡½æ•°é‡Œé¢æ•è·ï¼Œè¿˜æ˜¯ä¸Šé¢é‚£ä¸ªä¾‹å­:</p>\n<pre><code class=\"javascript\">function* gen() {\n  let a = yield 1;\n  let b = yield a + 2;\n  yield b + 3;\n}\n\nlet itor = gen();  </code></pre>\n<p>æˆ‘ä»¬è¿™æ¬¡ä¸ç”¨<code>next</code>æ‰§è¡Œäº†ï¼Œç›´æ¥<code>throw</code>é”™è¯¯å‡ºæ¥:</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023652884\" alt=\"image-20200419160330384\" title=\"image-20200419160330384\" /></p>\n<p>è¿™ä¸ªé”™è¯¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰æ•è·ï¼Œæ‰€ä»¥ç›´æ¥æŠ›åˆ°æœ€å¤–å±‚æ¥äº†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°ä½“é‡Œé¢æ•è·ä»–ï¼Œç¨å¾®æ”¹ä¸‹:</p>\n<pre><code class=\"javascript\">function* gen() {\n  try {\n    let a = yield 1;\n    let b = yield a + 2;\n    yield b + 3;\n  } catch (e) {\n    console.log(e);\n  }\n}\n\nlet itor = gen();  </code></pre>\n<p>ç„¶åå†æ¥<code>throw</code>ä¸‹ï¼š</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023652886\" alt=\"image-20200419160604004\" title=\"image-20200419160604004\" /></p>\n<p>è¿™ä¸ªå›¾å¯ä»¥çœ‹å‡ºæ¥ï¼Œé”™è¯¯åœ¨å‡½æ•°é‡Œé‡Œé¢æ•è·äº†ï¼Œèµ°åˆ°äº†<code>catch</code>é‡Œé¢ï¼Œè¿™é‡Œé¢åªæœ‰ä¸€ä¸ª<code>console</code>åŒæ­¥ä»£ç ï¼Œæ•´ä¸ªå‡½æ•°ç›´æ¥å°±è¿è¡Œç»“æŸäº†ï¼Œæ‰€ä»¥<code>done</code>å˜æˆ<code>true</code>äº†ï¼Œå½“ç„¶<code>catch</code>é‡Œé¢å¯ä»¥ç»§ç»­å†™<code>yield</code>ç„¶åç”¨<code>next</code>æ¥æ‰§è¡Œã€‚</p>\n<h4>return</h4>\n<p>è¿­ä»£å™¨è¿˜æœ‰ä¸ª<code>return</code>æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å°±å¾ˆç®€å•äº†ï¼Œä»–ä¼šç›´æ¥ç»ˆæ­¢å½“å‰è¿­ä»£å™¨ï¼Œå°†<code>done</code>ç½®ä¸º<code>true</code>ï¼Œè¿™ä¸ªæ–¹æ³•çš„å‚æ•°å°±æ˜¯è¿­ä»£å™¨çš„<code>value</code>ï¼Œè¿˜æ˜¯ä¸Šé¢çš„ä¾‹å­ï¼š</p>\n<pre><code class=\"javascript\">function* gen() {\n  let a = yield 1;\n  let b = yield a + 2;\n  yield b + 3;\n}\n\nlet itor = gen();  </code></pre>\n<p>è¿™æ¬¡æˆ‘ä»¬ç›´æ¥è°ƒç”¨<code>return</code>:</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023652887\" alt=\"image-20200419161105691\" title=\"image-20200419161105691\" /></p>\n<h4>yield*</h4>\n<p>ç®€å•ç†è§£ï¼Œ<code>yield*</code>å°±æ˜¯åœ¨ç”Ÿæˆå™¨é‡Œé¢è°ƒç”¨å¦ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œä½†æ˜¯ä»–å¹¶ä¸ä¼šå ç”¨ä¸€ä¸ª<code>next</code>ï¼Œè€Œæ˜¯ç›´æ¥è¿›å…¥è¢«è°ƒç”¨çš„ç”Ÿæˆå™¨å»è¿è¡Œã€‚</p>\n<pre><code class=\"javascript\">function* gen() {\n  let a = yield 1;\n  let b = yield a + 2;\n}\n\nfunction* gen2() {\n  yield 10 + 5;\n  yield* gen();\n}\n\nlet itor = gen2();  </code></pre>\n<p>ä¸Šé¢ä»£ç æˆ‘ä»¬ç¬¬ä¸€æ¬¡è°ƒç”¨<code>next</code>ï¼Œå€¼è‡ªç„¶æ˜¯<code>10 + 5</code>ï¼Œå³15ï¼Œç„¶åç¬¬äºŒæ¬¡è°ƒç”¨<code>next</code>ï¼Œå…¶å®å°±èµ°åˆ°äº†<code>yield*</code>äº†ï¼Œè¿™å…¶å®å°±ç›¸å½“äºè°ƒç”¨äº†<code>gen</code>ï¼Œç„¶åæ‰§è¡Œä»–çš„ç¬¬ä¸€ä¸ª<code>yield</code>ï¼Œå€¼å°±æ˜¯1ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/remote/1460000023652888\" alt=\"image-20200419161624637\" title=\"image-20200419161624637\" /></p>\n<h3>åç¨‹</h3>\n<p>å…¶å®Generatorå°±æ˜¯å®ç°äº†åç¨‹ï¼Œåç¨‹æ˜¯ä¸€ä¸ªæ¯”çº¿ç¨‹è¿˜å°çš„æ¦‚å¿µã€‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªçº¿ç¨‹å¯ä»¥æœ‰å¤šä¸ªåç¨‹ï¼Œä½†æ˜¯ä¸€ä¸ªçº¿ç¨‹åŒæ—¶åªèƒ½æœ‰ä¸€ä¸ªåç¨‹åœ¨è¿è¡Œã€‚è¿™ä¸ªæ„æ€å°±æ˜¯è¯´å¦‚æœå½“å‰åç¨‹å¯ä»¥æ‰§è¡Œï¼Œæ¯”å¦‚åŒæ­¥ä»£ç ï¼Œé‚£å°±æ‰§è¡Œä»–ï¼Œå¦‚æœå½“å‰åç¨‹æš‚æ—¶ä¸èƒ½ç»§ç»­æ‰§è¡Œï¼Œæ¯”å¦‚ä»–æ˜¯ä¸€ä¸ªå¼‚æ­¥è¯»æ–‡ä»¶çš„æ“ä½œï¼Œé‚£å°±å°†å®ƒæŒ‚èµ·ï¼Œç„¶åå»æ‰§è¡Œå…¶ä»–åç¨‹ï¼Œç­‰è¿™ä¸ªåç¨‹ç»“æœå›æ¥äº†ï¼Œå¯ä»¥ç»§ç»­äº†å†æ¥æ‰§è¡Œä»–ã€‚<code>yield</code>å…¶å®å°±ç›¸å½“äºå°†å½“å‰ä»»åŠ¡æŒ‚èµ·äº†ï¼Œä¸‹æ¬¡è°ƒç”¨å†ä»è¿™é‡Œå¼€å§‹ã€‚åç¨‹è¿™ä¸ªæ¦‚å¿µå…¶å®å¾ˆå¤šå¹´å‰å°±å·²ç»è¢«æå‡ºæ¥äº†ï¼Œå…¶ä»–å¾ˆå¤šè¯­è¨€ä¹Ÿæœ‰è‡ªå·±çš„å®ç°ã€‚Generatorç›¸å½“äºJSå®ç°çš„åç¨‹ã€‚</p>\n<h3>å¼‚æ­¥åº”ç”¨</h3>\n<p>å‰é¢è®²äº†Generatorçš„åŸºæœ¬ç”¨æ³•ï¼Œæˆ‘ä»¬ç”¨å®ƒæ¥å¤„ç†ä¸€ä¸ªå¼‚æ­¥äº‹ä»¶çœ‹çœ‹ã€‚æˆ‘è¿˜æ˜¯ä½¿ç”¨å‰é¢æ–‡ç« ç”¨åˆ°è¿‡çš„ä¾‹å­ï¼Œä¸‰ä¸ªç½‘ç»œè¯·æ±‚ï¼Œè¯·æ±‚3ä¾èµ–è¯·æ±‚2çš„ç»“æœï¼Œè¯·æ±‚2ä¾èµ–è¯·æ±‚1çš„ç»“æœï¼Œå¦‚æœä½¿ç”¨å›è°ƒæ˜¯è¿™æ ·çš„:</p>\n<pre><code class=\"javascript\">const request = require(\"request\");\n\nrequest('https://www.baidu.com', function (error, response) {\n  if (!error &amp;&amp; response.statusCode == 200) {\n    console.log('get times 1');\n\n    request('https://www.baidu.com', function(error, response) {\n      if (!error &amp;&amp; response.statusCode == 200) {\n        console.log('get times 2');\n\n        request('https://www.baidu.com', function(error, response) {\n          if (!error &amp;&amp; response.statusCode == 200) {\n            console.log('get times 3');\n          }\n        })\n      }\n    })\n  }\n});</code></pre>\n<p>æˆ‘ä»¬è¿™æ¬¡ä½¿ç”¨Generatoræ¥è§£å†³â€œå›è°ƒåœ°ç‹±â€ï¼š</p>\n<pre><code class=\"javascript\">const request = require(\"request\");\n\nfunction* requestGen() {\n  function sendRequest(url) {\n    request(url, function (error, response) {\n      if (!error &amp;&amp; response.statusCode == 200) {\n        console.log(response.body);\n\n        // æ³¨æ„è¿™é‡Œï¼Œå¼•ç”¨äº†å¤–éƒ¨çš„è¿­ä»£å™¨itor\n        itor.next(response.body);\n      }\n    })\n  }\n\n  const url = 'https://www.baidu.com';\n\n  // ä½¿ç”¨yieldå‘èµ·ä¸‰ä¸ªè¯·æ±‚ï¼Œæ¯ä¸ªè¯·æ±‚æˆåŠŸåå†ç»§ç»­è°ƒnext\n  const r1 = yield sendRequest(url);\n  console.log('r1', r1);\n  const r2 = yield sendRequest(url);\n  console.log('r2', r2);\n  const r3 = yield sendRequest(url);\n  console.log('r3', r3);\n}\n\nconst itor = requestGen();\n\n// æ‰‹åŠ¨è°ƒç¬¬ä¸€ä¸ªnext\nitor.next();</code></pre>\n<p>è¿™ä¸ªä¾‹å­ä¸­æˆ‘ä»¬åœ¨ç”Ÿæˆå™¨é‡Œé¢å†™äº†ä¸€ä¸ªè¯·æ±‚æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šå»å‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œæ¯æ¬¡ç½‘ç»œè¯·æ±‚æˆåŠŸååˆç»§ç»­è°ƒç”¨nextæ‰§è¡Œåé¢çš„<code>yield</code>ï¼Œæœ€åæ˜¯åœ¨å¤–å±‚æ‰‹åŠ¨è°ƒä¸€ä¸ª<code>next</code>è§¦å‘è¿™ä¸ªæµç¨‹ã€‚è¿™å…¶å®å°±ç±»ä¼¼ä¸€ä¸ªå°¾è°ƒç”¨ï¼Œè¿™æ ·å†™å¯ä»¥è¾¾åˆ°æ•ˆæœï¼Œä½†æ˜¯åœ¨<code>requestGen</code>é‡Œé¢å¼•ç”¨äº†å¤–é¢çš„è¿­ä»£å™¨<code>itor</code>ï¼Œè€¦åˆå¾ˆé«˜ï¼Œè€Œä¸”ä¸å¥½å¤ç”¨ã€‚</p>\n<h2>thunkå‡½æ•°</h2>\n<p>ä¸ºäº†è§£å†³å‰é¢è¯´çš„è€¦åˆé«˜ï¼Œä¸å¥½å¤ç”¨çš„é—®é¢˜ï¼Œå°±æœ‰äº†thunkå‡½æ•°ã€‚thunkå‡½æ•°ç†è§£èµ·æ¥æœ‰ç‚¹ç»•ï¼Œæˆ‘å…ˆæŠŠä»£ç å†™å‡ºæ¥ï¼Œç„¶åå†ä¸€æ­¥ä¸€æ­¥æ¥åˆ†æå®ƒçš„æ‰§è¡Œé¡ºåºï¼š</p>\n<pre><code class=\"javascript\">function Thunk(fn) {\n  return function(...args) {\n    return function(callback) {\n      return fn.call(this, ...args, callback)\n    }\n  }\n}\n\nfunction run(fn) {\n  let gen = fn();\n  \n  function next(err, data) {\n    let result = gen.next(data);\n    \n    if(result.done) return;\n    \n    result.value(next);\n  }\n  \n  next();\n}\n\n// ä½¿ç”¨thunkæ–¹æ³•\nconst request = require(\"request\");\nconst requestThunk = Thunk(request);\n\nfunction* requestGen() {\n  const url = 'https://www.baidu.com';\n  \n  let r1 = yield requestThunk(url);\n  console.log(r1.body);\n  \n  let r2 = yield requestThunk(url);\n  console.log(r2.body);\n  \n  let r3 = yield requestThunk(url);\n  console.log(r3.body);\n}\n\n// å¯åŠ¨è¿è¡Œ\nrun(requestGen);</code></pre>\n<p>è¿™æ®µä»£ç é‡Œé¢çš„Thunkå‡½æ•°è¿”å›äº†å¥½å‡ å±‚å‡½æ•°ï¼Œæˆ‘ä»¬ä»ä»–çš„ä½¿ç”¨å…¥æ‰‹ä¸€å±‚ä¸€å±‚å‰¥å¼€çœ‹ï¼š</p>\n<ol>\n <li><p><code>requestThunk</code>æ˜¯Thunkè¿è¡Œçš„è¿”å›å€¼ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€å±‚è¿”å›å€¼ï¼Œå‚æ•°æ˜¯<code>request</code>ï¼Œä¹Ÿå°±æ˜¯:</p><pre><code class=\"javascript\">function(...args) {\n  return function(callback) {\n    return request.call(this, ...args, callback);   // æ³¨æ„è¿™é‡Œè°ƒç”¨çš„æ˜¯request\n  }\n}</code></pre></li>\n <li><p><code>run</code>å‡½æ•°çš„å‚æ•°æ˜¯ç”Ÿæˆå™¨ï¼Œæˆ‘ä»¬çœ‹çœ‹ä»–åˆ°åº•å¹²äº†å•¥:</p>\n  <blockquote>\n   <ol>\n    <li>runé‡Œé¢å…ˆè°ƒç”¨ç”Ÿæˆå™¨ï¼Œæ‹¿åˆ°è¿­ä»£å™¨<code>gen</code>ï¼Œç„¶åè‡ªå®šä¹‰äº†ä¸€ä¸ª<code>next</code>æ–¹æ³•ï¼Œå¹¶è°ƒç”¨è¿™ä¸ª<code>next</code>æ–¹æ³•ï¼Œä¸ºäº†ä¾¿äºåŒºåˆ†ï¼Œæˆ‘è¿™é‡Œç§°è¿™ä¸ªè‡ªå®šä¹‰çš„<code>next</code>ä¸ºå±€éƒ¨<code>next</code></li>\n    <li><p>å±€éƒ¨<code>next</code>ä¼šè°ƒç”¨ç”Ÿæˆå™¨çš„<code>next</code>ï¼Œç”Ÿæˆå™¨çš„<code>next</code>å…¶å®å°±æ˜¯<code>yield requestThunk(url)</code>ï¼Œå‚æ•°æ˜¯æˆ‘ä»¬ä¼ è¿›å»çš„<code>url</code>ï¼Œè¿™å°±è°ƒåˆ°æˆ‘ä»¬å‰é¢çš„é‚£ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ª<code>yield</code>è¿”å›çš„<code>value</code>å…¶å®æ˜¯ï¼š</p><pre><code class=\"javascript\">function(callback) {\n  return request.call(this, url, callback);   \n}</code></pre></li>\n    <li>æ£€æµ‹è¿­ä»£å™¨æ˜¯å¦å·²ç»è¿­ä»£å®Œæ¯•ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±ç»§ç»­è°ƒç”¨ç¬¬äºŒæ­¥çš„è¿™ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å…¶å®æ‰çœŸæ­£çš„å»<code>request</code>ï¼Œè¿™æ—¶å€™ä¼ è¿›å»çš„å‚æ•°æ˜¯å±€éƒ¨<code>next</code>ï¼Œå±€éƒ¨<code>next</code>ä¹Ÿä½œä¸ºäº†<code>request</code>çš„å›è°ƒå‡½æ•°ã€‚</li>\n    <li>è¿™ä¸ªå›è°ƒå‡½æ•°åœ¨æ‰§è¡Œæ—¶åˆä¼šè°ƒ<code>gen.next</code>ï¼Œè¿™æ ·ç”Ÿæˆå™¨å°±å¯ä»¥ç»§ç»­å¾€ä¸‹æ‰§è¡Œäº†ï¼ŒåŒæ—¶<code>gen.next</code>çš„å‚æ•°æ˜¯å›è°ƒå‡½æ•°çš„<code>data</code>ï¼Œè¿™æ ·ï¼Œç”Ÿæˆå™¨é‡Œé¢çš„<code>r1</code>å…¶å®å°±æ‹¿åˆ°äº†è¯·æ±‚çš„è¿”å›å€¼ã€‚</li>\n   </ol>\n  </blockquote></li>\n</ol>\n<p>Thunkå‡½æ•°å°±æ˜¯è¿™æ ·ä¸€ç§å¯ä»¥è‡ªåŠ¨æ‰§è¡ŒGeneratorçš„å‡½æ•°ï¼Œå› ä¸ºThunkå‡½æ•°çš„åŒ…è£…ï¼Œæˆ‘ä»¬åœ¨Generatoré‡Œé¢å¯ä»¥åƒåŒæ­¥ä»£ç é‚£æ ·ç›´æ¥æ‹¿åˆ°<code>yield</code>å¼‚æ­¥ä»£ç çš„è¿”å›å€¼ã€‚</p>\n<h2>coæ¨¡å—</h2>\n<p>coæ¨¡å—æ˜¯ä¸€ä¸ªå¾ˆå—æ¬¢è¿çš„æ¨¡å—ï¼Œä»–ä¹Ÿå¯ä»¥è‡ªåŠ¨æ‰§è¡ŒGeneratorï¼Œä»–çš„yieldåé¢æ”¯æŒthunkå’ŒPromiseï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä»–çš„åŸºæœ¬ä½¿ç”¨ï¼Œç„¶åå†å»åˆ†æä¸‹ä»–çš„æºç ã€‚<br>å®˜æ–¹GitHubï¼š<a href=\"https://github.com/tj/co\" rel=\"nofollow noreferrer\">https://github.com/tj/co</a></br></p>\n<h3>åŸºæœ¬ä½¿ç”¨</h3>\n<h4>æ”¯æŒthunk</h4>\n<p>å‰é¢æˆ‘ä»¬è®²äº†thunkå‡½æ•°ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä»thunkå‡½æ•°å¼€å§‹ã€‚ä»£ç è¿˜æ˜¯ç”¨æˆ‘ä»¬å‰é¢å†™çš„thunkå‡½æ•°ï¼Œä½†æ˜¯å› ä¸ºcoæ”¯æŒçš„thunkæ˜¯åªæ¥æ”¶å›è°ƒå‡½æ•°çš„å‡½æ•°å½¢å¼ï¼Œæˆ‘ä»¬ä½¿ç”¨æ—¶éœ€è¦è°ƒæ•´ä¸‹:</p>\n<pre><code class=\"javascript\">// è¿˜æ˜¯ä¹‹å‰çš„thunkå‡½æ•°\nfunction Thunk(fn) {\n  return function(...args) {\n    return function(callback) {\n      return fn.call(this, ...args, callback)\n    }\n  }\n}\n\n// å°†æˆ‘ä»¬éœ€è¦çš„requestè½¬æ¢æˆthunk\nconst request = require('request');\nconst requestThunk = Thunk(request);\n\n// è½¬æ¢åçš„requestThunkå…¶å®å¯ä»¥ç›´æ¥ç”¨äº†\n// ç”¨æ³•å°±æ˜¯ requestThunk(url)(callback)\n// ä½†æ˜¯æˆ‘ä»¬coæ¥æ”¶çš„thunkæ˜¯ fn(callback)å½¢å¼\n// æˆ‘ä»¬è½¬æ¢ä¸€ä¸‹\n// è¿™æ—¶å€™çš„baiduRequestä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œurlå·²ç»ä¼ å¥½äº†ï¼Œä»–åªéœ€è¦ä¸€ä¸ªå›è°ƒå‡½æ•°åšå‚æ•°å°±è¡Œ\n// ä½¿ç”¨å°±æ˜¯è¿™æ ·ï¼šbaiduRequest(callback)\nconst baiduRequest = requestThunk('https://www.baidu.com');\n\n// å¼•å…¥coæ‰§è¡Œ, coçš„å‚æ•°æ˜¯ä¸€ä¸ªGenerator\n// coçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªPromiseï¼Œæˆ‘ä»¬å¯ä»¥ç”¨thenæ‹¿åˆ°ä»–çš„ç»“æœ\nconst co = require('co');\nco(function* () {\n  const r1 = yield baiduRequest;\n  const r2 = yield baiduRequest;\n  const r3 = yield baiduRequest;\n  \n  return {\n    r1,\n    r2,\n    r3,\n  }\n}).then((res) =&gt; {\n  // thené‡Œé¢å°±å¯ä»¥ç›´æ¥æ‹¿åˆ°å‰é¢è¿”å›çš„{r1, r2, r3}\n  console.log(res);\n});</code></pre>\n<h4>æ”¯æŒPromise</h4>\n<p>å…¶å®coå®˜æ–¹æ˜¯å»ºè®®yieldåé¢è·ŸPromiseçš„ï¼Œè™½ç„¶æ”¯æŒthunkï¼Œä½†æ˜¯æœªæ¥å¯èƒ½ä¼šç§»é™¤ã€‚ä½¿ç”¨Promiseï¼Œæˆ‘ä»¬ä»£ç å†™èµ·æ¥å…¶å®æ›´ç®€å•ï¼Œç›´æ¥ç”¨fetchå°±è¡Œï¼Œä¸ç”¨åŒ…è£…Thunkã€‚</p>\n<pre><code class=\"javascript\">const fetch = require('node-fetch');\nconst co = require('co');\nco(function* () {\n  // ç›´æ¥ç”¨fetchï¼Œç®€å•å¤šäº†ï¼Œfetchè¿”å›çš„å°±æ˜¯Promise\n  const r1 = yield fetch('https://www.baidu.com');\n  const r2 = yield fetch('https://www.baidu.com');\n  const r3 = yield fetch('https://www.baidu.com');\n  \n  return {\n    r1,\n    r2,\n    r3,\n  }\n}).then((res) =&gt; {\n  // è¿™é‡ŒåŒæ ·å¯ä»¥æ‹¿åˆ°{r1, r2, r3}\n  console.log(res);\n});</code></pre>\n<h3>æºç åˆ†æ</h3>\n<p>æœ¬æ–‡çš„æºç åˆ†æåŸºäºcoæ¨¡å—4.6.0ç‰ˆæœ¬ï¼Œæºç ï¼š<a href=\"https://github.com/tj/co/blob/master/index.js\" rel=\"nofollow noreferrer\">https://github.com/tj/co/blob/master/index.js</a></p>\n<p>ä»”ç»†çœ‹æºç ä¼šå‘ç°ä»–ä»£ç å¹¶ä¸å¤šï¼Œæ€»å…±ä¸¤ç™¾å¤šè¡Œï¼Œä¸€åŠéƒ½æ˜¯åœ¨è¿›è¡Œyieldåé¢çš„å‚æ•°æ£€æµ‹å’Œå¤„ç†ï¼Œæ£€æµ‹ä»–æ˜¯ä¸æ˜¯Promiseï¼Œå¦‚æœä¸æ˜¯å°±è½¬æ¢ä¸ºPromiseï¼Œæ‰€ä»¥å³ä½¿ä½ yieldåé¢ä¼ çš„thunkï¼Œä»–è¿˜æ˜¯ä¼šè½¬æ¢æˆPromiseå¤„ç†ã€‚è½¬æ¢Promiseçš„ä»£ç ç›¸å¯¹æ¯”è¾ƒç‹¬ç«‹å’Œç®€å•ï¼Œæˆ‘è¿™é‡Œä¸è¯¦ç»†å±•å¼€äº†ï¼Œè¿™é‡Œä¸»è¦è¿˜æ˜¯è®²ä¸€è®²æ ¸å¿ƒæ–¹æ³•<code>co(gen)</code>ã€‚ä¸‹é¢æ˜¯æˆ‘å¤åˆ¶çš„å»æ‰äº†æ³¨é‡Šçš„ç®€åŒ–ä»£ç :</p>\n<pre><code class=\"javascript\">function co(gen) {\n  var ctx = this;\n  var args = slice.call(arguments, 1);\n\n  return new Promise(function(resolve, reject) {\n    if (typeof gen === 'function') gen = gen.apply(ctx, args);\n    if (!gen || typeof gen.next !== 'function') return resolve(gen);\n\n    onFulfilled();\n\n    function onFulfilled(res) {\n      var ret;\n      try {\n        ret = gen.next(res);\n      } catch (e) {\n        return reject(e);\n      }\n      next(ret);\n      return null;\n    }\n\n    function onRejected(err) {\n      var ret;\n      try {\n        ret = gen.throw(err);\n      } catch (e) {\n        return reject(e);\n      }\n      next(ret);\n    }\n\n    function next(ret) {\n      if (ret.done) return resolve(ret.value);\n      var value = toPromise.call(ctx, ret.value);\n      if (value &amp;&amp; isPromise(value)) return value.then(onFulfilled, onRejected);\n      return onRejected(new TypeError('You may only yield a function, promise, generator, array, or object, '\n        + 'but the following object was passed: \"' + String(ret.value) + '\"'));\n    }\n  });\n}</code></pre>\n<ol>\n <li>ä»æ•´ä½“ç»“æ„çœ‹ï¼Œcoçš„å‚æ•°æ˜¯ä¸€ä¸ªGeneratorï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªPromiseï¼Œå‡ ä¹æ‰€æœ‰é€»è¾‘ä»£ç éƒ½åœ¨è¿™ä¸ªPromiseé‡Œé¢ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬ä½¿ç”¨æ—¶ç”¨thenæ‹¿ç»“æœçš„åŸå› ã€‚</li>\n <li>Promiseé‡Œé¢å…ˆæŠŠGeneratoræ‹¿å‡ºæ¥æ‰§è¡Œï¼Œå¾—åˆ°ä¸€ä¸ªè¿­ä»£å™¨<code>gen</code></li>\n <li><p>æ‰‹åŠ¨è°ƒç”¨ä¸€æ¬¡<code>onFulfilled</code>ï¼Œå¼€å¯è¿­ä»£</p>\n  <blockquote>\n   <ol>\n    <li><code>onFulfilled</code>æ¥æ”¶ä¸€ä¸ªå‚æ•°<code>res</code>ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨æ˜¯æ²¡æœ‰ä¼ è¿™ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°ä¸»è¦æ˜¯ç”¨æ¥æ¥æ”¶åé¢çš„thenè¿”å›çš„ç»“æœã€‚</li>\n    <li>ç„¶åè°ƒç”¨<code>gen.next</code>ï¼Œæ³¨æ„è¿™ä¸ªçš„è¿”å›å€¼retçš„å½¢å¼æ˜¯{value, done}ï¼Œç„¶åå°†è¿™ä¸ªretä¼ ç»™å±€éƒ¨çš„next</li>\n   </ol>\n  </blockquote></li>\n <li><p>ç„¶åæ‰§è¡Œå±€éƒ¨nextï¼Œä»–æ¥æ”¶çš„å‚æ•°æ˜¯yieldè¿”å›å€¼{value, done}</p>\n  <blockquote>\n   <ol>\n    <li>è¿™é‡Œå…ˆæ£€æµ‹è¿­ä»£æ˜¯å¦å®Œæˆï¼Œå¦‚æœå®Œæˆäº†ï¼Œå°±ç›´æ¥å°†æ•´ä¸ªpromise resolveã€‚</li>\n    <li>è¿™é‡Œçš„valueæ˜¯yieldåé¢è¡¨è¾¾å¼çš„å€¼ï¼Œå¯èƒ½æ˜¯thunkï¼Œä¹Ÿå¯èƒ½æ˜¯promise</li>\n    <li>å°†valueè½¬æ¢æˆpromise</li>\n    <li>å°†è½¬æ¢åçš„promiseæ‹¿å‡ºæ¥æ‰§è¡Œï¼ŒæˆåŠŸçš„å›è°ƒæ˜¯å‰é¢çš„<code>onFulfilled</code></li>\n   </ol>\n  </blockquote></li>\n <li>æˆ‘ä»¬å†æ¥çœ‹ä¸‹<code>onFulfilled</code>ï¼Œè¿™æ˜¯ç¬¬äºŒæ¬¡æ‰§è¡Œ<code>onFulfilled</code>äº†ã€‚è¿™æ¬¡æ‰§è¡Œçš„æ—¶å€™ä¼ å…¥çš„å‚æ•°resæ˜¯ä¸Šæ¬¡å¼‚æ­¥promiseçš„æ‰§è¡Œç»“æœï¼Œå¯¹åº”æˆ‘ä»¬çš„fetchå°±æ˜¯æ‹¿å›æ¥çš„æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®ä¼ ç»™ç¬¬äºŒä¸ª<code>gen.next</code>ï¼Œæ•ˆæœå°±æ˜¯æˆ‘ä»¬ä»£ç é‡Œé¢çš„èµ‹å€¼ç»™äº†ç¬¬ä¸€ä¸ª<code>yield</code>å‰é¢çš„å˜é‡<code>r1</code>ã€‚ç„¶åç»§ç»­å±€éƒ¨nextï¼Œè¿™ä¸ªnextå…¶å®å°±æ˜¯æ‰§è¡Œç¬¬äºŒä¸ªå¼‚æ­¥Promiseäº†ã€‚è¿™ä¸ªpromiseçš„æˆåŠŸå›è°ƒåˆç»§ç»­è°ƒç”¨<code>gen.next</code>ï¼Œè¿™æ ·å°±ä¸æ–­çš„æ‰§è¡Œä¸‹å»ï¼Œç›´åˆ°<code>done</code>å˜æˆ<code>true</code>ä¸ºæ­¢ã€‚</li>\n <li>æœ€åçœ‹ä¸€çœ¼<code>onRejected</code>æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å…¶å®ä½œä¸ºäº†å¼‚æ­¥promiseçš„é”™è¯¯åˆ†æ”¯ï¼Œè¿™ä¸ªå‡½æ•°é‡Œé¢ç›´æ¥è°ƒç”¨äº†<code>gen.throw</code>ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨Generatoré‡Œé¢å¯ä»¥ç›´æ¥ç”¨<code>try...catch...</code>æ‹¿åˆ°é”™è¯¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯<code>gen.throw</code>åé¢è¿˜ç»§ç»­è°ƒç”¨äº†<code>next(ret)</code>ï¼Œè¿™æ˜¯å› ä¸ºåœ¨Generatorçš„<code>catch</code>åˆ†æ”¯é‡Œé¢è¿˜å¯èƒ½ç»§ç»­æœ‰<code>yield</code>ï¼Œæ¯”å¦‚é”™è¯¯ä¸ŠæŠ¥çš„ç½‘ç»œè¯·æ±‚ï¼Œè¿™æ—¶å€™çš„è¿­ä»£å™¨å¹¶ä¸ä¸€å®šç»“æŸäº†ã€‚</li>\n</ol>\n<h2>async/await</h2>\n<p>æœ€åæä¸€ä¸‹<code>async/await</code>ï¼Œå…ˆæ¥çœ‹ä¸€ä¸‹ç”¨æ³•:</p>\n<pre><code class=\"javascript\">const fetch = require('node-fetch');\n\nasync function sendRequest () {\n  const r1 = await fetch('https://www.baidu.com');\n  const r2 = await fetch('https://www.baidu.com');\n  const r3 = await fetch('https://www.baidu.com');\n  \n  return {\n    r1,\n    r2,\n    r3,\n  }\n}\n\n// æ³¨æ„asyncè¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ªpromise\nsendRequest().then((res) =&gt; {\n  console.log('res', res);\n});</code></pre>\n<p>å’‹ä¸€çœ‹è¿™ä¸ªè·Ÿå‰é¢promiseç‰ˆçš„coæ˜¯ä¸æ˜¯å¾ˆåƒï¼Œè¿”å›å€¼éƒ½æ˜¯ä¸€ä¸ªpromiseï¼Œåªæ˜¯Generatoræ¢æˆäº†ä¸€ä¸ª<code>async</code>å‡½æ•°ï¼Œå‡½æ•°é‡Œé¢çš„<code>yield</code>æ¢æˆäº†<code>await</code>ï¼Œè€Œä¸”å¤–å±‚ä¸éœ€è¦coæ¥åŒ…è£¹ä¹Ÿå¯ä»¥è‡ªåŠ¨æ‰§è¡Œäº†ã€‚å…¶å®asyncå‡½æ•°å°±æ˜¯GeneratoråŠ è‡ªåŠ¨æ‰§è¡Œå™¨çš„è¯­æ³•ç³–ï¼Œå¯ä»¥ç†è§£ä¸ºä»è¯­è¨€å±‚é¢æ”¯æŒäº†Generatorçš„è‡ªåŠ¨æ‰§è¡Œã€‚ä¸Šé¢è¿™æ®µä»£ç è·Ÿcoç‰ˆçš„promiseå…¶å®å°±æ˜¯ç­‰ä»·çš„ã€‚</p>\n<h2>æ€»ç»“</h2>\n<ol>\n <li>Generatoræ˜¯ä¸€ç§æ›´ç°ä»£çš„å¼‚æ­¥è§£å†³æ–¹æ¡ˆï¼Œåœ¨JSè¯­è¨€å±‚é¢æ”¯æŒäº†åç¨‹</li>\n <li>Generatorçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªè¿­ä»£å™¨</li>\n <li>è¿™ä¸ªè¿­ä»£å™¨éœ€è¦æ‰‹åŠ¨è°ƒ<code>next</code>æ‰èƒ½ä¸€æ¡ä¸€æ¡æ‰§è¡Œ<code>yield</code></li>\n <li><code>next</code>çš„è¿”å›å€¼æ˜¯{value, done}ï¼Œ<code>value</code>æ˜¯yieldåé¢è¡¨è¾¾å¼çš„å€¼</li>\n <li><code>yield</code>è¯­å¥æœ¬èº«å¹¶æ²¡æœ‰è¿”å›å€¼ï¼Œä¸‹æ¬¡è°ƒ<code>next</code>çš„å‚æ•°ä¼šä½œä¸ºä¸Šä¸€ä¸ª<code>yield</code>è¯­å¥çš„è¿”å›å€¼</li>\n <li>Generatorè‡ªå·±ä¸èƒ½è‡ªåŠ¨æ‰§è¡Œï¼Œè¦è‡ªåŠ¨æ‰§è¡Œéœ€è¦å¼•å…¥å…¶ä»–æ–¹æ¡ˆï¼Œå‰é¢è®²<code>thunk</code>çš„æ—¶å€™æä¾›äº†ä¸€ç§æ–¹æ¡ˆï¼Œ<code>co</code>æ¨¡å—ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå—æ¬¢è¿çš„è‡ªåŠ¨æ‰§è¡Œæ–¹æ¡ˆ</li>\n <li>è¿™ä¸¤ä¸ªæ–¹æ¡ˆçš„æ€è·¯æœ‰ç‚¹ç±»ä¼¼ï¼Œéƒ½æ˜¯å…ˆå†™ä¸€ä¸ªå±€éƒ¨çš„æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šå»è°ƒç”¨<code>gen.next</code>ï¼ŒåŒæ—¶è¿™ä¸ªæ–¹æ³•æœ¬èº«åˆä¼šä¼ åˆ°å›è°ƒå‡½æ•°æˆ–è€…promiseçš„æˆåŠŸåˆ†æ”¯é‡Œé¢ï¼Œå¼‚æ­¥ç»“æŸååˆç»§ç»­è°ƒç”¨è¿™ä¸ªå±€éƒ¨æ–¹æ³•ï¼Œè¿™ä¸ªå±€éƒ¨æ–¹æ³•åˆè°ƒç”¨<code>gen.next</code>ï¼Œè¿™æ ·ä¸€ç›´è¿­ä»£ï¼Œç›´åˆ°è¿­ä»£å™¨æ‰§è¡Œå®Œæ¯•ã€‚</li>\n <li><code>async/await</code>å…¶å®æ˜¯Generatorå’Œè‡ªåŠ¨æ‰§è¡Œå™¨çš„è¯­æ³•ç³–ï¼Œå†™æ³•å’Œå®ç°åŸç†éƒ½ç±»ä¼¼coæ¨¡å—çš„promiseæ¨¡å¼ã€‚</li>\n</ol>\n<p><strong>æ–‡ç« çš„æœ€åï¼Œæ„Ÿè°¢ä½ èŠ±è´¹å®è´µçš„æ—¶é—´é˜…è¯»æœ¬æ–‡ï¼Œå¦‚æœæœ¬æ–‡ç»™äº†ä½ ä¸€ç‚¹ç‚¹å¸®åŠ©æˆ–è€…å¯å‘ï¼Œè¯·ä¸è¦åå•¬ä½ çš„èµå’ŒGitHubå°æ˜Ÿæ˜Ÿï¼Œä½ çš„æ”¯æŒæ˜¯ä½œè€…æŒç»­åˆ›ä½œçš„åŠ¨åŠ›ã€‚</strong></p>\n<p><strong>ä½œè€…åšæ–‡GitHubé¡¹ç›®åœ°å€ï¼š <a href=\"https://github.com/dennis-jiang/Front-End-Knowledges\" rel=\"nofollow noreferrer\">https://github.com/dennis-jiang/Front-End-Knowledges</a></strong></p>","descriptionType":"html","publishedDate":"Mon, 17 Aug 2020 02:44:39 +0000","feedId":6615,"bgimg":"https://segmentfault.com/img/remote/1460000023652882","linkMd5":"d0ff9ddefe9a6a882e6318d475159e5e","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx/cdn94@2020_1/2020/08/24/23-08-21-894_de0e13cfc9042733.webp","destWidth":221,"destHeight":44,"sourceBytes":5263,"destBytes":1932,"author":"è’‹é¹é£","articleImgCdnMap":{"https://segmentfault.com/img/remote/1460000023652882":"https://cdn.jsdelivr.net/gh/myreaderx/cdn94@2020_1/2020/08/24/23-08-21-894_de0e13cfc9042733.webp","https://segmentfault.com/img/remote/1460000023652883":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn12@2020_2/2020/08/24/23-08-36-976_aa939d9b8362bbcf.webp","https://segmentfault.com/img/remote/1460000023652885":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn16@2020_2/2020/08/24/23-08-38-819_d6f77ebf0796d56f.webp","https://segmentfault.com/img/remote/1460000023652884":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn20@2020_6/2020/08/24/23-08-39-520_d14dbd35c4d89843.webp","https://segmentfault.com/img/remote/1460000023652886":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn51@2020_5/2020/08/24/23-08-38-491_33b83eb09ae0f820.webp","https://segmentfault.com/img/remote/1460000023652887":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn48@2020_5/2020/08/24/23-08-39-891_6cd080a4e73af923.webp","https://segmentfault.com/img/remote/1460000023652888":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn56@2020_3/2020/08/24/23-08-38-339_51682126a715d4c0.webp"},"publishedOrCreatedDate":1598310388568}],"record":{"createdTime":"2020-08-25 07:06:28","updatedTime":"2020-08-25 07:06:28","feedId":6615,"fetchDate":"Mon, 24 Aug 2020 23:06:28 +0000","fetchMs":3656,"handleMs":5945,"totalMs":164347,"newArticles":0,"totalArticles":50,"status":1,"type":0,"ip":"52.18.59.102","hostName":"europe-22.herokuapp.com","requestId":"6ddc10fb0dc14114b45a5867560605a5_6615","contentType":"application/atom+xml; charset=UTF-8","totalBytes":7426814,"bgimgsTotal":46,"bgimgsGithubTotal":46,"articlesImgsTotal":288,"articlesImgsGithubTotal":283,"successGithubMap":{"myreaderx14":9,"myreaderx8":9,"myreaderx7":11,"myreaderx15":9,"myreaderx16":9,"myreaderx6":10,"myreaderx10":10,"myreaderx4":10,"myreaderx32":9,"myreaderx3":11,"myreaderx33":10,"myreaderx11":10,"myreaderx12":11,"myreaderx2":9,"myreaderx1":9,"myreaderx13":9,"myreaderx30":10,"myreaderx31":11,"myreaderx18":10,"myreaderx19":11,"myreaderx":10,"myreaderx25":10,"myreaderx27":10,"myreaderx21":10,"myreaderx22":9,"myreaderx23":10,"myreaderx24":10,"myreaderx5oss":9,"myreaderx29":8},"failGithubMap":{}},"feed":{"createdTime":"2020-08-25 04:33:08","updatedTime":"2020-08-25 04:33:08","id":6615,"name":"SegmentFault æœ€æ–°çš„æ–‡ç« ","url":"http://segmentfault.com/feeds/blogs","subscriber":null,"website":null,"icon":"https://segmentfault.com/favicon.ico","icon_jsdelivr":null,"description":"","weekly":null,"link":"https://segmentfault.com"},"noPictureArticleList":[{"createdTime":"2020-08-25 07:09:02","updatedTime":"2020-08-25 07:09:02","id":null,"feedId":6615,"linkMd5":"3c5ab7837e45f9183c9783494075346a"},{"createdTime":"2020-08-25 07:09:02","updatedTime":"2020-08-25 07:09:02","id":null,"feedId":6615,"linkMd5":"edffa444454de4e48a3d973ca7297088"}],"tmpCommonImgCdnBytes":1883052,"tmpBodyImgCdnBytes":5543762,"tmpBgImgCdnBytes":0,"extra4":{"start":1598310378003,"total":0,"statList":[{"spend":4628,"msg":"è·å–xmlå†…å®¹"},{"spend":5945,"msg":"è§£é‡Šæ–‡ç« "},{"spend":0,"msg":"ä¸Šä¼ å°é¢å›¾åˆ°cdn"},{"spend":1,"msg":"ä¿®æ­£å°é¢å›¾ä¸Šä¼ å¤±è´¥é‡æ–°ä¸Šä¼ "},{"spend":35096,"msg":"æ­£æ–‡é“¾æ¥ä¸Šä¼ åˆ°cdn"}]},"extra5":288,"extra6":288,"extra7ImgCdnFailResultVector":[{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023652721","sourceStatusCode":409,"sourceBytes":0,"destBytes":0,"feedId":6615,"totalSpendMs":1341,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:31","host":"europe-23*","referer":"https://segmentfault.com/a/1190000023652718","linkMd5ListStr":"edffa444454de4e48a3d973ca7297088","extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[409],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023652721","sourceStatusCode":409,"sourceBytes":0,"destBytes":0,"feedId":6615,"totalSpendMs":1455,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:33","host":"us-030*","referer":"https://segmentfault.com/a/1190000023652718","linkMd5ListStr":"edffa444454de4e48a3d973ca7297088","extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[409],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023730239","sourceStatusCode":401,"sourceBytes":0,"destBytes":0,"feedId":6615,"totalSpendMs":2359,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:38","host":"us-55*","referer":"https://segmentfault.com/a/1190000023730234","linkMd5ListStr":"3c5ab7837e45f9183c9783494075346a","extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[401],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023730240","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":6615,"totalSpendMs":4331,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:38","host":"us-035*","referer":"https://segmentfault.com/a/1190000023730234","linkMd5ListStr":"3c5ab7837e45f9183c9783494075346a","extra22GetBytesInfo":"2ã€Refererå­—æ®µ ï¼š https://segmentfault.com/a/1190000023730234","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023730237","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":6615,"totalSpendMs":4307,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:38","host":"us-024*","referer":"https://segmentfault.com/a/1190000023730234","linkMd5ListStr":"3c5ab7837e45f9183c9783494075346a","extra22GetBytesInfo":"2ã€Refererå­—æ®µ ï¼š https://segmentfault.com/a/1190000023730234","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023730238","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":6615,"totalSpendMs":4550,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:37","host":"europe65*","referer":"https://segmentfault.com/a/1190000023730234","linkMd5ListStr":"3c5ab7837e45f9183c9783494075346a","extra22GetBytesInfo":"2ã€Refererå­—æ®µ ï¼š https://segmentfault.com/a/1190000023730234","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023730239","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":6615,"totalSpendMs":4903,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:40","host":"europe-24*","referer":"https://segmentfault.com/a/1190000023730234","linkMd5ListStr":"3c5ab7837e45f9183c9783494075346a","extra22GetBytesInfo":"2ã€Refererå­—æ®µ ï¼š https://segmentfault.com/a/1190000023730234","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023730240","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":6615,"totalSpendMs":4559,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:42","host":"us-031*","referer":"https://segmentfault.com/a/1190000023730234","linkMd5ListStr":"3c5ab7837e45f9183c9783494075346a","extra22GetBytesInfo":"2ã€Refererå­—æ®µ ï¼š https://segmentfault.com/a/1190000023730234","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023730237","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":6615,"totalSpendMs":4844,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:42","host":"europe68*","referer":"https://segmentfault.com/a/1190000023730234","linkMd5ListStr":"3c5ab7837e45f9183c9783494075346a","extra22GetBytesInfo":"2ã€Refererå­—æ®µ ï¼š https://segmentfault.com/a/1190000023730234","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023730238","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":6615,"totalSpendMs":5125,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:42","host":"europe-25*","referer":"https://segmentfault.com/a/1190000023730234","linkMd5ListStr":"3c5ab7837e45f9183c9783494075346a","extra22GetBytesInfo":"2ã€Refererå­—æ®µ ï¼š https://segmentfault.com/a/1190000023730234","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023730239","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":6615,"totalSpendMs":5606,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:45","host":"us-008*","referer":"https://segmentfault.com/a/1190000023730234","linkMd5ListStr":"3c5ab7837e45f9183c9783494075346a","extra22GetBytesInfo":"2ã€Refererå­—æ®µ ï¼š https://segmentfault.com/a/1190000023730234","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023730240","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":6615,"totalSpendMs":4548,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:47","host":"us-011*","referer":"https://segmentfault.com/a/1190000023730234","linkMd5ListStr":"3c5ab7837e45f9183c9783494075346a","extra22GetBytesInfo":"2ã€Refererå­—æ®µ ï¼š https://segmentfault.com/a/1190000023730234","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023730237","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":6615,"totalSpendMs":4430,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:47","host":"us-014*","referer":"https://segmentfault.com/a/1190000023730234","linkMd5ListStr":"3c5ab7837e45f9183c9783494075346a","extra22GetBytesInfo":"2ã€Refererå­—æ®µ ï¼š https://segmentfault.com/a/1190000023730234","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023730238","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":6615,"totalSpendMs":4334,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:47","host":"us-010*","referer":"https://segmentfault.com/a/1190000023730234","linkMd5ListStr":"3c5ab7837e45f9183c9783494075346a","extra22GetBytesInfo":"2ã€Refererå­—æ®µ ï¼š https://segmentfault.com/a/1190000023730234","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023730239","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":6615,"totalSpendMs":4315,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:51","host":"us-027*","referer":"https://segmentfault.com/a/1190000023730234","linkMd5ListStr":"3c5ab7837e45f9183c9783494075346a","extra22GetBytesInfo":"2ã€Refererå­—æ®µ ï¼š https://segmentfault.com/a/1190000023730234","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023730237","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":6615,"totalSpendMs":4436,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:52","host":"us-033*","referer":"https://segmentfault.com/a/1190000023730234","linkMd5ListStr":"3c5ab7837e45f9183c9783494075346a","extra22GetBytesInfo":"2ã€Refererå­—æ®µ ï¼š https://segmentfault.com/a/1190000023730234","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023730238","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":6615,"totalSpendMs":4621,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:52","host":"us-033*","referer":"https://segmentfault.com/a/1190000023730234","linkMd5ListStr":"3c5ab7837e45f9183c9783494075346a","extra22GetBytesInfo":"2ã€Refererå­—æ®µ ï¼š https://segmentfault.com/a/1190000023730234","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023730240","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":6615,"totalSpendMs":5208,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:51","host":"europe-57*","referer":"https://segmentfault.com/a/1190000023730234","linkMd5ListStr":"3c5ab7837e45f9183c9783494075346a","extra22GetBytesInfo":"2ã€Refererå­—æ®µ ï¼š https://segmentfault.com/a/1190000023730234","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023730239","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":6615,"totalSpendMs":5182,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:55","host":"us-021*","referer":"https://segmentfault.com/a/1190000023730234","linkMd5ListStr":"3c5ab7837e45f9183c9783494075346a","extra22GetBytesInfo":"2ã€Refererå­—æ®µ ï¼š https://segmentfault.com/a/1190000023730234","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023730237","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":6615,"totalSpendMs":4567,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:56","host":"us-002*","referer":"https://segmentfault.com/a/1190000023730234","linkMd5ListStr":"3c5ab7837e45f9183c9783494075346a","extra22GetBytesInfo":"2ã€Refererå­—æ®µ ï¼š https://segmentfault.com/a/1190000023730234","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023730238","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":6615,"totalSpendMs":4340,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:57","host":"us-007*","referer":"https://segmentfault.com/a/1190000023730234","linkMd5ListStr":"3c5ab7837e45f9183c9783494075346a","extra22GetBytesInfo":"2ã€Refererå­—æ®µ ï¼š https://segmentfault.com/a/1190000023730234","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023730240","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":6615,"totalSpendMs":5111,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:57","host":"us-54*","referer":"https://segmentfault.com/a/1190000023730234","linkMd5ListStr":"3c5ab7837e45f9183c9783494075346a","extra22GetBytesInfo":"2ã€Refererå­—æ®µ ï¼š https://segmentfault.com/a/1190000023730234","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"}],"extra10_invalidATagHrefValue":{"https://segmentfault.com/a/1190000023677258_#%E4%BA%8C%E5%88%86%E6%B3%95%E5%9F%BA%E7%A1%80%E5%8F%8A%E5%8F%98%E7%A7%8D%E7%BB%93%E6%9E%84":"https://segmentfault.com/a/1190000023677258#%E4%BA%8C%E5%88%86%E6%B3%95%E5%9F%BA%E7%A1%80%E5%8F%8A%E5%8F%98%E7%A7%8D%E7%BB%93%E6%9E%84","https://segmentfault.com/a/1190000023677258_#%E6%89%93%E6%80%AA%E5%8D%87%E7%BA%A7":"https://segmentfault.com/a/1190000023677258#%E6%89%93%E6%80%AA%E5%8D%87%E7%BA%A7","https://segmentfault.com/a/1190000023677258_#%E5%89%8D%E8%A8%80":"https://segmentfault.com/a/1190000023677258#%E5%89%8D%E8%A8%80","https://segmentfault.com/a/1190000023669152_#":"https://segmentfault.com/a/1190000023669152#","https://segmentfault.com/a/1190000023677258_#%E5%87%BA%E5%B8%88%E8%AF%95%E7%82%BC":"https://segmentfault.com/a/1190000023677258#%E5%87%BA%E5%B8%88%E8%AF%95%E7%82%BC","https://segmentfault.com/a/1190000023677258_#%E5%B0%8F%E8%AF%95%E7%89%9B%E5%88%80":"https://segmentfault.com/a/1190000023677258#%E5%B0%8F%E8%AF%95%E7%89%9B%E5%88%80"},"extra111_proxyServerAndStatMap":{"http://us-032.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-037.herokuapp.com/":{"failCount":0,"successCount":3,"resultList":[200,200,200]},"http://us-002.herokuapp.com/":{"failCount":1,"successCount":10,"resultList":[200,200,200,200,200,200,200,200,200,200,403]},"http://us-007.herokuapp.com/":{"failCount":1,"successCount":1,"resultList":[200,403]},"http://us-028.herokuapp.com/":{"failCount":0,"successCount":3,"resultList":[200,200,200]},"http://us-52.herokuapp.com/":{"failCount":0,"successCount":7,"resultList":[200,200,200,200,200,200,200]},"http://us-011.herokuapp.com/":{"failCount":1,"successCount":1,"resultList":[200,403]},"http://us-025.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-020.herokuapp.com/":{"failCount":0,"successCount":3,"resultList":[200,200,200]},"http://us-54.herokuapp.com/":{"failCount":1,"successCount":1,"resultList":[200,403]},"http://europe69.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]},"http://us-004.herokuapp.com/":{"failCount":0,"successCount":3,"resultList":[200,200,200]},"http://europe64.herokuapp.com/":{"failCount":0,"successCount":8,"resultList":[200,200,200,200,200,200,200,200]},"http://europe-57.herokuapp.com/":{"failCount":1,"successCount":2,"resultList":[200,200,403]},"http://us-016.herokuapp.com/":{"failCount":0,"successCount":3,"resultList":[200,200,200]},"http://us-013.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe-24.herokuapp.com/":{"failCount":1,"successCount":1,"resultList":[200,403]},"http://us-039.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]},"http://us-55.herokuapp.com/":{"failCount":1,"successCount":1,"resultList":[401,200]},"http://europe61.herokuapp.com/":{"failCount":0,"successCount":3,"resultList":[200,200,200]},"http://us-030.herokuapp.com/":{"failCount":1,"successCount":7,"resultList":[200,200,200,200,200,200,409,200]},"http://us-026.herokuapp.com/":{"failCount":0,"successCount":9,"resultList":[200,200,200,200,200,200,200,200,200]},"http://europe-25.herokuapp.com/":{"failCount":1,"successCount":3,"resultList":[200,200,200,403]},"http://us-001.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-031.herokuapp.com/":{"failCount":1,"successCount":3,"resultList":[200,200,200,403]},"http://europe62.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]},"http://us-014.herokuapp.com/":{"failCount":1,"successCount":12,"resultList":[200,200,200,200,200,200,200,200,200,200,200,200,403]},"http://us-027.herokuapp.com/":{"failCount":1,"successCount":2,"resultList":[200,200,403]},"http://europe-56.herokuapp.com/":{"failCount":0,"successCount":9,"resultList":[200,200,200,200,200,200,200,200,200]},"http://us-53.herokuapp.com/":{"failCount":0,"successCount":4,"resultList":[200,200,200,200]},"http://europe68.herokuapp.com/":{"failCount":1,"successCount":7,"resultList":[200,200,200,200,200,200,200,403]},"http://europe63.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]},"http://europe-60.herokuapp.com/":{"failCount":0,"successCount":9,"resultList":[200,200,200,200,200,200,200,200,200]},"http://us-024.herokuapp.com/":{"failCount":1,"successCount":2,"resultList":[200,403,200]},"http://europe70.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-038.herokuapp.com/":{"failCount":0,"successCount":9,"resultList":[200,200,200,200,200,200,200,200,200]},"http://europe-23.herokuapp.com/":{"failCount":1,"successCount":6,"resultList":[200,200,200,200,200,409,200]},"http://europe21.herokuapp.com/":{"failCount":0,"successCount":4,"resultList":[200,200,200,200]},"http://us-033.herokuapp.com/":{"failCount":2,"successCount":4,"resultList":[200,200,200,200,403,403]},"http://us-003.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]},"http://us-008.herokuapp.com/":{"failCount":1,"successCount":4,"resultList":[200,200,200,200,403]},"http://us-029.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-012.herokuapp.com/":{"failCount":0,"successCount":3,"resultList":[200,200,200]},"http://us-018.herokuapp.com/":{"failCount":0,"successCount":8,"resultList":[200,200,200,200,200,200,200,200]},"http://europe65.herokuapp.com/":{"failCount":1,"successCount":3,"resultList":[200,403,200,200]},"http://us-021.herokuapp.com/":{"failCount":1,"successCount":2,"resultList":[200,200,403]},"http://us-034.herokuapp.com/":{"failCount":0,"successCount":8,"resultList":[200,200,200,200,200,200,200,200]},"http://us-005.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]},"http://europe-58.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]},"http://us-035.herokuapp.com/":{"failCount":1,"successCount":2,"resultList":[200,200,403]},"http://us-022.herokuapp.com/":{"failCount":0,"successCount":11,"resultList":[200,200,200,200,200,200,200,200,200,200,200]},"http://us-006.herokuapp.com/":{"failCount":0,"successCount":7,"resultList":[200,200,200,200,200,200,200]},"http://us-036.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-019.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]},"http://us-010.herokuapp.com/":{"failCount":1,"successCount":12,"resultList":[200,200,200,200,200,200,200,200,200,200,200,200,403]},"http://europe-59.herokuapp.com/":{"failCount":0,"successCount":4,"resultList":[200,200,200,200]},"http://europe67.herokuapp.com/":{"failCount":0,"successCount":5,"resultList":[200,200,200,200,200]},"http://us-51.herokuapp.com/":{"failCount":0,"successCount":4,"resultList":[200,200,200,200]},"http://us-023.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-040.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/banner-rmc-compare.png","sourceStatusCode":200,"destWidth":900,"destHeight":383,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn26@2020_4/2020/08/24/23-08-20-365_ca3ba6545607b5e9.webp","sourceBytes":526228,"destBytes":26564,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":1025,"convertSpendMs":44,"createdTime":"2020-08-25 07:08:20","host":"us-022*","referer":"https://segmentfault.com/a/1190000022332809","linkMd5ListStr":"cb41ea759b4fff7fa2c9b843d9a3559f,cb41ea759b4fff7fa2c9b843d9a3559f","githubUser":"myreaderx33","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"513.9 KB","destSize":"25.9 KB","compressRate":"5%"},{"code":1,"isDone":false,"source":"https://tva1.sinaimg.cn/large/007S8ZIlly1ghu96ukhevj30h203mmxm.jpg","sourceStatusCode":200,"destWidth":614,"destHeight":130,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn98@2020_2/2020/08/24/23-08-21-517_8f13d8b07f643ac5.webp","sourceBytes":16877,"destBytes":8954,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2121,"convertSpendMs":42,"createdTime":"2020-08-25 07:08:20","host":"us-52*","referer":"https://segmentfault.com/a/1190000023668057","linkMd5ListStr":"dcb1ca1d6d9e74559b1305ed3b0d3469,dcb1ca1d6d9e74559b1305ed3b0d3469","githubUser":"myreaderx12","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"16.5 KB","destSize":"8.7 KB","compressRate":"53.1%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023652882","sourceStatusCode":200,"destWidth":221,"destHeight":44,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx/cdn94@2020_1/2020/08/24/23-08-21-894_de0e13cfc9042733.webp","sourceBytes":5263,"destBytes":1932,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2839,"convertSpendMs":3,"createdTime":"2020-08-25 07:08:20","host":"europe64*","referer":"https://segmentfault.com/a/1190000023652879","linkMd5ListStr":"d0ff9ddefe9a6a882e6318d475159e5e,d0ff9ddefe9a6a882e6318d475159e5e","githubUser":"myreaderx","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"5.1 KB","destSize":"1.9 KB","compressRate":"36.7%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023601930","sourceStatusCode":200,"destWidth":800,"destHeight":417,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn50@2020_1/2020/08/24/23-08-21-971_83bb94c2dc369fca.webp","sourceBytes":52499,"destBytes":10952,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2912,"convertSpendMs":15,"createdTime":"2020-08-25 07:08:20","host":"europe64*","referer":"https://segmentfault.com/a/1190000023601927","linkMd5ListStr":"caee1d7512ed006f50fb714e278bb4f4,caee1d7512ed006f50fb714e278bb4f4","githubUser":"myreaderx30","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"51.3 KB","destSize":"10.7 KB","compressRate":"20.9%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbESbH","sourceStatusCode":200,"destWidth":258,"destHeight":258,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn79@2020_4/2020/08/24/23-08-22-002_23e3d2b285dd74b0.webp","sourceBytes":9980,"destBytes":9980,"feedId":6615,"totalSpendMs":2941,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:20","host":"europe-56*","referer":"https://segmentfault.com/a/1190000023691221","linkMd5ListStr":"ed2d9ff0860340e13c972d901109e6db,ed2d9ff0860340e13c972d901109e6db","githubUser":"myreaderx7","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"9.7 KB","destSize":"9.7 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLphW","sourceStatusCode":200,"destWidth":800,"destHeight":430,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn55@2020_5/2020/08/24/23-08-22-420_8237a8f2bc153c7c.webp","sourceBytes":25107,"destBytes":4332,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3208,"convertSpendMs":15,"createdTime":"2020-08-25 07:08:20","host":"europe63*","referer":"https://segmentfault.com/a/1190000023652718","linkMd5ListStr":"edffa444454de4e48a3d973ca7297088,edffa444454de4e48a3d973ca7297088","githubUser":"myreaderx18","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"24.5 KB","destSize":"4.2 KB","compressRate":"17.3%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023473305","sourceStatusCode":200,"destWidth":800,"destHeight":317,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx23/cdn14@2020_2/2020/08/24/23-08-22-277_79d59aaca7438433.webp","sourceBytes":62172,"destBytes":17268,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3293,"convertSpendMs":15,"createdTime":"2020-08-25 07:08:20","host":"europe68*","referer":"https://segmentfault.com/a/1190000023736395","linkMd5ListStr":"420bda976c9e79232c9adc2d2bfab39b,0350953f3ed11c58067e084970f74395,420bda976c9e79232c9adc2d2bfab39b,0350953f3ed11c58067e084970f74395","githubUser":"myreaderx23","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"60.7 KB","destSize":"16.9 KB","compressRate":"27.8%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023707764","sourceStatusCode":200,"destWidth":800,"destHeight":139,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn37@2020_5/2020/08/24/23-08-22-393_74b3a8806a1a5203.webp","sourceBytes":63134,"destBytes":18322,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3361,"convertSpendMs":10,"createdTime":"2020-08-25 07:08:20","host":"europe-60*","referer":"https://segmentfault.com/a/1190000023707760","linkMd5ListStr":"0efc7a62efcc894fd0f116660993cd89,0efc7a62efcc894fd0f116660993cd89","githubUser":"myreaderx27","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"61.7 KB","destSize":"17.9 KB","compressRate":"29%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLFeR","sourceStatusCode":200,"destWidth":800,"destHeight":532,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn18@2020_5/2020/08/24/23-08-22-045_aea76744bd0bf3f8.webp","sourceBytes":78474,"destBytes":22338,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3439,"convertSpendMs":16,"createdTime":"2020-08-25 07:08:20","host":"europe-56*","referer":"https://segmentfault.com/a/1190000023714011","linkMd5ListStr":"317dc10a0d3fb89965600980c204116d,317dc10a0d3fb89965600980c204116d","githubUser":"myreaderx16","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"76.6 KB","destSize":"21.8 KB","compressRate":"28.5%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLqMU","sourceStatusCode":200,"destWidth":300,"destHeight":300,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx13/cdn65@2020_5/2020/08/24/23-08-22-735_cebd68292a8c6202.webp","sourceBytes":20447,"destBytes":5946,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3327,"convertSpendMs":11,"createdTime":"2020-08-25 07:08:20","host":"us-030*","referer":"https://segmentfault.com/a/1190000023660020","linkMd5ListStr":"6a526c91c6f56ccea5eb637c9da38dee,6a526c91c6f56ccea5eb637c9da38dee","githubUser":"myreaderx13","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"20 KB","destSize":"5.8 KB","compressRate":"29.1%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023636705","sourceStatusCode":200,"destWidth":461,"destHeight":180,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn78@2020_2/2020/08/24/23-08-22-752_88bc2bcf04a82bf3.webp","sourceBytes":32231,"destBytes":9310,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3350,"convertSpendMs":11,"createdTime":"2020-08-25 07:08:20","host":"us-55*","referer":"https://segmentfault.com/a/1190000023636701","linkMd5ListStr":"3f522baba1e817cf81ff90c5e1d10cfb,3f522baba1e817cf81ff90c5e1d10cfb","githubUser":"myreaderx6","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"31.5 KB","destSize":"9.1 KB","compressRate":"28.9%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLdLv","sourceStatusCode":200,"destWidth":800,"destHeight":300,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn69@2020_2/2020/08/24/23-08-22-589_061a58f778cd47e5.webp","sourceBytes":101996,"destBytes":7834,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3521,"convertSpendMs":16,"createdTime":"2020-08-25 07:08:20","host":"europe-23*","referer":"https://segmentfault.com/a/1190000023608432","linkMd5ListStr":"749b88d16e8263f6e6691f06881f8209,749b88d16e8263f6e6691f06881f8209","githubUser":"myreaderx7","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"99.6 KB","destSize":"7.7 KB","compressRate":"7.7%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023676550","sourceStatusCode":200,"destWidth":800,"destHeight":323,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn2@2020_3/2020/08/24/23-08-22-747_a6db2e4da23bc72a.webp","sourceBytes":30082,"destBytes":7094,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3372,"convertSpendMs":21,"createdTime":"2020-08-25 07:08:20","host":"us-030*","referer":"https://segmentfault.com/a/1190000023676547","linkMd5ListStr":"c737187f4a9de041a952fc2de76447f5,c737187f4a9de041a952fc2de76447f5","githubUser":"myreaderx1","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"29.4 KB","destSize":"6.9 KB","compressRate":"23.6%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLr7m","sourceStatusCode":200,"destWidth":800,"destHeight":340,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn74@2020_1/2020/08/24/23-08-22-400_863f702969491e2a.webp","sourceBytes":81708,"destBytes":24254,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3559,"convertSpendMs":27,"createdTime":"2020-08-25 07:08:20","host":"europe-60*","referer":"https://segmentfault.com/a/1190000023663493","linkMd5ListStr":"b02edc6d556383db4bdfaad310312379,b02edc6d556383db4bdfaad310312379","githubUser":"myreaderx31","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"79.8 KB","destSize":"23.7 KB","compressRate":"29.7%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023648367","sourceStatusCode":200,"destWidth":800,"destHeight":337,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn98@2020_1/2020/08/24/23-08-22-613_13d61e813eca2336.webp","sourceBytes":128310,"destBytes":26444,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3625,"convertSpendMs":15,"createdTime":"2020-08-25 07:08:20","host":"europe-23*","referer":"https://segmentfault.com/a/1190000023648364","linkMd5ListStr":"47f945d0758f841a94d5a32def62ad1a,47f945d0758f841a94d5a32def62ad1a","githubUser":"myreaderx3","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"125.3 KB","destSize":"25.8 KB","compressRate":"20.6%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023677261","sourceStatusCode":200,"destWidth":219,"destHeight":219,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn86@2020_6/2020/08/24/23-08-22-904_dce38b7c68cc1701.webp","sourceBytes":7088,"destBytes":6372,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3517,"convertSpendMs":9,"createdTime":"2020-08-25 07:08:20","host":"us-014*","referer":"https://segmentfault.com/a/1190000023677258","linkMd5ListStr":"81351ef5cee65b004bca5b0902fb9913,81351ef5cee65b004bca5b0902fb9913","githubUser":"myreaderx3","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"6.9 KB","destSize":"6.2 KB","compressRate":"89.9%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000018549678","sourceStatusCode":200,"destWidth":258,"destHeight":258,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn62@2020_2/2020/08/24/23-08-22-916_a02e97e5e2b41934.webp","sourceBytes":20858,"destBytes":6490,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3528,"convertSpendMs":8,"createdTime":"2020-08-25 07:08:20","host":"us-52*","referer":"https://segmentfault.com/a/1190000023734444","linkMd5ListStr":"77294d18bacb4a429bc351cad2ce49d1,b7dfe327eb9a61822da340b39059d2f1,77294d18bacb4a429bc351cad2ce49d1,b7dfe327eb9a61822da340b39059d2f1","githubUser":"myreaderx4","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"20.4 KB","destSize":"6.3 KB","compressRate":"31.1%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLbdV","sourceStatusCode":200,"destWidth":800,"destHeight":361,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn90@2020_2/2020/08/24/23-08-22-917_b612e89919e9c268.webp","sourceBytes":60839,"destBytes":11212,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3545,"convertSpendMs":17,"createdTime":"2020-08-25 07:08:20","host":"us-002*","referer":"https://segmentfault.com/a/1190000023601065","linkMd5ListStr":"76c9c6e6cb88560c51a4d8dfd2fa525b,76c9c6e6cb88560c51a4d8dfd2fa525b","githubUser":"myreaderx10","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"59.4 KB","destSize":"10.9 KB","compressRate":"18.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbK4w3","sourceStatusCode":200,"destWidth":800,"destHeight":450,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn14@2020_6/2020/08/24/23-08-22-984_c34630b4bcb95121.webp","sourceBytes":40285,"destBytes":12508,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2417,"convertSpendMs":20,"createdTime":"2020-08-25 07:08:21","host":"us-014*","referer":"https://segmentfault.com/a/1190000023572844","linkMd5ListStr":"b422d5e4e3dee35be3d3afd3b84c77cd,b422d5e4e3dee35be3d3afd3b84c77cd","githubUser":"myreaderx1","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"39.3 KB","destSize":"12.2 KB","compressRate":"31%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023735152","sourceStatusCode":200,"destWidth":254,"destHeight":121,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn94@2020_3/2020/08/24/23-08-22-973_d9a4a0f3fdb1bd81.webp","sourceBytes":8576,"destBytes":3076,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3598,"convertSpendMs":15,"createdTime":"2020-08-25 07:08:20","host":"us-010*","referer":"https://segmentfault.com/a/1190000023735149","linkMd5ListStr":"e96585e49877b1a5d367d8d830ee693d,e96585e49877b1a5d367d8d830ee693d","githubUser":"myreaderx19","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"8.4 KB","destSize":"3 KB","compressRate":"35.9%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbK8rH","sourceStatusCode":200,"destWidth":800,"destHeight":444,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx/cdn2@2020_3/2020/08/24/23-08-22-403_40b51c4991f714b5.webp","sourceBytes":79075,"destBytes":58018,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3744,"convertSpendMs":39,"createdTime":"2020-08-25 07:08:20","host":"europe-60*","referer":"https://segmentfault.com/a/1190000023587881","linkMd5ListStr":"38260b3f6e6b52df89d4a67c52a99d4e,38260b3f6e6b52df89d4a67c52a99d4e","githubUser":"myreaderx","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"77.2 KB","destSize":"56.7 KB","compressRate":"73.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023699209","sourceStatusCode":200,"destWidth":459,"destHeight":412,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn51@2020_5/2020/08/24/23-08-22-960_ae361416bba7e1ff.webp","sourceBytes":216965,"destBytes":14810,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3635,"convertSpendMs":16,"createdTime":"2020-08-25 07:08:20","host":"us-001*","referer":"https://segmentfault.com/a/1190000023699206","linkMd5ListStr":"fbe29875f9063bd2517a65d848a2914c,fbe29875f9063bd2517a65d848a2914c","githubUser":"myreaderx2","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"211.9 KB","destSize":"14.5 KB","compressRate":"6.8%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023604341","sourceStatusCode":200,"destWidth":720,"destHeight":365,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn90@2020_2/2020/08/24/23-08-22-943_ebf9b33d099efdb6.webp","sourceBytes":32507,"destBytes":23038,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3649,"convertSpendMs":15,"createdTime":"2020-08-25 07:08:20","host":"us-022*","referer":"https://segmentfault.com/a/1190000023604337","linkMd5ListStr":"7fbcd44c2485b915a169b959a08502eb,7fbcd44c2485b915a169b959a08502eb","githubUser":"myreaderx5oss","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"31.7 KB","destSize":"22.5 KB","compressRate":"70.9%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023709792","sourceStatusCode":200,"destWidth":678,"destHeight":64,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx32/cdn9@2020_2/2020/08/24/23-08-23-053_139a4be2af02dca5.webp","sourceBytes":3107,"destBytes":2152,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3650,"convertSpendMs":15,"createdTime":"2020-08-25 07:08:20","host":"us-026*","referer":"https://segmentfault.com/a/1190000023709787","linkMd5ListStr":"ac9425a1dc212f5c19afed90d55afc0d,ac9425a1dc212f5c19afed90d55afc0d","githubUser":"myreaderx32","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"3 KB","destSize":"2.1 KB","compressRate":"69.3%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLKdl","sourceStatusCode":200,"destWidth":800,"destHeight":342,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn21@2020_1/2020/08/24/23-08-23-024_2805d581158c2c2d.webp","sourceBytes":70114,"destBytes":27064,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3715,"convertSpendMs":22,"createdTime":"2020-08-25 07:08:20","host":"us-034*","referer":"https://segmentfault.com/a/1190000023733064","linkMd5ListStr":"2bab059fcc83687a9e4e5c0f8280a58a,2bab059fcc83687a9e4e5c0f8280a58a","githubUser":"myreaderx21","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"68.5 KB","destSize":"26.4 KB","compressRate":"38.6%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLJtP","sourceStatusCode":200,"destWidth":800,"destHeight":340,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn86@2020_1/2020/08/24/23-08-23-023_4f776d9d8dfa05aa.webp","sourceBytes":93089,"destBytes":25484,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3722,"convertSpendMs":26,"createdTime":"2020-08-25 07:08:20","host":"us-034*","referer":"https://segmentfault.com/a/1190000023730234","linkMd5ListStr":"3c5ab7837e45f9183c9783494075346a,3c5ab7837e45f9183c9783494075346a","githubUser":"myreaderx31","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"90.9 KB","destSize":"24.9 KB","compressRate":"27.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023708779","sourceStatusCode":200,"destWidth":754,"destHeight":488,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn42@2020_5/2020/08/24/23-08-23-053_b410fb298e7c2e62.webp","sourceBytes":38573,"destBytes":14822,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3732,"convertSpendMs":27,"createdTime":"2020-08-25 07:08:20","host":"us-038*","referer":"https://segmentfault.com/a/1190000023708775","linkMd5ListStr":"b4d24379ce31382e9336abd377405f85,b4d24379ce31382e9336abd377405f85","githubUser":"myreaderx15","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"37.7 KB","destSize":"14.5 KB","compressRate":"38.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023647613","sourceStatusCode":200,"destWidth":800,"destHeight":267,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx25/cdn74@2020_6/2020/08/24/23-08-22-906_d94bb8e812bfe91b.webp","sourceBytes":14509,"destBytes":7928,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3790,"convertSpendMs":8,"createdTime":"2020-08-25 07:08:20","host":"us-006*","referer":"https://segmentfault.com/a/1190000023647609","linkMd5ListStr":"bd58cfa67f4f5a8296c3cadfd7f5f584,bd58cfa67f4f5a8296c3cadfd7f5f584","githubUser":"myreaderx25","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"14.2 KB","destSize":"7.7 KB","compressRate":"54.6%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023737674","sourceStatusCode":200,"destWidth":800,"destHeight":449,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn78@2020_3/2020/08/24/23-08-23-064_68e17a2630a82d60.webp","sourceBytes":64842,"destBytes":31124,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3794,"convertSpendMs":26,"createdTime":"2020-08-25 07:08:20","host":"us-038*","referer":"https://segmentfault.com/a/1190000023737670","linkMd5ListStr":"f6d9b255d764f38d4cfc647c5d61450c,f6d9b255d764f38d4cfc647c5d61450c","githubUser":"myreaderx5oss","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"63.3 KB","destSize":"30.4 KB","compressRate":"48%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023657732","sourceStatusCode":200,"destWidth":800,"destHeight":406,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn6@2020_3/2020/08/24/23-08-23-128_3e079a22ca630726.webp","sourceBytes":111116,"destBytes":30308,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3822,"convertSpendMs":18,"createdTime":"2020-08-25 07:08:20","host":"us-018*","referer":"https://segmentfault.com/a/1190000023657729","linkMd5ListStr":"9569faa8acc0e079a1c10828ff9a417e,9569faa8acc0e079a1c10828ff9a417e","githubUser":"myreaderx29","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"108.5 KB","destSize":"29.6 KB","compressRate":"27.3%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023655554","sourceStatusCode":200,"destWidth":800,"destHeight":458,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn9@2020_4/2020/08/24/23-08-23-117_4774f58479cda1db.webp","sourceBytes":333627,"destBytes":23424,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3858,"convertSpendMs":25,"createdTime":"2020-08-25 07:08:20","host":"us-006*","referer":"https://segmentfault.com/a/1190000023655551","linkMd5ListStr":"5043732a2558bb2fe1d74251745d70bf,5043732a2558bb2fe1d74251745d70bf","githubUser":"myreaderx22","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"325.8 KB","destSize":"22.9 KB","compressRate":"7%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbKYWU","sourceStatusCode":200,"destWidth":800,"destHeight":450,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn69@2020_4/2020/08/24/23-08-23-184_0d30b74097bcfe0f.webp","sourceBytes":209291,"destBytes":39226,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3882,"convertSpendMs":17,"createdTime":"2020-08-25 07:08:20","host":"us-018*","referer":"https://segmentfault.com/a/1190000023552474","linkMd5ListStr":"518d797df1c7c9d30e2acaaec433d26b,518d797df1c7c9d30e2acaaec433d26b","githubUser":"myreaderx11","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"204.4 KB","destSize":"38.3 KB","compressRate":"18.7%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLvba","sourceStatusCode":200,"destWidth":800,"destHeight":534,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn6@2020_1/2020/08/24/23-08-23-211_d89633fd6dfd81d7.webp","sourceBytes":513728,"destBytes":23052,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3902,"convertSpendMs":36,"createdTime":"2020-08-25 07:08:20","host":"us-038*","referer":"https://segmentfault.com/a/1190000023675512","linkMd5ListStr":"8130037c23e0c993c51e97490b17f7b6,8130037c23e0c993c51e97490b17f7b6","githubUser":"myreaderx12","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"501.7 KB","destSize":"22.5 KB","compressRate":"4.5%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLAIE","sourceStatusCode":200,"destWidth":800,"destHeight":355,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn46@2020_4/2020/08/24/23-08-23-218_dae355b894bbb09e.webp","sourceBytes":54090,"destBytes":17642,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3937,"convertSpendMs":118,"createdTime":"2020-08-25 07:08:20","host":"us-026*","referer":"https://segmentfault.com/a/1190000023696737","linkMd5ListStr":"6077149de366230a75fc5ccb09f8bad7,6077149de366230a75fc5ccb09f8bad7","githubUser":"myreaderx24","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"52.8 KB","destSize":"17.2 KB","compressRate":"32.6%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLty0","sourceStatusCode":200,"destWidth":800,"destHeight":725,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn82@2020_3/2020/08/24/23-08-23-222_57802582ab559705.webp","sourceBytes":46146,"destBytes":17710,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3940,"convertSpendMs":118,"createdTime":"2020-08-25 07:08:20","host":"us-026*","referer":"https://segmentfault.com/a/1190000023669152","linkMd5ListStr":"c9849a6e55ae7d588b45b8503f19231a,c9849a6e55ae7d588b45b8503f19231a","githubUser":"myreaderx19","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"45.1 KB","destSize":"17.3 KB","compressRate":"38.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLyLa","sourceStatusCode":200,"destWidth":800,"destHeight":450,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn66@2020_4/2020/08/24/23-08-23-072_538d4e9f5497d55e.webp","sourceBytes":100901,"destBytes":51728,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":4052,"convertSpendMs":33,"createdTime":"2020-08-25 07:08:20","host":"us-010*","referer":"https://segmentfault.com/a/1190000023689023","linkMd5ListStr":"5a738e1afa2c3c1a2044a79c194873cd,5a738e1afa2c3c1a2044a79c194873cd","githubUser":"myreaderx6","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"98.5 KB","destSize":"50.5 KB","compressRate":"51.3%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLgRH","sourceStatusCode":200,"destWidth":800,"destHeight":507,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx14/cdn30@2020_3/2020/08/24/23-08-23-291_58228cad1bdea290.webp","sourceBytes":607936,"destBytes":65920,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":4150,"convertSpendMs":67,"createdTime":"2020-08-25 07:08:20","host":"us-010*","referer":"https://segmentfault.com/a/1190000023622134","linkMd5ListStr":"feb087fef9d4181f56dd8589fa8fcc79,feb087fef9d4181f56dd8589fa8fcc79","githubUser":"myreaderx14","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"593.7 KB","destSize":"64.4 KB","compressRate":"10.8%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023735009","sourceStatusCode":200,"destWidth":800,"destHeight":290,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn18@2020_4/2020/08/24/23-08-23-811_c3c6f2a2a3fccaba.webp","sourceBytes":36632,"destBytes":9762,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2154,"convertSpendMs":11,"createdTime":"2020-08-25 07:08:22","host":"us-002*","referer":"https://segmentfault.com/a/1190000023735006","linkMd5ListStr":"83e2007305092901a28598ddbadd1356,83e2007305092901a28598ddbadd1356","githubUser":"myreaderx29","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"35.8 KB","destSize":"9.5 KB","compressRate":"26.6%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023517942","sourceStatusCode":200,"destWidth":800,"destHeight":739,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn21@2020_1/2020/08/24/23-08-24-093_e49a8578e1b0f2ed.webp","sourceBytes":62742,"destBytes":34606,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2342,"convertSpendMs":18,"createdTime":"2020-08-25 07:08:22","host":"europe64*","referer":"https://segmentfault.com/a/1190000023651246","linkMd5ListStr":"9a60a00d9e8d732bd6972e94bc783594,9a60a00d9e8d732bd6972e94bc783594","githubUser":"myreaderx22","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"61.3 KB","destSize":"33.8 KB","compressRate":"55.2%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023650522","sourceStatusCode":200,"destWidth":800,"destHeight":426,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx23/cdn26@2020_5/2020/08/24/23-08-24-392_31a173cafd36f563.webp","sourceBytes":79664,"destBytes":37504,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2203,"convertSpendMs":30,"createdTime":"2020-08-25 07:08:23","host":"us-52*","referer":"https://segmentfault.com/a/1190000023650518","linkMd5ListStr":"569e2336cd79bc25ac4f434bfa5337fb,569e2336cd79bc25ac4f434bfa5337fb","githubUser":"myreaderx23","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"77.8 KB","destSize":"36.6 KB","compressRate":"47.1%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023602036","sourceStatusCode":200,"destWidth":800,"destHeight":445,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn30@2020_2/2020/08/24/23-08-24-482_02dc9380d0589ef6.webp","sourceBytes":56763,"destBytes":40328,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2279,"convertSpendMs":16,"createdTime":"2020-08-25 07:08:23","host":"us-030*","referer":"https://segmentfault.com/a/1190000023602033","linkMd5ListStr":"a52d5aa652910e157d09aa5f6fb7920b,a52d5aa652910e157d09aa5f6fb7920b","githubUser":"myreaderx16","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"55.4 KB","destSize":"39.4 KB","compressRate":"71%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023685022","sourceStatusCode":200,"destWidth":653,"destHeight":128,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn33@2020_6/2020/08/24/23-08-24-844_33ebdc5c0e4cb893.webp","sourceBytes":64675,"destBytes":10000,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2268,"convertSpendMs":9,"createdTime":"2020-08-25 07:08:23","host":"us-018*","referer":"https://segmentfault.com/a/1190000023685018","linkMd5ListStr":"c6ea63b543bcf14780252f9af45af4e0,c6ea63b543bcf14780252f9af45af4e0","githubUser":"myreaderx21","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"63.2 KB","destSize":"9.8 KB","compressRate":"15.5%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023663455","sourceStatusCode":200,"destWidth":770,"destHeight":494,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn38@2020_4/2020/08/24/23-08-24-961_f11044dd1174001a.webp","sourceBytes":334245,"destBytes":28466,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2337,"convertSpendMs":24,"createdTime":"2020-08-25 07:08:23","host":"us-006*","referer":"https://segmentfault.com/a/1190000023663451","linkMd5ListStr":"aa2132e98ae80a419b6636569f23b0d7,aa2132e98ae80a419b6636569f23b0d7","githubUser":"myreaderx33","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"326.4 KB","destSize":"27.8 KB","compressRate":"8.5%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLdSk","sourceStatusCode":200,"destWidth":800,"destHeight":430,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn34@2020_5/2020/08/24/23-08-25-088_b71f870050272f58.webp","sourceBytes":4675788,"destBytes":1007754,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":7221,"convertSpendMs":2273,"createdTime":"2020-08-25 07:08:20","host":"europe-23*","referer":"https://segmentfault.com/a/1190000023608841","linkMd5ListStr":"06182f917f57c9d9612487bd563c6868,06182f917f57c9d9612487bd563c6868","githubUser":"myreaderx8","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"4.5 MB","destSize":"984.1 KB","compressRate":"21.6%"},{"code":1,"isDone":false,"source":"https://tva1.sinaimg.cn/large/007S8ZIlly1ghu97ntsacj30e00ak3yx.jpg","sourceStatusCode":200,"destWidth":504,"destHeight":380,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx13/cdn77@2020_2/2020/08/24/23-08-28-534_9ec7e1fd07438993.webp","sourceBytes":22894,"destBytes":11026,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":1913,"convertSpendMs":25,"createdTime":"2020-08-25 07:08:27","host":"us-014*","referer":"https://segmentfault.com/a/1190000023668057","linkMd5ListStr":"dcb1ca1d6d9e74559b1305ed3b0d3469","githubUser":"myreaderx13","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"22.4 KB","destSize":"10.8 KB","compressRate":"48.2%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023707767","sourceStatusCode":200,"destWidth":414,"destHeight":273,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn90@2020_5/2020/08/24/23-08-28-638_bfa3d2edabd96c89.webp","sourceBytes":7039,"destBytes":8664,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2084,"convertSpendMs":8,"createdTime":"2020-08-25 07:08:27","host":"us-52*","referer":"https://segmentfault.com/a/1190000023707760","linkMd5ListStr":"0efc7a62efcc894fd0f116660993cd89","githubUser":"myreaderx6","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"6.9 KB","destSize":"8.5 KB","compressRate":"123.1%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023517952","sourceStatusCode":200,"destWidth":399,"destHeight":178,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx25/cdn86@2020_1/2020/08/24/23-08-28-586_d34b134de0d771e7.webp","sourceBytes":8998,"destBytes":4264,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2179,"convertSpendMs":4,"createdTime":"2020-08-25 07:08:27","host":"europe64*","referer":"https://segmentfault.com/a/1190000023651246","linkMd5ListStr":"9a60a00d9e8d732bd6972e94bc783594","githubUser":"myreaderx25","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"8.8 KB","destSize":"4.2 KB","compressRate":"47.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023517944","sourceStatusCode":200,"destWidth":126,"destHeight":121,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn66@2020_6/2020/08/24/23-08-28-682_f7b01d199b4e2d10.webp","sourceBytes":4367,"destBytes":2688,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2042,"convertSpendMs":4,"createdTime":"2020-08-25 07:08:27","host":"us-006*","referer":"https://segmentfault.com/a/1190000023651246","linkMd5ListStr":"9a60a00d9e8d732bd6972e94bc783594","githubUser":"myreaderx15","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"4.3 KB","destSize":"2.6 KB","compressRate":"61.6%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023517950","sourceStatusCode":200,"destWidth":220,"destHeight":220,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn30@2020_3/2020/08/24/23-08-28-488_a496bc91ec0bd42e.webp","sourceBytes":10135,"destBytes":11060,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2196,"convertSpendMs":5,"createdTime":"2020-08-25 07:08:27","host":"europe-60*","referer":"https://segmentfault.com/a/1190000023651246","linkMd5ListStr":"9a60a00d9e8d732bd6972e94bc783594","githubUser":"myreaderx29","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"9.9 KB","destSize":"10.8 KB","compressRate":"109.1%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023707768","sourceStatusCode":200,"destWidth":800,"destHeight":200,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn45@2020_2/2020/08/24/23-08-28-692_d2d8d27bbfe59f0d.webp","sourceBytes":18791,"destBytes":8140,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2047,"convertSpendMs":9,"createdTime":"2020-08-25 07:08:27","host":"us-002*","referer":"https://segmentfault.com/a/1190000023707760","linkMd5ListStr":"0efc7a62efcc894fd0f116660993cd89","githubUser":"myreaderx21","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"18.4 KB","destSize":"7.9 KB","compressRate":"43.3%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLqQQ","sourceStatusCode":200,"destWidth":260,"destHeight":260,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx14/cdn42@2020_3/2020/08/24/23-08-28-490_cccdf6bf3e166584.webp","sourceBytes":33557,"destBytes":11100,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2228,"convertSpendMs":7,"createdTime":"2020-08-25 07:08:27","host":"europe68*","referer":"https://segmentfault.com/a/1190000023660020","linkMd5ListStr":"6a526c91c6f56ccea5eb637c9da38dee","githubUser":"myreaderx14","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"32.8 KB","destSize":"10.8 KB","compressRate":"33.1%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLqT9","sourceStatusCode":200,"destWidth":440,"destHeight":411,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn58@2020_3/2020/08/24/23-08-28-734_c26934c85deabe10.webp","sourceBytes":64753,"destBytes":12336,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2131,"convertSpendMs":22,"createdTime":"2020-08-25 07:08:27","host":"us-010*","referer":"https://segmentfault.com/a/1190000023660020","linkMd5ListStr":"6a526c91c6f56ccea5eb637c9da38dee","githubUser":"myreaderx24","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"63.2 KB","destSize":"12 KB","compressRate":"19.1%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023517953","sourceStatusCode":200,"destWidth":800,"destHeight":739,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn93@2020_4/2020/08/24/23-08-28-689_1ce65c690cf43f47.webp","sourceBytes":62742,"destBytes":34606,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2202,"convertSpendMs":26,"createdTime":"2020-08-25 07:08:27","host":"us-030*","referer":"https://segmentfault.com/a/1190000023651246","linkMd5ListStr":"9a60a00d9e8d732bd6972e94bc783594","githubUser":"myreaderx7","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"61.3 KB","destSize":"33.8 KB","compressRate":"55.2%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023517946","sourceStatusCode":200,"destWidth":286,"destHeight":191,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn81@2020_6/2020/08/24/23-08-28-792_8d547681cad5df9e.webp","sourceBytes":9026,"destBytes":5340,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2126,"convertSpendMs":5,"createdTime":"2020-08-25 07:08:27","host":"us-022*","referer":"https://segmentfault.com/a/1190000023651246","linkMd5ListStr":"9a60a00d9e8d732bd6972e94bc783594","githubUser":"myreaderx18","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"8.8 KB","destSize":"5.2 KB","compressRate":"59.2%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023707763","sourceStatusCode":200,"destWidth":800,"destHeight":239,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn2@2020_4/2020/08/24/23-08-28-672_28796882d7b84489.webp","sourceBytes":77187,"destBytes":26676,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2220,"convertSpendMs":11,"createdTime":"2020-08-25 07:08:27","host":"us-006*","referer":"https://segmentfault.com/a/1190000023707760","linkMd5ListStr":"0efc7a62efcc894fd0f116660993cd89","githubUser":"myreaderx19","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"75.4 KB","destSize":"26.1 KB","compressRate":"34.6%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLbSq","sourceStatusCode":200,"destWidth":800,"destHeight":189,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn46@2020_2/2020/08/24/23-08-28-505_e4ee0051d3ebdd4a.webp","sourceBytes":59342,"destBytes":17262,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2298,"convertSpendMs":11,"createdTime":"2020-08-25 07:08:27","host":"europe-56*","referer":"https://segmentfault.com/a/1190000023601065","linkMd5ListStr":"76c9c6e6cb88560c51a4d8dfd2fa525b","githubUser":"myreaderx8","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"58 KB","destSize":"16.9 KB","compressRate":"29.1%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023602038","sourceStatusCode":200,"destWidth":800,"destHeight":341,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn49@2020_6/2020/08/24/23-08-28-724_8b97a00e92f7b9a5.webp","sourceBytes":32562,"destBytes":32562,"feedId":6615,"totalSpendMs":2155,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:27","host":"us-034*","referer":"https://segmentfault.com/a/1190000023602033","linkMd5ListStr":"a52d5aa652910e157d09aa5f6fb7920b","githubUser":"myreaderx27","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"31.8 KB","destSize":"31.8 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLuVG","sourceStatusCode":200,"destWidth":128,"destHeight":128,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn18@2020_2/2020/08/24/23-08-28-788_0f370e0b14289a17.webp","sourceBytes":11916,"destBytes":3814,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2166,"convertSpendMs":5,"createdTime":"2020-08-25 07:08:27","host":"us-022*","referer":"https://segmentfault.com/a/1190000023660020","linkMd5ListStr":"6a526c91c6f56ccea5eb637c9da38dee","githubUser":"myreaderx12","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"11.6 KB","destSize":"3.7 KB","compressRate":"32%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023707765","sourceStatusCode":200,"destWidth":800,"destHeight":187,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn81@2020_4/2020/08/24/23-08-28-749_fbb1b3d44d3ddb63.webp","sourceBytes":45396,"destBytes":17016,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2178,"convertSpendMs":8,"createdTime":"2020-08-25 07:08:27","host":"us-002*","referer":"https://segmentfault.com/a/1190000023707760","linkMd5ListStr":"0efc7a62efcc894fd0f116660993cd89","githubUser":"myreaderx11","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"44.3 KB","destSize":"16.6 KB","compressRate":"37.5%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023663462","sourceStatusCode":200,"destWidth":800,"destHeight":209,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn10@2020_2/2020/08/24/23-08-28-508_51ef71423df3d477.webp","sourceBytes":100413,"destBytes":16422,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2325,"convertSpendMs":9,"createdTime":"2020-08-25 07:08:27","host":"europe-56*","referer":"https://segmentfault.com/a/1190000023663451","linkMd5ListStr":"aa2132e98ae80a419b6636569f23b0d7","githubUser":"myreaderx10","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"98.1 KB","destSize":"16 KB","compressRate":"16.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023663458","sourceStatusCode":200,"destWidth":800,"destHeight":122,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn65@2020_6/2020/08/24/23-08-28-473_cec3b758d21a710e.webp","sourceBytes":19158,"destBytes":4652,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2351,"convertSpendMs":7,"createdTime":"2020-08-25 07:08:27","host":"europe-60*","referer":"https://segmentfault.com/a/1190000023663451","linkMd5ListStr":"aa2132e98ae80a419b6636569f23b0d7","githubUser":"myreaderx2","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"18.7 KB","destSize":"4.5 KB","compressRate":"24.3%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023517945","sourceStatusCode":200,"destWidth":322,"destHeight":398,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn77@2020_2/2020/08/24/23-08-28-801_26cd4b8b48fcfbad.webp","sourceBytes":53388,"destBytes":35208,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2219,"convertSpendMs":15,"createdTime":"2020-08-25 07:08:27","host":"us-034*","referer":"https://segmentfault.com/a/1190000023651246","linkMd5ListStr":"9a60a00d9e8d732bd6972e94bc783594","githubUser":"myreaderx2","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"52.1 KB","destSize":"34.4 KB","compressRate":"65.9%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023517949","sourceStatusCode":200,"destWidth":570,"destHeight":286,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn74@2020_1/2020/08/24/23-08-28-748_386e2ac4d66c0eef.webp","sourceBytes":31443,"destBytes":16836,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2224,"convertSpendMs":24,"createdTime":"2020-08-25 07:08:27","host":"us-026*","referer":"https://segmentfault.com/a/1190000023651246","linkMd5ListStr":"9a60a00d9e8d732bd6972e94bc783594","githubUser":"myreaderx4","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"30.7 KB","destSize":"16.4 KB","compressRate":"53.5%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023707766","sourceStatusCode":200,"destWidth":800,"destHeight":189,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn98@2020_5/2020/08/24/23-08-28-778_597d7f470508ef42.webp","sourceBytes":57451,"destBytes":19844,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2312,"convertSpendMs":9,"createdTime":"2020-08-25 07:08:27","host":"us-018*","referer":"https://segmentfault.com/a/1190000023707760","linkMd5ListStr":"0efc7a62efcc894fd0f116660993cd89","githubUser":"myreaderx31","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"56.1 KB","destSize":"19.4 KB","compressRate":"34.5%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023663467","sourceStatusCode":200,"destWidth":800,"destHeight":341,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn26@2020_3/2020/08/24/23-08-28-656_c96df5d663364d77.webp","sourceBytes":5715,"destBytes":1542,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2381,"convertSpendMs":10,"createdTime":"2020-08-25 07:08:27","host":"europe-23*","referer":"https://segmentfault.com/a/1190000023663451","linkMd5ListStr":"aa2132e98ae80a419b6636569f23b0d7","githubUser":"myreaderx1","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"5.6 KB","destSize":"1.5 KB","compressRate":"27%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023663463","sourceStatusCode":200,"destWidth":800,"destHeight":493,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn6@2020_2/2020/08/24/23-08-28-516_a78bd2cd84532ab6.webp","sourceBytes":103745,"destBytes":14470,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2396,"convertSpendMs":18,"createdTime":"2020-08-25 07:08:27","host":"europe68*","referer":"https://segmentfault.com/a/1190000023663451","linkMd5ListStr":"aa2132e98ae80a419b6636569f23b0d7","githubUser":"myreaderx3","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"101.3 KB","destSize":"14.1 KB","compressRate":"13.9%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023685021","sourceStatusCode":200,"destWidth":586,"destHeight":196,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn86@2020_1/2020/08/24/23-08-28-842_9dd4a1623c27860b.webp","sourceBytes":63589,"destBytes":11006,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2247,"convertSpendMs":96,"createdTime":"2020-08-25 07:08:27","host":"us-010*","referer":"https://segmentfault.com/a/1190000023685018","linkMd5ListStr":"c6ea63b543bcf14780252f9af45af4e0","githubUser":"myreaderx4","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"62.1 KB","destSize":"10.7 KB","compressRate":"17.3%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023517948","sourceStatusCode":200,"destWidth":137,"destHeight":136,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn74@2020_1/2020/08/24/23-08-28-514_112237e2027b570b.webp","sourceBytes":5686,"destBytes":3628,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2400,"convertSpendMs":3,"createdTime":"2020-08-25 07:08:27","host":"europe-56*","referer":"https://segmentfault.com/a/1190000023651246","linkMd5ListStr":"9a60a00d9e8d732bd6972e94bc783594","githubUser":"myreaderx30","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"5.6 KB","destSize":"3.5 KB","compressRate":"63.8%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023602037","sourceStatusCode":200,"destWidth":800,"destHeight":417,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn54@2020_3/2020/08/24/23-08-28-794_86f6da9014919043.webp","sourceBytes":28296,"destBytes":28296,"feedId":6615,"totalSpendMs":2296,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:27","host":"us-022*","referer":"https://segmentfault.com/a/1190000023602033","linkMd5ListStr":"a52d5aa652910e157d09aa5f6fb7920b","githubUser":"myreaderx15","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"27.6 KB","destSize":"27.6 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023663459","sourceStatusCode":200,"destWidth":800,"destHeight":445,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn62@2020_5/2020/08/24/23-08-28-683_06ae40cf5655a06c.webp","sourceBytes":84398,"destBytes":12306,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2461,"convertSpendMs":15,"createdTime":"2020-08-25 07:08:27","host":"europe-23*","referer":"https://segmentfault.com/a/1190000023663451","linkMd5ListStr":"aa2132e98ae80a419b6636569f23b0d7","githubUser":"myreaderx30","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"82.4 KB","destSize":"12 KB","compressRate":"14.6%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023517951","sourceStatusCode":200,"destWidth":214,"destHeight":250,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn42@2020_6/2020/08/24/23-08-28-736_f4da94180b1b7f17.webp","sourceBytes":11102,"destBytes":7952,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2314,"convertSpendMs":10,"createdTime":"2020-08-25 07:08:27","host":"us-014*","referer":"https://segmentfault.com/a/1190000023651246","linkMd5ListStr":"9a60a00d9e8d732bd6972e94bc783594","githubUser":"myreaderx16","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"10.8 KB","destSize":"7.8 KB","compressRate":"71.6%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023663461","sourceStatusCode":200,"destWidth":782,"destHeight":374,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx/cdn14@2020_5/2020/08/24/23-08-28-862_28c5749083b296c8.webp","sourceBytes":72680,"destBytes":12298,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2309,"convertSpendMs":19,"createdTime":"2020-08-25 07:08:27","host":"us-034*","referer":"https://segmentfault.com/a/1190000023663451","linkMd5ListStr":"aa2132e98ae80a419b6636569f23b0d7","githubUser":"myreaderx","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"71 KB","destSize":"12 KB","compressRate":"16.9%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023663464","sourceStatusCode":200,"destWidth":800,"destHeight":324,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx14/cdn54@2020_6/2020/08/24/23-08-28-853_f70d6764a3ae6436.webp","sourceBytes":103720,"destBytes":15582,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2309,"convertSpendMs":25,"createdTime":"2020-08-25 07:08:27","host":"us-52*","referer":"https://segmentfault.com/a/1190000023663451","linkMd5ListStr":"aa2132e98ae80a419b6636569f23b0d7","githubUser":"myreaderx14","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"101.3 KB","destSize":"15.2 KB","compressRate":"15%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023707769","sourceStatusCode":200,"destWidth":600,"destHeight":320,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn33@2020_5/2020/08/24/23-08-28-835_72ecbead9d15c7c3.webp","sourceBytes":31286,"destBytes":31286,"feedId":6615,"totalSpendMs":2331,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:27","host":"us-038*","referer":"https://segmentfault.com/a/1190000023707760","linkMd5ListStr":"0efc7a62efcc894fd0f116660993cd89","githubUser":"myreaderx22","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"30.6 KB","destSize":"30.6 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023517947","sourceStatusCode":200,"destWidth":302,"destHeight":203,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn70@2020_2/2020/08/24/23-08-28-578_118080821669f072.webp","sourceBytes":24086,"destBytes":15360,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2486,"convertSpendMs":7,"createdTime":"2020-08-25 07:08:27","host":"europe68*","referer":"https://segmentfault.com/a/1190000023651246","linkMd5ListStr":"9a60a00d9e8d732bd6972e94bc783594","githubUser":"myreaderx24","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"23.5 KB","destSize":"15 KB","compressRate":"63.8%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023517943","sourceStatusCode":200,"destWidth":323,"destHeight":700,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn61@2020_6/2020/08/24/23-08-28-873_ce700e4c9aab44af.webp","sourceBytes":67208,"destBytes":67208,"feedId":6615,"totalSpendMs":2371,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:27","host":"us-018*","referer":"https://segmentfault.com/a/1190000023651246","linkMd5ListStr":"9a60a00d9e8d732bd6972e94bc783594","githubUser":"myreaderx27","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"65.6 KB","destSize":"65.6 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023663460","sourceStatusCode":200,"destWidth":800,"destHeight":577,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx32/cdn21@2020_2/2020/08/24/23-08-28-891_e2bd700b6524c208.webp","sourceBytes":193645,"destBytes":27538,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2384,"convertSpendMs":40,"createdTime":"2020-08-25 07:08:27","host":"us-010*","referer":"https://segmentfault.com/a/1190000023663451","linkMd5ListStr":"aa2132e98ae80a419b6636569f23b0d7","githubUser":"myreaderx32","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"189.1 KB","destSize":"26.9 KB","compressRate":"14.2%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023663465","sourceStatusCode":200,"destWidth":800,"destHeight":502,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn50@2020_4/2020/08/24/23-08-28-553_0db805f790b2fe3b.webp","sourceBytes":477299,"destBytes":69028,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2575,"convertSpendMs":27,"createdTime":"2020-08-25 07:08:27","host":"europe64*","referer":"https://segmentfault.com/a/1190000023663451","linkMd5ListStr":"aa2132e98ae80a419b6636569f23b0d7","githubUser":"myreaderx33","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"466.1 KB","destSize":"67.4 KB","compressRate":"14.5%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023663457","sourceStatusCode":200,"destWidth":800,"destHeight":453,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn69@2020_6/2020/08/24/23-08-29-241_e461d9020d0ef79a.webp","sourceBytes":121806,"destBytes":19024,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2383,"convertSpendMs":21,"createdTime":"2020-08-25 07:08:27","host":"us-038*","referer":"https://segmentfault.com/a/1190000023663451","linkMd5ListStr":"aa2132e98ae80a419b6636569f23b0d7","githubUser":"myreaderx18","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"119 KB","destSize":"18.6 KB","compressRate":"15.6%"},{"code":1,"isDone":false,"source":"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/9.png","sourceStatusCode":200,"destWidth":801,"destHeight":623,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn82@2020_6/2020/08/24/23-08-29-965_b89ab3d0fde9ac24.webp","sourceBytes":36232,"destBytes":36232,"feedId":6615,"totalSpendMs":1109,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:29","host":"us-52*","referer":"https://segmentfault.com/a/1190000022332809","linkMd5ListStr":"cb41ea759b4fff7fa2c9b843d9a3559f","githubUser":"myreaderx24","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"35.4 KB","destSize":"35.4 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://tva1.sinaimg.cn/large/007S8ZIlly1ghu983qeo1j30vj0kkjsj.jpg","sourceStatusCode":200,"destWidth":1135,"destHeight":740,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn45@2020_3/2020/08/24/23-08-30-738_7fa453e24c96970a.webp","sourceBytes":82088,"destBytes":33760,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":1919,"convertSpendMs":24,"createdTime":"2020-08-25 07:08:29","host":"us-022*","referer":"https://segmentfault.com/a/1190000023668057","linkMd5ListStr":"dcb1ca1d6d9e74559b1305ed3b0d3469","githubUser":"myreaderx22","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"80.2 KB","destSize":"33 KB","compressRate":"41.1%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023685024","sourceStatusCode":200,"destWidth":392,"destHeight":204,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn93@2020_6/2020/08/24/23-08-30-679_209c5d3f7df6d78a.webp","sourceBytes":61317,"destBytes":9948,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2218,"convertSpendMs":7,"createdTime":"2020-08-25 07:08:29","host":"europe-60*","referer":"https://segmentfault.com/a/1190000023685018","linkMd5ListStr":"c6ea63b543bcf14780252f9af45af4e0","githubUser":"myreaderx11","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"59.9 KB","destSize":"9.7 KB","compressRate":"16.2%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023676551","sourceStatusCode":200,"destWidth":607,"destHeight":261,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn14@2020_5/2020/08/24/23-08-30-685_b578e1f4a1bcc92e.webp","sourceBytes":31360,"destBytes":12686,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2169,"convertSpendMs":8,"createdTime":"2020-08-25 07:08:29","host":"europe64*","referer":"https://segmentfault.com/a/1190000023676547","linkMd5ListStr":"c737187f4a9de041a952fc2de76447f5","githubUser":"myreaderx19","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"30.6 KB","destSize":"12.4 KB","compressRate":"40.5%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023676554","sourceStatusCode":200,"destWidth":600,"destHeight":331,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn30@2020_5/2020/08/24/23-08-30-953_c58330355fbc3305.webp","sourceBytes":42592,"destBytes":11056,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2100,"convertSpendMs":10,"createdTime":"2020-08-25 07:08:29","host":"us-006*","referer":"https://segmentfault.com/a/1190000023676547","linkMd5ListStr":"c737187f4a9de041a952fc2de76447f5","githubUser":"myreaderx12","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"41.6 KB","destSize":"10.8 KB","compressRate":"26%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023676557","sourceStatusCode":200,"destWidth":800,"destHeight":424,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn18@2020_6/2020/08/24/23-08-30-898_7f8fc8b01d6f5da7.webp","sourceBytes":30087,"destBytes":23132,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2124,"convertSpendMs":33,"createdTime":"2020-08-25 07:08:29","host":"us-52*","referer":"https://segmentfault.com/a/1190000023676547","linkMd5ListStr":"c737187f4a9de041a952fc2de76447f5","githubUser":"myreaderx3","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"29.4 KB","destSize":"22.6 KB","compressRate":"76.9%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023685023","sourceStatusCode":200,"destWidth":549,"destHeight":221,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx13/cdn89@2020_6/2020/08/24/23-08-30-573_1334f2d2165df788.webp","sourceBytes":81450,"destBytes":13232,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2437,"convertSpendMs":9,"createdTime":"2020-08-25 07:08:29","host":"europe-23*","referer":"https://segmentfault.com/a/1190000023685018","linkMd5ListStr":"c6ea63b543bcf14780252f9af45af4e0","githubUser":"myreaderx13","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"79.5 KB","destSize":"12.9 KB","compressRate":"16.2%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023676553","sourceStatusCode":200,"destWidth":800,"destHeight":402,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn6@2020_5/2020/08/24/23-08-30-950_7610edbe97df9755.webp","sourceBytes":60643,"destBytes":15568,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2257,"convertSpendMs":32,"createdTime":"2020-08-25 07:08:29","host":"us-014*","referer":"https://segmentfault.com/a/1190000023676547","linkMd5ListStr":"c737187f4a9de041a952fc2de76447f5","githubUser":"myreaderx31","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"59.2 KB","destSize":"15.2 KB","compressRate":"25.7%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023676556","sourceStatusCode":200,"destWidth":800,"destHeight":171,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn22@2020_1/2020/08/24/23-08-30-886_927b33d1efd81a57.webp","sourceBytes":29836,"destBytes":7438,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2206,"convertSpendMs":8,"createdTime":"2020-08-25 07:08:29","host":"us-030*","referer":"https://segmentfault.com/a/1190000023676547","linkMd5ListStr":"c737187f4a9de041a952fc2de76447f5","githubUser":"myreaderx10","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"29.1 KB","destSize":"7.3 KB","compressRate":"24.9%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLdSN","sourceStatusCode":200,"destWidth":800,"destHeight":429,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn73@2020_6/2020/08/24/23-08-30-993_8783d0846c619bb6.webp","sourceBytes":7960,"destBytes":7960,"feedId":6615,"totalSpendMs":2093,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:29","host":"us-002*","referer":"https://segmentfault.com/a/1190000023608841","linkMd5ListStr":"06182f917f57c9d9612487bd563c6868","githubUser":"myreaderx27","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"7.8 KB","destSize":"7.8 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023663468","sourceStatusCode":200,"destWidth":800,"destHeight":343,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx32/cdn33@2020_5/2020/08/24/23-08-30-799_c54b3b3ab9067f97.webp","sourceBytes":93558,"destBytes":13546,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2301,"convertSpendMs":19,"createdTime":"2020-08-25 07:08:29","host":"europe68*","referer":"https://segmentfault.com/a/1190000023663451","linkMd5ListStr":"aa2132e98ae80a419b6636569f23b0d7","githubUser":"myreaderx32","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"91.4 KB","destSize":"13.2 KB","compressRate":"14.5%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023676552","sourceStatusCode":200,"destWidth":800,"destHeight":323,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn10@2020_2/2020/08/24/23-08-30-890_4c734adeed2c35c9.webp","sourceBytes":53162,"destBytes":41816,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2342,"convertSpendMs":14,"createdTime":"2020-08-25 07:08:29","host":"us-002*","referer":"https://segmentfault.com/a/1190000023676547","linkMd5ListStr":"c737187f4a9de041a952fc2de76447f5","githubUser":"myreaderx5oss","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"51.9 KB","destSize":"40.8 KB","compressRate":"78.7%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023650525","sourceStatusCode":200,"destWidth":800,"destHeight":362,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn57@2020_2/2020/08/24/23-08-30-874_b28db8e72475b886.webp","sourceBytes":63873,"destBytes":24086,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2277,"convertSpendMs":19,"createdTime":"2020-08-25 07:08:29","host":"europe-60*","referer":"https://segmentfault.com/a/1190000023650518","linkMd5ListStr":"569e2336cd79bc25ac4f434bfa5337fb","githubUser":"myreaderx21","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"62.4 KB","destSize":"23.5 KB","compressRate":"37.7%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023650528","sourceStatusCode":200,"destWidth":626,"destHeight":484,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn78@2020_4/2020/08/24/23-08-30-890_0a757f6a41f5f311.webp","sourceBytes":47366,"destBytes":19230,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2246,"convertSpendMs":11,"createdTime":"2020-08-25 07:08:29","host":"europe64*","referer":"https://segmentfault.com/a/1190000023650518","linkMd5ListStr":"569e2336cd79bc25ac4f434bfa5337fb","githubUser":"myreaderx15","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"46.3 KB","destSize":"18.8 KB","compressRate":"40.6%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLdSL","sourceStatusCode":200,"destWidth":800,"destHeight":444,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn62@2020_4/2020/08/24/23-08-31-078_6038012b8d24d65d.webp","sourceBytes":28266,"destBytes":28266,"feedId":6615,"totalSpendMs":2132,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:29","host":"us-038*","referer":"https://segmentfault.com/a/1190000023608841","linkMd5ListStr":"06182f917f57c9d9612487bd563c6868","githubUser":"myreaderx33","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"27.6 KB","destSize":"27.6 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://tva1.sinaimg.cn/large/007S8ZIlly1ghu973myg2j3073073q3c.jpg","sourceStatusCode":200,"destWidth":255,"destHeight":255,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn38@2020_2/2020/08/24/23-08-31-068_4b19e03c9a05d1ad.webp","sourceBytes":12990,"destBytes":8998,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2368,"convertSpendMs":5,"createdTime":"2020-08-25 07:08:29","host":"europe-56*","referer":"https://segmentfault.com/a/1190000023668057","linkMd5ListStr":"dcb1ca1d6d9e74559b1305ed3b0d3469","githubUser":"myreaderx1","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"12.7 KB","destSize":"8.8 KB","compressRate":"69.3%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLdLG","sourceStatusCode":200,"destWidth":400,"destHeight":254,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn18@2020_2/2020/08/24/23-08-31-035_63b0ce2dc1f9a19f.webp","sourceBytes":45480,"destBytes":9076,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2175,"convertSpendMs":8,"createdTime":"2020-08-25 07:08:29","host":"europe-23*","referer":"https://segmentfault.com/a/1190000023608432","linkMd5ListStr":"749b88d16e8263f6e6691f06881f8209","githubUser":"myreaderx31","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"44.4 KB","destSize":"8.9 KB","compressRate":"20%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023676555","sourceStatusCode":200,"destWidth":800,"destHeight":466,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx/cdn26@2020_5/2020/08/24/23-08-31-078_44b46b0331cb728c.webp","sourceBytes":27752,"destBytes":6404,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2302,"convertSpendMs":13,"createdTime":"2020-08-25 07:08:29","host":"us-018*","referer":"https://segmentfault.com/a/1190000023676547","linkMd5ListStr":"c737187f4a9de041a952fc2de76447f5","githubUser":"myreaderx","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"27.1 KB","destSize":"6.3 KB","compressRate":"23.1%"},{"code":1,"isDone":false,"source":"https://tva1.sinaimg.cn/large/007S8ZIlly1ghu975kcouj30ny0c074q.jpg","sourceStatusCode":200,"destWidth":862,"destHeight":432,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn54@2020_5/2020/08/24/23-08-30-913_c03142b1c5b40ef9.webp","sourceBytes":37118,"destBytes":16870,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2387,"convertSpendMs":12,"createdTime":"2020-08-25 07:08:29","host":"europe-23*","referer":"https://segmentfault.com/a/1190000023668057","linkMd5ListStr":"dcb1ca1d6d9e74559b1305ed3b0d3469","githubUser":"myreaderx16","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"36.2 KB","destSize":"16.5 KB","compressRate":"45.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023650529","sourceStatusCode":200,"destWidth":800,"destHeight":368,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn98@2020_2/2020/08/24/23-08-30-948_d37fcf9ccf470a5a.webp","sourceBytes":72924,"destBytes":28666,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2273,"convertSpendMs":16,"createdTime":"2020-08-25 07:08:29","host":"europe68*","referer":"https://segmentfault.com/a/1190000023650518","linkMd5ListStr":"569e2336cd79bc25ac4f434bfa5337fb","githubUser":"myreaderx4","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"71.2 KB","destSize":"28 KB","compressRate":"39.3%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023696740","sourceStatusCode":200,"destWidth":800,"destHeight":355,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx23/cdn50@2020_4/2020/08/24/23-08-31-193_c69cd228aa5900d5.webp","sourceBytes":147292,"destBytes":25430,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2357,"convertSpendMs":142,"createdTime":"2020-08-25 07:08:29","host":"us-010*","referer":"https://segmentfault.com/a/1190000023696737","linkMd5ListStr":"6077149de366230a75fc5ccb09f8bad7","githubUser":"myreaderx23","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"143.8 KB","destSize":"24.8 KB","compressRate":"17.3%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023650521","sourceStatusCode":200,"destWidth":800,"destHeight":300,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn86@2020_6/2020/08/24/23-08-31-209_90d83c08e9ab7de3.webp","sourceBytes":40458,"destBytes":20392,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2155,"convertSpendMs":11,"createdTime":"2020-08-25 07:08:29","host":"us-030*","referer":"https://segmentfault.com/a/1190000023650518","linkMd5ListStr":"569e2336cd79bc25ac4f434bfa5337fb","githubUser":"myreaderx30","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"39.5 KB","destSize":"19.9 KB","compressRate":"50.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023465591","sourceStatusCode":200,"destWidth":800,"destHeight":558,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn42@2020_4/2020/08/24/23-08-31-138_5d24db7b7f08f9c8.webp","sourceBytes":138902,"destBytes":58510,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2384,"convertSpendMs":23,"createdTime":"2020-08-25 07:08:29","host":"us-034*","referer":"https://segmentfault.com/a/1190000023657729","linkMd5ListStr":"9569faa8acc0e079a1c10828ff9a417e","githubUser":"myreaderx29","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"135.6 KB","destSize":"57.1 KB","compressRate":"42.1%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023650527","sourceStatusCode":200,"destWidth":800,"destHeight":260,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn70@2020_2/2020/08/24/23-08-31-206_51bb2ad6d7647e06.webp","sourceBytes":33118,"destBytes":15932,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2230,"convertSpendMs":43,"createdTime":"2020-08-25 07:08:29","host":"us-014*","referer":"https://segmentfault.com/a/1190000023650518","linkMd5ListStr":"569e2336cd79bc25ac4f434bfa5337fb","githubUser":"myreaderx8","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"32.3 KB","destSize":"15.6 KB","compressRate":"48.1%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023650524","sourceStatusCode":200,"destWidth":800,"destHeight":331,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn93@2020_1/2020/08/24/23-08-31-248_82a398d90f8d4d67.webp","sourceBytes":47397,"destBytes":18976,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2178,"convertSpendMs":12,"createdTime":"2020-08-25 07:08:29","host":"us-006*","referer":"https://segmentfault.com/a/1190000023650518","linkMd5ListStr":"569e2336cd79bc25ac4f434bfa5337fb","githubUser":"myreaderx18","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"46.3 KB","destSize":"18.5 KB","compressRate":"40%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023663454","sourceStatusCode":200,"destWidth":800,"destHeight":391,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn1@2020_2/2020/08/24/23-08-31-134_9fa46c777ab520a1.webp","sourceBytes":153478,"destBytes":25050,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2497,"convertSpendMs":55,"createdTime":"2020-08-25 07:08:29","host":"us-026*","referer":"https://segmentfault.com/a/1190000023663451","linkMd5ListStr":"aa2132e98ae80a419b6636569f23b0d7","githubUser":"myreaderx7","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"149.9 KB","destSize":"24.5 KB","compressRate":"16.3%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023650523","sourceStatusCode":200,"destWidth":800,"destHeight":349,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn89@2020_5/2020/08/24/23-08-31-279_e99c09a9a60e22c5.webp","sourceBytes":33615,"destBytes":16312,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2247,"convertSpendMs":11,"createdTime":"2020-08-25 07:08:29","host":"us-018*","referer":"https://segmentfault.com/a/1190000023650518","linkMd5ListStr":"569e2336cd79bc25ac4f434bfa5337fb","githubUser":"myreaderx2","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"32.8 KB","destSize":"15.9 KB","compressRate":"48.5%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbKY8G","sourceStatusCode":200,"destWidth":800,"destHeight":609,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn1@2020_1/2020/08/24/23-08-31-021_13b83779e9282377.webp","sourceBytes":202175,"destBytes":34456,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2396,"convertSpendMs":26,"createdTime":"2020-08-25 07:08:29","host":"europe-56*","referer":"https://segmentfault.com/a/1190000023552474","linkMd5ListStr":"518d797df1c7c9d30e2acaaec433d26b","githubUser":"myreaderx11","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"197.4 KB","destSize":"33.6 KB","compressRate":"17%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLdL2","sourceStatusCode":200,"destWidth":800,"destHeight":391,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn13@2020_3/2020/08/24/23-08-31-249_cae8c8909f921d73.webp","sourceBytes":17678,"destBytes":17678,"feedId":6615,"totalSpendMs":2196,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:29","host":"us-010*","referer":"https://segmentfault.com/a/1190000023608432","linkMd5ListStr":"749b88d16e8263f6e6691f06881f8209","githubUser":"myreaderx7","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"17.3 KB","destSize":"17.3 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLdLF","sourceStatusCode":200,"destWidth":640,"destHeight":451,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn22@2020_1/2020/08/24/23-08-31-096_8bc295045278e761.webp","sourceBytes":274886,"destBytes":37010,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2335,"convertSpendMs":23,"createdTime":"2020-08-25 07:08:29","host":"europe-60*","referer":"https://segmentfault.com/a/1190000023608432","linkMd5ListStr":"749b88d16e8263f6e6691f06881f8209","githubUser":"myreaderx5oss","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"268.4 KB","destSize":"36.1 KB","compressRate":"13.5%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLdLI","sourceStatusCode":200,"destWidth":602,"destHeight":301,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn26@2020_2/2020/08/24/23-08-31-464_32e3bd917b7c4cb4.webp","sourceBytes":7240,"destBytes":7240,"feedId":6615,"totalSpendMs":2044,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:30","host":"us-038*","referer":"https://segmentfault.com/a/1190000023608432","linkMd5ListStr":"749b88d16e8263f6e6691f06881f8209","githubUser":"myreaderx19","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"7.1 KB","destSize":"7.1 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbKY8I","sourceStatusCode":200,"destWidth":800,"destHeight":632,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn10@2020_5/2020/08/24/23-08-31-367_4e367cfe16dd2bc7.webp","sourceBytes":130383,"destBytes":22982,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2363,"convertSpendMs":27,"createdTime":"2020-08-25 07:08:29","host":"us-022*","referer":"https://segmentfault.com/a/1190000023552474","linkMd5ListStr":"518d797df1c7c9d30e2acaaec433d26b","githubUser":"myreaderx6","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"127.3 KB","destSize":"22.4 KB","compressRate":"17.6%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbKY8H","sourceStatusCode":200,"destWidth":800,"destHeight":669,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx25/cdn6@2020_2/2020/08/24/23-08-31-343_f69c4c9c378440c7.webp","sourceBytes":250991,"destBytes":49972,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2481,"convertSpendMs":34,"createdTime":"2020-08-25 07:08:29","host":"us-034*","referer":"https://segmentfault.com/a/1190000023552474","linkMd5ListStr":"518d797df1c7c9d30e2acaaec433d26b","githubUser":"myreaderx25","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"245.1 KB","destSize":"48.8 KB","compressRate":"19.9%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023650526","sourceStatusCode":200,"destWidth":800,"destHeight":585,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx14/cdn66@2020_4/2020/08/24/23-08-31-671_9a1dabc2dfac2a2e.webp","sourceBytes":98601,"destBytes":44296,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2878,"convertSpendMs":42,"createdTime":"2020-08-25 07:08:29","host":"us-026*","referer":"https://segmentfault.com/a/1190000023650518","linkMd5ListStr":"569e2336cd79bc25ac4f434bfa5337fb","githubUser":"myreaderx14","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"96.3 KB","destSize":"43.3 KB","compressRate":"44.9%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023663456","sourceStatusCode":200,"destWidth":800,"destHeight":155,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx25/cdn98@2020_2/2020/08/24/23-08-32-493_66d56292ccba60f9.webp","sourceBytes":43365,"destBytes":7268,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3681,"convertSpendMs":13,"createdTime":"2020-08-25 07:08:29","host":"us-038*","referer":"https://segmentfault.com/a/1190000023663451","linkMd5ListStr":"aa2132e98ae80a419b6636569f23b0d7","githubUser":"myreaderx25","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"42.3 KB","destSize":"7.1 KB","compressRate":"16.8%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLqNT","sourceStatusCode":200,"destWidth":240,"destHeight":240,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn58@2020_5/2020/08/24/23-08-32-542_96997f4a7107446a.webp","sourceBytes":74255,"destBytes":13622,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2147,"convertSpendMs":9,"createdTime":"2020-08-25 07:08:31","host":"us-030*","referer":"https://segmentfault.com/a/1190000023660020","linkMd5ListStr":"6a526c91c6f56ccea5eb637c9da38dee","githubUser":"myreaderx8","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"72.5 KB","destSize":"13.3 KB","compressRate":"18.3%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLdLH","sourceStatusCode":200,"destWidth":641,"destHeight":356,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn30@2020_3/2020/08/24/23-08-32-395_1f1e125dfeab6f55.webp","sourceBytes":20688,"destBytes":20688,"feedId":6615,"totalSpendMs":2288,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:31","host":"us-026*","referer":"https://segmentfault.com/a/1190000023608432","linkMd5ListStr":"749b88d16e8263f6e6691f06881f8209","githubUser":"myreaderx3","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"20.2 KB","destSize":"20.2 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023663466","sourceStatusCode":200,"destWidth":800,"destHeight":514,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx23/cdn38@2020_2/2020/08/24/23-08-32-798_eb0a0c56eee8bbb0.webp","sourceBytes":479398,"destBytes":70208,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2493,"convertSpendMs":61,"createdTime":"2020-08-25 07:08:31","host":"us-026*","referer":"https://segmentfault.com/a/1190000023663451","linkMd5ListStr":"aa2132e98ae80a419b6636569f23b0d7","githubUser":"myreaderx23","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"468.2 KB","destSize":"68.6 KB","compressRate":"14.6%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLdLW","sourceStatusCode":200,"destWidth":800,"destHeight":279,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn42@2020_2/2020/08/24/23-08-32-865_bc2956f96c8c82ca.webp","sourceBytes":41062,"destBytes":4498,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2056,"convertSpendMs":12,"createdTime":"2020-08-25 07:08:31","host":"europe64*","referer":"https://segmentfault.com/a/1190000023608432","linkMd5ListStr":"749b88d16e8263f6e6691f06881f8209","githubUser":"myreaderx12","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"40.1 KB","destSize":"4.4 KB","compressRate":"11%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLdLJ","sourceStatusCode":200,"destWidth":769,"destHeight":541,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx/cdn38@2020_1/2020/08/24/23-08-33-099_547588ad0b88b0f6.webp","sourceBytes":20354,"destBytes":20354,"feedId":6615,"totalSpendMs":2110,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:31","host":"us-002*","referer":"https://segmentfault.com/a/1190000023608432","linkMd5ListStr":"749b88d16e8263f6e6691f06881f8209","githubUser":"myreaderx","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"19.9 KB","destSize":"19.9 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023709794","sourceStatusCode":200,"destWidth":505,"destHeight":93,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn57@2020_2/2020/08/24/23-08-33-158_ea591013ed81ca92.webp","sourceBytes":5380,"destBytes":4220,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2091,"convertSpendMs":4,"createdTime":"2020-08-25 07:08:31","host":"us-006*","referer":"https://segmentfault.com/a/1190000023709787","linkMd5ListStr":"ac9425a1dc212f5c19afed90d55afc0d","githubUser":"myreaderx22","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"5.3 KB","destSize":"4.1 KB","compressRate":"78.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023709791","sourceStatusCode":200,"destWidth":723,"destHeight":390,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx23/cdn62@2020_2/2020/08/24/23-08-33-065_aca834d1f78506e1.webp","sourceBytes":11065,"destBytes":13956,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2263,"convertSpendMs":10,"createdTime":"2020-08-25 07:08:31","host":"europe68*","referer":"https://segmentfault.com/a/1190000023709787","linkMd5ListStr":"ac9425a1dc212f5c19afed90d55afc0d","githubUser":"myreaderx23","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"10.8 KB","destSize":"13.6 KB","compressRate":"126.1%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023709798","sourceStatusCode":200,"destWidth":491,"destHeight":352,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn85@2020_2/2020/08/24/23-08-33-136_31a2ac49b076af15.webp","sourceBytes":23536,"destBytes":11680,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2170,"convertSpendMs":10,"createdTime":"2020-08-25 07:08:31","host":"europe-60*","referer":"https://segmentfault.com/a/1190000023709787","linkMd5ListStr":"ac9425a1dc212f5c19afed90d55afc0d","githubUser":"myreaderx27","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"23 KB","destSize":"11.4 KB","compressRate":"49.6%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023709795","sourceStatusCode":200,"destWidth":746,"destHeight":60,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn90@2020_4/2020/08/24/23-08-33-301_d3cdfa771a80fd89.webp","sourceBytes":2598,"destBytes":1810,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2135,"convertSpendMs":6,"createdTime":"2020-08-25 07:08:31","host":"us-038*","referer":"https://segmentfault.com/a/1190000023709787","linkMd5ListStr":"ac9425a1dc212f5c19afed90d55afc0d","githubUser":"myreaderx15","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"2.5 KB","destSize":"1.8 KB","compressRate":"69.7%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023709793","sourceStatusCode":200,"destWidth":701,"destHeight":372,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn54@2020_1/2020/08/24/23-08-33-326_296fe34c1d67332e.webp","sourceBytes":9988,"destBytes":13040,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2228,"convertSpendMs":10,"createdTime":"2020-08-25 07:08:31","host":"us-018*","referer":"https://segmentfault.com/a/1190000023709787","linkMd5ListStr":"ac9425a1dc212f5c19afed90d55afc0d","githubUser":"myreaderx29","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"9.8 KB","destSize":"12.7 KB","compressRate":"130.6%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023709790","sourceStatusCode":200,"destWidth":723,"destHeight":397,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn66@2020_1/2020/08/24/23-08-33-212_466a91e430815709.webp","sourceBytes":8035,"destBytes":8858,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2346,"convertSpendMs":8,"createdTime":"2020-08-25 07:08:31","host":"europe-56*","referer":"https://segmentfault.com/a/1190000023709787","linkMd5ListStr":"ac9425a1dc212f5c19afed90d55afc0d","githubUser":"myreaderx16","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"7.8 KB","destSize":"8.7 KB","compressRate":"110.2%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLdLP","sourceStatusCode":200,"destWidth":800,"destHeight":411,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn50@2020_6/2020/08/24/23-08-33-234_a531250d12d5cd21.webp","sourceBytes":56736,"destBytes":56736,"feedId":6615,"totalSpendMs":2314,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:31","host":"us-030*","referer":"https://segmentfault.com/a/1190000023608432","linkMd5ListStr":"749b88d16e8263f6e6691f06881f8209","githubUser":"myreaderx1","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"55.4 KB","destSize":"55.4 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023735010","sourceStatusCode":200,"destWidth":800,"destHeight":318,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn30@2020_2/2020/08/24/23-08-33-394_30a2866aebb9679b.webp","sourceBytes":39207,"destBytes":6632,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2120,"convertSpendMs":12,"createdTime":"2020-08-25 07:08:32","host":"europe-56*","referer":"https://segmentfault.com/a/1190000023735006","linkMd5ListStr":"83e2007305092901a28598ddbadd1356","githubUser":"myreaderx31","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"38.3 KB","destSize":"6.5 KB","compressRate":"16.9%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023737675","sourceStatusCode":200,"destWidth":748,"destHeight":606,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn6@2020_5/2020/08/24/23-08-33-208_54794e46f067943b.webp","sourceBytes":26493,"destBytes":12966,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2233,"convertSpendMs":13,"createdTime":"2020-08-25 07:08:32","host":"europe64*","referer":"https://segmentfault.com/a/1190000023737670","linkMd5ListStr":"f6d9b255d764f38d4cfc647c5d61450c","githubUser":"myreaderx4","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"25.9 KB","destSize":"12.7 KB","compressRate":"48.9%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLk9V","sourceStatusCode":200,"destWidth":800,"destHeight":304,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx32/cdn45@2020_5/2020/08/24/23-08-33-349_7f210afa164eab9c.webp","sourceBytes":41294,"destBytes":19346,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2455,"convertSpendMs":14,"createdTime":"2020-08-25 07:08:31","host":"us-52*","referer":"https://segmentfault.com/a/1190000023636701","linkMd5ListStr":"3f522baba1e817cf81ff90c5e1d10cfb","githubUser":"myreaderx32","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"40.3 KB","destSize":"18.9 KB","compressRate":"46.8%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023735011","sourceStatusCode":200,"destWidth":800,"destHeight":602,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn25@2020_3/2020/08/24/23-08-33-283_8449a79cab74d294.webp","sourceBytes":55756,"destBytes":18434,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2263,"convertSpendMs":23,"createdTime":"2020-08-25 07:08:32","host":"europe68*","referer":"https://segmentfault.com/a/1190000023735006","linkMd5ListStr":"83e2007305092901a28598ddbadd1356","githubUser":"myreaderx7","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"54.4 KB","destSize":"18 KB","compressRate":"33.1%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023737673","sourceStatusCode":200,"destWidth":716,"destHeight":290,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn1@2020_1/2020/08/24/23-08-33-510_28a02d81591a6ac2.webp","sourceBytes":43328,"destBytes":22146,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2172,"convertSpendMs":11,"createdTime":"2020-08-25 07:08:32","host":"us-002*","referer":"https://segmentfault.com/a/1190000023737670","linkMd5ListStr":"f6d9b255d764f38d4cfc647c5d61450c","githubUser":"myreaderx18","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"42.3 KB","destSize":"21.6 KB","compressRate":"51.1%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023737676","sourceStatusCode":200,"destWidth":468,"destHeight":614,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx13/cdn9@2020_2/2020/08/24/23-08-33-492_e143eeeacb3d77c7.webp","sourceBytes":28880,"destBytes":13822,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2171,"convertSpendMs":29,"createdTime":"2020-08-25 07:08:32","host":"us-52*","referer":"https://segmentfault.com/a/1190000023737670","linkMd5ListStr":"f6d9b255d764f38d4cfc647c5d61450c","githubUser":"myreaderx13","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"28.2 KB","destSize":"13.5 KB","compressRate":"47.9%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023709799","sourceStatusCode":200,"destWidth":800,"destHeight":240,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn69@2020_3/2020/08/24/23-08-33-492_971c0824e4b34173.webp","sourceBytes":73470,"destBytes":14336,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2343,"convertSpendMs":32,"createdTime":"2020-08-25 07:08:32","host":"us-034*","referer":"https://segmentfault.com/a/1190000023709787","linkMd5ListStr":"ac9425a1dc212f5c19afed90d55afc0d","githubUser":"myreaderx21","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"71.7 KB","destSize":"14 KB","compressRate":"19.5%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbKY8w","sourceStatusCode":200,"destWidth":800,"destHeight":451,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx14/cdn78@2020_4/2020/08/24/23-08-33-533_03ba1729d180dc44.webp","sourceBytes":125198,"destBytes":24588,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2303,"convertSpendMs":46,"createdTime":"2020-08-25 07:08:32","host":"us-010*","referer":"https://segmentfault.com/a/1190000023552474","linkMd5ListStr":"518d797df1c7c9d30e2acaaec433d26b","githubUser":"myreaderx14","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"122.3 KB","destSize":"24 KB","compressRate":"19.6%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023709796","sourceStatusCode":200,"destWidth":800,"destHeight":293,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn94@2020_1/2020/08/24/23-08-33-609_05d4dc7dacd0d54d.webp","sourceBytes":50961,"destBytes":11990,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2226,"convertSpendMs":39,"createdTime":"2020-08-25 07:08:32","host":"us-026*","referer":"https://segmentfault.com/a/1190000023709787","linkMd5ListStr":"ac9425a1dc212f5c19afed90d55afc0d,ac9425a1dc212f5c19afed90d55afc0d","githubUser":"myreaderx24","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"49.8 KB","destSize":"11.7 KB","compressRate":"23.5%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023735013","sourceStatusCode":200,"destWidth":800,"destHeight":418,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx25/cdn18@2020_2/2020/08/24/23-08-33-574_ca64795440519632.webp","sourceBytes":78098,"destBytes":17414,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2288,"convertSpendMs":18,"createdTime":"2020-08-25 07:08:32","host":"us-018*","referer":"https://segmentfault.com/a/1190000023735006","linkMd5ListStr":"83e2007305092901a28598ddbadd1356","githubUser":"myreaderx25","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"76.3 KB","destSize":"17 KB","compressRate":"22.3%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbKY9n","sourceStatusCode":200,"destWidth":800,"destHeight":149,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn98@2020_1/2020/08/24/23-08-33-472_6992bf171c48ab6b.webp","sourceBytes":26989,"destBytes":15974,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2260,"convertSpendMs":12,"createdTime":"2020-08-25 07:08:32","host":"us-014*","referer":"https://segmentfault.com/a/1190000023552474","linkMd5ListStr":"518d797df1c7c9d30e2acaaec433d26b","githubUser":"myreaderx30","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"26.4 KB","destSize":"15.6 KB","compressRate":"59.2%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023735012","sourceStatusCode":200,"destWidth":800,"destHeight":405,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn22@2020_6/2020/08/24/23-08-33-580_0ee43b08f5e73b73.webp","sourceBytes":99412,"destBytes":16622,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2196,"convertSpendMs":18,"createdTime":"2020-08-25 07:08:32","host":"us-006*","referer":"https://segmentfault.com/a/1190000023735006","linkMd5ListStr":"83e2007305092901a28598ddbadd1356","githubUser":"myreaderx6","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"97.1 KB","destSize":"16.2 KB","compressRate":"16.7%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023601931","sourceStatusCode":200,"destWidth":800,"destHeight":437,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx/cdn50@2020_6/2020/08/24/23-08-33-441_5bc3d20e66a31ee9.webp","sourceBytes":52064,"destBytes":23844,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2207,"convertSpendMs":14,"createdTime":"2020-08-25 07:08:32","host":"europe-60*","referer":"https://segmentfault.com/a/1190000023601927","linkMd5ListStr":"caee1d7512ed006f50fb714e278bb4f4","githubUser":"myreaderx","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"50.8 KB","destSize":"23.3 KB","compressRate":"45.8%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023709797","sourceStatusCode":200,"destWidth":327,"destHeight":410,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn74@2020_4/2020/08/24/23-08-33-616_c5d493b3e367e934.webp","sourceBytes":133053,"destBytes":19064,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2404,"convertSpendMs":17,"createdTime":"2020-08-25 07:08:32","host":"us-022*","referer":"https://segmentfault.com/a/1190000023709787","linkMd5ListStr":"ac9425a1dc212f5c19afed90d55afc0d","githubUser":"myreaderx33","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"129.9 KB","destSize":"18.6 KB","compressRate":"14.3%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023735014","sourceStatusCode":200,"destWidth":800,"destHeight":450,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn13@2020_6/2020/08/24/23-08-33-616_a24995aea600c1a0.webp","sourceBytes":236692,"destBytes":21324,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2367,"convertSpendMs":35,"createdTime":"2020-08-25 07:08:32","host":"us-030*","referer":"https://segmentfault.com/a/1190000023735006","linkMd5ListStr":"83e2007305092901a28598ddbadd1356","githubUser":"myreaderx11","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"231.1 KB","destSize":"20.8 KB","compressRate":"9%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLvGN","sourceStatusCode":200,"destWidth":500,"destHeight":500,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn38@2020_1/2020/08/24/23-08-33-674_5324ccda8059124e.webp","sourceBytes":34779,"destBytes":24180,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2212,"convertSpendMs":19,"createdTime":"2020-08-25 07:08:32","host":"us-022*","referer":"https://segmentfault.com/a/1190000023677258","linkMd5ListStr":"81351ef5cee65b004bca5b0902fb9913","githubUser":"myreaderx19","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"34 KB","destSize":"23.6 KB","compressRate":"69.5%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLdLK","sourceStatusCode":200,"destWidth":800,"destHeight":184,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn34@2020_1/2020/08/24/23-08-33-617_a294f8a47711264c.webp","sourceBytes":22568,"destBytes":22568,"feedId":6615,"totalSpendMs":2767,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:31","host":"us-014*","referer":"https://segmentfault.com/a/1190000023608432","linkMd5ListStr":"749b88d16e8263f6e6691f06881f8209","githubUser":"myreaderx10","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"22 KB","destSize":"22 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023601932","sourceStatusCode":200,"destWidth":635,"destHeight":800,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn42@2020_3/2020/08/24/23-08-33-612_ecc0aceb5b22010d.webp","sourceBytes":38376,"destBytes":38376,"feedId":6615,"totalSpendMs":2278,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:32","host":"us-010*","referer":"https://segmentfault.com/a/1190000023601927","linkMd5ListStr":"caee1d7512ed006f50fb714e278bb4f4","githubUser":"myreaderx3","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"37.5 KB","destSize":"37.5 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000022332831","sourceStatusCode":200,"destWidth":302,"destHeight":62,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn54@2020_6/2020/08/24/23-08-33-768_ab7bb1a669ed6d43.webp","sourceBytes":9354,"destBytes":2638,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2342,"convertSpendMs":8,"createdTime":"2020-08-25 07:08:32","host":"us-038*","referer":"https://segmentfault.com/a/1190000023648364","linkMd5ListStr":"cb41ea759b4fff7fa2c9b843d9a3559f,47f945d0758f841a94d5a32def62ad1a","githubUser":"myreaderx12","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"9.1 KB","destSize":"2.6 KB","compressRate":"28.2%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023601933","sourceStatusCode":200,"destWidth":800,"destHeight":465,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn46@2020_3/2020/08/24/23-08-33-567_4185d7618d0af188.webp","sourceBytes":42462,"destBytes":32742,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2543,"convertSpendMs":13,"createdTime":"2020-08-25 07:08:32","host":"europe-23*","referer":"https://segmentfault.com/a/1190000023601927","linkMd5ListStr":"caee1d7512ed006f50fb714e278bb4f4","githubUser":"myreaderx10","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"41.5 KB","destSize":"32 KB","compressRate":"77.1%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLueg","sourceStatusCode":200,"destWidth":800,"destHeight":524,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn34@2020_1/2020/08/24/23-08-33-833_d914957c0890d0d6.webp","sourceBytes":626352,"destBytes":53970,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2553,"convertSpendMs":70,"createdTime":"2020-08-25 07:08:32","host":"us-034*","referer":"https://segmentfault.com/a/1190000023675512","linkMd5ListStr":"8130037c23e0c993c51e97490b17f7b6","githubUser":"myreaderx5oss","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"611.7 KB","destSize":"52.7 KB","compressRate":"8.6%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLvGJ","sourceStatusCode":200,"destWidth":539,"destHeight":622,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx32/cdn57@2020_4/2020/08/24/23-08-33-915_ec37b2d3704c5497.webp","sourceBytes":247415,"destBytes":18020,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2407,"convertSpendMs":99,"createdTime":"2020-08-25 07:08:32","host":"us-026*","referer":"https://segmentfault.com/a/1190000023677258","linkMd5ListStr":"81351ef5cee65b004bca5b0902fb9913","githubUser":"myreaderx32","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"241.6 KB","destSize":"17.6 KB","compressRate":"7.3%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000022332833","sourceStatusCode":200,"destWidth":302,"destHeight":61,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn62@2020_5/2020/08/24/23-08-34-275_d188d26ff603bb94.webp","sourceBytes":10498,"destBytes":3190,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2295,"convertSpendMs":13,"createdTime":"2020-08-25 07:08:32","host":"us-014*","referer":"https://segmentfault.com/a/1190000023648364","linkMd5ListStr":"cb41ea759b4fff7fa2c9b843d9a3559f,47f945d0758f841a94d5a32def62ad1a","githubUser":"myreaderx1","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"10.3 KB","destSize":"3.1 KB","compressRate":"30.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbK8rM","sourceStatusCode":200,"destWidth":240,"destHeight":240,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx23/cdn76@2020_3/2020/08/24/23-08-34-896_2dc307b4541a0abd.webp","sourceBytes":21764,"destBytes":8394,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2170,"convertSpendMs":17,"createdTime":"2020-08-25 07:08:33","host":"us-014*","referer":"https://segmentfault.com/a/1190000023587881","linkMd5ListStr":"38260b3f6e6b52df89d4a67c52a99d4e","githubUser":"myreaderx23","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"21.3 KB","destSize":"8.2 KB","compressRate":"38.6%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbK8rQ","sourceStatusCode":200,"destWidth":800,"destHeight":246,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn15@2020_3/2020/08/24/23-08-35-676_125212a0c80ae003.webp","sourceBytes":55763,"destBytes":25802,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2243,"convertSpendMs":31,"createdTime":"2020-08-25 07:08:34","host":"us-030*","referer":"https://segmentfault.com/a/1190000023587881","linkMd5ListStr":"38260b3f6e6b52df89d4a67c52a99d4e","githubUser":"myreaderx18","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"54.5 KB","destSize":"25.2 KB","compressRate":"46.3%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023709805","sourceStatusCode":200,"destWidth":800,"destHeight":268,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn56@2020_6/2020/08/24/23-08-35-625_7a194b4bce014c56.webp","sourceBytes":40682,"destBytes":22130,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2240,"convertSpendMs":10,"createdTime":"2020-08-25 07:08:34","host":"europe-56*","referer":"https://segmentfault.com/a/1190000023709787","linkMd5ListStr":"ac9425a1dc212f5c19afed90d55afc0d","githubUser":"myreaderx3","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"39.7 KB","destSize":"21.6 KB","compressRate":"54.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023736398","sourceStatusCode":200,"destWidth":800,"destHeight":468,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn36@2020_5/2020/08/24/23-08-35-897_b31ea577fa877f02.webp","sourceBytes":67925,"destBytes":14918,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2228,"convertSpendMs":24,"createdTime":"2020-08-25 07:08:34","host":"us-038*","referer":"https://segmentfault.com/a/1190000023736395","linkMd5ListStr":"0350953f3ed11c58067e084970f74395","githubUser":"myreaderx6","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"66.3 KB","destSize":"14.6 KB","compressRate":"22%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023657735","sourceStatusCode":200,"destWidth":800,"destHeight":637,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn76@2020_4/2020/08/24/23-08-35-718_de19cb27823856b5.webp","sourceBytes":227786,"destBytes":46674,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2456,"convertSpendMs":29,"createdTime":"2020-08-25 07:08:34","host":"europe64*","referer":"https://segmentfault.com/a/1190000023657729","linkMd5ListStr":"9569faa8acc0e079a1c10828ff9a417e","githubUser":"myreaderx1","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"222.4 KB","destSize":"45.6 KB","compressRate":"20.5%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023657736","sourceStatusCode":200,"destWidth":475,"destHeight":800,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx32/cdn71@2020_1/2020/08/24/23-08-36-091_0b3e500f3a14db18.webp","sourceBytes":223566,"destBytes":38202,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2297,"convertSpendMs":19,"createdTime":"2020-08-25 07:08:34","host":"us-002*","referer":"https://segmentfault.com/a/1190000023657729","linkMd5ListStr":"9569faa8acc0e079a1c10828ff9a417e","githubUser":"myreaderx32","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"218.3 KB","destSize":"37.3 KB","compressRate":"17.1%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbK8rO","sourceStatusCode":200,"destWidth":800,"destHeight":760,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn83@2020_4/2020/08/24/23-08-35-793_31b62aedb2eb6fe6.webp","sourceBytes":214061,"destBytes":73040,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3315,"convertSpendMs":57,"createdTime":"2020-08-25 07:08:33","host":"europe65*","referer":"https://segmentfault.com/a/1190000023587881","linkMd5ListStr":"38260b3f6e6b52df89d4a67c52a99d4e","githubUser":"myreaderx21","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"209 KB","destSize":"71.3 KB","compressRate":"34.1%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLvGR","sourceStatusCode":200,"destWidth":435,"destHeight":348,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn68@2020_3/2020/08/24/23-08-36-191_c3fec51f8080522e.webp","sourceBytes":10264,"destBytes":14060,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3581,"convertSpendMs":25,"createdTime":"2020-08-25 07:08:33","host":"us-036*","referer":"https://segmentfault.com/a/1190000023677258","linkMd5ListStr":"81351ef5cee65b004bca5b0902fb9913","githubUser":"myreaderx29","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"10 KB","destSize":"13.7 KB","compressRate":"137%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023657741","sourceStatusCode":200,"destWidth":800,"destHeight":681,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn92@2020_4/2020/08/24/23-08-36-207_577394f1b53dd12a.webp","sourceBytes":107905,"destBytes":25316,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2293,"convertSpendMs":91,"createdTime":"2020-08-25 07:08:34","host":"us-010*","referer":"https://segmentfault.com/a/1190000023657729","linkMd5ListStr":"9569faa8acc0e079a1c10828ff9a417e","githubUser":"myreaderx16","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"105.4 KB","destSize":"24.7 KB","compressRate":"23.5%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLvGS","sourceStatusCode":200,"destWidth":366,"destHeight":284,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn71@2020_5/2020/08/24/23-08-36-323_5b993b1029d81167.webp","sourceBytes":12427,"destBytes":11566,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3584,"convertSpendMs":6,"createdTime":"2020-08-25 07:08:33","host":"us-025*","referer":"https://segmentfault.com/a/1190000023677258","linkMd5ListStr":"81351ef5cee65b004bca5b0902fb9913","githubUser":"myreaderx22","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"12.1 KB","destSize":"11.3 KB","compressRate":"93.1%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbK8rN","sourceStatusCode":200,"destWidth":800,"destHeight":315,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn80@2020_3/2020/08/24/23-08-36-263_3c39699332f578b1.webp","sourceBytes":30818,"destBytes":32338,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3274,"convertSpendMs":22,"createdTime":"2020-08-25 07:08:33","host":"us-003*","referer":"https://segmentfault.com/a/1190000023587881","linkMd5ListStr":"38260b3f6e6b52df89d4a67c52a99d4e","githubUser":"myreaderx16","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"30.1 KB","destSize":"31.6 KB","compressRate":"104.9%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbK8rJ","sourceStatusCode":200,"destWidth":275,"destHeight":189,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn96@2020_2/2020/08/24/23-08-36-120_24bfbdbe72cc45ff.webp","sourceBytes":484135,"destBytes":202964,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3044,"convertSpendMs":259,"createdTime":"2020-08-25 07:08:34","host":"us-022*","referer":"https://segmentfault.com/a/1190000023587881","linkMd5ListStr":"38260b3f6e6b52df89d4a67c52a99d4e","githubUser":"myreaderx8","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"472.8 KB","destSize":"198.2 KB","compressRate":"41.9%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023601934","sourceStatusCode":200,"destWidth":529,"destHeight":460,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn4@2020_6/2020/08/24/23-08-36-470_98a69215dba7edeb.webp","sourceBytes":24766,"destBytes":28694,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3330,"convertSpendMs":12,"createdTime":"2020-08-25 07:08:34","host":"europe-25*","referer":"https://segmentfault.com/a/1190000023601927","linkMd5ListStr":"caee1d7512ed006f50fb714e278bb4f4","githubUser":"myreaderx24","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"24.2 KB","destSize":"28 KB","compressRate":"115.9%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbKULG","sourceStatusCode":200,"destWidth":800,"destHeight":379,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn27@2020_5/2020/08/24/23-08-36-689_6b82b381e1690545.webp","sourceBytes":126446,"destBytes":28740,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3491,"convertSpendMs":19,"createdTime":"2020-08-25 07:08:34","host":"europe70*","referer":"https://segmentfault.com/a/1190000023608432","linkMd5ListStr":"749b88d16e8263f6e6691f06881f8209","githubUser":"myreaderx11","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"123.5 KB","destSize":"28.1 KB","compressRate":"22.7%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbK8rI","sourceStatusCode":200,"destWidth":434,"destHeight":316,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx14/cdn92@2020_5/2020/08/24/23-08-36-947_42b85b2ae6d997a1.webp","sourceBytes":162013,"destBytes":17168,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3633,"convertSpendMs":12,"createdTime":"2020-08-25 07:08:34","host":"us-033*","referer":"https://segmentfault.com/a/1190000023587881","linkMd5ListStr":"38260b3f6e6b52df89d4a67c52a99d4e","githubUser":"myreaderx14","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"158.2 KB","destSize":"16.8 KB","compressRate":"10.6%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023652883","sourceStatusCode":200,"destWidth":226,"destHeight":41,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn12@2020_2/2020/08/24/23-08-36-976_aa939d9b8362bbcf.webp","sourceBytes":5492,"destBytes":1998,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2769,"convertSpendMs":4,"createdTime":"2020-08-25 07:08:35","host":"europe-59*","referer":"https://segmentfault.com/a/1190000023652879","linkMd5ListStr":"d0ff9ddefe9a6a882e6318d475159e5e","githubUser":"myreaderx15","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"5.4 KB","destSize":"2 KB","compressRate":"36.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023709801","sourceStatusCode":200,"destWidth":676,"destHeight":243,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn48@2020_1/2020/08/24/23-08-37-123_d94dd4f33dfc2b9f.webp","sourceBytes":9274,"destBytes":11720,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3303,"convertSpendMs":40,"createdTime":"2020-08-25 07:08:34","host":"us-005*","referer":"https://segmentfault.com/a/1190000023709787","linkMd5ListStr":"ac9425a1dc212f5c19afed90d55afc0d","githubUser":"myreaderx5oss","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"9.1 KB","destSize":"11.4 KB","compressRate":"126.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023709802","sourceStatusCode":200,"destWidth":759,"destHeight":630,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn52@2020_2/2020/08/24/23-08-36-907_f10a55c3175000a3.webp","sourceBytes":34726,"destBytes":16792,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3526,"convertSpendMs":18,"createdTime":"2020-08-25 07:08:34","host":"europe67*","referer":"https://segmentfault.com/a/1190000023709787","linkMd5ListStr":"ac9425a1dc212f5c19afed90d55afc0d","githubUser":"myreaderx19","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"33.9 KB","destSize":"16.4 KB","compressRate":"48.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023657739","sourceStatusCode":200,"destWidth":800,"destHeight":624,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn100@2020_1/2020/08/24/23-08-36-884_490e6b9cc76ef541.webp","sourceBytes":90486,"destBytes":21124,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3187,"convertSpendMs":23,"createdTime":"2020-08-25 07:08:34","host":"europe61*","referer":"https://segmentfault.com/a/1190000023657729","linkMd5ListStr":"9569faa8acc0e079a1c10828ff9a417e","githubUser":"myreaderx33","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"88.4 KB","destSize":"20.6 KB","compressRate":"23.3%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLvGs","sourceStatusCode":200,"destWidth":420,"destHeight":297,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx13/cdn23@2020_5/2020/08/24/23-08-37-100_402763b3dd71ef2c.webp","sourceBytes":18132,"destBytes":20414,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3520,"convertSpendMs":13,"createdTime":"2020-08-25 07:08:34","host":"us-008*","referer":"https://segmentfault.com/a/1190000023677258","linkMd5ListStr":"81351ef5cee65b004bca5b0902fb9913","githubUser":"myreaderx13","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"17.7 KB","destSize":"19.9 KB","compressRate":"112.6%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLFfh","sourceStatusCode":200,"destWidth":800,"destHeight":531,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn39@2020_4/2020/08/24/23-08-37-152_4ce085e5b8852c3c.webp","sourceBytes":81077,"destBytes":24972,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3438,"convertSpendMs":16,"createdTime":"2020-08-25 07:08:34","host":"us-027*","referer":"https://segmentfault.com/a/1190000023714011","linkMd5ListStr":"317dc10a0d3fb89965600980c204116d","githubUser":"myreaderx7","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"79.2 KB","destSize":"24.4 KB","compressRate":"30.8%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbK8rL","sourceStatusCode":200,"destWidth":800,"destHeight":418,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn8@2020_4/2020/08/24/23-08-36-839_67cdf4d01f6a82ed.webp","sourceBytes":46636,"destBytes":46136,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3882,"convertSpendMs":27,"createdTime":"2020-08-25 07:08:34","host":"europe62*","referer":"https://segmentfault.com/a/1190000023587881","linkMd5ListStr":"38260b3f6e6b52df89d4a67c52a99d4e","githubUser":"myreaderx30","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"45.5 KB","destSize":"45.1 KB","compressRate":"98.9%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbK8rP","sourceStatusCode":200,"destWidth":800,"destHeight":709,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn88@2020_1/2020/08/24/23-08-37-146_33e57f0e6761d6ff.webp","sourceBytes":58165,"destBytes":50808,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3952,"convertSpendMs":82,"createdTime":"2020-08-25 07:08:34","host":"us-54*","referer":"https://segmentfault.com/a/1190000023587881","linkMd5ListStr":"38260b3f6e6b52df89d4a67c52a99d4e","githubUser":"myreaderx33","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"56.8 KB","destSize":"49.6 KB","compressRate":"87.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbK8rK","sourceStatusCode":200,"destWidth":800,"destHeight":425,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn99@2020_4/2020/08/24/23-08-37-087_cedf4db363bdd8fe.webp","sourceBytes":47687,"destBytes":47036,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3812,"convertSpendMs":32,"createdTime":"2020-08-25 07:08:34","host":"us-011*","referer":"https://segmentfault.com/a/1190000023587881","linkMd5ListStr":"38260b3f6e6b52df89d4a67c52a99d4e","githubUser":"myreaderx27","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"46.6 KB","destSize":"45.9 KB","compressRate":"98.6%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbJcHj","sourceStatusCode":200,"destWidth":800,"destHeight":189,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn20@2020_2/2020/08/24/23-08-37-345_f113e092cc336adb.webp","sourceBytes":125374,"destBytes":22852,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3718,"convertSpendMs":49,"createdTime":"2020-08-25 07:08:34","host":"us-019*","referer":"https://segmentfault.com/a/1190000023622134","linkMd5ListStr":"feb087fef9d4181f56dd8589fa8fcc79","githubUser":"myreaderx4","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"122.4 KB","destSize":"22.3 KB","compressRate":"18.2%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023601935","sourceStatusCode":200,"destWidth":800,"destHeight":307,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn11@2020_1/2020/08/24/23-08-37-304_1fddd172f9de192b.webp","sourceBytes":44954,"destBytes":44954,"feedId":6615,"totalSpendMs":3844,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:34","host":"us-51*","referer":"https://segmentfault.com/a/1190000023601927","linkMd5ListStr":"caee1d7512ed006f50fb714e278bb4f4","githubUser":"myreaderx2","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"43.9 KB","destSize":"43.9 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLFfE","sourceStatusCode":200,"destWidth":800,"destHeight":530,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx25/cdn32@2020_4/2020/08/24/23-08-37-014_df9d49603cc32ef0.webp","sourceBytes":111043,"destBytes":37010,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3869,"convertSpendMs":21,"createdTime":"2020-08-25 07:08:34","host":"europe-59*","referer":"https://segmentfault.com/a/1190000023714011","linkMd5ListStr":"317dc10a0d3fb89965600980c204116d","githubUser":"myreaderx25","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"108.4 KB","destSize":"36.1 KB","compressRate":"33.3%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023709803","sourceStatusCode":200,"destWidth":347,"destHeight":278,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn60@2020_2/2020/08/24/23-08-37-310_d2a8b739b73e75b1.webp","sourceBytes":89888,"destBytes":16986,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3691,"convertSpendMs":15,"createdTime":"2020-08-25 07:08:34","host":"us-035*","referer":"https://segmentfault.com/a/1190000023709787","linkMd5ListStr":"ac9425a1dc212f5c19afed90d55afc0d","githubUser":"myreaderx10","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"87.8 KB","destSize":"16.6 KB","compressRate":"18.9%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023709804","sourceStatusCode":200,"destWidth":800,"destHeight":246,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx/cdn64@2020_4/2020/08/24/23-08-37-435_4af65fb32a269cbc.webp","sourceBytes":40822,"destBytes":8012,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3652,"convertSpendMs":10,"createdTime":"2020-08-25 07:08:34","host":"us-024*","referer":"https://segmentfault.com/a/1190000023709787","linkMd5ListStr":"ac9425a1dc212f5c19afed90d55afc0d","githubUser":"myreaderx","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"39.9 KB","destSize":"7.8 KB","compressRate":"19.6%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLFfq","sourceStatusCode":200,"destWidth":800,"destHeight":534,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn44@2020_1/2020/08/24/23-08-37-389_8988f99120692e64.webp","sourceBytes":77646,"destBytes":24950,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3791,"convertSpendMs":36,"createdTime":"2020-08-25 07:08:34","host":"us-016*","referer":"https://segmentfault.com/a/1190000023714011","linkMd5ListStr":"317dc10a0d3fb89965600980c204116d","githubUser":"myreaderx31","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"75.8 KB","destSize":"24.4 KB","compressRate":"32.1%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023657733","sourceStatusCode":200,"destWidth":800,"destHeight":250,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn83@2020_5/2020/08/24/23-08-37-631_8c8436a6031ce5b2.webp","sourceBytes":44180,"destBytes":13190,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3263,"convertSpendMs":12,"createdTime":"2020-08-25 07:08:35","host":"us-032*","referer":"https://segmentfault.com/a/1190000023657729","linkMd5ListStr":"9569faa8acc0e079a1c10828ff9a417e","githubUser":"myreaderx22","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"43.1 KB","destSize":"12.9 KB","compressRate":"29.9%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023657740","sourceStatusCode":200,"destWidth":800,"destHeight":756,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn95@2020_2/2020/08/24/23-08-37-201_1d04b2d366acdb5c.webp","sourceBytes":117934,"destBytes":31088,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3674,"convertSpendMs":27,"createdTime":"2020-08-25 07:08:34","host":"europe-24*","referer":"https://segmentfault.com/a/1190000023657729","linkMd5ListStr":"9569faa8acc0e079a1c10828ff9a417e","githubUser":"myreaderx21","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"115.2 KB","destSize":"30.4 KB","compressRate":"26.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023657742","sourceStatusCode":200,"destWidth":745,"destHeight":794,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx23/cdn88@2020_6/2020/08/24/23-08-37-616_aaa501e20ba9eee8.webp","sourceBytes":45045,"destBytes":36340,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3720,"convertSpendMs":33,"createdTime":"2020-08-25 07:08:34","host":"us-021*","referer":"https://segmentfault.com/a/1190000023657729","linkMd5ListStr":"9569faa8acc0e079a1c10828ff9a417e","githubUser":"myreaderx23","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"44 KB","destSize":"35.5 KB","compressRate":"80.7%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbHZSb","sourceStatusCode":200,"destWidth":800,"destHeight":340,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn68@2020_4/2020/08/24/23-08-37-572_9328baa6c41eb7d7.webp","sourceBytes":55340,"destBytes":55340,"feedId":6615,"totalSpendMs":3855,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:34","host":"us-013*","referer":"https://segmentfault.com/a/1190000023652718","linkMd5ListStr":"06182f917f57c9d9612487bd563c6868,edffa444454de4e48a3d973ca7297088","githubUser":"myreaderx12","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"54 KB","destSize":"54 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023657738","sourceStatusCode":200,"destWidth":800,"destHeight":759,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn4@2020_1/2020/08/24/23-08-37-700_47af21c1d8fe1b43.webp","sourceBytes":119115,"destBytes":30466,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3590,"convertSpendMs":45,"createdTime":"2020-08-25 07:08:34","host":"us-040*","referer":"https://segmentfault.com/a/1190000023657729","linkMd5ListStr":"9569faa8acc0e079a1c10828ff9a417e","githubUser":"myreaderx8","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"116.3 KB","destSize":"29.8 KB","compressRate":"25.6%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023657734","sourceStatusCode":200,"destWidth":800,"destHeight":634,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn80@2020_6/2020/08/24/23-08-37-888_0219a4c09525c3f3.webp","sourceBytes":203570,"destBytes":40296,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":4093,"convertSpendMs":40,"createdTime":"2020-08-25 07:08:34","host":"us-53*","referer":"https://segmentfault.com/a/1190000023657729","linkMd5ListStr":"9569faa8acc0e079a1c10828ff9a417e","githubUser":"myreaderx29","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"198.8 KB","destSize":"39.4 KB","compressRate":"19.8%"},{"code":1,"isDone":false,"source":"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/12.png","sourceStatusCode":200,"destWidth":543,"destHeight":227,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn80@2020_6/2020/08/24/23-08-38-200_ba0f32660e8bc151.webp","sourceBytes":8760,"destBytes":8760,"feedId":6615,"totalSpendMs":1033,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:38","host":"us-002*","referer":"https://segmentfault.com/a/1190000022332809","linkMd5ListStr":"cb41ea759b4fff7fa2c9b843d9a3559f","githubUser":"myreaderx12","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"8.6 KB","destSize":"8.6 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023708778","sourceStatusCode":200,"destWidth":539,"destHeight":800,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn23@2020_2/2020/08/24/23-08-38-329_bf5033b02384e3e7.webp","sourceBytes":42668,"destBytes":13184,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2291,"convertSpendMs":20,"createdTime":"2020-08-25 07:08:36","host":"us-018*","referer":"https://segmentfault.com/a/1190000023708775","linkMd5ListStr":"b4d24379ce31382e9336abd377405f85","githubUser":"myreaderx2","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"41.7 KB","destSize":"12.9 KB","compressRate":"30.9%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023652888","sourceStatusCode":200,"destWidth":246,"destHeight":93,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn56@2020_3/2020/08/24/23-08-38-339_51682126a715d4c0.webp","sourceBytes":10206,"destBytes":3562,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2011,"convertSpendMs":4,"createdTime":"2020-08-25 07:08:37","host":"europe-25*","referer":"https://segmentfault.com/a/1190000023652879","linkMd5ListStr":"d0ff9ddefe9a6a882e6318d475159e5e","githubUser":"myreaderx31","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"10 KB","destSize":"3.5 KB","compressRate":"34.9%"},{"code":1,"isDone":false,"source":"https://tva1.sinaimg.cn/large/007S8ZIlly1ghu970lp1rj30me0hq494.jpg","sourceStatusCode":200,"destWidth":806,"destHeight":638,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx23/cdn100@2020_1/2020/08/24/23-08-38-382_bd6c3dce7d6e55b1.webp","sourceBytes":60191,"destBytes":30932,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":978,"convertSpendMs":27,"createdTime":"2020-08-25 07:08:38","host":"us-014*","referer":"https://segmentfault.com/a/1190000023668057","linkMd5ListStr":"dcb1ca1d6d9e74559b1305ed3b0d3469","githubUser":"myreaderx23","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"58.8 KB","destSize":"30.2 KB","compressRate":"51.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023657737","sourceStatusCode":200,"destWidth":450,"destHeight":800,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn7@2020_6/2020/08/24/23-08-38-067_37c2c4464d2306d7.webp","sourceBytes":146281,"destBytes":31920,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":4321,"convertSpendMs":20,"createdTime":"2020-08-25 07:08:34","host":"europe69*","referer":"https://segmentfault.com/a/1190000023657729","linkMd5ListStr":"9569faa8acc0e079a1c10828ff9a417e","githubUser":"myreaderx27","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"142.9 KB","destSize":"31.2 KB","compressRate":"21.8%"},{"code":1,"isDone":false,"source":"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/11.png","sourceStatusCode":200,"destWidth":740,"destHeight":738,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn3@2020_4/2020/08/24/23-08-38-385_6664d5c4cdec1a50.webp","sourceBytes":36006,"destBytes":36006,"feedId":6615,"totalSpendMs":971,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:38","host":"us-004*","referer":"https://segmentfault.com/a/1190000022332809","linkMd5ListStr":"cb41ea759b4fff7fa2c9b843d9a3559f","githubUser":"myreaderx21","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"35.2 KB","destSize":"35.2 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023708781","sourceStatusCode":200,"destWidth":800,"destHeight":685,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx13/cdn35@2020_2/2020/08/24/23-08-38-260_1b98c2cb4699745d.webp","sourceBytes":135572,"destBytes":23394,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2305,"convertSpendMs":25,"createdTime":"2020-08-25 07:08:36","host":"europe61*","referer":"https://segmentfault.com/a/1190000023708775","linkMd5ListStr":"b4d24379ce31382e9336abd377405f85","githubUser":"myreaderx13","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"132.4 KB","destSize":"22.8 KB","compressRate":"17.3%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023652886","sourceStatusCode":200,"destWidth":272,"destHeight":112,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn51@2020_5/2020/08/24/23-08-38-491_33b83eb09ae0f820.webp","sourceBytes":12767,"destBytes":5070,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2061,"convertSpendMs":6,"createdTime":"2020-08-25 07:08:37","host":"us-010*","referer":"https://segmentfault.com/a/1190000023652879","linkMd5ListStr":"d0ff9ddefe9a6a882e6318d475159e5e","githubUser":"myreaderx7","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"12.5 KB","destSize":"5 KB","compressRate":"39.7%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLuza","sourceStatusCode":200,"destWidth":800,"destHeight":340,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn27@2020_6/2020/08/24/23-08-38-440_fb92e27a6436323a.webp","sourceBytes":283958,"destBytes":30376,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2352,"convertSpendMs":28,"createdTime":"2020-08-25 07:08:36","host":"us-008*","referer":"https://segmentfault.com/a/1190000023675512","linkMd5ListStr":"8130037c23e0c993c51e97490b17f7b6","githubUser":"myreaderx18","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"277.3 KB","destSize":"29.7 KB","compressRate":"10.7%"},{"code":1,"isDone":false,"source":"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/3.png","sourceStatusCode":200,"destWidth":1008,"destHeight":525,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn28@2020_2/2020/08/24/23-08-38-581_dc3226984ea6a4b1.webp","sourceBytes":24486,"destBytes":24486,"feedId":6615,"totalSpendMs":931,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:38","host":"us-006*","referer":"https://segmentfault.com/a/1190000022332809","linkMd5ListStr":"cb41ea759b4fff7fa2c9b843d9a3559f","githubUser":"myreaderx24","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"23.9 KB","destSize":"23.9 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/4.png","sourceStatusCode":200,"destWidth":845,"destHeight":418,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn68@2020_3/2020/08/24/23-08-38-545_133d4c84d77e836a.webp","sourceBytes":19654,"destBytes":19654,"feedId":6615,"totalSpendMs":1060,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:38","host":"us-033*","referer":"https://segmentfault.com/a/1190000022332809","linkMd5ListStr":"cb41ea759b4fff7fa2c9b843d9a3559f","githubUser":"myreaderx3","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"19.2 KB","destSize":"19.2 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023684250","sourceStatusCode":200,"destWidth":800,"destHeight":293,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn60@2020_2/2020/08/24/23-08-38-560_259f8fe4710a279d.webp","sourceBytes":59733,"destBytes":20328,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2253,"convertSpendMs":13,"createdTime":"2020-08-25 07:08:37","host":"europe63*","referer":"https://segmentfault.com/a/1190000023684246","linkMd5ListStr":"420bda976c9e79232c9adc2d2bfab39b","githubUser":"myreaderx5oss","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"58.3 KB","destSize":"19.9 KB","compressRate":"34%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023708782","sourceStatusCode":200,"destWidth":800,"destHeight":444,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn39@2020_5/2020/08/24/23-08-38-804_234d06daf8751ef2.webp","sourceBytes":349342,"destBytes":34826,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2389,"convertSpendMs":31,"createdTime":"2020-08-25 07:08:37","host":"us-51*","referer":"https://segmentfault.com/a/1190000023708775","linkMd5ListStr":"b4d24379ce31382e9336abd377405f85","githubUser":"myreaderx11","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"341.2 KB","destSize":"34 KB","compressRate":"10%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023652885","sourceStatusCode":200,"destWidth":276,"destHeight":89,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn16@2020_2/2020/08/24/23-08-38-819_d6f77ebf0796d56f.webp","sourceBytes":11012,"destBytes":4032,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3804,"convertSpendMs":5,"createdTime":"2020-08-25 07:08:35","host":"us-039*","referer":"https://segmentfault.com/a/1190000023652879","linkMd5ListStr":"d0ff9ddefe9a6a882e6318d475159e5e","githubUser":"myreaderx24","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"10.8 KB","destSize":"3.9 KB","compressRate":"36.6%"},{"code":1,"isDone":false,"source":"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/2.png","sourceStatusCode":200,"destWidth":1240,"destHeight":426,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx13/cdn47@2020_4/2020/08/24/23-08-39-007_71ea8796fe8a5213.webp","sourceBytes":24860,"destBytes":24860,"feedId":6615,"totalSpendMs":1189,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:38","host":"us-018*","referer":"https://segmentfault.com/a/1190000022332809","linkMd5ListStr":"cb41ea759b4fff7fa2c9b843d9a3559f","githubUser":"myreaderx13","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"24.3 KB","destSize":"24.3 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/14.png","sourceStatusCode":200,"destWidth":616,"destHeight":473,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn51@2020_4/2020/08/24/23-08-38-994_c44d50e66064c4ab.webp","sourceBytes":24364,"destBytes":24364,"feedId":6615,"totalSpendMs":1109,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:38","host":"us-008*","referer":"https://segmentfault.com/a/1190000022332809","linkMd5ListStr":"cb41ea759b4fff7fa2c9b843d9a3559f","githubUser":"myreaderx11","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"23.8 KB","destSize":"23.8 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023684251","sourceStatusCode":200,"destWidth":800,"destHeight":288,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn64@2020_1/2020/08/24/23-08-39-180_f004b02cd44eaa50.webp","sourceBytes":190525,"destBytes":37274,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2334,"convertSpendMs":39,"createdTime":"2020-08-25 07:08:37","host":"us-53*","referer":"https://segmentfault.com/a/1190000023684246","linkMd5ListStr":"420bda976c9e79232c9adc2d2bfab39b","githubUser":"myreaderx19","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"186.1 KB","destSize":"36.4 KB","compressRate":"19.6%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023684252","sourceStatusCode":200,"destWidth":798,"destHeight":299,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn72@2020_5/2020/08/24/23-08-39-252_6e03b370097de657.webp","sourceBytes":12611,"destBytes":22666,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2180,"convertSpendMs":14,"createdTime":"2020-08-25 07:08:37","host":"us-022*","referer":"https://segmentfault.com/a/1190000023684246","linkMd5ListStr":"420bda976c9e79232c9adc2d2bfab39b","githubUser":"myreaderx10","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"12.3 KB","destSize":"22.1 KB","compressRate":"179.7%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023684249","sourceStatusCode":200,"destWidth":635,"destHeight":378,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn32@2020_2/2020/08/24/23-08-39-108_9e9ebdfe1d798e4b.webp","sourceBytes":25420,"destBytes":14732,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3154,"convertSpendMs":15,"createdTime":"2020-08-25 07:08:36","host":"europe21*","referer":"https://segmentfault.com/a/1190000023684246","linkMd5ListStr":"420bda976c9e79232c9adc2d2bfab39b","githubUser":"myreaderx4","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"24.8 KB","destSize":"14.4 KB","compressRate":"58%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLnGW","sourceStatusCode":200,"destWidth":601,"destHeight":421,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn8@2020_5/2020/08/24/23-08-39-315_adc2628a7dd7bf8a.webp","sourceBytes":19104,"destBytes":11912,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2174,"convertSpendMs":10,"createdTime":"2020-08-25 07:08:38","host":"europe67*","referer":"https://segmentfault.com/a/1190000023660020","linkMd5ListStr":"6a526c91c6f56ccea5eb637c9da38dee","githubUser":"myreaderx33","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"18.7 KB","destSize":"11.6 KB","compressRate":"62.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023652884","sourceStatusCode":200,"destWidth":231,"destHeight":41,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn20@2020_6/2020/08/24/23-08-39-520_d14dbd35c4d89843.webp","sourceBytes":5814,"destBytes":2452,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3621,"convertSpendMs":3,"createdTime":"2020-08-25 07:08:36","host":"us-028*","referer":"https://segmentfault.com/a/1190000023652879","linkMd5ListStr":"d0ff9ddefe9a6a882e6318d475159e5e","githubUser":"myreaderx30","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"5.7 KB","destSize":"2.4 KB","compressRate":"42.2%"},{"code":1,"isDone":false,"source":"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/13.png","sourceStatusCode":200,"destWidth":670,"destHeight":542,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx/cdn88@2020_2/2020/08/24/23-08-39-593_22e0b3f2ff5b9946.webp","sourceBytes":16942,"destBytes":16942,"feedId":6615,"totalSpendMs":978,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:39","host":"us-53*","referer":"https://segmentfault.com/a/1190000022332809","linkMd5ListStr":"cb41ea759b4fff7fa2c9b843d9a3559f","githubUser":"myreaderx","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"16.5 KB","destSize":"16.5 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/1.png","sourceStatusCode":200,"destWidth":875,"destHeight":221,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn100@2020_2/2020/08/24/23-08-39-801_b3b0bbd56733612b.webp","sourceBytes":5518,"destBytes":5518,"feedId":6615,"totalSpendMs":931,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:39","host":"us-012*","referer":"https://segmentfault.com/a/1190000022332809","linkMd5ListStr":"cb41ea759b4fff7fa2c9b843d9a3559f","githubUser":"myreaderx1","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"5.4 KB","destSize":"5.4 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLuyc","sourceStatusCode":200,"destWidth":800,"destHeight":638,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn32@2020_1/2020/08/24/23-08-39-566_da9fdf1e5cbe5397.webp","sourceBytes":59092,"destBytes":20892,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2273,"convertSpendMs":28,"createdTime":"2020-08-25 07:08:38","host":"europe69*","referer":"https://segmentfault.com/a/1190000023660020","linkMd5ListStr":"6a526c91c6f56ccea5eb637c9da38dee","githubUser":"myreaderx30","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"57.7 KB","destSize":"20.4 KB","compressRate":"35.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLKdp","sourceStatusCode":200,"destWidth":800,"destHeight":134,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn24@2020_1/2020/08/24/23-08-39-802_6dcde18ff4f9579f.webp","sourceBytes":88533,"destBytes":16398,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2219,"convertSpendMs":17,"createdTime":"2020-08-25 07:08:38","host":"us-016*","referer":"https://segmentfault.com/a/1190000023733064","linkMd5ListStr":"2bab059fcc83687a9e4e5c0f8280a58a","githubUser":"myreaderx15","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"86.5 KB","destSize":"16 KB","compressRate":"18.5%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLnDZ","sourceStatusCode":200,"destWidth":461,"destHeight":261,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn44@2020_6/2020/08/24/23-08-39-925_15e73f90245f980f.webp","sourceBytes":12275,"destBytes":7396,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2113,"convertSpendMs":6,"createdTime":"2020-08-25 07:08:38","host":"us-028*","referer":"https://segmentfault.com/a/1190000023660020","linkMd5ListStr":"6a526c91c6f56ccea5eb637c9da38dee","githubUser":"myreaderx4","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"12 KB","destSize":"7.2 KB","compressRate":"60.3%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000021954612","sourceStatusCode":200,"destWidth":800,"destHeight":452,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn19@2020_6/2020/08/24/23-08-39-691_173e40b0392302c0.webp","sourceBytes":17692,"destBytes":17692,"feedId":6615,"totalSpendMs":2358,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:38","host":"us-026*","referer":"https://segmentfault.com/a/1190000023651246","linkMd5ListStr":"9a60a00d9e8d732bd6972e94bc783594","githubUser":"myreaderx27","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"17.3 KB","destSize":"17.3 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023652887","sourceStatusCode":200,"destWidth":238,"destHeight":43,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn48@2020_5/2020/08/24/23-08-39-891_6cd080a4e73af923.webp","sourceBytes":6310,"destBytes":2436,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3548,"convertSpendMs":3,"createdTime":"2020-08-25 07:08:37","host":"us-020*","referer":"https://segmentfault.com/a/1190000023652879","linkMd5ListStr":"d0ff9ddefe9a6a882e6318d475159e5e","githubUser":"myreaderx6","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"6.2 KB","destSize":"2.4 KB","compressRate":"38.6%"},{"code":1,"isDone":false,"source":"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/8.png","sourceStatusCode":200,"destWidth":743,"destHeight":273,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn12@2020_5/2020/08/24/23-08-40-119_7b2769b97c50b3fb.webp","sourceBytes":23504,"destBytes":23504,"feedId":6615,"totalSpendMs":1096,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:39","host":"us-55*","referer":"https://segmentfault.com/a/1190000022332809","linkMd5ListStr":"cb41ea759b4fff7fa2c9b843d9a3559f","githubUser":"myreaderx16","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"23 KB","destSize":"23 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLAK3","sourceStatusCode":200,"destWidth":800,"destHeight":505,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn39@2020_5/2020/08/24/23-08-40-208_0326fce0462089d5.webp","sourceBytes":280033,"destBytes":27476,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2464,"convertSpendMs":44,"createdTime":"2020-08-25 07:08:38","host":"us-039*","referer":"https://segmentfault.com/a/1190000023696737","linkMd5ListStr":"6077149de366230a75fc5ccb09f8bad7","githubUser":"myreaderx18","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"273.5 KB","destSize":"26.8 KB","compressRate":"9.8%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLALn","sourceStatusCode":200,"destWidth":543,"destHeight":532,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx25/cdn56@2020_4/2020/08/24/23-08-40-100_b74d346d8a6ba7ce.webp","sourceBytes":94069,"destBytes":44070,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2535,"convertSpendMs":16,"createdTime":"2020-08-25 07:08:38","host":"europe21*","referer":"https://segmentfault.com/a/1190000023696737","linkMd5ListStr":"6077149de366230a75fc5ccb09f8bad7","githubUser":"myreaderx25","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"91.9 KB","destSize":"43 KB","compressRate":"46.8%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbK4xf","sourceStatusCode":200,"destWidth":481,"destHeight":241,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn84@2020_3/2020/08/24/23-08-40-464_0f4e5e7d74c38a3f.webp","sourceBytes":20108,"destBytes":6924,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2071,"convertSpendMs":6,"createdTime":"2020-08-25 07:08:39","host":"europe63*","referer":"https://segmentfault.com/a/1190000023572844","linkMd5ListStr":"b422d5e4e3dee35be3d3afd3b84c77cd","githubUser":"myreaderx10","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"19.6 KB","destSize":"6.8 KB","compressRate":"34.4%"},{"code":1,"isDone":false,"source":"https://tva1.sinaimg.cn/large/007S8ZIlly1ghu97zzd7lj30fx0jzwed.jpg","sourceStatusCode":200,"destWidth":573,"destHeight":719,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn35@2020_1/2020/08/24/23-08-40-294_a6171109d968ad49.webp","sourceBytes":31781,"destBytes":13310,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2965,"convertSpendMs":19,"createdTime":"2020-08-25 07:08:38","host":"europe-59*","referer":"https://segmentfault.com/a/1190000023668057","linkMd5ListStr":"dcb1ca1d6d9e74559b1305ed3b0d3469","githubUser":"myreaderx2","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"31 KB","destSize":"13 KB","compressRate":"41.9%"},{"code":1,"isDone":false,"source":"https://tva1.sinaimg.cn/large/007S8ZIlly1ghu97wrwzzj30aj08ydfv.jpg","sourceStatusCode":200,"destWidth":379,"destHeight":322,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx14/cdn12@2020_3/2020/08/24/23-08-40-518_f5f7dfcb6fc90747.webp","sourceBytes":14122,"destBytes":8532,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3160,"convertSpendMs":6,"createdTime":"2020-08-25 07:08:38","host":"europe-57*","referer":"https://segmentfault.com/a/1190000023668057","linkMd5ListStr":"dcb1ca1d6d9e74559b1305ed3b0d3469","githubUser":"myreaderx14","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"13.8 KB","destSize":"8.3 KB","compressRate":"60.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023708780","sourceStatusCode":200,"destWidth":741,"destHeight":800,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx25/cdn44@2020_6/2020/08/24/23-08-40-620_dfc9c678416ce7f2.webp","sourceBytes":99478,"destBytes":20760,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":4221,"convertSpendMs":114,"createdTime":"2020-08-25 07:08:37","host":"us-031*","referer":"https://segmentfault.com/a/1190000023708775","linkMd5ListStr":"b4d24379ce31382e9336abd377405f85","githubUser":"myreaderx25","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"97.1 KB","destSize":"20.3 KB","compressRate":"20.9%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbK4xe","sourceStatusCode":200,"destWidth":800,"destHeight":309,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn80@2020_2/2020/08/24/23-08-40-513_d8c8f7bcd0b2f161.webp","sourceBytes":27659,"destBytes":16422,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2427,"convertSpendMs":11,"createdTime":"2020-08-25 07:08:39","host":"europe-25*","referer":"https://segmentfault.com/a/1190000023572844","linkMd5ListStr":"b422d5e4e3dee35be3d3afd3b84c77cd","githubUser":"myreaderx3","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"27 KB","destSize":"16 KB","compressRate":"59.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbJgYT","sourceStatusCode":200,"destWidth":800,"destHeight":189,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn92@2020_2/2020/08/24/23-08-40-881_7f8323e1c3c7e5a5.webp","sourceBytes":129123,"destBytes":22456,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2227,"convertSpendMs":17,"createdTime":"2020-08-25 07:08:39","host":"us-033*","referer":"https://segmentfault.com/a/1190000023652718","linkMd5ListStr":"6077149de366230a75fc5ccb09f8bad7,06182f917f57c9d9612487bd563c6868,317dc10a0d3fb89965600980c204116d,edffa444454de4e48a3d973ca7297088","githubUser":"myreaderx12","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"126.1 KB","destSize":"21.9 KB","compressRate":"17.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbK4xj","sourceStatusCode":200,"destWidth":800,"destHeight":414,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn76@2020_3/2020/08/24/23-08-40-898_06b93a933331770f.webp","sourceBytes":27832,"destBytes":9516,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2258,"convertSpendMs":15,"createdTime":"2020-08-25 07:08:39","host":"us-010*","referer":"https://segmentfault.com/a/1190000023572844","linkMd5ListStr":"b422d5e4e3dee35be3d3afd3b84c77cd","githubUser":"myreaderx19","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"27.2 KB","destSize":"9.3 KB","compressRate":"34.2%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023684253","sourceStatusCode":200,"destWidth":800,"destHeight":293,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx/cdn76@2020_6/2020/08/24/23-08-40-810_153921800664839e.webp","sourceBytes":181102,"destBytes":36390,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3652,"convertSpendMs":16,"createdTime":"2020-08-25 07:08:38","host":"us-012*","referer":"https://segmentfault.com/a/1190000023684246","linkMd5ListStr":"420bda976c9e79232c9adc2d2bfab39b","githubUser":"myreaderx","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"176.9 KB","destSize":"35.5 KB","compressRate":"20.1%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbK4xi","sourceStatusCode":200,"destWidth":800,"destHeight":432,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn72@2020_6/2020/08/24/23-08-40-953_0fe59535c76a90d2.webp","sourceBytes":54967,"destBytes":13880,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2496,"convertSpendMs":19,"createdTime":"2020-08-25 07:08:39","host":"us-020*","referer":"https://segmentfault.com/a/1190000023572844","linkMd5ListStr":"b422d5e4e3dee35be3d3afd3b84c77cd","githubUser":"myreaderx5oss","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"53.7 KB","destSize":"13.6 KB","compressRate":"25.3%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbK4xg","sourceStatusCode":200,"destWidth":480,"destHeight":296,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn63@2020_4/2020/08/24/23-08-40-963_15be9c0256e0e892.webp","sourceBytes":26310,"destBytes":8938,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2482,"convertSpendMs":6,"createdTime":"2020-08-25 07:08:39","host":"us-51*","referer":"https://segmentfault.com/a/1190000023572844","linkMd5ListStr":"b422d5e4e3dee35be3d3afd3b84c77cd","githubUser":"myreaderx7","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"25.7 KB","destSize":"8.7 KB","compressRate":"34%"},{"code":1,"isDone":false,"source":"https://tva1.sinaimg.cn/large/007S8ZIlly1ghu97sgc39j30e20csglg.jpg","sourceStatusCode":200,"destWidth":506,"destHeight":460,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn60@2020_1/2020/08/24/23-08-41-132_634987b590838a90.webp","sourceBytes":21558,"destBytes":9976,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2857,"convertSpendMs":8,"createdTime":"2020-08-25 07:08:39","host":"europe61*","referer":"https://segmentfault.com/a/1190000023668057","linkMd5ListStr":"dcb1ca1d6d9e74559b1305ed3b0d3469","githubUser":"myreaderx6","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"21.1 KB","destSize":"9.7 KB","compressRate":"46.3%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbJkcQ","sourceStatusCode":200,"destWidth":800,"destHeight":509,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn3@2020_5/2020/08/24/23-08-41-152_0e8f52e3944cf4dd.webp","sourceBytes":122961,"destBytes":69544,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2354,"convertSpendMs":38,"createdTime":"2020-08-25 07:08:39","host":"us-002*","referer":"https://segmentfault.com/a/1190000023587881","linkMd5ListStr":"38260b3f6e6b52df89d4a67c52a99d4e","githubUser":"myreaderx22","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"120.1 KB","destSize":"67.9 KB","compressRate":"56.6%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbK4xh","sourceStatusCode":200,"destWidth":800,"destHeight":361,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn68@2020_3/2020/08/24/23-08-41-099_18c413ba34379e95.webp","sourceBytes":108569,"destBytes":33160,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2798,"convertSpendMs":96,"createdTime":"2020-08-25 07:08:39","host":"us-031*","referer":"https://segmentfault.com/a/1190000023572844","linkMd5ListStr":"b422d5e4e3dee35be3d3afd3b84c77cd","githubUser":"myreaderx31","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"106 KB","destSize":"32.4 KB","compressRate":"30.5%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000021954610","sourceStatusCode":200,"destWidth":800,"destHeight":410,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn16@2020_6/2020/08/24/23-08-41-359_7ed64be196d18b41.webp","sourceBytes":219416,"destBytes":79918,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3946,"convertSpendMs":27,"createdTime":"2020-08-25 07:08:38","host":"us-037*","referer":"https://segmentfault.com/a/1190000023651246","linkMd5ListStr":"9a60a00d9e8d732bd6972e94bc783594","githubUser":"myreaderx8","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"214.3 KB","destSize":"78 KB","compressRate":"36.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023636711","sourceStatusCode":200,"destWidth":430,"destHeight":430,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn15@2020_3/2020/08/24/23-08-41-491_a91637ac7b4d1501.webp","sourceBytes":21301,"destBytes":14282,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2309,"convertSpendMs":11,"createdTime":"2020-08-25 07:08:40","host":"us-035*","referer":"https://segmentfault.com/a/1190000023636701","linkMd5ListStr":"3f522baba1e817cf81ff90c5e1d10cfb","githubUser":"myreaderx21","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"20.8 KB","destSize":"13.9 KB","compressRate":"67%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023647616","sourceStatusCode":200,"destWidth":276,"destHeight":789,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn31@2020_4/2020/08/24/23-08-41-339_dae97fa38554c9f9.webp","sourceBytes":47370,"destBytes":32878,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2382,"convertSpendMs":11,"createdTime":"2020-08-25 07:08:40","host":"europe67*","referer":"https://segmentfault.com/a/1190000023647609","linkMd5ListStr":"bd58cfa67f4f5a8296c3cadfd7f5f584","githubUser":"myreaderx27","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"46.3 KB","destSize":"32.1 KB","compressRate":"69.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023636712","sourceStatusCode":200,"destWidth":720,"destHeight":321,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn20@2020_5/2020/08/24/23-08-41-617_74973801d641c1f5.webp","sourceBytes":58469,"destBytes":23482,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2466,"convertSpendMs":23,"createdTime":"2020-08-25 07:08:40","host":"us-024*","referer":"https://segmentfault.com/a/1190000023636701","linkMd5ListStr":"3f522baba1e817cf81ff90c5e1d10cfb","githubUser":"myreaderx33","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"57.1 KB","destSize":"22.9 KB","compressRate":"40.2%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023647612","sourceStatusCode":200,"destWidth":800,"destHeight":302,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx14/cdn24@2020_6/2020/08/24/23-08-41-735_107915944ae8e8f0.webp","sourceBytes":7195,"destBytes":5406,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2329,"convertSpendMs":22,"createdTime":"2020-08-25 07:08:40","host":"us-014*","referer":"https://segmentfault.com/a/1190000023647609","linkMd5ListStr":"bd58cfa67f4f5a8296c3cadfd7f5f584","githubUser":"myreaderx14","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"7 KB","destSize":"5.3 KB","compressRate":"75.1%"},{"code":1,"isDone":false,"source":"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/7.png","sourceStatusCode":200,"destWidth":1280,"destHeight":787,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn98@2020_5/2020/08/24/23-08-41-746_deecbd4b726849a4.webp","sourceBytes":56962,"destBytes":56962,"feedId":6615,"totalSpendMs":1011,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:41","host":"us-021*","referer":"https://segmentfault.com/a/1190000022332809","linkMd5ListStr":"cb41ea759b4fff7fa2c9b843d9a3559f","githubUser":"myreaderx10","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"55.6 KB","destSize":"55.6 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://tva1.sinaimg.cn/large/007S8ZIlly1ghu97d1ky0j306g06dt9v.jpg","sourceStatusCode":200,"destWidth":232,"destHeight":229,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn82@2020_4/2020/08/24/23-08-41-795_8c6bb5bc6317c8dc.webp","sourceBytes":10653,"destBytes":7290,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":1328,"convertSpendMs":4,"createdTime":"2020-08-25 07:08:41","host":"europe-59*","referer":"https://segmentfault.com/a/1190000023668057","linkMd5ListStr":"dcb1ca1d6d9e74559b1305ed3b0d3469","githubUser":"myreaderx31","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"10.4 KB","destSize":"7.1 KB","compressRate":"68.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023636707","sourceStatusCode":200,"destWidth":600,"destHeight":87,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn40@2020_4/2020/08/24/23-08-42-022_92b4b2118af3de22.webp","sourceBytes":12859,"destBytes":10486,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2280,"convertSpendMs":13,"createdTime":"2020-08-25 07:08:40","host":"us-037*","referer":"https://segmentfault.com/a/1190000023636701","linkMd5ListStr":"3f522baba1e817cf81ff90c5e1d10cfb","githubUser":"myreaderx24","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"12.6 KB","destSize":"10.2 KB","compressRate":"81.5%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023636709","sourceStatusCode":200,"destWidth":143,"destHeight":49,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn53@2020_4/2020/08/24/23-08-41-847_78d5f3da1847c64b.webp","sourceBytes":5387,"destBytes":1974,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2202,"convertSpendMs":3,"createdTime":"2020-08-25 07:08:40","host":"europe21*","referer":"https://segmentfault.com/a/1190000023636701","linkMd5ListStr":"3f522baba1e817cf81ff90c5e1d10cfb","githubUser":"myreaderx18","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"5.3 KB","destSize":"1.9 KB","compressRate":"36.6%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023636708","sourceStatusCode":200,"destWidth":206,"destHeight":44,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn44@2020_6/2020/08/24/23-08-42-102_38b4354b68e47c64.webp","sourceBytes":9731,"destBytes":3012,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2249,"convertSpendMs":6,"createdTime":"2020-08-25 07:08:40","host":"us-026*","referer":"https://segmentfault.com/a/1190000023636701","linkMd5ListStr":"3f522baba1e817cf81ff90c5e1d10cfb","githubUser":"myreaderx30","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"9.5 KB","destSize":"2.9 KB","compressRate":"31%"},{"code":1,"isDone":false,"source":"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/10.png","sourceStatusCode":200,"destWidth":486,"destHeight":289,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn17@2020_3/2020/08/24/23-08-42-141_e9b5f179c2619f81.webp","sourceBytes":12830,"destBytes":12830,"feedId":6615,"totalSpendMs":894,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:41","host":"us-038*","referer":"https://segmentfault.com/a/1190000022332809","linkMd5ListStr":"cb41ea759b4fff7fa2c9b843d9a3559f","githubUser":"myreaderx22","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"12.5 KB","destSize":"12.5 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023636710","sourceStatusCode":200,"destWidth":800,"destHeight":205,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx23/cdn8@2020_3/2020/08/24/23-08-41-903_966b3e9e7d0df3ae.webp","sourceBytes":45714,"destBytes":19524,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3303,"convertSpendMs":16,"createdTime":"2020-08-25 07:08:39","host":"europe65*","referer":"https://segmentfault.com/a/1190000023636701","linkMd5ListStr":"3f522baba1e817cf81ff90c5e1d10cfb","githubUser":"myreaderx23","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"44.6 KB","destSize":"19.1 KB","compressRate":"42.7%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023636704","sourceStatusCode":200,"destWidth":604,"destHeight":235,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn58@2020_5/2020/08/24/23-08-41-880_4d348bf55d8de54e.webp","sourceBytes":35501,"destBytes":19298,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2315,"convertSpendMs":9,"createdTime":"2020-08-25 07:08:40","host":"europe62*","referer":"https://segmentfault.com/a/1190000023636701","linkMd5ListStr":"3f522baba1e817cf81ff90c5e1d10cfb","githubUser":"myreaderx4","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"34.7 KB","destSize":"18.8 KB","compressRate":"54.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023647615","sourceStatusCode":200,"destWidth":800,"destHeight":576,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn36@2020_3/2020/08/24/23-08-42-134_aa11cbe09197e23f.webp","sourceBytes":21378,"destBytes":11634,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2850,"convertSpendMs":13,"createdTime":"2020-08-25 07:08:40","host":"europe-57*","referer":"https://segmentfault.com/a/1190000023647609","linkMd5ListStr":"bd58cfa67f4f5a8296c3cadfd7f5f584","githubUser":"myreaderx15","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"20.9 KB","destSize":"11.4 KB","compressRate":"54.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023647617","sourceStatusCode":200,"destWidth":263,"destHeight":191,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn65@2020_2/2020/08/24/23-08-42-437_c0f9fa580c29ad2c.webp","sourceBytes":3091,"destBytes":2042,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2251,"convertSpendMs":3,"createdTime":"2020-08-25 07:08:40","host":"us-033*","referer":"https://segmentfault.com/a/1190000023647609","linkMd5ListStr":"bd58cfa67f4f5a8296c3cadfd7f5f584","githubUser":"myreaderx11","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"3 KB","destSize":"2 KB","compressRate":"66.1%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000022678951","sourceStatusCode":200,"destWidth":800,"destHeight":292,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn74@2020_4/2020/08/24/23-08-42-545_437227b461a5c9c8.webp","sourceBytes":26554,"destBytes":26554,"feedId":6615,"totalSpendMs":2161,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:41","host":"us-014*","referer":"https://segmentfault.com/a/1190000023657729","linkMd5ListStr":"9569faa8acc0e079a1c10828ff9a417e","githubUser":"myreaderx6","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"25.9 KB","destSize":"25.9 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023647618","sourceStatusCode":200,"destWidth":800,"destHeight":488,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx13/cdn61@2020_5/2020/08/24/23-08-42-563_0092cc3deacdf28c.webp","sourceBytes":48851,"destBytes":14288,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2482,"convertSpendMs":54,"createdTime":"2020-08-25 07:08:40","host":"us-52*","referer":"https://segmentfault.com/a/1190000023647609","linkMd5ListStr":"bd58cfa67f4f5a8296c3cadfd7f5f584","githubUser":"myreaderx13","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"47.7 KB","destSize":"14 KB","compressRate":"29.2%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbKY8B","sourceStatusCode":200,"destWidth":800,"destHeight":609,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn84@2020_5/2020/08/24/23-08-42-674_0778a1e1cb410796.webp","sourceBytes":157935,"destBytes":28592,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2388,"convertSpendMs":67,"createdTime":"2020-08-25 07:08:41","host":"europe-60*","referer":"https://segmentfault.com/a/1190000023552474","linkMd5ListStr":"518d797df1c7c9d30e2acaaec433d26b","githubUser":"myreaderx5oss","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"154.2 KB","destSize":"27.9 KB","compressRate":"18.1%"},{"code":1,"isDone":false,"source":"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/6.png","sourceStatusCode":200,"destWidth":770,"destHeight":388,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn51@2020_2/2020/08/24/23-08-42-743_5e3a1f6dde644120.webp","sourceBytes":22152,"destBytes":22152,"feedId":6615,"totalSpendMs":1266,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:42","host":"europe67*","referer":"https://segmentfault.com/a/1190000022332809","linkMd5ListStr":"cb41ea759b4fff7fa2c9b843d9a3559f","githubUser":"myreaderx27","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"21.6 KB","destSize":"21.6 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023647614","sourceStatusCode":200,"destWidth":800,"destHeight":585,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn28@2020_2/2020/08/24/23-08-43-039_31d9dc656eb69c0c.webp","sourceBytes":23060,"destBytes":12060,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3537,"convertSpendMs":40,"createdTime":"2020-08-25 07:08:40","host":"us-004*","referer":"https://segmentfault.com/a/1190000023647609","linkMd5ListStr":"bd58cfa67f4f5a8296c3cadfd7f5f584","githubUser":"myreaderx8","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"22.5 KB","destSize":"11.8 KB","compressRate":"52.3%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLnZN","sourceStatusCode":200,"destWidth":150,"destHeight":150,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn10@2020_1/2020/08/24/23-08-42-916_d4723e98ac161e6d.webp","sourceBytes":11952,"destBytes":4564,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2085,"convertSpendMs":4,"createdTime":"2020-08-25 07:08:41","host":"europe67*","referer":"https://segmentfault.com/a/1190000023660020","linkMd5ListStr":"6a526c91c6f56ccea5eb637c9da38dee","githubUser":"myreaderx1","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"11.7 KB","destSize":"4.5 KB","compressRate":"38.2%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLrdc","sourceStatusCode":200,"destWidth":250,"destHeight":250,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx25/cdn70@2020_5/2020/08/24/23-08-43-038_f7428127a3a50bf0.webp","sourceBytes":58472,"destBytes":11384,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2865,"convertSpendMs":6,"createdTime":"2020-08-25 07:08:40","host":"us-023*","referer":"https://segmentfault.com/a/1190000023660020","linkMd5ListStr":"6a526c91c6f56ccea5eb637c9da38dee","githubUser":"myreaderx25","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"57.1 KB","destSize":"11.1 KB","compressRate":"19.5%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000020937494","sourceStatusCode":200,"destWidth":800,"destHeight":363,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn77@2020_2/2020/08/24/23-08-43-037_52b4b78e1ae44485.webp","sourceBytes":21618,"destBytes":21618,"feedId":6615,"totalSpendMs":2623,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:41","host":"us-005*","referer":"https://segmentfault.com/a/1190000023651246","linkMd5ListStr":"9a60a00d9e8d732bd6972e94bc783594","githubUser":"myreaderx7","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"21.1 KB","destSize":"21.1 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbKY8C","sourceStatusCode":200,"destWidth":800,"destHeight":609,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn90@2020_1/2020/08/24/23-08-43-089_00fb40bbb61603de.webp","sourceBytes":174359,"destBytes":30298,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2419,"convertSpendMs":72,"createdTime":"2020-08-25 07:08:41","host":"us-040*","referer":"https://segmentfault.com/a/1190000023552474","linkMd5ListStr":"518d797df1c7c9d30e2acaaec433d26b","githubUser":"myreaderx19","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"170.3 KB","destSize":"29.6 KB","compressRate":"17.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLnYJ","sourceStatusCode":200,"destWidth":300,"destHeight":300,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn2@2020_2/2020/08/24/23-08-43-211_4c945cb1f7458133.webp","sourceBytes":44855,"destBytes":11756,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2144,"convertSpendMs":8,"createdTime":"2020-08-25 07:08:41","host":"us-012*","referer":"https://segmentfault.com/a/1190000023660020","linkMd5ListStr":"6a526c91c6f56ccea5eb637c9da38dee","githubUser":"myreaderx12","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"43.8 KB","destSize":"11.5 KB","compressRate":"26.2%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLnYZ","sourceStatusCode":200,"destWidth":300,"destHeight":300,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx32/cdn5@2020_3/2020/08/24/23-08-43-205_580793b106d90c39.webp","sourceBytes":29595,"destBytes":8858,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2219,"convertSpendMs":7,"createdTime":"2020-08-25 07:08:41","host":"us-003*","referer":"https://segmentfault.com/a/1190000023660020","linkMd5ListStr":"6a526c91c6f56ccea5eb637c9da38dee","githubUser":"myreaderx32","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"28.9 KB","destSize":"8.7 KB","compressRate":"29.9%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbKY8E","sourceStatusCode":200,"destWidth":800,"destHeight":609,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn94@2020_3/2020/08/24/23-08-43-312_99173a1bbea09ba0.webp","sourceBytes":187250,"destBytes":32274,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2593,"convertSpendMs":254,"createdTime":"2020-08-25 07:08:41","host":"us-031*","referer":"https://segmentfault.com/a/1190000023552474","linkMd5ListStr":"518d797df1c7c9d30e2acaaec433d26b","githubUser":"myreaderx3","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"182.9 KB","destSize":"31.5 KB","compressRate":"17.2%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023636706","sourceStatusCode":200,"destWidth":610,"destHeight":237,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn49@2020_5/2020/08/24/23-08-43-314_cd76465a00b523c4.webp","sourceBytes":35565,"destBytes":19546,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3488,"convertSpendMs":10,"createdTime":"2020-08-25 07:08:40","host":"us-007*","referer":"https://segmentfault.com/a/1190000023636701","linkMd5ListStr":"3f522baba1e817cf81ff90c5e1d10cfb","githubUser":"myreaderx2","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"34.7 KB","destSize":"19.1 KB","compressRate":"55%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023699210","sourceStatusCode":200,"destWidth":257,"destHeight":253,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn26@2020_5/2020/08/24/23-08-43-739_f76cb0b6b146d3e0.webp","sourceBytes":93779,"destBytes":11922,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2306,"convertSpendMs":88,"createdTime":"2020-08-25 07:08:42","host":"us-019*","referer":"https://segmentfault.com/a/1190000023699206","linkMd5ListStr":"fbe29875f9063bd2517a65d848a2914c","githubUser":"myreaderx16","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"91.6 KB","destSize":"11.6 KB","compressRate":"12.7%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLvcU","sourceStatusCode":200,"destWidth":450,"destHeight":800,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx23/cdn22@2020_1/2020/08/24/23-08-43-542_29a435c36e22e408.webp","sourceBytes":653199,"destBytes":73876,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2544,"convertSpendMs":32,"createdTime":"2020-08-25 07:08:41","host":"us-028*","referer":"https://segmentfault.com/a/1190000023675512","linkMd5ListStr":"8130037c23e0c993c51e97490b17f7b6","githubUser":"myreaderx23","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"637.9 KB","destSize":"72.1 KB","compressRate":"11.3%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023699211","sourceStatusCode":200,"destWidth":800,"destHeight":543,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn29@2020_5/2020/08/24/23-08-43-675_a2f4276387b1f0d3.webp","sourceBytes":84284,"destBytes":20890,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2250,"convertSpendMs":32,"createdTime":"2020-08-25 07:08:42","host":"us-010*","referer":"https://segmentfault.com/a/1190000023699206","linkMd5ListStr":"fbe29875f9063bd2517a65d848a2914c","githubUser":"myreaderx21","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"82.3 KB","destSize":"20.4 KB","compressRate":"24.8%"},{"code":1,"isDone":false,"source":"https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/5.png","sourceStatusCode":200,"destWidth":871,"destHeight":507,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn8@2020_3/2020/08/24/23-08-43-737_c66e8101d9194ace.webp","sourceBytes":26740,"destBytes":26740,"feedId":6615,"totalSpendMs":950,"convertSpendMs":0,"createdTime":"2020-08-25 07:08:43","host":"us-027*","referer":"https://segmentfault.com/a/1190000022332809","linkMd5ListStr":"cb41ea759b4fff7fa2c9b843d9a3559f","githubUser":"myreaderx3","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"26.1 KB","destSize":"26.1 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://tva1.sinaimg.cn/large/007S8ZIlly1ghu97gshgmj306o06o0so.jpg","sourceStatusCode":200,"destWidth":240,"destHeight":240,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx/cdn16@2020_4/2020/08/24/23-08-43-891_cf34405c50ce7960.webp","sourceBytes":11394,"destBytes":9936,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":815,"convertSpendMs":8,"createdTime":"2020-08-25 07:08:43","host":"us-014*","referer":"https://segmentfault.com/a/1190000023668057","linkMd5ListStr":"dcb1ca1d6d9e74559b1305ed3b0d3469","githubUser":"myreaderx","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"11.1 KB","destSize":"9.7 KB","compressRate":"87.2%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023699212","sourceStatusCode":200,"destWidth":341,"destHeight":395,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn34@2020_6/2020/08/24/23-08-43-818_9d28dfb62c6fab5b.webp","sourceBytes":213738,"destBytes":27512,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2367,"convertSpendMs":13,"createdTime":"2020-08-25 07:08:42","host":"us-001*","referer":"https://segmentfault.com/a/1190000023699206","linkMd5ListStr":"fbe29875f9063bd2517a65d848a2914c","githubUser":"myreaderx33","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"208.7 KB","destSize":"26.9 KB","compressRate":"12.9%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023676564","sourceStatusCode":200,"destWidth":700,"destHeight":553,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn60@2020_5/2020/08/24/23-08-44-070_4c20e67204c9c665.webp","sourceBytes":31559,"destBytes":9366,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2135,"convertSpendMs":53,"createdTime":"2020-08-25 07:08:42","host":"us-53*","referer":"https://segmentfault.com/a/1190000023676547","linkMd5ListStr":"c737187f4a9de041a952fc2de76447f5","githubUser":"myreaderx24","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"30.8 KB","destSize":"9.1 KB","compressRate":"29.7%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023699213","sourceStatusCode":200,"destWidth":800,"destHeight":328,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx14/cdn38@2020_5/2020/08/24/23-08-43-614_dc0539cebd31b98e.webp","sourceBytes":154295,"destBytes":27974,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2528,"convertSpendMs":18,"createdTime":"2020-08-25 07:08:42","host":"europe65*","referer":"https://segmentfault.com/a/1190000023699206","linkMd5ListStr":"fbe29875f9063bd2517a65d848a2914c","githubUser":"myreaderx14","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"150.7 KB","destSize":"27.3 KB","compressRate":"18.1%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023676560","sourceStatusCode":200,"destWidth":700,"destHeight":768,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn56@2020_1/2020/08/24/23-08-43-795_6fb596722509c584.webp","sourceBytes":123173,"destBytes":26190,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2575,"convertSpendMs":27,"createdTime":"2020-08-25 07:08:42","host":"europe-60*","referer":"https://segmentfault.com/a/1190000023676547","linkMd5ListStr":"c737187f4a9de041a952fc2de76447f5","githubUser":"myreaderx15","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"120.3 KB","destSize":"25.6 KB","compressRate":"21.3%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023676563","sourceStatusCode":200,"destWidth":800,"destHeight":279,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn64@2020_6/2020/08/24/23-08-44-213_2c7c0f8d1664550e.webp","sourceBytes":37139,"destBytes":11340,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2284,"convertSpendMs":13,"createdTime":"2020-08-25 07:08:42","host":"us-037*","referer":"https://segmentfault.com/a/1190000023676547","linkMd5ListStr":"c737187f4a9de041a952fc2de76447f5","githubUser":"myreaderx30","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"36.3 KB","destSize":"11.1 KB","compressRate":"30.5%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023699214","sourceStatusCode":200,"destWidth":220,"destHeight":220,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn42@2020_1/2020/08/24/23-08-43-808_86b4044738c9cb37.webp","sourceBytes":415888,"destBytes":100852,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2827,"convertSpendMs":138,"createdTime":"2020-08-25 07:08:42","host":"europe-56*","referer":"https://segmentfault.com/a/1190000023699206","linkMd5ListStr":"fbe29875f9063bd2517a65d848a2914c","githubUser":"myreaderx8","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"406.1 KB","destSize":"98.5 KB","compressRate":"24.2%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023676558","sourceStatusCode":200,"destWidth":800,"destHeight":161,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx25/cdn88@2020_6/2020/08/24/23-08-44-191_7a2abde1a113f500.webp","sourceBytes":28919,"destBytes":6444,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2223,"convertSpendMs":9,"createdTime":"2020-08-25 07:08:42","host":"europe21*","referer":"https://segmentfault.com/a/1190000023676547","linkMd5ListStr":"c737187f4a9de041a952fc2de76447f5","githubUser":"myreaderx25","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"28.2 KB","destSize":"6.3 KB","compressRate":"22.3%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023663498","sourceStatusCode":200,"destWidth":422,"destHeight":297,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn92@2020_4/2020/08/24/23-08-44-175_2d68dd852b72db7e.webp","sourceBytes":15563,"destBytes":17606,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2240,"convertSpendMs":8,"createdTime":"2020-08-25 07:08:42","host":"europe64*","referer":"https://segmentfault.com/a/1190000023663493","linkMd5ListStr":"b02edc6d556383db4bdfaad310312379","githubUser":"myreaderx6","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"15.2 KB","destSize":"17.2 KB","compressRate":"113.1%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023663497","sourceStatusCode":200,"destWidth":800,"destHeight":327,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn95@2020_5/2020/08/24/23-08-44-284_d3fa1282d5721ffb.webp","sourceBytes":21653,"destBytes":15526,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2200,"convertSpendMs":9,"createdTime":"2020-08-25 07:08:43","host":"europe-58*","referer":"https://segmentfault.com/a/1190000023663493","linkMd5ListStr":"b02edc6d556383db4bdfaad310312379","githubUser":"myreaderx7","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"21.1 KB","destSize":"15.2 KB","compressRate":"71.7%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023676562","sourceStatusCode":200,"destWidth":800,"destHeight":613,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn71@2020_5/2020/08/24/23-08-44-474_56f279fc9b89be8a.webp","sourceBytes":38048,"destBytes":29160,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2324,"convertSpendMs":33,"createdTime":"2020-08-25 07:08:42","host":"us-022*","referer":"https://segmentfault.com/a/1190000023676547","linkMd5ListStr":"c737187f4a9de041a952fc2de76447f5","githubUser":"myreaderx18","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"37.2 KB","destSize":"28.5 KB","compressRate":"76.6%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLrbr","sourceStatusCode":200,"destWidth":407,"destHeight":800,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn14@2020_6/2020/08/24/23-08-44-242_8fce31e013f973d0.webp","sourceBytes":178422,"destBytes":16734,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3643,"convertSpendMs":17,"createdTime":"2020-08-25 07:08:41","host":"europe-58*","referer":"https://segmentfault.com/a/1190000023660020","linkMd5ListStr":"6a526c91c6f56ccea5eb637c9da38dee","githubUser":"myreaderx29","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"174.2 KB","destSize":"16.3 KB","compressRate":"9.4%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023676559","sourceStatusCode":200,"destWidth":800,"destHeight":497,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn83@2020_4/2020/08/24/23-08-44-531_3579403f639c7f72.webp","sourceBytes":191632,"destBytes":53100,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2356,"convertSpendMs":48,"createdTime":"2020-08-25 07:08:43","host":"us-004*","referer":"https://segmentfault.com/a/1190000023676547","linkMd5ListStr":"c737187f4a9de041a952fc2de76447f5","githubUser":"myreaderx11","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"187.1 KB","destSize":"51.9 KB","compressRate":"27.7%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023676565","sourceStatusCode":200,"destWidth":800,"destHeight":467,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx13/cdn79@2020_6/2020/08/24/23-08-44-563_3b2757439dfe26eb.webp","sourceBytes":253568,"destBytes":80948,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2487,"convertSpendMs":44,"createdTime":"2020-08-25 07:08:43","host":"us-010*","referer":"https://segmentfault.com/a/1190000023676547","linkMd5ListStr":"c737187f4a9de041a952fc2de76447f5","githubUser":"myreaderx13","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"247.6 KB","destSize":"79.1 KB","compressRate":"31.9%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023676561","sourceStatusCode":200,"destWidth":700,"destHeight":362,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn76@2020_4/2020/08/24/23-08-44-872_34e1f70a34f32d2c.webp","sourceBytes":53038,"destBytes":18160,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2208,"convertSpendMs":22,"createdTime":"2020-08-25 07:08:43","host":"us-016*","referer":"https://segmentfault.com/a/1190000023676547","linkMd5ListStr":"c737187f4a9de041a952fc2de76447f5","githubUser":"myreaderx4","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"51.8 KB","destSize":"17.7 KB","compressRate":"34.2%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023622137","sourceStatusCode":200,"destWidth":800,"destHeight":771,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn100@2020_3/2020/08/24/23-08-45-005_b456f90a4d7dc104.webp","sourceBytes":68277,"destBytes":59176,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2460,"convertSpendMs":27,"createdTime":"2020-08-25 07:08:43","host":"us-51*","referer":"https://segmentfault.com/a/1190000023622134","linkMd5ListStr":"feb087fef9d4181f56dd8589fa8fcc79","githubUser":"myreaderx31","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"66.7 KB","destSize":"57.8 KB","compressRate":"86.7%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLveu","sourceStatusCode":200,"destWidth":800,"destHeight":533,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn4@2020_2/2020/08/24/23-08-45-148_de46592035a11e50.webp","sourceBytes":603023,"destBytes":38592,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2471,"convertSpendMs":38,"createdTime":"2020-08-25 07:08:43","host":"us-034*","referer":"https://segmentfault.com/a/1190000023675512","linkMd5ListStr":"8130037c23e0c993c51e97490b17f7b6","githubUser":"myreaderx19","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"588.9 KB","destSize":"37.7 KB","compressRate":"6.4%"},{"code":1,"isDone":false,"source":"https://tva1.sinaimg.cn/large/007S8ZIlly1ghu978x2kog3064064tg4.gif","sourceStatusCode":200,"destWidth":220,"destHeight":220,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn12@2020_2/2020/08/24/23-08-45-134_20348afea74325a7.webp","sourceBytes":283528,"destBytes":64618,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2257,"convertSpendMs":113,"createdTime":"2020-08-25 07:08:43","host":"us-020*","referer":"https://segmentfault.com/a/1190000023668057","linkMd5ListStr":"dcb1ca1d6d9e74559b1305ed3b0d3469","githubUser":"myreaderx10","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"276.9 KB","destSize":"63.1 KB","compressRate":"22.8%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/remote/1460000023604340","sourceStatusCode":200,"destWidth":720,"destHeight":363,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx32/cdn95@2020_3/2020/08/24/23-08-44-556_9e65854396b9e3eb.webp","sourceBytes":27874,"destBytes":20478,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3200,"convertSpendMs":10,"createdTime":"2020-08-25 07:08:42","host":"us-022*","referer":"https://segmentfault.com/a/1190000023604337","linkMd5ListStr":"7fbcd44c2485b915a169b959a08502eb","githubUser":"myreaderx32","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"27.2 KB","destSize":"20 KB","compressRate":"73.5%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLq6p","sourceStatusCode":200,"destWidth":440,"destHeight":440,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn20@2020_5/2020/08/24/23-08-45-396_546149266b4954c9.webp","sourceBytes":94488,"destBytes":16716,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2287,"convertSpendMs":13,"createdTime":"2020-08-25 07:08:43","host":"us-008*","referer":"https://segmentfault.com/a/1190000023660020","linkMd5ListStr":"6a526c91c6f56ccea5eb637c9da38dee","githubUser":"myreaderx12","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"92.3 KB","destSize":"16.3 KB","compressRate":"17.7%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLvd2","sourceStatusCode":200,"destWidth":800,"destHeight":530,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx32/cdn23@2020_3/2020/08/24/23-08-45-486_3343783897cb269e.webp","sourceBytes":434024,"destBytes":22550,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":2383,"convertSpendMs":35,"createdTime":"2020-08-25 07:08:43","host":"us-002*","referer":"https://segmentfault.com/a/1190000023675512","linkMd5ListStr":"8130037c23e0c993c51e97490b17f7b6","githubUser":"myreaderx32","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"423.9 KB","destSize":"22 KB","compressRate":"5.2%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLvde","sourceStatusCode":200,"destWidth":800,"destHeight":533,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn67@2020_4/2020/08/24/23-08-45-893_2b9c9b5a1aa9ddf4.webp","sourceBytes":504515,"destBytes":23612,"targetWebpQuality":75,"feedId":6615,"totalSpendMs":3832,"convertSpendMs":34,"createdTime":"2020-08-25 07:08:42","host":"us-029*","referer":"https://segmentfault.com/a/1190000023675512","linkMd5ListStr":"8130037c23e0c993c51e97490b17f7b6","githubUser":"myreaderx2","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"492.7 KB","destSize":"23.1 KB","compressRate":"4.7%"}],"successGithubMap":{"myreaderx14":9,"myreaderx8":9,"myreaderx7":11,"myreaderx15":9,"myreaderx16":9,"myreaderx6":10,"myreaderx10":10,"myreaderx4":10,"myreaderx32":9,"myreaderx3":11,"myreaderx33":10,"myreaderx11":10,"myreaderx12":11,"myreaderx2":9,"myreaderx1":9,"myreaderx13":9,"myreaderx30":10,"myreaderx31":11,"myreaderx18":10,"myreaderx19":11,"myreaderx":10,"myreaderx25":10,"myreaderx27":10,"myreaderx21":10,"myreaderx22":9,"myreaderx23":10,"myreaderx24":10,"myreaderx5oss":9,"myreaderx29":8},"failGithubMap":{}}
{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2021-06-06 12:35:54","updatedTime":"2021-06-06 12:35:54","title":"用uid分库，uname上的查询怎么办？","link":"http://weixin.sogou.com/weixin?type=2&query=%E6%9E%B6%E6%9E%84%E5%B8%88%E4%B9%8B%E8%B7%AF+%E7%94%A8uid%E5%88%86%E5%BA%93%EF%BC%8Cuname%E4%B8%8A%E7%9A%84%E6%9F%A5%E8%AF%A2%E6%80%8E%E4%B9%88%E5%8A%9E%EF%BC%9F","description":"<div><div><div id=\"media\" class=\"rich_media_thumb_wrp\">\n\n            <img class=\"rich_media_thumb\" src=\"http://content.sov5.cn/mmbiz_png/YrezxckhYOyopbPRUaMFgG0H93ibyFhR1Aa1hD3cY5XQtI4hI7gZvZSTgs4zgpwKSyfuia3CJT9Diaq0cibiciaI0Z2A?imageView2/1/w/600\">\n        </div>\n    \n\n    \n\n    <div class=\"rich_media_content\" id=\"js_content\">\n                    \n\n                    \n                    \n                    \n                    <p style=\"line-height: 1.75em;\" data-mpa-powered-by=\"yiban.io\"><span style=\"font-size: 15px;letter-spacing: 1px;\">用户中心是几乎每一个公司必备的基础服务，用户注册、登录、信息查询与修改都离不开用户中心。</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"><br></span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">当数据量越来越大时，需要多用户中心进行水平切分。最常见的水平切分方式，</span><span style=\"font-size: 15px;letter-spacing: 1px;color: rgb(255, 76, 0);\">按照uid取模分库</span><span style=\"font-size: 15px;letter-spacing: 1px;\">：</span></p><p style=\"line-height: 1.75em;\"><img data-ratio=\"0.4117647058823529\" data-s=\"300,640\" data-type=\"png\" data-w=\"306\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/YrezxckhYOyopbPRUaMFgG0H93ibyFhR1XU7XZ5Llv3XIWjerprU7WczECzHSMniaGZG1ibcXL5rzcuKk0Mc3yN2Q/640?wx_fmt=png\" style=\"max-width: 600px\"></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">通过uid取模，将数据分布到多个数据库实例上去，提高服务实例个数，降低单库数据量，以达到扩容的目的。</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"><br></span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">水平切分之后：</span></p><p style=\"line-height: 1.75em;\"><img data-ratio=\"0.5618729096989966\" data-s=\"300,640\" data-type=\"png\" data-w=\"299\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/YrezxckhYOyopbPRUaMFgG0H93ibyFhR12NPH6UWxcTGIhDs1traUtibSFRt6QndHx4cSk8zfXbffiaiaExRcEGCqA/640?wx_fmt=png\" style=\"max-width: 600px\"></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">uid属性上的查询可以直接路由到库，如上图，假设访问uid=124的数据，取模后能够直接定位db-user1。</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"><br></span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">对于uname上的查询，就不能这么幸运了：</span></p><p style=\"line-height: 1.75em;\"><img data-ratio=\"0.5667752442996743\" data-s=\"300,640\" data-type=\"png\" data-w=\"307\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/YrezxckhYOyopbPRUaMFgG0H93ibyFhR1DkB3JDYrUoSLJ6b904UPk2towrGLyicKI1ufrH95cL6r3U7UZq0caGQ/640?wx_fmt=png\" style=\"max-width: 600px\"></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">uname上的查询，如上图，假设访问uname=shenjian的数据，由于不知道数据落在哪个库上，</span><span style=\"font-size: 15px;letter-spacing: 1px;color: rgb(255, 76, 0);\">往往需要遍历所有库（扫全库法）</span><span style=\"font-size: 15px;letter-spacing: 1px;\">，当分库数量多起来，性能会显著降低。</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"><br></span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">用uid分库，如何高效实现上的查询，是本文将要讨论的问题。</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"><br></span></p><p style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">方案一：索引表法</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\"></span></p><p style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">思路</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\">：uid能直接定位到库，uname不能直接定位到库，如果通过uname能查询到uid，问题解决。</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"><br></span></p><p style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">解决方案</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\">：</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（1）建立一个索引表记录uname到uid的映射关系；</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（2）用uname来访问时，先通过索引表查询到uid，再定位相应的库；</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（3）索引表属性较少，可以容纳非常多数据，一般不需要分库；</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（4）如果数据量过大，可以通过uname来分库；</span></p><p style=\"line-height: 1.75em;\"><br></p><p style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">潜在不足</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\">：多一次数据库查询，性能下降一倍。</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"><br></span></p><p style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">方案二：缓存映射法</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\"></span></p><p style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">思路</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\">：访问索引表性能较低，把映射关系放在缓存里性能更佳。</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"><br></span></p><p style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">解决方案</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\">：</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（1）uname查询先到cache中查询uid，再根据uid定位数据库；</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（2）假设cache miss，采用扫全库法获取uname对应的uid，放入cache；</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（3）uname到uid的映射关系不会变化，映射关系一旦放入缓存，不会更改，无需淘汰，缓存命中率超高；</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（4）如果数据量过大，可以通过name进行cache水平切分；</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"><br></span></p><p style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">潜在不足</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\">：多一次cache查询。</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"><br></span></p><p style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">方案三：uname生成uid</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\"></span></p><p style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">思路</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\">：</span><span style=\"font-size: 15px;letter-spacing: 1px;\">不进行远程查询，由</span><span style=\"font-size: 15px;letter-spacing: 1px;\">uname</span><span style=\"font-size: 15px;letter-spacing: 1px;\">直接得到</span><span style=\"font-size: 15px;letter-spacing: 1px;\">uid。</span><br></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"><br></span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">解决方案：</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（1）在用户注册时，设计函数uname生成uid，</span><span style=\"letter-spacing: 1px;font-size: 12px;\">uid=f(uname)</span><span style=\"font-size: 15px;letter-spacing: 1px;\">，按uid分库插入数据；</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（2）用uname来访问时，先通过函数计算出uid，即</span><span style=\"letter-spacing: 1px;font-size: 12px;\">uid=f(uname)</span><span style=\"font-size: 15px;letter-spacing: 1px;\">再来一遍，由uid路由到对应库；</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"><br></span></p><p style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">潜在不足</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\">：该函数设计需要非常讲究技巧，有uid生成冲突风险。</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"><br></span></p><p style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">方案四：基因法，uname基因融入uid</span></strong></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"><br></span></p><p style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">思路</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\">：不能用uname生成uid，可以从uname抽取“基因”，融入uid中。</span></p><p style=\"line-height: 1.75em;\"><img data-ratio=\"0.30297397769516726\" data-s=\"300,640\" data-type=\"png\" data-w=\"538\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/YrezxckhYOyopbPRUaMFgG0H93ibyFhR1e0Nuu1db2rIq0Nyt8GRuXrTJ0CP7F9icicHHfTrf00ysRkWcAtHBVz6A/640?wx_fmt=png\" style=\"max-width: 600px\"></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">假设分8库，采用uid%8路由，潜台词是，uid的最后3个bit决定这条数据落在哪个库上，这3个bit就是所谓的“基因”。</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"><br></span></p><p style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">解决方案</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\">：</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（1）在用户注册时，设计函数uname生成3bit基因，</span><span style=\"letter-spacing: 1px;font-size: 12px;\">uname_gene=f(uname)</span><span style=\"font-size: 15px;letter-spacing: 1px;\">，如上图粉色部分；</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（2）同时，生成61bit的全局唯一id，作为用户的标识，如上图绿色部分；</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（3）接着把3bit的</span><span style=\"letter-spacing: 1px;font-size: 12px;\">uname_gene</span><span style=\"font-size: 15px;letter-spacing: 1px;\">也作为uid的一部分，如上图屎黄色部分；</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（4）生成64bit的uid，由id和</span><span style=\"letter-spacing: 1px;font-size: 12px;\">uname_gene</span><span style=\"font-size: 15px;letter-spacing: 1px;\">拼装而成，并按照uid分库插入数据；</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（5）用uname来访问时，先通过函数由uname再次复原3bit基因，</span><span style=\"letter-spacing: 1px;font-size: 12px;\">uname_gene=f(uname)</span><span style=\"font-size: 15px;letter-spacing: 1px;\">，通过</span><span style=\"letter-spacing: 1px;font-size: 12px;\">uname_gene%8</span><span style=\"font-size: 15px;letter-spacing: 1px;\">直接定位到库；</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"><br></span></p><p style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">总结</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\"></span></p><p style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">业务场景</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\">：用户中心，数据量大，通过uid分库后，通过uname路由不到库。</span></p><p style=\"line-height: 1.75em;\"><br></p><p style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">解决方案</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\">：</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（1）</span><span style=\"font-size: 15px;letter-spacing: 1px;color: rgb(255, 76, 0);\">扫全库法</span><span style=\"font-size: 15px;letter-spacing: 1px;\">：遍历所有库；</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（2）</span><span style=\"font-size: 15px;letter-spacing: 1px;color: rgb(255, 76, 0);\">索引表法</span><span style=\"font-size: 15px;letter-spacing: 1px;\">：数据库中记录uname到uid的映射关系；</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（3）</span><span style=\"font-size: 15px;letter-spacing: 1px;color: rgb(255, 76, 0);\">缓存映射法</span><span style=\"font-size: 15px;letter-spacing: 1px;\">：缓存中记录uname到uid的映射关系；</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（4）</span><span style=\"font-size: 15px;letter-spacing: 1px;color: rgb(255, 76, 0);\">uname生成uid</span><span style=\"font-size: 15px;letter-spacing: 1px;\">；</span></p><p style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（5）</span><span style=\"font-size: 15px;letter-spacing: 1px;color: rgb(255, 76, 0);\">基因法</span><span style=\"font-size: 15px;letter-spacing: 1px;\">：uname基因融入uid；</span></p><section class=\"mp_profile_iframe_wrp\"><mpprofile class=\"js_uneditable custom_select_card mp_profile_iframe\" data-pluginname=\"mpprofile\" data-id=\"MjM5ODYxMDA5OQ==\" data-headimg=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/YrezxckhYOxbibeY4UQvLjjG76dIsbXYGaaKCJpqU0kzRuu3r2CXosccgtc57I15CePibfpQMd5dBibXZDNNZYtkg/0?wx_fmt=png\" data-nickname=\"架构师之路\" data-alias=\"road5858\" data-signature=\"架构师之路，坚持撰写接地气的架构文章\" data-from=\"0\"></mpprofile></section><p style=\"line-height: 1.75em;\"><strong style=\"font-family: -apple-system-font, BlinkMacSystemFont, \" helvetica neue sc sans gb yahei ui arial sans-serif><span style=\"max-width: 100%;font-size: 15px;color: rgb(0, 0, 0);letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">相关推荐</span></strong><span style=\"font-family: -apple-system-font, BlinkMacSystemFont, \" helvetica neue sc sans gb yahei ui arial sans-serif rgb border-box break-word>：</span><br></p><section style=\"max-width: 100%;letter-spacing: 0.544px;white-space: normal;min-height: 1em;font-family: -apple-system-font, BlinkMacSystemFont, \" helvetica neue sc sans gb yahei ui arial sans-serif rgb border-box break-word><span style=\"max-width: 100%;letter-spacing: 0.544px;box-sizing: border-box !important;overflow-wrap: break-word !important;\"></span></section><section style=\"max-width: 100%;font-family: -apple-system, BlinkMacSystemFont, \" helvetica neue sc sans gb yahei ui arial sans-serif normal rgb border-box break-word><span style=\"max-width: 100%;font-size: 15px;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">《</span><a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651967047&amp;idx=1&amp;sn=b605fe50e6dd74ecad659c464a0e29ee&amp;chksm=bd2d7b9b8a5af28d35c13e469e8e2c6a7082f00e608fd52d999fc0f7a6aec016faf2a8d748fa&amp;scene=21#wechat_redirect\" data-itemshowtype=\"0\" tab=\"innerlink\" data-linktype=\"2\" hasload=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);cursor: pointer;max-width: 100%;font-size: 15px;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">InnoDB并发如此高，原因竟然在这？</a><span style=\"max-width: 100%;font-size: 15px;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">》</span></section><section style=\"max-width: 100%;font-family: -apple-system, BlinkMacSystemFont, \" helvetica neue sc sans gb yahei ui arial sans-serif normal rgb border-box break-word><span style=\"max-width: 100%;font-size: 15px;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">《</span><a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651967369&amp;idx=1&amp;sn=d639abf6772a72c25cc2537749258163&amp;chksm=bd2d7a558a5af3436e0a435a3e7cd9f72f67c1269370be936a82dc0af483f47aefa48bd58d69&amp;scene=21#wechat_redirect\" data-itemshowtype=\"0\" tab=\"innerlink\" data-linktype=\"2\" hasload=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);cursor: pointer;max-width: 100%;font-size: 15px;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">InnoDB</span>，<span style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">七种锁</span></a><span style=\"max-width: 100%;font-size: 15px;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">》</span></section><section style=\"max-width: 100%;font-family: -apple-system, BlinkMacSystemFont, \" helvetica neue sc sans gb yahei ui arial sans-serif normal rgb border-box break-word><section style=\"max-width: 100%;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"max-width: 100%;font-size: 15px;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">《<a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651967183&amp;idx=1&amp;sn=d033755bf26244f4866b38750acfbb2b&amp;chksm=bd2d7b138a5af20548229a22db8da0838f85784d6119833e8ff6abfe1068548ea70ca7587da5&amp;scene=21#wechat_redirect\" data-itemshowtype=\"0\" tab=\"innerlink\" data-linktype=\"2\" hasload=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);cursor: pointer;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">InnoDB索引，终于懂了</a>》</span></section><section style=\"max-width: 100%;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"max-width: 100%;font-size: 15px;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">《<a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651967707&amp;idx=1&amp;sn=733da08d6c24a19a05bf3ba2ada96364&amp;chksm=bd2d65078a5aec11ee28557355c736359ef7a1dc42629a22cc3274c44b4affd6a47859d903a6&amp;scene=21#wechat_redirect\" data-itemshowtype=\"0\" tab=\"innerlink\" data-linktype=\"2\" hasload=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);cursor: pointer;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">InnoDB，四种事务的隔离级别实现</a>》</span></section><section style=\"max-width: 100%;line-height: 1.75em;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"max-width: 100%;font-size: 15px;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">《<a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651967734&amp;idx=1&amp;sn=817c850062a1deccf84298677f6095c7&amp;chksm=bd2d652a8a5aec3c3edab171519c29e7df9ab023247bde2f324571874e5f0ee3b96e71a6c69a&amp;scene=21#wechat_redirect\" data-itemshowtype=\"0\" tab=\"innerlink\" data-linktype=\"2\" hasload=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);cursor: pointer;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\">InnoDB，调试死锁的方法！</a>》</span></section></section><section style=\"max-width: 100%;font-family: -apple-system, BlinkMacSystemFont, \" helvetica neue sc sans gb yahei ui arial sans-serif normal rgb border-box break-word><br></section><section style=\"max-width: 100%;font-family: -apple-system, BlinkMacSystemFont, \" helvetica neue sc sans gb yahei ui arial sans-serif normal rgb border-box break-word><strong style=\"max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"max-width: 100%;font-size: 15px;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">调研</span></strong><span style=\"max-width: 100%;font-size: 15px;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">：</span></section><section style=\"max-width: 100%;font-family: -apple-system, BlinkMacSystemFont, \" helvetica neue sc sans gb yahei ui arial sans-serif normal rgb border-box break-word><span style=\"max-width: 100%;font-size: 15px;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">贵司用的是哪种方案？</span></section>\n                </div>\n\n    \n        <br>\n        <div id=\"js_toobar3\" class=\"rich_media_tool\">\n            <a target=\"_blank\" href=\"https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==%5Cx26amp;mid=2651967786%5Cx26amp;idx=1%5Cx26amp;sn=00f15079933db46acb330fb46b879f16%5Cx26amp;chksm=bd2d64f68a5aede093e776d4c00b420861b76121a5aecbf2db3c218a3a90456fb50af6d92ac3%5Cx26amp;token=1710229294%5Cx26amp;lang=zh_CN#rd\" id=\"js_view_source\" class=\"media_tool_meta meta_primary\">阅读原文</a>\n        </div>\n    \n    <br>\n\n    \n        <a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651967871&amp;idx=1&amp;sn=5dc5a0ea2f8a0a4ca2c746be0a434b77&amp;chksm=bd2d64a38a5aedb50f647e08f148e87dfb2fdda68ff08957e4b9d7865c86de534adf88666c56&amp;scene=0#rd\" style=\"color: blue\" class=\"media_tool_meta meta_primary\">原文</a>\n        <br>\n    \n\n    \n        </div>","descriptionType":"html","publishedDate":"Fri, 04 Jun 2021 00:40:00 +0000","feedId":2240,"bgimg":"http://content.sov5.cn/mmbiz_png/YrezxckhYOyopbPRUaMFgG0H93ibyFhR1Aa1hD3cY5XQtI4hI7gZvZSTgs4zgpwKSyfuia3CJT9Diaq0cibiciaI0Z2A?imageView2/1/w/600","linkMd5":"4c9ba984fa780a918d3c04c1290349da","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn59@2020_4/2021/06/06/04-35-55-293_905f316b71785ed1.webp","destWidth":308,"destHeight":196,"sourceBytes":2634,"destBytes":2360,"author":"","articleImgCdnMap":{"http://content.sov5.cn/mmbiz_png/YrezxckhYOyopbPRUaMFgG0H93ibyFhR1Aa1hD3cY5XQtI4hI7gZvZSTgs4zgpwKSyfuia3CJT9Diaq0cibiciaI0Z2A?imageView2/1/w/600":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn59@2020_4/2021/06/06/04-35-55-293_905f316b71785ed1.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/YrezxckhYOyopbPRUaMFgG0H93ibyFhR1XU7XZ5Llv3XIWjerprU7WczECzHSMniaGZG1ibcXL5rzcuKk0Mc3yN2Q/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn64@2020_4/2021/06/06/04-35-57-270_e97d73a12d0354a9.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/YrezxckhYOyopbPRUaMFgG0H93ibyFhR12NPH6UWxcTGIhDs1traUtibSFRt6QndHx4cSk8zfXbffiaiaExRcEGCqA/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn66@2020_1/2021/06/06/04-35-57-850_a72996ab0cfade79.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/YrezxckhYOyopbPRUaMFgG0H93ibyFhR1DkB3JDYrUoSLJ6b904UPk2towrGLyicKI1ufrH95cL6r3U7UZq0caGQ/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn69@2020_5/2021/06/06/04-36-24-648_79e9034c99edade2.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/YrezxckhYOyopbPRUaMFgG0H93ibyFhR1e0Nuu1db2rIq0Nyt8GRuXrTJ0CP7F9icicHHfTrf00ysRkWcAtHBVz6A/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn67@2020_6/2021/06/06/04-35-59-553_1a92c60d91e451b9.webp"},"publishedOrCreatedDate":1622954154481}],"record":{"createdTime":"2021-06-06 12:35:54","updatedTime":"2021-06-06 12:35:54","feedId":2240,"fetchDate":"Sun, 06 Jun 2021 04:35:54 +0000","fetchMs":410,"handleMs":9,"totalMs":31343,"newArticles":0,"totalArticles":5,"status":1,"type":0,"ip":"f306b40366a93aa712f78b685bea0f01","hostName":"us-039*","requestId":"a8ffd271c0eb4bd3b9ee129a1ba2d96e_2240","contentType":"application/rss+xml","totalBytes":30468,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":5,"articlesImgsGithubTotal":5,"successGithubMap":{"myreaderx10":1,"myreaderx5oss":1,"myreaderx29":1,"myreaderx18":1,"myreaderx19":1},"failGithubMap":{}},"feed":{"createdTime":"2020-08-24 21:31:38","updatedTime":"2020-09-01 10:02:14","id":2240,"name":"架构师之路","url":"http://feedmaker.kindle4rss.com/feeds/gh_10a6b96351a9.weixin.xml","subscriber":null,"website":null,"icon":"http://www.sogou.com/images/logo/new/favicon.ico?v=4","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx63/cdn89@2020_4/2020/09/01/02-02-15-297_d24121c9beed1de6.ico","description":"架构师之路，坚持撰写接地气的架构文章","weekly":null,"link":null},"noPictureArticleList":[],"tmpCommonImgCdnBytes":2360,"tmpBodyImgCdnBytes":28108,"tmpBgImgCdnBytes":0,"extra4":{"start":1622954153996,"total":0,"statList":[{"spend":475,"msg":"获取xml内容"},{"spend":9,"msg":"解释文章"},{"spend":0,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":29786,"msg":"正文链接上传到cdn"}]},"extra5":5,"extra6":5,"extra7ImgCdnFailResultVector":[],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://europe69.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe68.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe66.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe67.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"http://content.sov5.cn/mmbiz_png/YrezxckhYOyopbPRUaMFgG0H93ibyFhR1Aa1hD3cY5XQtI4hI7gZvZSTgs4zgpwKSyfuia3CJT9Diaq0cibiciaI0Z2A?imageView2/1/w/600","sourceStatusCode":200,"destWidth":308,"destHeight":196,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn59@2020_4/2021/06/06/04-35-55-293_905f316b71785ed1.webp","sourceBytes":2634,"destBytes":2360,"targetWebpQuality":75,"feedId":2240,"totalSpendMs":1056,"convertSpendMs":4,"createdTime":"2021-06-06 12:35:54","host":"us-53*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E6%9E%B6%E6%9E%84%E5%B8%88%E4%B9%8B%E8%B7%AF+%E7%94%A8uid%E5%88%86%E5%BA%93%EF%BC%8Cuname%E4%B8%8A%E7%9A%84%E6%9F%A5%E8%AF%A2%E6%80%8E%E4%B9%88%E5%8A%9E%EF%BC%9F","linkMd5ListStr":"4c9ba984fa780a918d3c04c1290349da,4c9ba984fa780a918d3c04c1290349da","githubUser":"myreaderx19","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"2.6 KB","destSize":"2.3 KB","compressRate":"89.6%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/YrezxckhYOyopbPRUaMFgG0H93ibyFhR12NPH6UWxcTGIhDs1traUtibSFRt6QndHx4cSk8zfXbffiaiaExRcEGCqA/640?wx_fmt=png","sourceStatusCode":200,"destWidth":299,"destHeight":168,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn66@2020_1/2021/06/06/04-35-57-850_a72996ab0cfade79.webp","sourceBytes":18189,"destBytes":6698,"targetWebpQuality":75,"feedId":2240,"totalSpendMs":2576,"convertSpendMs":4,"createdTime":"2021-06-06 12:35:55","host":"europe66*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E6%9E%B6%E6%9E%84%E5%B8%88%E4%B9%8B%E8%B7%AF+%E7%94%A8uid%E5%88%86%E5%BA%93%EF%BC%8Cuname%E4%B8%8A%E7%9A%84%E6%9F%A5%E8%AF%A2%E6%80%8E%E4%B9%88%E5%8A%9E%EF%BC%9F","linkMd5ListStr":"4c9ba984fa780a918d3c04c1290349da","githubUser":"myreaderx18","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"17.8 KB","destSize":"6.5 KB","compressRate":"36.8%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/YrezxckhYOyopbPRUaMFgG0H93ibyFhR1XU7XZ5Llv3XIWjerprU7WczECzHSMniaGZG1ibcXL5rzcuKk0Mc3yN2Q/640?wx_fmt=png","sourceStatusCode":200,"destWidth":306,"destHeight":126,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn64@2020_4/2021/06/06/04-35-57-270_e97d73a12d0354a9.webp","sourceBytes":16271,"destBytes":6222,"targetWebpQuality":75,"feedId":2240,"totalSpendMs":2688,"convertSpendMs":4,"createdTime":"2021-06-06 12:35:55","host":"europe67*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E6%9E%B6%E6%9E%84%E5%B8%88%E4%B9%8B%E8%B7%AF+%E7%94%A8uid%E5%88%86%E5%BA%93%EF%BC%8Cuname%E4%B8%8A%E7%9A%84%E6%9F%A5%E8%AF%A2%E6%80%8E%E4%B9%88%E5%8A%9E%EF%BC%9F","linkMd5ListStr":"4c9ba984fa780a918d3c04c1290349da","githubUser":"myreaderx10","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"15.9 KB","destSize":"6.1 KB","compressRate":"38.2%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/YrezxckhYOyopbPRUaMFgG0H93ibyFhR1e0Nuu1db2rIq0Nyt8GRuXrTJ0CP7F9icicHHfTrf00ysRkWcAtHBVz6A/640?wx_fmt=png","sourceStatusCode":200,"destWidth":538,"destHeight":163,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn67@2020_6/2021/06/06/04-35-59-553_1a92c60d91e451b9.webp","sourceBytes":25849,"destBytes":8704,"targetWebpQuality":75,"feedId":2240,"totalSpendMs":4309,"convertSpendMs":8,"createdTime":"2021-06-06 12:35:55","host":"europe69*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E6%9E%B6%E6%9E%84%E5%B8%88%E4%B9%8B%E8%B7%AF+%E7%94%A8uid%E5%88%86%E5%BA%93%EF%BC%8Cuname%E4%B8%8A%E7%9A%84%E6%9F%A5%E8%AF%A2%E6%80%8E%E4%B9%88%E5%8A%9E%EF%BC%9F","linkMd5ListStr":"4c9ba984fa780a918d3c04c1290349da","githubUser":"myreaderx29","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"25.2 KB","destSize":"8.5 KB","compressRate":"33.7%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/YrezxckhYOyopbPRUaMFgG0H93ibyFhR1DkB3JDYrUoSLJ6b904UPk2towrGLyicKI1ufrH95cL6r3U7UZq0caGQ/640?wx_fmt=png","sourceStatusCode":200,"destWidth":307,"destHeight":174,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn69@2020_5/2021/06/06/04-36-24-648_79e9034c99edade2.webp","sourceBytes":21512,"destBytes":6484,"targetWebpQuality":75,"feedId":2240,"totalSpendMs":29639,"convertSpendMs":5,"createdTime":"2021-06-06 12:35:55","host":"europe68*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E6%9E%B6%E6%9E%84%E5%B8%88%E4%B9%8B%E8%B7%AF+%E7%94%A8uid%E5%88%86%E5%BA%93%EF%BC%8Cuname%E4%B8%8A%E7%9A%84%E6%9F%A5%E8%AF%A2%E6%80%8E%E4%B9%88%E5%8A%9E%EF%BC%9F","linkMd5ListStr":"4c9ba984fa780a918d3c04c1290349da","githubUser":"myreaderx5oss","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"21 KB","destSize":"6.3 KB","compressRate":"30.1%"}],"successGithubMap":{"myreaderx10":1,"myreaderx5oss":1,"myreaderx29":1,"myreaderx18":1,"myreaderx19":1},"failGithubMap":{}}
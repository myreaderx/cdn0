{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2021-08-15 12:53:57","updatedTime":"2021-08-15 12:53:57","title":"Building the Geomap plugin for Grafana 8.1","link":"https://aws.amazon.com/blogs/opensource/building-the-geomap-plugin-for-grafana-8-1/","description":"<p><i>In this post, AWS software development intern engineers Bryan Uribe and Eunice Kim talk about their experience with developing the new panel plugin, Geomap, for Grafana. They share goals for the project, key design details, and lessons learned through working on one of the most popular open source projects.<br /> </i></p> \n<h2>Introducing Grafana and the Geomap plugin</h2> \n<p><strong><span style=\"color: #ff0000\"><a href=\"https://awsopensourceblog.s3.us-east-2.amazonaws.com/assets/alolitas_geomap_plugin_grafana/alolitas_geomap_plugin_grafana_gif-1.gif\"><img class=\"alignnone\" src=\"https://awsopensourceblog.s3.us-east-2.amazonaws.com/assets/alolitas_geomap_plugin_grafana/alolitas_geomap_plugin_grafana_gif-1.gif\" alt=\"\" width=\"3382\" height=\"1222\" /></a></span></strong></p> \n<p><a href=\"https://grafana.com\" target=\"_blank\" rel=\"noopener noreferrer\">Grafana</a> is a popular open source monitoring platform that allows you to query and visualize metrics from various data sources. With Grafana, you can create complex monitoring dashboards using interactive query builders and personalize the Grafana experience by using of either core or external <a href=\"https://grafana.com/grafana/plugins\" target=\"_blank\" rel=\"noopener noreferrer\">plugins</a>. A core plugin is included with Grafana, whereas an external plugin must be manually <a href=\"https://grafana.com/docs/grafana/latest/plugins/installation/\" target=\"_blank\" rel=\"noopener noreferrer\">installed</a>.</p> \n<p><a href=\"https://grafana.com/docs/grafana/next/panels/visualizations/geomap/\" target=\"_blank\" rel=\"noopener noreferrer\">Geomap</a> is a new core plugin introduced in <a href=\"https://grafana.com/blog/2021/08/05/grafana-8.1-released-new-geomap-and-annotations-panels-updated-plugin-management-and-more/\" target=\"_blank\" rel=\"noopener noreferrer\">Grafana 8.1</a>, allowing you to visualize <a href=\"https://en.wikipedia.org/wiki/Geographic_data_and_information\" target=\"_blank\" rel=\"noopener noreferrer\">geospatial data</a>. You can customize the world map, configure various overlays, and refine map settings to focus on the important location-based characteristics of data.</p> \n<p>The focus of our internship was to design and build the Geomap plugin and contribute the plugin to the open source Grafana project. We worked closely with Ryan McKinley from Grafana Labs to collaborate on the design and development of the new plugin.</p> \n<h2>Geomap plugin evaluation and design</h2> \n<p>To understand the Grafana plugin landscape better, we researched existing Worldmap plugins that we could use for our development process. We found an existing <a href=\"https://grafana.com/grafana/plugins/grafana-worldmap-panel/\" target=\"_blank\" rel=\"noopener noreferrer\">Worldmap plugin</a> available for open source Grafana users and investigated whether it could work on top of the existing code. This plugin, however, <a href=\"https://github.com/grafana/worldmap-panel/commits/master?before=2b3b163938168b9c5743a8b56378dceb06c760ed+35&amp;branch=master\" target=\"_blank\" rel=\"noopener noreferrer\">has not been recently maintained</a> and is limited in the types of base maps and overlays it can support.</p> \n<p>We also determined that, because of its non-modular design, the existing plugin would require extensive work before new enhancements could be added. Specifically, functionality for user interactions, loading the base map, generating the circle overlay, and the creation of legends and tooltips are all tightly integrated in the main Worldmap component. This design prevents us from being able to extend the plugin easily to include additional features, such as a <a href=\"https://github.com/panodata/grafana-map-panel/issues/26\" target=\"_blank\" rel=\"noopener noreferrer\">configurable tile server</a>, because new enhancements must conform to a standardized component initialization flow.</p> \n<p>Moreover, the Worldmap plugin is written in AngularJS, and Grafana has been migrating all of its plugins from AngularJS to React. Grafana is actively encouraging developers to write new plugins using React for the following reasons:</p> \n<ul> \n <li>React/Redux will naturally introduce an architecture that separates the UI from the state. Previously, component, services, and utilities were tied together, which meant that any change in a plugin mutated all the pieces.</li> \n <li>Grafana provides <a href=\"https://www.npmjs.com/package/@grafana/ui\" target=\"_blank\" rel=\"noopener noreferrer\">React plugin APIs</a> that can be used to develop plugins. Commonly used UIs and functionalities can be standardized throughout various Grafana plugins.</li> \n</ul> \n<div id=\"attachment_11951\" style=\"width: 881px\" class=\"wp-caption alignnone\">\n <a href=\"https://awsopensourceblog.s3.us-east-2.amazonaws.com/assets/alolitas_geomap_plugin_grafana/alolitas_geomap_plugin_grafana_f1.png\"><img aria-describedby=\"caption-attachment-11951\" class=\"size-full wp-image-11951\" src=\"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f1.png\" alt=\"Geomap plugin project overview.\" width=\"871\" height=\"502\" /></a>\n <p id=\"caption-attachment-11951\" class=\"wp-caption-text\">Figure 1: Geomap plugin project overview.</p>\n</div> \n<p>With increasing use cases and demand for mapping visualizations, the Grafana community has been requesting more features than currently exist in the Worldmap plugin. Thus, we ultimately decided to build a new React Geomap plugin that addresses the concerns of scalability in the Worldmap plugin. A visual overview is shown in Figure 1.</p> \n<p>Our key design decisions for this plugin include:</p> \n<ul> \n <li>Building the new plugin in React</li> \n <li>Creating an easily scalable architecture</li> \n <li>Adding a flexible base map configuration</li> \n</ul> \n<p>These design decisions were intended to ensure that future development can be integrated easily into the plugin. In particular, this flexibility was provided by removing the tight integration of the Worldmap components.</p> \n<p>In the new Geomap plugin, the base maps and data-driven layers are instantiated using a layer handler. This layer handler is responsible for initializing the various layers and allows each layer to carry its own functionality. Each layer is responsible for supplying an initialization function, an optional update function, and an optional legend.</p> \n<div class=\"hide-language\"> \n <pre><code class=\"lang-bash\">export interface MapLayerHandler {\n  init: () =&gt; BaseLayer;\n  update?: (data: PanelData) =&gt; void;\n  legend?: ReactNode;\n}</code></pre> \n</div> \n<p>The separation of components through the layer handler means that each data-driven layer can hold its own data formatting processes. Different overlays can customize their data-mapping logic, and the Geomap can interchange various data-driven overlays without adhering to a standardized data flow. In the new design, each layer will be able to determine how to process user data through its own update function (Figure 2).</p> \n<div id=\"attachment_11952\" style=\"width: 1010px\" class=\"wp-caption alignnone\">\n <a href=\"https://awsopensourceblog.s3.us-east-2.amazonaws.com/assets/alolitas_geomap_plugin_grafana/alolitas_geomap_plugin_grafana_f2.png\"><img aria-describedby=\"caption-attachment-11952\" class=\"size-full wp-image-11952\" src=\"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f2.png\" alt=\"Geomap plugin architecture.\" width=\"1000\" height=\"583\" /></a>\n <p id=\"caption-attachment-11952\" class=\"wp-caption-text\">Figure 2: Geomap plugin architecture.</p>\n</div> \n<h2>Configuration</h2> \n<h3>Base layer server configuration</h3> \n<p>The base layer is the starting point for all Geomap panels. The Geomap layer handler loads a static base layer from a selected tile server to the Grafana panel. You can choose from several base layer options, such as <a href=\"https://carto.com/\" target=\"_blank\" rel=\"noopener noreferrer\">CartoDB</a>, <a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\" rel=\"noopener noreferrer\">OpenStreetMap</a>, and <a href=\"https://www.arcgis.com/home/webmap/viewer.html\" target=\"_blank\" rel=\"noopener noreferrer\">ArcGIS</a> (Figure 3).</p> \n<div id=\"attachment_11953\" style=\"width: 767px\" class=\"wp-caption alignnone\">\n <a href=\"https://awsopensourceblog.s3.us-east-2.amazonaws.com/assets/alolitas_geomap_plugin_grafana/alolitas_geomap_plugin_grafana_f3.png\"><img aria-describedby=\"caption-attachment-11953\" class=\"size-full wp-image-11953\" src=\"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f3.png\" alt=\"Screenshot of base layer options available in the Geomap plugin, as described in the post.\" width=\"757\" height=\"257\" /></a>\n <p id=\"caption-attachment-11953\" class=\"wp-caption-text\">Figure 3: Base layer options available in the Geomap plugin.</p>\n</div> \n<p>In addition to various predefined base layers, we built an extra level of configurability for provisioning of the default base layer. Two new environment variables are now included in the <a href=\"https://grafana.com/docs/grafana/latest/administration/configuration/\" target=\"_blank\" rel=\"noopener noreferrer\"><i>.ini</i> configuration file</a> to configure the default base layer and deactivate the other preconfigured base layer options.</p> \n<ul> \n <li>The JSON configuration option <code>default_baselayer_config</code> defines the default base map. Currently there are four base map options to choose from: <code>carto</code>, <code>esri-xyz</code>, <code>osm-standard</code>, and <code>xyz</code>. The <code>xyz</code> option allows pointing to a custom tile server URL.</li> \n <li>The Boolean configuration option <code>enable_custom_baselayers</code> enables the predefined base maps. This option is set to true by default, but it can be switched if a service requires loading only one specific base map.</li> \n</ul> \n<div class=\"hide-language\"> \n <pre><code class=\"lang-bash\">[geomap]\n# Set the JSON configuration for the default basemap\ndefault_baselayer_config = `{\n      &quot;type&quot;: &quot;xyz&quot;,\n      &quot;config&quot;: {\n        &quot;url&quot;: &quot;[Tile Server URL]&quot;,\n        &quot;attribution&quot;: &quot;Tiles &amp;copy; &lt;a href=http://www.openstreetmap.org/copyright&gt;OpenStreetMap&lt;/a&gt;&quot;\n      }\n    }`\n# Enable or disable loading other base map layers\nenable_custom_baselayers = false</code></pre> \n</div> \n<p>An example use case is when offline access for the base map is required. Although Grafana itself does not require an internet connection, some map panels need internet access to reach a base layer endpoint. Allowing you to configure your own base layer lets you also configure one that is compatible offline (Figure 4).</p> \n<div id=\"attachment_11954\" style=\"width: 766px\" class=\"wp-caption alignnone\">\n <a href=\"https://awsopensourceblog.s3.us-east-2.amazonaws.com/assets/alolitas_geomap_plugin_grafana/alolitas_geomap_plugin_grafana_f4.png\"><img aria-describedby=\"caption-attachment-11954\" class=\"size-full wp-image-11954\" src=\"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f4.png\" alt=\"Screenshot showing that base layer configured through provisioning.\" width=\"756\" height=\"180\" /></a>\n <p id=\"caption-attachment-11954\" class=\"wp-caption-text\">Figure 4: Base layer configured through provisioning.</p>\n</div> \n<h2>Data layer (overlays)</h2> \n<p>The Geomap panel supports displaying a map overlaid with markers (such as circles) or a heatmap. Each data layer has the option to format user data and tie its location-based metrics into the style of the overlay. Further details can be found in the data-mapping section of this article.</p> \n<h3>Markers layer</h3> \n<p>The markers layer enables the visualization of data points with different marker shapes, such as circle, square, triangle, star, cross, and X (Figure 5).</p> \n<ul> \n <li><b>Marker color</b> configures the color of the marker. The default <code>Fixed color</code> keeps all points a single color. An alternate option is to have multiple colors depending on the data point values and the threshold set at the <code>Thresholds</code> section.</li> \n <li><b>Marker size</b> configures the size of the marker. The default <code>Fixed value</code> makes all marker sizes the same regardless of the data point metric. There also is an option to scale the circles to the corresponding data point metric. <code>Min</code> and <code>Max</code> marker size scales the marker size to the specified range.</li> \n <li><b>Marker shape</b> provides the flexibility to change the marker style. Possible choices for marker shapes are: circle, square, triangle, star, cross, and X.</li> \n <li><b>Fill opacity</b> configures the transparency of each marker.</li> \n</ul> \n<div id=\"attachment_11955\" style=\"width: 935px\" class=\"wp-caption alignnone\">\n <a href=\"https://awsopensourceblog.s3.us-east-2.amazonaws.com/assets/alolitas_geomap_plugin_grafana/alolitas_geomap_plugin_grafana_f5.png\"><img aria-describedby=\"caption-attachment-11955\" class=\"size-full wp-image-11955\" src=\"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f5.png\" alt=\"Figure 5: Data layer UI using Markers overlays. The left side of the image shows settings, and the right side shows a United States map with colored circles on it.\" width=\"925\" height=\"349\" /></a>\n <p id=\"caption-attachment-11955\" class=\"wp-caption-text\">Figure 5: Data layer UI using Markers overlays.</p>\n</div> \n<h3>Heatmap layer</h3> \n<p>The heatmap layer clusters data points to visualize locations with different densities. As with the markers layer, you are prompted to configure various options to customize the visualization (Figure 6).</p> \n<ul> \n <li><b>Weight values</b> configures the intensity of the heatmap clusters. <code>Fixed value</code> keeps a constant weight value throughout all the data points. This value should be in the range of 0~1. There is an alternate option to scale the weight values automatically depending on the data values.</li> \n <li><b>Radius</b> configures the size of the heatmap clusters.</li> \n <li><b>Blur</b> configures the amount of blur on each cluster.</li> \n</ul> \n<div id=\"attachment_11956\" style=\"width: 941px\" class=\"wp-caption alignnone\">\n <a href=\"https://awsopensourceblog.s3.us-east-2.amazonaws.com/assets/alolitas_geomap_plugin_grafana/alolitas_geomap_plugin_grafana_f6.png\"><img aria-describedby=\"caption-attachment-11956\" class=\"size-full wp-image-11956\" src=\"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f6.png\" alt=\"Figure 6: Data layer UI using heatmap overlays. Left side of screen shows UI options; right side shows world map with a headmap hot spot.\" width=\"931\" height=\"330\" /></a>\n <p id=\"caption-attachment-11956\" class=\"wp-caption-text\">Figure 6: Data layer UI using heatmap overlays.</p>\n</div> \n<p>We use <a href=\"https://openlayers.org/\" target=\"_blank\" rel=\"noopener noreferrer\">OpenLayers</a> to implement the overlays shown in Figure 6. OpenLayers is an open source JavaScript API for building dynamic map applications. It includes components such as <code>Map</code>, <code>Layer</code>, and <code>Source</code> to render and visualize the map with various overlays.</p> \n<p><a href=\"https://openlayers.org/en/latest/apidoc/module-ol_Map-Map.html\" target=\"_blank\" rel=\"noopener noreferrer\">Map</a> is a core component in OpenLayers and is the starting point for all mapping applications, as it loads in a base map and allows multiple layers to be added on top. Each layer includes a <a href=\"https://openlayers.org/en/latest/apidoc/module-ol_source_Source-Source.html\" target=\"_blank\" rel=\"noopener noreferrer\">source</a>, which holds information on how to load the layer content. For markers, the source reads data and provides the layer with a set of <a href=\"https://openlayers.org/en/latest/apidoc/module-ol_Feature-Feature.html\" target=\"_blank\" rel=\"noopener noreferrer\">features</a> to visualize. Each feature includes a geometry property that can be styled to create the desired overlays (Figure 7).</p> \n<p><a href=\"https://awsopensourceblog.s3.us-east-2.amazonaws.com/assets/alolitas_geomap_plugin_grafana/alolitas_geomap_plugin_grafana_f7.png\"><img class=\"alignnone size-full wp-image-11957\" src=\"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f7.png\" alt=\"Figure 7: Data layer logic for the Geomap plugin. Map, to map.addLayer(), to Layer, to Source, to source.addFeature(), to Feature, then to the right to Geometry - Circle and Geometry - RegularShape\" width=\"1000\" height=\"843\" /></a></p> \n<h2>Data mapping</h2> \n<p>An integral part of the visualization process involves mapping user data to geographical locations. In the Geomap plugin, this process is separated into two steps: finding data fields in user data and creating Geomap points.</p> \n<p>This approach provides a more modular and scalable design, as overlays can reuse data-mapping functionality but avoid a tight integration with a specific data-mapping flow. For example, different overlays can reuse data-mapping logic for creating points, but instantiate different styles, such as markers or heatmaps.</p> \n<p>Data can come from one of a variety of data sources, such as Elasticsearch, Prometheus, InfluxDB, and so on. The only requirement is that the data source must include location data. This location data must be formatted into one of the following location types: coordinates, geohash, or lookup.</p> \n<ul> \n <li><b>Coordinates</b>: Longitude and latitude information.</li> \n <li><b>Geohash</b>: An encoding of coordinates into an alphanumeric string.</li> \n <li><b>Lookup</b>: A location name that must be matched to a geographical point.</li> \n</ul> \n<p>These location options allow the plugin to work with some of the most common databases and provide a flexible data-mapping experience. In the panel UI, you will be prompted to select the location type of the data query. The following four location types are available:</p> \n<ul> \n <li><b>Coords</b> specifies that the query holds coordinate data. Select the data fields for latitude and longitude from the database query, and the data mapping iterates through those fields to create points. Here, the latitude and longitude are directly used in the creation of points: \n  <div class=\"hide-language\"> \n   <pre><code class=\"lang-bash\">function getPointsFromLonLat(lon: Field&lt;number&gt;, lat: Field&lt;number&gt;): Point[] {\n  const count = lat.values.length;\n  const points = new Array&lt;Point&gt;(count);\n  for (let i = 0; i &lt; count; i++) {\n    points[i] = new Point(fromLonLat([lon.values.get(i), lat.values.get(i)]));\n  }\n  return points;\n}</code></pre> \n  </div> </li> \n <li><b>Geohash</b> specifies that the query holds geohash data. Select the data field for geohash from the database query and the data mapping iterates through those fields to create points. Here, the geohash is decoded into latitude and longitude for the creation of points: \n  <div class=\"hide-language\"> \n   <pre><code class=\"lang-bash\">function getPointsFromGeohash(field: Field&lt;string&gt;): Point[] {\n  const count = field.values.length;\n  const points = new Array&lt;Point&gt;(count);\n  for (let i = 0; i &lt; count; i++) {\n    const coords = decodeGeohash(field.values.get(i));\n    if (coords) {\n      points[i] = new Point(fromLonLat(coords));\n    }\n  }\n  return points;\n}</code></pre> \n  </div> </li> \n <li><b>Lookup</b> specifies that the query holds location name data that must be mapped to a value. Select the lookup field from the database query along with the type of gazetteer. The gazetteer is the dictionary that will be used to map queried data to a geographical point. To create a point, the location value is mapped to latitude and longitude using the gazetteer: \n  <div class=\"hide-language\"> \n   <pre><code class=\"lang-bash\">function getPointsFromGazetteer(gaz: Gazetteer, field: Field&lt;string&gt;): Point[] {\n  const count = field.values.length;\n  const points = new Array&lt;Point&gt;(count);\n  for (let i = 0; i &lt; count; i++) {\n    const info = gaz.find(field.values.get(i));\n    if (info?.coords) {\n      points[i] = new Point(fromLonLat(info.coords));\n    }\n  }\n  return points;\n}</code></pre> \n  </div> </li> \n <li><b>Auto</b> is an automatic data handler that will automatically search for location data. You can select this data option when a query contains one of the following names for data fields. If the data handler finds fields for any of the location options, it will try to use that field to instantiate Geomap points: \n  <ul> \n   <li>geohash: “geohash”</li> \n   <li>latitude: “latitude”, “lat”</li> \n   <li>longitude: “longitude”, “lng”, “lon”</li> \n   <li>lookup: “lookup”</li> \n  </ul> </li> \n</ul> \n<h2>Data hover (tooltips)</h2> \n<p>In addition to data layers, tooltips provide an alternative method for displaying user data. Tooltips are essential to the visualization process, because they help us understand metrics that would otherwise be difficult to discern through the overlays themselves. When we hover or pause over a data feature, a tooltip becomes visible, displaying specific information that the feature represents.</p> \n<p>For example, the tooltip shown in Figure 8 provides detailed information on the feature’s <strong>Count</strong>, which is directly correlated to the size and color of the circle marker. This metric would be difficult to distinguish based solely on the size and color of the circle markers.</p> \n<div id=\"attachment_11958\" style=\"width: 1010px\" class=\"wp-caption alignnone\">\n <a href=\"https://awsopensourceblog.s3.us-east-2.amazonaws.com/assets/alolitas_geomap_plugin_grafana/alolitas_geomap_plugin_grafana_f8.png\"><img aria-describedby=\"caption-attachment-11958\" class=\"size-full wp-image-11958\" src=\"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f8.png\" alt=\"Figure 8: Tooltip visualization. Hovering over shows the state (Colorado), Latitude (39.1), Longitude (-105), DestLocation (9wv), Count (48) and price (600)\" width=\"1000\" height=\"444\" /></a>\n <p id=\"caption-attachment-11958\" class=\"wp-caption-text\">Figure 8: Tooltip visualization.</p>\n</div> \n<p>Specifically, tooltips are created by instantiating a pointer event handler on the Geomap panel, and listening for when the pointer pauses over a feature. If the pointer pauses over a feature, the properties (defined by user data) of the feature are pulled and sent to the Geomap panel, where a tooltip is generated:</p> \n<div class=\"hide-language\"> \n <pre><code class=\"lang-bash\">const features: GeomapHoverFeature[] = [];\nthis.map.forEachFeatureAtPixel(pixel, (feature, layer, geo) =&gt; {\n  if (!hoverPayload.data) {\n    const props = feature.getProperties();\n    const frame = props['frame'];\n    if (frame) {\n      hoverPayload.data = ttip.data = frame as DataFrame;\n      hoverPayload.rowIndex = ttip.rowIndex = props['rowIndex'];\n    }\n  }\n  features.push({ feature, layer, geo });\n});</code></pre> \n</div> \n<h2>Developing the Geomap plugin</h2> \n<p>For this project, we built a Grafana plugin to allow you to visualize geographic data. Geomap is a panel plugin, which is one of the four key types of plugins that Grafana implements:</p> \n<ul> \n <li><b>Data source</b>: Enables communication with databases.</li> \n <li><b>Backend</b>: Builds alerts for data sources and holds functionality for query caching.</li> \n <li><b>Panel</b>: Creates custom ways of visualizing data on the front end.</li> \n <li><b>App</b>: Allows you to create custom styles of monitoring.</li> \n</ul> \n<p>Panel plugins are purely front end and are written in TypeScript. In developing the Geomap plugin, we also had to conform to Grafana coding styles, including adhering to code organization protocols, naming conventions, and practices for implementing React components.</p> \n<p>Moreover, the development process for creating a core Grafana plugin is different from creating an external plugin. In particular, our development was done through the main Grafana repository and required setting up a Grafana development environment. This process consisted of downloading the source code for Grafana and building the project as <a href=\"https://github.com/grafana/grafana/blob/master/contribute/developer-guide.md\" target=\"_blank\" rel=\"noopener noreferrer\">described in the guide for developers</a>. The final step was to <a href=\"https://grafana.com/docs/grafana/latest/administration/configuration/\" target=\"_blank\" rel=\"noopener noreferrer\">configure</a> the <code>custom.ini</code> file to put the Grafana application into development mode:</p> \n<div class=\"hide-language\"> \n <pre><code class=\"lang-bash\"># custom.ini\napp_mode = development</code></pre> \n</div> \n<h2>Testing plan</h2> \n<p>For the Geomap plugin, both unit tests and integration tests were carried out to ensure that all functionalities were working as intended. Specifically, we tested that the panel was created error-free, that the various overlays were instantiated properly, and that the data formatting logic worked correctly.</p> \n<ul> \n <li><b>Unit tests</b>: The different components of the plugin must have their expected functionalities covered by unit tests. Unit tests follow the conventions and use the frameworks included in the existing Grafana test suite for other panel plugins. Here we used <a href=\"https://jestjs.io/\" target=\"_blank\" rel=\"noopener noreferrer\">jest</a>, a front-end testing framework, to test the data formatting logic in the front end. The front-end tests can be run using Yarn: \n  <div class=\"hide-language\"> \n   <pre><code class=\"lang-bash\">yarn test</code></pre> \n  </div> </li> \n <li><b>Integration tests</b>: Grafana’s test suite does not contain automated integration tests for plugins; however, manual verification of the plugin is done with a Grafana build. Each UI component was tested to ensure desired functionalities.</li> \n</ul> \n<h2>Getting ready to use the Geomap plugin</h2> \n<p>Let’s look at an example of how to use the Geomap plugin. In this example, we demonstrate how to build a Geomap visualization and use the Markers layer to visualize our sample data query. Although parts of this example will be specific to our data, layer options and configuring thresholds are necessary for any visualization. In particular, we will walk through our sample data, configure the data layer, and set thresholds.</p> \n<h3>Grafana setup</h3> \n<p>Geomap is a core plugin in Grafana and is included in Grafana 8.1+. To use the plugin, select Geomap from the available list of visualizations (Figure 9).</p> \n<div id=\"attachment_11959\" style=\"width: 1010px\" class=\"wp-caption alignnone\">\n <a href=\"https://awsopensourceblog.s3.us-east-2.amazonaws.com/assets/alolitas_geomap_plugin_grafana/alolitas_geomap_plugin_grafana_f9.png\"><img aria-describedby=\"caption-attachment-11959\" class=\"size-full wp-image-11959\" src=\"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f9.png\" alt=\"Screenshot showing Geomap in the available list of visualizations.\" width=\"1000\" height=\"643\" /></a>\n <p id=\"caption-attachment-11959\" class=\"wp-caption-text\">Figure 9: Geomap in the available list of visualizations.</p>\n</div> \n<h3>Data query</h3> \n<p>The following table represents our sample data query with a metric and location field. Here, the information displays the number of errors at a location of the same row. Note, that our location data is represented as a geohash.</p> \n<table> \n <tbody> \n  <tr> \n   <td></td> \n   <td><b>Errors</b></td> \n   <td><b>State</b></td> \n  </tr> \n  <tr> \n   <td>1</td> \n   <td>24</td> \n   <td>bdg</td> \n  </tr> \n  <tr> \n   <td>2</td> \n   <td>41</td> \n   <td>9q6</td> \n  </tr> \n  <tr> \n   <td>3</td> \n   <td>48</td> \n   <td>9wv</td> \n  </tr> \n  <tr> \n   <td>4</td> \n   <td>12</td> \n   <td>drt</td> \n  </tr> \n </tbody> \n</table> \n<h3>Data layer</h3> \n<p>Under the data layer, select the Markers overlay (Figure 9). You will be prompted to select the location type of your data. Our data query holds geohash data, so you will select the geohash option. Moreover, you must provide the data field that holds the location data, which is <b>State</b>.</p> \n<p>At this point, you can select various options to adjust the style of the Markers. Here, you will select the data’s metric field, <b>Errors</b>, to configure the size and colors of the markers. In this demo, the rest of the options are left as default (Figure 10).</p> \n<div id=\"attachment_11960\" style=\"width: 1010px\" class=\"wp-caption alignnone\">\n <a href=\"https://awsopensourceblog.s3.us-east-2.amazonaws.com/assets/alolitas_geomap_plugin_grafana/alolitas_geomap_plugin_grafana_f10.png\"><img aria-describedby=\"caption-attachment-11960\" class=\"size-full wp-image-11960\" src=\"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f10.png\" alt=\"Example settings of markers overlay demo.\" width=\"1000\" height=\"899\" /></a>\n <p id=\"caption-attachment-11960\" class=\"wp-caption-text\">Figure 10: Example settings of markers overlay demo.</p>\n</div> \n<h3>Thresholds</h3> \n<p>Thresholds allow custom colors for the markers. These quantities will vary for each dataset and will depend on the scale of the metric used. For our sample data, meaningful thresholds relate to the following: error count below 20 is green, above 20 but below 40 is yellow, and any count of errors above 40 is red (Figure 11).</p> \n<div id=\"attachment_11961\" style=\"width: 1010px\" class=\"wp-caption alignnone\">\n <a href=\"https://awsopensourceblog.s3.us-east-2.amazonaws.com/assets/alolitas_geomap_plugin_grafana/alolitas_geomap_plugin_grafana_f11.png\"><img aria-describedby=\"caption-attachment-11961\" class=\"wp-image-11961 size-full\" src=\"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f11.png\" alt=\"Figure 11: Example thresholds of markers overlay demo.\" width=\"1000\" height=\"502\" /></a>\n <p id=\"caption-attachment-11961\" class=\"wp-caption-text\">Figure 11: Example thresholds of markers overlay demo.</p>\n</div> \n<h3>Result</h3> \n<p>Finally, the Geomap panel should look like the visualization shown in Figure 12.</p> \n<div id=\"attachment_11962\" style=\"width: 1010px\" class=\"wp-caption alignnone\">\n <a href=\"https://awsopensourceblog.s3.us-east-2.amazonaws.com/assets/alolitas_geomap_plugin_grafana/alolitas_geomap_plugin_grafana_f12.png\"><img aria-describedby=\"caption-attachment-11962\" class=\"wp-image-11962 size-full\" src=\"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f12.png\" alt=\"Geomap panel should look like the visualization - a US map with red circles in california and the midwest, a yellow circle in Florida, and a green circle in Maine\" width=\"1000\" height=\"445\" /></a>\n <p id=\"caption-attachment-11962\" class=\"wp-caption-text\">Figure 12: Final visualization.</p>\n</div> \n<h2>Conclusion</h2> \n<p>We were able to build a Geomap plugin for the open source Grafana project in collaboration with Grafana Labs. Our contributions in the form of pull requests (PRs) include changes in the base layer configuration, data layers, data formatting, and tooltips.</p> \n<p>Following is the list of PRs we have contributed upstream:</p> \n<ul> \n <li><a href=\"https://github.com/grafana/grafana/pull/36680\" target=\"_blank\" rel=\"noopener noreferrer\">Implement Circle Overlays</a></li> \n <li><a href=\"https://github.com/grafana/grafana/pull/36769\" target=\"_blank\" rel=\"noopener noreferrer\">Implement Heatmap Overlays</a></li> \n <li><a href=\"https://github.com/grafana/grafana/pull/37041\" target=\"_blank\" rel=\"noopener noreferrer\">Implement Base Layer Server Configuration</a></li> \n <li><a href=\"https://github.com/grafana/grafana/pull/37043\" target=\"_blank\" rel=\"noopener noreferrer\">Implement Default Base Layer</a></li> \n <li><a href=\"https://github.com/grafana/grafana/pull/37317\" target=\"_blank\" rel=\"noopener noreferrer\">Implement Geomap Tooltip</a></li> \n <li><a href=\"https://github.com/grafana/grafana/pull/37076\" target=\"_blank\" rel=\"noopener noreferrer\">Implement Lookup Mapping</a></li> \n <li><a href=\"https://github.com/grafana/grafana/pull/36736\" target=\"_blank\" rel=\"noopener noreferrer\">Test Dataframe To Points</a></li> \n <li><a href=\"https://github.com/grafana/grafana/pull/37129\" target=\"_blank\" rel=\"noopener noreferrer\">Update Gazetteer Information</a></li> \n <li><a href=\"https://github.com/grafana/grafana/pull/37221\" target=\"_blank\" rel=\"noopener noreferrer\">Document the Geomap Panel Plugin</a></li> \n</ul> \n<p>We are grateful for the feedback and support we received from our technical mentors—Alolita Sharma, Helen Lin, Robbie Rolin, and Ryan McKinley (Grafana Labs)—with whom we worked closely throughout the project. During our internships, we learned a tremendous amount about the open source community and developing open source-approved code. Moreover, we gained experience in writing high-quality TypeScript code, and how to communicate effectively and collaborate with different engineers around the world. We look forward to the widespread use of the Geomap plugin and are excited to see our contributions make a positive change on the user experience of the plugin. As of the publication of this blog post, Grafana 8.1 is already out, and it includes our Geomap plugin. Check out the <a href=\"https://grafana.com/blog/2021/08/05/grafana-8.1-released-new-geomap-and-annotations-panels-updated-plugin-management-and-more/\" target=\"_blank\" rel=\"noopener noreferrer\">release announcement</a> and give the Geomap plugin a try! We look forward to hearing any feedback you may have or bugs you find when making your visualizations.</p> \n<div class=\"blog-author-box\" style=\"border: 1px solid #d5dbdb;padding: 15px\"> \n <p class=\"blog-author-image\"><img class=\"alignleft wp-image-1288 size-thumbnail\" src=\"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/uribrya.png\" alt=\"Bryan Uribe\" width=\"150\" height=\"150\" /></p> \n <h3 class=\"lb-h4\">Bryan Uribe</h3> \n <p style=\"color: #879196;font-size: 1.2rem\">Bryan Uribe is a fourth-year student studying mathematics and computer science at Harvey Mudd College. He is an SDE intern at AWS and is interested in observability and machine learning.</p> \n</div> \n<div class=\"blog-author-box\" style=\"border: 1px solid #d5dbdb;padding: 15px\"> \n <p class=\"blog-author-image\"><img class=\"alignleft wp-image-1288 size-thumbnail\" src=\"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/kim_eunice_500.jpg\" alt=\"Eunice Kim\" width=\"150\" height=\"150\" /></p> \n <h3 class=\"lb-h4\">Eunice Kim</h3> \n <p style=\"color: #879196;font-size: 1.2rem\">Eunice Kim is a fourth-year electrical engineering student at the University of British Columbia. She is an SDE intern at AWS interested in observability and open source projects.</p> \n</div>","descriptionType":"html","publishedDate":"Fri, 13 Aug 2021 13:45:25 +0000","feedId":13680,"bgimg":"https://awsopensourceblog.s3.us-east-2.amazonaws.com/assets/alolitas_geomap_plugin_grafana/alolitas_geomap_plugin_grafana_gif-1.gif","linkMd5":"6d1f487c45ea53be4c09106a00958d30","author":"Alolita Sharma","articleImgCdnMap":{"https://awsopensourceblog.s3.us-east-2.amazonaws.com/assets/alolitas_geomap_plugin_grafana/alolitas_geomap_plugin_grafana_gif-1.gif":null,"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f1.png":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn72@2020_1/2021/08/15/04-55-59-023_15cc930b217ea09d.webp","https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f2.png":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn79@2020_1/2021/08/15/04-55-58-973_3727959229c7ee12.webp","https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f3.png":null,"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f4.png":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn98@2020_1/2021/08/15/04-55-58-934_de89c1810524e899.webp","https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f5.png":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn3@2020_3/2021/08/15/04-55-58-999_f86cb8bc98c79eea.webp","https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f6.png":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn8@2020_5/2021/08/15/04-55-58-986_f2cb24ccbdf087c8.webp","https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f7.png":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn19@2020_1/2021/08/15/04-55-59-070_3523e9c7ed459501.webp","https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f8.png":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn15@2020_5/2021/08/15/04-55-58-997_a45dc826e8810de7.webp","https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f9.png":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn11@2020_3/2021/08/15/04-55-59-003_0572cbbab674e465.webp","https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f10.png":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn84@2020_3/2021/08/15/04-55-59-025_4c1bbb1e1f262a93.webp","https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f11.png":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn73@2020_5/2021/08/15/04-55-58-981_45593b646b00e363.webp","https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f12.png":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn65@2020_5/2021/08/15/04-55-59-061_4bfe46fcc987fac7.webp","https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/uribrya.png":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn24@2020_1/2021/08/15/04-55-59-268_76b5a05062e835be.webp","https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/kim_eunice_500.jpg":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn96@2020_1/2021/08/15/04-55-59-099_aded448375f1d059.webp"},"publishedOrCreatedDate":1629003237417}],"record":{"createdTime":"2021-08-15 12:53:57","updatedTime":"2021-08-15 12:53:57","feedId":13680,"fetchDate":"Sun, 15 Aug 2021 04:53:57 +0000","fetchMs":522,"handleMs":22,"totalMs":244863,"newArticles":0,"totalArticles":20,"status":1,"type":0,"ip":"bc1eecef1292254c09de6c1e66b750f3","hostName":"europe67*","requestId":"f6a7e6fadfc04b75909488130658abd4_13680","contentType":"application/rss+xml;charset=UTF-8","totalBytes":210626,"bgimgsTotal":1,"bgimgsGithubTotal":0,"articlesImgsTotal":15,"articlesImgsGithubTotal":13,"successGithubMap":{"myreaderx8":1,"myreaderx15":1,"myreaderx16":1,"myreaderx4":1,"myreaderx21":1,"myreaderx10":1,"myreaderx22":1,"myreaderx12":1,"myreaderx24":1,"myreaderx5oss":1,"myreaderx18":1,"myreaderx29":1,"myreaderx19":1},"failGithubMap":{"myreaderx23":1}},"feed":{"createdTime":"2020-08-25 04:38:48","updatedTime":"2020-09-05 16:58:55","id":13680,"name":"AWS Open Source Blog","url":"https://aws.amazon.com/blogs/opensource/feed","subscriber":226,"website":null,"icon":"https://aws.amazon.com/favicon.ico","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx64/cdn75@2020_1/2020/09/05/08-55-50-301_27a4e5d487919ba8.ico","description":"","weekly":null,"link":null},"noPictureArticleList":[{"createdTime":"2021-08-15 12:58:01","updatedTime":"2021-08-15 12:58:01","id":null,"feedId":13680,"linkMd5":"6d1f487c45ea53be4c09106a00958d30"}],"tmpCommonImgCdnBytes":0,"tmpBodyImgCdnBytes":210626,"tmpBgImgCdnBytes":0,"extra4":{"start":1629003236492,"total":0,"statList":[{"spend":904,"msg":"获取xml内容"},{"spend":22,"msg":"解释文章"},{"spend":121377,"msg":"正文链接上传到cdn"},{"spend":122546,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"}]},"extra5":15,"extra6":14,"extra7ImgCdnFailResultVector":[null,null,{"code":1,"isDone":false,"source":"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f3.png","sourceStatusCode":200,"destWidth":757,"destHeight":257,"sourceBytes":61996,"destBytes":11010,"targetWebpQuality":75,"feedId":13680,"totalSpendMs":80,"convertSpendMs":11,"createdTime":"2021-08-15 12:55:58","host":"us-028*","referer":"https://aws.amazon.com/blogs/opensource/building-the-geomap-plugin-for-grafana-8-1/","linkMd5ListStr":"6d1f487c45ea53be4c09106a00958d30","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx23/cdn87/contents/2021/08/15/04-55-58-977_23f6614b62b317c5.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 69189253.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Resource, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Sun, 15 Aug 2021 04:55:59 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["EE08:08DE:1514B53:295AC11:61189E5E"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1629006811"],"x-ratelimit-resource":["core"],"x-ratelimit-used":["60"],"x-xss-protection":["0"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx23/cdn87/contents/2021/08/15/04-55-58-977_23f6614b62b317c5.webp","historyStatusCode":[],"spendMs":30},"base64UserPassword":null,"token":"df0b9******************************93a6e"},"githubUser":"myreaderx23","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"60.5 KB","destSize":"10.8 KB","compressRate":"17.8%"},{"code":1,"isDone":false,"source":"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f3.png","sourceStatusCode":200,"destWidth":757,"destHeight":257,"sourceBytes":61996,"destBytes":11010,"targetWebpQuality":75,"feedId":13680,"totalSpendMs":68,"convertSpendMs":11,"createdTime":"2021-08-15 12:55:59","host":"us-028*","referer":"https://aws.amazon.com/blogs/opensource/building-the-geomap-plugin-for-grafana-8-1/","linkMd5ListStr":"6d1f487c45ea53be4c09106a00958d30","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx23/cdn87/contents/2021/08/15/04-55-59-104_23f6614b62b317c5.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 69189253.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Resource, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Sun, 15 Aug 2021 04:55:59 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["EE08:08DE:1514B62:295AC38:61189E5F"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1629006811"],"x-ratelimit-resource":["core"],"x-ratelimit-used":["60"],"x-xss-protection":["0"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx23/cdn87/contents/2021/08/15/04-55-59-104_23f6614b62b317c5.webp","historyStatusCode":[],"spendMs":47},"base64UserPassword":null,"token":"df0b9******************************93a6e"},"githubUser":"myreaderx23","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"60.5 KB","destSize":"10.8 KB","compressRate":"17.8%"},null,null,null,null],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f6.png","sourceStatusCode":200,"destWidth":931,"destHeight":330,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn8@2020_5/2021/08/15/04-55-58-986_f2cb24ccbdf087c8.webp","sourceBytes":166712,"destBytes":25332,"targetWebpQuality":75,"feedId":13680,"totalSpendMs":291,"convertSpendMs":19,"createdTime":"2021-08-15 12:55:58","host":"us-032*","referer":"https://aws.amazon.com/blogs/opensource/building-the-geomap-plugin-for-grafana-8-1/","linkMd5ListStr":"6d1f487c45ea53be4c09106a00958d30","githubUser":"myreaderx24","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"162.8 KB","destSize":"24.7 KB","compressRate":"15.2%"},{"code":1,"isDone":false,"source":"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f9.png","sourceStatusCode":200,"destWidth":1000,"destHeight":643,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn11@2020_3/2021/08/15/04-55-59-003_0572cbbab674e465.webp","sourceBytes":85245,"destBytes":14958,"targetWebpQuality":75,"feedId":13680,"totalSpendMs":300,"convertSpendMs":27,"createdTime":"2021-08-15 12:55:58","host":"us-020*","referer":"https://aws.amazon.com/blogs/opensource/building-the-geomap-plugin-for-grafana-8-1/","linkMd5ListStr":"6d1f487c45ea53be4c09106a00958d30","githubUser":"myreaderx8","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"83.2 KB","destSize":"14.6 KB","compressRate":"17.5%"},{"code":1,"isDone":false,"source":"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f10.png","sourceStatusCode":200,"destWidth":1000,"destHeight":899,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx10/cdn84@2020_3/2021/08/15/04-55-59-025_4c1bbb1e1f262a93.webp","sourceBytes":84119,"destBytes":15710,"targetWebpQuality":75,"feedId":13680,"totalSpendMs":315,"convertSpendMs":31,"createdTime":"2021-08-15 12:55:58","host":"us-040*","referer":"https://aws.amazon.com/blogs/opensource/building-the-geomap-plugin-for-grafana-8-1/","linkMd5ListStr":"6d1f487c45ea53be4c09106a00958d30","githubUser":"myreaderx10","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"82.1 KB","destSize":"15.3 KB","compressRate":"18.7%"},{"code":1,"isDone":false,"source":"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f5.png","sourceStatusCode":200,"destWidth":925,"destHeight":349,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn3@2020_3/2021/08/15/04-55-58-999_f86cb8bc98c79eea.webp","sourceBytes":114287,"destBytes":19474,"targetWebpQuality":75,"feedId":13680,"totalSpendMs":330,"convertSpendMs":16,"createdTime":"2021-08-15 12:55:58","host":"us-54*","referer":"https://aws.amazon.com/blogs/opensource/building-the-geomap-plugin-for-grafana-8-1/","linkMd5ListStr":"6d1f487c45ea53be4c09106a00958d30","githubUser":"myreaderx21","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"111.6 KB","destSize":"19 KB","compressRate":"17%"},{"code":1,"isDone":false,"source":"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f4.png","sourceStatusCode":200,"destWidth":756,"destHeight":180,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn98@2020_1/2021/08/15/04-55-58-934_de89c1810524e899.webp","sourceBytes":13383,"destBytes":5970,"targetWebpQuality":75,"feedId":13680,"totalSpendMs":476,"convertSpendMs":5,"createdTime":"2021-08-15 12:55:58","host":"europe66*","referer":"https://aws.amazon.com/blogs/opensource/building-the-geomap-plugin-for-grafana-8-1/","linkMd5ListStr":"6d1f487c45ea53be4c09106a00958d30","githubUser":"myreaderx19","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"13.1 KB","destSize":"5.8 KB","compressRate":"44.6%"},{"code":1,"isDone":false,"source":"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f2.png","sourceStatusCode":200,"destWidth":1000,"destHeight":583,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn79@2020_1/2021/08/15/04-55-58-973_3727959229c7ee12.webp","sourceBytes":69728,"destBytes":19928,"targetWebpQuality":75,"feedId":13680,"totalSpendMs":518,"convertSpendMs":20,"createdTime":"2021-08-15 12:55:58","host":"europe62*","referer":"https://aws.amazon.com/blogs/opensource/building-the-geomap-plugin-for-grafana-8-1/","linkMd5ListStr":"6d1f487c45ea53be4c09106a00958d30","githubUser":"myreaderx16","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"68.1 KB","destSize":"19.5 KB","compressRate":"28.6%"},{"code":1,"isDone":false,"source":"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f11.png","sourceStatusCode":200,"destWidth":1000,"destHeight":502,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn73@2020_5/2021/08/15/04-55-58-981_45593b646b00e363.webp","sourceBytes":67243,"destBytes":13366,"targetWebpQuality":75,"feedId":13680,"totalSpendMs":524,"convertSpendMs":18,"createdTime":"2021-08-15 12:55:58","host":"europe-25*","referer":"https://aws.amazon.com/blogs/opensource/building-the-geomap-plugin-for-grafana-8-1/","linkMd5ListStr":"6d1f487c45ea53be4c09106a00958d30","githubUser":"myreaderx18","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"65.7 KB","destSize":"13.1 KB","compressRate":"19.9%"},{"code":1,"isDone":false,"source":"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f12.png","sourceStatusCode":200,"destWidth":1000,"destHeight":445,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn65@2020_5/2021/08/15/04-55-59-061_4bfe46fcc987fac7.webp","sourceBytes":82883,"destBytes":10632,"targetWebpQuality":75,"feedId":13680,"totalSpendMs":394,"convertSpendMs":21,"createdTime":"2021-08-15 12:55:58","host":"us-024*","referer":"https://aws.amazon.com/blogs/opensource/building-the-geomap-plugin-for-grafana-8-1/","linkMd5ListStr":"6d1f487c45ea53be4c09106a00958d30","githubUser":"myreaderx15","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"80.9 KB","destSize":"10.4 KB","compressRate":"12.8%"},{"code":1,"isDone":false,"source":"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f1.png","sourceStatusCode":200,"destWidth":871,"destHeight":502,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn72@2020_1/2021/08/15/04-55-59-023_15cc930b217ea09d.webp","sourceBytes":71067,"destBytes":26014,"targetWebpQuality":75,"feedId":13680,"totalSpendMs":566,"convertSpendMs":14,"createdTime":"2021-08-15 12:55:58","host":"europe-24*","referer":"https://aws.amazon.com/blogs/opensource/building-the-geomap-plugin-for-grafana-8-1/","linkMd5ListStr":"6d1f487c45ea53be4c09106a00958d30","githubUser":"myreaderx22","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"69.4 KB","destSize":"25.4 KB","compressRate":"36.6%"},{"code":1,"isDone":false,"source":"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f7.png","sourceStatusCode":200,"destWidth":1000,"destHeight":843,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn19@2020_1/2021/08/15/04-55-59-070_3523e9c7ed459501.webp","sourceBytes":151240,"destBytes":26260,"targetWebpQuality":75,"feedId":13680,"totalSpendMs":657,"convertSpendMs":37,"createdTime":"2021-08-15 12:55:58","host":"europe21*","referer":"https://aws.amazon.com/blogs/opensource/building-the-geomap-plugin-for-grafana-8-1/","linkMd5ListStr":"6d1f487c45ea53be4c09106a00958d30","githubUser":"myreaderx4","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"147.7 KB","destSize":"25.6 KB","compressRate":"17.4%"},{"code":1,"isDone":false,"source":"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/alolitas_geomap_plugin_grafana_f8.png","sourceStatusCode":200,"destWidth":1000,"destHeight":444,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn15@2020_5/2021/08/15/04-55-58-997_a45dc826e8810de7.webp","sourceBytes":87470,"destBytes":14306,"targetWebpQuality":75,"feedId":13680,"totalSpendMs":540,"convertSpendMs":27,"createdTime":"2021-08-15 12:55:58","host":"us-008*","referer":"https://aws.amazon.com/blogs/opensource/building-the-geomap-plugin-for-grafana-8-1/","linkMd5ListStr":"6d1f487c45ea53be4c09106a00958d30","githubUser":"myreaderx5oss","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"85.4 KB","destSize":"14 KB","compressRate":"16.4%"},{"code":1,"isDone":false,"source":"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/kim_eunice_500.jpg","sourceStatusCode":200,"destWidth":500,"destHeight":517,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn96@2020_1/2021/08/15/04-55-59-099_aded448375f1d059.webp","sourceBytes":57905,"destBytes":16132,"targetWebpQuality":75,"feedId":13680,"totalSpendMs":726,"convertSpendMs":12,"createdTime":"2021-08-15 12:55:58","host":"europe65*","referer":"https://aws.amazon.com/blogs/opensource/building-the-geomap-plugin-for-grafana-8-1/","linkMd5ListStr":"6d1f487c45ea53be4c09106a00958d30","githubUser":"myreaderx29","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"56.5 KB","destSize":"15.8 KB","compressRate":"27.9%"},{"code":1,"isDone":false,"source":"https://d2908q01vomqb2.cloudfront.net/ca3512f4dfa95a03169c5a670a4c91a19b3077b4/2021/08/12/uribrya.png","sourceStatusCode":200,"destWidth":120,"destHeight":160,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn24@2020_1/2021/08/15/04-55-59-268_76b5a05062e835be.webp","sourceBytes":44100,"destBytes":2544,"targetWebpQuality":75,"feedId":13680,"totalSpendMs":790,"convertSpendMs":4,"createdTime":"2021-08-15 12:55:58","host":"europe-58*","referer":"https://aws.amazon.com/blogs/opensource/building-the-geomap-plugin-for-grafana-8-1/","linkMd5ListStr":"6d1f487c45ea53be4c09106a00958d30","githubUser":"myreaderx12","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"43.1 KB","destSize":"2.5 KB","compressRate":"5.8%"}],"successGithubMap":{"myreaderx8":1,"myreaderx15":1,"myreaderx16":1,"myreaderx4":1,"myreaderx21":1,"myreaderx10":1,"myreaderx22":1,"myreaderx12":1,"myreaderx24":1,"myreaderx5oss":1,"myreaderx18":1,"myreaderx29":1,"myreaderx19":1},"failGithubMap":{"myreaderx23":1}}
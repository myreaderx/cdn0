{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2021-05-30 17:58:24","updatedTime":"2021-05-30 17:58:24","title":"[服务器] 在服务器上搭建 WHMCS 财务系统","link":"https://www.v2ex.com/t/780176#reply0","description":"\n\t<p>好久没有更新博客了，这篇文章将教你如何在服务器上部署 WHMCS 。这个程序对主机圈的大佬应该算是老朋友了，虽然有 Zkeys 等新的财务系统，但是 WHMCS 在总体上还是蛮不错的。下面我们准备下服务器和相关的文件。</p>\n<h2>准备工作</h2>\n<p>WHMCS v7.10\n能够建站的服务器一台 （没有？可以试试腾讯云轻量服务器）</p>\n<h2>创建服务器</h2>\n<p>这里我购买的是腾讯云轻量。可以在这购买： <a href=\"https://curl.qcloud.com/dfMFnwqL\" rel=\"nofollow\">https://curl.qcloud.com/dfMFnwqL</a></p>\n<p><img alt=\"选择实例的区域和配置\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://i.loli.net/2021/05/30/vchr8eLVZgFIbEs.png\"/></p>\n<p>注意，如果你的域名没有备案，可以选购香港或海外实例。这里为了方便，我们选择宝塔面板应用，等会建站就十分方便了。\n当然，如果你不喜欢使用面板，也可以自己编译 web 环境等等，这里还是以小白的角度来教学。</p>\n<h2>配置 Web 环境</h2>\n<p>在此，我们已经创建好服务器。现在我们需要安装 Web 环境，这边笔者以 Nginx-Tengine 和 MySQL8 为例。</p>\n<p><img alt=\"配置好的 Web 环境\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://i.loli.net/2021/05/30/ukFA5tIZBQrJVi1.png\"/></p>\n<p>然后我们编辑 PHP 设置，安装一些必要的扩展</p>\n<p><img alt=\"安装扩展\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://i.loli.net/2021/05/30/136WtCSY9cNaj7I.png\"/></p>\n<p>到目前为止，已经环境部署。然后各位同学可以按照对应需求进行调整和删减。</p>\n<h2>创建和部署 WHMCS</h2>\n<p>先创建站点，以“store.idc.moe”为例。我们创建站点：</p>\n<p><img alt=\"创建 store.idc.moe\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://i.loli.net/2021/05/30/fVi8suqxojeK6O1.png\"/></p>\n<p>然后上传并解压 WHMCS：</p>\n<p><img alt=\"解压 WHMCS\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://i.loli.net/2021/05/30/h5HRsoxYWLmiNt9.png\"/></p>\n<p><strong>如果你有许可证，可以先跳过 [授权程序] 步骤！</strong></p>\n<h2>授权程序</h2>\n<p>如果你没有取得 WHMCS 许可证，请记得替换授权文件！\n先从 <a href=\"https://lib.idc.moe/whmcs/License.zip\" rel=\"nofollow\">https://lib.idc.moe/whmcs/License.zip</a> 下载并解压，提取里面的 license.php 文件\n然后覆盖 <code>(网站目录)/vendor/whmcs/whmcs-foundation/lib</code> 下的 License.php 即可</p>\n<h2>安装 WHMCS</h2>\n<p>打开 store.idc.moe 你可以看到：</p>\n<p><img alt=\"whmcs 安装\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://i.loli.net/2021/05/30/M4I13AtSbneUx7c.png\"/></p>\n<p>点击 <strong>Click here to begin...</strong> 继续安装\n在要求授权码的地方，随便填写即可。总之 License.php 已经替换掉了，不会出现错误</p>\n<p><img alt=\"授权码\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://i.loli.net/2021/05/30/akv7S4DOpMch3m1.png\"/></p>\n<p>然后打开宝塔面板的 [计划任务] 中，按要求添加计划任务</p>\n<p><img alt=\"计划任务\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://i.loli.net/2021/05/30/IkQWyV1zK6sZ58x.png\"/></p>\n<p>不然你的客户到期了，产品也不会停止。</p>\n<p><img alt=\"配置宝塔面板\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://i.loli.net/2021/05/30/qvwxyplOZo4hKVI.png\"/></p>\n<p>然后继续安装 WHMCS 之后，删除 install 文件夹。到此你已经成功安装 whmcs 在服务器上！</p>\n\n\t","descriptionType":"html","publishedDate":"Sun, 30 May 2021 09:52:25 +0000","feedId":1673,"bgimg":"https://i.loli.net/2021/05/30/vchr8eLVZgFIbEs.png","linkMd5":"96165ef3f20033ad3aa6100f4a00f34d","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn68@2020_2/2021/05/30/09-59-54-746_793cb1788eb637eb.webp","destWidth":976,"destHeight":685,"sourceBytes":68454,"destBytes":42872,"author":"Nyarime","articleImgCdnMap":{"https://i.loli.net/2021/05/30/vchr8eLVZgFIbEs.png":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn68@2020_2/2021/05/30/09-59-54-746_793cb1788eb637eb.webp","https://i.loli.net/2021/05/30/ukFA5tIZBQrJVi1.png":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn19@2020_3/2021/05/30/09-59-56-251_8999d44361aaf12f.webp","https://i.loli.net/2021/05/30/136WtCSY9cNaj7I.png":null,"https://i.loli.net/2021/05/30/fVi8suqxojeK6O1.png":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn23@2020_6/2021/05/30/10-00-56-688_90d69a2f10713c17.webp","https://i.loli.net/2021/05/30/h5HRsoxYWLmiNt9.png":"https://cdn.jsdelivr.net/gh/myreaderx25/cdn5@2020_6/2021/05/30/10-00-56-970_67848b1226ba1492.webp","https://i.loli.net/2021/05/30/M4I13AtSbneUx7c.png":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn16@2020_3/2021/05/30/10-00-56-727_d6099d4de5455e50.webp","https://i.loli.net/2021/05/30/akv7S4DOpMch3m1.png":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn10@2020_6/2021/05/30/10-00-56-853_eb459cea947b63b3.webp","https://i.loli.net/2021/05/30/IkQWyV1zK6sZ58x.png":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn29@2020_5/2021/05/30/10-00-56-922_c1f824848a8c36d1.webp","https://i.loli.net/2021/05/30/qvwxyplOZo4hKVI.png":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn31@2020_6/2021/05/30/10-00-56-799_ad878431ebecdd0d.webp"},"publishedOrCreatedDate":1622368704366}],"record":{"createdTime":"2021-05-30 17:58:24","updatedTime":"2021-05-30 17:58:24","feedId":1673,"fetchDate":"Sun, 30 May 2021 09:58:24 +0000","fetchMs":476,"handleMs":10,"totalMs":154137,"newArticles":0,"totalArticles":50,"status":1,"type":0,"ip":"af0629e1ae74a27744b4cbd27b40a78e","hostName":"us-002*","requestId":"c0ebd4a156924bad856e78df242eb81b_1673","contentType":"application/atom+xml;charset=UTF-8","totalBytes":371174,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":9,"articlesImgsGithubTotal":8,"successGithubMap":{"myreaderx25":1,"myreaderx8":1,"myreaderx16":1,"myreaderx21":1,"myreaderx22":1,"myreaderx12":1,"myreaderx1":1,"myreaderx29":1},"failGithubMap":{"myreaderx23":1}},"feed":{"createdTime":"2020-08-24 21:31:32","updatedTime":"2020-09-01 09:51:03","id":1673,"name":"V2EX","url":"http://www.v2ex.com/index.xml","subscriber":null,"website":null,"icon":"https://www.v2ex.com/static/img/v2ex_192.png","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx63/cdn64@2020_1/2020/09/01/01-50-58-282_105a164e5dccb255.png","description":"way to explore","weekly":null,"link":null},"noPictureArticleList":[{"createdTime":"2021-05-30 18:00:57","updatedTime":"2021-05-30 18:00:57","id":null,"feedId":1673,"linkMd5":"96165ef3f20033ad3aa6100f4a00f34d"}],"tmpCommonImgCdnBytes":42872,"tmpBodyImgCdnBytes":328302,"tmpBgImgCdnBytes":0,"extra4":{"start":1622368703805,"total":0,"statList":[{"spend":551,"msg":"获取xml内容"},{"spend":10,"msg":"解释文章"},{"spend":0,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":62777,"msg":"正文链接上传到cdn"}]},"extra5":9,"extra6":9,"extra7ImgCdnFailResultVector":[null,null,null,null,null,null,null,null,{"code":1,"isDone":false,"source":"https://i.loli.net/2021/05/30/136WtCSY9cNaj7I.png","sourceStatusCode":200,"destWidth":974,"destHeight":848,"sourceBytes":109094,"destBytes":70810,"targetWebpQuality":75,"feedId":1673,"totalSpendMs":1880,"convertSpendMs":28,"createdTime":"2021-05-30 18:00:55","host":"europe-25*","referer":"https://www.v2ex.com/t/780176#reply0","linkMd5ListStr":"96165ef3f20033ad3aa6100f4a00f34d","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx23/cdn7/contents/2021/05/30/10-00-56-895_7db3dccac764f4c1.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 69189253.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Resource, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Sun, 30 May 2021 10:00:57 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["B22E:4D6A:5372947:550926F:60B36258"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1622370781"],"x-ratelimit-resource":["core"],"x-ratelimit-used":["60"],"x-xss-protection":["0"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx23/cdn7/contents/2021/05/30/10-00-56-895_7db3dccac764f4c1.webp","historyStatusCode":[],"spendMs":350},"base64UserPassword":null,"token":"df0b9******************************93a6e"},"githubUser":"myreaderx23","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"106.5 KB","destSize":"69.2 KB","compressRate":"64.9%"}],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://us-013.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://us-025.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://europe-25.herokuapp.com/":{"failCount":0,"successCount":8,"resultList":[200,200,200,200,200,200,200,200]},"http://us-037.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://us-001.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://us-036.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://us-51.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://us-52.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"https://i.loli.net/2021/05/30/vchr8eLVZgFIbEs.png","sourceStatusCode":200,"destWidth":976,"destHeight":685,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn68@2020_2/2021/05/30/09-59-54-746_793cb1788eb637eb.webp","sourceBytes":68454,"destBytes":42872,"targetWebpQuality":75,"feedId":1673,"totalSpendMs":570,"convertSpendMs":24,"createdTime":"2021-05-30 17:59:54","host":"europe-25*","referer":"https://www.v2ex.com/t/780176#reply0","linkMd5ListStr":"96165ef3f20033ad3aa6100f4a00f34d,96165ef3f20033ad3aa6100f4a00f34d","githubUser":"myreaderx22","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"66.8 KB","destSize":"41.9 KB","compressRate":"62.6%"},{"code":1,"isDone":false,"source":"https://i.loli.net/2021/05/30/ukFA5tIZBQrJVi1.png","sourceStatusCode":200,"destWidth":846,"destHeight":232,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn19@2020_3/2021/05/30/09-59-56-251_8999d44361aaf12f.webp","sourceBytes":25935,"destBytes":18312,"targetWebpQuality":75,"feedId":1673,"totalSpendMs":1460,"convertSpendMs":8,"createdTime":"2021-05-30 17:59:55","host":"europe-25*","referer":"https://www.v2ex.com/t/780176#reply0","linkMd5ListStr":"96165ef3f20033ad3aa6100f4a00f34d","githubUser":"myreaderx21","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"25.3 KB","destSize":"17.9 KB","compressRate":"70.6%"},{"code":1,"isDone":false,"source":"https://i.loli.net/2021/05/30/fVi8suqxojeK6O1.png","sourceStatusCode":200,"destWidth":950,"destHeight":850,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn23@2020_6/2021/05/30/10-00-56-688_90d69a2f10713c17.webp","sourceBytes":51836,"destBytes":25084,"targetWebpQuality":75,"feedId":1673,"totalSpendMs":1693,"convertSpendMs":21,"createdTime":"2021-05-30 18:00:55","host":"europe-25*","referer":"https://www.v2ex.com/t/780176#reply0","linkMd5ListStr":"96165ef3f20033ad3aa6100f4a00f34d","githubUser":"myreaderx8","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"50.6 KB","destSize":"24.5 KB","compressRate":"48.4%"},{"code":1,"isDone":false,"source":"https://i.loli.net/2021/05/30/M4I13AtSbneUx7c.png","sourceStatusCode":200,"destWidth":762,"destHeight":509,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx29/cdn16@2020_3/2021/05/30/10-00-56-727_d6099d4de5455e50.webp","sourceBytes":49759,"destBytes":24350,"targetWebpQuality":75,"feedId":1673,"totalSpendMs":1762,"convertSpendMs":13,"createdTime":"2021-05-30 18:00:55","host":"europe-25*","referer":"https://www.v2ex.com/t/780176#reply0","linkMd5ListStr":"96165ef3f20033ad3aa6100f4a00f34d","githubUser":"myreaderx29","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"48.6 KB","destSize":"23.8 KB","compressRate":"48.9%"},{"code":1,"isDone":false,"source":"https://i.loli.net/2021/05/30/akv7S4DOpMch3m1.png","sourceStatusCode":200,"destWidth":1052,"destHeight":830,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn10@2020_6/2021/05/30/10-00-56-853_eb459cea947b63b3.webp","sourceBytes":97402,"destBytes":48734,"targetWebpQuality":75,"feedId":1673,"totalSpendMs":2020,"convertSpendMs":24,"createdTime":"2021-05-30 18:00:55","host":"europe-25*","referer":"https://www.v2ex.com/t/780176#reply0","linkMd5ListStr":"96165ef3f20033ad3aa6100f4a00f34d","githubUser":"myreaderx1","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"95.1 KB","destSize":"47.6 KB","compressRate":"50%"},{"code":1,"isDone":false,"source":"https://i.loli.net/2021/05/30/qvwxyplOZo4hKVI.png","sourceStatusCode":200,"destWidth":1463,"destHeight":835,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn31@2020_6/2021/05/30/10-00-56-799_ad878431ebecdd0d.webp","sourceBytes":75714,"destBytes":41906,"targetWebpQuality":75,"feedId":1673,"totalSpendMs":2109,"convertSpendMs":33,"createdTime":"2021-05-30 18:00:55","host":"europe-25*","referer":"https://www.v2ex.com/t/780176#reply0","linkMd5ListStr":"96165ef3f20033ad3aa6100f4a00f34d","githubUser":"myreaderx12","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"73.9 KB","destSize":"40.9 KB","compressRate":"55.3%"},{"code":1,"isDone":false,"source":"https://i.loli.net/2021/05/30/IkQWyV1zK6sZ58x.png","sourceStatusCode":200,"destWidth":1325,"destHeight":726,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn29@2020_5/2021/05/30/10-00-56-922_c1f824848a8c36d1.webp","sourceBytes":118627,"destBytes":70670,"targetWebpQuality":75,"feedId":1673,"totalSpendMs":2497,"convertSpendMs":31,"createdTime":"2021-05-30 18:00:55","host":"europe-25*","referer":"https://www.v2ex.com/t/780176#reply0","linkMd5ListStr":"96165ef3f20033ad3aa6100f4a00f34d","githubUser":"myreaderx16","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"115.8 KB","destSize":"69 KB","compressRate":"59.6%"},{"code":1,"isDone":false,"source":"https://i.loli.net/2021/05/30/h5HRsoxYWLmiNt9.png","sourceStatusCode":200,"destWidth":1034,"destHeight":883,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx25/cdn5@2020_6/2021/05/30/10-00-56-970_67848b1226ba1492.webp","sourceBytes":142582,"destBytes":99246,"targetWebpQuality":75,"feedId":1673,"totalSpendMs":2535,"convertSpendMs":33,"createdTime":"2021-05-30 18:00:55","host":"europe-25*","referer":"https://www.v2ex.com/t/780176#reply0","linkMd5ListStr":"96165ef3f20033ad3aa6100f4a00f34d","githubUser":"myreaderx25","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"139.2 KB","destSize":"96.9 KB","compressRate":"69.6%"}],"successGithubMap":{"myreaderx25":1,"myreaderx8":1,"myreaderx16":1,"myreaderx21":1,"myreaderx22":1,"myreaderx12":1,"myreaderx1":1,"myreaderx29":1},"failGithubMap":{"myreaderx23":1}}
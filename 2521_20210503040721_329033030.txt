{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2021-05-03 12:03:31","updatedTime":"2021-05-03 12:03:31","title":"总监问我：Kafka为什么要抛弃ZooKeeper？","link":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%80%BB%E7%9B%91%E9%97%AE%E6%88%91%EF%BC%9AKafka%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%8A%9B%E5%BC%83ZooKeeper%EF%BC%9F","description":"<div><div><div id=\"media\" class=\"rich_media_thumb_wrp\">\n\n            <img class=\"rich_media_thumb\" src=\"http://content.sov5.cn/mmbiz_jpg/eZzl4LXykQxfHPNOkI3dRNys6LehDQqhvnHfr6kicprHb6RtgcuLGwuJM3K628geHyoNxNNdj8w5AF97249YuEQ?imageView2/1/w/600\">\n        </div>\n    \n\n    \n\n    <div class=\"rich_media_content\" id=\"js_content\">\n                    \n\n                    \n                    \n                    \n                    <p style=\"text-align: center;\"><span style=\"font-size: 14px;letter-spacing: 0.5440000295639038px;text-align: center;max-width: 100%;color: rgb(255, 41, 65);line-height: 22.4px;\">（给</span><span style=\"font-size: 14px;letter-spacing: 0.5440000295639038px;text-align: center;max-width: 100%;line-height: 22.4px;color: rgb(0, 128, 255);\">ImportNew</span><span style=\"font-size: 14px;letter-spacing: 0.5440000295639038px;text-align: center;max-width: 100%;color: rgb(255, 41, 65);line-height: 22.4px;\">加星标，提高Java技能）</span></p><blockquote><p><span style=\"font-size: 14px;\">转自：yes的练级攻略 / <span style=\"color: rgb(154, 154, 154);font-size: 14px;\">是Yes呀</span></span></p></blockquote><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">在上个月 30 号， confluent 发布了一篇文章，文章上说在 Kafka 2.8 版本上将支持内部的 quorum 服务来替换 ZooKeeper 的工作。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;color: rgb(0, 0, 0);font-family: -apple-system, system-ui, BlinkMacSystemFont, \" helvetica neue sc sans gb yahei arial sans-serif left normal rgb flex column center><img data-ratio=\"0.3561320754716981\" data-type=\"png\" data-w=\"848\" style=\"margin-right: auto; margin-bottom: 10px; margin-left: auto; display: block; box-sizing: border-box !important; width: 677px !important; visibility: visible !important; height: auto !important; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eSdk75TK4nHQJOTMnuMpLPx77KCicwSYCs7kBPMYcm38xMC3e1qtKMeFoLAL7ab1ZLNzRDZTwBe5O7LibbAdLaZQ/640?wx_fmt=png\"></figure><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">其实去年我写的 </span><span style=\"font-size: 15px;\">Kafka 控制器事件处理全流程</span><span style=\"font-size: 15px;\">这篇文章已经提到这一点。</span></p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;color: rgb(0, 0, 0);font-family: -apple-system, system-ui, BlinkMacSystemFont, \" helvetica neue sc sans gb yahei arial sans-serif left normal rgb flex column center><img data-ratio=\"0.3298662704309064\" data-type=\"png\" data-w=\"673\" style=\"margin-right: auto; margin-bottom: 10px; margin-left: auto; display: block; box-sizing: border-box !important; width: 673px !important; visibility: visible !important; height: auto !important; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eSdk75TK4nHQJOTMnuMpLPx77KCicwSYCjWtLiaoxXdBo70B8TfSJO7C28dwtmkgOJjfs8w3icGyh3NTABsr2Qqmg/640?wx_fmt=png\"></figure><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">今天再稍微展开来说说。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><h1 data-tool=\"mdnice编辑器\"><span style=\"color: rgb(171, 25, 66);\"><strong><span style=\"color: rgb(171, 25, 66);font-size: 15px;text-align: left;\">ZooKeeper 的作用</span></strong></span></h1><p><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">ZooKeeper 是一个开源的分布式协调服务框架，你也可以认为它是一个可以保证一致性的分布式(小量)存储系统。特别适合存储一些公共的配置信息、集群的一些元数据等等。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">它有持久节点和临时节点，而临时节点这个玩意再配合 Watcher 机制就很有用。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">当创建临时节点的客户端与 ZooKeeper 断连之后，这个临时节点就会消失，并且订阅了节点状态变更的客户端会收到这个节点状态变更的通知。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;color: rgb(0, 0, 0);font-family: -apple-system, system-ui, BlinkMacSystemFont, \" helvetica neue sc sans gb yahei arial sans-serif left normal rgb flex column center><img data-ratio=\"0.6635416666666667\" data-type=\"png\" data-w=\"960\" style=\"margin-right: auto; margin-bottom: 10px; margin-left: auto; display: block; box-sizing: border-box !important; width: 677px !important; visibility: visible !important; height: auto !important; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eSdk75TK4nHQJOTMnuMpLPx77KCicwSYCC5a3JaxhWJZ5sOcjd2JiaZtuZzBvzpXkBC7jBkFyLPSTTPxVFwtEDGQ/640?wx_fmt=png\"></figure><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><br></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">所以集群中某一服务上线或者下线，都可以被检测到。因此可以用来实现服务发现，也可以实现故障转移的监听机制。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">Kafka 就是强依赖于 ZooKeeper，没有 ZooKeeper 的话 Kafka 都无法运行。</span><span style=\"font-size: 15px;\">ZooKeeper 为 Kafka 提供了元数据的管理</span><span style=\"font-size: 15px;\">，例如一些 Broker 的信息、主题数据、分区数据等等。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">在每个 Broker 启动的时候，都会和 ZooKeeper 进行交互，这样 ZooKeeper 就存储了集群中所有的主题、配置、副本等信息。</span></p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;color: rgb(0, 0, 0);font-family: -apple-system, system-ui, BlinkMacSystemFont, \" helvetica neue sc sans gb yahei arial sans-serif left normal rgb flex column center></figure><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;color: rgb(0, 0, 0);font-family: -apple-system, system-ui, BlinkMacSystemFont, \" helvetica neue sc sans gb yahei arial sans-serif left normal rgb flex column center><img data-ratio=\"0.58397365532382\" data-type=\"png\" data-w=\"911\" style=\"text-align: left; height: auto !important; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eSdk75TK4nHQJOTMnuMpLPx77KCicwSYCFwfPMXfqe0u0K8NdTDK8e78XHcSWwxR6H8hQBgDicLleNDmoUAuwLaQ/640?wx_fmt=png\"></figure><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">还有一些选举、扩容等机制也都依赖 ZooKeeper 。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">例如控制器的选举：每个 Broker 启动都会尝试在 ZooKeeper 注册/controller临时节点来竞选控制器，第一个创建/controller节点的 Broker 会被指定为控制器。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">竞争失败的节点也会依赖 watcher 机制，监听这个节点，如果控制器宕机了，那么其它 Broker 会继续来争抢，实现控制器的 failover。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">从上面就可以得知 ZooKeeper 对 Kafka 来说<strong>很重要</strong>。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><h1 data-tool=\"mdnice编辑器\"><span style=\"color: rgb(171, 25, 66);\"><strong><span style=\"color: rgb(171, 25, 66);font-size: 15px;text-align: left;\">那为什么要抛弃 ZooKeeper</span></strong></span></h1><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">软件架构都是演进的，之所以要变更那肯定是因为出现了瓶颈。</span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p style=\"text-align: left;\"><strong><span style=\"font-size: 15px;\">先来看看运维的层面的问题。</span></strong><span style=\"font-size: 15px;\"></span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">首先身为一个中间件，需要依赖另一个中间件，这就感觉有点奇怪。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">你要说依赖 Netty 这种，那肯定是没问题的。</span><span style=\"font-size: 15px;\">但是 Kafka 的运行需要提供 ZooKeeper 集群，这其实有点怪怪的。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">就等于如果你公司要上 Kafka 就得跟着上 ZooKeeper ，被动了增加了运维的复杂度。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">好比你去商场买衣服，要买个上衣，服务员说不单卖，要买就得买一套，这钱是不是多花了？</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">所以运维人员不仅得照顾 Kafka 集群，还得照顾 ZooKeeper 集群。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p style=\"text-align: left;\"><strong><span style=\"font-size: 15px;\">再看性能层面的问题。</span></strong><span style=\"font-size: 15px;\"></span></p><p style=\"text-align: left;\"><strong><span style=\"font-size: 15px;\"><br></span></strong></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">ZooKeeper 有个特点，<strong>强一致性</strong>。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">如果 ZooKeeper 集群的某个节点的数据发生变更，则会通知其它 ZooKeeper 节点同时执行更新，就得等着大家（超过半数）都写完了才行，这写入的性能就比较差了。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;color: rgb(0, 0, 0);font-family: -apple-system, system-ui, BlinkMacSystemFont, \" helvetica neue sc sans gb yahei arial sans-serif left normal rgb flex column center><img data-ratio=\"0.43358395989974935\" data-type=\"png\" data-w=\"798\" style=\"margin-right: auto; margin-bottom: 10px; margin-left: auto; display: block; box-sizing: border-box !important; width: 677px !important; visibility: visible !important; height: auto !important; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eSdk75TK4nHQJOTMnuMpLPx77KCicwSYCcJiaTXWI5FAv27Y4ybEP92Hl5pIKPMRojObf7uicxbwb0WcBQpDjiaWvg/640?wx_fmt=png\"></figure><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">然后看到上面我说的<strong>小量</strong>存储系统了吧，一般而言，ZooKeeper 只适用于存储一些简单的配置或者是集群的元数据，不是真正意义上的存储系统。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"></span><span style=\"font-size: 15px;\">如果写入的数据量过大，ZooKeeper 的性能和稳定性就会下降，可能导致 Watch 的延时或丢失。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">所以在 Kafka 集群比较大，分区数很多的时候，ZooKeeper 存储的元数据就会很多，性能就差了。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">还有，ZooKeeper 也是分布式的，也需要选举，它的选举也不快，而且发生选举的那段时候是不提供服务的！</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p style=\"text-align: left;\"><strong><span style=\"font-size: 15px;\">基于 ZooKeeper 的性能问题 Kafka 之前就做了一些升级</span></strong><span style=\"font-size: 15px;\">。</span><span style=\"font-size: 15px;\"></span></p><p style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">例如以前 Consumer 的位移数据是保存在 ZooKeeper 上的，所以当提交位移或者获取位移的时候都需要访问 ZooKeeper ，这量一大 ZooKeeper 就顶不住。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">所以后面引入了位移主题（Topic 是 __consumer_offsets），将位移的提交和获取当做消息一样来处理，存储在日志中，避免了频繁访问 ZooKeeper 性能差的问题。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><br></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">还有像一些大公司，可能要支持百万分区级别，这目前的 Kafka 单集群架构下是无法支持稳定运行的，也就是目前单集群可以承载的分区数有限。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">所以，Kafka 需要去 ZooKeeper 。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><h1 data-tool=\"mdnice编辑器\"><span style=\"color: rgb(171, 25, 66);\"><strong><span style=\"color: rgb(171, 25, 66);font-size: 15px;text-align: left;\">所以没了 Zookeeper 之后的 Kafka 的怎样的？</span></strong></span></h1><p><span style=\"color: rgb(171, 25, 66);\"><strong><span style=\"color: rgb(171, 25, 66);font-size: 15px;text-align: left;\"><br></span></strong></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">没了 Zookeeper 的 Kafka 就把元数据存储到自己内部了，利用之前的 Log 存储机制来保存元数据。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">就和上面说到的位移主题一样，会有一个元数据主题，元数据会像普通消息一样保存在 Log 中。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">所以元数据和之前的位移一样，利用现有的消息存储机制稍加改造来实现了功能，完美！</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">然后还搞了个 KRaft 来实现 Controller Quorum。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><figure data-tool=\"mdnice编辑器\" style=\"margin-top: 10px;margin-bottom: 10px;color: rgb(0, 0, 0);font-family: -apple-system, system-ui, BlinkMacSystemFont, \" helvetica neue sc sans gb yahei arial sans-serif left normal rgb flex column center><img data-ratio=\"0.4740740740740741\" data-type=\"png\" data-w=\"675\" style=\"margin-right: auto; margin-bottom: 10px; margin-left: auto; display: block; box-sizing: border-box !important; width: 675px !important; visibility: visible !important; height: auto !important; max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eSdk75TK4nHQJOTMnuMpLPx77KCicwSYCRnHmuO1ia5O5QWaPzvfIk41j4gAaA0AazMGicyJJqLzq3CXhHvJCZ4UQ/640?wx_fmt=png\"><figcaption style=\"margin-top: 5px;text-align: center;color: rgb(136, 136, 136);font-size: 12px;\">图来自 confluent</figcaption></figure><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><br></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">这个协议是基于 Raft 的，协议具体就不展开了，就理解为它能解决 Controller  Leader 的选举，并且让所有节点达成共识。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">在之前基于 Zookeeper 实现的<strong>单个</strong> Controller 在分区数太大的时候还有个问题，故障转移太慢了。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">当 Controller 变更的时候，需要重新加载所有的元数据到新的 Controller 身上，并且需要把这些元数据同步给集群内的所有 Broker。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">而 Controller Quorum 中的 Leader 选举切换则很快，因为元数据都已经在 quorum 中同步了，也就是 quorum 的 Broker 都已经有全部了元数据，所以不需要重新加载元数据！</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">并且其它 Broker 已经基于 Log 存储了一些元数据，所以只需要增量更新即可，不需要全量了。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">这波改造下来就解决了之前元数据过多的问题，可以支持更多的分区！</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><h1 data-tool=\"mdnice编辑器\"><span style=\"color: rgb(171, 25, 66);\"><strong><span style=\"color: rgb(171, 25, 66);font-size: 15px;text-align: left;\">最后</span></strong></span></h1><p><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">可能看到这里有人会说，那为何一开始不这么实现？</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">因为 ZooKeeper 是一个功能强大且经过验证的工具，在早期利用它来实现一些功能，多简单哟，都不需要自己实现。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">要不是 ZooKeeper 的机制导致了这个瓶颈，也不可能会有这个改造的。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\">软件就是这样，没必要重复造轮子，合适就好。</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 15px;\"><br></span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 14px;color: rgb(136, 136, 136);\">参考资料</span></p><p data-tool=\"mdnice编辑器\" style=\"text-align: left;\"><span style=\"font-size: 14px;color: rgb(136, 136, 136);\"><br></span></p><ul class=\"list-paddingleft-2\" style=\"text-align: left;\"><li style=\"text-align: left;font-size: 12px;color: rgb(136, 136, 136);\"><section style=\"text-align: left;\"><span style=\"font-size: 12px;color: rgb(136, 136, 136);\">https://www.confluent.io/blog/kafka-without-zookeeper-a-sneakpeek/</span></section></li><li style=\"text-align: left;font-size: 12px;color: rgb(136, 136, 136);\"><section style=\"text-align: left;\"><span style=\"font-size: 12px;color: rgb(136, 136, 136);\">https://time.geekbang.org/column/article/253202</span></section></li><li style=\"text-align: left;font-size: 12px;color: rgb(136, 136, 136);\"><section style=\"text-align: left;\"><span style=\"font-size: 12px;color: rgb(136, 136, 136);\">https://www.infoq.cn/article/PHF3gFjUTDhWmctg6kXe</span></section></li></ul><p><span style=\"font-size: 15px;text-align: left;\"></span></p><p style=\"white-space: normal;text-align: center;\"><span style=\"font-size: 15px;color: rgb(136, 136, 136);\">- EOF -</span></p><section donone=\"shifuMouseDownCard('shifu_c_030')\" label=\"Copyright Reserved by PLAYHUDONG.\" style=\"margin-top: 1em;margin-bottom: 1em;white-space: normal;text-align: start;max-width: 100%;caret-color: rgb(0, 0, 0);color: rgb(0, 0, 0);border-width: 0px;border-style: initial;border-color: initial;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><section style=\"margin-left: 1em;max-width: 100%;line-height: 1.4;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"padding: 3px 8px;max-width: 100%;border-radius: 4px;color: rgb(255, 255, 255);background-color: rgb(255, 105, 31);font-family: inherit;text-align: inherit;text-decoration: inherit;font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">推荐阅读</span>  <span style=\"margin-left: 4px;padding: 3px 8px;max-width: 100%;border-radius: 1.2em;color: rgb(255, 255, 255);line-height: 1.2;background-color: rgb(204, 204, 204);font-family: inherit;text-align: inherit;text-decoration: inherit;border-color: rgb(249, 110, 87);font-size: 12px;box-sizing: border-box !important;overflow-wrap: break-word !important;\">点击标题可跳转</span></section><section style=\"margin-top: -11px;padding: 22px 16px 16px;max-width: 100%;border-width: 1px;border-style: solid;border-color: rgb(255, 105, 31);color: rgb(51, 51, 51);font-size: 1em;font-family: inherit;text-align: inherit;text-decoration: inherit;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><p style=\"max-width: 100%;min-height: 1em;line-height: 2em;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"text-decoration: underline;font-size: 13px;\">1、<a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;mid=2651494543&amp;idx=1&amp;sn=5ea9d07fe97ccf932f17049bb57d5cd0&amp;chksm=bd25f4f08a527de61026ccb533f190434279efd61e81e228d9d32ffaa170de3cd0eb669773ce&amp;scene=21#wechat_redirect\" data-itemshowtype=\"0\" tab=\"innerlink\" data-linktype=\"2\">大白话认识 Kafka 背后优秀的架构设计</a></span></p><p style=\"max-width: 100%;min-height: 1em;line-height: 2em;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"text-decoration: underline;font-size: 13px;\">2、<a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;mid=2651494363&amp;idx=2&amp;sn=41c3daa0f863eab05cfe81153e82ae06&amp;chksm=bd25fba48a5272b2a4102af1c1b27f8943674f1ab0b24338dd744b2f81ee97b00e303697fef0&amp;scene=21#wechat_redirect\" data-itemshowtype=\"11\" tab=\"innerlink\" data-linktype=\"2\">我用kafka两年踩过的一些非比寻常的坑</a></span></p><p style=\"max-width: 100%;min-height: 1em;line-height: 2em;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><span style=\"text-decoration: underline;font-size: 13px;\">3、<a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;mid=2651494355&amp;idx=2&amp;sn=793ae50c65243dd6bdb7df96a1140887&amp;chksm=bd25fbac8a5272ba6e0ac88ebf609bdb03924cb10720d07942f612bf9dec0274b8ae42413c9f&amp;scene=21#wechat_redirect\" data-itemshowtype=\"11\" tab=\"innerlink\" data-linktype=\"2\">真的，关于 Kafka 入门看这一篇就够了</a></span></p></section></section><p style=\"white-space: normal;caret-color: rgb(0, 0, 0);color: rgb(0, 0, 0);text-align: start;max-width: 100%;min-height: 1em;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><br></p><p style=\"text-align: center;\"><span style=\"max-width: 100%;font-size: 14px;color: rgb(255, 169, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;\">看完本文有收获？请转发分享给更多人</span><br></p><p style=\"white-space: normal;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><strong style=\"max-width: 100%;color: rgb(255, 169, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;\">关注「ImportNew」，提升Java技能</strong></p><p style=\"white-space: normal;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);text-align: center;box-sizing: border-box !important;overflow-wrap: break-word !important;\"><img data-ratio=\"0.9166666666666666\" data-s=\"300,640\" data-type=\"jpeg\" data-w=\"600\" style=\"box-sizing: border-box !important; overflow-wrap: break-word !important; visibility: visible !important; width: 600px !important; height: auto !important; max-width: 600px\" width=\"auto\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/2A8tXicCG8ylbWIGfdoDED35IRRySQZTXUkJ1eop9MHApzFibKnOo0diboXpl0rmS5mH78YJhsWQv0dhv718A6kUA/640?wx_fmt=jpeg\"></p><p style=\"text-align: right;\"><span style=\"font-size: 14px;text-align: right;\"></span><span style=\"max-width: 100%;font-family: -apple-system-font, system-ui, \" helvetica neue sc sans gb yahei ui arial sans-serif center break-word border-box>点赞和在看就是最大的支持</span><span style=\"max-width: 100%;font-family: -apple-system-font, system-ui, \" helvetica neue sc sans gb yahei ui arial sans-serif center break-word border-box>❤️</span></p>\n                </div>\n\n    \n    <br>\n\n    \n        <a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;mid=2651494938&amp;idx=1&amp;sn=9de3b611c637927b8ba3df893dcb2662&amp;chksm=bd25f6658a527f738dbea4aa1f29d7b3a97c94533342100adc9eef0dadc1019ca7220673c154&amp;scene=0#rd\" style=\"color: blue\" class=\"media_tool_meta meta_primary\">原文</a>\n        <br>\n    \n\n    \n\n    <img alt=\"\" width=\"1px\" height=\"1px\" class=\"\" style=\"width:1px;height:1px;display:none\" src=\"http://www.jintiankansha.me/rss_static/54540/u6hLa2YqBu\"></div></div>","descriptionType":"html","publishedDate":"Sun, 02 May 2021 05:56:00 +0000","feedId":2521,"bgimg":"http://content.sov5.cn/mmbiz_jpg/eZzl4LXykQxfHPNOkI3dRNys6LehDQqhvnHfr6kicprHb6RtgcuLGwuJM3K628geHyoNxNNdj8w5AF97249YuEQ?imageView2/1/w/600","linkMd5":"83b0cc9ddca5117da34ed951d56e0e1e","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn90@2020_3/2021/05/03/04-04-32-592_1782385010f4f3f3.webp","destWidth":600,"destHeight":545,"sourceBytes":14414,"destBytes":10648,"author":"","articleImgCdnMap":{"http://content.sov5.cn/mmbiz_jpg/eZzl4LXykQxfHPNOkI3dRNys6LehDQqhvnHfr6kicprHb6RtgcuLGwuJM3K628geHyoNxNNdj8w5AF97249YuEQ?imageView2/1/w/600":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn90@2020_3/2021/05/03/04-04-32-592_1782385010f4f3f3.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eSdk75TK4nHQJOTMnuMpLPx77KCicwSYCs7kBPMYcm38xMC3e1qtKMeFoLAL7ab1ZLNzRDZTwBe5O7LibbAdLaZQ/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn12@2020_6/2021/05/03/04-04-45-086_5cef8264eedc6589.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eSdk75TK4nHQJOTMnuMpLPx77KCicwSYCjWtLiaoxXdBo70B8TfSJO7C28dwtmkgOJjfs8w3icGyh3NTABsr2Qqmg/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn1@2020_3/2021/05/03/04-04-35-143_3f6ed9ecae5d78cd.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eSdk75TK4nHQJOTMnuMpLPx77KCicwSYCC5a3JaxhWJZ5sOcjd2JiaZtuZzBvzpXkBC7jBkFyLPSTTPxVFwtEDGQ/640?wx_fmt=png":null,"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eSdk75TK4nHQJOTMnuMpLPx77KCicwSYCFwfPMXfqe0u0K8NdTDK8e78XHcSWwxR6H8hQBgDicLleNDmoUAuwLaQ/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn98@2020_1/2021/05/03/04-05-30-611_7b507b390e512121.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eSdk75TK4nHQJOTMnuMpLPx77KCicwSYCcJiaTXWI5FAv27Y4ybEP92Hl5pIKPMRojObf7uicxbwb0WcBQpDjiaWvg/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx/cdn7@2020_3/2021/05/03/04-07-21-118_f91c90962e4f93fd.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eSdk75TK4nHQJOTMnuMpLPx77KCicwSYCRnHmuO1ia5O5QWaPzvfIk41j4gAaA0AazMGicyJJqLzq3CXhHvJCZ4UQ/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn10@2020_4/2021/05/03/04-04-59-695_47906ab3d12e2351.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/2A8tXicCG8ylbWIGfdoDED35IRRySQZTXUkJ1eop9MHApzFibKnOo0diboXpl0rmS5mH78YJhsWQv0dhv718A6kUA/640?wx_fmt=jpeg":null,"http://www.jintiankansha.me/rss_static/54540/u6hLa2YqBu":null},"publishedOrCreatedDate":1620014611615}],"record":{"createdTime":"2021-05-03 12:03:31","updatedTime":"2021-05-03 12:03:31","feedId":2521,"fetchDate":"Mon, 03 May 2021 04:03:31 +0000","fetchMs":630,"handleMs":20,"totalMs":230807,"newArticles":0,"totalArticles":5,"status":1,"type":0,"ip":"af6ca12eefe249e94a3f077d15d7c168","hostName":"europe65*","requestId":"f8250120ab0b49608a8682b117d15f79_2521","contentType":"application/rss+xml","totalBytes":129120,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":9,"articlesImgsGithubTotal":6,"successGithubMap":{"myreaderx15":1,"myreaderx12":1,"myreaderx24":1,"myreaderx5oss":1,"myreaderx18":1,"myreaderx":1},"failGithubMap":{"myreaderx23":1}},"feed":{"createdTime":"2020-08-24 21:31:41","updatedTime":"2020-09-01 10:09:47","id":2521,"name":"ImportNew","url":"http://feedmaker.kindle4rss.com/feeds/importnew.weixin.xml","subscriber":null,"website":null,"icon":"http://www.sogou.com/images/logo/new/favicon.ico?v=4","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx63/cdn9@2020_3/2020/09/01/02-08-31-388_d24121c9beed1de6.ico","description":"伯乐在线旗下账号，专注Java技术分享，包括Java基础技术、进阶技能、架构设计和Java技术领域动态等。","weekly":null,"link":null},"noPictureArticleList":[{"createdTime":"2021-05-03 12:07:21","updatedTime":"2021-05-03 12:07:21","id":null,"feedId":2521,"linkMd5":"83b0cc9ddca5117da34ed951d56e0e1e"}],"tmpCommonImgCdnBytes":10648,"tmpBodyImgCdnBytes":118472,"tmpBgImgCdnBytes":0,"extra4":{"start":1620014610592,"total":0,"statList":[{"spend":1003,"msg":"获取xml内容"},{"spend":20,"msg":"解释文章"},{"spend":0,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":168516,"msg":"正文链接上传到cdn"}]},"extra5":9,"extra6":8,"extra7ImgCdnFailResultVector":[null,{"code":1,"isDone":false,"source":"http://www.jintiankansha.me/rss_static/54540/u6hLa2YqBu","sourceStatusCode":405,"sourceBytes":0,"destBytes":0,"feedId":2521,"totalSpendMs":962,"convertSpendMs":0,"createdTime":"2021-05-03 12:04:33","host":"us-023*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%80%BB%E7%9B%91%E9%97%AE%E6%88%91%EF%BC%9AKafka%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%8A%9B%E5%BC%83ZooKeeper%EF%BC%9F","linkMd5ListStr":"83b0cc9ddca5117da34ed951d56e0e1e","extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[405],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"http://www.jintiankansha.me/rss_static/54540/u6hLa2YqBu","sourceStatusCode":405,"sourceBytes":0,"destBytes":0,"feedId":2521,"totalSpendMs":767,"convertSpendMs":0,"createdTime":"2021-05-03 12:04:34","host":"us-019*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%80%BB%E7%9B%91%E9%97%AE%E6%88%91%EF%BC%9AKafka%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%8A%9B%E5%BC%83ZooKeeper%EF%BC%9F","linkMd5ListStr":"83b0cc9ddca5117da34ed951d56e0e1e","extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[405],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/2A8tXicCG8ylbWIGfdoDED35IRRySQZTXUkJ1eop9MHApzFibKnOo0diboXpl0rmS5mH78YJhsWQv0dhv718A6kUA/640?wx_fmt=jpeg","sourceStatusCode":200,"destWidth":600,"destHeight":550,"sourceBytes":37143,"destBytes":31608,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":19510,"convertSpendMs":11,"createdTime":"2021-05-03 12:05:03","host":"us-013*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%80%BB%E7%9B%91%E9%97%AE%E6%88%91%EF%BC%9AKafka%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%8A%9B%E5%BC%83ZooKeeper%EF%BC%9F","linkMd5ListStr":"83b0cc9ddca5117da34ed951d56e0e1e","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx23/cdn5/contents/2021/05/03/04-05-22-503_f93d0239d4369c75.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 69189253.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Mon, 03 May 2021 04:05:22 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["C8E6:062C:223663D:6B84D0A:608F7682"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1620016813"],"x-ratelimit-used":["60"],"x-xss-protection":["0"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx23/cdn5/contents/2021/05/03/04-05-22-503_f93d0239d4369c75.webp","historyStatusCode":[],"spendMs":80},"base64UserPassword":null,"token":"df0b9******************************93a6e"},"githubUser":"myreaderx23","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"36.3 KB","destSize":"30.9 KB","compressRate":"85.1%"},null,null,{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eSdk75TK4nHQJOTMnuMpLPx77KCicwSYCcJiaTXWI5FAv27Y4ybEP92Hl5pIKPMRojObf7uicxbwb0WcBQpDjiaWvg/640?wx_fmt=png","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":2521,"totalSpendMs":1117,"convertSpendMs":0,"createdTime":"2021-05-03 12:05:34","host":"us-011*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%80%BB%E7%9B%91%E9%97%AE%E6%88%91%EF%BC%9AKafka%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%8A%9B%E5%BC%83ZooKeeper%EF%BC%9F","linkMd5ListStr":"83b0cc9ddca5117da34ed951d56e0e1e","extra22GetBytesInfo":"2、Referer字段 ： http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%80%BB%E7%9B%91%E9%97%AE%E6%88%91%EF%BC%9AKafka%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%8A%9B%E5%BC%83ZooKeeper%EF%BC%9F","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/2A8tXicCG8ylbWIGfdoDED35IRRySQZTXUkJ1eop9MHApzFibKnOo0diboXpl0rmS5mH78YJhsWQv0dhv718A6kUA/640?wx_fmt=jpeg","sourceStatusCode":200,"destWidth":600,"destHeight":550,"sourceBytes":37143,"destBytes":31608,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":23202,"convertSpendMs":11,"createdTime":"2021-05-03 12:05:22","host":"us-016*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%80%BB%E7%9B%91%E9%97%AE%E6%88%91%EF%BC%9AKafka%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%8A%9B%E5%BC%83ZooKeeper%EF%BC%9F","linkMd5ListStr":"83b0cc9ddca5117da34ed951d56e0e1e","rawMap":{"githubUrl":"https://api.github.com/repos/myreaderx23/cdn5/contents/2021/05/03/04-05-45-910_f93d0239d4369c75.webp","resp":{"code":403,"msg":"Forbidden","body":"{\n  \"message\": \"API rate limit exceeded for user ID 69189253.\",\n  \"documentation_url\": \"https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting\"\n}\n","headerMap":{"access-control-allow-origin":["*"],"access-control-expose-headers":["ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset"],"content-security-policy":["default-src 'none'"],"content-type":["application/json; charset=utf-8"],"date":["Mon, 03 May 2021 04:05:45 GMT"],"referrer-policy":["origin-when-cross-origin, strict-origin-when-cross-origin"],"server":["GitHub.com"],"strict-transport-security":["max-age=31536000; includeSubdomains; preload"],"transfer-encoding":["chunked"],"vary":["Accept-Encoding, Accept, X-Requested-With"],"x-accepted-oauth-scopes":["repo"],"x-content-type-options":["nosniff"],"x-frame-options":["deny"],"x-github-media-type":["github.v3; format=json"],"x-github-request-id":["87FE:76AB:35A5046:A75CCF3:608F7699"],"x-oauth-scopes":["admin:enterprise, admin:gpg_key, admin:org, admin:org_hook, admin:public_key, admin:repo_hook, delete:packages, delete_repo, gist, notifications, repo, user, workflow, write:discussion, write:packages"],"x-ratelimit-limit":["60"],"x-ratelimit-remaining":["0"],"x-ratelimit-reset":["1620016813"],"x-ratelimit-used":["60"],"x-xss-protection":["0"]},"exceptionMsg":"Unexpected code 403,url is : https://api.github.com/repos/myreaderx23/cdn5/contents/2021/05/03/04-05-45-910_f93d0239d4369c75.webp","historyStatusCode":[],"spendMs":30},"base64UserPassword":null,"token":"df0b9******************************93a6e"},"githubUser":"myreaderx23","githubHttpCode":403,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"36.3 KB","destSize":"30.9 KB","compressRate":"85.1%"},null,{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eSdk75TK4nHQJOTMnuMpLPx77KCicwSYCcJiaTXWI5FAv27Y4ybEP92Hl5pIKPMRojObf7uicxbwb0WcBQpDjiaWvg/640?wx_fmt=png","sourceStatusCode":403,"sourceBytes":0,"destBytes":0,"feedId":2521,"totalSpendMs":1117,"convertSpendMs":0,"createdTime":"2021-05-03 12:05:34","host":"us-011*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%80%BB%E7%9B%91%E9%97%AE%E6%88%91%EF%BC%9AKafka%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%8A%9B%E5%BC%83ZooKeeper%EF%BC%9F","linkMd5ListStr":"83b0cc9ddca5117da34ed951d56e0e1e","extra22GetBytesInfo":"2、Referer字段 ： http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%80%BB%E7%9B%91%E9%97%AE%E6%88%91%EF%BC%9AKafka%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%8A%9B%E5%BC%83ZooKeeper%EF%BC%9F","extra23historyStatusCode":[403,403],"sourceSize":"0","destSize":"0"}],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://us-013.herokuapp.com/":{"failCount":0,"successCount":2,"resultList":[200,200]},"http://us-019.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[405]},"http://us-010.herokuapp.com/":{"failCount":1,"successCount":1,"resultList":[200,403]},"http://us-015.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-023.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[405]},"http://us-016.herokuapp.com/":{"failCount":1,"successCount":2,"resultList":[200,200,null]},"http://us-014.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]},"http://us-011.herokuapp.com/":{"failCount":1,"successCount":1,"resultList":[200,403]},"http://us-012.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[null]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"http://content.sov5.cn/mmbiz_jpg/eZzl4LXykQxfHPNOkI3dRNys6LehDQqhvnHfr6kicprHb6RtgcuLGwuJM3K628geHyoNxNNdj8w5AF97249YuEQ?imageView2/1/w/600","sourceStatusCode":200,"destWidth":600,"destHeight":545,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn90@2020_3/2021/05/03/04-04-32-592_1782385010f4f3f3.webp","sourceBytes":14414,"destBytes":10648,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":957,"convertSpendMs":13,"createdTime":"2021-05-03 12:04:31","host":"us-53*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%80%BB%E7%9B%91%E9%97%AE%E6%88%91%EF%BC%9AKafka%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%8A%9B%E5%BC%83ZooKeeper%EF%BC%9F","linkMd5ListStr":"83b0cc9ddca5117da34ed951d56e0e1e,83b0cc9ddca5117da34ed951d56e0e1e","githubUser":"myreaderx18","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"14.1 KB","destSize":"10.4 KB","compressRate":"73.9%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eSdk75TK4nHQJOTMnuMpLPx77KCicwSYCjWtLiaoxXdBo70B8TfSJO7C28dwtmkgOJjfs8w3icGyh3NTABsr2Qqmg/640?wx_fmt=png","sourceStatusCode":200,"destWidth":673,"destHeight":222,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn1@2020_3/2021/05/03/04-04-35-143_3f6ed9ecae5d78cd.webp","sourceBytes":6170,"destBytes":23880,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":2509,"convertSpendMs":7,"createdTime":"2021-05-03 12:04:33","host":"us-011*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%80%BB%E7%9B%91%E9%97%AE%E6%88%91%EF%BC%9AKafka%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%8A%9B%E5%BC%83ZooKeeper%EF%BC%9F","linkMd5ListStr":"83b0cc9ddca5117da34ed951d56e0e1e","githubUser":"myreaderx24","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"6 KB","destSize":"23.3 KB","compressRate":"387%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eSdk75TK4nHQJOTMnuMpLPx77KCicwSYCs7kBPMYcm38xMC3e1qtKMeFoLAL7ab1ZLNzRDZTwBe5O7LibbAdLaZQ/640?wx_fmt=png","sourceStatusCode":200,"destWidth":848,"destHeight":302,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn12@2020_6/2021/05/03/04-04-45-086_5cef8264eedc6589.webp","sourceBytes":33141,"destBytes":18022,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":12332,"convertSpendMs":11,"createdTime":"2021-05-03 12:04:33","host":"us-016*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%80%BB%E7%9B%91%E9%97%AE%E6%88%91%EF%BC%9AKafka%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%8A%9B%E5%BC%83ZooKeeper%EF%BC%9F","linkMd5ListStr":"83b0cc9ddca5117da34ed951d56e0e1e","githubUser":"myreaderx5oss","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"32.4 KB","destSize":"17.6 KB","compressRate":"54.4%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eSdk75TK4nHQJOTMnuMpLPx77KCicwSYCRnHmuO1ia5O5QWaPzvfIk41j4gAaA0AazMGicyJJqLzq3CXhHvJCZ4UQ/640?wx_fmt=png","sourceStatusCode":200,"destWidth":675,"destHeight":320,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn10@2020_4/2021/05/03/04-04-59-695_47906ab3d12e2351.webp","sourceBytes":94916,"destBytes":15968,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":26984,"convertSpendMs":12,"createdTime":"2021-05-03 12:04:33","host":"us-015*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%80%BB%E7%9B%91%E9%97%AE%E6%88%91%EF%BC%9AKafka%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%8A%9B%E5%BC%83ZooKeeper%EF%BC%9F","linkMd5ListStr":"83b0cc9ddca5117da34ed951d56e0e1e","githubUser":"myreaderx15","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"92.7 KB","destSize":"15.6 KB","compressRate":"16.8%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eSdk75TK4nHQJOTMnuMpLPx77KCicwSYCFwfPMXfqe0u0K8NdTDK8e78XHcSWwxR6H8hQBgDicLleNDmoUAuwLaQ/640?wx_fmt=png","sourceStatusCode":200,"destWidth":911,"destHeight":532,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn98@2020_1/2021/05/03/04-05-30-611_7b507b390e512121.webp","sourceBytes":187952,"destBytes":37870,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":57826,"convertSpendMs":20,"createdTime":"2021-05-03 12:04:33","host":"us-010*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%80%BB%E7%9B%91%E9%97%AE%E6%88%91%EF%BC%9AKafka%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%8A%9B%E5%BC%83ZooKeeper%EF%BC%9F","linkMd5ListStr":"83b0cc9ddca5117da34ed951d56e0e1e","githubUser":"myreaderx12","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"183.5 KB","destSize":"37 KB","compressRate":"20.1%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/mmbiz_png/eSdk75TK4nHQJOTMnuMpLPx77KCicwSYCcJiaTXWI5FAv27Y4ybEP92Hl5pIKPMRojObf7uicxbwb0WcBQpDjiaWvg/640?wx_fmt=png","sourceStatusCode":200,"destWidth":798,"destHeight":346,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx/cdn7@2020_3/2021/05/03/04-07-21-118_f91c90962e4f93fd.webp","sourceBytes":79353,"destBytes":22732,"targetWebpQuality":75,"feedId":2521,"totalSpendMs":14473,"convertSpendMs":13,"createdTime":"2021-05-03 12:07:06","host":"us-013*","referer":"http://weixin.sogou.com/weixin?type=2&query=ImportNew+%E6%80%BB%E7%9B%91%E9%97%AE%E6%88%91%EF%BC%9AKafka%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%8A%9B%E5%BC%83ZooKeeper%EF%BC%9F","linkMd5ListStr":"83b0cc9ddca5117da34ed951d56e0e1e","githubUser":"myreaderx","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"77.5 KB","destSize":"22.2 KB","compressRate":"28.6%"}],"successGithubMap":{"myreaderx15":1,"myreaderx12":1,"myreaderx24":1,"myreaderx5oss":1,"myreaderx18":1,"myreaderx":1},"failGithubMap":{"myreaderx23":1}}
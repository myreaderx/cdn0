{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2020-10-14 10:06:44","updatedTime":"2020-10-14 10:06:44","title":"Migrating this blog to Azure. It's done. Now the work begins.","link":"https://www.hanselman.com/blog/post/1ab96181-d2fa-4981-9139-f8333777a367","description":"<div><p><a href=\"http://feeds.hanselman.com/~/t/0/0/scotthanselman/~https://www.hanselman.com/blog/content/binary/Windows-Live-Writer/553ffddd97b6_E720/image_7.png\"><img title=\"image\" style=\"border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; float: right; padding-top: 0px; padding-left: 0px; border-left: 0px; margin: 0px 0px 0px 5px; display: inline; padding-right: 0px\" border=\"0\" alt=\"image\" src=\"https://www.hanselman.com/blog/content/binary/Windows-Live-Writer/553ffddd97b6_E720/image_thumb_2.png\" width=\"352\" align=\"right\" height=\"193\"></a>I have been running this <a href=\"http://feeds.hanselman.com/~/t/0/0/scotthanselman/~https://hanselman.com/blog\">https://hanselman.com/blog</a> for almost 20 years. Like coming up on 19 I believe.</p> <p>Recently it moved from being:  <ul> <li>a 13(?) year old .NET Framework app called DasBlog running on ASP.NET and a Windows Server on real metal hardware</li></ul> <p>to  <ul> <li>a fresh and new .NET Core app app forked and improved by Mark Downie <a href=\"http://feeds.hanselman.com/~/t/0/0/scotthanselman/~https://github.com/poppastring/dasblog-core\">https://github.com/poppastring/dasblog-core</a> and running under Linux on Azure! </li></ul> <p>Finally. This blog, the main site, and the podcast site are all running on Azure Web Apps, built in Azure DevOps, and managed by Azure Front Door and watched by Application Insights. Yes I pay for it with cash, I have no unlimited free Azure credits other than my $100 MSDN account.</p> <p>Mark and I have been pairing on this for months and having a wonderful time. In fact, it's been <a href=\"http://feeds.hanselman.com/~/t/0/0/scotthanselman/~https://www.hanselman.com/blog/real-world-cloud-migrations-moving-a-17-year-old-series-of-sites-from-bare-metal-to-azure\">about a year since this started</a>.</p> <p>Moving this blog is a significant achievement for a number of reasons, IMHO.</p> <ul> <li>If we did it right:</li> <ul> <li>you didn't notice anything <li>The URLs look cooler. <li>We broke nothing in SEO. <li>Perf is better. <li>Before I could deploy the site a few times a year, and was afraid of it. Yesterday I deployed 11 times.</li></ul> <li>It was .NET 1.1, then 2.0, then 3.5, then 4.0, then stuck for 8 years. </li> <ul> <li>It ran on a real Windows Server 2008 machine (no VM) at <a href=\"http://feeds.hanselman.com/~/t/0/0/scotthanselman/~https://www.sherweb.com/\">Sherweb</a> who has been a great partner for years. Extremely reliable hosting!  <li>Now it's on Azure under Linux</li></ul> <li>We upgraded the ASP.NET WebForms app to ASP.NET Core with Mark's genius idea of splitting the app responsibilities such that the original DasBlog blog templating language could be converted to simple Razor pages and we could use <a href=\"http://feeds.hanselman.com/~/t/0/0/scotthanselman/~https://docs.microsoft.com/en-US/aspnet/core/mvc/views/tag-helpers/intro?view=aspnetcore-3.1\">ASP.NET TagHelpers</a> to replace WebForms controls. </li> <ul> <li>This allowed me to port my template over in a day with minimal changes.  <li>Once it compiled under .NET Core it was easy <a href=\"http://feeds.hanselman.com/~/t/0/0/scotthanselman/~https://www.hanselman.com/blog/moving-an-aspnet-core-from-azure-app-service-on-windows-to-linux-by-testing-in-wsl-and-docker-first\">to move it from Windows to Linux</a> and <a href=\"http://feeds.hanselman.com/~/t/0/0/scotthanselman/~https://www.hanselman.com/blog/moving-an-aspnet-core-from-azure-app-service-on-windows-to-linux-by-testing-in-wsl-and-docker-first\">testing in WSL first</a>.  <li>We then just moved the other dependent projects to .NET Standard 2 and compiled the while thing as a <a href=\"http://feeds.hanselman.com/~/t/0/0/scotthanselman/~https://www.hanselman.com/blog/updating-an-aspnet-core-22-web-site-to-net-core-31-lts\">.NET Core 3.1 LTS</a> (Long Term Support) app. In fact, scroll down to the VERY bottom of this page and you can see what version we're on. </li></ul> <li>I set up <a href=\"http://feeds.hanselman.com/~/t/0/0/scotthanselman/~https://www.hanselman.com/blog/setting-up-azure-devops-cicd-for-a-net-core-31-web-app-hosted-in-azure-app-service-for-linux\">CI/CD</a> for the main site hanselman.com, this blog, and hanselminutes.com. </li> <ul> <li> <p>There are 3 sites now, all behind a reverse proxy from Azure Front Door to handle SSL, Firewalls, and more.</p></li></ul></ul> <p>Next steps? Keep it running, watch for errors, 5xx and 4xx and make small incremental changes. The pages are still heavy, while ASP.NET has server response time under 20ms, there's still 2 sec of JavaScript and bunch of old crap to clean up. I've also got two decades of links, so I'm fixing 404s as they are reported or they show up in Application Insights. I made a Dashboard here:</p> <p><figure><a href=\"http://feeds.hanselman.com/~/t/0/0/scotthanselman/~https://www.hanselman.com/blog/content/binary/Windows-Live-Writer/553ffddd97b6_E720/image_5.png\"><img title=\"image\" style=\"border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px\" border=\"0\" alt=\"image\" src=\"https://www.hanselman.com/blog/content/binary/Windows-Live-Writer/553ffddd97b6_E720/image_thumb_1.png\" width=\"1001\" height=\"547\"></a></figure> </p> <p>I'm going spend the next month or so blogging about the process and experience in as much detail as I can.</p> <p>Here's some articles I've already written on the subject:</p> <ul> <li><a href=\"http://feeds.hanselman.com/~/t/0/0/scotthanselman/~https://www.hanselman.com/blog/real-world-cloud-migrations-moving-a-17-year-old-series-of-sites-from-bare-metal-to-azure\">Real World Cloud Migrations: Moving a 17 year old series of sites from bare metal to Azure</a></li> <li><a href=\"http://feeds.hanselman.com/~/t/0/0/scotthanselman/~https://www.hanselman.com/blog/dealing-with-application-base-urls-and-razor-link-generation-while-hosting-aspnet-web-apps-behind-reverse-proxies\">Dealing with Application Base URLs and Razor link generation while hosting ASP.NET web apps behind Reverse Proxies</a></li> <li><a href=\"http://feeds.hanselman.com/~/t/0/0/scotthanselman/~https://www.hanselman.com/blog/updating-an-aspnet-core-22-web-site-to-net-core-31-lts\">Updating an ASP.NET Core 2.2 Web Site to .NET Core 3.1 LTS</a></li> <li><a href=\"http://feeds.hanselman.com/~/t/0/0/scotthanselman/~https://www.hanselman.com/blog/moving-an-aspnet-core-from-azure-app-service-on-windows-to-linux-by-testing-in-wsl-and-docker-first\">Moving an ASP.NET Core from Azure App Service on Windows to Linux by testing in WSL and Docker first</a></li></ul> <p>If you find any issues with this blog like </p> <ul> <li>Broken links and 404s where you wouldn't expect them  <li>Broken images, zero byte images, giant images  <li>General oddness</li></ul> <p>Please file them here <a title=\"https://github.com/shanselman/hanselman.com-bugs\" href=\"http://feeds.hanselman.com/~/t/0/0/scotthanselman/~https://github.com/shanselman/hanselman.com-bugs\">https://github.com/shanselman/hanselman.com-bugs</a> and let me know! </p> <p>Oh, and please <a href=\"http://feeds.hanselman.com/~/t/0/0/scotthanselman/~https://www.youtube.com/shanselman?sub_confirmation=1\">subscribe to my YouTube</a> and tell your friends. It's lovely.</p> <p> <hr>   <p><strong>Sponsor: </strong>Never miss a beat with Seq. Live application logs and health checks. <a href=\"http://feeds.hanselman.com/~/t/0/0/scotthanselman/~https://hnsl.mn/36Be78Z\">Download the Windows installer or pull the Docker image now</a>. </p>\n<br/><hr/>© 2020 Scott Hanselman. All rights reserved. \n<br/></div><Img align=\"left\" border=\"0\" height=\"1\" width=\"1\" alt=\"\" style=\"border:0;float:left;margin:0;padding:0;width:1px!important;height:1px!important;\" hspace=\"0\" src=\"http://feeds.hanselman.com/~/i/636740838/0/scotthanselman\">\n<div style=\"clear:both;padding-top:0.2em;\"><a title=\"Like on Facebook\" href=\"http://feeds.hanselman.com/_/28/636740838/scotthanselman\"><img height=\"20\" src=\"https://assets.feedblitz.com/i/fblike20.png\" style=\"border:0;margin:0;padding:0;\"></a>&#160;<a title=\"Share on Google+\" href=\"http://feeds.hanselman.com/_/30/636740838/scotthanselman\"><img height=\"20\" src=\"https://assets.feedblitz.com/i/googleplus20.png\" style=\"border:0;margin:0;padding:0;\"></a>&#160;<a title=\"Tweet This\" href=\"http://feeds.hanselman.com/_/24/636740838/scotthanselman\"><img height=\"20\" src=\"https://assets.feedblitz.com/i/twitter20.png\" style=\"border:0;margin:0;padding:0;\"></a>&#160;<a title=\"Subscribe by email\" href=\"http://feeds.hanselman.com/_/19/636740838/scotthanselman\"><img height=\"20\" src=\"https://assets.feedblitz.com/i/email20.png\" style=\"border:0;margin:0;padding:0;\"></a>&#160;<a title=\"Subscribe by RSS\" href=\"http://feeds.hanselman.com/_/20/636740838/scotthanselman\"><img height=\"20\" src=\"https://assets.feedblitz.com/i/rss20.png\" style=\"border:0;margin:0;padding:0;\"></a>&#160;</div>\n","descriptionType":"html","publishedDate":"Thu, 08 Oct 2020 18:26:00 +0000","feedId":37,"bgimg":"https://www.hanselman.com/blog/content/binary/Windows-Live-Writer/553ffddd97b6_E720/image_thumb_2.png","linkMd5":"838bb5eadd045ed9ac2bfc401980a712","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn16@2020_2/2020/10/14/02-06-53-460_a12cf063b0b986c8.webp","destWidth":352,"destHeight":193,"sourceBytes":34695,"destBytes":8080,"author":"","articleImgCdnMap":{"https://www.hanselman.com/blog/content/binary/Windows-Live-Writer/553ffddd97b6_E720/image_thumb_2.png":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn16@2020_2/2020/10/14/02-06-53-460_a12cf063b0b986c8.webp","https://www.hanselman.com/blog/content/binary/Windows-Live-Writer/553ffddd97b6_E720/image_thumb_1.png":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn19@2020_3/2020/10/14/02-06-55-936_9734f5c36b9f6c7e.webp","http://feeds.hanselman.com/~/i/636740838/0/scotthanselman":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn24@2020_5/2020/10/14/02-06-55-241_d3ea7795dfaf80c9.webp","https://assets.feedblitz.com/i/fblike20.png":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn28@2020_2/2020/10/14/02-07-09-015_f7133bbbeaa27290.webp","https://assets.feedblitz.com/i/googleplus20.png":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn22@2020_5/2020/10/14/02-06-54-899_a18cc80cc390ea2b.webp","https://assets.feedblitz.com/i/twitter20.png":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn30@2020_1/2020/10/14/02-07-02-078_1a7439fc532f8c1a.webp","https://assets.feedblitz.com/i/email20.png":"https://cdn.jsdelivr.net/gh/myreaderx25/cdn32@2020_1/2020/10/14/02-06-54-910_049b5f0498c3e319.webp","https://assets.feedblitz.com/i/rss20.png":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn26@2020_5/2020/10/14/02-07-08-993_b36bbaa0c87b314c.webp"},"publishedOrCreatedDate":1602641204491}],"record":{"createdTime":"2020-10-14 10:06:44","updatedTime":"2020-10-14 10:06:44","feedId":37,"fetchDate":"Wed, 14 Oct 2020 02:06:44 +0000","fetchMs":189,"handleMs":53,"totalMs":25914,"newArticles":0,"totalArticles":10,"status":1,"type":0,"ip":"2147158baf8c40bd1b9393b0e552abc1","hostName":"us-028*","requestId":"33d8f1b7faa44fa09c51cc9be4bfbae8_37","contentType":"text/xml; charset=UTF-8","totalBytes":58164,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":8,"articlesImgsGithubTotal":8,"successGithubMap":{"myreaderx25":1,"myreaderx27":1,"myreaderx4":1,"myreaderx21":1,"myreaderx22":1,"myreaderx12":1,"myreaderx2":1,"myreaderx19":1},"failGithubMap":{}},"feed":{"createdTime":"2020-05-30 17:21:38","updatedTime":"2020-09-01 09:23:34","id":37,"name":"Scott Hanselman's Blog","url":"http://feeds.feedburner.com/ScottHanselman","subscriber":null,"website":null,"icon":"http://www.hanselman.com/blog/images/tinyheadshot2.jpg","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx63/cdn99@2020_4/2020/09/01/01-23-34-316_aeb19737c22637d8.jpg","description":"Scott Hanselman on Programming, User Experience, The Zen of Computers and Life in General","weekly":null,"link":null},"noPictureArticleList":[],"tmpCommonImgCdnBytes":8080,"tmpBodyImgCdnBytes":50084,"tmpBgImgCdnBytes":0,"extra4":{"start":1602641204211,"total":0,"statList":[{"spend":228,"msg":"获取xml内容"},{"spend":53,"msg":"解释文章"},{"spend":1,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":15455,"msg":"正文链接上传到cdn"}]},"extra5":8,"extra6":8,"extra7ImgCdnFailResultVector":[],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://europe65.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe62.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe63.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe64.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe61.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe66.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe67.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"https://www.hanselman.com/blog/content/binary/Windows-Live-Writer/553ffddd97b6_E720/image_thumb_2.png","sourceStatusCode":200,"destWidth":352,"destHeight":193,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx12/cdn16@2020_2/2020/10/14/02-06-53-460_a12cf063b0b986c8.webp","sourceBytes":34695,"destBytes":8080,"targetWebpQuality":75,"feedId":37,"totalSpendMs":1793,"convertSpendMs":29,"createdTime":"2020-10-14 10:06:52","host":"us-012*","referer":"https://www.hanselman.com/blog/post/1ab96181-d2fa-4981-9139-f8333777a367","linkMd5ListStr":"838bb5eadd045ed9ac2bfc401980a712,838bb5eadd045ed9ac2bfc401980a712","githubUser":"myreaderx12","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"33.9 KB","destSize":"7.9 KB","compressRate":"23.3%"},{"code":1,"isDone":false,"source":"https://assets.feedblitz.com/i/email20.png","sourceStatusCode":200,"destWidth":20,"destHeight":20,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx25/cdn32@2020_1/2020/10/14/02-06-54-910_049b5f0498c3e319.webp","sourceBytes":754,"destBytes":544,"targetWebpQuality":75,"feedId":37,"totalSpendMs":978,"convertSpendMs":3,"createdTime":"2020-10-14 10:06:54","host":"europe61*","referer":"https://www.hanselman.com/blog/post/1ab96181-d2fa-4981-9139-f8333777a367","linkMd5ListStr":"838bb5eadd045ed9ac2bfc401980a712","githubUser":"myreaderx25","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"754 B","destSize":"544 B","compressRate":"72.1%"},{"code":1,"isDone":false,"source":"https://assets.feedblitz.com/i/googleplus20.png","sourceStatusCode":200,"destWidth":20,"destHeight":20,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn22@2020_5/2020/10/14/02-06-54-899_a18cc80cc390ea2b.webp","sourceBytes":750,"destBytes":500,"targetWebpQuality":75,"feedId":37,"totalSpendMs":1027,"convertSpendMs":5,"createdTime":"2020-10-14 10:06:54","host":"europe62*","referer":"https://www.hanselman.com/blog/post/1ab96181-d2fa-4981-9139-f8333777a367","linkMd5ListStr":"838bb5eadd045ed9ac2bfc401980a712","githubUser":"myreaderx2","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"750 B","destSize":"500 B","compressRate":"66.7%"},{"code":1,"isDone":false,"source":"http://feeds.hanselman.com/~/i/636740838/0/scotthanselman","sourceStatusCode":200,"destWidth":1,"destHeight":1,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn24@2020_5/2020/10/14/02-06-55-241_d3ea7795dfaf80c9.webp","sourceBytes":43,"destBytes":72,"targetWebpQuality":75,"feedId":37,"totalSpendMs":1339,"convertSpendMs":4,"createdTime":"2020-10-14 10:06:54","host":"europe64*","referer":"https://www.hanselman.com/blog/post/1ab96181-d2fa-4981-9139-f8333777a367","linkMd5ListStr":"838bb5eadd045ed9ac2bfc401980a712","githubUser":"myreaderx19","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"43 B","destSize":"72 B","compressRate":"167.4%"},{"code":1,"isDone":false,"source":"https://www.hanselman.com/blog/content/binary/Windows-Live-Writer/553ffddd97b6_E720/image_thumb_1.png","sourceStatusCode":200,"destWidth":1001,"destHeight":547,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx22/cdn19@2020_3/2020/10/14/02-06-55-936_9734f5c36b9f6c7e.webp","sourceBytes":181483,"destBytes":47460,"targetWebpQuality":75,"feedId":37,"totalSpendMs":2440,"convertSpendMs":25,"createdTime":"2020-10-14 10:06:54","host":"europe65*","referer":"https://www.hanselman.com/blog/post/1ab96181-d2fa-4981-9139-f8333777a367","linkMd5ListStr":"838bb5eadd045ed9ac2bfc401980a712","githubUser":"myreaderx22","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"177.2 KB","destSize":"46.3 KB","compressRate":"26.2%"},{"code":1,"isDone":false,"source":"https://assets.feedblitz.com/i/twitter20.png","sourceStatusCode":200,"destWidth":20,"destHeight":20,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn30@2020_1/2020/10/14/02-07-02-078_1a7439fc532f8c1a.webp","sourceBytes":537,"destBytes":472,"targetWebpQuality":75,"feedId":37,"totalSpendMs":1311,"convertSpendMs":5,"createdTime":"2020-10-14 10:07:01","host":"europe66*","referer":"https://www.hanselman.com/blog/post/1ab96181-d2fa-4981-9139-f8333777a367","linkMd5ListStr":"838bb5eadd045ed9ac2bfc401980a712","githubUser":"myreaderx27","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"537 B","destSize":"472 B","compressRate":"87.9%"},{"code":1,"isDone":false,"source":"https://assets.feedblitz.com/i/rss20.png","sourceStatusCode":200,"destWidth":20,"destHeight":20,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx21/cdn26@2020_5/2020/10/14/02-07-08-993_b36bbaa0c87b314c.webp","sourceBytes":584,"destBytes":372,"targetWebpQuality":75,"feedId":37,"totalSpendMs":1129,"convertSpendMs":5,"createdTime":"2020-10-14 10:07:08","host":"europe63*","referer":"https://www.hanselman.com/blog/post/1ab96181-d2fa-4981-9139-f8333777a367","linkMd5ListStr":"838bb5eadd045ed9ac2bfc401980a712","githubUser":"myreaderx21","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"584 B","destSize":"372 B","compressRate":"63.7%"},{"code":1,"isDone":false,"source":"https://assets.feedblitz.com/i/fblike20.png","sourceStatusCode":200,"destWidth":55,"destHeight":20,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn28@2020_2/2020/10/14/02-07-09-015_f7133bbbeaa27290.webp","sourceBytes":3597,"destBytes":664,"targetWebpQuality":75,"feedId":37,"totalSpendMs":1221,"convertSpendMs":9,"createdTime":"2020-10-14 10:07:08","host":"europe67*","referer":"https://www.hanselman.com/blog/post/1ab96181-d2fa-4981-9139-f8333777a367","linkMd5ListStr":"838bb5eadd045ed9ac2bfc401980a712","githubUser":"myreaderx4","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"3.5 KB","destSize":"664 B","compressRate":"18.5%"}],"successGithubMap":{"myreaderx25":1,"myreaderx27":1,"myreaderx4":1,"myreaderx21":1,"myreaderx22":1,"myreaderx12":1,"myreaderx2":1,"myreaderx19":1},"failGithubMap":{}}
{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2021-04-05 20:05:16","updatedTime":"2021-04-05 20:05:16","title":"尤雨溪深夜官宣：Vue 3 将不再支持 IE11","link":"https://segmentfault.com/a/1190000039769749","description":"<p>早在开发之初，尤雨溪便计划在 Vue 3 发布并稳定后兼容 IE11。如今 Vue 3 ，已发布多时，但 IE11 的全球使用率却呈明显下降趋势。Vue 3 是否还会针对 IE11 开发兼容版本？</p>\n<p>昨日凌晨，尤雨溪在知乎针对上述问题给出了答案：Vue 3 将不再支持 IE11。RFC 详细地从原因、成本、后续维护等方面给出了解释。</p>\n<p><img src=\"https://segmentfault.com/img/bVcQ14L\" alt=\"image\" title=\"image\"><br>以下为 RFC 原文翻译</br></img></p>\n<hr>\n <h4><strong>原因</strong></h4>\n <p>从 Vue 3 开发开始，一直到 2018 年底，我们就一直被问及 IE11 支持的问题。</p>\n <p>很多用户都问过，Vue 3 是否会支持 IE11，我们最初的计划是先发布 Vue 3，让它稳定下来，然后再增加对 IE11 的支持。</p>\n <p>在漫长的开发过程中，我们也对 IE11 的兼容性进行了研究和实验，但<strong>较高的复杂度</strong>以及手上<strong>繁多的工作</strong>，让我们不得不<strong>推迟它的优先级</strong>。</p>\n <p>当时间来到 2021 年，我们重新审视这个问题时，浏览器和 JavaScript 已经发生了很大的变化。</p>\n <p>越来越多的开发人员开始使用更现代的语言特性，<strong>更重要的是，微软自己也开始通过对 Edge 的投资，积极推动用户停止对 IE 的使用</strong>。</p>\n <p><strong>微软还在其主要项目(如 Microsoft&nbsp;365)中放弃了对 IE11 的支持</strong><strong>。</strong></p>\n <p>就在几天前，<strong>WordPress 也决定放弃对 IE11 的支持</strong>。</p>\n <p>IE11 的全球使用率已经<strong>降至 1% 以下</strong>。</p>\n <p>当我们谈论面向公众的网站和应用程序时，IE11 正在明显快速下滑。</p>\n <p>已经到了重新考虑 Vue 3 对 IE11 支持的时机了。</p>\n <hr>\n  <h4><strong>在 Vue 中支持 IE11 的成本</strong></h4>\n  <h5><strong>行为不一致</strong></h5>\n  <p>Vue 2 的响应式系统是基于 ES5 getter / setters 的。</p>\n  <p>Vue 3 利用 ES2015 Proxy 提供了一个性能更好、更加完善的响应式系统，而 IE11 无法 polyfill 这些特性。</p>\n  <p>这是主要的障碍，因为这意味着 Vue 3 要支持 IE11，它本质上需要发布<strong>两个具有不同行为的版本</strong>：一个使用基于 Proxy 的响应式系统，另一个使用类似于&nbsp; Vue 2 的基于 ES5 getter / setters 的版本。</p>\n  <p>Vue 3 基于 Proxy 的响应式系统提供了<strong>近乎完整</strong>的语言特性覆盖。</p>\n  <p>它能够检测到许多在 ES5 中不敢想象的操作，例如属性的添加/删除、数组索引和长度突变，以及 <strong>in</strong> 操作符的拦截。</p>\n  <p>为 Vue 3 的 Proxy 版本编写的应用<strong>肯定</strong><strong>不能在 IE11 版本中工作</strong>。这不仅给我们带来了技术上的复杂性，也给开发人员带来了持续的精神负担。</p>\n  <p>我们最初的计划是在 IE11 版本的开发构建中<strong>同时发布 Proxy 和 ES5 的两种响应性版本</strong><strong>。</strong></p>\n  <p>当它在支持 Proxy 的开发环境中运行时，会<strong>检测并警告</strong>不兼容 IE11 的一些用法。理论上可行，但是复杂度巨大，因为它需要将两种实现混合在一起，并且有可能<strong>导致</strong><strong>开发和生产之间的行为差异</strong>。</p>\n  <hr>\n   <h5><strong>长期维护负担</strong></h5>\n   <p>支持 IE11 也意味着我们必须考虑在整个代码库中使用的语言特性，并为我们的发布版本找到合适的 poliyfill / 编译策略。</p>\n   <p>每一个不能在 IE11 中被 polyfill 的新特性都会带来新的行为警告。一旦 Vue 3 承诺支持 IE11，就永远没办法摆脱了，直到下一个大版本。</p>\n   <hr>\n    <h5><strong>库作者的复杂性</strong></h5>\n    <p>如果 Vue 本身可以完全覆盖掉这些复杂度，那么一定程度上我们还是可以接受的。然而，在与社区成员讨论后，我们意识到共存的两个响应性实现也不可避免地<strong>影响库作者的开发</strong>。</p>\n    <p>通过在 Vue 3 中支持 IE11，库作者本质上也需要同样做一些决定。库作者不得不考虑他们的库使用的是<strong>哪种 Vue 3 版本</strong>(可能还支持 Vue 2)。如果他们决定支持 IE11，他们在编写库时，脑子里也必须<strong>时刻考虑 ES5 响应式系统的一些缺陷。</strong></p>\n    <hr>\n     <h5><strong>为 IE11 贡献持久力</strong></h5>\n     <p><strong>没有人想支持 IE11</strong>。它是一个<strong>死气沉沉的浏览器</strong>，停留在过去。Web 生态系统向前发展得越远，我们在尝试支持它时，需要填补的缺口就越大。讽刺的是，通过在 Vue 3 中支持 IE11，我们给了它<strong>更多的生命力</strong>。考虑到我们的用户基础，放弃对 IE11 的支持可能会让它<strong>更快地被淘汰</strong>。</p>\n     <hr>\n      <h4><strong>对于需要 IE11 支持的用户</strong></h4>\n      <p>我们很清楚，对 IE11 的真正需求来自那些没办法做升级的人：金融机构、教育部门和那些依赖 IE11 作为屏幕阅读器的人。如果你正在构建一个针对这些领域的应用，你可能没有选择。</p>\n      <p>如果您需要 IE11 支持，我们的建议是使用 Vue 2。与其为 Vue 3 和未来的版本承担巨大的技术债，我们相信，把工作重心放在让 Vue 2 <strong>拥有更多 Vue 3 类似的特性</strong>更有意义，让两个版本之间的开发体验更相似。</p>\n      <p>一些我们考虑带给 Vue 2.7 的功能：</p>\n      <ul>\n       <li>把 <strong>@vue/composition-api plugin</strong> 合并进 Vue 2，这会让使用 Composition API 开发的库同时支持 Vue 2 和 Vue 3</li>\n       <li>单文件组件（SFC）中的 <strong>script setup</strong> 语法</li>\n       <li><strong>emits</strong> 选项</li>\n       <li>提升 TypeScript 类型支持</li>\n       <li>在 Vite 中正式支持 Vue 2 (目前通过<strong>非官方插</strong><strong>件</strong>)</li>\n      </ul>\n      <p><strong>注：</strong>以上列表是<strong>暂时的/不详尽</strong>的，我们最后会在单独的 RFC 中讨论/最终确定。</p>\n      <p>原文链接：<br><a href=\"https://github.com/vuejs/rfcs/blob/ie11/active-rfcs/0000-vue3-ie11-support.md#for-those-who-absolutely-need-ie11-support\" rel=\"nofollow noreferrer\">https://github.com/vuejs/rfcs...</a><br><img src=\"https://segmentfault.com/img/bVcQ15E\" alt=\"image\" title=\"image\" /></br></br></p>\n     </hr>\n    </hr>\n   </hr>\n  </hr>\n </hr>\n</hr>","descriptionType":"html","publishedDate":"Sat, 03 Apr 2021 13:38:50 +0000","feedId":23280,"bgimg":"https://segmentfault.com/img/bVcQ14L","linkMd5":"e0c58ede6764db31412c509324df149b","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn27@2020_2/2021/04/05/12-05-22-636_2bdae1e84882ffee.webp","destWidth":732,"destHeight":497,"sourceBytes":28284,"destBytes":28284,"author":"snakesss","articleImgCdnMap":{"https://segmentfault.com/img/bVcQ14L":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn27@2020_2/2021/04/05/12-05-22-636_2bdae1e84882ffee.webp","https://segmentfault.com/img/bVcQ15E":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn32@2020_3/2021/04/05/12-05-26-152_d7572d3c53517cb4.webp"},"publishedOrCreatedDate":1617624316505}],"record":{"createdTime":"2021-04-05 20:05:16","updatedTime":"2021-04-05 20:05:16","feedId":23280,"fetchDate":"Mon, 05 Apr 2021 12:05:16 +0000","fetchMs":14738,"handleMs":159,"totalMs":34635,"newArticles":0,"totalArticles":50,"status":1,"type":0,"ip":"c1b3801dcbf2d66198ab906bf18726a3","hostName":"europe21*","requestId":"998730f7ada544ca9f1832d1dd7c4955_23280","contentType":"application/atom+xml; charset=UTF-8","totalBytes":101694,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":2,"articlesImgsGithubTotal":2,"successGithubMap":{"myreaderx2":1,"myreaderx31":1},"failGithubMap":{}},"feed":{"createdTime":"2020-09-07 02:29:58","updatedTime":"2021-04-03 13:59:11","id":23280,"name":"SegmentFault 最新的文章","url":"https://segmentfault.com/feeds/blogs","subscriber":142,"website":null,"icon":"https://segmentfault.com/favicon.ico","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx62/cdn43@2020_1/2021/04/03/05-58-55-048_eb238dca7c8e9f0e.jpg","description":"","weekly":null,"link":null},"noPictureArticleList":[],"tmpCommonImgCdnBytes":28284,"tmpBodyImgCdnBytes":73410,"tmpBgImgCdnBytes":0,"extra4":{"start":1617624291894,"total":0,"statList":[{"spend":24459,"msg":"获取xml内容"},{"spend":160,"msg":"解释文章"},{"spend":0,"msg":"上传封面图到cdn"},{"spend":0,"msg":"修正封面图上传失败重新上传"},{"spend":3592,"msg":"正文链接上传到cdn"}]},"extra5":2,"extra6":2,"extra7ImgCdnFailResultVector":[],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://us-031.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVcQ14L","sourceStatusCode":200,"destWidth":732,"destHeight":497,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn27@2020_2/2021/04/05/12-05-22-636_2bdae1e84882ffee.webp","sourceBytes":28284,"destBytes":28284,"feedId":23280,"totalSpendMs":3196,"convertSpendMs":0,"createdTime":"2021-04-05 20:05:19","host":"us-53*","referer":"https://segmentfault.com/a/1190000039769749","linkMd5ListStr":"e0c58ede6764db31412c509324df149b,e0c58ede6764db31412c509324df149b","githubUser":"myreaderx2","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"27.6 KB","destSize":"27.6 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVcQ15E","sourceStatusCode":200,"destWidth":732,"destHeight":173,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx31/cdn32@2020_3/2021/04/05/12-05-26-152_d7572d3c53517cb4.webp","sourceBytes":73410,"destBytes":73410,"feedId":23280,"totalSpendMs":3401,"convertSpendMs":0,"createdTime":"2021-04-05 20:05:23","host":"us-031*","referer":"https://segmentfault.com/a/1190000039769749","linkMd5ListStr":"e0c58ede6764db31412c509324df149b","githubUser":"myreaderx31","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"71.7 KB","destSize":"71.7 KB","compressRate":"100%"}],"successGithubMap":{"myreaderx2":1,"myreaderx31":1},"failGithubMap":{}}
{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2020-10-09 23:42:43","updatedTime":"2020-10-09 23:42:43","title":"å›¾è§£ä¹ç§å¸¸è§çš„è®¾è®¡æ¨¡å¼","link":"https://segmentfault.com/a/1190000030850326","description":"<p>åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œè®¾è®¡æ¨¡å¼ï¼ˆDesign Patternï¼‰æ˜¯å¯¹è½¯ä»¶è®¾è®¡ä¸­æ™®éå­˜åœ¨ï¼ˆåå¤å‡ºç°ï¼‰çš„å„ç§é—®é¢˜ï¼Œæ‰€æå‡ºçš„è§£å†³æ–¹æ¡ˆã€‚æ ¹æ®æ¨¡å¼çš„ç›®çš„æ¥åˆ’åˆ†çš„è¯ï¼ŒGoFï¼ˆGang of Fourï¼‰è®¾è®¡æ¨¡å¼å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ 3 ç§ç±»å‹ï¼š</p>\n<p><img src=\"https://segmentfault.com/img/bVcfO3r\" alt=\"image\" title=\"image\" /></p>\n<p>1ã€åˆ›å»ºå‹æ¨¡å¼ï¼šç”¨æ¥æè¿° â€œå¦‚ä½•åˆ›å»ºå¯¹è±¡â€ï¼Œå®ƒçš„ä¸»è¦ç‰¹ç‚¹æ˜¯ â€œå°†å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨åˆ†ç¦»â€ã€‚åŒ…æ‹¬å•ä¾‹ã€åŸå‹ã€å·¥å‚æ–¹æ³•ã€æŠ½è±¡å·¥å‚å’Œå»ºé€ è€… 5 ç§æ¨¡å¼ã€‚</p>\n<p>2ã€ç»“æ„å‹æ¨¡å¼ï¼šç”¨æ¥æè¿°å¦‚ä½•å°†ç±»æˆ–å¯¹è±¡æŒ‰ç…§æŸç§å¸ƒå±€ç»„æˆæ›´å¤§çš„ç»“æ„ã€‚åŒ…æ‹¬ä»£ç†ã€é€‚é…å™¨ã€æ¡¥æ¥ã€è£…é¥°ã€å¤–è§‚ã€äº«å…ƒå’Œç»„åˆ 7 ç§æ¨¡å¼ã€‚</p>\n<p>3ã€è¡Œä¸ºå‹æ¨¡å¼ï¼šç”¨æ¥è¯†åˆ«å¯¹è±¡ä¹‹é—´çš„å¸¸ç”¨äº¤æµæ¨¡å¼ä»¥åŠå¦‚ä½•åˆ†é…èŒè´£ã€‚åŒ…æ‹¬æ¨¡æ¿æ–¹æ³•ã€ç­–ç•¥ã€å‘½ä»¤ã€èŒè´£é“¾ã€çŠ¶æ€ã€è§‚å¯Ÿè€…ã€ä¸­ä»‹è€…ã€è¿­ä»£å™¨ã€è®¿é—®è€…ã€å¤‡å¿˜å½•å’Œè§£é‡Šå™¨ 11 ç§æ¨¡å¼ã€‚</p>\n<p>æ¥ä¸‹æ¥é˜¿å®å“¥å°†ç»“åˆä¸€äº›ç”Ÿæ´»ä¸­çš„åœºæ™¯å¹¶é€šè¿‡ç²¾ç¾çš„é…å›¾ï¼Œæ¥å‘å¤§å®¶ä»‹ç» 9 ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ã€‚</p>\n<h3>ä¸€ã€å»ºé€ è€…æ¨¡å¼</h3>\n<p>å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder Patternï¼‰å°†ä¸€ä¸ªå¤æ‚å¯¹è±¡åˆ†è§£æˆå¤šä¸ªç›¸å¯¹ç®€å•çš„éƒ¨åˆ†ï¼Œç„¶åæ ¹æ®ä¸åŒéœ€è¦åˆ†åˆ«åˆ›å»ºå®ƒä»¬ï¼Œæœ€åæ„å»ºæˆè¯¥å¤æ‚å¯¹è±¡ã€‚</p>\n<p>ä¸€è¾†å°æ±½è½¦ ğŸš— é€šå¸¸ç”± <strong>å‘åŠ¨æœºã€åº•ç›˜ã€è½¦èº«å’Œç”µæ°”è®¾å¤‡</strong> å››å¤§éƒ¨åˆ†ç»„æˆã€‚æ±½è½¦ç”µæ°”è®¾å¤‡çš„å†…éƒ¨æ„é€ å¾ˆå¤æ‚ï¼Œç®€å•èµ·è§ï¼Œæˆ‘ä»¬åªè€ƒè™‘ä¸‰ä¸ªéƒ¨åˆ†ï¼šå¼•æ“ã€åº•ç›˜å’Œè½¦èº«ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/bVcfQ3q\" alt=\"image\" title=\"image\" /></p>\n<p>åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œå°æ±½è½¦ä¹Ÿæ˜¯ç”±ä¸åŒçš„é›¶éƒ¨ä»¶ç»„è£…è€Œæˆï¼Œæ¯”å¦‚ä¸Šå›¾ä¸­æˆ‘ä»¬æŠŠå°æ±½è½¦åˆ†æˆå¼•æ“ã€åº•ç›˜å’Œè½¦èº«ä¸‰å¤§éƒ¨åˆ†ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨å»ºé€ è€…æ¨¡å¼æ¥é€ è½¦å­ã€‚</p>\n<h5>1.1 å®ç°ä»£ç </h5>\n<pre><code class=\"typescript\">class Car {\n  constructor(\n    public engine: string,\n    public chassis: string, \n    public body: string\n  ) {}\n}\n\nclass CarBuilder {\n  engine!: string; // å¼•æ“\n  chassis!: string; // åº•ç›˜\n  body!: string; // è½¦èº«\n\n  addChassis(chassis: string) {\n    this.chassis = chassis;\n    return this;\n  }\n\n  addEngine(engine: string) {\n    this.engine = engine;\n    return this;\n  }\n\n  addBody(body: string) {\n    this.body = body;\n    return this;\n  }\n\n  build() {\n    return new Car(this.engine, this.chassis, this.body);\n  }\n}</code></pre>\n<p>åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª <code>CarBuilder</code> ç±»ï¼Œå¹¶æä¾›äº† <code>addChassis</code>ã€<code>addEngine</code> å’Œ <code>addBody</code> 3 ä¸ªæ–¹æ³•ç”¨äºç»„è£…è½¦å­çš„ä¸åŒéƒ¨ä½ï¼Œå½“è½¦å­çš„ 3 ä¸ªéƒ¨åˆ†éƒ½ç»„è£…å®Œæˆåï¼Œè°ƒç”¨ <code>build</code> æ–¹æ³•å°±å¯ä»¥å¼€å§‹é€ è½¦ã€‚</p>\n<h5>1.2 ä½¿ç”¨ç¤ºä¾‹</h5>\n<pre><code class=\"typescript\">const car = new CarBuilder()\n  .addEngine('v12')\n  .addBody('é•åˆé‡‘')\n  .addChassis('å¤åˆææ–™')\n  .build();</code></pre>\n<h5>1.3 åº”ç”¨åœºæ™¯åŠæ¡ˆä¾‹</h5>\n<ul>\n <li>éœ€è¦ç”Ÿæˆçš„äº§å“å¯¹è±¡æœ‰å¤æ‚çš„å†…éƒ¨ç»“æ„ï¼Œè¿™äº›äº§å“å¯¹è±¡é€šå¸¸åŒ…å«å¤šä¸ªæˆå‘˜å±æ€§ã€‚</li>\n <li>éœ€è¦ç”Ÿæˆçš„äº§å“å¯¹è±¡çš„å±æ€§ç›¸äº’ä¾èµ–ï¼Œéœ€è¦æŒ‡å®šå…¶ç”Ÿæˆé¡ºåºã€‚</li>\n <li>éš”ç¦»å¤æ‚å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨ï¼Œå¹¶ä½¿å¾—ç›¸åŒçš„åˆ›å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„äº§å“ã€‚</li>\n <li><a href=\"https://github.com/dresende/node-sql-query\" rel=\"nofollow noreferrer\">Github - node-sql-query</a>ï¼š<a href=\"https://github.com/dresende/node-sql-query\" rel=\"nofollow noreferrer\">https://github.com/dresende/n...</a></li>\n</ul>\n<h3>äºŒã€å·¥å‚æ¨¡å¼</h3>\n<p>åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œå·¥å‚æ˜¯è´Ÿè´£ç”Ÿäº§äº§å“çš„ï¼Œæ¯”å¦‚ç‰›å¥¶ã€é¢åŒ…æˆ–ç¤¼ç‰©ç­‰ï¼Œè¿™äº›äº§å“æ»¡è¶³äº†æˆ‘ä»¬æ—¥å¸¸çš„ç”Ÿç†éœ€æ±‚ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/bVbK5q2\" alt=\"image\" title=\"image\" /></p>\n<p>åœ¨ä¼—å¤šè®¾è®¡æ¨¡å¼å½“ä¸­ï¼Œæœ‰ä¸€ç§è¢«ç§°ä¸ºå·¥å‚æ¨¡å¼çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒæä¾›äº†åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼ã€‚å·¥å‚æ¨¡å¼å¯ä»¥åˆ†ä¸ºï¼š<strong>ç®€å•å·¥å‚æ¨¡å¼ã€å·¥å‚æ–¹æ³•æ¨¡å¼å’ŒæŠ½è±¡å·¥å‚æ¨¡å¼</strong>ã€‚</p>\n<h4>2.1 ç®€å•å·¥å‚</h4>\n<p>ç®€å•å·¥å‚æ¨¡å¼åˆå« <strong>é™æ€æ–¹æ³•æ¨¡å¼</strong>ï¼Œå› ä¸ºå·¥å‚ç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªé™æ€æ–¹æ³•ç”¨äºåˆ›å»ºå¯¹è±¡ã€‚ç®€å•å·¥å‚è®©ä½¿ç”¨è€…ä¸ç”¨çŸ¥é“å…·ä½“çš„å‚æ•°å°±å¯ä»¥åˆ›å»ºå‡ºæ‰€éœ€çš„ â€äº§å“â€œ ç±»ï¼Œå³ä½¿ç”¨è€…å¯ä»¥ç›´æ¥æ¶ˆè´¹äº§å“è€Œä¸éœ€è¦çŸ¥é“äº§å“çš„å…·ä½“ç”Ÿäº§ç»†èŠ‚ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/bVbMu1o\" alt=\"image\" title=\"image\" /></p>\n<p>åœ¨ä¸Šå›¾ä¸­ï¼Œé˜¿å®å“¥æ¨¡æ‹Ÿäº†ç”¨æˆ·è´­è½¦çš„æµç¨‹ï¼Œå°ç‹å’Œå°ç§¦åˆ†åˆ«å‘ BMW å·¥å‚è®¢è´­äº† BMW730 å’Œ BMW840 å‹å·çš„è½¦å‹ï¼Œæ¥ç€å·¥å‚ä¼šå…ˆåˆ¤æ–­ç”¨æˆ·é€‰æ‹©çš„è½¦å‹ï¼Œç„¶åæŒ‰ç…§å¯¹åº”çš„æ¨¡å‹è¿›è¡Œç”Ÿäº§å¹¶åœ¨ç”Ÿäº§å®Œæˆåäº¤ä»˜ç»™ç”¨æˆ·ã€‚</p>\n<p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ç®€å•å·¥å‚æ¥æè¿° BMW å·¥å‚ç”Ÿäº§æŒ‡å®šå‹å·è½¦å­çš„è¿‡ç¨‹ã€‚</p>\n<h5>2.1.1 å®ç°ä»£ç </h5>\n<pre><code class=\"typescript\">abstract class BMW {\n  abstract run(): void;\n}\n\nclass BMW730 extends BMW {\n  run(): void {\n    console.log(\"BMW730 å‘åŠ¨å’¯\");\n  }\n}\n\nclass BMW840 extends BMW {\n  run(): void {\n    console.log(\"BMW840 å‘åŠ¨å’¯\");\n  }\n}\n\nclass BMWFactory {\n  public static produceBMW(model: \"730\" | \"840\"): BMW {\n    if (model === \"730\") {\n      return new BMW730();\n    } else {\n      return new BMW840();\n    }\n  }\n}</code></pre>\n<p>åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª <code>BMWFactory</code> ç±»ï¼Œè¯¥ç±»æä¾›äº†ä¸€ä¸ªé™æ€çš„ <code>produceBMW()</code> æ–¹æ³•ï¼Œç”¨äºæ ¹æ®ä¸åŒçš„æ¨¡å‹å‚æ•°æ¥åˆ›å»ºä¸åŒå‹å·çš„è½¦å­ã€‚</p>\n<h5>2.1.2 ä½¿ç”¨ç¤ºä¾‹</h5>\n<pre><code class=\"typescript\">const bmw730 = BMWFactory.produceBMW(\"730\");\nconst bmw840 = BMWFactory.produceBMW(\"840\");\n\nbmw730.run();\nbmw840.run();</code></pre>\n<h5>2.1.3 åº”ç”¨åœºæ™¯</h5>\n<ul>\n <li>å·¥å‚ç±»è´Ÿè´£åˆ›å»ºçš„å¯¹è±¡æ¯”è¾ƒå°‘ï¼šç”±äºåˆ›å»ºçš„å¯¹è±¡æ¯”è¾ƒå°‘ï¼Œä¸ä¼šé€ æˆå·¥å‚æ–¹æ³•ä¸­ä¸šåŠ¡é€»è¾‘è¿‡äºå¤æ‚ã€‚</li>\n <li>å®¢æˆ·ç«¯åªéœ€çŸ¥é“ä¼ å…¥å·¥å‚ç±»é™æ€æ–¹æ³•çš„å‚æ•°ï¼Œè€Œä¸éœ€è¦å…³å¿ƒåˆ›å»ºå¯¹è±¡çš„ç»†èŠ‚ã€‚</li>\n</ul>\n<h4>2.2 å·¥å‚æ–¹æ³•</h4>\n<p>å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆFactory Method Patternï¼‰åˆç§°ä¸ºå·¥å‚æ¨¡å¼ï¼Œä¹Ÿå«å¤šæ€å·¥å‚ï¼ˆPolymorphic Factoryï¼‰æ¨¡å¼ï¼Œå®ƒå±äºç±»åˆ›å»ºå‹æ¨¡å¼ã€‚</p>\n<p>åœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œå·¥å‚çˆ¶ç±»è´Ÿè´£å®šä¹‰åˆ›å»ºäº§å“å¯¹è±¡çš„å…¬å…±æ¥å£ï¼Œè€Œå·¥å‚å­ç±»åˆ™è´Ÿè´£ç”Ÿæˆå…·ä½“çš„äº§å“å¯¹è±¡ï¼Œ <strong>è¿™æ ·åšçš„ç›®çš„æ˜¯å°†äº§å“ç±»çš„å®ä¾‹åŒ–æ“ä½œå»¶è¿Ÿåˆ°å·¥å‚å­ç±»ä¸­å®Œæˆ</strong>ï¼Œå³é€šè¿‡å·¥å‚å­ç±»æ¥ç¡®å®šç©¶ç«Ÿåº”è¯¥å®ä¾‹åŒ–å“ªä¸€ä¸ªå…·ä½“äº§å“ç±»ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/bVbK5q5\" alt=\"image\" title=\"image\" /></p>\n<p>åœ¨ä¸Šå›¾ä¸­ï¼Œé˜¿å®å“¥æ¨¡æ‹Ÿäº†ç”¨æˆ·è´­è½¦çš„æµç¨‹ï¼Œå°ç‹å’Œå°ç§¦åˆ†åˆ«å‘ BMW 730 å’Œ BMW 840 å·¥å‚è®¢è´­äº† BMW730 å’Œ BMW840 å‹å·çš„è½¦å­ï¼Œæ¥ç€å·¥å‚æŒ‰ç…§å¯¹åº”çš„æ¨¡å‹è¿›è¡Œç”Ÿäº§å¹¶åœ¨ç”Ÿäº§å®Œæˆåäº¤ä»˜ç»™ç”¨æˆ·ã€‚</p>\n<p>åŒæ ·ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨å·¥å‚æ–¹æ³•æ¥æè¿° BMW å·¥å‚ç”Ÿäº§æŒ‡å®šå‹å·è½¦å­çš„è¿‡ç¨‹ã€‚</p>\n<h5>2.2.1 å®ç°ä»£ç </h5>\n<pre><code class=\"typescript\">abstract class BMWFactory {\n  abstract produceBMW(): BMW;\n}\n\nclass BMW730Factory extends BMWFactory {\n  produceBMW(): BMW {\n    return new BMW730();\n  }\n}\n\nclass BMW840Factory extends BMWFactory {\n  produceBMW(): BMW {\n    return new BMW840();\n  }\n}</code></pre>\n<p>åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ†åˆ«åˆ›å»ºäº† <code>BMW730Factory</code> å’Œ <code>BMW840Factory</code> ä¸¤ä¸ªå·¥å‚ç±»ï¼Œç„¶åä½¿ç”¨è¿™ä¸¤ä¸ªç±»çš„å®ä¾‹æ¥ç”Ÿäº§ä¸åŒå‹å·çš„è½¦å­ã€‚</p>\n<h5>2.2.2 ä½¿ç”¨ç¤ºä¾‹</h5>\n<pre><code class=\"typescript\">const bmw730Factory = new BMW730Factory();\nconst bmw840Factory = new BMW840Factory();\n\nconst bmw730 = bmw730Factory.produceBMW();\nconst bmw840 = bmw840Factory.produceBMW();\n\nbmw730.run();\nbmw840.run();</code></pre>\n<h5>2.2.3 åº”ç”¨åœºæ™¯</h5>\n<ul>\n <li>ä¸€ä¸ªç±»ä¸çŸ¥é“å®ƒæ‰€éœ€è¦çš„å¯¹è±¡çš„ç±»ï¼šåœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œå®¢æˆ·ç«¯ä¸éœ€è¦çŸ¥é“å…·ä½“äº§å“ç±»çš„ç±»åï¼Œåªéœ€è¦çŸ¥é“æ‰€å¯¹åº”çš„å·¥å‚å³å¯ï¼Œå…·ä½“çš„äº§å“å¯¹è±¡ç”±å…·ä½“å·¥å‚ç±»åˆ›å»ºï¼›å®¢æˆ·ç«¯éœ€è¦çŸ¥é“åˆ›å»ºå…·ä½“äº§å“çš„å·¥å‚ç±»ã€‚</li>\n <li>ä¸€ä¸ªç±»é€šè¿‡å…¶å­ç±»æ¥æŒ‡å®šåˆ›å»ºå“ªä¸ªå¯¹è±¡ï¼šåœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œå¯¹äºæŠ½è±¡å·¥å‚ç±»åªéœ€è¦æä¾›ä¸€ä¸ªåˆ›å»ºäº§å“çš„æ¥å£ï¼Œè€Œç”±å…¶å­ç±»æ¥ç¡®å®šå…·ä½“è¦åˆ›å»ºçš„å¯¹è±¡ï¼Œåˆ©ç”¨é¢å‘å¯¹è±¡çš„å¤šæ€æ€§å’Œé‡Œæ°ä»£æ¢åŸåˆ™ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œå­ç±»å¯¹è±¡å°†è¦†ç›–çˆ¶ç±»å¯¹è±¡ï¼Œä»è€Œä½¿å¾—ç³»ç»Ÿæ›´å®¹æ˜“æ‰©å±•ã€‚</li>\n</ul>\n<blockquote>\n ç»§ç»­é˜…è¯»ï¼š\n <a href=\"https://mp.weixin.qq.com/s/ODSjqmsb1cnjQwwjhS5AOg\" rel=\"nofollow noreferrer\">Typescript è®¾è®¡æ¨¡å¼ä¹‹å·¥å‚æ–¹æ³•</a>\n</blockquote>\n<h4>2.3 æŠ½è±¡å·¥å‚</h4>\n<p>æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰ï¼Œæä¾›ä¸€ä¸ªåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— é¡»æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±»ã€‚</p>\n<p>åœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­å…·ä½“å·¥å‚è´Ÿè´£ç”Ÿäº§å…·ä½“çš„äº§å“ï¼Œæ¯ä¸€ä¸ªå…·ä½“å·¥å‚å¯¹åº”ä¸€ç§å…·ä½“äº§å“ï¼Œå·¥å‚æ–¹æ³•ä¹Ÿå…·æœ‰å”¯ä¸€æ€§ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå…·ä½“å·¥å‚ä¸­åªæœ‰ä¸€ä¸ªå·¥å‚æ–¹æ³•æˆ–è€…ä¸€ç»„é‡è½½çš„å·¥å‚æ–¹æ³•ã€‚ <strong>ä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå·¥å‚å¯ä»¥æä¾›å¤šä¸ªäº§å“å¯¹è±¡ï¼Œè€Œä¸æ˜¯å•ä¸€çš„äº§å“å¯¹è±¡ã€‚</strong></p>\n<p><img src=\"https://segmentfault.com/img/bVbK5q4\" alt=\"image\" title=\"image\" /></p>\n<p>åœ¨ä¸Šå›¾ä¸­ï¼Œé˜¿å®å“¥æ¨¡æ‹Ÿäº†ç”¨æˆ·è´­è½¦çš„æµç¨‹ï¼Œå°ç‹å‘ BMW å·¥å‚è®¢è´­äº† BMW730ï¼Œå·¥å‚æŒ‰ç…§ 730 å¯¹åº”çš„æ¨¡å‹è¿›è¡Œç”Ÿäº§å¹¶åœ¨ç”Ÿäº§å®Œæˆåäº¤ä»˜ç»™å°ç‹ã€‚è€Œå°ç§¦å‘åŒä¸€ä¸ª BMW å·¥å‚è®¢è´­äº† BMW840ï¼Œå·¥å‚æŒ‰ç…§ 840 å¯¹åº”çš„æ¨¡å‹è¿›è¡Œç”Ÿäº§å¹¶åœ¨ç”Ÿäº§å®Œæˆåäº¤ä»˜ç»™å°ç§¦ã€‚</p>\n<p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨æŠ½è±¡å·¥å‚æ¥æè¿°ä¸Šè¿°çš„è´­è½¦è¿‡ç¨‹ã€‚</p>\n<h5>2.3.1 å®ç°ä»£ç </h5>\n<pre><code class=\"typescript\">abstract class BMWFactory {\n  abstract produce730BMW(): BMW730;\n  abstract produce840BMW(): BMW840;\n}\n\nclass ConcreteBMWFactory extends BMWFactory {\n  produce730BMW(): BMW730 {\n    return new BMW730();\n  }\n\n  produce840BMW(): BMW840 {\n    return new BMW840();\n  }\n}</code></pre>\n<h5>2.3.2 ä½¿ç”¨ç¤ºä¾‹</h5>\n<pre><code class=\"typescript\">const bmwFactory = new ConcreteBMWFactory();\n\nconst bmw730 = bmwFactory.produce730BMW();\nconst bmw840 = bmwFactory.produce840BMW();\n\nbmw730.run();\nbmw840.run();</code></pre>\n<h5>2.3.3 åº”ç”¨åœºæ™¯</h5>\n<ul>\n <li>ä¸€ä¸ªç³»ç»Ÿä¸åº”å½“ä¾èµ–äºäº§å“ç±»å®ä¾‹å¦‚ä½•è¢«åˆ›å»ºã€ç»„åˆå’Œè¡¨è¾¾çš„ç»†èŠ‚ï¼Œè¿™å¯¹äºæ‰€æœ‰ç±»å‹çš„å·¥å‚æ¨¡å¼éƒ½æ˜¯é‡è¦çš„ã€‚</li>\n <li>ç³»ç»Ÿä¸­æœ‰å¤šäºä¸€ä¸ªçš„äº§å“æ—ï¼Œè€Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­æŸä¸€äº§å“æ—ã€‚</li>\n <li>ç³»ç»Ÿæä¾›ä¸€ä¸ªäº§å“ç±»çš„åº“ï¼Œæ‰€æœ‰çš„äº§å“ä»¥åŒæ ·çš„æ¥å£å‡ºç°ï¼Œä»è€Œä½¿å®¢æˆ·ç«¯ä¸ä¾èµ–äºå…·ä½“å®ç°ã€‚</li>\n</ul>\n<blockquote>\n ç»§ç»­é˜…è¯»ï¼š\n <a href=\"https://mp.weixin.qq.com/s/ppxWe3ML9TrOCe_ympXdIQ\" rel=\"nofollow noreferrer\">åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼æ˜¯ä»€ä¹ˆï¼Ÿ</a>\n</blockquote>\n<h3>ä¸‰ã€å•ä¾‹æ¨¡å¼</h3>\n<p>å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰æ˜¯ä¸€ç§å¸¸ç”¨çš„æ¨¡å¼ï¼Œæœ‰ä¸€äº›å¯¹è±¡æˆ‘ä»¬å¾€å¾€åªéœ€è¦ä¸€ä¸ªï¼Œæ¯”å¦‚å…¨å±€ç¼“å­˜ã€æµè§ˆå™¨ä¸­çš„ window å¯¹è±¡ç­‰ã€‚å•ä¾‹æ¨¡å¼ç”¨äºä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/bVcgWLd\" alt=\"image\" title=\"image\" /></p>\n<p>åœ¨ä¸Šå›¾ä¸­ï¼Œé˜¿å®å“¥æ¨¡æ‹Ÿäº†å€Ÿè½¦çš„æµç¨‹ï¼Œå°ç‹ä¸´æ—¶æœ‰æ€¥äº‹æ‰¾é˜¿å®å“¥å€Ÿè½¦å­ï¼Œé˜¿å®å“¥å®¶çš„è½¦å­åˆšå¥½æ²¡ç”¨ï¼Œå°±å€Ÿç»™å°ç‹äº†ã€‚å½“å¤©ï¼Œå°ç§¦ä¹Ÿéœ€è¦ç”¨è½¦å­ï¼Œä¹Ÿæ‰¾é˜¿å®å“¥å€Ÿè½¦ï¼Œå› ä¸ºé˜¿å®å“¥å®¶é‡Œåªæœ‰ä¸€è¾†è½¦å­ï¼Œæ‰€ä»¥å°±æ²¡æœ‰è½¦å¯å€Ÿäº†ã€‚</p>\n<p>å¯¹äºè½¦å­æ¥è¯´ï¼Œå®ƒè™½ç„¶ç»™ç”Ÿæ´»å¸¦æ¥äº†å¾ˆå¤§çš„ä¾¿åˆ©ï¼Œä½†å…»è½¦ä¹Ÿéœ€è¦ä¸€ç¬”ä¸å°çš„è´¹ç”¨ï¼ˆè½¦ä½è´¹ã€æ²¹è´¹å’Œä¿å…»è´¹ç­‰ï¼‰ï¼Œæ‰€ä»¥é˜¿å®å“¥å®¶é‡Œåªæœ‰ä¸€è¾†è½¦å­ã€‚åœ¨å¼€å‘è½¯ä»¶ç³»ç»Ÿæ—¶ï¼Œå¦‚æœé‡åˆ°åˆ›å»ºå¯¹è±¡æ—¶è€—æ—¶è¿‡å¤šæˆ–è€—èµ„æºè¿‡å¤šï¼Œä½†åˆç»å¸¸ç”¨åˆ°çš„å¯¹è±¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥è€ƒè™‘ä½¿ç”¨å•ä¾‹æ¨¡å¼ã€‚</p>\n<p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ TypeScript æ¥å®ç°å•ä¾‹æ¨¡å¼ã€‚</p>\n<h5>3.1 å®ç°ä»£ç </h5>\n<pre><code class=\"typescript\">class Singleton {\n  // å®šä¹‰ç§æœ‰çš„é™æ€å±æ€§ï¼Œæ¥ä¿å­˜å¯¹è±¡å®ä¾‹\n  private static singleton: Singleton;\n  private constructor() {}\n\n  // æä¾›ä¸€ä¸ªé™æ€çš„æ–¹æ³•æ¥è·å–å¯¹è±¡å®ä¾‹\n  public static getInstance(): Singleton {\n    if (!Singleton.singleton) {\n      Singleton.singleton = new Singleton();\n    }\n    return Singleton.singleton;\n  }\n}</code></pre>\n<h5>3.2 ä½¿ç”¨ç¤ºä¾‹</h5>\n<pre><code class=\"typescript\">let instance1 = Singleton.getInstance();\nlet instance2 = Singleton.getInstance();\n\nconsole.log(instance1 === instance2); // true</code></pre>\n<h5>3.3 åº”ç”¨åœºæ™¯</h5>\n<ul>\n <li>éœ€è¦é¢‘ç¹å®ä¾‹åŒ–ç„¶åé”€æ¯çš„å¯¹è±¡ã€‚</li>\n <li>åˆ›å»ºå¯¹è±¡æ—¶è€—æ—¶è¿‡å¤šæˆ–è€—èµ„æºè¿‡å¤šï¼Œä½†åˆç»å¸¸ç”¨åˆ°çš„å¯¹è±¡ã€‚</li>\n <li>ç³»ç»Ÿåªéœ€è¦ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œå¦‚ç³»ç»Ÿè¦æ±‚æä¾›ä¸€ä¸ªå”¯ä¸€çš„åºåˆ—å·ç”Ÿæˆå™¨æˆ–èµ„æºç®¡ç†å™¨ï¼Œæˆ–è€…éœ€è¦è€ƒè™‘èµ„æºæ¶ˆè€—å¤ªå¤§è€Œåªå…è®¸åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚</li>\n</ul>\n<blockquote>\n ç»§ç»­é˜…è¯»ï¼š\n <a href=\"https://mp.weixin.qq.com/s/nr20pZzRPSph42mK8F_zHQ\" rel=\"nofollow noreferrer\">TypeScript è®¾è®¡æ¨¡å¼ä¹‹å•ä¾‹æ¨¡å¼</a>\n</blockquote>\n<h3>å››ã€é€‚é…å™¨æ¨¡å¼</h3>\n<p>åœ¨å®é™…ç”Ÿæ´»ä¸­ï¼Œä¹Ÿå­˜åœ¨é€‚é…å™¨çš„ä½¿ç”¨åœºæ™¯ï¼Œæ¯”å¦‚ï¼šæ¸¯å¼æ’å¤´è½¬æ¢å™¨ã€ç”µæºé€‚é…å™¨å’Œ USB è½¬æ¥å£ã€‚<strong>è€Œåœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œé€‚é…å™¨æ¨¡å¼çš„ä½œç”¨æ˜¯è§£å†³ä¸¤ä¸ªè½¯ä»¶å®ä½“é—´çš„æ¥å£ä¸å…¼å®¹çš„é—®é¢˜ã€‚</strong> ä½¿ç”¨é€‚é…å™¨æ¨¡å¼ä¹‹åï¼ŒåŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½å·¥ä½œçš„ä¸¤ä¸ªè½¯ä»¶å®ä½“å°±å¯ä»¥ä¸€èµ·å·¥ä½œã€‚</p>\n<p><img src=\"https://segmentfault.com/img/bVbCDtT\" alt=\"image\" title=\"image\" /></p>\n<h5>4.1 å®ç°ä»£ç </h5>\n<pre><code class=\"typescript\">interface Logger {\n  info(message: string): Promise&lt;void&gt;;\n}\n\ninterface CloudLogger {\n  sendToServer(message: string, type: string): Promise&lt;void&gt;;\n}\n\nclass AliLogger implements CloudLogger {\n  public async sendToServer(message: string, type: string): Promise&lt;void&gt; {\n    console.info(message);\n    console.info('This Message was saved with AliLogger');\n  }\n}\n\nclass CloudLoggerAdapter implements Logger {\n  protected cloudLogger: CloudLogger;\n\n  constructor (cloudLogger: CloudLogger) {\n    this.cloudLogger = cloudLogger;\n  }\n\n  public async info(message: string): Promise&lt;void&gt; {\n    await this.cloudLogger.sendToServer(message, 'info');\n  }\n}\n\nclass NotificationService {\n  protected logger: Logger;\n  \n  constructor (logger: Logger) {    \n    this.logger = logger;\n  }\n\n  public async send(message: string): Promise&lt;void&gt; {\n    await this.logger.info(`Notification sended: ${message}`);\n  }\n}</code></pre>\n<p>åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œå› ä¸º <code>Logger</code> å’Œ <code>CloudLogger</code> è¿™ä¸¤ä¸ªæ¥å£ä¸åŒ¹é…ï¼Œæ‰€ä»¥æˆ‘ä»¬å¼•å…¥äº† <code>CloudLoggerAdapter</code> é€‚é…å™¨æ¥è§£å†³å…¼å®¹æ€§é—®é¢˜ã€‚</p>\n<h5>4.2 ä½¿ç”¨ç¤ºä¾‹</h5>\n<pre><code class=\"typescript\">(async () =&gt; {\n  const aliLogger = new AliLogger();\n  const cloudLoggerAdapter = new CloudLoggerAdapter(aliLogger);\n  const notificationService = new NotificationService(cloudLoggerAdapter);\n  await notificationService.send('Hello semlinker, To Cloud');\n})();</code></pre>\n<h5>4.3 åº”ç”¨åœºæ™¯åŠæ¡ˆä¾‹</h5>\n<ul>\n <li>ä»¥å‰å¼€å‘çš„ç³»ç»Ÿå­˜åœ¨æ»¡è¶³æ–°ç³»ç»ŸåŠŸèƒ½éœ€æ±‚çš„ç±»ï¼Œä½†å…¶æ¥å£åŒæ–°ç³»ç»Ÿçš„æ¥å£ä¸ä¸€è‡´ã€‚</li>\n <li>ä½¿ç”¨ç¬¬ä¸‰æ–¹æä¾›çš„ç»„ä»¶ï¼Œä½†ç»„ä»¶æ¥å£å®šä¹‰å’Œè‡ªå·±è¦æ±‚çš„æ¥å£å®šä¹‰ä¸åŒã€‚</li>\n <li><a href=\"https://github.com/ctimmerm/axios-mock-adapter\" rel=\"nofollow noreferrer\">Github - axios-mock-adapter</a>ï¼š<a href=\"https://github.com/ctimmerm/axios-mock-adapter\" rel=\"nofollow noreferrer\">https://github.com/ctimmerm/a...</a></li>\n</ul>\n<blockquote>\n ç»§ç»­é˜…è¯»ï¼š\n <a href=\"https://mp.weixin.qq.com/s/sxPtZrJQyObkblCOXTjxug\" rel=\"nofollow noreferrer\">TypeScript è®¾è®¡æ¨¡å¼ä¹‹é€‚é…å™¨æ¨¡å¼</a>\n</blockquote>\n<h3>äº”ã€è§‚å¯Ÿè€…æ¨¡å¼ &amp; å‘å¸ƒè®¢é˜…æ¨¡å¼</h3>\n<h4>5.1 è§‚å¯Ÿè€…æ¨¡å¼</h4>\n<p>è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå®ƒå®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªä¸»é¢˜å¯¹è±¡ï¼Œè¿™ä¸ªä¸»é¢˜å¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶å°±ä¼šé€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€…å¯¹è±¡ï¼Œä½¿å¾—å®ƒä»¬èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°è‡ªå·±ã€‚</p>\n<p>åœ¨è§‚å¯Ÿè€…æ¨¡å¼ä¸­æœ‰ä¸¤ä¸ªä¸»è¦è§’è‰²ï¼šSubjectï¼ˆä¸»é¢˜ï¼‰å’Œ Observerï¼ˆè§‚å¯Ÿè€…ï¼‰ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/bVbLW2d\" alt=\"image\" title=\"image\" /></p>\n<p>åœ¨ä¸Šå›¾ä¸­ï¼ŒSubjectï¼ˆä¸»é¢˜ï¼‰å°±æ˜¯é˜¿å®å“¥çš„ TS ä¸“é¢˜æ–‡ç« ï¼Œè€Œè§‚å¯Ÿè€…å°±æ˜¯å°ç§¦å’Œå°ç‹ã€‚ç”±äºè§‚å¯Ÿè€…æ¨¡å¼æ”¯æŒç®€å•çš„å¹¿æ’­é€šä¿¡ï¼Œå½“æ¶ˆæ¯æ›´æ–°æ—¶ï¼Œä¼šè‡ªåŠ¨é€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€…ã€‚</p>\n<p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ TypeScript æ¥å®ç°è§‚å¯Ÿè€…æ¨¡å¼ã€‚</p>\n<h5>5.1.1 å®ç°ä»£ç </h5>\n<pre><code class=\"typescript\">interface Observer {\n  notify: Function;\n}\n\nclass ConcreteObserver implements Observer{\n  constructor(private name: string) {}\n\n  notify() {\n    console.log(`${this.name} has been notified.`);\n  }\n}\n\nclass Subject { \n  private observers: Observer[] = [];\n\n  public addObserver(observer: Observer): void {\n    console.log(observer, \"is pushed!\");\n    this.observers.push(observer);\n  }\n\n  public deleteObserver(observer: Observer): void {\n    console.log(\"remove\", observer);\n    const n: number = this.observers.indexOf(observer);\n    n != -1 &amp;&amp; this.observers.splice(n, 1);\n  }\n\n  public notifyObservers(): void {\n    console.log(\"notify all the observers\", this.observers);\n    this.observers.forEach(observer =&gt; observer.notify());\n  }\n}</code></pre>\n<h5>5.1.2 ä½¿ç”¨ç¤ºä¾‹</h5>\n<pre><code class=\"typescript\">const subject: Subject = new Subject();\nconst xiaoQin = new ConcreteObserver(\"å°ç§¦\");\nconst xiaoWang = new ConcreteObserver(\"å°ç‹\");\nsubject.addObserver(xiaoQin);\nsubject.addObserver(xiaoWang);\nsubject.notifyObservers();\n\nsubject.deleteObserver(xiaoQin);\nsubject.notifyObservers();</code></pre>\n<h5>5.1.3 åº”ç”¨åœºæ™¯åŠæ¡ˆä¾‹</h5>\n<ul>\n <li>ä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸ºä¾èµ–äºå¦ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€ã€‚æˆ–è€…æ¢ä¸€ç§è¯´æ³•ï¼Œå½“è¢«è§‚å¯Ÿå¯¹è±¡ï¼ˆç›®æ ‡å¯¹è±¡ï¼‰çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ ï¼Œä¼šç›´æ¥å½±å“åˆ°è§‚å¯Ÿå¯¹è±¡çš„è¡Œä¸ºã€‚</li>\n <li><a href=\"https://github.com/ReactiveX/rxjs/blob/master/src/internal/Subject.ts\" rel=\"nofollow noreferrer\">RxJS Subject</a>ï¼š<a href=\"https://github.com/ReactiveX/rxjs/blob/master/src/internal/Subject.ts\" rel=\"nofollow noreferrer\">https://github.com/ReactiveX/...</a></li>\n <li><a href=\"https://rxjs.dev/guide/subject\" rel=\"nofollow noreferrer\">RxJS Subject æ–‡æ¡£</a>ï¼š<a href=\"https://rxjs.dev/guide/subject\" rel=\"nofollow noreferrer\">https://rxjs.dev/guide/subject</a></li>\n</ul>\n<blockquote>\n ç»§ç»­é˜…è¯»ï¼š\n <a href=\"https://mp.weixin.qq.com/s/XZVNfkuydrHQbkaOo-wxtw\" rel=\"nofollow noreferrer\">TypeScript è®¾è®¡æ¨¡å¼ä¹‹è§‚å¯Ÿè€…æ¨¡å¼</a>\n</blockquote>\n<h4>5.2 å‘å¸ƒè®¢é˜…æ¨¡å¼</h4>\n<p>åœ¨è½¯ä»¶æ¶æ„ä¸­ï¼Œå‘å¸ƒ/è®¢é˜…æ˜¯ä¸€ç§æ¶ˆæ¯èŒƒå¼ï¼Œ<strong>æ¶ˆæ¯çš„å‘é€è€…ï¼ˆç§°ä¸ºå‘å¸ƒè€…ï¼‰ä¸ä¼šå°†æ¶ˆæ¯ç›´æ¥å‘é€ç»™ç‰¹å®šçš„æ¥æ”¶è€…ï¼ˆç§°ä¸ºè®¢é˜…è€…ï¼‰ã€‚è€Œæ˜¯å°†å‘å¸ƒçš„æ¶ˆæ¯åˆ†ä¸ºä¸åŒçš„ç±»åˆ«ï¼Œç„¶ååˆ†åˆ«å‘é€ç»™ä¸åŒçš„è®¢é˜…è€…ã€‚</strong> åŒæ ·çš„ï¼Œè®¢é˜…è€…å¯ä»¥è¡¨è¾¾å¯¹ä¸€ä¸ªæˆ–å¤šä¸ªç±»åˆ«çš„å…´è¶£ï¼Œåªæ¥æ”¶æ„Ÿå…´è¶£çš„æ¶ˆæ¯ï¼Œæ— éœ€äº†è§£å“ªäº›å‘å¸ƒè€…å­˜åœ¨ã€‚</p>\n<p>åœ¨å‘å¸ƒè®¢é˜…æ¨¡å¼ä¸­æœ‰ä¸‰ä¸ªä¸»è¦è§’è‰²ï¼šPublisherï¼ˆå‘å¸ƒè€…ï¼‰ã€ Channelsï¼ˆé€šé“ï¼‰å’Œ Subscriberï¼ˆè®¢é˜…è€…ï¼‰ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/bVbLW2i\" alt=\"image\" title=\"image\" /></p>\n<p>åœ¨ä¸Šå›¾ä¸­ï¼ŒPublisherï¼ˆå‘å¸ƒè€…ï¼‰æ˜¯é˜¿å®å“¥ï¼ŒChannelsï¼ˆé€šé“ï¼‰ä¸­ Topic A å’Œ Topic B åˆ†åˆ«å¯¹åº”äº TS ä¸“é¢˜å’Œ Deno ä¸“é¢˜ï¼Œè€Œ Subscriberï¼ˆè®¢é˜…è€…ï¼‰å°±æ˜¯å°ç§¦ã€å°ç‹å’Œå°æ± ã€‚</p>\n<p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ TypeScript æ¥å®ç°å‘å¸ƒè®¢é˜…æ¨¡å¼ã€‚</p>\n<h5>5.2.1 å®ç°ä»£ç </h5>\n<pre><code class=\"typescript\">type EventHandler = (...args: any[]) =&gt; any;\n\nclass EventEmitter {\n  private c = new Map&lt;string, EventHandler[]&gt;();\n\n  // è®¢é˜…æŒ‡å®šçš„ä¸»é¢˜\n  subscribe(topic: string, ...handlers: EventHandler[]) {\n    let topics = this.c.get(topic);\n    if (!topics) {\n      this.c.set(topic, topics = []);\n    }\n    topics.push(...handlers);\n  }\n\n  // å–æ¶ˆè®¢é˜…æŒ‡å®šçš„ä¸»é¢˜\n  unsubscribe(topic: string, handler?: EventHandler): boolean {\n    if (!handler) {\n      return this.c.delete(topic);\n    }\n\n    const topics = this.c.get(topic);\n    if (!topics) {\n      return false;\n    }\n    \n    const index = topics.indexOf(handler);\n\n    if (index &lt; 0) {\n      return false;\n    }\n    topics.splice(index, 1);\n    if (topics.length === 0) {\n      this.c.delete(topic);\n    }\n    return true;\n  }\n\n  // ä¸ºæŒ‡å®šçš„ä¸»é¢˜å‘å¸ƒæ¶ˆæ¯\n  publish(topic: string, ...args: any[]): any[] | null {\n    const topics = this.c.get(topic);\n    if (!topics) {\n      return null;\n    }\n    return topics.map(handler =&gt; {\n      try {\n        return handler(...args);\n      } catch (e) {\n        console.error(e);\n        return null;\n      }\n    });\n  }\n}</code></pre>\n<h5>5.2.2 ä½¿ç”¨ç¤ºä¾‹</h5>\n<pre><code class=\"typescript\">const eventEmitter = new EventEmitter();\neventEmitter.subscribe(\"ts\", (msg) =&gt; console.log(`æ”¶åˆ°è®¢é˜…çš„æ¶ˆæ¯ï¼š${msg}`) );\n\neventEmitter.publish(\"ts\", \"TypeScriptå‘å¸ƒè®¢é˜…æ¨¡å¼\");\neventEmitter.unsubscribe(\"ts\");\neventEmitter.publish(\"ts\", \"TypeScriptå‘å¸ƒè®¢é˜…æ¨¡å¼\");</code></pre>\n<h5>5.2.3 åº”ç”¨åœºæ™¯</h5>\n<ul>\n <li>å¯¹è±¡é—´å­˜åœ¨ä¸€å¯¹å¤šå…³ç³»ï¼Œä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜ä¼šå½±å“å…¶ä»–å¯¹è±¡ã€‚</li>\n <li>ä½œä¸ºäº‹ä»¶æ€»çº¿ï¼Œæ¥å®ç°ä¸åŒç»„ä»¶é—´æˆ–æ¨¡å—é—´çš„é€šä¿¡ã€‚</li>\n <li><a href=\"https://github.com/ustbhuangyi/better-scroll/blob/dev/packages/shared-utils/src/events.ts\" rel=\"nofollow noreferrer\">BetterScroll - EventEmitter</a>ï¼š<a href=\"https://github.com/ustbhuangyi/better-scroll/blob/dev/packages/shared-utils/src/events.ts\" rel=\"nofollow noreferrer\">https://github.com/ustbhuangy...</a></li>\n <li><a href=\"https://mp.weixin.qq.com/s/N4iw3bi0bxJ57J8EAp5ctQ\" rel=\"nofollow noreferrer\">EventEmitter åœ¨æ’ä»¶åŒ–æ¶æ„çš„åº”ç”¨</a>ï¼š<a href=\"https://mp.weixin.qq.com/s/N4iw3bi0bxJ57J8EAp5ctQ\" rel=\"nofollow noreferrer\">https://mp.weixin.qq.com/s/N4...</a></li>\n</ul>\n<blockquote>\n ç»§ç»­é˜…è¯»ï¼š\n <a href=\"https://mp.weixin.qq.com/s/NGrkTBIidrcxX-FvH0mSng\" rel=\"nofollow noreferrer\">å¦‚ä½•ä¼˜é›…çš„å®ç°æ¶ˆæ¯é€šä¿¡ï¼Ÿ</a>\n</blockquote>\n<h3>å…­ã€ç­–ç•¥æ¨¡å¼</h3>\n<p>ç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰å®šä¹‰äº†ä¸€ç³»åˆ—çš„ç®—æ³•ï¼ŒæŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬å¯ä»¥äº’ç›¸æ›¿æ¢ã€‚ç­–ç•¥æ¨¡å¼çš„é‡å¿ƒä¸æ˜¯å¦‚ä½•å®ç°ç®—æ³•ï¼Œè€Œæ˜¯å¦‚ä½•ç»„ç»‡ã€è°ƒç”¨è¿™äº›ç®—æ³•ï¼Œä»è€Œè®©ç¨‹åºç»“æ„æ›´çµæ´»ã€å¯ç»´æŠ¤ã€å¯æ‰©å±•ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/bVcglbR\" alt=\"image\" title=\"image\" /></p>\n<p>ç›®å‰åœ¨ä¸€äº›ä¸»æµçš„ Web ç«™ç‚¹ä¸­ï¼Œéƒ½æä¾›äº†å¤šç§ä¸åŒçš„ç™»å½•æ–¹å¼ã€‚æ¯”å¦‚è´¦å·å¯†ç ç™»å½•ã€æ‰‹æœºéªŒè¯ç ç™»å½•å’Œç¬¬ä¸‰æ–¹ç™»å½•ã€‚ä¸ºäº†æ–¹ä¾¿ç»´æŠ¤ä¸åŒçš„ç™»å½•æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸åŒçš„ç™»å½•æ–¹å¼å°è£…æˆä¸åŒçš„ç™»å½•ç­–ç•¥ã€‚</p>\n<p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ç­–ç•¥æ¨¡å¼æ¥å°è£…ä¸åŒçš„ç™»å½•æ–¹å¼ã€‚</p>\n<h5>6.1 å®ç°ä»£ç </h5>\n<p>ä¸ºäº†æ›´å¥½åœ°ç†è§£ä»¥ä¸‹ä»£ç ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹å¯¹åº”çš„ UML ç±»å›¾ï¼š</p>\n<p><img src=\"https://segmentfault.com/img/bVcgnhV\" alt=\"image\" title=\"image\" /></p>\n<pre><code class=\"typescript\">interface Strategy {\n  authenticate(...args: any): any;\n}\n\nclass Authenticator {\n  strategy: any;\n  constructor() {\n    this.strategy = null;\n  }\n\n  setStrategy(strategy: any) {\n    this.strategy = strategy;\n  }\n\n  authenticate(...args: any) {\n    if (!this.strategy) {\n      console.log('å°šæœªè®¾ç½®è®¤è¯ç­–ç•¥');\n      return;\n    }\n    return this.strategy.authenticate(...args);\n  }\n}\n\nclass WechatStrategy implements Strategy {\n  authenticate(wechatToken: string) {\n    if (wechatToken !== '123') {\n      console.log('æ— æ•ˆçš„å¾®ä¿¡ç”¨æˆ·');\n      return;\n    }\n    console.log('å¾®ä¿¡è®¤è¯æˆåŠŸ');\n  }\n}\n\nclass LocalStrategy implements Strategy {\n  authenticate(username: string, password: string) {\n    if (username !== 'abao' &amp;&amp; password !== '123') {\n      console.log('è´¦å·æˆ–å¯†ç é”™è¯¯');\n      return;\n    }\n    console.log('è´¦å·å’Œå¯†ç è®¤è¯æˆåŠŸ');\n  }\n}</code></pre>\n<h5>6.2 ä½¿ç”¨ç¤ºä¾‹</h5>\n<pre><code class=\"typescript\">const auth = new Authenticator();\n\nauth.setStrategy(new WechatStrategy());\nauth.authenticate('123456');\n\nauth.setStrategy(new LocalStrategy());\nauth.authenticate('abao', '123');</code></pre>\n<h5>6.3 åº”ç”¨åœºæ™¯åŠæ¡ˆä¾‹</h5>\n<ul>\n <li>ä¸€ä¸ªç³»ç»Ÿéœ€è¦åŠ¨æ€åœ°åœ¨å‡ ç§ç®—æ³•ä¸­é€‰æ‹©ä¸€ç§æ—¶ï¼Œå¯å°†æ¯ä¸ªç®—æ³•å°è£…åˆ°ç­–ç•¥ç±»ä¸­ã€‚</li>\n <li>å¤šä¸ªç±»åªåŒºåˆ«åœ¨è¡¨ç°è¡Œä¸ºä¸åŒï¼Œå¯ä»¥ä½¿ç”¨ç­–ç•¥æ¨¡å¼ï¼Œåœ¨è¿è¡Œæ—¶åŠ¨æ€é€‰æ‹©å…·ä½“è¦æ‰§è¡Œçš„è¡Œä¸ºã€‚</li>\n <li>ä¸€ä¸ªç±»å®šä¹‰äº†å¤šç§è¡Œä¸ºï¼Œå¹¶ä¸”è¿™äº›è¡Œä¸ºåœ¨è¿™ä¸ªç±»çš„æ“ä½œä¸­ä»¥å¤šä¸ªæ¡ä»¶è¯­å¥çš„å½¢å¼å‡ºç°ï¼Œå¯å°†æ¯ä¸ªæ¡ä»¶åˆ†æ”¯ç§»å…¥å®ƒä»¬å„è‡ªçš„ç­–ç•¥ç±»ä¸­ä»¥ä»£æ›¿è¿™äº›æ¡ä»¶è¯­å¥ã€‚</li>\n <li><a href=\"https://github.com/jaredhanson/passport-local\" rel=\"nofollow noreferrer\">Github - passport-local</a>ï¼š<a href=\"https://github.com/jaredhanson/passport-local\" rel=\"nofollow noreferrer\">https://github.com/jaredhanso...</a></li>\n <li><a href=\"https://github.com/jaredhanson/passport-oauth2\" rel=\"nofollow noreferrer\">Github - passport-oauth2</a>ï¼š<a href=\"https://github.com/jaredhanson/passport-oauth2\" rel=\"nofollow noreferrer\">https://github.com/jaredhanso...</a></li>\n <li><a href=\"https://github.com/vriad/zod/blob/master/src/types/string.ts\" rel=\"nofollow noreferrer\">Github - zod</a>ï¼š<a href=\"https://github.com/vriad/zod/blob/master/src/types/string.ts\" rel=\"nofollow noreferrer\">https://github.com/vriad/zod/...</a></li>\n</ul>\n<h3>ä¸ƒã€èŒè´£é“¾æ¨¡å¼</h3>\n<p>èŒè´£é“¾æ¨¡å¼æ˜¯ä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥å—è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚åœ¨èŒè´£é“¾æ¨¡å¼é‡Œï¼Œå¾ˆå¤šå¯¹è±¡ç”±æ¯ä¸€ä¸ªå¯¹è±¡å¯¹å…¶ä¸‹å®¶çš„å¼•ç”¨è€Œè¿æ¥èµ·æ¥å½¢æˆä¸€æ¡é“¾ã€‚è¯·æ±‚åœ¨è¿™ä¸ªé“¾ä¸Šä¼ é€’ï¼Œç›´åˆ°é“¾ä¸Šçš„æŸä¸€ä¸ªå¯¹è±¡å†³å®šå¤„ç†æ­¤è¯·æ±‚ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/bVcgqnX\" alt=\"image\" title=\"image\" /></p>\n<p>åœ¨å…¬å¸ä¸­ä¸åŒçš„å²—ä½æ‹¥æœ‰ä¸åŒçš„èŒè´£ä¸æƒé™ã€‚ä»¥ä¸Šè¿°çš„è¯·å‡æµç¨‹ä¸ºä¾‹ï¼Œå½“é˜¿å®å“¥è¯· 1 å¤©å‡æ—¶ï¼Œåªè¦ç»„é•¿å®¡æ‰¹å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦æµè½¬åˆ°ä¸»ç®¡å’Œæ€»ç›‘ã€‚å¦‚æœèŒè´£é“¾ä¸Šçš„æŸä¸ªç¯èŠ‚æ— æ³•å¤„ç†å½“å‰çš„è¯·æ±‚ï¼Œè‹¥å«æœ‰ä¸‹ä¸ªç¯èŠ‚ï¼Œåˆ™ä¼šæŠŠè¯·æ±‚è½¬äº¤ç»™ä¸‹ä¸ªç¯èŠ‚æ¥å¤„ç†ã€‚</p>\n<p>åœ¨æ—¥å¸¸çš„è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯¹äºèŒè´£é“¾æ¥è¯´ï¼Œä¸€ç§å¸¸è§çš„åº”ç”¨åœºæ™¯æ˜¯ä¸­é—´ä»¶ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•åˆ©ç”¨èŒè´£é“¾æ¥å¤„ç†è¯·æ±‚ã€‚</p>\n<h5>7.1 å®ç°ä»£ç </h5>\n<p>ä¸ºäº†æ›´å¥½åœ°ç†è§£ä»¥ä¸‹ä»£ç ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹å¯¹åº”çš„ UML ç±»å›¾ï¼š</p>\n<p><img src=\"https://segmentfault.com/img/bVcgrCF\" alt=\"image\" title=\"image\" /></p>\n<pre><code class=\"typescript\">interface IHandler {\n  addMiddleware(h: IHandler): IHandler;\n  get(url: string, callback: (data: any) =&gt; void): void;\n}\n\nabstract class AbstractHandler implements IHandler {\n  next!: IHandler;\n  addMiddleware(h: IHandler) {\n    this.next = h;\n    return this.next;\n  }\n\n  get(url: string, callback: (data: any) =&gt; void) {\n    if (this.next) {\n      return this.next.get(url, callback);\n    }\n  }\n}\n\n// å®šä¹‰Authä¸­é—´ä»¶\nclass Auth extends AbstractHandler {\n  isAuthenticated: boolean;\n  constructor(username: string, password: string) {\n    super();\n\n    this.isAuthenticated = false;\n    if (username === 'abao' &amp;&amp; password === '123') {\n      this.isAuthenticated = true;\n    }\n  }\n\n  get(url: string, callback: (data: any) =&gt; void) {\n    if (this.isAuthenticated) {\n      return super.get(url, callback);\n    } else {\n      throw new Error('Not Authorized');\n    }\n  }\n}\n\n// å®šä¹‰Loggerä¸­é—´ä»¶\nclass Logger extends AbstractHandler {\n  get(url: string, callback: (data: any) =&gt; void) {\n    console.log('/GET Request to: ', url);\n    return super.get(url, callback);\n  }\n}\n\nclass Route extends AbstractHandler {\n  URLMaps: {[key: string]: any};\n  constructor() {\n    super();\n    this.URLMaps = {\n      '/api/todos': [{ title: 'learn ts' }, { title: 'learn react' }],\n      '/api/random': Math.random(),\n    };\n  }\n\n  get(url: string, callback: (data: any) =&gt; void) {\n    super.get(url, callback);\n\n    if (this.URLMaps.hasOwnProperty(url)) {\n      callback(this.URLMaps[url]);\n    }\n  }\n}</code></pre>\n<h5>7.2 ä½¿ç”¨ç¤ºä¾‹</h5>\n<pre><code class=\"typescript\">const route = new Route();\nroute.addMiddleware(new Auth('abao', '123')).addMiddleware(new Logger());\n\nroute.get('/api/todos', data =&gt; {\n  console.log(JSON.stringify({ data }, null, 2));\n});\n\nroute.get('/api/random', data =&gt; {\n  console.log(data);\n});</code></pre>\n<h5>7.3 åº”ç”¨åœºæ™¯</h5>\n<ul>\n <li>å¯å¤„ç†ä¸€ä¸ªè¯·æ±‚çš„å¯¹è±¡é›†åˆåº”è¢«åŠ¨æ€æŒ‡å®šã€‚</li>\n <li>æƒ³åœ¨ä¸æ˜ç¡®æŒ‡å®šæ¥æ”¶è€…çš„æƒ…å†µä¸‹ï¼Œå‘å¤šä¸ªå¯¹è±¡ä¸­çš„ä¸€ä¸ªæäº¤ä¸€ä¸ªè¯·æ±‚ã€‚</li>\n <li>æœ‰å¤šä¸ªå¯¹è±¡å¯ä»¥å¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼Œå“ªä¸ªå¯¹è±¡å¤„ç†è¯¥è¯·æ±‚è¿è¡Œæ—¶è‡ªåŠ¨ç¡®å®šï¼Œå®¢æˆ·ç«¯åªéœ€è¦æŠŠè¯·æ±‚æäº¤åˆ°é“¾ä¸Šå³å¯ã€‚</li>\n</ul>\n<h3>å…«ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼</h3>\n<p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼ç”±ä¸¤éƒ¨åˆ†ç»“æ„ç»„æˆï¼šæŠ½è±¡çˆ¶ç±»å’Œå…·ä½“çš„å®ç°å­ç±»ã€‚<strong>é€šå¸¸åœ¨æŠ½è±¡çˆ¶ç±»ä¸­å°è£…äº†å­ç±»çš„ç®—æ³•æ¡†æ¶ï¼Œä¹ŸåŒ…æ‹¬å®ç°ä¸€äº›å…¬å…±æ–¹æ³•ä»¥åŠå°è£…å­ç±»ä¸­æ‰€æœ‰æ–¹æ³•çš„æ‰§è¡Œé¡ºåº</strong>ã€‚å­ç±»é€šè¿‡ç»§æ‰¿è¿™ä¸ªæŠ½è±¡ç±»ï¼Œä¹Ÿç»§æ‰¿äº†æ•´ä¸ªç®—æ³•ç»“æ„ï¼Œå¹¶ä¸”å¯ä»¥é€‰æ‹©é‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚</p>\n<p><img src=\"https://segmentfault.com/img/bVcgt1W\" alt=\"image\" title=\"image\" /></p>\n<p>åœ¨ä¸Šå›¾ä¸­ï¼Œé˜¿å®å“¥é€šè¿‡ä½¿ç”¨ä¸åŒçš„è§£æå™¨æ¥åˆ†åˆ«è§£æ CSV å’Œ Markup æ–‡ä»¶ã€‚è™½ç„¶è§£æçš„æ˜¯ä¸åŒçš„ç±»å‹çš„æ–‡ä»¶ï¼Œä½†æ–‡ä»¶çš„å¤„ç†æµç¨‹æ˜¯ä¸€æ ·çš„ã€‚è¿™é‡Œä¸»è¦åŒ…å«è¯»å–æ–‡ä»¶ã€è§£ææ–‡ä»¶å’Œæ‰“å°æ•°æ®ä¸‰ä¸ªæ­¥éª¤ã€‚é’ˆå¯¹è¿™ä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼•å…¥æ¨¡æ¿æ–¹æ³•æ¥å°è£…ä»¥ä¸Šä¸‰ä¸ªæ­¥éª¤çš„å¤„ç†é¡ºåºã€‚</p>\n<p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨æ¨¡æ¿æ–¹æ³•æ¥å®ç°ä¸Šè¿°çš„è§£ææµç¨‹ã€‚</p>\n<h5>8.1 å®ç°ä»£ç </h5>\n<p>ä¸ºäº†æ›´å¥½åœ°ç†è§£ä»¥ä¸‹ä»£ç ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹å¯¹åº”çš„ UML ç±»å›¾ï¼š</p>\n<p><img src=\"https://segmentfault.com/img/bVcgvri\" alt=\"image\" title=\"image\" /></p>\n<pre><code class=\"typescript\">import fs from 'fs';\n\nabstract class DataParser {\n  data: string = '';\n  out: any = null;\n\n  // è¿™å°±æ˜¯æ‰€è°“çš„æ¨¡æ¿æ–¹æ³•\n  parse(pathUrl: string) {\n    this.readFile(pathUrl);\n    this.doParsing();\n    this.printData();\n  }\n\n  readFile(pathUrl: string) {\n    this.data = fs.readFileSync(pathUrl, 'utf8');\n  }\n\n  abstract doParsing(): void;\n  \n  printData() {\n    console.log(this.out);\n  }\n}\n\nclass CSVParser extends DataParser {\n  doParsing() {\n    this.out = this.data.split(',');\n  }\n}\n\nclass MarkupParser extends DataParser {\n  doParsing() {\n    this.out = this.data.match(/&lt;\\w+&gt;.*&lt;\\/\\w+&gt;/gim);\n  }\n}</code></pre>\n<h5>8.2 ä½¿ç”¨ç¤ºä¾‹</h5>\n<pre><code class=\"typescript\">const csvPath = './data.csv';\nconst mdPath = './design-pattern.md';\n\nnew CSVParser().parse(csvPath);\nnew MarkupParser().parse(mdPath);</code></pre>\n<h5>8.3 åº”ç”¨åœºæ™¯</h5>\n<ul>\n <li>ç®—æ³•çš„æ•´ä½“æ­¥éª¤å¾ˆå›ºå®šï¼Œä½†å…¶ä¸­ä¸ªåˆ«éƒ¨åˆ†æ˜“å˜æ—¶ï¼Œè¿™æ—¶å€™å¯ä»¥ä½¿ç”¨æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œå°†å®¹æ˜“å˜çš„éƒ¨åˆ†æŠ½è±¡å‡ºæ¥ï¼Œä¾›å­ç±»å®ç°ã€‚</li>\n <li>å½“éœ€è¦æ§åˆ¶å­ç±»çš„æ‰©å±•æ—¶ï¼Œæ¨¡æ¿æ–¹æ³•åªåœ¨ç‰¹å®šç‚¹è°ƒç”¨é’©å­æ“ä½œï¼Œè¿™æ ·å°±åªå…è®¸åœ¨è¿™äº›ç‚¹è¿›è¡Œæ‰©å±•ã€‚</li>\n</ul>\n<h3>ä¹ã€å‚è€ƒèµ„æº</h3>\n<ul>\n <li><a href=\"https://zh.wikipedia.org/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_(%E8%AE%A1%E7%AE%97%E6%9C%BA\" rel=\"nofollow noreferrer\">ç»´åŸºç™¾ç§‘ - è®¾è®¡æ¨¡å¼</a>)</li>\n <li><a href=\"http://c.biancheng.net/design_pattern/\" rel=\"nofollow noreferrer\">Javaè®¾è®¡æ¨¡å¼ï¼š23ç§è®¾è®¡æ¨¡å¼å…¨é¢è§£æ</a></li>\n <li><a href=\"https://dev.to/anuraghazra/design-patterns-everyday-53m0\" rel=\"nofollow noreferrer\">Design Patterns Everyday</a></li>\n</ul>\n<h3>åã€æ¨èé˜…è¯»</h3>\n<ul>\n <li><a href=\"http://www.semlinker.com/deno-quickstart/\" rel=\"nofollow noreferrer\">äº†ä¸èµ·çš„ Deno å…¥é—¨ç¯‡</a></li>\n <li><a href=\"http://www.semlinker.com/deno-in-action/\" rel=\"nofollow noreferrer\">äº†ä¸èµ·çš„ Deno å®æˆ˜æ•™ç¨‹</a></li>\n <li><a href=\"http://www.semlinker.com/you-dont-know-blob/\" rel=\"nofollow noreferrer\">ä½ ä¸çŸ¥é“çš„ Blob</a></li>\n <li><a href=\"http://www.semlinker.com/you-dont-know-weakmap/\" rel=\"nofollow noreferrer\">ä½ ä¸çŸ¥é“çš„ WeakMap</a></li>\n</ul>","descriptionType":"html","publishedDate":"Fri, 09 Oct 2020 08:13:48 +0000","feedId":23280,"bgimg":"https://segmentfault.com/img/bVcfO3r","linkMd5":"578419221cd55cbd8864d169e5e5213f","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn88@2020_5/2020/10/09/15-42-59-554_92d6d16562c698e2.webp","destWidth":800,"destHeight":264,"sourceBytes":79444,"destBytes":79444,"author":"é˜¿å®å“¥","articleImgCdnMap":{"https://segmentfault.com/img/bVcfO3r":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn88@2020_5/2020/10/09/15-42-59-554_92d6d16562c698e2.webp","https://segmentfault.com/img/bVcfQ3q":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn40@2020_5/2020/10/09/15-43-03-635_dd1b61671b879bda.webp","https://segmentfault.com/img/bVbK5q2":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn26@2020_6/2020/10/09/15-43-06-331_13d097ff607bbc49.webp","https://segmentfault.com/img/bVbMu1o":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn96@2020_4/2020/10/09/15-43-10-319_5b66d092ecae1af4.webp","https://segmentfault.com/img/bVbK5q5":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn34@2020_3/2020/10/09/15-43-07-423_6b375fb8f805f0e0.webp","https://segmentfault.com/img/bVbK5q4":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn30@2020_1/2020/10/09/15-43-06-010_86ca3f478a72ec4a.webp","https://segmentfault.com/img/bVcgWLd":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn15@2020_5/2020/10/09/15-43-05-569_5503451204261295.webp","https://segmentfault.com/img/bVbCDtT":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn6@2020_2/2020/10/09/15-43-09-019_7372cefbe8143c9a.webp","https://segmentfault.com/img/bVbLW2d":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn23@2020_5/2020/10/09/15-43-05-955_7f2d6ccf06537d8e.webp","https://segmentfault.com/img/bVbLW2i":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn20@2020_4/2020/10/09/15-43-03-909_8490036c74a0a300.webp","https://segmentfault.com/img/bVcglbR":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn47@2020_6/2020/10/09/15-43-05-690_cfe9e1c95f736b09.webp","https://segmentfault.com/img/bVcgnhV":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn44@2020_2/2020/10/09/15-43-05-730_315a8ab747fa4d5b.webp","https://segmentfault.com/img/bVcgqnX":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn3@2020_2/2020/10/09/15-43-04-367_4bb09a82f28e1bba.webp","https://segmentfault.com/img/bVcgrCF":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn99@2020_2/2020/10/09/15-43-03-714_84bbd7282f33d5de.webp","https://segmentfault.com/img/bVcgt1W":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn52@2020_1/2020/10/09/15-43-04-241_549cfc26dcee4241.webp","https://segmentfault.com/img/bVcgvri":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn11@2020_1/2020/10/09/15-43-08-257_2aea5b02596a4a68.webp"},"publishedOrCreatedDate":1602258163464}],"record":{"createdTime":"2020-10-09 23:42:43","updatedTime":"2020-10-09 23:42:43","feedId":23280,"fetchDate":"Fri, 09 Oct 2020 15:42:43 +0000","fetchMs":52513,"handleMs":14308,"totalMs":95588,"newArticles":0,"totalArticles":50,"status":1,"type":0,"ip":"40ace73c106547fe13d820d5a8d040ba","hostName":"us-020*","requestId":"a2ee3d02b00e40cfb1689fe7fd4cab16_23280","contentType":"application/atom+xml; charset=UTF-8","totalBytes":571196,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":16,"articlesImgsGithubTotal":16,"successGithubMap":{"myreaderx7":1,"myreaderx15":1,"myreaderx27":1,"myreaderx16":1,"myreaderx6":1,"myreaderx4":1,"myreaderx11":1,"myreaderx3":1,"myreaderx33":1,"myreaderx2":1,"myreaderx1":1,"myreaderx24":1,"myreaderx30":1,"myreaderx5oss":1,"myreaderx18":1,"myreaderx19":1},"failGithubMap":{}},"feed":{"createdTime":"2020-09-07 02:29:58","updatedTime":"2020-09-07 13:26:29","id":23280,"name":"SegmentFault æœ€æ–°çš„æ–‡ç« ","url":"https://segmentfault.com/feeds/blogs","subscriber":142,"website":null,"icon":"https://segmentfault.com/favicon.ico","icon_jsdelivr":null,"description":"","weekly":null,"link":"https://segmentfault.com"},"noPictureArticleList":[],"tmpCommonImgCdnBytes":79444,"tmpBodyImgCdnBytes":491752,"tmpBgImgCdnBytes":0,"extra4":{"start":1602258095627,"total":0,"statList":[{"spend":53542,"msg":"è·å–xmlå†…å®¹"},{"spend":14308,"msg":"è§£é‡Šæ–‡ç« "},{"spend":0,"msg":"ä¸Šä¼ å°é¢å›¾åˆ°cdn"},{"spend":1,"msg":"ä¿®æ­£å°é¢å›¾ä¸Šä¼ å¤±è´¥é‡æ–°ä¸Šä¼ "},{"spend":10659,"msg":"æ­£æ–‡é“¾æ¥ä¸Šä¼ åˆ°cdn"}]},"extra5":16,"extra6":16,"extra7ImgCdnFailResultVector":[],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://us-032.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-021.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe63.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-024.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-011.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe-25.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe21.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-036.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-033.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-004.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe67.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-51.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-008.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-029.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-012.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVcfO3r","sourceStatusCode":200,"destWidth":800,"destHeight":264,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx30/cdn88@2020_5/2020/10/09/15-42-59-554_92d6d16562c698e2.webp","sourceBytes":79444,"destBytes":79444,"feedId":23280,"totalSpendMs":4478,"convertSpendMs":0,"createdTime":"2020-10-09 23:42:56","host":"us-029*","referer":"https://segmentfault.com/a/1190000030850326","linkMd5ListStr":"578419221cd55cbd8864d169e5e5213f,578419221cd55cbd8864d169e5e5213f","githubUser":"myreaderx30","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"77.6 KB","destSize":"77.6 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVcfQ3q","sourceStatusCode":200,"destWidth":800,"destHeight":198,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx6/cdn40@2020_5/2020/10/09/15-43-03-635_dd1b61671b879bda.webp","sourceBytes":30930,"destBytes":30930,"feedId":23280,"totalSpendMs":3914,"convertSpendMs":0,"createdTime":"2020-10-09 23:43:00","host":"europe-25*","referer":"https://segmentfault.com/a/1190000030850326","linkMd5ListStr":"578419221cd55cbd8864d169e5e5213f","githubUser":"myreaderx6","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"30.2 KB","destSize":"30.2 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVcgrCF","sourceStatusCode":200,"destWidth":800,"destHeight":464,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx2/cdn99@2020_2/2020/10/09/15-43-03-714_84bbd7282f33d5de.webp","sourceBytes":38500,"destBytes":38500,"feedId":23280,"totalSpendMs":4223,"convertSpendMs":0,"createdTime":"2020-10-09 23:43:00","host":"europe67*","referer":"https://segmentfault.com/a/1190000030850326","linkMd5ListStr":"578419221cd55cbd8864d169e5e5213f","githubUser":"myreaderx2","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"37.6 KB","destSize":"37.6 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLW2i","sourceStatusCode":200,"destWidth":800,"destHeight":321,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn20@2020_4/2020/10/09/15-43-03-909_8490036c74a0a300.webp","sourceBytes":29462,"destBytes":29462,"feedId":23280,"totalSpendMs":4323,"convertSpendMs":0,"createdTime":"2020-10-09 23:43:00","host":"europe21*","referer":"https://segmentfault.com/a/1190000030850326","linkMd5ListStr":"578419221cd55cbd8864d169e5e5213f","githubUser":"myreaderx27","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"28.8 KB","destSize":"28.8 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVcgqnX","sourceStatusCode":200,"destWidth":800,"destHeight":344,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn3@2020_2/2020/10/09/15-43-04-367_4bb09a82f28e1bba.webp","sourceBytes":39166,"destBytes":39166,"feedId":23280,"totalSpendMs":4640,"convertSpendMs":0,"createdTime":"2020-10-09 23:43:00","host":"us-032*","referer":"https://segmentfault.com/a/1190000030850326","linkMd5ListStr":"578419221cd55cbd8864d169e5e5213f","githubUser":"myreaderx33","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"38.2 KB","destSize":"38.2 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVcgt1W","sourceStatusCode":200,"destWidth":800,"destHeight":277,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx4/cdn52@2020_1/2020/10/09/15-43-04-241_549cfc26dcee4241.webp","sourceBytes":34750,"destBytes":34750,"feedId":23280,"totalSpendMs":4581,"convertSpendMs":0,"createdTime":"2020-10-09 23:43:00","host":"us-029*","referer":"https://segmentfault.com/a/1190000030850326","linkMd5ListStr":"578419221cd55cbd8864d169e5e5213f","githubUser":"myreaderx4","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"33.9 KB","destSize":"33.9 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVcgWLd","sourceStatusCode":200,"destWidth":800,"destHeight":317,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx19/cdn15@2020_5/2020/10/09/15-43-05-569_5503451204261295.webp","sourceBytes":27844,"destBytes":27844,"feedId":23280,"totalSpendMs":5855,"convertSpendMs":0,"createdTime":"2020-10-09 23:43:00","host":"us-008*","referer":"https://segmentfault.com/a/1190000030850326","linkMd5ListStr":"578419221cd55cbd8864d169e5e5213f","githubUser":"myreaderx19","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"27.2 KB","destSize":"27.2 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVcglbR","sourceStatusCode":200,"destWidth":800,"destHeight":410,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx1/cdn47@2020_6/2020/10/09/15-43-05-690_cfe9e1c95f736b09.webp","sourceBytes":21956,"destBytes":21956,"feedId":23280,"totalSpendMs":5942,"convertSpendMs":0,"createdTime":"2020-10-09 23:43:00","host":"us-51*","referer":"https://segmentfault.com/a/1190000030850326","linkMd5ListStr":"578419221cd55cbd8864d169e5e5213f","githubUser":"myreaderx1","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"21.4 KB","destSize":"21.4 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbLW2d","sourceStatusCode":200,"destWidth":800,"destHeight":425,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx16/cdn23@2020_5/2020/10/09/15-43-05-955_7f2d6ccf06537d8e.webp","sourceBytes":28624,"destBytes":28624,"feedId":23280,"totalSpendMs":6212,"convertSpendMs":0,"createdTime":"2020-10-09 23:43:00","host":"us-012*","referer":"https://segmentfault.com/a/1190000030850326","linkMd5ListStr":"578419221cd55cbd8864d169e5e5213f","githubUser":"myreaderx16","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"28 KB","destSize":"28 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbK5q4","sourceStatusCode":200,"destWidth":800,"destHeight":392,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx3/cdn30@2020_1/2020/10/09/15-43-06-010_86ca3f478a72ec4a.webp","sourceBytes":42778,"destBytes":42778,"feedId":23280,"totalSpendMs":6440,"convertSpendMs":0,"createdTime":"2020-10-09 23:43:00","host":"us-024*","referer":"https://segmentfault.com/a/1190000030850326","linkMd5ListStr":"578419221cd55cbd8864d169e5e5213f","githubUser":"myreaderx3","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"41.8 KB","destSize":"41.8 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVcgnhV","sourceStatusCode":200,"destWidth":800,"destHeight":312,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx5oss/cdn44@2020_2/2020/10/09/15-43-05-730_315a8ab747fa4d5b.webp","sourceBytes":33064,"destBytes":33064,"feedId":23280,"totalSpendMs":6346,"convertSpendMs":0,"createdTime":"2020-10-09 23:43:00","host":"europe63*","referer":"https://segmentfault.com/a/1190000030850326","linkMd5ListStr":"578419221cd55cbd8864d169e5e5213f","githubUser":"myreaderx5oss","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"32.3 KB","destSize":"32.3 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbK5q2","sourceStatusCode":200,"destWidth":800,"destHeight":285,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx7/cdn26@2020_6/2020/10/09/15-43-06-331_13d097ff607bbc49.webp","sourceBytes":27158,"destBytes":27158,"feedId":23280,"totalSpendMs":6611,"convertSpendMs":0,"createdTime":"2020-10-09 23:43:00","host":"us-036*","referer":"https://segmentfault.com/a/1190000030850326","linkMd5ListStr":"578419221cd55cbd8864d169e5e5213f","githubUser":"myreaderx7","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"26.5 KB","destSize":"26.5 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbK5q5","sourceStatusCode":200,"destWidth":800,"destHeight":386,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx24/cdn34@2020_3/2020/10/09/15-43-07-423_6b375fb8f805f0e0.webp","sourceBytes":45396,"destBytes":45396,"feedId":23280,"totalSpendMs":7709,"convertSpendMs":0,"createdTime":"2020-10-09 23:43:00","host":"us-011*","referer":"https://segmentfault.com/a/1190000030850326","linkMd5ListStr":"578419221cd55cbd8864d169e5e5213f","githubUser":"myreaderx24","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"44.3 KB","destSize":"44.3 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVcgvri","sourceStatusCode":200,"destWidth":800,"destHeight":419,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx18/cdn11@2020_1/2020/10/09/15-43-08-257_2aea5b02596a4a68.webp","sourceBytes":28720,"destBytes":28720,"feedId":23280,"totalSpendMs":8607,"convertSpendMs":0,"createdTime":"2020-10-09 23:43:00","host":"us-021*","referer":"https://segmentfault.com/a/1190000030850326","linkMd5ListStr":"578419221cd55cbd8864d169e5e5213f","githubUser":"myreaderx18","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"28 KB","destSize":"28 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbCDtT","sourceStatusCode":200,"destWidth":800,"destHeight":362,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn6@2020_2/2020/10/09/15-43-09-019_7372cefbe8143c9a.webp","sourceBytes":19718,"destBytes":19718,"feedId":23280,"totalSpendMs":9284,"convertSpendMs":0,"createdTime":"2020-10-09 23:43:00","host":"us-033*","referer":"https://segmentfault.com/a/1190000030850326","linkMd5ListStr":"578419221cd55cbd8864d169e5e5213f","githubUser":"myreaderx11","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"19.3 KB","destSize":"19.3 KB","compressRate":"100%"},{"code":1,"isDone":false,"source":"https://segmentfault.com/img/bVbMu1o","sourceStatusCode":200,"destWidth":800,"destHeight":389,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx15/cdn96@2020_4/2020/10/09/15-43-10-319_5b66d092ecae1af4.webp","sourceBytes":43686,"destBytes":43686,"feedId":23280,"totalSpendMs":10616,"convertSpendMs":0,"createdTime":"2020-10-09 23:43:00","host":"us-004*","referer":"https://segmentfault.com/a/1190000030850326","linkMd5ListStr":"578419221cd55cbd8864d169e5e5213f","githubUser":"myreaderx15","githubHttpCode":201,"extra22GetBytesInfo":"1ã€æ²¡æœ‰Refererå­—æ®µ","extra23historyStatusCode":[200],"sourceSize":"42.7 KB","destSize":"42.7 KB","compressRate":"100%"}],"successGithubMap":{"myreaderx7":1,"myreaderx15":1,"myreaderx27":1,"myreaderx16":1,"myreaderx6":1,"myreaderx4":1,"myreaderx11":1,"myreaderx3":1,"myreaderx33":1,"myreaderx2":1,"myreaderx1":1,"myreaderx24":1,"myreaderx30":1,"myreaderx5oss":1,"myreaderx18":1,"myreaderx19":1},"failGithubMap":{}}
{"code":1,"isDone":false,"toInsertArticleList":[{"createdTime":"2020-10-13 06:02:35","updatedTime":"2020-10-13 06:02:35","title":"单机40万QPS，搜狗WF框架，今年最值得学习的开源代码","link":"http://weixin.sogou.com/weixin?type=2&query=%E6%9E%B6%E6%9E%84%E5%B8%88%E4%B9%8B%E8%B7%AF+%E5%8D%95%E6%9C%BA40%E4%B8%87QPS%EF%BC%8C%E6%90%9C%E7%8B%97WF%E6%A1%86%E6%9E%B6%EF%BC%8C%E4%BB%8A%E5%B9%B4%E6%9C%80%E5%80%BC%E5%BE%97%E5%AD%A6%E4%B9%A0%E7%9A%84%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81","description":"<div><div><div id=\"media\" class=\"rich_media_thumb_wrp\">\n\n            <img class=\"rich_media_thumb\" src=\"http://img.100weidu.com/sz_mmbiz_jpg/YrezxckhYOyia7rkRySib8dUr3AITVyvwicvyTaoVaia58SqDd9Tw9h811yALJcTKiaKibRf8El9DtwcDWBZAVt7nXrw?imageView2/1/w/600\">\n        </div>\n    \n\n    \n\n    <div class=\"rich_media_content\" id=\"js_content\">\n                    \n\n                    \n\n                    \n                    \n                    <section style=\"line-height: 1.75em;\" data-mpa-powered-by=\"yiban.io\"><span style=\"font-size: 15px;letter-spacing: 1px;\">职业生涯的前五年，基本上都在做<strong>即时通讯</strong>业务，由于业务的特殊性，吞吐量极大，时延不这么敏感，团队内部单独开发了一套纯异步omni框架。</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"> </span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">学习omni框架内核，对职业生涯的提升极大，<strong>协议设计与实现</strong>，<strong>底层网络通信</strong>，<strong>多线程同步与互斥</strong>，<strong>同步RPC</strong>，<strong>异步RPC</strong>，<strong>服务器框架</strong>… 掌握了一套RPC内核原理与细节，基本上国内大部分公司的offer能手到擒来。</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"> </span></section><section style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">很多朋友问，如何学习RPC内核知识？</span></strong></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">我的回答是，</span><span style=\"font-size: 15px;letter-spacing: 1px;color: rgb(255, 76, 0);\">直接看源码</span><span style=\"font-size: 15px;letter-spacing: 1px;\">。</span></section><section style=\"line-height: 1.75em;\"><br></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">代码面前，没有秘密，<strong>看源码，写demo，单步调试</strong>，比听任何大神吹牛，比看任何理论书籍，都来得直接。</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"> </span></section><section style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">又有朋友问，目前开源的brpc以及thrift，都太重了，有没有更轻量级的服务端框架呢？</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\"></span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">这里，我强烈推荐，</span><span style=\"font-size: 15px;letter-spacing: 1px;color: rgb(255, 76, 0);\">搜狗开源的轻量级高性能服务器引擎WF</span><span style=\"font-size: 15px;letter-spacing: 1px;\">：</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（1）看其代码，及其清爽易懂；</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（2）demo简单，单步调试容易；</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（3）doc比较全，doc与src同步更新，比起行业内一些“为了开源而开源”的KPI项目，显得有诚意多了；</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"><br></span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">个人觉得搜狗的WF框架，是目前国内开源的服务器引擎中<strong>最适合学习的</strong>。</span></section><section style=\"line-height: 1.75em;\"><span style=\"color: rgb(0, 128, 255);\"><em><span style=\"font-size: 15px;letter-spacing: 1px;\">画外音：文末有github地址。</span></em></span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"> </span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">这里，把自己的学习心得，以及大家可能关心的问题，简单聊一聊。</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"> </span></section><section style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">什么是WF，它是一个娱乐级框架，还是一个工业级框架？</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\"></span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">WF，是搜狗开源的C++服务器引擎框架。</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"> </span></section><section style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">WF的设计目标是</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\">：</span><span style=\"font-size: 15px;letter-spacing: 1px;color: rgb(255, 76, 0);\">轻量级，高性能</span><span style=\"font-size: 15px;letter-spacing: 1px;\">。</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"> </span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">轻量级，是指简洁，搜狗几乎所有的C++后端服务，包含但不限于搜索，输入法，广告等都是基于这个框架，每天处理超过百亿的请求，它是一个已经<strong>经过多年线上考验的工业级框架</strong>。</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"> </span></section><section style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">轻量级， WF真的做到了吗？</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\"></span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">大伙可以看下，用WF如何搭建http服务器：</span></section><p style=\"text-align: center;\"><img class=\"rich_pages js_insertlocalimg\" data-ratio=\"0.4694708276797829\" data-s=\"300,640\" data-type=\"png\" data-w=\"737\" style=\"max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/sz_mmbiz_png/YrezxckhYOyia7rkRySib8dUr3AITVyvwicx0EHMtqgaHz1xzUylicicUmhamr6rUMLCVRibSPicsLqgSeeJdKh9E7NKg/640?wx_fmt=png\"></p><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">这一段代码单步执行下来，IO线程，工作线程，任务队列，线程同步互斥机制，超时处理机制，异常处理机制… 对于一个服务器框架，基本就拿下七八成。</span><br></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"> </span></section><section style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">高性能，WF真的做到了吗？</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\"></span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">大伙可以看下，WF的单机压测表现：</span></section><p style=\"text-align: center;\"><img class=\"rich_pages js_insertlocalimg\" data-ratio=\"0.6023809523809524\" data-s=\"300,640\" data-type=\"png\" data-w=\"840\" style=\"max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/sz_mmbiz_png/YrezxckhYOyia7rkRySib8dUr3AITVyvwicibibUeO0JMFzXRL78WB7OpgZE52LSIrH8NYH6c5UVIK5Bl7PHEs8gjOg/640?wx_fmt=png\"></p><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">你没有看错，单机每秒50W的QPS，特别是高并发压测的情况下，比nginx和brpc表现都要好。</span><br></section><section style=\"line-height: 1.75em;\"><span style=\"color: rgb(0, 128, 255);\"><em><span style=\"font-size: 15px;letter-spacing: 1px;\">画外音：</span></em></span></section><section style=\"line-height: 1.75em;\"><span style=\"color: rgb(0, 128, 255);\"><em><span style=\"font-size: 15px;letter-spacing: 1px;\">（1）测试硬件：CPU 40 core @ 2.20GHz，内存192G，网卡25000Mb/s；</span></em></span></section><section style=\"line-height: 1.75em;\"><span style=\"color: rgb(0, 128, 255);\"><em><span style=\"font-size: 15px;letter-spacing: 1px;\">（2）并发配置：nginx auto进程数为40，brpc配置nthreads为40，WF配置16个poller线程与20个handler线程；</span></em></span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"> </span></section><section style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">除了轻量级与高性能，WF还有哪些特点？</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\"></span></section><section style=\"line-height: 1.75em;\"><br></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">除了核心设计目标的两点，WF还有以下优势：</span></section><section style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">（1）易用性</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\"></span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">相比go语言的简单，天下苦C++久矣，虽然C++后续也推出了各种简易用法，但并不是所有用户了解与掌握，目前WF的标准是C++11，把很多复杂性都进行了屏蔽。</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"> </span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">用户再也不用关注连接池、线程池、文件句柄，以及各种异步通知机制，WF都进行了封装与细节屏蔽。</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"> </span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">使用WF，<strong>用户只需要关注两个核心概念</strong>：<strong>任务</strong></span><span style=\"letter-spacing: 1px;font-size: 12px;\">（task）</span><span style=\"font-size: 15px;letter-spacing: 1px;\">与<strong>任务流</strong></span><span style=\"letter-spacing: 1px;font-size: 12px;\">（series）</span><span style=\"font-size: 15px;letter-spacing: 1px;\">。</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"> </span></section><section style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">（2）通信与计算一体的解决方案</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\"></span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">大部分RPC框架着重解决通信的问题，而计算与任务调度框架需要用户自己实现，而WF框架则将二者融为一体，一并解决了。</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"> </span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">WF把网络，CPU，磁盘IO，GPU，计时器，计数器都进行了封装，统一当成资源，使用者可以任意进行调度与组合，而不需要关注其底层的epoll，pthread，aio，cuda，timer_fd，count计数等。</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"> </span></section><section style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">（3）架构层次良好，非常方便业务逻辑的实现</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\"></span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">WF对于业务逻辑处理进行了抽象：</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">第一，串行由任务组成；</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">第二，并行由串行组成；</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">第三，并行是一种任务；</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"> </span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">任务和任务流是WF的基石，WF本身就是一套完备的、可以收敛的、容易控制的业务逻辑任务流模型。</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"> </span></section><section style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">（4）文档很全</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\"></span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">除了轻量级，简单易用之外，其文档和demo非常齐全，对于新手及其友好。而且碰到代码中不明白的地方，可以直接联系开发小组，作者会直接和大家交流，避免二手消息。</span></section><p style=\"text-align: center;\"><img class=\"rich_pages js_insertlocalimg\" data-ratio=\"0.52578125\" data-s=\"300,640\" data-type=\"png\" data-w=\"1280\" style=\"max-width: 600px\" src=\"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/sz_mmbiz_png/YrezxckhYOyia7rkRySib8dUr3AITVyvwicmiaJSC6fxcK63EZEHu6sgQmgX7aIwBriaJnqZglzvVNuyvwzBVbDibW5Q/640?wx_fmt=png\"></p><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">这也是推荐WF成为大家学习上手的框架，很重要的原因。</span><br></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"> </span></section><section style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">可能有朋友会问，说框架太宏观，研究WF，具体能学到哪些技术内容呢？</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\"></span></section><section style=\"line-height: 1.75em;\"><br></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">简单的举几个例子：</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（1）<strong>学习错误处理</strong>：为了提升性能，WF没有使用异常，研究WF能系统性学习错误处理，帮助我们写出极高质量的代码；</span></section><section style=\"line-height: 1.75em;\"><span style=\"color: rgb(0, 128, 255);\"><em><span style=\"color: rgb(0, 128, 255);font-size: 15px;letter-spacing: 1px;\">画外音：扪心自问，去掉异常，你写的代码会不会随时崩溃。</span></em></span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"> </span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（2）<strong>学习超时处理</strong>：各种通信超时，任务超时，你真的理解其内核么？超时的原因与处理，WF是学习利器。</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"> </span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（3）<strong>学习异步IO</strong>：Linux支持非常高效的异步IO系统调度，如何使用这些异步IO去实现框架，去封装任务，实现业务逻辑任务流化，看看WF的玩法。</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"> </span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（4）<strong>学习协议设计</strong>：学习如何利用WF框架，实现brpc和thrift，实现自己自定义的client/server协议，实现自己的RPC系统。</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"> </span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（5）<strong>学习计时器与计数器</strong>：很有朋友timer和count用的非常多，但它底层是怎么实现的，值得深入研究。</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"> </span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（6）<strong>学习服务治理</strong>：WF有一套完整的服务治理方案，包含<strong>服务路由，熔断与恢复，负载均衡，服务主备。可用于实现服务发现与服务网格</strong></span><span style=\"letter-spacing: 1px;font-size: 12px;\">（service mesh）</span><span style=\"font-size: 15px;letter-spacing: 1px;\">系统。</span></section><section style=\"line-height: 1.75em;\"><span style=\"color: rgb(0, 128, 255);\"><em><span style=\"color: rgb(0, 128, 255);font-size: 15px;letter-spacing: 1px;\">画外音：这一部分，可以查看源码的upstream子模块。</span></em></span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"> </span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">（7）…</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\">今年，看的最清爽的代码，最适合了解通信内核，RPC内核，调度框架内核的引擎，强烈推荐给大家。</span><span style=\"font-size: 15px;letter-spacing: 1px;\">欢迎大家Fork，欢迎大家标星。</span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"><br></span></section><section style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">地址</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\">：https://github.com/sogou/workflow</span></section><section style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">Star</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\">：1400+</span></section><section style=\"line-height: 1.75em;\"><span style=\"color: rgb(0, 128, 255);\"><em><span style=\"color: rgb(0, 128, 255);font-size: 15px;letter-spacing: 1px;\">画外音：WF还有很多优秀的设计，等待大家去挖掘。</span></em></span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"></span></section><section style=\"line-height: 1.75em;\"><br></section><section style=\"line-height: 1.75em;\"><strong><span style=\"font-size: 15px;letter-spacing: 1px;\">阅读原文</span></strong><span style=\"font-size: 15px;letter-spacing: 1px;\">，</span><span style=\"font-size: 15px;letter-spacing: 1px;color: rgb(255, 76, 0);\">直达代码</span><span style=\"font-size: 15px;letter-spacing: 1px;\">，<span style=\"font-size: 15px;letter-spacing: 1px;\">好的代码，一起分享。</span></span></section><section style=\"line-height: 1.75em;\"><span style=\"font-size: 15px;letter-spacing: 1px;\"></span></section>\n                </div>\n\n    \n        <br>\n        <div id=\"js_toobar3\" class=\"rich_media_tool\">\n            <a target=\"_blank\" href=\"https://github.com/sogou/workflow\" id=\"js_view_source\" class=\"media_tool_meta meta_primary\">阅读原文</a>\n        </div>\n    \n    <br>\n\n    \n        <a target=\"_blank\" href=\"http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=2651965399&amp;idx=1&amp;sn=b96d2cd9c8c47d7d1c27b77bacd85137&amp;chksm=bd2d720b8a5afb1df086bf1ce03ff634d57522dea726f096be6094497363d6d597ed94ba217d&amp;scene=0#rd\" style=\"color: blue\" class=\"media_tool_meta meta_primary\">原文</a>\n        <br>\n    \n\n    \n\n    <img alt=\"\" width=\"1px\" height=\"1px\" class=\"\" style=\"width:1px;height:1px;display:none\" src=\"http://www.jintiankansha.me/rss_static/13611/3Bk5v04OLw\"></div></div>","descriptionType":"html","publishedDate":"Tue, 22 Sep 2020 10:01:00 +0000","feedId":2240,"bgimg":"http://img.100weidu.com/sz_mmbiz_jpg/YrezxckhYOyia7rkRySib8dUr3AITVyvwicvyTaoVaia58SqDd9Tw9h811yALJcTKiaKibRf8El9DtwcDWBZAVt7nXrw?imageView2/1/w/600","linkMd5":"3e9636d852695f06fcc29e4fcda4a2d8","bgimgJsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn5@2020_3/2020/10/12/22-02-36-476_8ce6cfc505b8d91b.webp","destWidth":500,"destHeight":212,"sourceBytes":6315,"destBytes":4786,"author":"","articleImgCdnMap":{"http://img.100weidu.com/sz_mmbiz_jpg/YrezxckhYOyia7rkRySib8dUr3AITVyvwicvyTaoVaia58SqDd9Tw9h811yALJcTKiaKibRf8El9DtwcDWBZAVt7nXrw?imageView2/1/w/600":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn5@2020_3/2020/10/12/22-02-36-476_8ce6cfc505b8d91b.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/sz_mmbiz_png/YrezxckhYOyia7rkRySib8dUr3AITVyvwicx0EHMtqgaHz1xzUylicicUmhamr6rUMLCVRibSPicsLqgSeeJdKh9E7NKg/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn12@2020_3/2020/10/12/22-02-41-871_0c70bab820e6e61e.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/sz_mmbiz_png/YrezxckhYOyia7rkRySib8dUr3AITVyvwicibibUeO0JMFzXRL78WB7OpgZE52LSIrH8NYH6c5UVIK5Bl7PHEs8gjOg/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn18@2020_4/2020/10/12/22-02-57-278_a9c441a0921b2388.webp","http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/sz_mmbiz_png/YrezxckhYOyia7rkRySib8dUr3AITVyvwicmiaJSC6fxcK63EZEHu6sgQmgX7aIwBriaJnqZglzvVNuyvwzBVbDibW5Q/640?wx_fmt=png":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn22@2020_2/2020/10/12/22-03-05-987_4c88ce02dc683e2d.webp","http://www.jintiankansha.me/rss_static/13611/3Bk5v04OLw":null},"publishedOrCreatedDate":1602540155777}],"record":{"createdTime":"2020-10-13 06:02:35","updatedTime":"2020-10-13 06:02:35","feedId":2240,"fetchDate":"Mon, 12 Oct 2020 22:02:35 +0000","fetchMs":238,"handleMs":15,"totalMs":31555,"newArticles":0,"totalArticles":5,"status":1,"type":0,"ip":"80d50a82a463017eede47e80eb3f5c35","hostName":"us-013*","requestId":"8bde50eba8934072aa83620f865c77c6_2240","contentType":"application/rss+xml","totalBytes":91746,"bgimgsTotal":1,"bgimgsGithubTotal":1,"articlesImgsTotal":5,"articlesImgsGithubTotal":4,"successGithubMap":{"myreaderx8":1,"myreaderx27":1,"myreaderx33":1,"myreaderx11":1},"failGithubMap":{}},"feed":{"createdTime":"2020-08-24 21:31:38","updatedTime":"2020-09-01 10:02:14","id":2240,"name":"架构师之路","url":"http://feedmaker.kindle4rss.com/feeds/gh_10a6b96351a9.weixin.xml","subscriber":null,"website":null,"icon":"http://www.sogou.com/images/logo/new/favicon.ico?v=4","icon_jsdelivr":"https://cdn.jsdelivr.net/gh/myreaderx63/cdn89@2020_4/2020/09/01/02-02-15-297_d24121c9beed1de6.ico","description":"架构师之路，坚持撰写接地气的架构文章","weekly":null,"link":null},"noPictureArticleList":[{"createdTime":"2020-10-13 06:03:06","updatedTime":"2020-10-13 06:03:06","id":null,"feedId":2240,"linkMd5":"3e9636d852695f06fcc29e4fcda4a2d8"}],"tmpCommonImgCdnBytes":4786,"tmpBodyImgCdnBytes":86960,"tmpBgImgCdnBytes":0,"extra4":{"start":1602540155424,"total":0,"statList":[{"spend":338,"msg":"获取xml内容"},{"spend":15,"msg":"解释文章"},{"spend":0,"msg":"上传封面图到cdn"},{"spend":1,"msg":"修正封面图上传失败重新上传"},{"spend":29657,"msg":"正文链接上传到cdn"}]},"extra5":5,"extra6":5,"extra7ImgCdnFailResultVector":[{"code":1,"isDone":false,"source":"http://www.jintiankansha.me/rss_static/13611/3Bk5v04OLw","sourceStatusCode":405,"sourceBytes":0,"destBytes":0,"feedId":2240,"totalSpendMs":1014,"convertSpendMs":0,"createdTime":"2020-10-13 06:02:37","host":"europe-25*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E6%9E%B6%E6%9E%84%E5%B8%88%E4%B9%8B%E8%B7%AF+%E5%8D%95%E6%9C%BA40%E4%B8%87QPS%EF%BC%8C%E6%90%9C%E7%8B%97WF%E6%A1%86%E6%9E%B6%EF%BC%8C%E4%BB%8A%E5%B9%B4%E6%9C%80%E5%80%BC%E5%BE%97%E5%AD%A6%E4%B9%A0%E7%9A%84%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81","linkMd5ListStr":"3e9636d852695f06fcc29e4fcda4a2d8","extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[405],"sourceSize":"0","destSize":"0"},{"code":1,"isDone":false,"source":"http://www.jintiankansha.me/rss_static/13611/3Bk5v04OLw","sourceStatusCode":405,"sourceBytes":0,"destBytes":0,"feedId":2240,"totalSpendMs":411,"convertSpendMs":0,"createdTime":"2020-10-13 06:02:38","host":"us-52*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E6%9E%B6%E6%9E%84%E5%B8%88%E4%B9%8B%E8%B7%AF+%E5%8D%95%E6%9C%BA40%E4%B8%87QPS%EF%BC%8C%E6%90%9C%E7%8B%97WF%E6%A1%86%E6%9E%B6%EF%BC%8C%E4%BB%8A%E5%B9%B4%E6%9C%80%E5%80%BC%E5%BE%97%E5%AD%A6%E4%B9%A0%E7%9A%84%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81","linkMd5ListStr":"3e9636d852695f06fcc29e4fcda4a2d8","extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[405],"sourceSize":"0","destSize":"0"}],"extra10_invalidATagHrefValue":{},"extra111_proxyServerAndStatMap":{"http://europe-25.herokuapp.com/":{"failCount":1,"successCount":0,"resultList":[405]},"http://us-001.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://europe64.herokuapp.com/":{"failCount":0,"successCount":1,"resultList":[200]},"http://us-52.herokuapp.com/":{"failCount":1,"successCount":1,"resultList":[405,200]}},"extra12ImgCdnSuccessResultVector":[{"code":1,"isDone":false,"source":"http://img.100weidu.com/sz_mmbiz_jpg/YrezxckhYOyia7rkRySib8dUr3AITVyvwicvyTaoVaia58SqDd9Tw9h811yALJcTKiaKibRf8El9DtwcDWBZAVt7nXrw?imageView2/1/w/600","sourceStatusCode":200,"destWidth":500,"destHeight":212,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx33/cdn5@2020_3/2020/10/12/22-02-36-476_8ce6cfc505b8d91b.webp","sourceBytes":6315,"destBytes":4786,"targetWebpQuality":75,"feedId":2240,"totalSpendMs":1514,"convertSpendMs":8,"createdTime":"2020-10-13 06:02:35","host":"us-026*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E6%9E%B6%E6%9E%84%E5%B8%88%E4%B9%8B%E8%B7%AF+%E5%8D%95%E6%9C%BA40%E4%B8%87QPS%EF%BC%8C%E6%90%9C%E7%8B%97WF%E6%A1%86%E6%9E%B6%EF%BC%8C%E4%BB%8A%E5%B9%B4%E6%9C%80%E5%80%BC%E5%BE%97%E5%AD%A6%E4%B9%A0%E7%9A%84%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81","linkMd5ListStr":"3e9636d852695f06fcc29e4fcda4a2d8,3e9636d852695f06fcc29e4fcda4a2d8","githubUser":"myreaderx33","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"6.2 KB","destSize":"4.7 KB","compressRate":"75.8%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/sz_mmbiz_png/YrezxckhYOyia7rkRySib8dUr3AITVyvwicx0EHMtqgaHz1xzUylicicUmhamr6rUMLCVRibSPicsLqgSeeJdKh9E7NKg/640?wx_fmt=png","sourceStatusCode":200,"destWidth":737,"destHeight":346,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx27/cdn12@2020_3/2020/10/12/22-02-41-871_0c70bab820e6e61e.webp","sourceBytes":27889,"destBytes":18526,"targetWebpQuality":75,"feedId":2240,"totalSpendMs":5354,"convertSpendMs":28,"createdTime":"2020-10-13 06:02:37","host":"us-001*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E6%9E%B6%E6%9E%84%E5%B8%88%E4%B9%8B%E8%B7%AF+%E5%8D%95%E6%9C%BA40%E4%B8%87QPS%EF%BC%8C%E6%90%9C%E7%8B%97WF%E6%A1%86%E6%9E%B6%EF%BC%8C%E4%BB%8A%E5%B9%B4%E6%9C%80%E5%80%BC%E5%BE%97%E5%AD%A6%E4%B9%A0%E7%9A%84%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81","linkMd5ListStr":"3e9636d852695f06fcc29e4fcda4a2d8","githubUser":"myreaderx27","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"27.2 KB","destSize":"18.1 KB","compressRate":"66.4%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/sz_mmbiz_png/YrezxckhYOyia7rkRySib8dUr3AITVyvwicibibUeO0JMFzXRL78WB7OpgZE52LSIrH8NYH6c5UVIK5Bl7PHEs8gjOg/640?wx_fmt=png","sourceStatusCode":200,"destWidth":840,"destHeight":506,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx11/cdn18@2020_4/2020/10/12/22-02-57-278_a9c441a0921b2388.webp","sourceBytes":121639,"destBytes":25700,"targetWebpQuality":75,"feedId":2240,"totalSpendMs":20878,"convertSpendMs":22,"createdTime":"2020-10-13 06:02:37","host":"europe64*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E6%9E%B6%E6%9E%84%E5%B8%88%E4%B9%8B%E8%B7%AF+%E5%8D%95%E6%9C%BA40%E4%B8%87QPS%EF%BC%8C%E6%90%9C%E7%8B%97WF%E6%A1%86%E6%9E%B6%EF%BC%8C%E4%BB%8A%E5%B9%B4%E6%9C%80%E5%80%BC%E5%BE%97%E5%AD%A6%E4%B9%A0%E7%9A%84%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81","linkMd5ListStr":"3e9636d852695f06fcc29e4fcda4a2d8","githubUser":"myreaderx11","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"118.8 KB","destSize":"25.1 KB","compressRate":"21.1%"},{"code":1,"isDone":false,"source":"http://img2.jintiankansha.me/get?src=http://mmbiz.qpic.cn/sz_mmbiz_png/YrezxckhYOyia7rkRySib8dUr3AITVyvwicmiaJSC6fxcK63EZEHu6sgQmgX7aIwBriaJnqZglzvVNuyvwzBVbDibW5Q/640?wx_fmt=png","sourceStatusCode":200,"destWidth":1080,"destHeight":568,"fixedGithubDest":"https://cdn.jsdelivr.net/gh/myreaderx8/cdn22@2020_2/2020/10/12/22-03-05-987_4c88ce02dc683e2d.webp","sourceBytes":189333,"destBytes":42734,"targetWebpQuality":75,"feedId":2240,"totalSpendMs":29551,"convertSpendMs":36,"createdTime":"2020-10-13 06:02:37","host":"us-52*","referer":"http://weixin.sogou.com/weixin?type=2&query=%E6%9E%B6%E6%9E%84%E5%B8%88%E4%B9%8B%E8%B7%AF+%E5%8D%95%E6%9C%BA40%E4%B8%87QPS%EF%BC%8C%E6%90%9C%E7%8B%97WF%E6%A1%86%E6%9E%B6%EF%BC%8C%E4%BB%8A%E5%B9%B4%E6%9C%80%E5%80%BC%E5%BE%97%E5%AD%A6%E4%B9%A0%E7%9A%84%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81","linkMd5ListStr":"3e9636d852695f06fcc29e4fcda4a2d8","githubUser":"myreaderx8","githubHttpCode":201,"extra22GetBytesInfo":"1、没有Referer字段","extra23historyStatusCode":[200],"sourceSize":"184.9 KB","destSize":"41.7 KB","compressRate":"22.6%"}],"successGithubMap":{"myreaderx8":1,"myreaderx27":1,"myreaderx33":1,"myreaderx11":1},"failGithubMap":{}}